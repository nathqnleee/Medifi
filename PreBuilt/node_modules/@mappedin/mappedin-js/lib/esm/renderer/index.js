import{a as xK,b as bK}from"./chunk-VELRTE4Y.js";import{a as E,b as B}from"./chunk-TCVQJ2HF.js";import{a as u,c as Ye,e as Bt,f as A,g as M,h as te,i as ce,j as XS,k as tt}from"./chunk-ZRT45YCM.js";var bA=Ye(((t,e)=>{E(),function(i,n){"use strict";var r="function",o="undefined",s="object",a="string",l="model",h="name",c="type",p="vendor",d="version",f="architecture",g="console",m="mobile",v="tablet",y="smarttv",x="wearable",_="embedded",b="Amazon",M="Apple",E="ASUS",w="BlackBerry",A="Browser",S="Chrome",T="Firefox",C="Google",P="Huawei",I="LG",L="Microsoft",O="Motorola",N="Opera",D="Samsung",R="Sony",q="Xiaomi",B="Zebra",k="Facebook",F=u((function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i}),"extend"),U=u((function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e}),"enumerize"),z=u((function(t,e){return typeof t===a&&-1!==V(e).indexOf(V(t))}),"has"),V=u((function(t){return t.toLowerCase()}),"lowerize"),j=u((function(t){return typeof t===a?t.replace(/[^\d\.]/g,"").split(".")[0]:n}),"majorize"),G=u((function(t,e){if(typeof t===a)return t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof e===o?t:t.substring(0,275)}),"trim"),W=u((function(t,e){for(var i,o,a,l,u,h,c=0;c<e.length&&!u;){var p=e[c],d=e[c+1];for(i=o=0;i<p.length&&!u;)if(u=p[i++].exec(t))for(a=0;a<d.length;a++)h=u[++o],typeof(l=d[a])===s&&l.length>0?2===l.length?typeof l[1]==r?this[l[0]]=l[1].call(this,h):this[l[0]]=l[1]:3===l.length?typeof l[1]!==r||l[1].exec&&l[1].test?this[l[0]]=h?h.replace(l[1],l[2]):n:this[l[0]]=h?l[1].call(this,h,l[2]):n:4===l.length&&(this[l[0]]=h?l[3].call(this,h.replace(l[1],l[2])):n):this[l]=h||n;c+=2}}),"rgxMapper"),H=u((function(t,e){for(var i in e)if(typeof e[i]===s&&e[i].length>0){for(var r=0;r<e[i].length;r++)if(z(e[i][r],t))return"?"===i?n:i}else if(z(e[i],t))return"?"===i?n:i;return t}),"strMapper"),Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,d],[/opios[\/ ]+([\w\.]+)/i],[d,[h,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[h,N]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[h,"UC"+A]],[/\bqbcore\/([\w\.]+)/i],[d,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+A],d],[/\bfocus\/([\w\.]+)/i],[d,[h,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[h,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[h,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[h,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[d,[h,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+A]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+A],d],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,k],d],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[h,S+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,S+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[h,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,d],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[d,[h,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[d,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[d,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[h,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,d]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,V]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",V]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,V]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,D],[c,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,D],[c,m]],[/((ipod|iphone)\d+,\d+)/i],[l,[p,M],[c,m]],[/(ipad\d+,\d+)/i],[l,[p,M],[c,v]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[p,M],[c,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,M],[c,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,P],[c,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[p,P],[c,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[p,q],[c,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,q],[c,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[c,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[c,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[c,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,O],[c,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,O],[c,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,I],[c,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,I],[c,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[c,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[c,m]],[/(pixel c)\b/i],[l,[p,C],[c,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,C],[c,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,R],[c,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,R],[c,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[c,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,b],[c,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,b],[c,m]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[c,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,w],[c,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,E],[c,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,E],[c,m]],[/(nexus 9)/i],[l,[p,"HTC"],[c,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[c,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[c,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[c,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,"Sharp"],[c,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[c,m]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[c,v]],[/(surface duo)/i],[l,[p,L],[c,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[c,m]],[/(u304aa)/i],[l,[p,"AT&T"],[c,m]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[c,m]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[c,v]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[c,v]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[c,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[c,v]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[c,v]],[/\b(k88) b/i],[l,[p,"ZTE"],[c,v]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[c,m]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[c,m]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[c,v]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[c,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[c,v]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[c,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[c,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[c,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[c,m]],[/\b(ph-1) /i],[l,[p,"Essential"],[c,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[c,v]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[c,v]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[c,v]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[c,v]],[/(sprint) (\w+)/i],[p,l,[c,m]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,L],[c,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,B],[c,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,B],[c,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[c,g]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[c,g]],[/(playstation [345portablevi]+)/i],[l,[p,R],[c,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,L],[c,g]],[/smart-tv.+(samsung)/i],[p,[c,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,D],[c,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,I],[c,y]],[/(apple) ?tv/i],[p,[l,M+" TV"],[c,y]],[/crkey/i],[[l,S+"cast"],[p,C],[c,y]],[/droid.+aft(\w)( bui|\))/i],[l,[p,b],[c,y]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[c,y]],[/(bravia[\w- ]+) bui/i],[l,[p,R],[c,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,G],[l,G],[c,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,y]],[/((pebble))app/i],[p,l,[c,x]],[/droid.+; (glass) \d/i],[l,[p,C],[c,x]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,B],[c,x]],[/(quest( 2)?)/i],[l,[p,k],[c,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[c,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[c,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[c,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,v]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[c,m]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[d,H,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[d,H,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[d,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,d],[/\(bb(10);/i],[d,[h,w]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[h,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[h,S+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],d],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,d],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,d]]},K=u((function(t,e){if(typeof t===s&&(e=t,t=n),!(this instanceof K))return new K(t,e).getResult();var r=t||(typeof i!==o&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),u=e?F(X,e):X;return this.getBrowser=function(){var t={};return t[h]=n,t[d]=n,W.call(t,r,u.browser),t.major=j(t.version),t},this.getCPU=function(){var t={};return t[f]=n,W.call(t,r,u.cpu),t},this.getDevice=function(){var t={};return t[p]=n,t[l]=n,t[c]=n,W.call(t,r,u.device),t},this.getEngine=function(){var t={};return t[h]=n,t[d]=n,W.call(t,r,u.engine),t},this.getOS=function(){var t={};return t[h]=n,t[d]=n,W.call(t,r,u.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(t){return r=typeof t===a&&t.length>275?G(t,275):t,this},this.setUA(r),this}),"UAParser");K.VERSION="0.7.31",K.BROWSER=U([h,d,"major"]),K.CPU=U([f]),K.DEVICE=U([l,p,c,g,m,y,v,x,_]),K.ENGINE=K.OS=U([h,d]),typeof t!==o?(typeof e!==o&&e.exports&&(t=e.exports=K),t.UAParser=K):typeof define===r&&define.amd?define((function(){return K})):typeof i!==o&&(i.UAParser=K);var Z=typeof i!==o&&(i.jQuery||i.Zepto);if(Z&&!Z.ua){var Q=new K;Z.ua=Q.getResult(),Z.ua.get=function(){return Q.getUA()},Z.ua.set=function(t){Q.setUA(t);var e=Q.getResult();for(var i in e)Z.ua[i]=e[i]}}}("object"==typeof window?window:t)})),jk=Ye(((t,e)=>{E();var i="__lodash_hash_undefined__",n=9007199254740991,r="[object Arguments]",o="[object Array]",s="[object Boolean]",a="[object Date]",l="[object Error]",h="[object Function]",c="[object Map]",p="[object Number]",d="[object Object]",f="[object Promise]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",x="[object ArrayBuffer]",_="[object DataView]",b=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,w={};w["[object Float32Array]"]=w["[object Float64Array]"]=w["[object Int8Array]"]=w["[object Int16Array]"]=w["[object Int32Array]"]=w["[object Uint8Array]"]=w["[object Uint8ClampedArray]"]=w["[object Uint16Array]"]=w["[object Uint32Array]"]=!0,w[r]=w[o]=w[x]=w[s]=w[_]=w[a]=w[l]=w[h]=w[c]=w[p]=w[d]=w[g]=w[m]=w[v]=w[y]=!1;var A="object"==typeof global&&global&&global.Object===Object&&global,S="object"==typeof self&&self&&self.Object===Object&&self,T=A||S||Function("return this")(),C="object"==typeof t&&t&&!t.nodeType&&t,P=C&&"object"==typeof e&&e&&!e.nodeType&&e,I=P&&P.exports===C,L=I&&A.process,O=function(){try{return L&&L.binding&&L.binding("util")}catch{}}(),N=O&&O.isTypedArray;function D(t,e){for(var i=-1,n=null==t?0:t.length,r=0,o=[];++i<n;){var s=t[i];e(s,i,t)&&(o[r++]=s)}return o}function R(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function q(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function B(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function k(t){return function(e){return t(e)}}function F(t,e){return t.has(e)}function U(t,e){return null==t?void 0:t[e]}function z(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function V(t,e){return function(i){return t(e(i))}}function j(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}u(D,"arrayFilter"),u(R,"arrayPush"),u(q,"arraySome"),u(B,"baseTimes"),u(k,"baseUnary"),u(F,"cacheHas"),u(U,"getValue"),u(z,"mapToArray"),u(V,"overArg"),u(j,"setToArray");var G,W=Array.prototype,H=Function.prototype,Y=Object.prototype,X=T["__core-js_shared__"],K=H.toString,Z=Y.hasOwnProperty,Q=(G=/[^.]+$/.exec(X&&X.keys&&X.keys.IE_PROTO||""))?"Symbol(src)_1."+G:"",J=Y.toString,$=RegExp("^"+K.call(Z).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tt=I?T.Buffer:void 0,et=T.Symbol,it=T.Uint8Array,nt=Y.propertyIsEnumerable,rt=W.splice,ot=et?et.toStringTag:void 0,st=Object.getOwnPropertySymbols,at=tt?tt.isBuffer:void 0,lt=V(Object.keys,Object),ut=he(T,"DataView"),ht=he(T,"Map"),ct=he(T,"Promise"),pt=he(T,"Set"),dt=he(T,"WeakMap"),ft=he(Object,"create"),gt=xe(ut),mt=xe(ht),vt=xe(ct),yt=xe(pt),xt=xe(dt),_t=et?et.prototype:void 0,bt=_t?_t.valueOf:void 0;function Mt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Et(){this.__data__=ft?ft(null):{},this.size=0}function wt(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function At(t){var e=this.__data__;if(ft){var n=e[t];return n===i?void 0:n}return Z.call(e,t)?e[t]:void 0}function St(t){var e=this.__data__;return ft?void 0!==e[t]:Z.call(e,t)}function Tt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ft&&void 0===e?i:e,this}function Ct(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Pt(){this.__data__=[],this.size=0}function It(t){var e=this.__data__,i=Zt(e,t);return!(i<0)&&(i==e.length-1?e.pop():rt.call(e,i,1),--this.size,!0)}function Lt(t){var e=this.__data__,i=Zt(e,t);return i<0?void 0:e[i][1]}function Ot(t){return Zt(this.__data__,t)>-1}function Nt(t,e){var i=this.__data__,n=Zt(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}function Dt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Rt(){this.size=0,this.__data__={hash:new Mt,map:new(ht||Ct),string:new Mt}}function qt(t){var e=ue(this,t).delete(t);return this.size-=e?1:0,e}function Bt(t){return ue(this,t).get(t)}function kt(t){return ue(this,t).has(t)}function Ft(t,e){var i=ue(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}function Ut(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Dt;++e<i;)this.add(t[e])}function zt(t){return this.__data__.set(t,i),this}function Vt(t){return this.__data__.has(t)}function jt(t){var e=this.__data__=new Ct(t);this.size=e.size}function Gt(){this.__data__=new Ct,this.size=0}function Wt(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function Ht(t){return this.__data__.get(t)}function Yt(t){return this.__data__.has(t)}function Xt(t,e){var i=this.__data__;if(i instanceof Ct){var n=i.__data__;if(!ht||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new Dt(n)}return i.set(t,e),this.size=i.size,this}function Kt(t,e){var i=Me(t),n=!i&&be(t),r=!i&&!n&&we(t),o=!i&&!n&&!r&&Ie(t),s=i||n||r||o,a=s?B(t.length,String):[],l=a.length;for(var u in t)(e||Z.call(t,u))&&(!s||!("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||fe(u,l)))&&a.push(u);return a}function Zt(t,e){for(var i=t.length;i--;)if(_e(t[i][0],e))return i;return-1}function Qt(t,e,i){var n=e(t);return Me(t)?n:R(n,i(t))}function Jt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":ot&&ot in Object(t)?ce(t):ye(t)}function $t(t){return Pe(t)&&Jt(t)==r}function te(t,e,i,n,r){return t===e||(null==t||null==e||!Pe(t)&&!Pe(e)?t!=t&&e!=e:ee(t,e,i,n,te,r))}function ee(t,e,i,n,s,a){var l=Me(t),u=Me(e),h=l?o:de(t),c=u?o:de(e),p=(h=h==r?d:h)==d,f=(c=c==r?d:c)==d,g=h==c;if(g&&we(t)){if(!we(e))return!1;l=!0,p=!1}if(g&&!p)return a||(a=new jt),l||Ie(t)?oe(t,e,i,n,s,a):se(t,e,h,i,n,s,a);if(!(1&i)){var m=p&&Z.call(t,"__wrapped__"),v=f&&Z.call(e,"__wrapped__");if(m||v){var y=m?t.value():t,x=v?e.value():e;return a||(a=new jt),s(y,x,i,n,a)}}return!!g&&(a||(a=new jt),ae(t,e,i,n,s,a))}function ie(t){return!(!Ce(t)||me(t))&&(Se(t)?$:b).test(xe(t))}function ne(t){return Pe(t)&&Te(t.length)&&!!w[Jt(t)]}function re(t){if(!ve(t))return lt(t);var e=[];for(var i in Object(t))Z.call(t,i)&&"constructor"!=i&&e.push(i);return e}function oe(t,e,i,n,r,o){var s=1&i,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var h=-1,c=!0,p=2&i?new Ut:void 0;for(o.set(t,e),o.set(e,t);++h<a;){var d=t[h],f=e[h];if(n)var g=s?n(f,d,h,e,t,o):n(d,f,h,t,e,o);if(void 0!==g){if(g)continue;c=!1;break}if(p){if(!q(e,(function(t,e){if(!F(p,e)&&(d===t||r(d,t,i,n,o)))return p.push(e)}))){c=!1;break}}else if(d!==f&&!r(d,f,i,n,o)){c=!1;break}}return o.delete(t),o.delete(e),c}function se(t,e,i,n,r,o,u){switch(i){case _:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!o(new it(t),new it(e)));case s:case a:case p:return _e(+t,+e);case l:return t.name==e.name&&t.message==e.message;case g:case v:return t==e+"";case c:var h=z;case m:var d=1&n;if(h||(h=j),t.size!=e.size&&!d)return!1;var f=u.get(t);if(f)return f==e;n|=2,u.set(t,e);var y=oe(h(t),h(e),n,r,o,u);return u.delete(t),y;case"[object Symbol]":if(bt)return bt.call(t)==bt.call(e)}return!1}function ae(t,e,i,n,r,o){var s=1&i,a=le(t),l=a.length;if(l!=le(e).length&&!s)return!1;for(var u=l;u--;){var h=a[u];if(!(s?h in e:Z.call(e,h)))return!1}var c=o.get(t);if(c&&o.get(e))return c==e;var p=!0;o.set(t,e),o.set(e,t);for(var d=s;++u<l;){var f=t[h=a[u]],g=e[h];if(n)var m=s?n(g,f,h,e,t,o):n(f,g,h,t,e,o);if(!(void 0===m?f===g||r(f,g,i,n,o):m)){p=!1;break}d||(d="constructor"==h)}if(p&&!d){var v=t.constructor,y=e.constructor;v!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(p=!1)}return o.delete(t),o.delete(e),p}function le(t){return Qt(t,Le,pe)}function ue(t,e){var i=t.__data__;return ge(e)?i["string"==typeof e?"string":"hash"]:i.map}function he(t,e){var i=U(t,e);return ie(i)?i:void 0}function ce(t){var e=Z.call(t,ot),i=t[ot];try{t[ot]=void 0;var n=!0}catch{}var r=J.call(t);return n&&(e?t[ot]=i:delete t[ot]),r}u(Mt,"Hash"),u(Et,"hashClear"),u(wt,"hashDelete"),u(At,"hashGet"),u(St,"hashHas"),u(Tt,"hashSet"),Mt.prototype.clear=Et,Mt.prototype.delete=wt,Mt.prototype.get=At,Mt.prototype.has=St,Mt.prototype.set=Tt,u(Ct,"ListCache"),u(Pt,"listCacheClear"),u(It,"listCacheDelete"),u(Lt,"listCacheGet"),u(Ot,"listCacheHas"),u(Nt,"listCacheSet"),Ct.prototype.clear=Pt,Ct.prototype.delete=It,Ct.prototype.get=Lt,Ct.prototype.has=Ot,Ct.prototype.set=Nt,u(Dt,"MapCache"),u(Rt,"mapCacheClear"),u(qt,"mapCacheDelete"),u(Bt,"mapCacheGet"),u(kt,"mapCacheHas"),u(Ft,"mapCacheSet"),Dt.prototype.clear=Rt,Dt.prototype.delete=qt,Dt.prototype.get=Bt,Dt.prototype.has=kt,Dt.prototype.set=Ft,u(Ut,"SetCache"),u(zt,"setCacheAdd"),u(Vt,"setCacheHas"),Ut.prototype.add=Ut.prototype.push=zt,Ut.prototype.has=Vt,u(jt,"Stack"),u(Gt,"stackClear"),u(Wt,"stackDelete"),u(Ht,"stackGet"),u(Yt,"stackHas"),u(Xt,"stackSet"),jt.prototype.clear=Gt,jt.prototype.delete=Wt,jt.prototype.get=Ht,jt.prototype.has=Yt,jt.prototype.set=Xt,u(Kt,"arrayLikeKeys"),u(Zt,"assocIndexOf"),u(Qt,"baseGetAllKeys"),u(Jt,"baseGetTag"),u($t,"baseIsArguments"),u(te,"baseIsEqual"),u(ee,"baseIsEqualDeep"),u(ie,"baseIsNative"),u(ne,"baseIsTypedArray"),u(re,"baseKeys"),u(oe,"equalArrays"),u(se,"equalByTag"),u(ae,"equalObjects"),u(le,"getAllKeys"),u(ue,"getMapData"),u(he,"getNative"),u(ce,"getRawTag");var pe=st?function(t){return null==t?[]:(t=Object(t),D(st(t),(function(e){return nt.call(t,e)})))}:Oe,de=Jt;function fe(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function ge(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function me(t){return!!Q&&Q in t}function ve(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Y)}function ye(t){return J.call(t)}function xe(t){if(null!=t){try{return K.call(t)}catch{}try{return t+""}catch{}}return""}function _e(t,e){return t===e||t!=t&&e!=e}(ut&&de(new ut(new ArrayBuffer(1)))!=_||ht&&de(new ht)!=c||ct&&de(ct.resolve())!=f||pt&&de(new pt)!=m||dt&&de(new dt)!=y)&&(de=u((function(t){var e=Jt(t),i=e==d?t.constructor:void 0,n=i?xe(i):"";if(n)switch(n){case gt:return _;case mt:return c;case vt:return f;case yt:return m;case xt:return y}return e}),"getTag")),u(fe,"isIndex"),u(ge,"isKeyable"),u(me,"isMasked"),u(ve,"isPrototype"),u(ye,"objectToString"),u(xe,"toSource"),u(_e,"eq");var be=$t(function(){return arguments}())?$t:function(t){return Pe(t)&&Z.call(t,"callee")&&!nt.call(t,"callee")},Me=Array.isArray;function Ee(t){return null!=t&&Te(t.length)&&!Se(t)}u(Ee,"isArrayLike");var we=at||Ne;function Ae(t,e){return te(t,e)}function Se(t){if(!Ce(t))return!1;var e=Jt(t);return e==h||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Te(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function Ce(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Pe(t){return null!=t&&"object"==typeof t}u(Ae,"isEqual"),u(Se,"isFunction"),u(Te,"isLength"),u(Ce,"isObject"),u(Pe,"isObjectLike");var Ie=N?k(N):ne;function Le(t){return Ee(t)?Kt(t):re(t)}function Oe(){return[]}function Ne(){return!1}u(Le,"keys"),u(Oe,"stubArray"),u(Ne,"stubFalse"),e.exports=Ae})),O4=Ye(((t,e)=>{E();var i="__lodash_hash_undefined__",n=9007199254740991,r="[object Arguments]",o="[object Function]",s="[object Object]",a=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[r]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h[o]=h["[object Map]"]=h["[object Number]"]=h[s]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1;var c="object"==typeof global&&global&&global.Object===Object&&global,p="object"==typeof self&&self&&self.Object===Object&&self,d=c||p||Function("return this")(),f="object"==typeof t&&t&&!t.nodeType&&t,g=f&&"object"==typeof e&&e&&!e.nodeType&&e,m=g&&g.exports===f,v=m&&c.process,y=function(){try{return g&&g.require&&g.require("util").types||v&&v.binding&&v.binding("util")}catch{}}(),x=y&&y.isTypedArray;function _(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function b(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function M(t){return function(e){return t(e)}}function w(t,e){return null==t?void 0:t[e]}function A(t,e){return function(i){return t(e(i))}}u(_,"apply"),u(b,"baseTimes"),u(M,"baseUnary"),u(w,"getValue"),u(A,"overArg");var S,T=Array.prototype,C=Function.prototype,P=Object.prototype,I=d["__core-js_shared__"],L=C.toString,O=P.hasOwnProperty,N=(S=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",D=P.toString,R=L.call(Object),q=RegExp("^"+L.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=m?d.Buffer:void 0,k=d.Symbol,F=d.Uint8Array,U=B?B.allocUnsafe:void 0,z=A(Object.getPrototypeOf,Object),V=Object.create,j=P.propertyIsEnumerable,G=T.splice,W=k?k.toStringTag:void 0,H=function(){try{var t=Ht(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Y=B?B.isBuffer:void 0,X=Math.max,K=Date.now,Z=Ht(d,"Map"),Q=Ht(Object,"create"),J=function(){function t(){}return u(t,"object"),function(e){if(!ge(e))return{};if(V)return V(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function $(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function tt(){this.__data__=Q?Q(null):{},this.size=0}function et(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function it(t){var e=this.__data__;if(Q){var n=e[t];return n===i?void 0:n}return O.call(e,t)?e[t]:void 0}function nt(t){var e=this.__data__;return Q?void 0!==e[t]:O.call(e,t)}function rt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Q&&void 0===e?i:e,this}function ot(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function st(){this.__data__=[],this.size=0}function at(t){var e=this.__data__,i=St(e,t);return!(i<0)&&(i==e.length-1?e.pop():G.call(e,i,1),--this.size,!0)}function lt(t){var e=this.__data__,i=St(e,t);return i<0?void 0:e[i][1]}function ut(t){return St(this.__data__,t)>-1}function ht(t,e){var i=this.__data__,n=St(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}function ct(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function pt(){this.size=0,this.__data__={hash:new $,map:new(Z||ot),string:new $}}function dt(t){var e=Wt(this,t).delete(t);return this.size-=e?1:0,e}function ft(t){return Wt(this,t).get(t)}function gt(t){return Wt(this,t).has(t)}function mt(t,e){var i=Wt(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}function vt(t){var e=this.__data__=new ot(t);this.size=e.size}function yt(){this.__data__=new ot,this.size=0}function xt(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function _t(t){return this.__data__.get(t)}function bt(t){return this.__data__.has(t)}function Mt(t,e){var i=this.__data__;if(i instanceof ot){var n=i.__data__;if(!Z||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new ct(n)}return i.set(t,e),this.size=i.size,this}function Et(t,e){var i=ue(t),n=!i&&le(t),r=!i&&!n&&pe(t),o=!i&&!n&&!r&&ye(t),s=i||n||r||o,a=s?b(t.length,String):[],l=a.length;for(var u in t)(e||O.call(t,u))&&(!s||!("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Kt(u,l)))&&a.push(u);return a}function wt(t,e,i){(void 0!==i&&!ae(t[e],i)||void 0===i&&!(e in t))&&Tt(t,e,i)}function At(t,e,i){var n=t[e];(!O.call(t,e)||!ae(n,i)||void 0===i&&!(e in t))&&Tt(t,e,i)}function St(t,e){for(var i=t.length;i--;)if(ae(t[i][0],e))return i;return-1}function Tt(t,e,i){"__proto__"==e&&H?H(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}u($,"Hash"),u(tt,"hashClear"),u(et,"hashDelete"),u(it,"hashGet"),u(nt,"hashHas"),u(rt,"hashSet"),$.prototype.clear=tt,$.prototype.delete=et,$.prototype.get=it,$.prototype.has=nt,$.prototype.set=rt,u(ot,"ListCache"),u(st,"listCacheClear"),u(at,"listCacheDelete"),u(lt,"listCacheGet"),u(ut,"listCacheHas"),u(ht,"listCacheSet"),ot.prototype.clear=st,ot.prototype.delete=at,ot.prototype.get=lt,ot.prototype.has=ut,ot.prototype.set=ht,u(ct,"MapCache"),u(pt,"mapCacheClear"),u(dt,"mapCacheDelete"),u(ft,"mapCacheGet"),u(gt,"mapCacheHas"),u(mt,"mapCacheSet"),ct.prototype.clear=pt,ct.prototype.delete=dt,ct.prototype.get=ft,ct.prototype.has=gt,ct.prototype.set=mt,u(vt,"Stack"),u(yt,"stackClear"),u(xt,"stackDelete"),u(_t,"stackGet"),u(bt,"stackHas"),u(Mt,"stackSet"),vt.prototype.clear=yt,vt.prototype.delete=xt,vt.prototype.get=_t,vt.prototype.has=bt,vt.prototype.set=Mt,u(Et,"arrayLikeKeys"),u(wt,"assignMergeValue"),u(At,"assignValue"),u(St,"assocIndexOf"),u(Tt,"baseAssignValue");var Ct=Gt();function Pt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":W&&W in Object(t)?Yt(t):ee(t)}function It(t){return me(t)&&Pt(t)==r}function Lt(t){return!(!ge(t)||Jt(t))&&(de(t)?q:a).test(se(t))}function Ot(t){return me(t)&&fe(t.length)&&!!h[Pt(t)]}function Nt(t){if(!ge(t))return te(t);var e=$t(t),i=[];for(var n in t)"constructor"==n&&(e||!O.call(t,n))||i.push(n);return i}function Dt(t,e,i,n,r){t!==e&&Ct(e,(function(o,s){if(r||(r=new vt),ge(o))Rt(t,e,s,i,Dt,n,r);else{var a=n?n(ne(t,s),o,s+"",t,e,r):void 0;void 0===a&&(a=o),wt(t,s,a)}}),_e)}function Rt(t,e,i,n,r,o,s){var a=ne(t,i),l=ne(e,i),u=s.get(l);if(u)wt(t,i,u);else{var h=o?o(a,l,i+"",t,e,s):void 0,c=void 0===h;if(c){var p=ue(l),d=!p&&pe(l),f=!p&&!d&&ye(l);h=l,p||d||f?ue(a)?h=a:ce(a)?h=zt(a):d?(c=!1,h=kt(l,!0)):f?(c=!1,h=Ut(l,!0)):h=[]:ve(l)||le(l)?(h=a,le(a)?h=xe(a):(!ge(a)||de(a))&&(h=Xt(l))):c=!1}c&&(s.set(l,h),r(h,l,n,o,s),s.delete(l)),wt(t,i,h)}}function qt(t,e){return re(ie(t,e,Ee),t+"")}u(Pt,"baseGetTag"),u(It,"baseIsArguments"),u(Lt,"baseIsNative"),u(Ot,"baseIsTypedArray"),u(Nt,"baseKeysIn"),u(Dt,"baseMerge"),u(Rt,"baseMergeDeep"),u(qt,"baseRest");var Bt=H?function(t,e){return H(t,"toString",{configurable:!0,enumerable:!1,value:Me(e),writable:!0})}:Ee;function kt(t,e){if(e)return t.slice();var i=t.length,n=U?U(i):new t.constructor(i);return t.copy(n),n}function Ft(t){var e=new t.constructor(t.byteLength);return new F(e).set(new F(t)),e}function Ut(t,e){var i=e?Ft(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function zt(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}function Vt(t,e,i,n){var r=!i;i||(i={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n?n(i[a],t[a],a,i,t):void 0;void 0===l&&(l=t[a]),r?Tt(i,a,l):At(i,a,l)}return i}function jt(t){return qt((function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&Zt(i[0],i[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=i[n];a&&t(e,a,n,o)}return e}))}function Gt(t){return function(e,i,n){for(var r=-1,o=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++r];if(!1===i(o[l],l,o))break}return e}}function Wt(t,e){var i=t.__data__;return Qt(e)?i["string"==typeof e?"string":"hash"]:i.map}function Ht(t,e){var i=w(t,e);return Lt(i)?i:void 0}function Yt(t){var e=O.call(t,W),i=t[W];try{t[W]=void 0;var n=!0}catch{}var r=D.call(t);return n&&(e?t[W]=i:delete t[W]),r}function Xt(t){return"function"!=typeof t.constructor||$t(t)?{}:J(z(t))}function Kt(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&l.test(t))&&t>-1&&t%1==0&&t<e}function Zt(t,e,i){if(!ge(i))return!1;var n=typeof e;return!!("number"==n?he(i)&&Kt(e,i.length):"string"==n&&e in i)&&ae(i[e],t)}function Qt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Jt(t){return!!N&&N in t}function $t(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||P)}function te(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function ee(t){return D.call(t)}function ie(t,e,i){return e=X(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=X(n.length-e,0),s=Array(o);++r<o;)s[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=i(s),_(t,this,a)}}function ne(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}u(kt,"cloneBuffer"),u(Ft,"cloneArrayBuffer"),u(Ut,"cloneTypedArray"),u(zt,"copyArray"),u(Vt,"copyObject"),u(jt,"createAssigner"),u(Gt,"createBaseFor"),u(Wt,"getMapData"),u(Ht,"getNative"),u(Yt,"getRawTag"),u(Xt,"initCloneObject"),u(Kt,"isIndex"),u(Zt,"isIterateeCall"),u(Qt,"isKeyable"),u(Jt,"isMasked"),u($t,"isPrototype"),u(te,"nativeKeysIn"),u(ee,"objectToString"),u(ie,"overRest"),u(ne,"safeGet");var re=oe(Bt);function oe(t){var e=0,i=0;return function(){var n=K(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function se(t){if(null!=t){try{return L.call(t)}catch{}try{return t+""}catch{}}return""}function ae(t,e){return t===e||t!=t&&e!=e}u(oe,"shortOut"),u(se,"toSource"),u(ae,"eq");var le=It(function(){return arguments}())?It:function(t){return me(t)&&O.call(t,"callee")&&!j.call(t,"callee")},ue=Array.isArray;function he(t){return null!=t&&fe(t.length)&&!de(t)}function ce(t){return me(t)&&he(t)}u(he,"isArrayLike"),u(ce,"isArrayLikeObject");var pe=Y||we;function de(t){if(!ge(t))return!1;var e=Pt(t);return e==o||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function fe(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function ge(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function me(t){return null!=t&&"object"==typeof t}function ve(t){if(!me(t)||Pt(t)!=s)return!1;var e=z(t);if(null===e)return!0;var i=O.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&L.call(i)==R}u(de,"isFunction"),u(fe,"isLength"),u(ge,"isObject"),u(me,"isObjectLike"),u(ve,"isPlainObject");var ye=x?M(x):Ot;function xe(t){return Vt(t,_e(t))}function _e(t){return he(t)?Et(t,!0):Nt(t)}u(xe,"toPlainObject"),u(_e,"keysIn");var be=jt((function(t,e,i){Dt(t,e,i)}));function Me(t){return function(){return t}}function Ee(t){return t}function we(){return!1}u(Me,"constant"),u(Ee,"identity"),u(we,"stubFalse"),e.exports=be})),bq=Ye(((t,e)=>{E(),function(i){var n="object"==typeof t&&t,r="object"==typeof e&&e&&e.exports==n&&e,o="object"==typeof global&&global;(o.global===o||o.window===o)&&(i=o);var s=u((function(t){this.message=t}),"InvalidCharacterError");s.prototype=new Error,s.prototype.name="InvalidCharacterError";var a=u((function(t){throw new s(t)}),"error"),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=/[\t\n\f\r ]/g,c=u((function(t){var e=(t=String(t).replace(h,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&a("Invalid character: the string to be decoded is not correctly encoded.");for(var i,n,r=0,o="",s=-1;++s<e;)n=l.indexOf(t.charAt(s)),i=r%4?64*i+n:n,r++%4&&(o+=String.fromCharCode(255&i>>(-2*r&6)));return o}),"decode"),p={encode:u((function(t){t=String(t),/[^\0-\xFF]/.test(t)&&a("The string to be encoded contains characters outside of the Latin1 range.");for(var e,i,n,r,o=t.length%3,s="",u=-1,h=t.length-o;++u<h;)e=t.charCodeAt(u)<<16,i=t.charCodeAt(++u)<<8,n=t.charCodeAt(++u),s+=l.charAt((r=e+i+n)>>18&63)+l.charAt(r>>12&63)+l.charAt(r>>6&63)+l.charAt(63&r);return 2==o?(e=t.charCodeAt(u)<<8,i=t.charCodeAt(++u),s+=l.charAt((r=e+i)>>10)+l.charAt(r>>4&63)+l.charAt(r<<2&63)+"="):1==o&&(r=t.charCodeAt(u),s+=l.charAt(r>>2)+l.charAt(r<<4&63)+"=="),s}),"encode"),decode:c,version:"1.0.0"};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define((function(){return p}));else if(n&&!n.nodeType)if(r)r.exports=p;else for(var d in p)p.hasOwnProperty(d)&&(n[d]=p[d]);else i.base64=p}(t)})),to=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.areaConversion=t.timeConversion=t.distanceConversion=t.altitudeKeys=t.latitudeKeys=t.longitudeKeys=t.MAXLON=t.MINLON=t.MAXLAT=t.MINLAT=t.earthRadius=t.sexagesimalPattern=void 0;t.sexagesimalPattern=/^([0-9]{1,3})°\s*([0-9]{1,3}(?:\.(?:[0-9]{1,}))?)['′]\s*(([0-9]{1,3}(\.([0-9]{1,}))?)["″]\s*)?([NEOSW]?)$/;t.earthRadius=6378137;t.MINLAT=-90;t.MAXLAT=90;t.MINLON=-180;t.MAXLON=180;t.longitudeKeys=["lng","lon","longitude",0];t.latitudeKeys=["lat","latitude",1];t.altitudeKeys=["alt","altitude","elevation","elev",2];t.distanceConversion={m:1,km:.001,cm:100,mm:1e3,mi:1/1609.344,sm:1/1852.216,ft:100/30.48,in:100/2.54,yd:1/.9144};t.timeConversion={m:60,h:3600,d:86400};var e={m2:1,km2:1e-6,ha:1e-4,a:.01,ft2:10.763911,yd2:1.19599,in2:1550.0031};t.areaConversion=e,e.sqm=e.m2,e.sqkm=e.km2,e.sqft=e.ft2,e.sqyd=e.yd2,e.sqin=e.in2})),c1=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u((function(t,e){return e.reduce((function(e,i){if(typeof t>"u"||null===t)throw new Error("'".concat(t,"' is no valid coordinate."));return Object.prototype.hasOwnProperty.call(t,i)&&typeof i<"u"&&typeof e>"u"?(e=i,i):e}),void 0)}),"getCoordinateKey");t.default=e})),h1=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u((function(t){var e=t.toString().trim();return!isNaN(parseFloat(e))&&parseFloat(e)===Number(e)}),"isDecimal");t.default=e})),f1=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=u((function(t){return e.sexagesimalPattern.test(t.toString().trim())}),"isSexagesimal");t.default=i})),p1=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=u((function(t){var i=new RegExp(e.sexagesimalPattern).exec(t);if(typeof i>"u"||null===i)throw new Error("Given value is not in sexagesimal format");var n=Number(i[2])/60||0,r=Number(i[4])/3600||0,o=parseFloat(i[1])+n+r;return["S","W"].includes(i[7])?-o:o}),"sexagesimalToDecimal");t.default=i})),B_=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=n(c1());function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}u(n,"_interopRequireDefault"),u(r,"ownKeys"),u(o,"_objectSpread"),u(s,"_defineProperty");var a=u((function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{longitude:e.longitudeKeys,latitude:e.latitudeKeys,altitude:e.altitudeKeys},r=(0,i.default)(t,n.longitude),s=(0,i.default)(t,n.latitude),a=(0,i.default)(t,n.altitude);return o({latitude:s,longitude:r},a?{altitude:a}:{})}),"getCoordinateKeys");t.default=a})),R4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(h1()),i=o(f1()),n=o(p1()),r=to();function o(t){return t&&t.__esModule?t:{default:t}}u(o,"_interopRequireDefault");var s=u((function t(o){return(0,e.default)(o)?!(parseFloat(o)>r.MAXLAT||o<r.MINLAT):!!(0,i.default)(o)&&t((0,n.default)(o))}),"isValidLatitude");t.default=s})),k4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(h1()),i=o(f1()),n=o(p1()),r=to();function o(t){return t&&t.__esModule?t:{default:t}}u(o,"_interopRequireDefault");var s=u((function t(o){return(0,e.default)(o)?!(parseFloat(o)>r.MAXLON||o<r.MINLON):!!(0,i.default)(o)&&t((0,n.default)(o))}),"isValidLongitude");t.default=s})),F4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=r(B_()),i=r(R4()),n=r(k4());function r(t){return t&&t.__esModule?t:{default:t}}u(r,"_interopRequireDefault");var o=u((function(t){var r=(0,e.default)(t),o=r.latitude,s=r.longitude;if(Array.isArray(t)&&t.length>=2)return(0,n.default)(t[0])&&(0,i.default)(t[1]);if(typeof o>"u"||typeof s>"u")return!1;var a=t[s],l=t[o];return!(typeof l>"u"||typeof a>"u"||!1===(0,i.default)(l)||!1===(0,n.default)(a))}),"isValidCoordinate");t.default=o})),z_=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(h1()),i=s(f1()),n=s(p1()),r=s(F4()),o=s(B_());function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}u(s,"_interopRequireDefault"),u(a,"ownKeys"),u(l,"_objectSpread"),u(h,"_defineProperty");var c=u((function t(s){if((0,e.default)(s))return Number(s);if((0,i.default)(s))return(0,n.default)(s);if((0,r.default)(s)){var a=(0,o.default)(s);return Array.isArray(s)?s.map((function(e,i){return[0,1].includes(i)?t(e):e})):l(l(l({},s),a.latitude&&h({},a.latitude,t(s[a.latitude]))),a.longitude&&h({},a.longitude,t(s[a.longitude])))}return Array.isArray(s)?s.map((function(e){return(0,r.default)(e)?t(e):e})):s}),"toDecimal");t.default=c})),Ya=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=r(c1()),n=r(z_());function r(t){return t&&t.__esModule?t:{default:t}}u(r,"_interopRequireDefault");var o=u((function(t,r){var o=(0,i.default)(t,e.latitudeKeys);if(!(typeof o>"u"||null===o)){var s=t[o];return!0===r?s:(0,n.default)(s)}}),"getLatitude");t.default=o})),Xa=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=r(c1()),n=r(z_());function r(t){return t&&t.__esModule?t:{default:t}}u(r,"_interopRequireDefault");var o=u((function(t,r){var o=(0,i.default)(t,e.longitudeKeys);if(!(typeof o>"u"||null===o)){var s=t[o];return!0===r?s:(0,n.default)(s)}}),"getLongitude");t.default=o})),au=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u((function(t){return t*Math.PI/180}),"toRad");t.default=e})),Qf=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u((function(t){return 180*t/Math.PI}),"toDeg");t.default=e})),Oq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(Ya()),i=s(Xa()),n=s(au()),r=s(Qf()),o=to();function s(t){return t&&t.__esModule?t:{default:t}}u(s,"_interopRequireDefault");var a=u((function(t,s,a){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6371e3,u=(0,e.default)(t),h=(0,i.default)(t),c=s/l,p=(0,n.default)(a),d=(0,n.default)(u),f=(0,n.default)(h),g=Math.asin(Math.sin(d)*Math.cos(c)+Math.cos(d)*Math.sin(c)*Math.cos(p)),m=f+Math.atan2(Math.sin(p)*Math.sin(c)*Math.cos(d),Math.cos(c)-Math.sin(d)*Math.sin(g)),v=(0,r.default)(m);return(v<o.MINLON||v>o.MAXLON)&&(m=(m+3*Math.PI)%(2*Math.PI)-Math.PI,v=(0,r.default)(m)),{latitude:(0,r.default)(g),longitude:v}}),"computeDestinationPoint");t.default=a})),Lq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=u((function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=e.areaConversion[i];if(n)return t*n;throw new Error("Invalid unit used for area conversion.")}),"convertArea");t.default=i})),Dq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=u((function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"m",n=e.distanceConversion[i];if(n)return t*n;throw new Error("Invalid unit used for distance conversion.")}),"convertDistance");t.default=i})),Nq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=to(),i=u((function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"kmh";switch(i){case"kmh":return t*e.timeConversion.h*e.distanceConversion.km;case"mph":return t*e.timeConversion.h*e.distanceConversion.mi;default:return t}}),"convertSpeed");t.default=i})),kq=Ye((t=>{"use strict";function e(t,e){return s(t)||o(t,e)||n(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&null!=a.return&&a.return()}finally{if(r)throw o}}return i}}function s(t){if(Array.isArray(t))return t}E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,u(e,"_slicedToArray"),u(i,"_nonIterableRest"),u(n,"_unsupportedIterableToArray"),u(r,"_arrayLikeToArray"),u(o,"_iterableToArrayLimit"),u(s,"_arrayWithHoles");var a=u((function(t){var e=Math.pow(10,12);return Math.round(t*e)/e}),"imprecise"),l=u((function(t){var i=e(t.toString().split("."),2),n=i[0],r=i[1],o=Math.abs(Number(n)),s=a(60*+("0."+(r||0))),l=Math.floor(s),u=a(60*(s%l||0));return o+"° "+Number(l.toFixed(6)).toString().split(".").map((function(t,e){return 0===e?t.padStart(2,"0"):t})).join(".")+"' "+Number(u.toFixed(4)).toString().split(".").map((function(t,e){return 0===e?t.padStart(2,"0"):t})).join(".")+'"'}),"decimal2sexagesimal");t.default=l})),H4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u((function(t){return t>1?1:t<-1?-1:t}),"robustAcos");t.default=e})),Ch=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(Ya()),i=s(Xa()),n=s(au()),r=s(H4()),o=to();function s(t){return t&&t.__esModule?t:{default:t}}u(s,"_interopRequireDefault");var a=u((function(t,s){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;a=typeof a<"u"&&!isNaN(a)?a:1;var l=(0,e.default)(t),u=(0,i.default)(t),h=(0,e.default)(s),c=(0,i.default)(s),p=Math.acos((0,r.default)(Math.sin((0,n.default)(h))*Math.sin((0,n.default)(l))+Math.cos((0,n.default)(h))*Math.cos((0,n.default)(l))*Math.cos((0,n.default)(u)-(0,n.default)(c))))*o.earthRadius;return Math.round(p/a)*a}),"getDistance");t.default=a})),j4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Ch());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.default;return n="function"==typeof n?n:e.default,i.slice().sort((function(e,i){return n(t,e)-n(t,i)}))}),"orderByDistance");t.default=n})),zq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(j4());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t,i){return(0,e.default)(t,i)[0]}),"findNearest");t.default=n})),Hq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(au()),i=o(Ya()),n=o(Xa()),r=to();function o(t){return t&&t.__esModule?t:{default:t}}u(o,"_interopRequireDefault");var s=u((function(t){var o=0;if(t.length>2){for(var s,a,l,u=0;u<t.length;u++){u===t.length-2?(s=t.length-2,a=t.length-1,l=0):u===t.length-1?(s=t.length-1,a=0,l=1):(s=u,a=u+1,l=u+2);var h=(0,n.default)(t[s]),c=(0,i.default)(t[a]),p=(0,n.default)(t[l]);o+=((0,e.default)(p)-(0,e.default)(h))*Math.sin((0,e.default)(c))}o=o*r.earthRadius*r.earthRadius/2}return Math.abs(o)}),"getAreaOfPolygon");t.default=s})),X4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Ya()),i=n(Xa());function n(t){return t&&t.__esModule?t:{default:t}}u(n,"_interopRequireDefault");var r=u((function(t){if(!1===Array.isArray(t)||0===t.length)throw new Error("No points were given.");return t.reduce((function(t,n){var r=(0,e.default)(n),o=(0,i.default)(n);return{maxLat:Math.max(r,t.maxLat),minLat:Math.min(r,t.minLat),maxLng:Math.max(o,t.maxLng),minLng:Math.min(o,t.minLng)}}),{maxLat:-1/0,minLat:1/0,maxLng:-1/0,minLng:1/0})}),"getBounds");t.default=r})),Wq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s(Ya()),i=s(Xa()),n=s(au()),r=s(Qf()),o=to();function s(t){return t&&t.__esModule?t:{default:t}}u(s,"_interopRequireDefault");var a=u((function(t,s){var a,l,u=(0,e.default)(t),h=(0,i.default)(t),c=(0,n.default)(u),p=(0,n.default)(h),d=s/o.earthRadius,f=c-d,g=c+d,m=(0,n.default)(o.MAXLAT),v=(0,n.default)(o.MINLAT),y=(0,n.default)(o.MAXLON),x=(0,n.default)(o.MINLON);if(f>v&&g<m){var _=Math.asin(Math.sin(d)/Math.cos(c));(a=p-_)<x&&(a+=2*Math.PI),(l=p+_)>y&&(l-=2*Math.PI)}else f=Math.max(f,v),g=Math.min(g,m),a=x,l=y;return[{latitude:(0,r.default)(f),longitude:(0,r.default)(a)},{latitude:(0,r.default)(g),longitude:(0,r.default)(l)}]}),"getBoundsOfDistance");t.default=a})),Zq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(Ya()),i=o(Xa()),n=o(au()),r=o(Qf());function o(t){return t&&t.__esModule?t:{default:t}}u(o,"_interopRequireDefault");var s=u((function(t){if(!1===Array.isArray(t)||0===t.length)return!1;var o=t.length,s=t.reduce((function(t,r){var o=(0,n.default)((0,e.default)(r)),s=(0,n.default)((0,i.default)(r));return{X:t.X+Math.cos(o)*Math.cos(s),Y:t.Y+Math.cos(o)*Math.sin(s),Z:t.Z+Math.sin(o)}}),{X:0,Y:0,Z:0}),a=s.X/o,l=s.Y/o,u=s.Z/o;return{longitude:(0,r.default)(Math.atan2(l,a)),latitude:(0,r.default)(Math.atan2(u,Math.sqrt(a*a+l*l)))}}),"getCenter");t.default=s})),Qq=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(X4());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t){var i=(0,e.default)(t),n=i.minLat+(i.maxLat-i.minLat)/2,r=i.minLng+(i.maxLng-i.minLng)/2;return{latitude:parseFloat(n.toFixed(6)),longitude:parseFloat(r.toFixed(6))}}),"getCenterOfBounds");t.default=n})),Z4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(Ya()),i=o(Xa()),n=o(au()),r=o(Qf());function o(t){return t&&t.__esModule?t:{default:t}}u(o,"_interopRequireDefault");var s=u((function(t,o){var s=(0,n.default)((0,i.default)(o))-(0,n.default)((0,i.default)(t)),a=Math.log(Math.tan((0,n.default)((0,e.default)(o))/2+Math.PI/4)/Math.tan((0,n.default)((0,e.default)(t))/2+Math.PI/4));return Math.abs(s)>Math.PI&&(s=s>0?-1*(2*Math.PI-s):2*Math.PI+s),((0,r.default)(Math.atan2(s,a))+360)%360}),"getRhumbLineBearing");t.default=s})),eF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Z4());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.default,r="function"==typeof n?n(t,i):(0,e.default)(t,i);if(isNaN(r))throw new Error("Could not calculate bearing for given points. Check your bearing function");switch(Math.round(r/22.5)){case 1:return"NNE";case 2:return"NE";case 3:return"ENE";case 4:return"E";case 5:return"ESE";case 6:return"SE";case 7:return"SSE";case 8:return"S";case 9:return"SSW";case 10:return"SW";case 11:return"WSW";case 12:return"W";case 13:return"WNW";case 14:return"NW";case 15:return"NNW";default:return"N"}}),"getCompassDirection");t.default=n})),K4=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Ch()),i=n(H4());function n(t){return t&&t.__esModule?t:{default:t}}u(n,"_interopRequireDefault");var r=u((function(t,n,r){var o=(0,e.default)(n,t),s=(0,e.default)(t,r),a=(0,e.default)(n,r),l=Math.acos((0,i.default)((o*o+a*a-s*s)/(2*o*a))),u=Math.acos((0,i.default)((s*s+a*a-o*o)/(2*s*a)));return l>Math.PI/2?o:u>Math.PI/2?s:Math.sin(l)*o}),"getDistanceFromLine");t.default=r})),sF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(Ya()),i=o(Xa()),n=o(au()),r=o(Qf());function o(t){return t&&t.__esModule?t:{default:t}}u(o,"_interopRequireDefault");var s=u((function(t,o){var s=(0,e.default)(o),a=(0,i.default)(o),l=(0,e.default)(t),u=(0,i.default)(t);return((0,r.default)(Math.atan2(Math.sin((0,n.default)(a)-(0,n.default)(u))*Math.cos((0,n.default)(s)),Math.cos((0,n.default)(l))*Math.sin((0,n.default)(s))-Math.sin((0,n.default)(l))*Math.cos((0,n.default)(s))*Math.cos((0,n.default)(a)-(0,n.default)(u))))+360)%360}),"getGreatCircleBearing");t.default=s})),oF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Ch());function i(t){return t&&t.__esModule?t:{default:t}}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?u((function(t){return typeof t}),"_typeof"):u((function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),"_typeof"))(t)}u(i,"_interopRequireDefault"),u(n,"_typeof");var r=u((function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.default;return t.reduce((function(t,e){return"object"===n(t)&&null!==t.last&&(t.distance+=i(e,t.last)),t.last=e,t}),{last:null,distance:0}).distance}),"getPathLength");t.default=r})),cF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=o(Ya()),i=o(Xa()),n=o(au()),r=to();function o(t){return t&&t.__esModule?t:{default:t}}u(o,"_interopRequireDefault");var s=u((function(t,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;s=typeof s<"u"&&!isNaN(s)?s:1;var a,l,u,h,c,p,d,f=(0,e.default)(t),g=(0,i.default)(t),m=(0,e.default)(o),v=(0,i.default)(o),y=6356752.314245,x=1/298.257223563,_=(0,n.default)(v-g),b=Math.atan((1-x)*Math.tan((0,n.default)(parseFloat(f)))),M=Math.atan((1-x)*Math.tan((0,n.default)(parseFloat(m)))),E=Math.sin(b),w=Math.cos(b),A=Math.sin(M),S=Math.cos(M),T=_,C=100;do{var P=Math.sin(T),I=Math.cos(T);if(0===(p=Math.sqrt(S*P*(S*P)+(w*A-E*S*I)*(w*A-E*S*I))))return 0;a=E*A+w*S*I,l=Math.atan2(p,a),c=a-2*E*A/(h=1-(u=w*S*P/p)*u),isNaN(c)&&(c=0);var L=x/16*h*(4+x*(4-3*h));d=T,T=_+(1-L)*x*u*(l+L*p*(c+L*a*(2*c*c-1)))}while(Math.abs(T-d)>1e-12&&--C>0);if(0===C)return NaN;var O=h*(r.earthRadius*r.earthRadius-y*y)/(y*y),N=1+O/16384*(4096+O*(O*(320-175*O)-768)),D=O/1024*(256+O*(O*(74-47*O)-128)),R=D*p*(c+D/4*(a*(2*c*c-1)-D/6*c*(4*p*p-3)*(4*c*c-3))),q=y*N*(l-R);return Math.round(q/s)*s}),"getDistance");t.default=s})),hF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=u((function(t){return/^NNE|NE|NNW|N$/.test(t)?"N":/^ENE|E|ESE|SE$/.test(t)?"E":/^SSE|S|SSW|SW$/.test(t)?"S":/^WSW|W|WNW|NW$/.test(t)?"W":void 0}),"getRoughCompassDirection");t.default=e})),fF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Ch());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.default,r=n(t,i),o=Number(i.time)-Number(t.time),s=r/o*1e3;return s}),"getSpeed");t.default=n})),pF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Ch());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t,i,n){return(0,e.default)(i,t)+(0,e.default)(t,n)===(0,e.default)(i,n)}),"isPointInLine");t.default=n})),mF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=n(Ya()),i=n(Xa());function n(t){return t&&t.__esModule?t:{default:t}}u(n,"_interopRequireDefault");var r=u((function(t,n){for(var r=!1,o=n.length,s=-1,a=o-1;++s<o;a=s)((0,i.default)(n[s])<=(0,i.default)(t)&&(0,i.default)(t)<(0,i.default)(n[a])||(0,i.default)(n[a])<=(0,i.default)(t)&&(0,i.default)(t)<(0,i.default)(n[s]))&&(0,e.default)(t)<((0,e.default)(n[a])-(0,e.default)(n[s]))*((0,i.default)(t)-(0,i.default)(n[s]))/((0,i.default)(n[a])-(0,i.default)(n[s]))+(0,e.default)(n[s])&&(r=!r);return r}),"isPointInPolygon");t.default=r})),gF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(K4());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t,i,n,r){return(0,e.default)(t,i,n)<r}),"isPointNearLine");t.default=n})),vF=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(Ch());function i(t){return t&&t.__esModule?t:{default:t}}u(i,"_interopRequireDefault");var n=u((function(t,i,n){return(0,e.default)(t,i)<n}),"isPointWithinRadius");t.default=n})),xF=Ye((t=>{"use strict";function e(t,e){return s(t)||o(t,e)||n(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t,e){if(t){if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if("Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function o(t,e){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&null!=a.return&&a.return()}finally{if(r)throw o}}return i}}function s(t){if(Array.isArray(t))return t}E(),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,u(e,"_slicedToArray"),u(i,"_nonIterableRest"),u(n,"_unsupportedIterableToArray"),u(r,"_arrayLikeToArray"),u(o,"_iterableToArrayLimit"),u(s,"_arrayWithHoles");var a=u((function(t){if(!t.startsWith("POLYGON"))throw new Error("Invalid wkt.");return t.slice(t.indexOf("(")+2,t.indexOf(")")).split(", ").map((function(t){var i=e(t.split(" "),2),n=i[0],r=i[1];return{longitude:parseFloat(n),latitude:parseFloat(r)}}))}),"wktToPolygon");t.default=a})),_F=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0});var e={computeDestinationPoint:!0,convertArea:!0,convertDistance:!0,convertSpeed:!0,decimalToSexagesimal:!0,findNearest:!0,getAreaOfPolygon:!0,getBounds:!0,getBoundsOfDistance:!0,getCenter:!0,getCenterOfBounds:!0,getCompassDirection:!0,getCoordinateKey:!0,getCoordinateKeys:!0,getDistance:!0,getDistanceFromLine:!0,getGreatCircleBearing:!0,getLatitude:!0,getLongitude:!0,getPathLength:!0,getPreciseDistance:!0,getRhumbLineBearing:!0,getRoughCompassDirection:!0,getSpeed:!0,isDecimal:!0,isPointInLine:!0,isPointInPolygon:!0,isPointNearLine:!0,isPointWithinRadius:!0,isSexagesimal:!0,isValidCoordinate:!0,isValidLatitude:!0,isValidLongitude:!0,orderByDistance:!0,sexagesimalToDecimal:!0,toDecimal:!0,toRad:!0,toDeg:!0,wktToPolygon:!0};Object.defineProperty(t,"computeDestinationPoint",{enumerable:!0,get:u((function(){return i.default}),"get")}),Object.defineProperty(t,"convertArea",{enumerable:!0,get:u((function(){return n.default}),"get")}),Object.defineProperty(t,"convertDistance",{enumerable:!0,get:u((function(){return r.default}),"get")}),Object.defineProperty(t,"convertSpeed",{enumerable:!0,get:u((function(){return o.default}),"get")}),Object.defineProperty(t,"decimalToSexagesimal",{enumerable:!0,get:u((function(){return s.default}),"get")}),Object.defineProperty(t,"findNearest",{enumerable:!0,get:u((function(){return a.default}),"get")}),Object.defineProperty(t,"getAreaOfPolygon",{enumerable:!0,get:u((function(){return l.default}),"get")}),Object.defineProperty(t,"getBounds",{enumerable:!0,get:u((function(){return h.default}),"get")}),Object.defineProperty(t,"getBoundsOfDistance",{enumerable:!0,get:u((function(){return c.default}),"get")}),Object.defineProperty(t,"getCenter",{enumerable:!0,get:u((function(){return p.default}),"get")}),Object.defineProperty(t,"getCenterOfBounds",{enumerable:!0,get:u((function(){return d.default}),"get")}),Object.defineProperty(t,"getCompassDirection",{enumerable:!0,get:u((function(){return f.default}),"get")}),Object.defineProperty(t,"getCoordinateKey",{enumerable:!0,get:u((function(){return g.default}),"get")}),Object.defineProperty(t,"getCoordinateKeys",{enumerable:!0,get:u((function(){return m.default}),"get")}),Object.defineProperty(t,"getDistance",{enumerable:!0,get:u((function(){return v.default}),"get")}),Object.defineProperty(t,"getDistanceFromLine",{enumerable:!0,get:u((function(){return y.default}),"get")}),Object.defineProperty(t,"getGreatCircleBearing",{enumerable:!0,get:u((function(){return x.default}),"get")}),Object.defineProperty(t,"getLatitude",{enumerable:!0,get:u((function(){return _.default}),"get")}),Object.defineProperty(t,"getLongitude",{enumerable:!0,get:u((function(){return b.default}),"get")}),Object.defineProperty(t,"getPathLength",{enumerable:!0,get:u((function(){return M.default}),"get")}),Object.defineProperty(t,"getPreciseDistance",{enumerable:!0,get:u((function(){return w.default}),"get")}),Object.defineProperty(t,"getRhumbLineBearing",{enumerable:!0,get:u((function(){return A.default}),"get")}),Object.defineProperty(t,"getRoughCompassDirection",{enumerable:!0,get:u((function(){return S.default}),"get")}),Object.defineProperty(t,"getSpeed",{enumerable:!0,get:u((function(){return T.default}),"get")}),Object.defineProperty(t,"isDecimal",{enumerable:!0,get:u((function(){return C.default}),"get")}),Object.defineProperty(t,"isPointInLine",{enumerable:!0,get:u((function(){return P.default}),"get")}),Object.defineProperty(t,"isPointInPolygon",{enumerable:!0,get:u((function(){return I.default}),"get")}),Object.defineProperty(t,"isPointNearLine",{enumerable:!0,get:u((function(){return L.default}),"get")}),Object.defineProperty(t,"isPointWithinRadius",{enumerable:!0,get:u((function(){return O.default}),"get")}),Object.defineProperty(t,"isSexagesimal",{enumerable:!0,get:u((function(){return N.default}),"get")}),Object.defineProperty(t,"isValidCoordinate",{enumerable:!0,get:u((function(){return D.default}),"get")}),Object.defineProperty(t,"isValidLatitude",{enumerable:!0,get:u((function(){return R.default}),"get")}),Object.defineProperty(t,"isValidLongitude",{enumerable:!0,get:u((function(){return q.default}),"get")}),Object.defineProperty(t,"orderByDistance",{enumerable:!0,get:u((function(){return B.default}),"get")}),Object.defineProperty(t,"sexagesimalToDecimal",{enumerable:!0,get:u((function(){return k.default}),"get")}),Object.defineProperty(t,"toDecimal",{enumerable:!0,get:u((function(){return F.default}),"get")}),Object.defineProperty(t,"toRad",{enumerable:!0,get:u((function(){return U.default}),"get")}),Object.defineProperty(t,"toDeg",{enumerable:!0,get:u((function(){return z.default}),"get")}),Object.defineProperty(t,"wktToPolygon",{enumerable:!0,get:u((function(){return V.default}),"get")});var i=G(Oq()),n=G(Lq()),r=G(Dq()),o=G(Nq()),s=G(kq()),a=G(zq()),l=G(Hq()),h=G(X4()),c=G(Wq()),p=G(Zq()),d=G(Qq()),f=G(eF()),g=G(c1()),m=G(B_()),v=G(Ch()),y=G(K4()),x=G(sF()),_=G(Ya()),b=G(Xa()),M=G(oF()),w=G(cF()),A=G(Z4()),S=G(hF()),T=G(fF()),C=G(h1()),P=G(pF()),I=G(mF()),L=G(gF()),O=G(vF()),N=G(f1()),D=G(F4()),R=G(R4()),q=G(k4()),B=G(j4()),k=G(p1()),F=G(z_()),U=G(au()),z=G(Qf()),V=G(xF()),j=to();function G(t){return t&&t.__esModule?t:{default:t}}Object.keys(j).forEach((function(i){"default"===i||"__esModule"===i||Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(t,i,{enumerable:!0,get:u((function(){return j[i]}),"get")})})),u(G,"_interopRequireDefault")})),Nw=Ye(((t,e)=>{"use strict";E();var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function o(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function s(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch{return!1}}u(o,"toObject"),u(s,"shouldUseNative"),e.exports=s()?Object.assign:function(t,e){for(var s,a,l=o(t),u=1;u<arguments.length;u++){for(var h in s=Object(arguments[u]))n.call(s,h)&&(l[h]=s[h]);if(i){a=i(s);for(var c=0;c<a.length;c++)r.call(s,a[c])&&(l[a[c]]=s[a[c]])}}return l}})),OF=Ye(((t,e)=>{var i,n;E(),i=t,n=function(){"use strict";function t(t,n,r,o,s){u((function t(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=n-r+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-l*h/a+c)),Math.min(o,Math.floor(n+(a-l)*h/a+c)),s)}var p=i[n],d=r,f=o;for(e(i,r,n),s(i[o],p)>0&&e(i,r,o);d<f;){for(e(i,d,f),d++,f--;s(i[d],p)<0;)d++;for(;s(i[f],p)>0;)f--}0===s(i[r],p)?e(i,r,f):e(i,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}}),"t")(t,n,r||0,o||t.length-1,s||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}u(t,"t"),u(e,"i"),u(i,"n");var n=u((function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}),"r");function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<i;o++){var s=t.children[o];a(r,t.leaf?n(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,i,n,r,o){for(var s=[i,n];s.length;)if(!((n=s.pop())-(i=s.pop())<=r)){var a=i+Math.ceil((n-i)/r/2)*r;t(e,a,i,n,o),s.push(i,a,a,n)}}return u(r,"e"),u(o,"a"),u(s,"h"),u(a,"o"),u(l,"s"),u(h,"l"),u(c,"f"),u(p,"u"),u(d,"m"),u(f,"c"),u(g,"p"),u(m,"d"),n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s;f(t,a)&&(e.leaf?i.push(s):d(t,a)?this._all(s,i):r.push(s))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(f(t,o)){if(e.leaf||d(t,o))return!0;i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=g([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],i=u.pop(),o=!0),s.leaf){var h=r(t,s.children,e);if(-1!==h)return s.children.splice(h,1),l.push(s),this._condense(l),this}o||s.leaf||!d(s,a)?n?(i++,s=n.children[i],o=!1):s=null:(l.push(s),u.push(i),i=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var r,s=i-e+1,a=this._maxEntries;if(s<=a)return o(r=g(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(r=g([])).leaf=!1,r.height=n;var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));m(t,e,i,u,this.compareMinX);for(var h=e;h<=i;h+=u){var c=Math.min(h+u-1,i);m(t,h,c,l,this.compareMinY);for(var p=h;p<=c;p+=l){var d=Math.min(p+l-1,c);r.children.push(this._build(t,p,d,n-1))}}return o(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=c(l),h=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u);h<o?(o=h,r=u<r?u:r,s=l):h===o&&u<r&&(r=u,s=l)}e=s||e.children[0]}var p,d;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r);for(o.children.push(t),a(o,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var s=this._chooseSplitIndex(i,r,n),a=g(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,o,a,l,u,h,p=1/0,d=1/0,f=e;f<=i-e;f++){var g=s(t,0,f,this.toBBox),m=s(t,f,i,this.toBBox),v=(r=g,o=m,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),u=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,h-l)),y=c(g)+c(m);v<p?(p=v,n=f,d=y<d?y:d):v===p&&y<d&&(d=y,n=f)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,i-e,i,r),u=p(o)+p(l),h=e;h<i-e;h++){var c=t.children[h];a(o,t.leaf?r(c):c),u+=p(o)}for(var d=i-e-1;d>=e;d--){var f=t.children[d];a(l,t.leaf?r(f):f),u+=p(l)}return u},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n},"object"==typeof t&&typeof e<"u"?e.exports=n():"function"==typeof define&&define.amd?define(n):(i=i||self).RBush=n()})),DF=Ye(((t,e)=>{E(),e.exports=u((function(t,e,i,n){var r=t[0],o=t[1],s=!1;void 0===i&&(i=0),void 0===n&&(n=e.length);for(var a=(n-i)/2,l=0,u=a-1;l<a;u=l++){var h=e[i+2*l+0],c=e[i+2*l+1],p=e[i+2*u+0],d=e[i+2*u+1];c>o!=d>o&&r<(p-h)*(o-c)/(d-c)+h&&(s=!s)}return s}),"pointInPolygonFlat")})),RF=Ye(((t,e)=>{E(),e.exports=u((function(t,e,i,n){var r=t[0],o=t[1],s=!1;void 0===i&&(i=0),void 0===n&&(n=e.length);for(var a=n-i,l=0,u=a-1;l<a;u=l++){var h=e[l+i][0],c=e[l+i][1],p=e[u+i][0],d=e[u+i][1];c>o!=d>o&&r<(p-h)*(o-c)/(d-c)+h&&(s=!s)}return s}),"pointInPolygonNested")})),qF=Ye(((t,e)=>{E();var i=DF(),n=RF();e.exports=u((function(t,e,r,o){return e.length>0&&Array.isArray(e[0])?n(t,e,r,o):i(t,e,r,o)}),"pointInPolygon"),e.exports.nested=n,e.exports.flat=i})),UF=Ye(((t,e)=>{var i,n;E(),i=t,n=function(t){"use strict";function e(t,e,i,n,r){let o,s,a,l,u=e[0],h=n[0],c=0,p=0;h>u==h>-u?(o=u,u=e[++c]):(o=h,h=n[++p]);let d=0;if(c<t&&p<i)for(h>u==h>-u?(a=o-((s=u+o)-u),u=e[++c]):(a=o-((s=h+o)-h),h=n[++p]),o=s,0!==a&&(r[d++]=a);c<t&&p<i;)h>u==h>-u?(a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++c]):(a=o-((s=o+h)-(l=s-o))+(h-l),h=n[++p]),o=s,0!==a&&(r[d++]=a);for(;c<t;)a=o-((s=o+u)-(l=s-o))+(u-l),u=e[++c],o=s,0!==a&&(r[d++]=a);for(;p<i;)a=o-((s=o+h)-(l=s-o))+(h-l),h=n[++p],o=s,0!==a&&(r[d++]=a);return 0===o&&0!==d||(r[d++]=o),d}function i(t){return new Float64Array(t)}u(e,"r"),u(i,"o");let n=i(4),r=i(8),o=i(12),s=i(16),a=i(4);t.orient2d=function(t,i,l,u,h,c){let p=(i-c)*(l-h),d=(t-h)*(u-c),f=p-d;if(0===p||0===d||p>0!=d>0)return f;let g=Math.abs(p+d);return Math.abs(f)>=33306690738754716e-32*g?f:-function(t,i,l,u,h,c,p){let d,f,g,m,v,y,x,_,b,M,E,w,A,S,T,C,P,I,L=t-h,O=l-h,N=i-c,D=u-c;v=(T=(_=L-(x=(y=134217729*L)-(y-L)))*(M=D-(b=(y=134217729*D)-(y-D)))-((S=L*D)-x*b-_*b-x*M))-(E=T-(P=(_=N-(x=(y=134217729*N)-(y-N)))*(M=O-(b=(y=134217729*O)-(y-O)))-((C=N*O)-x*b-_*b-x*M))),n[0]=T-(E+v)+(v-P),v=(A=S-((w=S+E)-(v=w-S))+(E-v))-(E=A-C),n[1]=A-(E+v)+(v-C),v=(I=w+E)-w,n[2]=w-(I-v)+(E-v),n[3]=I;let R=function(t,e){let i=e[0];for(let t=1;t<4;t++)i+=e[t];return i}(0,n),q=22204460492503146e-32*p;if(R>=q||-R>=q||(d=t-(L+(v=t-L))+(v-h),g=l-(O+(v=l-O))+(v-h),f=i-(N+(v=i-N))+(v-c),m=u-(D+(v=u-D))+(v-c),0===d&&0===f&&0===g&&0===m)||(q=11093356479670487e-47*p+33306690738754706e-32*Math.abs(R),(R+=L*m+D*d-(N*g+O*f))>=q||-R>=q))return R;v=(T=(_=d-(x=(y=134217729*d)-(y-d)))*(M=D-(b=(y=134217729*D)-(y-D)))-((S=d*D)-x*b-_*b-x*M))-(E=T-(P=(_=f-(x=(y=134217729*f)-(y-f)))*(M=O-(b=(y=134217729*O)-(y-O)))-((C=f*O)-x*b-_*b-x*M))),a[0]=T-(E+v)+(v-P),v=(A=S-((w=S+E)-(v=w-S))+(E-v))-(E=A-C),a[1]=A-(E+v)+(v-C),v=(I=w+E)-w,a[2]=w-(I-v)+(E-v),a[3]=I;let B=e(4,n,4,a,r);v=(T=(_=L-(x=(y=134217729*L)-(y-L)))*(M=m-(b=(y=134217729*m)-(y-m)))-((S=L*m)-x*b-_*b-x*M))-(E=T-(P=(_=N-(x=(y=134217729*N)-(y-N)))*(M=g-(b=(y=134217729*g)-(y-g)))-((C=N*g)-x*b-_*b-x*M))),a[0]=T-(E+v)+(v-P),v=(A=S-((w=S+E)-(v=w-S))+(E-v))-(E=A-C),a[1]=A-(E+v)+(v-C),v=(I=w+E)-w,a[2]=w-(I-v)+(E-v),a[3]=I;let k=e(B,r,4,a,o);v=(T=(_=d-(x=(y=134217729*d)-(y-d)))*(M=m-(b=(y=134217729*m)-(y-m)))-((S=d*m)-x*b-_*b-x*M))-(E=T-(P=(_=f-(x=(y=134217729*f)-(y-f)))*(M=g-(b=(y=134217729*g)-(y-g)))-((C=f*g)-x*b-_*b-x*M))),a[0]=T-(E+v)+(v-P),v=(A=S-((w=S+E)-(v=w-S))+(E-v))-(E=A-C),a[1]=A-(E+v)+(v-C),v=(I=w+E)-w,a[2]=w-(I-v)+(E-v),a[3]=I;let F=e(k,o,4,a,s);return s[F-1]}(t,i,l,u,h,c,g)},t.orient2dfast=function(t,e,i,n,r,o){return(e-o)*(i-r)-(t-r)*(n-o)},Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof t&&typeof e<"u"?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n((i=i||self).predicates={})})),WF=Ye(((t,e)=>{"use strict";E();var i=OF(),n=xK(),r=qF(),o=UF().orient2d;function s(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;var r=m(t),o=new i(16);o.toBBox=function(t){return{minX:t[0],minY:t[1],maxX:t[0],maxY:t[1]}},o.compareMinX=function(t,e){return t[0]-e[0]},o.compareMinY=function(t,e){return t[1]-e[1]},o.load(t);for(var s,l=[],u=0;u<r.length;u++){var h=r[u];o.remove(h),s=v(h,s),l.push(s)}var c=new i(16);for(u=0;u<l.length;u++)c.insert(g(l[u]));for(var p=e*e,d=n*n;l.length;){var f=l.shift(),x=f.p,_=f.next.p,b=y(x,_);if(!(b<d)){var M=b/p;(h=a(o,f.prev.p,x,_,f.next.next.p,M,c))&&Math.min(y(h,x),y(h,_))<=M&&(l.push(f),l.push(v(h,f)),o.remove(h),c.remove(f),c.insert(g(f)),c.insert(g(f.next)))}}f=s;var E=[];do{E.push(f.p),f=f.next}while(f!==s);return E.push(f.p),E}function a(t,e,i,r,o,s,a){for(var u=new n([],l),c=t.data;c;){for(var d=0;d<c.children.length;d++){var f=c.children[d],g=c.leaf?x(f,i,r):h(i,r,f);g>s||u.push({node:f,dist:g})}for(;u.length&&!u.peek().node.children;){var m=u.pop(),v=m.node,y=x(v,e,i),_=x(v,r,o);if(m.dist<y&&m.dist<_&&p(i,v,a)&&p(r,v,a))return v}(c=u.pop())&&(c=c.node)}return null}function l(t,e){return t.dist-e.dist}function h(t,e,i){if(c(t,i)||c(e,i))return 0;var n=_(t[0],t[1],e[0],e[1],i.minX,i.minY,i.maxX,i.minY);if(0===n)return 0;var r=_(t[0],t[1],e[0],e[1],i.minX,i.minY,i.minX,i.maxY);if(0===r)return 0;var o=_(t[0],t[1],e[0],e[1],i.maxX,i.minY,i.maxX,i.maxY);if(0===o)return 0;var s=_(t[0],t[1],e[0],e[1],i.minX,i.maxY,i.maxX,i.maxY);return 0===s?0:Math.min(n,r,o,s)}function c(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function p(t,e,i){for(var n=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=i.search({minX:n,minY:r,maxX:o,maxY:s}),l=0;l<a.length;l++)if(f(a[l].p,a[l].next.p,t,e))return!1;return!0}function d(t,e,i){return o(t[0],t[1],e[0],e[1],i[0],i[1])}function f(t,e,i,n){return t!==n&&e!==i&&d(t,e,i)>0!=d(t,e,n)>0&&d(i,n,t)>0!=d(i,n,e)>0}function g(t){var e=t.p,i=t.next.p;return t.minX=Math.min(e[0],i[0]),t.minY=Math.min(e[1],i[1]),t.maxX=Math.max(e[0],i[0]),t.maxY=Math.max(e[1],i[1]),t}function m(t){for(var e=t[0],i=t[0],n=t[0],o=t[0],s=0;s<t.length;s++){var a=t[s];a[0]<e[0]&&(e=a),a[0]>n[0]&&(n=a),a[1]<i[1]&&(i=a),a[1]>o[1]&&(o=a)}var l=[e,i,n,o],u=l.slice();for(s=0;s<t.length;s++)r(t[s],l)||u.push(t[s]);return M(u)}function v(t,e){var i={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(i.next=e.next,i.prev=e,e.next.prev=i,e.next=i):(i.prev=i,i.next=i),i}function y(t,e){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function x(t,e,i){var n=e[0],r=e[1],o=i[0]-n,s=i[1]-r;if(0!==o||0!==s){var a=((t[0]-n)*o+(t[1]-r)*s)/(o*o+s*s);a>1?(n=i[0],r=i[1]):a>0&&(n+=o*a,r+=s*a)}return(o=t[0]-n)*o+(s=t[1]-r)*s}function _(t,e,i,n,r,o,s,a){var l,u,h,c,p=i-t,d=n-e,f=s-r,g=a-o,m=t-r,v=e-o,y=p*p+d*d,x=p*f+d*g,_=f*f+g*g,b=p*m+d*v,M=f*m+g*v,E=y*_-x*x,w=E,A=E;0===E?(u=0,w=1,c=M,A=_):(c=y*M-x*b,(u=x*M-_*b)<0?(u=0,c=M,A=_):u>w&&(u=w,c=M+x,A=_)),c<0?(c=0,-b<0?u=0:-b>y?u=w:(u=-b,w=y)):c>A&&(c=A,-b+x<0?u=0:-b+x>y?u=w:(u=-b+x,w=y));var S=(1-(h=0===c?0:c/A))*r+h*s-((1-(l=0===u?0:u/w))*t+l*i),T=(1-h)*o+h*a-((1-l)*e+l*n);return S*S+T*T}function b(t,e){return t[0]===e[0]?t[1]-e[1]:t[0]-e[0]}function M(t){t.sort(b);for(var e=[],i=0;i<t.length;i++){for(;e.length>=2&&d(e[e.length-2],e[e.length-1],t[i])<=0;)e.pop();e.push(t[i])}for(var n=[],r=t.length-1;r>=0;r--){for(;n.length>=2&&d(n[n.length-2],n[n.length-1],t[r])<=0;)n.pop();n.push(t[r])}return n.pop(),e.pop(),e.concat(n)}n.default&&(n=n.default),e.exports=s,e.exports.default=s,u(s,"concaveman"),u(a,"findCandidate"),u(l,"compareDist"),u(h,"sqSegBoxDist"),u(c,"inside"),u(p,"noIntersections"),u(d,"cross"),u(f,"intersects"),u(g,"updateBBox"),u(m,"fastConvexHull"),u(v,"insertNode"),u(y,"getSqDist"),u(x,"sqSegDist"),u(_,"sqSegSegDist"),u(b,"compareByX"),u(M,"convexHull")})),KF=Ye(((t,e)=>{var i,n;E(),i=t,n=function(){"use strict";function t(t,i,r,o,s){e(t,i,r||0,o||t.length-1,s||n)}function e(t,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=n-r+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1);e(t,n,Math.max(r,Math.floor(n-l*h/a+c)),Math.min(o,Math.floor(n+(a-l)*h/a+c)),s)}var p=t[n],d=r,f=o;for(i(t,r,n),s(t[o],p)>0&&i(t,r,o);d<f;){for(i(t,d,f),d++,f--;s(t[d],p)<0;)d++;for(;s(t[f],p)>0;)f--}0===s(t[r],p)?i(t,r,f):i(t,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}}function i(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function n(t,e){return t<e?-1:t>e?1:0}return u(t,"quickselect"),u(e,"quickselectStep"),u(i,"swap"),u(n,"defaultCompare"),t},"object"==typeof t&&typeof e<"u"?e.exports=n():"function"==typeof define&&define.amd?define(n):i.quickselect=n()})),CP=Ye(((t,e)=>{"use strict";E(),e.exports=n,e.exports.default=n;var i=KF();function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=v(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o,s=e;s<i;s++)o=t.children[s],a(r,t.leaf?n(o):o);return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function f(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,o-n)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function y(t,e,n,r,o){for(var s,a=[e,n];a.length;)!((n=a.pop())-(e=a.pop())<=r)&&(s=e+Math.ceil((n-e)/r/2)*r,i(t,s,e,n,o),a.push(e,s,s,n))}u(n,"rbush"),n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!m(t,e))return i;for(var r,o,s,a,l=[];e;){for(r=0,o=e.children.length;r<o;r++)s=e.children[r],m(t,a=e.leaf?n(s):s)&&(e.leaf?i.push(s):g(t,a)?this._all(s,i):l.push(s));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!m(t,e))return!1;for(var n,r,o,s,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(o=e.children[n],m(t,s=e.leaf?i(o):o)){if(e.leaf||g(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,s,a=this.data,l=this.toBBox(t),u=[],h=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],i=h.pop(),s=!0),a.leaf&&-1!==(o=r(t,a.children,e)))return a.children.splice(o,1),u.push(a),this._condense(u),this;s||a.leaf||!g(a,l)?n?(i++,a=n.children[i],s=!1):a=null:(u.push(a),h.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,s=i-e+1,a=this._maxEntries;if(s<=a)return o(r=v(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(r=v([])).leaf=!1,r.height=n;var l,u,h,c,p=Math.ceil(s/a),d=p*Math.ceil(Math.sqrt(a));for(y(t,e,i,d,this.compareMinX),l=e;l<=i;l+=d)for(y(t,l,h=Math.min(l+d-1,i),p,this.compareMinY),u=l;u<=h;u+=p)c=Math.min(u+p-1,h),r.children.push(this._build(t,u,c,n-1));return o(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,o,s,a,l,u,h,p;n.push(e),!e.leaf&&n.length-1!==i;){for(h=p=1/0,r=0,o=e.children.length;r<o;r++)l=c(s=e.children[r]),(u=d(t,s)-l)<p?(p=u,h=l<h?l:h,a=s):u===p&&l<h&&(h=l,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),o=[],s=this._chooseSubtree(r,this.data,e,o);for(s.children.push(t),a(s,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var s=this._chooseSplitIndex(i,r,n),a=v(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,o,a,l,u,h,p;for(u=h=1/0,n=e;n<=i-e;n++)a=f(r=s(t,0,n,this.toBBox),o=s(t,n,i,this.toBBox)),l=c(r)+c(o),a<u?(u=a,p=n,h=l<h?l:h):a===u&&l<h&&(h=l,p=n);return p},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,o,l=this.toBBox,u=s(t,0,e,l),h=s(t,i-e,i,l),c=p(u)+p(h);for(r=e;r<i-e;r++)o=t.children[r],a(u,t.leaf?l(o):o),c+=p(u);for(r=i-e-1;r>=e;r--)o=t.children[r],a(h,t.leaf?l(o):o),c+=p(h);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():o(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},u(r,"findItem"),u(o,"calcBBox"),u(s,"distBBox"),u(a,"extend"),u(l,"compareNodeMinX"),u(h,"compareNodeMinY"),u(c,"bboxArea"),u(p,"bboxMargin"),u(d,"enlargedArea"),u(f,"intersectionArea"),u(g,"contains"),u(m,"intersects"),u(v,"createNode"),u(y,"multiSelect")})),tU=Ye(((t,e)=>{var i,n;E(),i=t,n=function(){"use strict";function t(t,n,r,o,s){u((function t(i,n,r,o,s){for(;o>r;){if(o-r>600){var a=o-r+1,l=n-r+1,u=Math.log(a),h=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*h*(a-h)/a)*(l-a/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-l*h/a+c)),Math.min(o,Math.floor(n+(a-l)*h/a+c)),s)}var p=i[n],d=r,f=o;for(e(i,r,n),s(i[o],p)>0&&e(i,r,o);d<f;){for(e(i,d,f),d++,f--;s(i[d],p)<0;)d++;for(;s(i[f],p)>0;)f--}0===s(i[r],p)?e(i,r,f):e(i,++f,o),f<=n&&(r=f+1),n<=f&&(o=f-1)}}),"t")(t,n,r||0,o||t.length-1,s||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}u(t,"t"),u(e,"i"),u(i,"n");var n=u((function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}),"r");function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function o(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,r){r||(r=g(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var o=e;o<i;o++){var s=t.children[o];a(r,t.leaf?n(s):s)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(e,i,n,r,o){for(var s=[i,n];s.length;)if(!((n=s.pop())-(i=s.pop())<=r)){var a=i+Math.ceil((n-i)/r/2)*r;t(e,a,i,n,o),s.push(i,a,a,n)}}return u(r,"e"),u(o,"a"),u(s,"h"),u(a,"o"),u(l,"s"),u(h,"l"),u(c,"f"),u(p,"u"),u(d,"m"),u(f,"c"),u(g,"p"),u(m,"d"),n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!f(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var o=0;o<e.children.length;o++){var s=e.children[o],a=e.leaf?n(s):s;f(t,a)&&(e.leaf?i.push(s):d(t,a)?this._all(s,i):r.push(s))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!f(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],o=e.leaf?this.toBBox(r):r;if(f(t,o)){if(e.leaf||d(t,o))return!0;i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=g([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,o,s=this.data,a=this.toBBox(t),l=[],u=[];s||l.length;){if(s||(s=l.pop(),n=l[l.length-1],i=u.pop(),o=!0),s.leaf){var h=r(t,s.children,e);if(-1!==h)return s.children.splice(h,1),l.push(s),this._condense(l),this}o||s.leaf||!d(s,a)?n?(i++,s=n.children[i],o=!1):s=null:(l.push(s),u.push(i),i=0,n=s,s=s.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var r,s=i-e+1,a=this._maxEntries;if(s<=a)return o(r=g(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(r=g([])).leaf=!1,r.height=n;var l=Math.ceil(s/a),u=l*Math.ceil(Math.sqrt(a));m(t,e,i,u,this.compareMinX);for(var h=e;h<=i;h+=u){var c=Math.min(h+u-1,i);m(t,h,c,l,this.compareMinY);for(var p=h;p<=c;p+=l){var d=Math.min(p+l-1,c);r.children.push(this._build(t,p,d,n-1))}}return o(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,o=1/0,s=void 0,a=0;a<e.children.length;a++){var l=e.children[a],u=c(l),h=(p=t,d=l,(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-u);h<o?(o=h,r=u<r?u:r,s=l):h===o&&u<r&&(r=u,s=l)}e=s||e.children[0]}var p,d;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],o=this._chooseSubtree(n,this.data,e,r);for(o.children.push(t),a(o,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var s=this._chooseSplitIndex(i,r,n),a=g(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,o(i,this.toBBox),o(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,o,a,l,u,h,p=1/0,d=1/0,f=e;f<=i-e;f++){var g=s(t,0,f,this.toBBox),m=s(t,f,i,this.toBBox),v=(r=g,o=m,a=Math.max(r.minX,o.minX),l=Math.max(r.minY,o.minY),u=Math.min(r.maxX,o.maxX),h=Math.min(r.maxY,o.maxY),Math.max(0,u-a)*Math.max(0,h-l)),y=c(g)+c(m);v<p?(p=v,n=f,d=y<d?y:d):v===p&&y<d&&(d=y,n=f)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,o=s(t,0,e,r),l=s(t,i-e,i,r),u=p(o)+p(l),h=e;h<i-e;h++){var c=t.children[h];a(o,t.leaf?r(c):c),u+=p(o)}for(var d=i-e-1;d>=e;d--){var f=t.children[d];a(l,t.leaf?r(f):f),u+=p(l)}return u},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n},"object"==typeof t&&typeof e<"u"?e.exports=n():"function"==typeof define&&define.amd?define(n):(i=i||self).RBush=n()})),BP=Ye((t=>{"use strict";function e(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function i(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return n(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return o(e).geometry;case"MultiPoint":return p(e).geometry;case"MultiLineString":return c(e).geometry;case"MultiPolygon":return d(e).geometry;default:throw new Error(t+" is invalid")}}function n(t,i,n){if(void 0===n&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A(t[0])||!A(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},i,n)}function r(t,e,i){return void 0===i&&(i={}),h(t.map((function(t){return n(t,e)})),i)}function o(t,i,n){void 0===n&&(n={});for(var r=0,o=t;r<o.length;r++){var s=o[r];if(s.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<s[s.length-1].length;a++)if(s[s.length-1][a]!==s[0][a])throw new Error("First and last Position are not equivalent.")}return e({type:"Polygon",coordinates:t},i,n)}function s(t,e,i){return void 0===i&&(i={}),h(t.map((function(t){return o(t,e)})),i)}function a(t,i,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return e({type:"LineString",coordinates:t},i,n)}function l(t,e,i){return void 0===i&&(i={}),h(t.map((function(t){return a(t,e)})),i)}function h(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function c(t,i,n){return void 0===n&&(n={}),e({type:"MultiLineString",coordinates:t},i,n)}function p(t,i,n){return void 0===n&&(n={}),e({type:"MultiPoint",coordinates:t},i,n)}function d(t,i,n){return void 0===n&&(n={}),e({type:"MultiPolygon",coordinates:t},i,n)}function f(t,i,n){return void 0===n&&(n={}),e({type:"GeometryCollection",geometries:t},i,n)}function g(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i}function m(e,i){void 0===i&&(i="kilometers");var n=t.factors[i];if(!n)throw new Error(i+" units is invalid");return e*n}function v(e,i){void 0===i&&(i="kilometers");var n=t.factors[i];if(!n)throw new Error(i+" units is invalid");return e/n}function y(t,e){return _(v(t,e))}function x(t){var e=t%360;return e<0&&(e+=360),e}function _(t){return 180*(t%(2*Math.PI))/Math.PI}function b(t){return t%360*Math.PI/180}function M(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return m(v(t,e),i)}function w(e,i,n){if(void 0===i&&(i="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var r=t.areaFactors[i];if(!r)throw new Error("invalid original units");var o=t.areaFactors[n];if(!o)throw new Error("invalid final units");return e/r*o}function A(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function S(t){return!!t&&t.constructor===Object}function T(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!A(t))throw new Error("bbox must only contain numbers")}))}function C(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}E(),Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:1.0936*t.earthRadius},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1.0936133},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},u(e,"feature"),t.feature=e,u(i,"geometry"),t.geometry=i,u(n,"point"),t.point=n,u(r,"points"),t.points=r,u(o,"polygon"),t.polygon=o,u(s,"polygons"),t.polygons=s,u(a,"lineString"),t.lineString=a,u(l,"lineStrings"),t.lineStrings=l,u(h,"featureCollection"),t.featureCollection=h,u(c,"multiLineString"),t.multiLineString=c,u(p,"multiPoint"),t.multiPoint=p,u(d,"multiPolygon"),t.multiPolygon=d,u(f,"geometryCollection"),t.geometryCollection=f,u(g,"round"),t.round=g,u(m,"radiansToLength"),t.radiansToLength=m,u(v,"lengthToRadians"),t.lengthToRadians=v,u(y,"lengthToDegrees"),t.lengthToDegrees=y,u(x,"bearingToAzimuth"),t.bearingToAzimuth=x,u(_,"radiansToDegrees"),t.radiansToDegrees=_,u(b,"degreesToRadians"),t.degreesToRadians=b,u(M,"convertLength"),t.convertLength=M,u(w,"convertArea"),t.convertArea=w,u(A,"isNumber"),t.isNumber=A,u(S,"isObject"),t.isObject=S,u(T,"validateBBox"),t.validateBBox=T,u(C,"validateId"),t.validateId=C})),qP=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0});var e=BP();function i(t,e,n){if(null!==t)for(var r,o,s,a,l,u,h,c,p=0,d=0,f=t.type,g="FeatureCollection"===f,m="Feature"===f,v=g?t.features.length:1,y=0;y<v;y++){l=(c=!!(h=g?t.features[y].geometry:m?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var x=0;x<l;x++){var _=0,b=0;if(null!==(a=c?h.geometries[x]:h)){u=a.coordinates;var M=a.type;switch(p=!n||"Polygon"!==M&&"MultiPolygon"!==M?0:1,M){case null:break;case"Point":if(!1===e(u,d,y,_,b))return!1;d++,_++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++){if(!1===e(u[r],d,y,_,b))return!1;d++,"MultiPoint"===M&&_++}"LineString"===M&&_++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(o=0;o<u[r].length-p;o++){if(!1===e(u[r][o],d,y,_,b))return!1;d++}"MultiLineString"===M&&_++,"Polygon"===M&&b++}"Polygon"===M&&_++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for(b=0,o=0;o<u[r].length;o++){for(s=0;s<u[r][o].length-p;s++){if(!1===e(u[r][o][s],d,y,_,b))return!1;d++}b++}_++}break;case"GeometryCollection":for(r=0;r<a.geometries.length;r++)if(!1===i(a.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function n(t,e,n,r){var o=n;return i(t,(function(t,i,r,s,a){o=0===i&&void 0===n?t:e(o,t,i,r,s,a)}),r),o}function r(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function o(t,e,i){var n=i;return r(t,(function(t,r){n=0===r&&void 0===i?t:e(n,t,r)})),n}function s(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function a(t,e,i){var n=i;return s(t,(function(t,r){n=0===r&&void 0===i?t:e(n,t,r)})),n}function l(t){var e=[];return i(t,(function(t){e.push(t)})),e}function h(t,e){var i,n,r,o,s,a,l,u,h,c,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,g=d?t.features.length:1;for(i=0;i<g;i++){for(a=d?t.features[i].geometry:f?t.geometry:t,u=d?t.features[i].properties:f?t.properties:{},h=d?t.features[i].bbox:f?t.bbox:void 0,c=d?t.features[i].id:f?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,h,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],p,u,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,h,c))return!1;p++}}function c(t,e,i){var n=i;return h(t,(function(t,r,o,s,a){n=0===r&&void 0===i?t:e(n,t,r,o,s,a)})),n}function p(t,i){h(t,(function(t,n,r,o,s){var a,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==i(e.feature(t,r,{bbox:o,id:s}),n,0)&&void 0}switch(l){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var u=0;u<t.coordinates.length;u++){var h={type:a,coordinates:t.coordinates[u]};if(!1===i(e.feature(h,r),n,u))return!1}}))}function d(t,e,i){var n=i;return p(t,(function(t,r,o){n=0===r&&0===o&&void 0===i?t:e(n,t,r,o)})),n}function f(t,n){p(t,(function(t,r,o){var s=0;if(t.geometry){var a=t.geometry.type;if("Point"!==a&&"MultiPoint"!==a){var l,u=0,h=0,c=0;if(!1===i(t,(function(i,a,p,d,f){if(void 0===l||r>u||d>h||f>c)return l=i,u=r,h=d,c=f,void(s=0);var g=e.lineString([l,i],t.properties);if(!1===n(g,r,o,f,s))return!1;s++,l=i})))return!1}}}))}function g(t,e,i){var n=i,r=!1;return f(t,(function(t,o,s,a,l){n=!1===r&&void 0===i?t:e(n,t,o,s,a,l),r=!0})),n}function m(t,i){if(!t)throw new Error("geojson is required");p(t,(function(t,n,r){if(null!==t.geometry){var o=t.geometry.type,s=t.geometry.coordinates;switch(o){case"LineString":if(!1===i(t,n,r,0,0))return!1;break;case"Polygon":for(var a=0;a<s.length;a++)if(!1===i(e.lineString(s[a],t.properties),n,r,a))return!1}}}))}function v(t,e,i){var n=i;return m(t,(function(t,r,o,s){n=0===r&&void 0===i?t:e(n,t,r,o,s)})),n}function y(t,i){if(i=i||{},!e.isObject(i))throw new Error("options is invalid");var n,r=i.featureIndex||0,o=i.multiFeatureIndex||0,s=i.geometryIndex||0,a=i.segmentIndex||0,l=i.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=u.length+a-1),e.lineString([u[a],u[a+1]],l,i);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a-1),e.lineString([u[s][a],u[s][a+1]],l,i);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a-1),e.lineString([u[o][a],u[o][a+1]],l,i);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a-1),e.lineString([u[o][s][a],u[o][s][a+1]],l,i)}throw new Error("geojson is invalid")}function x(t,i){if(i=i||{},!e.isObject(i))throw new Error("options is invalid");var n,r=i.featureIndex||0,o=i.multiFeatureIndex||0,s=i.geometryIndex||0,a=i.coordIndex||0,l=i.properties;switch(t.type){case"FeatureCollection":r<0&&(r=t.features.length+r),l=l||t.features[r].properties,n=t.features[r].geometry;break;case"Feature":l=l||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var u=n.coordinates;switch(n.type){case"Point":return e.point(u,l,i);case"MultiPoint":return o<0&&(o=u.length+o),e.point(u[o],l,i);case"LineString":return a<0&&(a=u.length+a),e.point(u[a],l,i);case"Polygon":return s<0&&(s=u.length+s),a<0&&(a=u[s].length+a),e.point(u[s][a],l,i);case"MultiLineString":return o<0&&(o=u.length+o),a<0&&(a=u[o].length+a),e.point(u[o][a],l,i);case"MultiPolygon":return o<0&&(o=u.length+o),s<0&&(s=u[o].length+s),a<0&&(a=u[o][s].length-a),e.point(u[o][s][a],l,i)}throw new Error("geojson is invalid")}u(i,"coordEach"),u(n,"coordReduce"),u(r,"propEach"),u(o,"propReduce"),u(s,"featureEach"),u(a,"featureReduce"),u(l,"coordAll"),u(h,"geomEach"),u(c,"geomReduce"),u(p,"flattenEach"),u(d,"flattenReduce"),u(f,"segmentEach"),u(g,"segmentReduce"),u(m,"lineEach"),u(v,"lineReduce"),u(y,"findSegment"),u(x,"findPoint"),t.coordAll=l,t.coordEach=i,t.coordReduce=n,t.featureEach=s,t.featureReduce=a,t.findPoint=x,t.findSegment=y,t.flattenEach=p,t.flattenReduce=d,t.geomEach=h,t.geomReduce=c,t.lineEach=m,t.lineReduce=v,t.propEach=r,t.propReduce=o,t.segmentEach=f,t.segmentReduce=g})),hU=Ye((t=>{"use strict";E(),Object.defineProperty(t,"__esModule",{value:!0});var e=qP();function i(t){var i=[1/0,1/0,-1/0,-1/0];return e.coordEach(t,(function(t){i[0]>t[0]&&(i[0]=t[0]),i[1]>t[1]&&(i[1]=t[1]),i[2]<t[0]&&(i[2]=t[0]),i[3]<t[1]&&(i[3]=t[1])})),i}u(i,"bbox"),i.default=i,t.default=i})),Ww=Ye(((t,e)=>{E();var i=tU(),n=BP(),r=qP(),o=hU().default,s=r.featureEach,a=(r.coordEach,n.polygon,n.featureCollection);function l(t){var e=new i(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:o(t),i.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:o(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:o(t),e.push(t)})),i.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:o(t),i.prototype.remove.call(this,t,e)},e.clear=function(){return i.prototype.clear.call(this)},e.search=function(t){var e=i.prototype.search.call(this,this.toBBox(t));return a(e)},e.collides=function(t){return i.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=i.prototype.all.call(this);return a(t)},e.toJSON=function(){return i.prototype.toJSON.call(this)},e.fromJSON=function(t){return i.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=o(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=o(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}u(l,"geojsonRbush"),e.exports=l,e.exports.default=l})),WP=Ye(((t,e)=>{"use strict";E();var i=Object.prototype.toString;e.exports=u((function(t){var e=i.call(t),n="[object Arguments]"===e;return n||(n="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===i.call(t.callee)),n}),"isArguments")})),NU=Ye(((t,e)=>{"use strict";var i,n,r,o,s,a,l,h,c,p,d,f;E(),Object.keys||(n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,o=WP(),s=Object.prototype.propertyIsEnumerable,a=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),h=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=u((function(t){var e=t.constructor;return e&&e.prototype===t}),"equalsConstructorPrototype"),p={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if(typeof window>"u")return!1;for(var t in window)try{if(!p["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch{return!0}}catch{return!0}return!1}(),f=u((function(t){if(typeof window>"u"||!d)return c(t);try{return c(t)}catch{return!1}}),"equalsConstructorPrototypeIfNotBuggy"),i=u((function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===r.call(t),s=o(t),u=e&&"[object String]"===r.call(t),c=[];if(!e&&!i&&!s)throw new TypeError("Object.keys called on a non-object");var p=l&&i;if(u&&t.length>0&&!n.call(t,0))for(var d=0;d<t.length;++d)c.push(String(d));if(s&&t.length>0)for(var g=0;g<t.length;++g)c.push(String(g));else for(var m in t)(!p||"prototype"!==m)&&n.call(t,m)&&c.push(String(m));if(a)for(var v=f(t),y=0;y<h.length;++y)(!v||"constructor"!==h[y])&&n.call(t,h[y])&&c.push(h[y]);return c}),"keys")),e.exports=i})),Kw=Ye(((t,e)=>{"use strict";E();var i=Array.prototype.slice,n=WP(),r=Object.keys,o=r?u((function(t){return r(t)}),"keys"):NU(),s=Object.keys;o.shim=u((function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=u((function(t){return n(t)?s(i.call(t)):s(t)}),"keys"))}else Object.keys=o;return Object.keys||o}),"shimObjectKeys"),e.exports=o})),FU=Ye(((t,e)=>{"use strict";E(),e.exports=u((function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}),"hasSymbols")})),ZP=Ye(((t,e)=>{"use strict";E();var i=FU();e.exports=u((function(){return i()&&!!Symbol.toStringTag}),"hasToStringTagShams")})),GU=Ye(((t,e)=>{"use strict";E(),e.exports=u((function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}),"hasSymbols")})),jU=Ye(((t,e)=>{"use strict";E();var i=typeof Symbol<"u"&&Symbol,n=GU();e.exports=u((function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}),"hasNativeSymbols")})),YU=Ye(((t,e)=>{"use strict";E();var i="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,o="[object Function]";e.exports=u((function(t){var e=this;if("function"!=typeof e||r.call(e)!==o)throw new TypeError(i+e);for(var s,a=n.call(arguments,1),l=u((function(){if(this instanceof s){var i=e.apply(this,a.concat(n.call(arguments)));return Object(i)===i?i:this}return e.apply(t,a.concat(n.call(arguments)))}),"binder"),h=Math.max(0,e.length-a.length),c=[],p=0;p<h;p++)c.push("$"+p);if(s=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(l),e.prototype){var d=u((function(){}),"Empty");d.prototype=e.prototype,s.prototype=new d,d.prototype=null}return s}),"bind")})),A1=Ye(((t,e)=>{"use strict";E();var i=YU();e.exports=Function.prototype.bind||i})),KP=Ye(((t,e)=>{"use strict";E();var i=A1();e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)})),eI=Ye(((t,e)=>{"use strict";E();var i,n=SyntaxError,r=Function,o=TypeError,s=u((function(t){try{return r('"use strict"; return ('+t+").constructor;")()}catch{}}),"getEvalledConstructor"),a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch{a=null}var l=u((function(){throw new o}),"throwTypeError"),h=a?function(){try{return l}catch{try{return a(arguments,"callee").get}catch{return l}}}():l,c=jU()(),p=Object.getPrototypeOf||function(t){return t.__proto__},d={},f=typeof Uint8Array>"u"?i:p(Uint8Array),g={"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":c?p([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":d,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?p(p([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!c?i:p((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!c?i:p((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?p(""[Symbol.iterator]()):i,"%Symbol%":c?Symbol:i,"%SyntaxError%":n,"%ThrowTypeError%":h,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet},m=u((function t(e){var i;if("%AsyncFunction%"===e)i=s("async function () {}");else if("%GeneratorFunction%"===e)i=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=s("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(i=p(r.prototype))}return g[e]=i,i}),"doEval"),v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=A1(),x=KP(),_=y.call(Function.call,Array.prototype.concat),b=y.call(Function.apply,Array.prototype.splice),M=y.call(Function.call,String.prototype.replace),w=y.call(Function.call,String.prototype.slice),A=y.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,C=u((function(t){var e=w(t,0,1),i=w(t,-1);if("%"===e&&"%"!==i)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new n("invalid intrinsic syntax, expected opening `%`");var r=[];return M(t,S,(function(t,e,i,n){r[r.length]=i?M(n,T,"$1"):e||t})),r}),"stringToPath"),P=u((function(t,e){var i,r=t;if(x(v,r)&&(r="%"+(i=v[r])[0]+"%"),x(g,r)){var s=g[r];if(s===d&&(s=m(r)),typeof s>"u"&&!e)throw new o("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new n("intrinsic "+t+" does not exist!")}),"getBaseIntrinsic");e.exports=u((function(t,e){if("string"!=typeof t||0===t.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new o('"allowMissing" argument must be a boolean');if(null===A(/^%?[^%]*%?$/g,t))throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=C(t),r=i.length>0?i[0]:"",s=P("%"+r+"%",e),l=s.name,u=s.value,h=!1,c=s.alias;c&&(r=c[0],b(i,_([0,1],c)));for(var p=1,d=!0;p<i.length;p+=1){var f=i[p],m=w(f,0,1),v=w(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new n("property names with quotes must have matching quotes");if(("constructor"===f||!d)&&(h=!0),x(g,l="%"+(r+="."+f)+"%"))u=g[l];else if(null!=u){if(!(f in u)){if(!e)throw new o("base intrinsic for "+t+" exists, but the property is not available.");return}if(a&&p+1>=i.length){var y=a(u,f);u=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[f]}else d=x(u,f),u=u[f];d&&!h&&(g[l]=u)}}return u}),"GetIntrinsic")})),tM=Ye(((t,e)=>{"use strict";E();var i=A1(),n=eI(),r=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||i.call(o,r),a=n("%Object.getOwnPropertyDescriptor%",!0),l=n("%Object.defineProperty%",!0),h=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}e.exports=u((function(t){var e=s(i,o,arguments);if(a&&l){var n=a(e,"length");n.configurable&&l(e,"length",{value:1+h(0,t.length-(arguments.length-1))})}return e}),"callBind");var c=u((function(){return s(i,r,arguments)}),"applyBind");l?l(e.exports,"apply",{value:c}):e.exports.apply=c})),nI=Ye(((t,e)=>{"use strict";E();var i=eI(),n=tM(),r=n(i("String.prototype.indexOf"));e.exports=u((function(t,e){var o=i(t,!!e);return"function"==typeof o&&r(t,".prototype.")>-1?n(o):o}),"callBoundIntrinsic")})),cz=Ye(((t,e)=>{"use strict";E();var i=ZP()(),n=nI()("Object.prototype.toString"),r=u((function(t){return!(i&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===n(t)}),"isArguments"),o=u((function(t){return!!r(t)||null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==n(t)&&"[object Function]"===n(t.callee)}),"isArguments"),s=function(){return r(arguments)}();r.isLegacyArguments=o,e.exports=s?r:o})),sI=Ye(((t,e)=>{"use strict";E();var i=Kw(),n="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,o=Array.prototype.concat,s=Object.defineProperty,a=u((function(t){return"function"==typeof t&&"[object Function]"===r.call(t)}),"isFunction"),l=u((function(){var t={};try{for(var e in s(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch{return!1}}),"arePropertyDescriptorsSupported"),h=s&&l(),c=u((function(t,e,i,n){e in t&&(!a(n)||!n())||(h?s(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)}),"defineProperty"),p=u((function(t,e){var r=arguments.length>2?arguments[2]:{},s=i(e);n&&(s=o.call(s,Object.getOwnPropertySymbols(e)));for(var a=0;a<s.length;a+=1)c(t,s[a],e[s[a]],r[s[a]])}),"defineProperties");p.supportsDescriptors=!!h,e.exports=p})),oI=Ye(((t,e)=>{"use strict";E();var i=u((function(t){return t!=t}),"numberIsNaN");e.exports=u((function(t,e){return 0===t&&0===e?1/t==1/e:!!(t===e||i(t)&&i(e))}),"is")})),aI=Ye(((t,e)=>{"use strict";E();var i=oI();e.exports=u((function(){return"function"==typeof Object.is?Object.is:i}),"getPolyfill")})),yz=Ye(((t,e)=>{"use strict";E();var i=aI(),n=sI();e.exports=u((function(){var t=i();return n(Object,{is:t},{is:u((function(){return Object.is!==t}),"testObjectIs")}),t}),"shimObjectIs")})),wz=Ye(((t,e)=>{"use strict";E();var i=sI(),n=tM(),r=oI(),o=aI(),s=yz(),a=n(o(),Object);i(a,{getPolyfill:o,implementation:r,shim:s}),e.exports=a})),Az=Ye(((t,e)=>{"use strict";E();var i,n,r,o,s=nI(),a=ZP()();a&&(i=s("Object.prototype.hasOwnProperty"),n=s("RegExp.prototype.exec"),r={},l=u((function(){throw r}),"throwRegexMarker"),o={toString:l,valueOf:l},"symbol"==typeof Symbol.toPrimitive&&(o[Symbol.toPrimitive]=l));var l,h=s("Object.prototype.toString"),c=Object.getOwnPropertyDescriptor;e.exports=u(a?function(t){if(!t||"object"!=typeof t)return!1;var e=c(t,"lastIndex");if(!(e&&i(e,"value")))return!1;try{n(t,o)}catch(t){return t===r}}:function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===h(t)},"isRegex")})),Pz=Ye(((t,e)=>{"use strict";E(),e.exports=u((function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e||"[object Symbol]"!==Object.prototype.toString.call(e)||"[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(e in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var r=Object.getOwnPropertyDescriptor(t,e);if(42!==r.value||!0!==r.enumerable)return!1}return!0}),"hasSymbols")})),Lz=Ye(((t,e)=>{"use strict";E();var i=typeof Symbol<"u"&&Symbol,n=Pz();e.exports=u((function(){return"function"==typeof i&&"function"==typeof Symbol&&"symbol"==typeof i("foo")&&"symbol"==typeof Symbol("bar")&&n()}),"hasNativeSymbols")})),kz=Ye(((t,e)=>{"use strict";E();var i,n=SyntaxError,r=Function,o=TypeError,s=u((function(t){try{return r('"use strict"; return ('+t+").constructor;")()}catch{}}),"getEvalledConstructor"),a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch{a=null}var l=u((function(){throw new o}),"throwTypeError"),h=a?function(){try{return l}catch{try{return a(arguments,"callee").get}catch{return l}}}():l,c=Lz()(),p=Object.getPrototypeOf||function(t){return t.__proto__},d={},f=typeof Uint8Array>"u"?i:p(Uint8Array),g={"%AggregateError%":typeof AggregateError>"u"?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?i:ArrayBuffer,"%ArrayIteratorPrototype%":c?p([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":typeof Atomics>"u"?i:Atomics,"%BigInt%":typeof BigInt>"u"?i:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?i:Float32Array,"%Float64Array%":typeof Float64Array>"u"?i:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?i:FinalizationRegistry,"%Function%":r,"%GeneratorFunction%":d,"%Int8Array%":typeof Int8Array>"u"?i:Int8Array,"%Int16Array%":typeof Int16Array>"u"?i:Int16Array,"%Int32Array%":typeof Int32Array>"u"?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":c?p(p([][Symbol.iterator]())):i,"%JSON%":"object"==typeof JSON?JSON:i,"%Map%":typeof Map>"u"?i:Map,"%MapIteratorPrototype%":typeof Map>"u"||!c?i:p((new Map)[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?i:Promise,"%Proxy%":typeof Proxy>"u"?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?i:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?i:Set,"%SetIteratorPrototype%":typeof Set>"u"||!c?i:p((new Set)[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":c?p(""[Symbol.iterator]()):i,"%Symbol%":c?Symbol:i,"%SyntaxError%":n,"%ThrowTypeError%":h,"%TypedArray%":f,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?i:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?i:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?i:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?i:WeakMap,"%WeakRef%":typeof WeakRef>"u"?i:WeakRef,"%WeakSet%":typeof WeakSet>"u"?i:WeakSet},m=u((function t(e){var i;if("%AsyncFunction%"===e)i=s("async function () {}");else if("%GeneratorFunction%"===e)i=s("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=s("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(i=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var r=t("%AsyncGenerator%");r&&(i=p(r.prototype))}return g[e]=i,i}),"doEval"),v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=A1(),x=KP(),_=y.call(Function.call,Array.prototype.concat),b=y.call(Function.apply,Array.prototype.splice),M=y.call(Function.call,String.prototype.replace),w=y.call(Function.call,String.prototype.slice),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,S=/\\(\\)?/g,T=u((function(t){var e=w(t,0,1),i=w(t,-1);if("%"===e&&"%"!==i)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new n("invalid intrinsic syntax, expected opening `%`");var r=[];return M(t,A,(function(t,e,i,n){r[r.length]=i?M(n,S,"$1"):e||t})),r}),"stringToPath"),C=u((function(t,e){var i,r=t;if(x(v,r)&&(r="%"+(i=v[r])[0]+"%"),x(g,r)){var s=g[r];if(s===d&&(s=m(r)),typeof s>"u"&&!e)throw new o("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new n("intrinsic "+t+" does not exist!")}),"getBaseIntrinsic");e.exports=u((function(t,e){if("string"!=typeof t||0===t.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new o('"allowMissing" argument must be a boolean');var i=T(t),r=i.length>0?i[0]:"",s=C("%"+r+"%",e),l=s.name,u=s.value,h=!1,c=s.alias;c&&(r=c[0],b(i,_([0,1],c)));for(var p=1,d=!0;p<i.length;p+=1){var f=i[p],m=w(f,0,1),v=w(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===v||"'"===v||"`"===v)&&m!==v)throw new n("property names with quotes must have matching quotes");if(("constructor"===f||!d)&&(h=!0),x(g,l="%"+(r+="."+f)+"%"))u=g[l];else if(null!=u){if(!(f in u)){if(!e)throw new o("base intrinsic for "+t+" exists, but the property is not available.");return}if(a&&p+1>=i.length){var y=a(u,f);u=(d=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:u[f]}else d=x(u,f),u=u[f];d&&!h&&(g[l]=u)}}return u}),"GetIntrinsic")})),Fz=Ye(((t,e)=>{"use strict";E();var i=kz()("%Object.defineProperty%",!0),n=u((function(){if(i)try{return i({},"a",{value:1}),!0}catch{return!1}return!1}),"hasPropertyDescriptors");n.hasArrayLengthDefineBug=u((function(){if(!n())return null;try{return 1!==i([],"length",{value:1}).length}catch{return!0}}),"hasArrayLengthDefineBug"),e.exports=n})),aM=Ye(((t,e)=>{"use strict";E();var i=Kw(),n="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),r=Object.prototype.toString,o=Array.prototype.concat,s=Object.defineProperty,a=u((function(t){return"function"==typeof t&&"[object Function]"===r.call(t)}),"isFunction"),l=Fz()(),h=s&&l,c=u((function(t,e,i,n){if(e in t)if(!0===n){if(t[e]===i)return}else if(!a(n)||!n())return;h?s(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i}),"defineProperty"),p=u((function(t,e){var r=arguments.length>2?arguments[2]:{},s=i(e);n&&(s=o.call(s,Object.getOwnPropertySymbols(e)));for(var a=0;a<s.length;a+=1)c(t,s[a],e[s[a]],r[s[a]])}),"defineProperties");p.supportsDescriptors=!!h,e.exports=p})),jz=Ye(((t,e)=>{"use strict";E();var i=u((function(){return"string"==typeof u((function(){}),"f").name}),"functionsHaveNames"),n=Object.getOwnPropertyDescriptor;if(n)try{n([],"length")}catch{n=null}i.functionsHaveConfigurableNames=u((function(){if(!i()||!n)return!1;var t=n((function(){}),"name");return!!t&&!!t.configurable}),"functionsHaveConfigurableNames");var r=Function.prototype.bind;i.boundFunctionsHaveNames=u((function(){return i()&&"function"==typeof r&&""!==u((function(){}),"f").bind().name}),"boundFunctionsHaveNames"),e.exports=i})),gI=Ye(((t,e)=>{"use strict";E();var i=jz().functionsHaveConfigurableNames(),n=Object,r=TypeError;e.exports=u((function(){if(null!=this&&this!==n(this))throw new r("RegExp.prototype.flags getter called on non-object");var t="";return this.hasIndices&&(t+="d"),this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.dotAll&&(t+="s"),this.unicode&&(t+="u"),this.unicodeSets&&(t+="v"),this.sticky&&(t+="y"),t}),"flags"),i&&Object.defineProperty&&Object.defineProperty(e.exports,"name",{value:"get flags"})})),vI=Ye(((t,e)=>{"use strict";E();var i=gI(),n=aM().supportsDescriptors,r=Object.getOwnPropertyDescriptor;e.exports=u((function(){if(n&&"gim"===/a/gim.flags){var t=r(RegExp.prototype,"flags");if(t&&"function"==typeof t.get&&"boolean"==typeof RegExp.prototype.dotAll&&"boolean"==typeof RegExp.prototype.hasIndices){var e="",o={};if(Object.defineProperty(o,"hasIndices",{get:function(){e+="d"}}),Object.defineProperty(o,"sticky",{get:function(){e+="y"}}),"dy"===e)return t.get}}return i}),"getPolyfill")})),Zz=Ye(((t,e)=>{"use strict";E();var i=aM().supportsDescriptors,n=vI(),r=Object.getOwnPropertyDescriptor,o=Object.defineProperty,s=TypeError,a=Object.getPrototypeOf,l=/a/;e.exports=u((function(){if(!i||!a)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var t=n(),e=a(l),u=r(e,"flags");return(!u||u.get!==t)&&o(e,"flags",{configurable:!0,enumerable:!1,get:t}),t}),"shimFlags")})),$z=Ye(((t,e)=>{"use strict";E();var i=aM(),n=tM(),r=gI(),o=vI(),s=Zz(),a=n(o());i(a,{getPolyfill:o,implementation:r,shim:s}),e.exports=a})),tG=Ye(((t,e)=>{"use strict";E();var i=Date.prototype.getDay,n=u((function(t){try{return i.call(t),!0}catch{return!1}}),"tryDateGetDayCall"),r=Object.prototype.toString,o="function"==typeof Symbol&&!!Symbol.toStringTag;e.exports=u((function(t){return"object"==typeof t&&null!==t&&(o?n(t):"[object Date]"===r.call(t))}),"isDateObject")})),yI=Ye(((t,e)=>{E();var i=Kw(),n=cz(),r=wz(),o=Az(),s=$z(),a=tG(),l=Date.prototype.getTime;function h(t,e,i){var n=i||{};return!!(n.strict?r(t,e):t===e)||(!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?r(t,e):t==e:d(t,e,n))}function c(t){return null==t}function p(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}function d(t,e,r){var u,d;if(typeof t!=typeof e||c(t)||c(e)||t.prototype!==e.prototype||n(t)!==n(e))return!1;var f=o(t),g=o(e);if(f!==g)return!1;if(f||g)return t.source===e.source&&s(t)===s(e);if(a(t)&&a(e))return l.call(t)===l.call(e);var m=p(t),v=p(e);if(m!==v)return!1;if(m||v){if(t.length!==e.length)return!1;for(u=0;u<t.length;u++)if(t[u]!==e[u])return!1;return!0}if(typeof t!=typeof e)return!1;try{var y=i(t),x=i(e)}catch{return!1}if(y.length!==x.length)return!1;for(y.sort(),x.sort(),u=y.length-1;u>=0;u--)if(y[u]!=x[u])return!1;for(u=y.length-1;u>=0;u--)if(!h(t[d=y[u]],e[d],r))return!1;return!0}u(h,"deepEqual"),u(c,"isUndefinedOrNull"),u(p,"isBuffer"),u(d,"objEquiv"),e.exports=h})),II=Ye(((t,e)=>{E();var i=yI(),n=u((function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:s}),"Equality");function r(t){return t.coordinates.map((function(e){return{type:t.type.replace("Multi",""),coordinates:e}}))}function o(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function s(t,e){return i(t,e,{strict:!0})}n.prototype.compare=function(t,e){if(t.type!==e.type||!o(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var i=this,n=r(t),s=r(e);return n.every((function(t){return this.some((function(e){return i.compare(t,e)}))}),s)}}return!1},u(r,"explode"),u(o,"sameLength"),n.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i].toFixed(this.precision)!==e[i].toFixed(this.precision))return!1;return!0},n.prototype.compareLine=function(t,e,i,n){if(!o(t,e))return!1;var r=this.pseudoNode?t:this.removePseudo(t),s=this.pseudoNode?e:this.removePseudo(e);if(!n||this.compareCoord(r[0],s[0])||(s=this.fixStartIndex(s,r))){var a=this.compareCoord(r[i],s[i]);return this.direction||a?this.comparePath(r,s):!!this.compareCoord(r[i],s[s.length-(1+i)])&&this.comparePath(r.slice().reverse(),s)}},n.prototype.fixStartIndex=function(t,e){for(var i,n=-1,r=0;r<t.length;r++)if(this.compareCoord(t[r],e[0])){n=r;break}return n>=0&&(i=[].concat(t.slice(n,t.length),t.slice(1,n+1))),i},n.prototype.comparePath=function(t,e){var i=this;return t.every((function(t,e){return i.compareCoord(t,this[e])}),e)},n.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var i=t.coordinates.slice(1,t.coordinates.length),n=e.coordinates.slice(1,e.coordinates.length),r=this;return i.every((function(t){return this.some((function(e){return r.compareLine(t,e,1,!0)}))}),n)}return!1},n.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},n.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},n.prototype.removePseudo=function(t){return t},u(s,"objectComparator"),e.exports=n})),bG=Ye(((t,e)=>{function i(t,e,i,n){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,i,n)}E(),u(i,"DBSCAN"),i.prototype.run=function(t,e,i,n){this._init(t,e,i,n);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var o=this._regionQuery(r);if(o.length<this.minPts)this.noise.push(r);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(r,s),this._expandCluster(s,o)}}return this.clusters},i.prototype._init=function(t,e,i,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),i&&(this.minPts=i),n&&(this.distance=n)},i.prototype._expandCluster=function(t,e){for(var i=0;i<e.length;i++){var n=e[i];if(1!==this._visited[n]){this._visited[n]=1;var r=this._regionQuery(n);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[n]&&this._addToCluster(n,t)}},i.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},i.prototype._regionQuery=function(t){for(var e=[],i=0;i<this._datasetLength;i++){this.distance(this.dataset[t],this.dataset[i])<this.epsilon&&e.push(i)}return e},i.prototype._mergeArrays=function(t,e){for(var i=e.length,n=0;n<i;n++){var r=e[n];t.indexOf(r)<0&&t.push(r)}return t},i.prototype._euclideanDistance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;)i+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(i)},typeof e<"u"&&e.exports&&(e.exports=i)})),_G=Ye(((t,e)=>{function i(t,e,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,i)}E(),u(i,"KMEANS"),i.prototype.init=function(t,e,i){this.assignments=[],this.centroids=[],typeof t<"u"&&(this.dataset=t),typeof e<"u"&&(this.k=e),typeof i<"u"&&(this.distance=i)},i.prototype.run=function(t,e){this.init(t,e);for(var i=this.dataset.length,n=0;n<this.k;n++)this.centroids[n]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(h),a=0,l=0;l<h;l++)s[l]=0;for(var u=0;u<i;u++){var h=this.dataset[u].length;if(o===this.assignments[u]){for(l=0;l<h;l++)s[l]+=this.dataset[u][l];a++}}if(a>0){for(l=0;l<h;l++)s[l]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),r=!0}}return this.getClusters()},i.prototype.randomCentroid=function(){var t,e,i=this.dataset.length-1;do{e=Math.round(Math.random()*i),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},i.prototype.assign=function(){for(var t,e=!1,i=this.dataset.length,n=0;n<i;n++)(t=this.argmin(this.dataset[n],this.centroids,this.distance))!=this.assignments[n]&&(this.assignments[n]=t,e=!0);return e},i.prototype.getClusters=function(){for(var t,e=new Array(this.k),i=0;i<this.assignments.length;i++)typeof e[t=this.assignments[i]]>"u"&&(e[t]=[]),e[t].push(i);return e},i.prototype.argmin=function(t,e,i){for(var n,r=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)(n=i(t,e[a]))<r&&(r=n,o=a);return o},i.prototype.distance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;){var r=t[n]-e[n];i+=r*r}return Math.sqrt(i)},typeof e<"u"&&e.exports&&(e.exports=i)})),OI=Ye(((t,e)=>{function i(t,e,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,i)}E(),u(i,"PriorityQueue"),i.prototype.insert=function(t,e){for(var i=this._queue.length,n=i;n--;){var r=this._priorities[n];"desc"===this._sorting?e>r&&(i=n):e<r&&(i=n)}this._insertAt(t,e,i)},i.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},i.prototype.forEach=function(t){this._queue.forEach(t)},i.prototype.getElements=function(){return this._queue},i.prototype.getElementPriority=function(t){return this._priorities[t]},i.prototype.getPriorities=function(){return this._priorities},i.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,i=this._queue.length;e<i;e++)t.push([this._queue[e],this._priorities[e]]);return t},i.prototype._init=function(t,e,i){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var n=0;n<t.length;n++)this.insert(t[n],e[n])}i&&(this._sorting=i)},i.prototype._insertAt=function(t,e,i){this._queue.length===i?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(i,0,t),this._priorities.splice(i,0,e))},typeof e<"u"&&e.exports&&(e.exports=i)})),MG=Ye(((t,e)=>{var i;function n(t,e,i,n){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,i,n)}E(),typeof e<"u"&&e.exports&&(i=OI()),u(n,"OPTICS"),n.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var l=new i(null,null,"asc"),u=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,u,l),this._expandCluster(a,l))}return this.clusters},n.prototype.getReachabilityPlot=function(){for(var t=[],e=0,i=this._orderedList.length;e<i;e++){var n=this._orderedList[e],r=this._reachability[n];t.push([n,r])}return t},n.prototype._init=function(t,e,i,n){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),i&&(this.minPts=i),n&&(this.distance=n)},n.prototype._updateQueue=function(t,e,i){var n=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===n._processed[e]){var r=n.distance(n.dataset[t],n.dataset[e]),o=Math.max(n._coreDistance,r);void 0===n._reachability[e]?(n._reachability[e]=o,i.insert(e,o)):o<n._reachability[e]&&(n._reachability[e]=o,i.remove(e),i.insert(e,o))}}))},n.prototype._expandCluster=function(t,e){for(var i=e.getElements(),n=0,r=i.length;n<r;n++){var o=i[n];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},n.prototype._distanceToCore=function(t){for(var e=this.epsilon,i=0;i<e;i++){if(this._regionQuery(t,i).length>=this.minPts)return i}},n.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var i=[],n=0,r=this.dataset.length;n<r;n++)this.distance(this.dataset[t],this.dataset[n])<e&&i.push(n);return i},n.prototype._euclideanDistance=function(t,e){for(var i=0,n=Math.min(t.length,e.length);n--;)i+=(t[n]-e[n])*(t[n]-e[n]);return Math.sqrt(i)},typeof e<"u"&&e.exports&&(e.exports=n)})),EG=Ye(((t,e)=>{E(),typeof e<"u"&&e.exports&&(e.exports={DBSCAN:bG(),KMEANS:_G(),OPTICS:MG(),PriorityQueue:OI()})})),LI=Ye(((t,e)=>{"use strict";E(),e.exports={eudist:u((function(t,e,i){for(var n=t.length,r=0,o=0;o<n;o++){var s=(t[o]||0)-(e[o]||0);r+=s*s}return i?Math.sqrt(r):r}),"eudist"),mandist:u((function(t,e,i){for(var n=t.length,r=0,o=0;o<n;o++)r+=Math.abs((t[o]||0)-(e[o]||0));return i?Math.sqrt(r):r}),"mandist"),dist:u((function(t,e,i){var n=Math.abs(t-e);return i?n:n*n}),"dist")}})),PG=Ye(((t,e)=>{"use strict";E();var i=LI(),n=i.eudist,r=i.dist;e.exports={kmrand:u((function(t,e){for(var i={},n=[],r=e<<2,o=t.length,s=t[0].length>0;n.length<e&&r-- >0;){var a=t[Math.floor(Math.random()*o)],l=s?a.join("_"):""+a;i[l]||(i[l]=!0,n.push(a))}if(n.length<e)throw new Error("Error initializating clusters");return n}),"kmrand"),kmpp:u((function(t,e){var i=t[0].length?n:r,o=[],s=t.length,a=t[0].length>0,l=t[Math.floor(Math.random()*s)];a&&l.join("_");for(o.push(l);o.length<e;){for(var u=[],h=o.length,c=0,p=[],d=0;d<s;d++){for(var f=1/0,g=0;g<h;g++){var m=i(t[d],o[g]);m<=f&&(f=m)}u[d]=f}for(var v=0;v<s;v++)c+=u[v];for(var y=0;y<s;y++)p[y]={i:y,v:t[y],pr:u[y]/c,cs:0};p.sort((function(t,e){return t.pr-e.pr})),p[0].cs=p[0].pr;for(var x=1;x<s;x++)p[x].cs=p[x-1].cs+p[x].pr;for(var _=Math.random(),b=0;b<s-1&&p[b++].cs<_;);o.push(p[b-1].v)}return o}),"kmpp")}})),NG=Ye(((t,e)=>{"use strict";E();var i=LI(),n=PG(),r=i.eudist,o=(i.mandist,i.dist,n.kmrand),s=n.kmpp;function a(t,e,i){i=i||[];for(var n=0;n<t;n++)i[n]=e;return i}function l(t,e,i,n){var l=[],u=[],h=[],c=[],p=!1,d=n||1e4,f=t.length,g=t[0].length,m=g>0,v=[];if(i)l="kmrand"==i?o(t,e):"kmpp"==i?s(t,e):i;else for(var y={};l.length<e;){var x=Math.floor(Math.random()*f);y[x]||(y[x]=!0,l.push(t[x]))}do{a(e,0,v);for(var _=0;_<f;_++){for(var b=1/0,M=0,E=0;E<e;E++){(c=m?r(t[_],l[E]):Math.abs(t[_]-l[E]))<=b&&(b=c,M=E)}h[_]=M,v[M]++}for(var w=[],A=(u=[],0);A<e;A++)w[A]=m?a(g,0,w[A]):0,u[A]=l[A];if(m){for(var S=0;S<e;S++)l[S]=[];for(var T=0;T<f;T++)for(var C=w[h[T]],P=t[T],I=0;I<g;I++)C[I]+=P[I];p=!0;for(var L=0;L<e;L++){for(var O=l[L],N=w[L],D=u[L],R=v[L],q=0;q<g;q++)O[q]=N[q]/R||0;if(p)for(var B=0;B<g;B++)if(D[B]!=O[B]){p=!1;break}}}else{for(var k=0;k<f;k++){w[h[k]]+=t[k]}for(var F=0;F<e;F++)l[F]=w[F]/v[F]||0;p=!0;for(var U=0;U<e;U++)if(u[U]!=l[U]){p=!1;break}}p=p||--d<=0}while(!p);return{it:1e4-d,k:e,idxs:h,centroids:l}}u(a,"init"),u(l,"skmeans"),e.exports=l})),am=Ye(((t,e)=>{var i,n;E(),i=t,n=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}u(t,"_classCallCheck"),u(e,"_defineProperties"),u(i,"_createClass");var n=function(){function t(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null}return u(t,"Node"),t}();function r(t,e){return t>e?1:t<e?-1:0}function o(t,e,i){for(var r=new n(null,null),o=r,s=r;;){var a=i(t,e.key);if(a<0){if(null===e.left)break;if(i(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(i(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function s(t,e,i,r){var s=new n(t,e);if(null===i)return s.left=s.right=null,s;var a=r(t,(i=o(t,i,r)).key);return a<0?(s.left=i.left,s.right=i,i.left=null):a>=0&&(s.right=i.right,s.left=i,i.right=null),s}function a(t,e,i){var n=null,r=null;if(e){var s=i((e=o(t,e,i)).key,t);0===s?(n=e.left,r=e.right):s<0?(r=e.right,e.right=null,n=e):(n=e.left,e.left=null,r=e)}return{left:n,right:r}}function l(t,e,i){return null===e?t:(null===t||((e=o(t.key,e,i)).left=t),e)}function h(t,e,i,n,r){if(t){n(e+(i?"└── ":"├── ")+r(t)+"\n");var o=e+(i?"    ":"│   ");t.left&&h(t.left,o,!1,n,r),t.right&&h(t.right,o,!0,n,r)}}u(r,"DEFAULT_COMPARE"),u(o,"splay"),u(s,"insert"),u(a,"split"),u(l,"merge"),u(h,"printRow");var c=function(){function t(t){void 0===t&&(t=r),this._root=null,this._size=0,this._comparator=t}return u(t,"Tree"),t.prototype.insert=function(t,e){return this._size++,this._root=s(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var i=new n(t,e);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var r=this._comparator,s=o(t,this._root,r),a=r(t,s.key);return 0===a?this._root=s:(a<0?(i.left=s.left,i.right=s,s.left=null):a>0&&(i.right=s.right,i.left=s,s.right=null),this._size++,this._root=i),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,i){var n;return null===e?null:0===i(t,(e=o(t,e,i)).key)?(null===e.left?n=e.right:(n=o(t,e.left,i)).right=e.right,this._size--,n):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var i=this._root,n=[],r=!1;!r;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):r=!0;return this},t.prototype.range=function(t,e,i,n){for(var r=[],o=this._comparator,s=this._root;0!==r.length||s;)if(s)r.push(s),s=s.left;else{if(o((s=r.pop()).key,e)>0)break;if(o(s.key,t)>=0&&i.call(n,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var i=e.key;return t.push(i)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var i=e.data;return t.push(i)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,i=!1,n=0,r=[];!i;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),n===t)return e;n++,e=e.right}else i=!0;return null},t.prototype.next=function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;r<0?(i=e,e=e.left):e=e.right}return i},t.prototype.prev=function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var n=this._comparator;e;){var r=n(t.key,e.key);if(0===r)break;r<0?e=e.left:(i=e,e=e.right)}return i},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return f(this._root)},t.prototype.load=function(t,e,i){void 0===e&&(e=[]),void 0===i&&(i=!1);var n=t.length,r=this._comparator;if(i&&v(t,e,0,n-1,r),null===this._root)this._root=p(t,e,0,n),this._size=n;else{var o=m(this.toList(),d(t,e),r);n=this._size+n,this._root=g({head:o},0,n)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:u((function(){return this._size}),"get"),enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:u((function(){return this._root}),"get"),enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=u((function(t){return String(t.key)}),"printNode"));var e=[];return h(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,i){var n=this._comparator,r=a(t,this._root,n),o=r.left,u=r.right;n(t,e)<0?u=s(e,i,u,n):o=s(e,i,o,n),this._root=l(o,u,n)},t.prototype.split=function(t){return a(t,this._root,this._comparator)},t}();function p(t,e,i,r){var o=r-i;if(o>0){var s=i+Math.floor(o/2),a=t[s],l=e[s],u=new n(a,l);return u.left=p(t,e,i,s),u.right=p(t,e,s+1,r),u}return null}function d(t,e){for(var i=new n(null,null),r=i,o=0;o<t.length;o++)r=r.next=new n(t[o],e[o]);return r.next=null,i.next}function f(t){for(var e=t,i=[],r=!1,o=new n(null,null),s=o;!r;)e?(i.push(e),e=e.left):i.length>0?e=(e=s=s.next=i.pop()).right:r=!0;return s.next=null,o.next}function g(t,e,i){var n=i-e;if(n>0){var r=e+Math.floor(n/2),o=g(t,e,r),s=t.head;return s.left=o,t.head=t.head.next,s.right=g(t,r+1,i),s}return null}function m(t,e,i){for(var r=new n(null,null),o=r,s=t,a=e;null!==s&&null!==a;)i(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}function v(t,e,i,n,r){if(!(i>=n)){for(var o=t[i+n>>1],s=i-1,a=n+1;;){do{s++}while(r(t[s],o)<0);do{a--}while(r(t[a],o)>0);if(s>=a)break;var l=t[s];t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}v(t,e,i,a,r),v(t,e,a+1,n,r)}}u(p,"loadRecursive"),u(d,"createList"),u(f,"toList"),u(g,"sortedListToBST"),u(m,"mergeLists"),u(v,"sort");var y=u((function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y}),"isInBbox"),x=u((function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}}),"getBboxOverlap"),_=Number.EPSILON;void 0===_&&(_=Math.pow(2,-52));var b=_*_,M=u((function(t,e){if(-_<t&&t<_&&-_<e&&e<_)return 0;var i=t-e;return i*i<b*t*e?0:t<e?-1:1}),"cmp"),E=function(){function e(){t(this,e),this.reset()}return u(e,"PtRounder"),i(e,[{key:"reset",value:u((function(){this.xRounder=new w,this.yRounder=new w}),"reset")},{key:"round",value:u((function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}),"round")}]),e}(),w=function(){function e(){t(this,e),this.tree=new c,this.round(0)}return u(e,"CoordRounder"),i(e,[{key:"round",value:u((function(t){var e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===M(e.key,i.key))return this.tree.remove(t),i.key;var n=this.tree.next(e);return null!==n&&0===M(e.key,n.key)?(this.tree.remove(t),n.key):t}),"round")}]),e}(),A=new E,S=u((function(t,e){return t.x*e.y-t.y*e.x}),"crossProduct"),T=u((function(t,e){return t.x*e.x+t.y*e.y}),"dotProduct"),C=u((function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y},o=S(n,r);return M(o,0)}),"compareVectorAngles"),P=u((function(t){return Math.sqrt(T(t,t))}),"length"),I=u((function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y};return S(r,n)/P(r)/P(n)}),"sineOfAngle"),L=u((function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},r={x:i.x-t.x,y:i.y-t.y};return T(r,n)/P(r)/P(n)}),"cosineOfAngle"),O=u((function(t,e,i){return 0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i}}),"horizontalIntersection"),N=u((function(t,e,i){return 0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}}),"verticalIntersection"),D=u((function(t,e,i,n){if(0===e.x)return N(i,n,t.x);if(0===n.x)return N(t,e,i.x);if(0===e.y)return O(i,n,t.y);if(0===n.y)return O(t,e,i.y);var r=S(e,n);if(0==r)return null;var o={x:i.x-t.x,y:i.y-t.y},s=S(o,e)/r,a=S(o,n)/r;return{x:(t.x+a*e.x+(i.x+s*n.x))/2,y:(t.y+a*e.y+(i.y+s*n.y))/2}}),"intersection"),R=function(){function e(i,n){t(this,e),void 0===i.events?i.events=[this]:i.events.push(this),this.point=i,this.isLeft=n}return i(e,null,[{key:"compare",value:u((function(t,i){var n=e.comparePoints(t.point,i.point);return 0!==n?n:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:k.compare(t.segment,i.segment))}),"compare")},{key:"comparePoints",value:u((function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}),"comparePoints")}]),u(e,"SweepEvent"),i(e,[{key:"link",value:u((function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,i=0,n=e.length;i<n;i++){var r=e[i];this.point.events.push(r),r.point=this.point}this.checkForConsuming()}),"link")},{key:"checkForConsuming",value:u((function(){for(var t=this.point.events.length,e=0;e<t;e++){var i=this.point.events[e];if(void 0===i.segment.consumedBy)for(var n=e+1;n<t;n++){var r=this.point.events[n];void 0===r.consumedBy&&i.otherSE.point.events===r.otherSE.point.events&&i.segment.consume(r.segment)}}}),"checkForConsuming")},{key:"getAvailableLinkedEvents",value:u((function(){for(var t=[],e=0,i=this.point.events.length;e<i;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}),"getAvailableLinkedEvents")},{key:"getLeftmostComparator",value:u((function(t){var e=this,i=new Map,n=u((function(n){var r=n.otherSE;i.set(n,{sine:I(e.point,t.point,r.point),cosine:L(e.point,t.point,r.point)})}),"fillCache");return function(t,e){i.has(t)||n(t),i.has(e)||n(e);var r=i.get(t),o=r.sine,s=r.cosine,a=i.get(e),l=a.sine,u=a.cosine;return o>=0&&l>=0?s<u?1:s>u?-1:0:o<0&&l<0?s<u?-1:s>u?1:0:l<o?-1:l>o?1:0}}),"getLeftmostComparator")}]),e}(),q=0,k=function(){function e(i,n,r,o){t(this,e),this.id=++q,this.leftSE=i,i.segment=this,i.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=i,this.rings=r,this.windings=o}return i(e,null,[{key:"compare",value:u((function(t,e){var i=t.leftSE.point.x,n=e.leftSE.point.x,r=t.rightSE.point.x,o=e.rightSE.point.x;if(o<i)return 1;if(r<n)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(i<n){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(i>n){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(r<o){var f=e.comparePoint(t.rightSE.point);if(0!==f)return f}if(r>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(r!==o){var m=l-s,v=r-i,y=u-a,x=o-n;if(m>v&&y<x)return 1;if(m<v&&y>x)return-1}return r>o?1:r<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}),"compare")}]),u(e,"Segment"),i(e,[{key:"replaceRightSE",value:u((function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}),"replaceRightSE")},{key:"bbox",value:u((function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}),"bbox")},{key:"vector",value:u((function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}),"vector")},{key:"isAnEndpoint",value:u((function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}),"isAnEndpoint")},{key:"comparePoint",value:u((function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,i=this.rightSE.point,n=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;var r=(t.y-e.y)/n.y,o=e.x+r*n.x;if(t.x===o)return 0;var s=(t.x-e.x)/n.x,a=e.y+s*n.y;return t.y===a?0:t.y<a?-1:1}),"comparePoint")},{key:"getIntersection",value:u((function(t){var e=this.bbox(),i=t.bbox(),n=x(e,i);if(null===n)return null;var r=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=y(e,s)&&0===this.comparePoint(s),u=y(i,r)&&0===t.comparePoint(r),h=y(e,a)&&0===this.comparePoint(a),c=y(i,o)&&0===t.comparePoint(o);if(u&&l)return c&&!h?o:!c&&h?a:null;if(u)return h&&r.x===a.x&&r.y===a.y?null:r;if(l)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&h)return null;if(c)return o;if(h)return a;var p=D(r,this.vector(),s,t.vector());return null!==p&&y(n,p)?A.round(p.x,p.y):null}),"getIntersection")},{key:"split",value:u((function(t){var i=[],n=void 0!==t.events,r=new R(t,!0),o=new R(t,!1),s=this.rightSE;this.replaceRightSE(o),i.push(o),i.push(r);var a=new e(r,s,this.rings.slice(),this.windings.slice());return R.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),R.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(r.checkForConsuming(),o.checkForConsuming()),i}),"split")},{key:"swapEvents",value:u((function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1}),"swapEvents")},{key:"consume",value:u((function(t){for(var i=this,n=t;i.consumedBy;)i=i.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var r=e.compare(i,n);if(0!==r){if(r>0){var o=i;i=n,n=o}if(i.prev===n){var s=i;i=n,n=s}for(var a=0,l=n.rings.length;a<l;a++){var u=n.rings[a],h=n.windings[a],c=i.rings.indexOf(u);-1===c?(i.rings.push(u),i.windings.push(h)):i.windings[c]+=h}n.rings=null,n.windings=null,n.consumedBy=i,n.leftSE.consumedBy=i.leftSE,n.rightSE.consumedBy=i.rightSE}}),"consume")},{key:"prevInResult",value:u((function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}),"prevInResult")},{key:"beforeState",value:u((function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}),"beforeState")},{key:"afterState",value:u((function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys,r=0,o=this.rings.length;r<o;r++){var s=this.rings[r],a=this.windings[r],l=e.indexOf(s);-1===l?(e.push(s),i.push(a)):i[l]+=a}for(var u=[],h=[],c=0,p=e.length;c<p;c++)if(0!==i[c]){var d=e[c],f=d.poly;if(-1===h.indexOf(f))if(d.isExterior)u.push(f);else{-1===h.indexOf(f)&&h.push(f);var g=u.indexOf(d.poly);-1!==g&&u.splice(g,1)}}for(var m=0,v=u.length;m<v;m++){var y=u[m].multiPoly;-1===n.indexOf(y)&&n.push(y)}return this._afterState}),"afterState")},{key:"isInResult",value:u((function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(X.type){case"union":var i=0===t.length,n=0===e.length;this._isInResult=i!==n;break;case"intersection":var r,o;t.length<e.length?(r=t.length,o=e.length):(r=e.length,o=t.length),this._isInResult=o===X.numMultiPolys&&r<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=u((function(t){return 1===t.length&&t[0].isSubject}),"isJustSubject");this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(X.type))}return this._isInResult}),"isInResult")}],[{key:"fromRing",value:u((function(t,i,n){var r,o,s,a=R.comparePoints(t,i);if(a<0)r=t,o=i,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));r=i,o=t,s=-1}return new e(new R(r,!0),new R(o,!1),[n],[s])}),"fromRing")}]),e}(),F=function(){function e(i,n,r){if(t(this,e),!Array.isArray(i)||0===i.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],"number"!=typeof i[0][0]||"number"!=typeof i[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=A.round(i[0][0],i[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,l=i.length;a<l;a++){if("number"!=typeof i[a][0]||"number"!=typeof i[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=A.round(i[a][0],i[a][1]);u.x===s.x&&u.y===s.y||(this.segments.push(k.fromRing(s,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),s=u)}(o.x!==s.x||o.y!==s.y)&&this.segments.push(k.fromRing(s,o,this))}return u(e,"RingIn"),i(e,[{key:"getSweepEvents",value:u((function(){for(var t=[],e=0,i=this.segments.length;e<i;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}),"getSweepEvents")}]),e}(),U=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new F(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=i.length;r<o;r++){var s=new F(i[r],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=n}return u(e,"PolyIn"),i(e,[{key:"getSweepEvents",value:u((function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,i=this.interiorRings.length;e<i;e++)for(var n=this.interiorRings[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}),"getSweepEvents")}]),e}(),z=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof i[0][0][0]&&(i=[i])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=i.length;r<o;r++){var s=new U(i[r],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=n}return u(e,"MultiPolyIn"),i(e,[{key:"getSweepEvents",value:u((function(){for(var t=[],e=0,i=this.polys.length;e<i;e++)for(var n=this.polys[e].getSweepEvents(),r=0,o=n.length;r<o;r++)t.push(n[r]);return t}),"getSweepEvents")}]),e}(),V=function(){function e(i){t(this,e),this.events=i;for(var n=0,r=i.length;n<r;n++)i[n].segment.ringOut=this;this.poly=null}return i(e,null,[{key:"factory",value:u((function(t){for(var i=[],n=0,r=t.length;n<r;n++){var o=t[n];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,l=o.rightSE,u=[a],h=a.point,c=[];s=a,a=l,u.push(a),a.point!==h;)for(;;){var p=a.getAvailableLinkedEvents();if(0===p.length){var d=u[0].point,f=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(f.x,", ").concat(f.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var g=null,m=0,v=c.length;m<v;m++)if(c[m].point===a.point){g=m;break}if(null===g){c.push({index:u.length,point:a.point});var y=a.getLeftmostComparator(s);l=p.sort(y)[0].otherSE;break}var x=c.splice(g)[0],_=u.splice(x.index);_.unshift(_[0].otherSE),i.push(new e(_.reverse()))}i.push(new e(u))}}return i}),"factory")}]),u(e,"RingOut"),i(e,[{key:"getGeom",value:u((function(){for(var t=this.events[0].point,e=[t],i=1,n=this.events.length-1;i<n;i++){var r=this.events[i].point,o=this.events[i+1].point;0!==C(r,t,o)&&(e.push(r),t=r)}if(1===e.length)return null;var s=e[0],a=e[1];0===C(s,t,a)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,c=[],p=u;p!=h;p+=l)c.push([e[p].x,e[p].y]);return c}),"getGeom")},{key:"isExteriorRing",value:u((function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}),"isExteriorRing")},{key:"enclosingRing",value:u((function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}),"enclosingRing")},{key:"_calcEnclosingRing",value:u((function(){for(var t=this.events[0],e=1,i=this.events.length;e<i;e++){var n=this.events[e];R.compare(t,n)>0&&(t=n)}for(var r=t.segment.prevInResult(),o=r?r.prevInResult():null;;){if(!r)return null;if(!o)return r.ringOut;if(o.ringOut!==r.ringOut)return o.ringOut.enclosingRing()!==r.ringOut?r.ringOut:r.ringOut.enclosingRing();r=o.prevInResult(),o=r?r.prevInResult():null}}),"_calcEnclosingRing")}]),e}(),j=function(){function e(i){t(this,e),this.exteriorRing=i,i.poly=this,this.interiorRings=[]}return u(e,"PolyOut"),i(e,[{key:"addInterior",value:u((function(t){this.interiorRings.push(t),t.poly=this}),"addInterior")},{key:"getGeom",value:u((function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,i=this.interiorRings.length;e<i;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}),"getGeom")}]),e}(),G=function(){function e(i){t(this,e),this.rings=i,this.polys=this._composePolys(i)}return u(e,"MultiPolyOut"),i(e,[{key:"getGeom",value:u((function(){for(var t=[],e=0,i=this.polys.length;e<i;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}),"getGeom")},{key:"_composePolys",value:u((function(t){for(var e=[],i=0,n=t.length;i<n;i++){var r=t[i];if(!r.poly)if(r.isExteriorRing())e.push(new j(r));else{var o=r.enclosingRing();o.poly||e.push(new j(o)),o.poly.addInterior(r)}}return e}),"_composePolys")}]),e}(),W=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.compare;t(this,e),this.queue=i,this.tree=new c(n),this.segments=[]}return u(e,"SweepLine"),i(e,[{key:"process",value:u((function(t){var e=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var r=n,o=n,s=void 0,a=void 0;void 0===s;)null===(r=this.tree.prev(r))?s=null:void 0===r.key.consumedBy&&(s=r.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var l=null;if(s){var u=s.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!s.isAnEndpoint(u)))for(var h=this._splitSafely(s,u),c=0,p=h.length;c<p;c++)i.push(h[c])}var d=null;if(a){var f=a.getIntersection(e);if(null!==f&&(e.isAnEndpoint(f)||(d=f),!a.isAnEndpoint(f)))for(var g=this._splitSafely(a,f),m=0,v=g.length;m<v;m++)i.push(g[m])}if(null!==l||null!==d){var y=null;y=null===l?d:null===d||R.comparePoints(l,d)<=0?l:d,this.queue.remove(e.rightSE),i.push(e.rightSE);for(var x=e.split(y),_=0,b=x.length;_<b;_++)i.push(x[_])}i.length>0?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var M=s.getIntersection(a);if(null!==M){if(!s.isAnEndpoint(M))for(var E=this._splitSafely(s,M),w=0,A=E.length;w<A;w++)i.push(E[w]);if(!a.isAnEndpoint(M))for(var S=this._splitSafely(a,M),T=0,C=S.length;T<C;T++)i.push(S[T])}}this.tree.remove(e)}return i}),"process")},{key:"_splitSafely",value:u((function(t,e){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var n=t.split(e);return n.push(i),void 0===t.consumedBy&&this.tree.insert(t),n}),"_splitSafely")}]),e}(),H=typeof B<"u"&&B.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Y=typeof B<"u"&&B.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,X=new(function(){function e(){t(this,e)}return u(e,"Operation"),i(e,[{key:"run",value:u((function(t,e,i){X.type=t,A.reset();for(var n=[new z(e,!0)],r=0,o=i.length;r<o;r++)n.push(new z(i[r],!1));if(X.numMultiPolys=n.length,"difference"===X.type)for(var s=n[0],a=1;a<n.length;)null!==x(n[a].bbox,s.bbox)?a++:n.splice(a,1);if("intersection"===X.type)for(var l=0,u=n.length;l<u;l++)for(var h=n[l],p=l+1,d=n.length;p<d;p++)if(null===x(h.bbox,n[p].bbox))return[];for(var f=new c(R.compare),g=0,m=n.length;g<m;g++)for(var v=n[g].getSweepEvents(),y=0,_=v.length;y<_;y++)if(f.insert(v[y]),f.size>H)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var b=new W(f),M=f.size,E=f.pop();E;){var w=E.key;if(f.size===M){var S=w.segment;throw new Error("Unable to pop() ".concat(w.isLeft?"left":"right"," SweepEvent ")+"[".concat(w.point.x,", ").concat(w.point.y,"] from segment #").concat(S.id," ")+"[".concat(S.leftSE.point.x,", ").concat(S.leftSE.point.y,"] -> ")+"[".concat(S.rightSE.point.x,", ").concat(S.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(f.size>H)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(b.segments.length>Y)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var T=b.process(w),C=0,P=T.length;C<P;C++){var I=T[C];void 0===I.consumedBy&&f.insert(I)}M=f.size,E=f.pop()}A.reset();var L=V.factory(b.segments);return new G(L).getGeom()}),"run")}]),e}()),K=u((function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return X.run("union",t,i)}),"union"),Z=u((function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return X.run("intersection",t,i)}),"intersection"),Q=u((function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return X.run("xor",t,i)}),"xor"),J=u((function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return X.run("difference",t,i)}),"difference");return{union:K,intersection:Z,xor:Q,difference:J}},"object"==typeof t&&typeof e<"u"?e.exports=n():"function"==typeof define&&define.amd?define(n):(i=typeof globalThis<"u"?globalThis:i||self).polygonClipping=n()})),$G=Ye(((t,e)=>{var i,n;E(),i=t,n=function(t){"use strict";function e(){}function i(t){this.message=t||""}function n(t){this.message=t||""}function r(t){this.message=t||""}function o(){}function s(t){return null===t?Rt:t.color}function a(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function h(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function p(){this.root_=null,this.size_=0}function d(){}function f(){this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}function g(){}function m(t){this.message=t||""}function v(){this.array_=[]}u(e,"e"),u(i,"n"),u(n,"i"),u(r,"r"),u(o,"o"),u(s,"s"),u(a,"a"),u(l,"u"),u(h,"l"),u(c,"c"),u(p,"p"),u(d,"h"),u(f,"f"),u(g,"g"),u(m,"d"),u(v,"y"),"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(null==this)throw new TypeError(this+" is not an object");var e=Object(this),i=Math.max(Math.min(e.length,9007199254740991),0)||0,n=1 in arguments&&parseInt(Number(arguments[1]),10)||0;n=n<0?Math.max(i+n,0):Math.min(n,i);var r=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:i;for(r=r<0?Math.max(i+arguments[2],0):Math.min(r,i);n<r;)e[n]=t,++n;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var y=u((function(){}),"_");y.prototype.interfaces_=function(){return[]},y.prototype.getClass=function(){return y},y.prototype.equalsWithTolerance=function(t,e,i){return Math.abs(t-e)<=i};var x=function(t){function e(e){t.call(this,e),this.name="IllegalArgumentException",this.message=e,this.stack=(new t).stack}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),_=u((function(){}),"v"),b={MAX_VALUE:{configurable:!0}};_.isNaN=function(t){return Number.isNaN(t)},_.doubleToLongBits=function(t){return t},_.longBitsToDouble=function(t){return t},_.isInfinite=function(t){return!Number.isFinite(t)},b.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(_,b);var M=u((function(){}),"E"),E=u((function(){}),"x"),w=u((function(){}),"N"),A=u((function t(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=t.NULL_ORDINATE;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.z=e.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])}),"t"),S={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};A.prototype.setOrdinate=function(t,e){switch(t){case A.X:this.x=e;break;case A.Y:this.y=e;break;case A.Z:this.z=e;break;default:throw new x("Invalid ordinate index: "+t)}},A.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!y.equalsWithTolerance(this.x,e.x,i)&&!!y.equalsWithTolerance(this.y,e.y,i)}},A.prototype.getOrdinate=function(t){switch(t){case A.X:return this.x;case A.Y:return this.y;case A.Z:return this.z}throw new x("Invalid ordinate index: "+t)},A.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||_.isNaN(this.z))&&_.isNaN(t.z)},A.prototype.equals=function(t){return t instanceof A&&this.equals2D(t)},A.prototype.equalInZ=function(t,e){return y.equalsWithTolerance(this.z,t.z,e)},A.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},A.prototype.clone=function(){},A.prototype.copy=function(){return new A(this)},A.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},A.prototype.distance3D=function(t){var e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return Math.sqrt(e*e+i*i+n*n)},A.prototype.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},A.prototype.hashCode=function(){var t=17;return 37*(t=37*t+A.hashCode(this.x))+A.hashCode(this.y)},A.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},A.prototype.interfaces_=function(){return[M,E,e]},A.prototype.getClass=function(){return A},A.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=_.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},S.DimensionalComparator.get=function(){return T},S.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},S.NULL_ORDINATE.get=function(){return _.NaN},S.X.get=function(){return 0},S.Y.get=function(){return 1},S.Z.get=function(){return 2},Object.defineProperties(A,S);var T=u((function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new x("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}}),"L");T.prototype.compare=function(t,e){var i=t,n=e,r=T.compare(i.x,n.x);if(0!==r)return r;var o=T.compare(i.y,n.y);return 0!==o?o:this._dimensionsToTest<=2?0:T.compare(i.z,n.z)},T.prototype.interfaces_=function(){return[w]},T.prototype.getClass=function(){return T},T.compare=function(t,e){return t<e?-1:t>e?1:_.isNaN(t)?_.isNaN(e)?0:-1:_.isNaN(e)?1:0};var C=u((function(){}),"b");C.prototype.create=function(){},C.prototype.interfaces_=function(){return[]},C.prototype.getClass=function(){return C};var P=u((function(){}),"w"),I={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};P.prototype.interfaces_=function(){return[]},P.prototype.getClass=function(){return P},P.toLocationSymbol=function(t){switch(t){case P.EXTERIOR:return"e";case P.BOUNDARY:return"b";case P.INTERIOR:return"i";case P.NONE:return"-"}throw new x("Unknown location value: "+t)},I.INTERIOR.get=function(){return 0},I.BOUNDARY.get=function(){return 1},I.EXTERIOR.get=function(){return 2},I.NONE.get=function(){return-1},Object.defineProperties(P,I);var L=u((function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}),"T"),O=u((function(){}),"R"),N={LOG_10:{configurable:!0}};O.prototype.interfaces_=function(){return[]},O.prototype.getClass=function(){return O},O.log10=function(t){var e=Math.log(t);return _.isInfinite(e)||_.isNaN(e)?e:e/O.LOG_10},O.min=function(t,e,i,n){var r=t;return e<r&&(r=e),i<r&&(r=i),n<r&&(r=n),r},O.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],i=arguments[2];return t<e?e:t>i?i:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var n=arguments[0],r=arguments[1],o=arguments[2];return n<r?r:n>o?o:n}},O.wrap=function(t,e){return t<0?e- -t%e:t%e},O.max=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=t;return e>n&&(n=e),i>n&&(n=i),n}if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=r;return o>l&&(l=o),s>l&&(l=s),a>l&&(l=a),l}},O.average=function(t,e){return(t+e)/2},N.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(O,N);var D=u((function(t){this.str=t}),"D");D.prototype.append=function(t){this.str+=t},D.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},D.prototype.toString=function(t){return this.str};var R=u((function(t){this.value=t}),"M");R.prototype.intValue=function(){return this.value},R.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},R.isNaN=function(t){return Number.isNaN(t)};var q=u((function(){}),"A");q.isWhitespace=function(t){return t<=32&&t>=0||127===t},q.toUpperCase=function(t){return t.toUpperCase()};var B=u((function t(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var e=arguments[0];this.init(e)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}else if("string"==typeof arguments[0]){var n=arguments[0];t.call(this,t.parse(n))}}else if(2===arguments.length){var r=arguments[0],o=arguments[1];this.init(r,o)}}),"t"),k={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};B.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},B.prototype.extractSignificantDigits=function(t,e){var i=this.abs(),n=B.magnitude(i._hi),r=B.TEN.pow(n);(i=i.divide(r)).gt(B.TEN)?(i=i.divide(B.TEN),n+=1):i.lt(B.ONE)&&(i=i.multiply(B.TEN),n-=1);for(var o=n+1,s=new D,a=B.MAX_PRINT_DIGITS-1,l=0;l<=a;l++){t&&l===o&&s.append(".");var u=Math.trunc(i._hi);if(u<0)break;var h=!1,c=0;u>9?(h=!0,c="9"):c="0"+u,s.append(c),i=i.subtract(B.valueOf(u)).multiply(B.TEN),h&&i.selfAdd(B.TEN);var p=!0,d=B.magnitude(i._hi);if(d<0&&Math.abs(d)>=a-l&&(p=!1),!p)break}return e[0]=n,s.toString()},B.prototype.sqr=function(){return this.multiply(this)},B.prototype.doubleValue=function(){return this._hi+this._lo},B.prototype.subtract=function(){if(arguments[0]instanceof B){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},B.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},B.prototype.isZero=function(){return 0===this._hi&&0===this._lo},B.prototype.selfSubtract=function(){if(arguments[0]instanceof B){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},B.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},B.prototype.min=function(t){return this.le(t)?this:t},B.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1],r=null,o=null,s=null,a=null,l=null,u=null,h=null,c=null;return l=this._hi/i,c=(r=(u=B.SPLIT*l)-(r=u-l))*(s=(c=B.SPLIT*i)-(s=c-i))-(h=l*i)+r*(a=i-s)+(o=l-r)*s+o*a,c=l+(u=(this._hi-h-c+this._lo-l*n)/i),this._hi=c,this._lo=l-c+u,this}},B.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},B.prototype.divide=function(){if(arguments[0]instanceof B){var t=arguments[0],e=null,i=null,n=null,r=null,o=null,s=null,a=null,l=null;return i=(o=this._hi/t._hi)-(e=(s=B.SPLIT*o)-(e=s-o)),l=e*(n=(l=B.SPLIT*t._hi)-(n=l-t._hi))-(a=o*t._hi)+e*(r=t._hi-n)+i*n+i*r,s=(this._hi-a-l+this._lo-o*t._lo)/t._hi,new B(l=o+s,o-l+s)}if("number"==typeof arguments[0]){var u=arguments[0];return _.isNaN(u)?B.createNaN():B.copy(this).selfDivide(u,0)}},B.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},B.prototype.pow=function(t){if(0===t)return B.valueOf(1);var e=new B(this),i=B.valueOf(1),n=Math.abs(t);if(n>1)for(;n>0;)n%2==1&&i.selfMultiply(e),(n/=2)>0&&(e=e.sqr());else i=e;return t<0?i.reciprocal():i},B.prototype.ceil=function(){if(this.isNaN())return B.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new B(t,e)},B.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},B.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},B.prototype.setValue=function(){if(arguments[0]instanceof B){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},B.prototype.max=function(t){return this.ge(t)?this:t},B.prototype.sqrt=function(){if(this.isZero())return B.valueOf(0);if(this.isNegative())return B.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,i=B.valueOf(e),n=this.subtract(i.sqr())._hi*(.5*t);return i.add(n)},B.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],i=null,n=null,r=null,o=null,s=null,a=null;return o=(r=this._hi+e)-(s=r-this._hi),n=(a=(o=e-s+(this._hi-o))+this._lo)+(r-(i=r+a)),this._hi=i+n,this._lo=n+(i-this._hi),this}}else if(2===arguments.length){var l=arguments[0],u=arguments[1],h=null,c=null,p=null,d=null,f=null,g=null,m=null;d=this._hi+l,c=this._lo+u,f=d-(g=d-this._hi),p=c-(m=c-this._lo);var v=(h=d+(g=(f=l-g+(this._hi-f))+c))+(g=(p=u-m+(this._lo-p))+(g+(d-h))),y=g+(h-v);return this._hi=v,this._lo=y,this}},B.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof B){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1],r=null,o=null,s=null,a=null,l=null,u=null;r=(l=B.SPLIT*this._hi)-this._hi,u=B.SPLIT*i,r=l-r,o=this._hi-r,s=u-i;var h=(l=this._hi*i)+(u=r*(s=u-s)-l+r*(a=i-s)+o*s+o*a+(this._hi*n+this._lo*i)),c=u+(r=l-h);return this._hi=h,this._lo=c,this}},B.prototype.selfSqr=function(){return this.selfMultiply(this)},B.prototype.floor=function(){if(this.isNaN())return B.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new B(t,e)},B.prototype.negate=function(){return this.isNaN()?this:new B(-this._hi,-this._lo)},B.prototype.clone=function(){},B.prototype.multiply=function(){if(arguments[0]instanceof B){var t=arguments[0];return t.isNaN()?B.createNaN():B.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return _.isNaN(e)?B.createNaN():B.copy(this).selfMultiply(e,0)}},B.prototype.isNaN=function(){return _.isNaN(this._hi)},B.prototype.intValue=function(){return Math.trunc(this._hi)},B.prototype.toString=function(){var t=B.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},B.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!0,e),n=e[0]+1,r=i;if("."===i.charAt(0))r="0"+i;else if(n<0)r="0."+B.stringOfChar("0",-n)+i;else if(-1===i.indexOf(".")){var o=n-i.length;r=i+B.stringOfChar("0",o)+".0"}return this.isNegative()?"-"+r:r},B.prototype.reciprocal=function(){var t,e,i,n,r=null,o=null,s=null,a=null;t=(i=1/this._hi)-(r=(s=B.SPLIT*i)-(r=s-i)),o=(a=B.SPLIT*this._hi)-this._hi;var l=i+(s=(1-(n=i*this._hi)-(a=r*(o=a-o)-n+r*(e=this._hi-o)+t*o+t*e)-i*this._lo)/this._hi);return new B(l,i-l+s)},B.prototype.toSciNotation=function(){if(this.isZero())return B.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),i=this.extractSignificantDigits(!1,e),n=B.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===i.charAt(0))throw new Error("Found leading zero: "+i);var r="";i.length>1&&(r=i.substring(1));var o=i.charAt(0)+"."+r;return this.isNegative()?"-"+o+n:o+n},B.prototype.abs=function(){return this.isNaN()?B.NaN:this.isNegative()?this.negate():new B(this)},B.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},B.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},B.prototype.add=function(){if(arguments[0]instanceof B){var t=arguments[0];return B.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return B.copy(this).selfAdd(e)}},B.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof B){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this._hi=i,this._lo=n}},B.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},B.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},B.prototype.trunc=function(){return this.isNaN()?B.NaN:this.isPositive()?this.floor():this.ceil()},B.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},B.prototype.interfaces_=function(){return[e,M,E]},B.prototype.getClass=function(){return B},B.sqr=function(t){return B.valueOf(t).selfMultiply(t)},B.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return B.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new B(e)}},B.sqrt=function(t){return B.valueOf(t).sqrt()},B.parse=function(t){for(var e=0,i=t.length;q.isWhitespace(t.charAt(e));)e++;var n=!1;if(e<i){var r=t.charAt(e);"-"!==r&&"+"!==r||(e++,"-"===r&&(n=!0))}for(var o=new B,s=0,a=0,l=0;!(e>=i);){var u=t.charAt(e);if(e++,q.isDigit(u)){var h=u-"0";o.selfMultiply(B.TEN),o.selfAdd(h),s++}else{if("."!==u){if("e"===u||"E"===u){var c=t.substring(e);try{l=R.parseInt(c)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+c+" in string "+t):e}break}throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t)}a=s}}var p=o,d=s-a-l;if(0===d)p=o;else if(d>0){var f=B.TEN.pow(d);p=o.divide(f)}else if(d<0){var g=B.TEN.pow(-d);p=o.multiply(g)}return n?p.negate():p},B.createNaN=function(){return new B(_.NaN,_.NaN)},B.copy=function(t){return new B(t)},B.magnitude=function(t){var e=Math.abs(t),i=Math.log(e)/Math.log(10),n=Math.trunc(Math.floor(i));return 10*Math.pow(10,n)<=e&&(n+=1),n},B.stringOfChar=function(t,e){for(var i=new D,n=0;n<e;n++)i.append(t);return i.toString()},k.PI.get=function(){return new B(3.141592653589793,12246467991473532e-32)},k.TWO_PI.get=function(){return new B(6.283185307179586,24492935982947064e-32)},k.PI_2.get=function(){return new B(1.5707963267948966,6123233995736766e-32)},k.E.get=function(){return new B(2.718281828459045,14456468917292502e-32)},k.NaN.get=function(){return new B(_.NaN,_.NaN)},k.EPS.get=function(){return 123259516440783e-46},k.SPLIT.get=function(){return 134217729},k.MAX_PRINT_DIGITS.get=function(){return 32},k.TEN.get=function(){return B.valueOf(10)},k.ONE.get=function(){return B.valueOf(1)},k.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},k.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(B,k);var F=u((function(){}),"q"),U={DP_SAFE_EPSILON:{configurable:!0}};F.prototype.interfaces_=function(){return[]},F.prototype.getClass=function(){return F},F.orientationIndex=function(t,e,i){var n=F.orientationIndexFilter(t,e,i);if(n<=1)return n;var r=B.valueOf(e.x).selfAdd(-t.x),o=B.valueOf(e.y).selfAdd(-t.y),s=B.valueOf(i.x).selfAdd(-e.x),a=B.valueOf(i.y).selfAdd(-e.y);return r.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},F.signOfDet2x2=function(t,e,i,n){return t.multiply(n).selfSubtract(e.multiply(i)).signum()},F.intersection=function(t,e,i,n){var r=B.valueOf(n.y).selfSubtract(i.y).selfMultiply(B.valueOf(e.x).selfSubtract(t.x)),o=B.valueOf(n.x).selfSubtract(i.x).selfMultiply(B.valueOf(e.y).selfSubtract(t.y)),s=r.subtract(o),a=B.valueOf(n.x).selfSubtract(i.x).selfMultiply(B.valueOf(t.y).selfSubtract(i.y)),l=B.valueOf(n.y).selfSubtract(i.y).selfMultiply(B.valueOf(t.x).selfSubtract(i.x)),u=a.subtract(l).selfDivide(s).doubleValue(),h=B.valueOf(t.x).selfAdd(B.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),c=B.valueOf(e.x).selfSubtract(t.x).selfMultiply(B.valueOf(t.y).selfSubtract(i.y)),p=B.valueOf(e.y).selfSubtract(t.y).selfMultiply(B.valueOf(t.x).selfSubtract(i.x)),d=c.subtract(p).selfDivide(s).doubleValue(),f=B.valueOf(i.y).selfAdd(B.valueOf(n.y).selfSubtract(i.y).selfMultiply(d)).doubleValue();return new A(h,f)},F.orientationIndexFilter=function(t,e,i){var n=null,r=(t.x-i.x)*(e.y-i.y),o=(t.y-i.y)*(e.x-i.x),s=r-o;if(r>0){if(o<=0)return F.signum(s);n=r+o}else{if(!(r<0)||o>=0)return F.signum(s);n=-r-o}var a=F.DP_SAFE_EPSILON*n;return s>=a||-s>=a?F.signum(s):2},F.signum=function(t){return t>0?1:t<0?-1:0},U.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(F,U);var z=u((function(){}),"V"),V={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};V.X.get=function(){return 0},V.Y.get=function(){return 1},V.Z.get=function(){return 2},V.M.get=function(){return 3},z.prototype.setOrdinate=function(t,e,i){},z.prototype.size=function(){},z.prototype.getOrdinate=function(t,e){},z.prototype.getCoordinate=function(){},z.prototype.getCoordinateCopy=function(t){},z.prototype.getDimension=function(){},z.prototype.getX=function(t){},z.prototype.clone=function(){},z.prototype.expandEnvelope=function(t){},z.prototype.copy=function(){},z.prototype.getY=function(t){},z.prototype.toCoordinateArray=function(){},z.prototype.interfaces_=function(){return[E]},z.prototype.getClass=function(){return z},Object.defineProperties(z,V);var j=u((function(){}),"z"),G=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(j),W=u((function(){}),"Y");W.arraycopy=function(t,e,i,n,r){for(var o=0,s=e;s<e+r;s++)i[n+o]=t[s],o++},W.getProperty=function(t){return{"line.separator":"\n"}[t]};var H=u((function t(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var e=arguments[0];this.x=e.x,this.y=e.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1];this.x=i,this.y=n,this.w=1}else if(arguments[0]instanceof t&&arguments[1]instanceof t){var r=arguments[0],o=arguments[1];this.x=r.y*o.w-o.y*r.w,this.y=o.x*r.w-r.x*o.w,this.w=r.x*o.y-o.x*r.y}else if(arguments[0]instanceof A&&arguments[1]instanceof A){var s=arguments[0],a=arguments[1];this.x=s.y-a.y,this.y=a.x-s.x,this.w=s.x*a.y-a.x*s.y}}else if(3===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2];this.x=l,this.y=u,this.w=h}else if(4===arguments.length){var c=arguments[0],p=arguments[1],d=arguments[2],f=arguments[3],g=c.y-p.y,m=p.x-c.x,v=c.x*p.y-p.x*c.y,y=d.y-f.y,x=f.x-d.x,_=d.x*f.y-f.x*d.y;this.x=m*_-x*v,this.y=y*v-g*_,this.w=g*x-y*m}}),"t");H.prototype.getY=function(){var t=this.y/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new G;return t},H.prototype.getX=function(){var t=this.x/this.w;if(_.isNaN(t)||_.isInfinite(t))throw new G;return t},H.prototype.getCoordinate=function(){var t=new A;return t.x=this.getX(),t.y=this.getY(),t},H.prototype.interfaces_=function(){return[]},H.prototype.getClass=function(){return H},H.intersection=function(t,e,i,n){var r=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=i.y-n.y,l=n.x-i.x,u=i.x*n.y-n.x*i.y,h=r*l-a*o,c=(o*u-l*s)/h,p=(a*s-r*u)/h;if(_.isNaN(c)||_.isInfinite(c)||_.isNaN(p)||_.isInfinite(p))throw new G;return new A(c,p)};var Y=u((function t(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof A){var e=arguments[0];this.init(e.x,e.x,e.y,e.y)}else if(arguments[0]instanceof t){var i=arguments[0];this.init(i)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],l=arguments[3];this.init(o,s,a,l)}}),"t"),X={serialVersionUID:{configurable:!0}};Y.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Y.prototype.equals=function(t){if(!(t instanceof Y))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Y.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Y;var e=this._minx>t._minx?this._minx:t._minx,i=this._miny>t._miny?this._miny:t._miny,n=this._maxx<t._maxx?this._maxx:t._maxx,r=this._maxy<t._maxy?this._maxy:t._maxy;return new Y(e,n,i,r)},Y.prototype.isNull=function(){return this._maxx<this._minx},Y.prototype.getMaxX=function(){return this._maxx},Y.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Y){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return!this.isNull()&&i>=this._minx&&i<=this._maxx&&n>=this._miny&&n<=this._maxy}},Y.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof A){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return!this.isNull()&&!(i>this._maxx||i<this._minx||n>this._maxy||n<this._miny)}},Y.prototype.getMinY=function(){return this._miny},Y.prototype.getMinX=function(){return this._minx},Y.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.isNull()?(this._minx=i,this._maxx=i,this._miny=n,this._maxy=n):(i<this._minx&&(this._minx=i),i>this._maxx&&(this._maxx=i),n<this._miny&&(this._miny=n),n>this._maxy&&(this._maxy=n))}},Y.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Y.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Y.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Y.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Y.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Y.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Y.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Y.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Y.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=i,this._maxy+=i,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Y.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Y){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof A){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return this.covers(i,n)}},Y.prototype.centre=function(){return this.isNull()?null:new A((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Y.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Y){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.init(i.x,n.x,i.y,n.y)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];r<o?(this._minx=r,this._maxx=o):(this._minx=o,this._maxx=r),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Y.prototype.getMaxY=function(){return this._maxy},Y.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var i=0;return this._maxy<t._miny?i=t._miny-this._maxy:this._miny>t._maxy&&(i=this._miny-t._maxy),0===e?i:0===i?e:Math.sqrt(e*e+i*i)},Y.prototype.hashCode=function(){var t=17;return 37*(t=37*(t=37*(t=37*t+A.hashCode(this._minx))+A.hashCode(this._maxx))+A.hashCode(this._miny))+A.hashCode(this._maxy)},Y.prototype.interfaces_=function(){return[M,e]},Y.prototype.getClass=function(){return Y},Y.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2];return i.x>=(t.x<e.x?t.x:e.x)&&i.x<=(t.x>e.x?t.x:e.x)&&i.y>=(t.y<e.y?t.y:e.y)&&i.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),l=Math.max(o.x,s.x),u=Math.min(n.x,r.x),h=Math.max(n.x,r.x);return!(u>l||h<a||(a=Math.min(o.y,s.y),l=Math.max(o.y,s.y),u=Math.min(n.y,r.y),h=Math.max(n.y,r.y),u>l||h<a))}},X.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Y,X);var K={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Z=u((function(t){this.geometryFactory=t||new ye}),"K");Z.prototype.read=function(t){var e,i,n;t=t.replace(/[\n\r]/g," ");var r=K.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((r=K.emptyTypeStr.exec(t))[2]=void 0),r&&(i=r[1].toLowerCase(),n=r[2],J[i]&&(e=J[i].apply(this,[n]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Z.prototype.write=function(t){return this.extractGeometry(t)},Z.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Q[e])return null;var i=e.toUpperCase();return t.isEmpty()?i+" EMPTY":i+"("+Q[e].apply(this,[t])+")"};var Q={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Q.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+Q.point.apply(this,[t._geometries[i]])+")");return e.join(",")},linestring:function(t){for(var e=[],i=0,n=t._points._coordinates.length;i<n;++i)e.push(Q.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},linearring:function(t){for(var e=[],i=0,n=t._points._coordinates.length;i<n;++i)e.push(Q.coordinate.apply(this,[t._points._coordinates[i]]));return e.join(",")},multilinestring:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+Q.linestring.apply(this,[t._geometries[i]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+Q.linestring.apply(this,[t._shell])+")");for(var i=0,n=t._holes.length;i<n;++i)e.push("("+Q.linestring.apply(this,[t._holes[i]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push("("+Q.polygon.apply(this,[t._geometries[i]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],i=0,n=t._geometries.length;i<n;++i)e.push(this.extractGeometry(t._geometries[i]));return e.join(",")}},J={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(K.spaces);return this.geometryFactory.createPoint(new A(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(K.trimParens,"$1"),n.push(J.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(n)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(K.spaces),n.push(new A(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(n)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,i=t.trim().split(","),n=[],r=0,o=i.length;r<o;++r)e=i[r].trim().split(K.spaces),n.push(new A(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(n)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,i=t.trim().split(K.parenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(K.trimParens,"$1"),n.push(J.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(n)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,i,n,r,o=t.trim().split(K.parenComma),s=[],a=0,l=o.length;a<l;++a)e=o[a].replace(K.trimParens,"$1"),i=J.linestring.apply(this,[e]),n=this.geometryFactory.createLinearRing(i._points),0===a?r=n:s.push(n);return this.geometryFactory.createPolygon(r,s)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,i=t.trim().split(K.doubleParenComma),n=[],r=0,o=i.length;r<o;++r)e=i[r].replace(K.trimParens,"$1"),n.push(J.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(n)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),i=[],n=0,r=e.length;n<r;++n)i.push(this.read(e[n]));return this.geometryFactory.createGeometryCollection(i)}},$=u((function(t){this.parser=new Z(t)}),"Z");$.prototype.write=function(t){return this.parser.write(t)},$.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var tt=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),et=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tt),it=u((function(){}),"et");it.prototype.interfaces_=function(){return[]},it.prototype.getClass=function(){return it},it.shouldNeverReachHere=function(){if(0===arguments.length)it.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new et("Should never reach here"+(null!==t?": "+t:""))}},it.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],it.isTrue(t,null);else if(2===arguments.length&&(e=arguments[1],!(t=arguments[0])))throw null===e?new et:new et(e)},it.equals=function(){var t,e,i;if(2===arguments.length)t=arguments[0],e=arguments[1],it.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],i=arguments[2],!(e=arguments[1]).equals(t)))throw new et("Expected "+t+" but encountered "+e+(null!==i?": "+i:""))};var nt=u((function(){this._result=null,this._inputLines=Array(2).fill().map((function(){return Array(2)})),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new A,this._intPt[1]=new A,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}),"nt"),rt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};nt.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},nt.prototype.getTopologySummary=function(){var t=new D;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},nt.prototype.computeIntersection=function(t,e,i,n){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=i,this._inputLines[1][1]=n,this._result=this.computeIntersect(t,e,i,n)},nt.prototype.getIntersectionNum=function(){return this._result},nt.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map((function(){return Array(2)})),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0];this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},nt.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},nt.prototype.setPrecisionModel=function(t){this._precisionModel=t},nt.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},nt.prototype.getIntersection=function(t){return this._intPt[t]},nt.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},nt.prototype.hasIntersection=function(){return this._result!==nt.NO_INTERSECTION},nt.prototype.getEdgeDistance=function(t,e){return nt.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},nt.prototype.isCollinear=function(){return this._result===nt.COLLINEAR_INTERSECTION},nt.prototype.toString=function(){return $.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+$.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},nt.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},nt.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},nt.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},nt.prototype.interfaces_=function(){return[]},nt.prototype.getClass=function(){return nt},nt.computeEdgeDistance=function(t,e,i){var n=Math.abs(i.x-e.x),r=Math.abs(i.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(i))o=n>r?n:r;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);0!==(o=n>r?s:a)||t.equals(e)||(o=Math.max(s,a))}return it.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},nt.nonRobustComputeEdgeDistance=function(t,e,i){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return it.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},rt.DONT_INTERSECT.get=function(){return 0},rt.DO_INTERSECT.get=function(){return 1},rt.COLLINEAR.get=function(){return 2},rt.NO_INTERSECTION.get=function(){return 0},rt.POINT_INTERSECTION.get=function(){return 1},rt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(nt,rt);var ot=function(t){function e(){t.apply(this,arguments)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Y(this._inputLines[0][0],this._inputLines[0][1]),i=new Y(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&i.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],i=arguments[1],n=arguments[2];if(this._isProper=!1,Y.intersects(i,n,e)&&0===lt.orientationIndex(i,n,e)&&0===lt.orientationIndex(n,i,e))return this._isProper=!0,(e.equals(i)||e.equals(n))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null;this._result=t.NO_INTERSECTION},e.prototype.normalizeToMinimum=function(t,e,i,n,r){r.x=this.smallestInAbsValue(t.x,e.x,i.x,n.x),r.y=this.smallestInAbsValue(t.y,e.y,i.y,n.y),t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},e.prototype.safeHCoordinateIntersection=function(t,i,n,r){var o=null;try{o=H.intersection(t,i,n,r)}catch(s){if(!(s instanceof G))throw s;o=e.nearestEndpoint(t,i,n,r)}return o},e.prototype.intersection=function(t,i,n,r){var o=this.intersectionWithNormalization(t,i,n,r);return this.isInSegmentEnvelopes(o)||(o=new A(e.nearestEndpoint(t,i,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,i,n){var r=t,o=Math.abs(r);return Math.abs(e)<o&&(r=e,o=Math.abs(e)),Math.abs(i)<o&&(r=i,o=Math.abs(i)),Math.abs(n)<o&&(r=n),r},e.prototype.checkDD=function(t,e,i,n,r){var o=F.intersection(t,e,i,n),s=this.isInSegmentEnvelopes(o);W.out.println("DD in env = "+s+"  --------------------- "+o),r.distance(o)>1e-4&&W.out.println("Distance = "+r.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,i,n){var r=new A(t),o=new A(e),s=new A(i),a=new A(n),l=new A;this.normalizeToEnvCentre(r,o,s,a,l);var u=this.safeHCoordinateIntersection(r,o,s,a);return u.x+=l.x,u.y+=l.y,u},e.prototype.computeCollinearIntersection=function(e,i,n,r){var o=Y.intersects(e,i,n),s=Y.intersects(e,i,r),a=Y.intersects(n,r,e),l=Y.intersects(n,r,i);return o&&s?(this._intPt[0]=n,this._intPt[1]=r,t.COLLINEAR_INTERSECTION):a&&l?(this._intPt[0]=e,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||s||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&l?(this._intPt[0]=n,this._intPt[1]=i,!n.equals(i)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||o||l?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&l?(this._intPt[0]=r,this._intPt[1]=i,!r.equals(i)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,i,n,r){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=i.x<n.x?i.x:n.x,h=i.y<n.y?i.y:n.y,c=i.x>n.x?i.x:n.x,p=i.y>n.y?i.y:n.y,d=((o>u?o:u)+(a<c?a:c))/2,f=((s>h?s:h)+(l<p?l:p))/2;r.x=d,r.y=f,t.x-=r.x,t.y-=r.y,e.x-=r.x,e.y-=r.y,i.x-=r.x,i.y-=r.y,n.x-=r.x,n.y-=r.y},e.prototype.computeIntersect=function(e,i,n,r){if(this._isProper=!1,!Y.intersects(e,i,n,r))return t.NO_INTERSECTION;var o=lt.orientationIndex(e,i,n),s=lt.orientationIndex(e,i,r);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=lt.orientationIndex(n,r,e),l=lt.orientationIndex(n,r,i);return a>0&&l>0||a<0&&l<0?t.NO_INTERSECTION:0===o&&0===s&&0===a&&0===l?this.computeCollinearIntersection(e,i,n,r):(0===o||0===s||0===a||0===l?(this._isProper=!1,e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:i.equals2D(n)||i.equals2D(r)?this._intPt[0]=i:0===o?this._intPt[0]=new A(n):0===s?this._intPt[0]=new A(r):0===a?this._intPt[0]=new A(e):0===l&&(this._intPt[0]=new A(i))):(this._isProper=!0,this._intPt[0]=this.intersection(e,i,n,r)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,i,n){var r=t,o=lt.distancePointLine(t,i,n),s=lt.distancePointLine(e,i,n);return s<o&&(o=s,r=e),(s=lt.distancePointLine(i,t,e))<o&&(o=s,r=i),(s=lt.distancePointLine(n,t,e))<o&&(o=s,r=n),r},e}(nt),st=u((function(){}),"ot");st.prototype.interfaces_=function(){return[]},st.prototype.getClass=function(){return st},st.orientationIndex=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=i.x-e.x,s=i.y-e.y;return st.signOfDet2x2(n,r,o,s)},st.signOfDet2x2=function(t,e,i,n){var r=null,o=null,s=null;if(r=1,0===t||0===n)return 0===e||0===i?0:e>0?i>0?-r:r:i>0?r:-r;if(0===e||0===i)return n>0?t>0?r:-r:t>0?-r:r;if(e>0?n>0?e<=n||(r=-r,o=t,t=i,i=o,o=e,e=n,n=o):e<=-n?(r=-r,i=-i,n=-n):(o=t,t=-i,i=o,o=e,e=-n,n=o):n>0?-e<=n?(r=-r,t=-t,e=-e):(o=-t,t=i,i=o,o=-e,e=n,n=o):e>=n?(t=-t,e=-e,i=-i,n=-n):(r=-r,o=-t,t=-i,i=o,o=-e,e=-n,n=o),t>0){if(!(i>0&&t<=i))return r}else{if(i>0||!(t>=i))return-r;r=-r,t=-t,i=-i}for(;;){if((n-=(s=Math.floor(i/t))*e)<0)return-r;if(n>e)return r;if(t>(i-=s*t)+i){if(e<n+n)return r}else{if(e>n+n)return-r;i=t-i,n=e-n,r=-r}if(0===n)return 0===i?0:-r;if(0===i||(t-=(s=Math.floor(t/i))*i,(e-=s*n)<0))return r;if(e>n)return-r;if(i>t+t){if(n<e+e)return-r}else{if(n>e+e)return r;t=i-t,e=n-e,r=-r}if(0===e)return 0===t?0:r;if(0===t)return-r}};var at=u((function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t}),"st");at.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var i=t.x,n=e.x;return i>n&&(i=e.x,n=t.x),this._p.x>=i&&this._p.x<=n&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var r=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,l=st.signOfDet2x2(r,o,s,a);if(0===l)return this._isPointOnSegment=!0,null;a<o&&(l=-l),l>0&&this._crossingCount++}},at.prototype.isPointInPolygon=function(){return this.getLocation()!==P.EXTERIOR},at.prototype.getLocation=function(){return this._isPointOnSegment?P.BOUNDARY:this._crossingCount%2==1?P.INTERIOR:P.EXTERIOR},at.prototype.isOnSegment=function(){return this._isPointOnSegment},at.prototype.interfaces_=function(){return[]},at.prototype.getClass=function(){return at},at.locatePointInRing=function(){if(arguments[0]instanceof A&&L(arguments[1],z)){for(var t=arguments[0],e=arguments[1],i=new at(t),n=new A,r=new A,o=1;o<e.size();o++)if(e.getCoordinate(o,n),e.getCoordinate(o-1,r),i.countSegment(n,r),i.isOnSegment())return i.getLocation();return i.getLocation()}if(arguments[0]instanceof A&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],l=new at(s),u=1;u<a.length;u++){var h=a[u],c=a[u-1];if(l.countSegment(h,c),l.isOnSegment())return l.getLocation()}return l.getLocation()}};var lt=u((function(){}),"at"),ut={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};lt.prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt},lt.orientationIndex=function(t,e,i){return F.orientationIndex(t,e,i)},lt.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,i=t[0].x,n=1;n<t.length-1;n++){var r=t[n].x-i,o=t[n+1].y;e+=r*(t[n-1].y-o)}return e/2}if(L(arguments[0],z)){var s=arguments[0],a=s.size();if(a<3)return 0;var l=new A,u=new A,h=new A;s.getCoordinate(0,u),s.getCoordinate(1,h);var c=u.x;h.x-=c;for(var p=0,d=1;d<a-1;d++)l.y=u.y,u.x=h.x,u.y=h.y,s.getCoordinate(d+1,h),h.x-=c,p+=u.x*(l.y-h.y);return p/2}},lt.distanceLineLine=function(t,e,i,n){if(t.equals(e))return lt.distancePointLine(t,i,n);if(i.equals(n))return lt.distancePointLine(n,t,e);var r=!1;if(Y.intersects(t,e,i,n)){var o=(e.x-t.x)*(n.y-i.y)-(e.y-t.y)*(n.x-i.x);if(0===o)r=!0;else{var s=(t.y-i.y)*(n.x-i.x)-(t.x-i.x)*(n.y-i.y),a=((t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y))/o,l=s/o;(l<0||l>1||a<0||a>1)&&(r=!0)}}else r=!0;return r?O.min(lt.distancePointLine(t,i,n),lt.distancePointLine(e,i,n),lt.distancePointLine(i,t,e),lt.distancePointLine(n,t,e)):0},lt.isPointInRing=function(t,e){return lt.locatePointInRing(t,e)!==P.EXTERIOR},lt.computeLength=function(t){var e=t.size();if(e<=1)return 0;var i=0,n=new A;t.getCoordinate(0,n);for(var r=n.x,o=n.y,s=1;s<e;s++){t.getCoordinate(s,n);var a=n.x,l=n.y,u=a-r,h=l-o;i+=Math.sqrt(u*u+h*h),r=a,o=l}return i},lt.isCCW=function(t){var e=t.length-1;if(e<3)throw new x("Ring has fewer than 4 points, so orientation cannot be determined");for(var i=t[0],n=0,r=1;r<=e;r++){var o=t[r];o.y>i.y&&(i=o,n=r)}var s=n;do{(s-=1)<0&&(s=e)}while(t[s].equals2D(i)&&s!==n);var a=n;do{a=(a+1)%e}while(t[a].equals2D(i)&&a!==n);var l=t[s],u=t[a];if(l.equals2D(i)||u.equals2D(i)||l.equals2D(u))return!1;var h=lt.computeOrientation(l,i,u);return 0===h?l.x>u.x:h>0},lt.locatePointInRing=function(t,e){return at.locatePointInRing(t,e)},lt.distancePointLinePerpendicular=function(t,e,i){var n=(i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y),r=((e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y))/n;return Math.abs(r)*Math.sqrt(n)},lt.computeOrientation=function(t,e,i){return lt.orientationIndex(t,e,i)},lt.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new x("Line array must contain at least one vertex");for(var i=t.distance(e[0]),n=0;n<e.length-1;n++){var r=lt.distancePointLine(t,e[n],e[n+1]);r<i&&(i=r)}return i}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var l=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),u=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/l;if(u<=0)return o.distance(s);if(u>=1)return o.distance(a);var h=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/l;return Math.abs(h)*Math.sqrt(l)}},lt.isOnLine=function(t,e){for(var i=new ot,n=1;n<e.length;n++){var r=e[n-1],o=e[n];if(i.computeIntersection(t,r,o),i.hasIntersection())return!0}return!1},ut.CLOCKWISE.get=function(){return-1},ut.RIGHT.get=function(){return lt.CLOCKWISE},ut.COUNTERCLOCKWISE.get=function(){return 1},ut.LEFT.get=function(){return lt.COUNTERCLOCKWISE},ut.COLLINEAR.get=function(){return 0},ut.STRAIGHT.get=function(){return lt.COLLINEAR},Object.defineProperties(lt,ut);var ht=u((function(){}),"lt");ht.prototype.filter=function(t){},ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht};var ct=u((function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()}),"ct"),pt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};ct.prototype.isGeometryCollection=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION},ct.prototype.getFactory=function(){return this._factory},ct.prototype.getGeometryN=function(t){return this},ct.prototype.getArea=function(){return 0},ct.prototype.isRectangle=function(){return!1},ct.prototype.equals=function(){if(arguments[0]instanceof ct){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof ct))return!1;var i=e;return this.equalsExact(i)}},ct.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},ct.prototype.geometryChanged=function(){this.apply(ct.geometryChangedFilter)},ct.prototype.geometryChangedAction=function(){this._envelope=null},ct.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},ct.prototype.getLength=function(){return 0},ct.prototype.getNumGeometries=function(){return 1},ct.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var i=arguments[0],n=arguments[1];return this.getSortIndex()!==i.getSortIndex()?this.getSortIndex()-i.getSortIndex():this.isEmpty()&&i.isEmpty()?0:this.isEmpty()?-1:i.isEmpty()?1:this.compareToSameClass(i,n)}},ct.prototype.getUserData=function(){return this._userData},ct.prototype.getSRID=function(){return this._SRID},ct.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},ct.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION)throw new x("This method does not support GeometryCollection arguments")},ct.prototype.equal=function(t,e,i){return 0===i?t.equals(e):t.distance(e)<=i},ct.prototype.norm=function(){var t=this.copy();return t.normalize(),t},ct.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},ct.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Y(this._envelope)},ct.prototype.setSRID=function(t){this._SRID=t},ct.prototype.setUserData=function(t){this._userData=t},ct.prototype.compare=function(t,e){for(var i=t.iterator(),n=e.iterator();i.hasNext()&&n.hasNext();){var r=i.next(),o=n.next(),s=r.compareTo(o);if(0!==s)return s}return i.hasNext()?1:n.hasNext()?-1:0},ct.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},ct.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===ct.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===ct.SORTINDEX_MULTIPOINT||this.getSortIndex()===ct.SORTINDEX_MULTILINESTRING||this.getSortIndex()===ct.SORTINDEX_MULTIPOLYGON},ct.prototype.interfaces_=function(){return[E,M,e]},ct.prototype.getClass=function(){return ct},ct.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},ct.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},pt.serialVersionUID.get=function(){return 0x799ea46522854c00},pt.SORTINDEX_POINT.get=function(){return 0},pt.SORTINDEX_MULTIPOINT.get=function(){return 1},pt.SORTINDEX_LINESTRING.get=function(){return 2},pt.SORTINDEX_LINEARRING.get=function(){return 3},pt.SORTINDEX_MULTILINESTRING.get=function(){return 4},pt.SORTINDEX_POLYGON.get=function(){return 5},pt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},pt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},pt.geometryChangedFilter.get=function(){return dt},Object.defineProperties(ct,pt);var dt=u((function(){}),"ht");dt.interfaces_=function(){return[ht]},dt.filter=function(t){t.geometryChangedAction()};var ft=u((function(){}),"ft");ft.prototype.filter=function(t){},ft.prototype.interfaces_=function(){return[]},ft.prototype.getClass=function(){return ft};var gt=u((function(){}),"gt"),mt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};gt.prototype.isInBoundary=function(t){},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt},mt.Mod2BoundaryNodeRule.get=function(){return vt},mt.EndPointBoundaryNodeRule.get=function(){return yt},mt.MultiValentEndPointBoundaryNodeRule.get=function(){return xt},mt.MonoValentEndPointBoundaryNodeRule.get=function(){return _t},mt.MOD2_BOUNDARY_RULE.get=function(){return new vt},mt.ENDPOINT_BOUNDARY_RULE.get=function(){return new yt},mt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new xt},mt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new _t},mt.OGC_SFS_BOUNDARY_RULE.get=function(){return gt.MOD2_BOUNDARY_RULE},Object.defineProperties(gt,mt);var vt=u((function(){}),"yt");vt.prototype.isInBoundary=function(t){return t%2==1},vt.prototype.interfaces_=function(){return[gt]},vt.prototype.getClass=function(){return vt};var yt=u((function(){}),"_t");yt.prototype.isInBoundary=function(t){return t>0},yt.prototype.interfaces_=function(){return[gt]},yt.prototype.getClass=function(){return yt};var xt=u((function(){}),"mt");xt.prototype.isInBoundary=function(t){return t>1},xt.prototype.interfaces_=function(){return[gt]},xt.prototype.getClass=function(){return xt};var _t=u((function(){}),"vt");_t.prototype.isInBoundary=function(t){return 1===t},_t.prototype.interfaces_=function(){return[gt]},_t.prototype.getClass=function(){return _t};var bt=u((function(){}),"It");bt.prototype.add=function(){},bt.prototype.addAll=function(){},bt.prototype.isEmpty=function(){},bt.prototype.iterator=function(){},bt.prototype.size=function(){},bt.prototype.toArray=function(){},bt.prototype.remove=function(){},(i.prototype=new Error).name="IndexOutOfBoundsException";var Mt=u((function(){}),"Et");Mt.prototype.hasNext=function(){},Mt.prototype.next=function(){},Mt.prototype.remove=function(){};var Et=function(t){function e(){t.apply(this,arguments)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(bt);(n.prototype=new Error).name="NoSuchElementException";var wt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,bt]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.set=function(t,e){var i=this.array_[t];return this.array_[t]=e,i},e.prototype.iterator=function(){return new At(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new i;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},e.prototype.remove=function(t){for(var e=!1,i=0,n=this.array_.length;i<n;i++)if(this.array_[i]===t){this.array_.splice(i,1),e=!0;break}return e},e}(Et),At=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new n;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(Mt),St=function(t){function e(){if(t.call(this),0!==arguments.length)if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.ensureCapacity(i.length),this.add(i,n)}}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={coordArrayType:{configurable:!0}};return i.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){if(2===arguments.length){for(var e=arguments[0],i=arguments[1],n=!1,r=e.iterator();r.hasNext();)this.add(r.next(),i),n=!0;return n}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),i=0;i<this.size();i++)e.add(i,this.get(i).copy());return e},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){if(1===arguments.length){var e=arguments[0];t.prototype.add.call(this,e)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var i=arguments[0],n=arguments[1];return this.add(i,n,!0),!0}if(arguments[0]instanceof A&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&this.size()>=1&&this.get(this.size()-1).equals2D(r))return null;t.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];return this.add(o,s),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],l=arguments[1];if(arguments[2])for(var u=0;u<a.length;u++)this.add(a[u],l);else for(var h=a.length-1;h>=0;h--)this.add(a[h],l);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof A){var c=arguments[0],p=arguments[1];if(!arguments[2]){var d=this.size();if(d>0&&(c>0&&this.get(c-1).equals2D(p)||c<d&&this.get(c).equals2D(p)))return null}t.prototype.add.call(this,c,p)}}else if(4===arguments.length){var f=arguments[0],g=arguments[1],m=arguments[2],v=arguments[3],y=1;m>v&&(y=-1);for(var x=m;x!==v;x+=y)this.add(f[x],g);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new A(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,i),e}(wt),Tt=u((function(){}),"Lt"),Ct={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};Ct.ForwardComparator.get=function(){return Pt},Ct.BidirectionalComparator.get=function(){return It},Ct.coordArrayType.get=function(){return new Array(0).fill(null)},Tt.prototype.interfaces_=function(){return[]},Tt.prototype.getClass=function(){return Tt},Tt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Tt.ptNotInList=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(Tt.indexOf(n,e)<0)return n}return null},Tt.scroll=function(t,e){var i=Tt.indexOf(e,t);if(i<0)return null;var n=new Array(t.length).fill(null);W.arraycopy(t,i,n,0,t.length-i),W.arraycopy(t,0,n,t.length-i,i),W.arraycopy(n,0,t,0,t.length)},Tt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e||t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(!t[i].equals(e[i]))return!1;return!0}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];if(n===r)return!0;if(null===n||null===r||n.length!==r.length)return!1;for(var s=0;s<n.length;s++)if(0!==o.compare(n[s],r[s]))return!1;return!0}},Tt.intersection=function(t,e){for(var i=new St,n=0;n<t.length;n++)e.intersects(t[n])&&i.add(t[n],!0);return i.toCoordinateArray()},Tt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Tt.removeRepeatedPoints=function(t){return Tt.hasRepeatedPoints(t)?new St(t,!1).toCoordinateArray():t},Tt.reverse=function(t){for(var e=t.length-1,i=Math.trunc(e/2),n=0;n<=i;n++){var r=t[n];t[n]=t[e-n],t[e-n]=r}},Tt.removeNull=function(t){for(var e=0,i=0;i<t.length;i++)null!==t[i]&&e++;var n=new Array(e).fill(null);if(0===e)return n;for(var r=0,o=0;o<t.length;o++)null!==t[o]&&(n[r++]=t[o]);return n},Tt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),i=0;i<t.length;i++)e[i]=new A(t[i]);return e}if(5===arguments.length)for(var n=arguments[0],r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],l=0;l<a;l++)o[s+l]=new A(n[r+l])},Tt.isEqualReversed=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],r=e[t.length-i-1];if(0!==n.compareTo(r))return!1}return!0},Tt.envelope=function(t){for(var e=new Y,i=0;i<t.length;i++)e.expandToInclude(t[i]);return e},Tt.toCoordinateArray=function(t){return t.toArray(Tt.coordArrayType)},Tt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Tt.indexOf=function(t,e){for(var i=0;i<e.length;i++)if(t.equals(e[i]))return i;return-1},Tt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var i=t.length-1-e,n=t[e].compareTo(t[i]);if(0!==n)return n}return 1},Tt.compare=function(t,e){for(var i=0;i<t.length&&i<e.length;){var n=t[i].compareTo(e[i]);if(0!==n)return n;i++}return i<e.length?-1:i<t.length?1:0},Tt.minCoordinate=function(t){for(var e=null,i=0;i<t.length;i++)(null===e||e.compareTo(t[i])>0)&&(e=t[i]);return e},Tt.extract=function(t,e,i){e=O.clamp(e,0,t.length);var n=(i=O.clamp(i,-1,t.length))-e+1;i<0&&(n=0),e>=t.length&&(n=0),i<e&&(n=0);var r=new Array(n).fill(null);if(0===n)return r;for(var o=0,s=e;s<=i;s++)r[o++]=t[s];return r},Object.defineProperties(Tt,Ct);var Pt=u((function(){}),"wt");Pt.prototype.compare=function(t,e){return Tt.compare(t,e)},Pt.prototype.interfaces_=function(){return[w]},Pt.prototype.getClass=function(){return Pt};var It=u((function(){}),"Ot");It.prototype.compare=function(t,e){var i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;var r=Tt.compare(i,n);return Tt.isEqualReversed(i,n)?0:r},It.prototype.OLDcompare=function(t,e){var i=t,n=e;if(i.length<n.length)return-1;if(i.length>n.length)return 1;if(0===i.length)return 0;for(var r=Tt.increasingDirection(i),o=Tt.increasingDirection(n),s=r>0?0:i.length-1,a=o>0?0:i.length-1,l=0;l<i.length;l++){var u=i[s].compareTo(n[a]);if(0!==u)return u;s+=r,a+=o}return 0},It.prototype.interfaces_=function(){return[w]},It.prototype.getClass=function(){return It};var Lt=u((function(){}),"Tt");Lt.prototype.get=function(){},Lt.prototype.put=function(){},Lt.prototype.size=function(){},Lt.prototype.values=function(){},Lt.prototype.entrySet=function(){};var Ot=function(t){function e(){t.apply(this,arguments)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Lt);(r.prototype=new Error).name="OperationNotSupported",(o.prototype=new bt).contains=function(){};var Nt=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof bt&&this.addAll(arguments[0])}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(this.array_[e]===t)return!0;return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},e.prototype.iterator=function(){return new Dt(this)},e}(o),Dt=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new n;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new r},e}(Mt),Rt=0;(p.prototype=new Ot).get=function(t){for(var e=this.root_;null!==e;){var i=t.compareTo(e.key);if(i<0)e=e.left;else{if(!(i>0))return e.value;e=e.right}}return null},p.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var i,n,r=this.root_;do{if(i=r,(n=t.compareTo(r.key))<0)r=r.left;else{if(!(n>0)){var o=r.value;return r.value=e,o}r=r.right}}while(null!==r);var s={key:t,left:null,right:null,value:e,parent:i,color:Rt,getValue:function(){return this.value},getKey:function(){return this.key}};return n<0?i.left=s:i.right=s,this.fixAfterInsertion(s),this.size_++,null},p.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;)if(a(t)===h(a(a(t)))){var e=c(a(a(t)));1===s(e)?(l(a(t),Rt),l(e,Rt),l(a(a(t)),1),t=a(a(t))):(t===c(a(t))&&(t=a(t),this.rotateLeft(t)),l(a(t),Rt),l(a(a(t)),1),this.rotateRight(a(a(t))))}else{var i=h(a(a(t)));1===s(i)?(l(a(t),Rt),l(i,Rt),l(a(a(t)),1),t=a(a(t))):(t===h(a(t))&&(t=a(t),this.rotateRight(t)),l(a(t),Rt),l(a(a(t)),1),this.rotateLeft(a(a(t))))}this.root_.color=Rt},p.prototype.values=function(){var t=new wt,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=p.successor(e));)t.add(e.value);return t},p.prototype.entrySet=function(){var t=new Nt,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=p.successor(e));)t.add(e);return t},p.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},p.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},p.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},p.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var i=t.parent,n=t;null!==i&&n===i.right;)n=i,i=i.parent;return i},p.prototype.size=function(){return this.size_};var qt=u((function(){}),"At");qt.prototype.interfaces_=function(){return[]},qt.prototype.getClass=function(){return qt},d.prototype=new o,(f.prototype=new d).contains=function(t){for(var e=0,i=this.array_.length;e<i;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,i=this.array_.length;e<i;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new r},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new Bt(this)};var Bt=u((function(t){this.treeSet_=t,this.position_=0}),"Ft");Bt.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new n;return this.treeSet_.array_[this.position_++]},Bt.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Bt.prototype.remove=function(){throw new r};var kt=u((function(){}),"Gt");kt.sort=function(){var t,e,i,n,r=arguments[0];if(1===arguments.length)n=u((function(t,e){return t.compareTo(e)}),"i"),r.sort(n);else if(2===arguments.length)i=arguments[1],n=u((function(t,e){return i.compare(t,e)}),"i"),r.sort(n);else if(3===arguments.length){(e=r.slice(arguments[1],arguments[2])).sort();var o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length));for(r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])}else if(4===arguments.length)for(e=r.slice(arguments[1],arguments[2]),i=arguments[3],n=u((function(t,e){return i.compare(t,e)}),"i"),e.sort(n),o=r.slice(0,arguments[1]).concat(e,r.slice(arguments[2],r.length)),r.splice(0,r.length),t=0;t<o.length;t++)r.push(o[t])},kt.asList=function(t){for(var e=new wt,i=0,n=t.length;i<n;i++)e.add(t[i]);return e};var Ft=u((function(){}),"qt"),Ut={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Ut.P.get=function(){return 0},Ut.L.get=function(){return 1},Ut.A.get=function(){return 2},Ut.FALSE.get=function(){return-1},Ut.TRUE.get=function(){return-2},Ut.DONTCARE.get=function(){return-3},Ut.SYM_FALSE.get=function(){return"F"},Ut.SYM_TRUE.get=function(){return"T"},Ut.SYM_DONTCARE.get=function(){return"*"},Ut.SYM_P.get=function(){return"0"},Ut.SYM_L.get=function(){return"1"},Ut.SYM_A.get=function(){return"2"},Ft.prototype.interfaces_=function(){return[]},Ft.prototype.getClass=function(){return Ft},Ft.toDimensionSymbol=function(t){switch(t){case Ft.FALSE:return Ft.SYM_FALSE;case Ft.TRUE:return Ft.SYM_TRUE;case Ft.DONTCARE:return Ft.SYM_DONTCARE;case Ft.P:return Ft.SYM_P;case Ft.L:return Ft.SYM_L;case Ft.A:return Ft.SYM_A}throw new x("Unknown dimension value: "+t)},Ft.toDimensionValue=function(t){switch(q.toUpperCase(t)){case Ft.SYM_FALSE:return Ft.FALSE;case Ft.SYM_TRUE:return Ft.TRUE;case Ft.SYM_DONTCARE:return Ft.DONTCARE;case Ft.SYM_P:return Ft.P;case Ft.SYM_L:return Ft.L;case Ft.SYM_A:return Ft.A}throw new x("Unknown dimension symbol: "+t)},Object.defineProperties(Ft,Ut);var zt=u((function(){}),"Vt");zt.prototype.filter=function(t){},zt.prototype.interfaces_=function(){return[]},zt.prototype.getClass=function(){return zt};var Vt=u((function(){}),"Ut");Vt.prototype.filter=function(t,e){},Vt.prototype.isDone=function(){},Vt.prototype.isGeometryChanged=function(){},Vt.prototype.interfaces_=function(){return[]},Vt.prototype.getClass=function(){return Vt};var jt=function(t){function e(e,i){if(t.call(this,i),this._geometries=e||[],t.hasNullElements(this._geometries))throw new x("geometries must not contain null elements")}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=new Y,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=0;i<this._geometries.length;i++)for(var n=this._geometries[i].getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];return t},e.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();kt.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},e.prototype.getDimension=function(){for(var t=Ft.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},e.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse();return this.getFactory().createGeometryCollection(e)},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(kt.asList(this._geometries)),i=new f(kt.asList(t._geometries));return this.compare(e,i)}if(2===arguments.length){for(var n=arguments[0],r=arguments[1],o=n,s=this.getNumGeometries(),a=o.getNumGeometries(),l=0;l<s&&l<a;){var u=this.getGeometryN(l),h=o.getGeometryN(l),c=u.compareToSameClass(h,r);if(0!==c)return c;l++}return l<s?1:l<a?-1:0}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(L(arguments[0],Vt)){var i=arguments[0];if(0===this._geometries.length)return null;for(var n=0;n<this._geometries.length&&(this._geometries[n].apply(i),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else if(L(arguments[0],zt)){var r=arguments[0];r.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(r)}else if(L(arguments[0],ht)){var s=arguments[0];s.filter(this);for(var a=0;a<this._geometries.length;a++)this._geometries[a].apply(s)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),it.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._geometries=new Array(this._geometries.length).fill(null);for(var i=0;i<this._geometries.length;i++)e._geometries[i]=this._geometries[i].clone();return e},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,i),e}(ct),Gt=function(t){function e(){t.apply(this,arguments)}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[t-1-i]=this._geometries[i].reverse();return this.getFactory().createMultiLineString(e)},e.prototype.getBoundary=function(){return new Wt(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[qt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,i),e}(jt),Wt=u((function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=gt.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this._geom=i,this._geomFact=i.getFactory(),this._bnRule=n}}),"Yt");Wt.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Wt.prototype.getBoundary=function(){return this._geom instanceof Zt?this.boundaryLineString(this._geom):this._geom instanceof Gt?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Wt.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Wt.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Wt.prototype.computeBoundaryCoordinates=function(t){var e=new wt;this._endpointMap=new p;for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i);0!==n.getNumPoints()&&(this.addEndpoint(n.getCoordinateN(0)),this.addEndpoint(n.getCoordinateN(n.getNumPoints()-1)))}for(var r=this._endpointMap.entrySet().iterator();r.hasNext();){var o=r.next(),s=o.getValue().count;this._bnRule.isInBoundary(s)&&e.add(o.getKey())}return Tt.toCoordinateArray(e)},Wt.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Ht,this._endpointMap.put(t,e)),e.count++},Wt.prototype.interfaces_=function(){return[]},Wt.prototype.getClass=function(){return Wt},Wt.getBoundary=function(){if(1===arguments.length){var t=arguments[0];return new Wt(t).getBoundary()}if(2===arguments.length){var e=arguments[0],i=arguments[1];return new Wt(e,i).getBoundary()}};var Ht=u((function(){this.count=null}),"kt");Ht.prototype.interfaces_=function(){return[]},Ht.prototype.getClass=function(){return Ht};var Yt=u((function(){}),"jt"),Xt={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Yt.prototype.interfaces_=function(){return[]},Yt.prototype.getClass=function(){return Yt},Yt.chars=function(t,e){for(var i=new Array(e).fill(null),n=0;n<e;n++)i[n]=t;return String(i)},Yt.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new function(){},i=new function(){}(e);return t.printStackTrace(i),e.toString()}if(2===arguments.length){for(var n=arguments[0],r=arguments[1],o="",s=new function(){}(new function(){}(Yt.getStackTrace(n))),a=0;a<r;a++)try{o+=s.readLine()+Yt.NEWLINE}catch(t){if(!(t instanceof g))throw t;it.shouldNeverReachHere()}return o}},Yt.split=function(t,e){for(var i=e.length,n=new wt,r=""+t,o=r.indexOf(e);o>=0;){var s=r.substring(0,o);n.add(s),o=(r=r.substring(o+i)).indexOf(e)}r.length>0&&n.add(r);for(var a=new Array(n.size()).fill(null),l=0;l<a.length;l++)a[l]=n.get(l);return a},Yt.toString=function(){if(1===arguments.length){var t=arguments[0];return Yt.SIMPLE_ORDINATE_FORMAT.format(t)}},Yt.spaces=function(t){return Yt.chars(" ",t)},Xt.NEWLINE.get=function(){return W.getProperty("line.separator")},Xt.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}("0.#")},Object.defineProperties(Yt,Xt);var Kt=u((function(){}),"Wt");Kt.prototype.interfaces_=function(){return[]},Kt.prototype.getClass=function(){return Kt},Kt.copyCoord=function(t,e,i,n){for(var r=Math.min(t.getDimension(),i.getDimension()),o=0;o<r;o++)i.setOrdinate(n,o,t.getOrdinate(e,o))},Kt.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,z.X)===t.getOrdinate(e-1,z.X)&&t.getOrdinate(0,z.Y)===t.getOrdinate(e-1,z.Y)},Kt.isEqual=function(t,e){var i=t.size();if(i!==e.size())return!1;for(var n=Math.min(t.getDimension(),e.getDimension()),r=0;r<i;r++)for(var o=0;o<n;o++){var s=t.getOrdinate(r,o),a=e.getOrdinate(r,o);if(!(t.getOrdinate(r,o)===e.getOrdinate(r,o)||_.isNaN(s)&&_.isNaN(a)))return!1}return!0},Kt.extend=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size();if(Kt.copy(e,0,n,0,r),r>0)for(var o=r;o<i;o++)Kt.copy(e,r-1,n,o,1);return n},Kt.reverse=function(t){for(var e=t.size()-1,i=Math.trunc(e/2),n=0;n<=i;n++)Kt.swap(t,n,e-n)},Kt.swap=function(t,e,i){if(e===i)return null;for(var n=0;n<t.getDimension();n++){var r=t.getOrdinate(e,n);t.setOrdinate(e,n,t.getOrdinate(i,n)),t.setOrdinate(i,n,r)}},Kt.copy=function(t,e,i,n,r){for(var o=0;o<r;o++)Kt.copyCoord(t,e+o,i,n+o)},Kt.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var i=t.getDimension(),n=new D;n.append("(");for(var r=0;r<e;r++){r>0&&n.append(" ");for(var o=0;o<i;o++)o>0&&n.append(","),n.append(Yt.toString(t.getOrdinate(r,o)))}return n.append(")"),n.toString()}},Kt.ensureValidRing=function(t,e){var i=e.size();return 0===i?e:i<=3?Kt.createClosedRing(t,e,4):e.getOrdinate(0,z.X)===e.getOrdinate(i-1,z.X)&&e.getOrdinate(0,z.Y)===e.getOrdinate(i-1,z.Y)?e:Kt.createClosedRing(t,e,i+1)},Kt.createClosedRing=function(t,e,i){var n=t.create(i,e.getDimension()),r=e.size();Kt.copy(e,0,n,0,r);for(var o=r;o<i;o++)Kt.copy(e,0,n,o,1);return n};var Zt=function(t){function e(e,i){t.call(this,i),this._points=null,this.init(e)}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Y:this._points.expandEnvelope(new Y)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))>0&&Kt.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Ft.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return lt.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return Kt.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,i=0;e<this._points.size()&&i<t._points.size();){var n=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(i));if(0!==n)return n;e++,i++}return e<this._points.size()?1:i<t._points.size()?-1:0}if(2===arguments.length){var r=arguments[0];return arguments[1].compare(this._points,r._points)}},e.prototype.apply=function(){if(L(arguments[0],ft))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(L(arguments[0],Vt)){var i=arguments[0];if(0===this._points.size())return null;for(var n=0;n<this._points.size()&&(i.filter(this._points,n),!i.isDone());n++);i.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],zt)||L(arguments[0],ht))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new Wt(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new x("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[qt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,i),e}(ct),Qt=u((function(){}),"Jt");Qt.prototype.interfaces_=function(){return[]},Qt.prototype.getClass=function(){return Qt};var Jt=function(t){function e(e,i){t.call(this,i),this._coordinates=e||null,this.init(this._coordinates)}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Y;var t=new Y;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),i))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},e.prototype.apply=function(){if(L(arguments[0],ft)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(L(arguments[0],Vt)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(L(arguments[0],zt)||L(arguments[0],ht))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),it.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,i),e}(ct),$t=u((function(){}),"Zt");$t.prototype.interfaces_=function(){return[]},$t.prototype.getClass=function(){return $t};var te=function(t){function e(e,i,n){if(t.call(this,n),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===i&&(i=[]),t.hasNullElements(i))throw new x("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(i))throw new x("shell is empty but holes are not");this._shell=e,this._holes=i}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,i=this._shell.getCoordinates(),n=0;n<i.length;n++)t[++e]=i[n];for(var r=0;r<this._holes.length;r++)for(var o=this._holes[r].getCoordinates(),s=0;s<o.length;s++)t[++e]=o[s];return t},e.prototype.getArea=function(){var t=0;t+=Math.abs(lt.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(lt.signedArea(this._holes[e].getCoordinateSequence()));return t},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing()||null===this._shell||5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),i=0;i<5;i++){var n=t.getX(i);if(n!==e.getMinX()&&n!==e.getMaxX())return!1;var r=t.getY(i);if(r!==e.getMinY()&&r!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var l=t.getX(a),u=t.getY(a);if(l!==o==(u!==s))return!1;o=l,s=u}return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];if(!this.isEquivalentClass(e))return!1;var n=e,r=this._shell,o=n._shell;if(!r.equalsExact(o,i)||this._holes.length!==n._holes.length)return!1;for(var s=0;s<this._holes.length;s++)if(!this._holes[s].equalsExact(n._holes[s],i))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);kt.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(e.isEmpty())return null;var n=new Array(e.getCoordinates().length-1).fill(null);W.arraycopy(e.getCoordinates(),0,n,0,n.length);var r=Tt.minCoordinate(e.getCoordinates());Tt.scroll(n,r),W.arraycopy(n,0,e.getCoordinates(),0,n.length),e.getCoordinates()[n.length]=n[0],lt.isCCW(e.getCoordinates())===i&&Tt.reverse(e.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},e.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},e.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,i=t._shell;return e.compareToSameClass(i)}if(2===arguments.length){var n=arguments[0],r=arguments[1],o=n,s=this._shell,a=o._shell,l=s.compareToSameClass(a,r);if(0!==l)return l;for(var u=this.getNumInteriorRing(),h=o.getNumInteriorRing(),c=0;c<u&&c<h;){var p=this.getInteriorRingN(c),d=o.getInteriorRingN(c),f=p.compareToSameClass(d,r);if(0!==f)return f;c++}return c<u?1:c<h?-1:0}},e.prototype.apply=function(t){if(L(t,ft)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(L(t,Vt)){if(this._shell.apply(t),!t.isDone())for(var i=0;i<this._holes.length&&(this._holes[i].apply(t),!t.isDone());i++);t.isGeometryChanged()&&this.geometryChanged()}else if(L(t,zt))t.filter(this);else if(L(t,ht)){t.filter(this),this._shell.apply(t);for(var n=0;n<this._holes.length;n++)this._holes[n].apply(t)}},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);e._shell=this._shell.clone(),e._holes=new Array(this._holes.length).fill(null);for(var i=0;i<this._holes.length;i++)e._holes[i]=this._holes[i].clone();return e},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this._shell.copy(),i=new Array(this._holes.length).fill(null),n=0;n<i.length;n++)i[n]=this._holes[n].copy();return new e(t,i,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,i),e}(ct),ee=function(t){function e(){t.apply(this,arguments)}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[Qt]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,i),e}(jt),ie=function(t){function e(e,i){e instanceof A&&i instanceof ye&&(e=i.getCoordinateSequenceFactory().create(e)),t.call(this,e,i),this.validateConstruction()}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Ft.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();return Kt.reverse(t),this.getFactory().createLinearRing(t)},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new x("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new x("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.MINIMUM_VALID_SIZE.get=function(){return 4},i.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,i),e}(Zt),ne=function(t){function e(){t.apply(this,arguments)}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return ct.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,i)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),i=0;i<this._geometries.length;i++)e[i]=this._geometries[i].reverse();return this.getFactory().createMultiPolygon(e)},e.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new wt,e=0;e<this._geometries.length;e++)for(var i=this._geometries[e].getBoundary(),n=0;n<i.getNumGeometries();n++)t.add(i.getGeometryN(n));var r=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(r))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),i=0;i<t.length;i++)t[i]=this._geometries[i].copy();return new e(t,this._factory)},e.prototype.interfaces_=function(){return[$t]},e.prototype.getClass=function(){return e},i.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,i),e}(jt),re=u((function(t){this._factory=t||null,this._isUserDataCopied=!1}),"ie"),oe={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};re.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},re.prototype.edit=function(t,e){if(null===t)return null;var i=this.editInternal(t,e);return this._isUserDataCopied&&i.setUserData(t.getUserData()),i},re.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof jt?this.editGeometryCollection(t,e):t instanceof te?this.editPolygon(t,e):t instanceof Jt||t instanceof Zt?e.edit(t,this._factory):(it.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},re.prototype.editGeometryCollection=function(t,e){for(var i=e.edit(t,this._factory),n=new wt,r=0;r<i.getNumGeometries();r++){var o=this.edit(i.getGeometryN(r),e);null===o||o.isEmpty()||n.add(o)}return i.getClass()===ee?this._factory.createMultiPoint(n.toArray([])):i.getClass()===Gt?this._factory.createMultiLineString(n.toArray([])):i.getClass()===ne?this._factory.createMultiPolygon(n.toArray([])):this._factory.createGeometryCollection(n.toArray([]))},re.prototype.editPolygon=function(t,e){var i=e.edit(t,this._factory);if(null===i&&(i=this._factory.createPolygon(null)),i.isEmpty())return i;var n=this.edit(i.getExteriorRing(),e);if(null===n||n.isEmpty())return this._factory.createPolygon();for(var r=new wt,o=0;o<i.getNumInteriorRing();o++){var s=this.edit(i.getInteriorRingN(o),e);null===s||s.isEmpty()||r.add(s)}return this._factory.createPolygon(n,r.toArray([]))},re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},re.GeometryEditorOperation=function(){},oe.NoOpGeometryOperation.get=function(){return se},oe.CoordinateOperation.get=function(){return ae},oe.CoordinateSequenceOperation.get=function(){return le},Object.defineProperties(re,oe);var se=u((function(){}),"oe");se.prototype.edit=function(t,e){return t},se.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},se.prototype.getClass=function(){return se};var ae=u((function(){}),"se");ae.prototype.edit=function(t,e){var i=this.editCoordinates(t.getCoordinates(),t);return null===i?t:t instanceof ie?e.createLinearRing(i):t instanceof Zt?e.createLineString(i):t instanceof Jt?i.length>0?e.createPoint(i[0]):e.createPoint():t},ae.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},ae.prototype.getClass=function(){return ae};var le=u((function(){}),"ae");le.prototype.edit=function(t,e){return t instanceof ie?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof Zt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Jt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},le.prototype.interfaces_=function(){return[re.GeometryEditorOperation]},le.prototype.getClass=function(){return le};var ue=u((function(){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var t=arguments[0];this._coordinates=new Array(t).fill(null);for(var e=0;e<t;e++)this._coordinates[e]=new A}else if(L(arguments[0],z)){var i=arguments[0];if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var n=0;n<this._coordinates.length;n++)this._coordinates[n]=i.getCoordinateCopy(n)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var r=arguments[0],o=arguments[1];this._coordinates=r,this._dimension=o,null===r&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this._coordinates=new Array(s).fill(null),this._dimension=a;for(var l=0;l<s;l++)this._coordinates[l]=new A}}),"ue"),he={serialVersionUID:{configurable:!0}};ue.prototype.setOrdinate=function(t,e,i){switch(e){case z.X:this._coordinates[t].x=i;break;case z.Y:this._coordinates[t].y=i;break;case z.Z:this._coordinates[t].z=i;break;default:throw new x("invalid ordinateIndex")}},ue.prototype.size=function(){return this._coordinates.length},ue.prototype.getOrdinate=function(t,e){switch(e){case z.X:return this._coordinates[t].x;case z.Y:return this._coordinates[t].y;case z.Z:return this._coordinates[t].z}return _.NaN},ue.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],i=arguments[1];i.x=this._coordinates[e].x,i.y=this._coordinates[e].y,i.z=this._coordinates[e].z}},ue.prototype.getCoordinateCopy=function(t){return new A(this._coordinates[t])},ue.prototype.getDimension=function(){return this._dimension},ue.prototype.getX=function(t){return this._coordinates[t].x},ue.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new ue(t,this._dimension)},ue.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},ue.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new ue(t,this._dimension)},ue.prototype.toString=function(){if(this._coordinates.length>0){var t=new D(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},ue.prototype.getY=function(t){return this._coordinates[t].y},ue.prototype.toCoordinateArray=function(){return this._coordinates},ue.prototype.interfaces_=function(){return[z,e]},ue.prototype.getClass=function(){return ue},he.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(ue,he);var ce=u((function(){}),"ce"),pe={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};ce.prototype.readResolve=function(){return ce.instance()},ce.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ue(t)}if(L(arguments[0],z)){var e=arguments[0];return new ue(e)}}else if(2===arguments.length){var i=arguments[0],n=arguments[1];return n>3&&(n=3),n<2?new ue(i):new ue(i,n)}},ce.prototype.interfaces_=function(){return[C,e]},ce.prototype.getClass=function(){return ce},ce.instance=function(){return ce.instanceObject},pe.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},pe.instanceObject.get=function(){return new ce},Object.defineProperties(ce,pe);var de=function(t){function e(){t.call(this),this.map_=new Map}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new wt,e=this.map_.values(),i=e.next();!i.done;)t.add(i.value),i=e.next();return t},e.prototype.entrySet=function(){var t=new Nt;return this.map_.entries().forEach((function(e){return t.add(e)})),t},e.prototype.size=function(){return this.map_.size()},e}(Lt),fe=u((function t(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=t.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof me){var e=arguments[0];this._modelType=e,e===t.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var i=arguments[0];this._modelType=t.FIXED,this.setScale(i)}else if(arguments[0]instanceof t){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}}),"t"),ge={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};fe.prototype.equals=function(t){if(!(t instanceof fe))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},fe.prototype.compareTo=function(t){var e=t,i=this.getMaximumSignificantDigits(),n=e.getMaximumSignificantDigits();return new R(i).compareTo(new R(n))},fe.prototype.getScale=function(){return this._scale},fe.prototype.isFloating=function(){return this._modelType===fe.FLOATING||this._modelType===fe.FLOATING_SINGLE},fe.prototype.getType=function(){return this._modelType},fe.prototype.toString=function(){var t="UNKNOWN";return this._modelType===fe.FLOATING?t="Floating":this._modelType===fe.FLOATING_SINGLE?t="Floating-Single":this._modelType===fe.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},fe.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return _.isNaN(t)||this._modelType===fe.FLOATING_SINGLE?t:this._modelType===fe.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof A){var e=arguments[0];if(this._modelType===fe.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},fe.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===fe.FLOATING?t=16:this._modelType===fe.FLOATING_SINGLE?t=6:this._modelType===fe.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},fe.prototype.setScale=function(t){this._scale=Math.abs(t)},fe.prototype.interfaces_=function(){return[e,M]},fe.prototype.getClass=function(){return fe},fe.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},ge.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ge.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(fe,ge);var me=u((function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)}),"t"),ve={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};me.prototype.readResolve=function(){return me.nameToTypeMap.get(this._name)},me.prototype.toString=function(){return this._name},me.prototype.interfaces_=function(){return[e]},me.prototype.getClass=function(){return me},ve.serialVersionUID.get=function(){return-552860263173159e4},ve.nameToTypeMap.get=function(){return new de},Object.defineProperties(me,ve),fe.Type=me,fe.FIXED=new me("FIXED"),fe.FLOATING=new me("FLOATING"),fe.FLOATING_SINGLE=new me("FLOATING SINGLE");var ye=u((function t(){this._precisionModel=new fe,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?L(arguments[0],C)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof fe&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))}),"t"),xe={serialVersionUID:{configurable:!0}};ye.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new A(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new A(t.getMinX(),t.getMinY()),new A(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new A(t.getMinX(),t.getMinY()),new A(t.getMinX(),t.getMaxY()),new A(t.getMaxX(),t.getMaxY()),new A(t.getMaxX(),t.getMinY()),new A(t.getMinX(),t.getMinY())]),null)},ye.prototype.createLineString=function(t){return t?t instanceof Array?new Zt(this.getCoordinateSequenceFactory().create(t),this):L(t,z)?new Zt(t,this):void 0:new Zt(this.getCoordinateSequenceFactory().create([]),this)},ye.prototype.createMultiLineString=function(){if(0===arguments.length)return new Gt(null,this);if(1===arguments.length){var t=arguments[0];return new Gt(t,this)}},ye.prototype.buildGeometry=function(t){for(var e=null,i=!1,n=!1,r=t.iterator();r.hasNext();){var o=r.next(),s=o.getClass();null===e&&(e=s),s!==e&&(i=!0),o.isGeometryCollectionOrDerived()&&(n=!0)}if(null===e)return this.createGeometryCollection();if(i||n)return this.createGeometryCollection(ye.toGeometryArray(t));var a=t.iterator().next();if(t.size()>1){if(a instanceof te)return this.createMultiPolygon(ye.toPolygonArray(t));if(a instanceof Zt)return this.createMultiLineString(ye.toLineStringArray(t));if(a instanceof Jt)return this.createMultiPoint(ye.toPointArray(t));it.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},ye.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ye.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof A){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(L(arguments[0],z)){var e=arguments[0];return new Jt(e,this)}}},ye.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ye.prototype.createPolygon=function(){if(0===arguments.length)return new te(null,null,this);if(1===arguments.length){if(L(arguments[0],z)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof ie){var i=arguments[0];return this.createPolygon(i,null)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return new te(n,r,this)}},ye.prototype.getSRID=function(){return this._SRID},ye.prototype.createGeometryCollection=function(){if(0===arguments.length)return new jt(null,this);if(1===arguments.length){var t=arguments[0];return new jt(t,this)}},ye.prototype.createGeometry=function(t){return new re(this).edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},ye.prototype.getPrecisionModel=function(){return this._precisionModel},ye.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(L(arguments[0],z)){var e=arguments[0];return new ie(e,this)}}},ye.prototype.createMultiPolygon=function(){if(0===arguments.length)return new ne(null,this);if(1===arguments.length){var t=arguments[0];return new ne(t,this)}},ye.prototype.createMultiPoint=function(){if(0===arguments.length)return new ee(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new ee(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(null!==e?this.getCoordinateSequenceFactory().create(e):null)}if(L(arguments[0],z)){var i=arguments[0];if(null===i)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(i.size()).fill(null),r=0;r<i.size();r++){var o=this.getCoordinateSequenceFactory().create(1,i.getDimension());Kt.copy(i,r,o,0,1),n[r]=this.createPoint(o)}return this.createMultiPoint(n)}}},ye.prototype.interfaces_=function(){return[e]},ye.prototype.getClass=function(){return ye},ye.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.getDefaultCoordinateSequenceFactory=function(){return ce.instance()},ye.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ye.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},xe.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ye,xe);var _e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],be=u((function(t){this.geometryFactory=t||new ye}),"Ie");be.prototype.read=function(t){var e,i=(e="string"==typeof t?JSON.parse(t):t).type;if(!Me[i])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==_e.indexOf(i)?Me[i].apply(this,[e.coordinates]):"GeometryCollection"===i?Me[i].apply(this,[e.geometries]):Me[i].apply(this,[e])},be.prototype.write=function(t){var e=t.getGeometryType();if(!Ee[e])throw new Error("Geometry is not supported");return Ee[e].apply(this,[t])};var Me={Feature:function(t){var e={};for(var i in t)e[i]=t[i];if(t.geometry){var n=t.geometry.type;if(!Me[n])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Me.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var i=0;i<t.features.length;++i)e.features.push(this.read(t.features[i]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(new A(n[0],n[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new A(t[0],t[1]),new A(t[2],t[1]),new A(t[2],t[3]),new A(t[0],t[3]),new A(t[0],t[1])])},Point:function(t){var e=new A(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],i=0;i<t.length;++i)e.push(Me.Point.apply(this,[t[i]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Me.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],i=0;i<t.length;++i)e.push(Me.LineString.apply(this,[t[i]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Me.coordinates.apply(this,[t[0]]),i=this.geometryFactory.createLinearRing(e),n=[],r=1;r<t.length;++r){var o=t[r],s=Me.coordinates.apply(this,[o]),a=this.geometryFactory.createLinearRing(s);n.push(a)}return this.geometryFactory.createPolygon(i,n)},MultiPolygon:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(Me.Polygon.apply(this,[n]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],i=0;i<t.length;++i){var n=t[i];e.push(this.read(n))}return this.geometryFactory.createGeometryCollection(e)}},Ee={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ee.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=Ee.Point.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],i=t.getCoordinates(),n=0;n<i.length;++n){var r=i[n];e.push(Ee.coordinate.apply(this,[r]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=Ee.LineString.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],i=Ee.LineString.apply(this,[t._shell]);e.push(i.coordinates);for(var n=0;n<t._holes.length;++n){var r=t._holes[n],o=Ee.LineString.apply(this,[r]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=Ee.Polygon.apply(this,[n]);e.push(r.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],i=0;i<t._geometries.length;++i){var n=t._geometries[i],r=n.getGeometryType();e.push(Ee[r].apply(this,[n]))}return{type:"GeometryCollection",geometries:e}}},we=u((function(t){this.geometryFactory=t||new ye,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new be(this.geometryFactory)}),"Ne");we.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===fe.FIXED&&this.reducePrecision(e),e},we.prototype.reducePrecision=function(t){var e,i;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,i=t.points.length;e<i;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,i=t.geometries.length;e<i;e++)this.reducePrecision(t.geometries[e])};var Ae=u((function(){this.parser=new be(this.geometryFactory)}),"Ce");Ae.prototype.write=function(t){return this.parser.write(t)};var Se=u((function(){}),"Se"),Te={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Se.prototype.interfaces_=function(){return[]},Se.prototype.getClass=function(){return Se},Se.opposite=function(t){return t===Se.LEFT?Se.RIGHT:t===Se.RIGHT?Se.LEFT:t},Te.ON.get=function(){return 0},Te.LEFT.get=function(){return 1},Te.RIGHT.get=function(){return 2},Object.defineProperties(Se,Te),(m.prototype=new Error).name="EmptyStackException",(v.prototype=new Et).add=function(t){return this.array_.push(t),!0},v.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},v.prototype.push=function(t){return this.array_.push(t),t},v.prototype.pop=function(t){if(0===this.array_.length)throw new m;return this.array_.pop()},v.prototype.peek=function(){if(0===this.array_.length)throw new m;return this.array_[this.array_.length-1]},v.prototype.empty=function(){return 0===this.array_.length},v.prototype.isEmpty=function(){return this.empty()},v.prototype.search=function(t){return this.array_.indexOf(t)},v.prototype.size=function(){return this.array_.length},v.prototype.toArray=function(){for(var t=[],e=0,i=this.array_.length;e<i;e++)t.push(this.array_[e]);return t};var Ce=u((function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}),"be");Ce.prototype.getCoordinate=function(){return this._minCoord},Ce.prototype.getRightmostSide=function(t,e){var i=this.getRightmostSideOfSegment(t,e);return i<0&&(i=this.getRightmostSideOfSegment(t,e-1)),i<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),i},Ce.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();it.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],i=t[this._minIndex+1],n=lt.computeOrientation(this._minCoord,i,e),r=!1;(e.y<this._minCoord.y&&i.y<this._minCoord.y&&n===lt.COUNTERCLOCKWISE||e.y>this._minCoord.y&&i.y>this._minCoord.y&&n===lt.CLOCKWISE)&&(r=!0),r&&(this._minIndex=this._minIndex-1)},Ce.prototype.getRightmostSideOfSegment=function(t,e){var i=t.getEdge().getCoordinates();if(e<0||e+1>=i.length||i[e].y===i[e+1].y)return-1;var n=Se.LEFT;return i[e].y<i[e+1].y&&(n=Se.RIGHT),n},Ce.prototype.getEdge=function(){return this._orientedDe},Ce.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),i=0;i<e.length-1;i++)(null===this._minCoord||e[i].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=i,this._minCoord=e[i])},Ce.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ce.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();i.isForward()&&this.checkForRightmostCoordinate(i)}it.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Se.LEFT&&(this._orientedDe=this._minDe.getSym())},Ce.prototype.interfaces_=function(){return[]},Ce.prototype.getClass=function(){return Ce};var Pe=function(t){function e(i,n){t.call(this,e.msgWithCoord(i,n)),this.pt=n?new A(n):null,this.name="TopologyException"}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(tt),Ie=u((function(){this.array_=[]}),"Oe");Ie.prototype.addLast=function(t){this.array_.push(t)},Ie.prototype.removeFirst=function(){return this.array_.shift()},Ie.prototype.isEmpty=function(){return 0===this.array_.length};var Le=u((function(){this._finder=null,this._dirEdgeList=new wt,this._nodes=new wt,this._rightMostCoord=null,this._env=null,this._finder=new Ce}),"Te");Le.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},Le.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},Le.prototype.computeNodeDepth=function(t){for(var e=null,i=t.getEdges().iterator();i.hasNext();){var n=i.next();if(n.isVisited()||n.getSym().isVisited()){e=n;break}}if(null===e)throw new Pe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var r=t.getEdges().iterator();r.hasNext();){var o=r.next();o.setVisited(!0),this.copySymDepths(o)}},Le.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Se.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},Le.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},Le.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(Se.RIGHT)>=1&&e.getDepth(Se.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},Le.prototype.computeDepths=function(t){var e=new Nt,i=new Ie,n=t.getNode();for(i.addLast(n),e.add(n),t.setVisited(!0);!i.isEmpty();){var r=i.removeFirst();e.add(r),this.computeNodeDepth(r);for(var o=r.getEdges().iterator();o.hasNext();){var s=o.next().getSym();if(!s.isVisited()){var a=s.getNode();e.contains(a)||(i.addLast(a),e.add(a))}}}},Le.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},Le.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Y,e=this._dirEdgeList.iterator();e.hasNext();)for(var i=e.next().getEdge().getCoordinates(),n=0;n<i.length-1;n++)t.expandToInclude(i[n]);this._env=t}return this._env},Le.prototype.addReachable=function(t){var e=new v;for(e.add(t);!e.empty();){var i=e.pop();this.add(i,e)}},Le.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Se.LEFT,t.getDepth(Se.RIGHT)),e.setDepth(Se.RIGHT,t.getDepth(Se.LEFT))},Le.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var i=t.getEdges().iterator();i.hasNext();){var n=i.next();this._dirEdgeList.add(n);var r=n.getSym().getNode();r.isVisited()||e.push(r)}},Le.prototype.getNodes=function(){return this._nodes},Le.prototype.getDirectedEdges=function(){return this._dirEdgeList},Le.prototype.interfaces_=function(){return[M]},Le.prototype.getClass=function(){return Le};var Oe=u((function t(){if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[Se.ON]=i}else if(arguments[0]instanceof t){var n=arguments[0];if(this.init(n.location.length),null!==n)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[Se.ON]=o,this.location[Se.LEFT]=s,this.location[Se.RIGHT]=a}}),"t");Oe.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},Oe.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==P.NONE)return!1;return!0},Oe.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===P.NONE&&(this.location[e]=t)},Oe.prototype.isLine=function(){return 1===this.location.length},Oe.prototype.merge=function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[Se.ON]=this.location[Se.ON],e[Se.LEFT]=P.NONE,e[Se.RIGHT]=P.NONE,this.location=e}for(var i=0;i<this.location.length;i++)this.location[i]===P.NONE&&i<t.location.length&&(this.location[i]=t.location[i])},Oe.prototype.getLocations=function(){return this.location},Oe.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Se.LEFT];this.location[Se.LEFT]=this.location[Se.RIGHT],this.location[Se.RIGHT]=t},Oe.prototype.toString=function(){var t=new D;return this.location.length>1&&t.append(P.toLocationSymbol(this.location[Se.LEFT])),t.append(P.toLocationSymbol(this.location[Se.ON])),this.location.length>1&&t.append(P.toLocationSymbol(this.location[Se.RIGHT])),t.toString()},Oe.prototype.setLocations=function(t,e,i){this.location[Se.ON]=t,this.location[Se.LEFT]=e,this.location[Se.RIGHT]=i},Oe.prototype.get=function(t){return t<this.location.length?this.location[t]:P.NONE},Oe.prototype.isArea=function(){return this.location.length>1},Oe.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===P.NONE)return!0;return!1},Oe.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(Se.ON,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.location[e]=i}},Oe.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(P.NONE)},Oe.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},Oe.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},Oe.prototype.interfaces_=function(){return[]},Oe.prototype.getClass=function(){return Oe};var Ne=u((function t(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var e=arguments[0];this.elt[0]=new Oe(e),this.elt[1]=new Oe(e)}else if(arguments[0]instanceof t){var i=arguments[0];this.elt[0]=new Oe(i.elt[0]),this.elt[1]=new Oe(i.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.elt[0]=new Oe(P.NONE),this.elt[1]=new Oe(P.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.elt[0]=new Oe(o,s,a),this.elt[1]=new Oe(o,s,a)}else if(4===arguments.length){var l=arguments[0],u=arguments[1],h=arguments[2],c=arguments[3];this.elt[0]=new Oe(P.NONE,P.NONE,P.NONE),this.elt[1]=new Oe(P.NONE,P.NONE,P.NONE),this.elt[l].setLocations(u,h,c)}}),"t");Ne.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Ne.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Ne.prototype.isNull=function(t){return this.elt[t].isNull()},Ne.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.elt[e].setAllLocationsIfNull(i)}},Ne.prototype.isLine=function(t){return this.elt[t].isLine()},Ne.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new Oe(t.elt[e]):this.elt[e].merge(t.elt[e])},Ne.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Ne.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Se.ON)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return this.elt[e].get(i)}},Ne.prototype.toString=function(){var t=new D;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Ne.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Ne.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Ne.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(Se.ON,e)}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this.elt[i].setLocation(n,r)}},Ne.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Ne.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Ne.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new Oe(this.elt[t].location[0]))},Ne.prototype.interfaces_=function(){return[]},Ne.prototype.getClass=function(){return Ne},Ne.toLineLabel=function(t){for(var e=new Ne(P.NONE),i=0;i<2;i++)e.setLocation(i,t.getLocation(i));return e};var De=u((function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new wt,this._pts=new wt,this._label=new Ne(P.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new wt,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()}),"De");De.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=lt.isCCW(this._ring.getCoordinates())},De.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},De.prototype.computePoints=function(t){this._startDe=t;var e=t,i=!0;do{if(null===e)throw new Pe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new Pe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var n=e.getLabel();it.isTrue(n.isArea()),this.mergeLabel(n),this.addPoints(e.getEdge(),e.isForward(),i),i=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},De.prototype.getLinearRing=function(){return this._ring},De.prototype.getCoordinate=function(t){return this._pts.get(t)},De.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},De.prototype.addPoints=function(t,e,i){var n=t.getCoordinates();if(e){var r=1;i&&(r=0);for(var o=r;o<n.length;o++)this._pts.add(n[o])}else{var s=n.length-2;i&&(s=n.length-1);for(var a=s;a>=0;a--)this._pts.add(n[a])}},De.prototype.isHole=function(){return this._isHole},De.prototype.setInResult=function(){var t=this._startDe;do{t.getEdge().setInResult(!0),t=t.getNext()}while(t!==this._startDe)},De.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t)||!lt.isPointInRing(t,e.getCoordinates()))return!1;for(var i=this._holes.iterator();i.hasNext();)if(i.next().containsPoint(t))return!1;return!0},De.prototype.addHole=function(t){this._holes.add(t)},De.prototype.isShell=function(){return null===this._shell},De.prototype.getLabel=function(){return this._label},De.prototype.getEdges=function(){return this._edges},De.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},De.prototype.getShell=function(){return this._shell},De.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=e.getLocation(i,Se.RIGHT);if(n===P.NONE)return null;if(this._label.getLocation(i)===P.NONE)return this._label.setLocation(i,n),null}},De.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},De.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),i=0;i<this._holes.size();i++)e[i]=this._holes.get(i).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},De.prototype.interfaces_=function(){return[]},De.prototype.getClass=function(){return De};var Re=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),qe=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=new wt,e=this._startDe;do{if(null===e.getMinEdgeRing()){var i=new Re(e,this._geometryFactory);t.add(i)}e=e.getNext()}while(e!==this._startDe);return t},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this._startDe;do{t.getNode().getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(De),Be=u((function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0!==arguments.length&&1===arguments.length){var t=arguments[0];this._label=t}}),"Fe");Be.prototype.setVisited=function(t){this._isVisited=t},Be.prototype.setInResult=function(t){this._isInResult=t},Be.prototype.isCovered=function(){return this._isCovered},Be.prototype.isCoveredSet=function(){return this._isCoveredSet},Be.prototype.setLabel=function(t){this._label=t},Be.prototype.getLabel=function(){return this._label},Be.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Be.prototype.updateIM=function(t){it.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Be.prototype.isInResult=function(){return this._isInResult},Be.prototype.isVisited=function(){return this._isVisited},Be.prototype.interfaces_=function(){return[]},Be.prototype.getClass=function(){return Be};var ke=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],i=arguments[1];this._coord=e,this._edges=i,this._label=new Ne(0,P.NONE)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var i=P.NONE;if(i=this._label.getLocation(e),!t.isNull(e)){var n=t.getLocation(e);i!==P.BOUNDARY&&(i=n)}return i},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],i=arguments[1];null===this._label?this._label=new Ne(e,i):this._label.setLocation(e,i)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){if(arguments[0]instanceof e){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof Ne)for(var i=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(i,n);this._label.getLocation(n)===P.NONE&&this._label.setLocation(n,r)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=P.NONE;null!==this._label&&(e=this._label.getLocation(t));var i=null;switch(e){case P.BOUNDARY:i=P.INTERIOR;break;case P.INTERIOR:default:i=P.BOUNDARY}this._label.setLocation(t,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Be),Fe=u((function(){this.nodeMap=new p,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}),"qe");Fe.prototype.find=function(t){return this.nodeMap.get(t)},Fe.prototype.addNode=function(){if(arguments[0]instanceof A){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ke){var i=arguments[0],n=this.nodeMap.get(i.getCoordinate());return null===n?(this.nodeMap.put(i.getCoordinate(),i),i):(n.mergeLabel(i),n)}},Fe.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},Fe.prototype.iterator=function(){return this.nodeMap.values().iterator()},Fe.prototype.values=function(){return this.nodeMap.values()},Fe.prototype.getBoundaryNodes=function(t){for(var e=new wt,i=this.iterator();i.hasNext();){var n=i.next();n.getLabel().getLocation(t)===P.BOUNDARY&&e.add(n)}return e},Fe.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},Fe.prototype.interfaces_=function(){return[]},Fe.prototype.getClass=function(){return Fe};var Ue=u((function(){}),"Be"),ze={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Ue.prototype.interfaces_=function(){return[]},Ue.prototype.getClass=function(){return Ue},Ue.isNorthern=function(t){return t===Ue.NE||t===Ue.NW},Ue.isOpposite=function(t,e){return t!==e&&(t-e+4)%4==2},Ue.commonHalfPlane=function(t,e){if(t===e)return t;if((t-e+4)%4==2)return-1;var i=t<e?t:e;return 0===i&&3===(t>e?t:e)?3:i},Ue.isInHalfPlane=function(t,e){return e===Ue.SE?t===Ue.SE||t===Ue.SW:t===e||t===e+1},Ue.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new x("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Ue.NE:Ue.SE:e>=0?Ue.NW:Ue.SW}if(arguments[0]instanceof A&&arguments[1]instanceof A){var i=arguments[0],n=arguments[1];if(n.x===i.x&&n.y===i.y)throw new x("Cannot compute the quadrant for two identical points "+i);return n.x>=i.x?n.y>=i.y?Ue.NE:Ue.SE:n.y>=i.y?Ue.NW:Ue.SW}},ze.NE.get=function(){return 0},ze.NW.get=function(){return 1},ze.SW.get=function(){return 2},ze.SE.get=function(){return 3},Object.defineProperties(Ue,ze);var Ve=u((function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2];this._edge=e,this.init(i,n),this._label=null}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this._edge=r,this.init(o,s),this._label=a}}),"Ue");Ve.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:lt.computeOrientation(t._p0,t._p1,this._p1)},Ve.prototype.getDy=function(){return this._dy},Ve.prototype.getCoordinate=function(){return this._p0},Ve.prototype.setNode=function(t){this._node=t},Ve.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),i=this.getClass().getName(),n=i.lastIndexOf("."),r=i.substring(n+1);t.print("  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Ve.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Ve.prototype.getDirectedCoordinate=function(){return this._p1},Ve.prototype.getDx=function(){return this._dx},Ve.prototype.getLabel=function(){return this._label},Ve.prototype.getEdge=function(){return this._edge},Ve.prototype.getQuadrant=function(){return this._quadrant},Ve.prototype.getNode=function(){return this._node},Ve.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),i=e.lastIndexOf(".");return"  "+e.substring(i+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Ve.prototype.computeLabel=function(t){},Ve.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Ue.quadrant(this._dx,this._dy),it.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Ve.prototype.interfaces_=function(){return[M]},Ve.prototype.getClass=function(){return Ve};var je=function(t){function e(){var e=arguments[0],i=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=i,i)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var n=e.getNumPoints()-1;this.init(e.getCoordinate(n),e.getCoordinate(n-1))}this.computeDirectedLabel()}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Ne(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new Pe("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Se.LEFT)===P.INTERIOR&&this._label.getLocation(e,Se.RIGHT)===P.INTERIOR||(t=!1);return t},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[Se.LEFT]+"/"+this._depth[Se.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,P.EXTERIOR),i=!this._label.isArea(1)||this._label.allPositionsEqual(1,P.EXTERIOR);return t&&e&&i},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var i=this.getEdge().getDepthDelta();this._isForward||(i=-i);var n=1;t===Se.LEFT&&(n=-1);var r=Se.opposite(t),o=e+i*n;this.setDepth(t,e),this.setDepth(r,o)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===P.EXTERIOR&&e===P.INTERIOR?1:t===P.INTERIOR&&e===P.EXTERIOR?-1:0},e}(Ve),Ge=u((function(){}),"Xe");Ge.prototype.createNode=function(t){return new ke(t,null)},Ge.prototype.interfaces_=function(){return[]},Ge.prototype.getClass=function(){return Ge};var We=u((function(){if(this._edges=new wt,this._nodes=null,this._edgeEndList=new wt,0===arguments.length)this._nodes=new Fe(new Ge);else if(1===arguments.length){var t=arguments[0];this._nodes=new Fe(t)}}),"Ye");We.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var i=this._edges.get(e);i.print(t),i.eiList.print(t)}},We.prototype.find=function(t){return this._nodes.find(t)},We.prototype.addNode=function(){if(arguments[0]instanceof ke){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof A){var e=arguments[0];return this._nodes.addNode(e)}},We.prototype.getNodeIterator=function(){return this._nodes.iterator()},We.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},We.prototype.debugPrintln=function(t){W.out.println(t)},We.prototype.isBoundaryNode=function(t,e){var i=this._nodes.find(e);if(null===i)return!1;var n=i.getLabel();return null!==n&&n.getLocation(t)===P.BOUNDARY},We.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},We.prototype.matchInSameDirection=function(t,e,i,n){return!!t.equals(i)&&lt.computeOrientation(t,e,n)===lt.COLLINEAR&&Ue.quadrant(t,e)===Ue.quadrant(i,n)},We.prototype.getEdgeEnds=function(){return this._edgeEndList},We.prototype.debugPrint=function(t){W.out.print(t)},We.prototype.getEdgeIterator=function(){return this._edges.iterator()},We.prototype.findEdgeInSameDirection=function(t,e){for(var i=0;i<this._edges.size();i++){var n=this._edges.get(i),r=n.getCoordinates();if(this.matchInSameDirection(t,e,r[0],r[1])||this.matchInSameDirection(t,e,r[r.length-1],r[r.length-2]))return n}return null},We.prototype.insertEdge=function(t){this._edges.add(t)},We.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var i=e.next();if(i.getEdge()===t)return i}return null},We.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this._edges.add(i);var n=new je(i,!0),r=new je(i,!1);n.setSym(r),r.setSym(n),this.add(n),this.add(r)}},We.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},We.prototype.getNodes=function(){return this._nodes.values()},We.prototype.findEdge=function(t,e){for(var i=0;i<this._edges.size();i++){var n=this._edges.get(i),r=n.getCoordinates();if(t.equals(r[0])&&e.equals(r[1]))return n}return null},We.prototype.interfaces_=function(){return[]},We.prototype.getClass=function(){return We},We.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};var He=u((function(){this._geometryFactory=null,this._shellList=new wt;var t=arguments[0];this._geometryFactory=t}),"ke");He.prototype.sortShellsAndHoles=function(t,e,i){for(var n=t.iterator();n.hasNext();){var r=n.next();r.isHole()?i.add(r):e.add(r)}},He.prototype.computePolygons=function(t){for(var e=new wt,i=t.iterator();i.hasNext();){var n=i.next().toPolygon(this._geometryFactory);e.add(n)}return e},He.prototype.placeFreeHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();if(null===n.getShell()){var r=this.findEdgeRingContaining(n,t);if(null===r)throw new Pe("unable to assign hole to a shell",n.getCoordinate(0));n.setShell(r)}}},He.prototype.buildMinimalEdgeRings=function(t,e,i){for(var n=new wt,r=t.iterator();r.hasNext();){var o=r.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var s=o.buildMinimalRings(),a=this.findShell(s);null!==a?(this.placePolygonHoles(a,s),e.add(a)):i.addAll(s)}else n.add(o)}return n},He.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},He.prototype.buildMaximalEdgeRings=function(t){for(var e=new wt,i=t.iterator();i.hasNext();){var n=i.next();if(n.isInResult()&&n.getLabel().isArea()&&null===n.getEdgeRing()){var r=new qe(n,this._geometryFactory);e.add(r),r.setInResult()}}return e},He.prototype.placePolygonHoles=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();n.isHole()&&n.setShell(t)}},He.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},He.prototype.findEdgeRingContaining=function(t,e){for(var i=t.getLinearRing(),n=i.getEnvelopeInternal(),r=i.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var l=a.next(),u=l.getLinearRing(),h=u.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var c=!1;h.contains(n)&&lt.isPointInRing(r,u.getCoordinates())&&(c=!0),c&&(null===o||s.contains(h))&&(o=l)}return o},He.prototype.findShell=function(t){for(var e=0,i=null,n=t.iterator();n.hasNext();){var r=n.next();r.isHole()||(i=r,e++)}return it.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),i},He.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],i=arguments[1];We.linkResultDirectedEdges(i);var n=this.buildMaximalEdgeRings(e),r=new wt,o=this.buildMinimalEdgeRings(n,this._shellList,r);this.sortShellsAndHoles(o,this._shellList,r),this.placeFreeHoles(this._shellList,r)}},He.prototype.interfaces_=function(){return[]},He.prototype.getClass=function(){return He};var Ye=u((function(){}),"je");Ye.prototype.getBounds=function(){},Ye.prototype.interfaces_=function(){return[]},Ye.prototype.getClass=function(){return Ye};var Xe=u((function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e}),"He");Xe.prototype.getItem=function(){return this._item},Xe.prototype.getBounds=function(){return this._bounds},Xe.prototype.interfaces_=function(){return[Ye,e]},Xe.prototype.getClass=function(){return Xe};var Ke=u((function(){this._size=null,this._items=null,this._size=0,this._items=new wt,this._items.add(null)}),"We");Ke.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},Ke.prototype.size=function(){return this._size},Ke.prototype.reorder=function(t){for(var e=null,i=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(i)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,i)},Ke.prototype.clear=function(){this._size=0,this._items.clear()},Ke.prototype.isEmpty=function(){return 0===this._size},Ke.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};var Ze=u((function(){}),"Ke");Ze.prototype.visitItem=function(t){},Ze.prototype.interfaces_=function(){return[]},Ze.prototype.getClass=function(){return Ze};var Qe=u((function(){}),"Je");Qe.prototype.insert=function(t,e){},Qe.prototype.remove=function(t,e){},Qe.prototype.query=function(){},Qe.prototype.interfaces_=function(){return[]},Qe.prototype.getClass=function(){return Qe};var Je=u((function(){if(this._childBoundables=new wt,this._bounds=null,this._level=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];this._level=t}}),"Qe"),$e={serialVersionUID:{configurable:!0}};Je.prototype.getLevel=function(){return this._level},Je.prototype.size=function(){return this._childBoundables.size()},Je.prototype.getChildBoundables=function(){return this._childBoundables},Je.prototype.addChildBoundable=function(t){it.isTrue(null===this._bounds),this._childBoundables.add(t)},Je.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Je.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Je.prototype.interfaces_=function(){return[Ye,e]},Je.prototype.getClass=function(){return Je},$e.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Je,$e);var ti=u((function(){}),"$e");ti.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},ti.min=function(t){return ti.sort(t),t.get(0)},ti.sort=function(t,e){var i=t.toArray();e?kt.sort(i,e):kt.sort(i);for(var n=t.iterator(),r=0,o=i.length;r<o;r++)n.next(),n.set(i[r])},ti.singletonList=function(t){var e=new wt;return e.add(t),e};var ei=u((function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],i=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=i,this._distance=this.distance()}),"tn");ei.prototype.expandToQueue=function(t,e){var i=ei.isComposite(this._boundable1),n=ei.isComposite(this._boundable2);if(i&&n)return ei.area(this._boundable1)>ei.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(i)return this.expand(this._boundable1,this._boundable2,t,e),null;if(n)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new x("neither boundable is composite")},ei.prototype.isLeaves=function(){return!(ei.isComposite(this._boundable1)||ei.isComposite(this._boundable2))},ei.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},ei.prototype.expand=function(t,e,i,n){for(var r=t.getChildBoundables().iterator();r.hasNext();){var o=r.next(),s=new ei(o,e,this._itemDistance);s.getDistance()<n&&i.add(s)}},ei.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},ei.prototype.getDistance=function(){return this._distance},ei.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},ei.prototype.interfaces_=function(){return[M]},ei.prototype.getClass=function(){return ei},ei.area=function(t){return t.getBounds().getArea()},ei.isComposite=function(t){return t instanceof Je};var ii=u((function t(){if(this._root=null,this._built=!1,this._itemBoundables=new wt,this._nodeCapacity=null,0===arguments.length){var e=t.DEFAULT_NODE_CAPACITY;this._nodeCapacity=e}else if(1===arguments.length){var i=arguments[0];it.isTrue(i>1,"Node capacity must be greater than 1"),this._nodeCapacity=i}}),"t"),ni={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};ii.prototype.getNodeCapacity=function(){return this._nodeCapacity},ii.prototype.lastNode=function(t){return t.get(t.size()-1)},ii.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();i instanceof Je?t+=this.size(i):i instanceof Xe&&(t+=1)}return t}},ii.prototype.removeItem=function(t,e){for(var i=null,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof Xe&&r.getItem()===e&&(i=r)}return null!==i&&(t.getChildBoundables().remove(i),!0)},ii.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new wt:t}if(1===arguments.length){for(var e=arguments[0],i=new wt,n=e.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof Je){var o=this.itemsTree(r);null!==o&&i.add(o)}else r instanceof Xe?i.add(r.getItem()):it.shouldNeverReachHere()}return i.size()<=0?null:i}},ii.prototype.insert=function(t,e){it.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Xe(t,e))},ii.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new wt;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];if(it.isTrue(i>-2),n.getLevel()===i)return r.add(n),null;for(var o=n.getChildBoundables().iterator();o.hasNext();){var s=o.next();s instanceof Je?this.boundablesAtLevel(i,s,r):(it.isTrue(s instanceof Xe),-1===i&&r.add(s))}return null}},ii.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new wt;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var i=arguments[0],n=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),i)&&this.query(i,this._root,n)}else if(3===arguments.length)if(L(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var r=arguments[0],o=arguments[1],s=arguments[2],a=o.getChildBoundables(),l=0;l<a.size();l++){var u=a.get(l);this.getIntersectsOp().intersects(u.getBounds(),r)&&(u instanceof Je?this.query(r,u,s):u instanceof Xe?s.visitItem(u.getItem()):it.shouldNeverReachHere())}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Je)for(var h=arguments[0],c=arguments[1],p=arguments[2],d=c.getChildBoundables(),f=0;f<d.size();f++){var g=d.get(f);this.getIntersectsOp().intersects(g.getBounds(),h)&&(g instanceof Je?this.query(h,g,p):g instanceof Xe?p.add(g.getItem()):it.shouldNeverReachHere())}},ii.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},ii.prototype.getRoot=function(){return this.build(),this._root},ii.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=this.removeItem(n,r);if(o)return!0;for(var s=null,a=n.getChildBoundables().iterator();a.hasNext();){var l=a.next();if(this.getIntersectsOp().intersects(l.getBounds(),i)&&l instanceof Je&&(o=this.remove(i,l,r))){s=l;break}}return null!==s&&s.getChildBoundables().isEmpty()&&n.getChildBoundables().remove(s),o}},ii.prototype.createHigherLevels=function(t,e){it.isTrue(!t.isEmpty());var i=this.createParentBoundables(t,e+1);return 1===i.size()?i.get(0):this.createHigherLevels(i,e+1)},ii.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var i=e.next();if(i instanceof Je){var n=this.depth(i);n>t&&(t=n)}}return t+1}},ii.prototype.createParentBoundables=function(t,e){it.isTrue(!t.isEmpty());var i=new wt;i.add(this.createNode(e));var n=new wt(t);ti.sort(n,this.getComparator());for(var r=n.iterator();r.hasNext();){var o=r.next();this.lastNode(i).getChildBoundables().size()===this.getNodeCapacity()&&i.add(this.createNode(e)),this.lastNode(i).addChildBoundable(o)}return i},ii.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},ii.prototype.interfaces_=function(){return[e]},ii.prototype.getClass=function(){return ii},ii.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},ni.IntersectsOp.get=function(){return ri},ni.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},ni.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(ii,ni);var ri=u((function(){}),"rn"),oi=u((function(){}),"on");oi.prototype.distance=function(t,e){},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi};var si=function(t){function i(e){e=e||i.DEFAULT_NODE_CAPACITY,t.call(this,e)}u(i,"n"),t&&(i.__proto__=t),(i.prototype=Object.create(t&&t.prototype)).constructor=i;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return i.prototype.createParentBoundablesFromVerticalSlices=function(t,e){it.isTrue(t.length>0);for(var i=new wt,n=0;n<t.length;n++)i.addAll(this.createParentBoundablesFromVerticalSlice(t[n],e));return i},i.prototype.createNode=function(t){return new ai(t)},i.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},i.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],i=arguments[1];if(e.isNull())return null;t.prototype.insert.call(this,e,i)},i.prototype.getIntersectsOp=function(){return i.intersectsOp},i.prototype.verticalSlices=function(t,e){for(var i=Math.trunc(Math.ceil(t.size()/e)),n=new Array(e).fill(null),r=t.iterator(),o=0;o<e;o++){n[o]=new wt;for(var s=0;r.hasNext()&&s<i;){var a=r.next();n[o].add(a),s++}}return n},i.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var i=arguments[0],n=arguments[1];t.prototype.query.call(this,i,n)}else if(3===arguments.length)if(L(arguments[2],Ze)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var r=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,r,o,s)}else if(L(arguments[2],Et)&&arguments[0]instanceof Object&&arguments[1]instanceof Je){var a=arguments[0],l=arguments[1],u=arguments[2];t.prototype.query.call(this,a,l,u)}},i.prototype.getComparator=function(){return i.yComparator},i.prototype.createParentBoundablesFromVerticalSlice=function(e,i){return t.prototype.createParentBoundables.call(this,e,i)},i.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],i=arguments[1];return t.prototype.remove.call(this,e,i)}return t.prototype.remove.apply(this,arguments)},i.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},i.prototype.createParentBoundables=function(t,e){it.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new wt(t);ti.sort(r,i.xComparator);var o=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(o,e)},i.prototype.nearestNeighbour=function(){if(1===arguments.length){if(L(arguments[0],oi)){var t=arguments[0],e=new ei(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ei){var n=arguments[0];return this.nearestNeighbour(n,_.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof i&&L(arguments[1],oi)){var r=arguments[0],o=arguments[1],s=new ei(this.getRoot(),r.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof ei&&"number"==typeof arguments[1]){var a=arguments[0],l=arguments[1],u=null,h=new Ke;for(h.add(a);!h.isEmpty()&&l>0;){var c=h.poll(),p=c.getDistance();if(p>=l)break;c.isLeaves()?(l=p,u=c):c.expandToQueue(h,l)}return[u.getBoundable(0).getItem(),u.getBoundable(1).getItem()]}}else if(3===arguments.length){var d=arguments[0],f=arguments[1],g=arguments[2],m=new Xe(d,f),v=new ei(this.getRoot(),m,g);return this.nearestNeighbour(v)[0]}},i.prototype.interfaces_=function(){return[Qe,e]},i.prototype.getClass=function(){return i},i.centreX=function(t){return i.avg(t.getMinX(),t.getMaxX())},i.avg=function(t,e){return(t+e)/2},i.centreY=function(t){return i.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return ai},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,n){return t.compareDoubles(i.centreX(e.getBounds()),i.centreX(n.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[w]},compare:function(e,n){return t.compareDoubles(i.centreY(e.getBounds()),i.centreY(n.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(i,n),i}(ii),ai=function(t){function e(){var e=arguments[0];t.call(this,e)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var i=e.next();null===t?t=new Y(i.getBounds()):t.expandToInclude(i.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Je),li=u((function(){}),"un");li.prototype.interfaces_=function(){return[]},li.prototype.getClass=function(){return li},li.relativeSign=function(t,e){return t<e?-1:t>e?1:0},li.compare=function(t,e,i){if(e.equals2D(i))return 0;var n=li.relativeSign(e.x,i.x),r=li.relativeSign(e.y,i.y);switch(t){case 0:return li.compareValue(n,r);case 1:return li.compareValue(r,n);case 2:return li.compareValue(r,-n);case 3:return li.compareValue(-n,r);case 4:return li.compareValue(-n,-r);case 5:return li.compareValue(-r,-n);case 6:return li.compareValue(-r,n);case 7:return li.compareValue(n,-r)}return it.shouldNeverReachHere("invalid octant value"),0},li.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ui=u((function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._segString=t,this.coord=new A(e),this.segmentIndex=i,this._segmentOctant=n,this._isInterior=!e.equals2D(t.getCoordinate(i))}),"ln");ui.prototype.getCoordinate=function(){return this.coord},ui.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ui.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:li.compare(this._segmentOctant,this.coord,e.coord)},ui.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ui.prototype.isInterior=function(){return this._isInterior},ui.prototype.interfaces_=function(){return[M]},ui.prototype.getClass=function(){return ui};var hi=u((function(){this._nodeMap=new p,this._edge=null;var t=arguments[0];this._edge=t}),"cn");hi.prototype.getSplitCoordinates=function(){var t=new St;this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next();this.addEdgeCoordinates(i,n,t),i=n}return t.toCoordinateArray()},hi.prototype.addCollapsedNodes=function(){var t=new wt;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var i=e.next().intValue();this.add(this._edge.getCoordinate(i),i)}},hi.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},hi.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var i=this._edge.getCoordinate(e),n=this._edge.getCoordinate(e+2);i.equals2D(n)&&t.add(new R(e+1))}},hi.prototype.addEdgeCoordinates=function(t,e,i){var n=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);i.add(new A(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)i.add(this._edge.getCoordinate(o));r&&i.add(new A(e.coord))},hi.prototype.iterator=function(){return this._nodeMap.values().iterator()},hi.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n);t.add(r),i=n}},hi.prototype.findCollapseIndex=function(t,e,i){if(!t.coord.equals2D(e.coord))return!1;var n=e.segmentIndex-t.segmentIndex;return e.isInterior()||n--,1===n&&(i[0]=t.segmentIndex+1,!0)},hi.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),i=this.iterator(),n=i.next();i.hasNext();){var r=i.next();this.findCollapseIndex(n,r,e)&&t.add(new R(e[0])),n=r}},hi.prototype.getEdge=function(){return this._edge},hi.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},hi.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this._edge.getCoordinate(e.segmentIndex),r=e.isInterior()||!e.coord.equals2D(n);r||i--;var o=new Array(i).fill(null),s=0;o[s++]=new A(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this._edge.getCoordinate(a);return r&&(o[s]=new A(e.coord)),new fi(o,this._edge.getData())},hi.prototype.add=function(t,e){var i=new ui(this._edge,t,e,this._edge.getSegmentOctant(e)),n=this._nodeMap.get(i);return null!==n?(it.isTrue(n.coord.equals2D(t),"Found equal nodes with different coordinates"),n):(this._nodeMap.put(i,i),i)},hi.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),i=t.get(0).getCoordinate(0);if(!i.equals2D(e[0]))throw new tt("bad split edge start point at "+i);var n=t.get(t.size()-1).getCoordinates(),r=n[n.length-1];if(!r.equals2D(e[e.length-1]))throw new tt("bad split edge end point at "+r)},hi.prototype.interfaces_=function(){return[]},hi.prototype.getClass=function(){return hi};var ci=u((function(){}),"pn");ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new x("Cannot compute the octant for point ( "+t+", "+e+" )");var i=Math.abs(t),n=Math.abs(e);return t>=0?e>=0?i>=n?0:1:i>=n?7:6:e>=0?i>=n?3:2:i>=n?4:5}if(arguments[0]instanceof A&&arguments[1]instanceof A){var r=arguments[0],o=arguments[1],s=o.x-r.x,a=o.y-r.y;if(0===s&&0===a)throw new x("Cannot compute the octant for two identical points "+r);return ci.octant(s,a)}};var pi=u((function(){}),"hn");pi.prototype.getCoordinates=function(){},pi.prototype.size=function(){},pi.prototype.getCoordinate=function(t){},pi.prototype.isClosed=function(){},pi.prototype.setData=function(t){},pi.prototype.getData=function(){},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi};var di=u((function(){}),"fn");di.prototype.addIntersection=function(t,e){},di.prototype.interfaces_=function(){return[pi]},di.prototype.getClass=function(){return di};var fi=u((function(){this._nodeList=new hi(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}),"gn");fi.prototype.getCoordinates=function(){return this._pts},fi.prototype.size=function(){return this._pts.length},fi.prototype.getCoordinate=function(t){return this._pts[t]},fi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},fi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},fi.prototype.setData=function(t){this._data=t},fi.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ci.octant(t,e)},fi.prototype.getData=function(){return this._data},fi.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[3],o=new A(i.getIntersection(r));this.addIntersection(o,n)}},fi.prototype.toString=function(){return $.toLineString(new ue(this._pts))},fi.prototype.getNodeList=function(){return this._nodeList},fi.prototype.addIntersectionNode=function(t,e){var i=e,n=i+1;if(n<this._pts.length){var r=this._pts[n];t.equals2D(r)&&(i=n)}return this._nodeList.add(t,i)},fi.prototype.addIntersections=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},fi.prototype.interfaces_=function(){return[di]},fi.prototype.getClass=function(){return fi},fi.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new wt;return fi.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var i=arguments[0],n=arguments[1],r=i.iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};var gi=u((function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new A,this.p1=new A;else if(1===arguments.length){var t=arguments[0];this.p0=new A(t.p0),this.p1=new A(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3];this.p0=new A(e,i),this.p1=new A(n,r)}}),"dn"),mi={serialVersionUID:{configurable:!0}};gi.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},gi.prototype.orientationIndex=function(){if(arguments[0]instanceof gi){var t=arguments[0],e=lt.orientationIndex(this.p0,this.p1,t.p0),i=lt.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&i>=0||e<=0&&i<=0?Math.max(e,i):0}if(arguments[0]instanceof A){var n=arguments[0];return lt.orientationIndex(this.p0,this.p1,n)}},gi.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},gi.prototype.isVertical=function(){return this.p0.x===this.p1.x},gi.prototype.equals=function(t){if(!(t instanceof gi))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},gi.prototype.intersection=function(t){var e=new ot;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},gi.prototype.project=function(){if(arguments[0]instanceof A){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new A(t);var e=this.projectionFactor(t),i=new A;return i.x=this.p0.x+e*(this.p1.x-this.p0.x),i.y=this.p0.y+e*(this.p1.y-this.p0.y),i}if(arguments[0]instanceof gi){var n=arguments[0],r=this.projectionFactor(n.p0),o=this.projectionFactor(n.p1);if(r>=1&&o>=1||r<=0&&o<=0)return null;var s=this.project(n.p0);r<0&&(s=this.p0),r>1&&(s=this.p1);var a=this.project(n.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new gi(s,a)}},gi.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},gi.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},gi.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},gi.prototype.distancePerpendicular=function(t){return lt.distancePointLinePerpendicular(t,this.p0,this.p1)},gi.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},gi.prototype.midPoint=function(){return gi.midPoint(this.p0,this.p1)},gi.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,i=this.p1.y-this.p0.y,n=e*e+i*i;return n<=0?_.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*i)/n},gi.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var i=new Array(2).fill(null),n=_.MAX_VALUE,r=null,o=this.closestPoint(t.p0);n=o.distance(t.p0),i[0]=o,i[1]=t.p0;var s=this.closestPoint(t.p1);(r=s.distance(t.p1))<n&&(n=r,i[0]=s,i[1]=t.p1);var a=t.closestPoint(this.p0);(r=a.distance(this.p0))<n&&(n=r,i[0]=this.p0,i[1]=a);var l=t.closestPoint(this.p1);return(r=l.distance(this.p1))<n&&(n=r,i[0]=this.p1,i[1]=l),i},gi.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return e>0&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},gi.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},gi.prototype.getLength=function(){return this.p0.distance(this.p1)},gi.prototype.compareTo=function(t){var e=t,i=this.p0.compareTo(e.p0);return 0!==i?i:this.p1.compareTo(e.p1)},gi.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},gi.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},gi.prototype.lineIntersection=function(t){try{return H.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof G))throw t}return null},gi.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},gi.prototype.pointAlongOffset=function(t,e){var i=this.p0.x+t*(this.p1.x-this.p0.x),n=this.p0.y+t*(this.p1.y-this.p0.y),r=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(r*r+o*o),a=0,l=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*r/s,l=e*o/s}return new A(i-l,n+a)},gi.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=i.x,this.p1.y=i.y}},gi.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||_.isNaN(e))&&(e=1),e},gi.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},gi.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},gi.prototype.distance=function(){if(arguments[0]instanceof gi){var t=arguments[0];return lt.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof A){var e=arguments[0];return lt.distancePointLine(e,this.p0,this.p1)}},gi.prototype.pointAlong=function(t){var e=new A;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},gi.prototype.hashCode=function(){var t=_.doubleToLongBits(this.p0.x);t^=31*_.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),i=_.doubleToLongBits(this.p1.x);return i^=31*_.doubleToLongBits(this.p1.y),e^Math.trunc(i)^Math.trunc(i>>32)},gi.prototype.interfaces_=function(){return[M,e]},gi.prototype.getClass=function(){return gi},gi.midPoint=function(t,e){return new A((t.x+e.x)/2,(t.y+e.y)/2)},mi.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(gi,mi);var vi=u((function(){this.tempEnv1=new Y,this.tempEnv2=new Y,this._overlapSeg1=new gi,this._overlapSeg2=new gi}),"_n");vi.prototype.overlap=function(){if(2!==arguments.length&&4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];t.getLineSegment(e,this._overlapSeg1),i.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},vi.prototype.interfaces_=function(){return[]},vi.prototype.getClass=function(){return vi};var yi=u((function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this._pts=t,this._start=e,this._end=i,this._context=n}),"mn");yi.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},yi.prototype.computeSelect=function(t,e,i,n){var r=this._pts[e],o=this._pts[i];if(n.tempEnv1.init(r,o),i-e==1)return n.select(this,e),null;if(!t.intersects(n.tempEnv1))return null;var s=Math.trunc((e+i)/2);e<s&&this.computeSelect(t,e,s,n),s<i&&this.computeSelect(t,s,i,n)},yi.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,i=this._start;i<=this._end;i++)t[e++]=this._pts[i];return t},yi.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},yi.prototype.setId=function(t){this._id=t},yi.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},yi.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Y(t,e)}return this._env},yi.prototype.getEndIndex=function(){return this._end},yi.prototype.getStartIndex=function(){return this._start},yi.prototype.getContext=function(){return this._context},yi.prototype.getId=function(){return this._id},yi.prototype.computeOverlapsInternal=function(t,e,i,n,r,o){var s=this._pts[t],a=this._pts[e],l=i._pts[n],u=i._pts[r];if(e-t==1&&r-n==1)return o.overlap(this,t,i,n),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var h=Math.trunc((t+e)/2),c=Math.trunc((n+r)/2);t<h&&(n<c&&this.computeOverlapsInternal(t,h,i,n,c,o),c<r&&this.computeOverlapsInternal(t,h,i,c,r,o)),h<e&&(n<c&&this.computeOverlapsInternal(h,e,i,n,c,o),c<r&&this.computeOverlapsInternal(h,e,i,c,r,o))},yi.prototype.interfaces_=function(){return[]},yi.prototype.getClass=function(){return yi};var xi=u((function(){}),"vn");xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi},xi.getChainStartIndices=function(t){var e=0,i=new wt;i.add(new R(e));do{var n=xi.findChainEnd(t,e);i.add(new R(n)),e=n}while(e<t.length-1);return xi.toIntArray(i)},xi.findChainEnd=function(t,e){for(var i=e;i<t.length-1&&t[i].equals2D(t[i+1]);)i++;if(i>=t.length-1)return t.length-1;for(var n=Ue.quadrant(t[i],t[i+1]),r=e+1;r<t.length&&(t[r-1].equals2D(t[r])||Ue.quadrant(t[r-1],t[r])===n);)r++;return r-1},xi.getChains=function(){if(1===arguments.length){var t=arguments[0];return xi.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],i=arguments[1],n=new wt,r=xi.getChainStartIndices(e),o=0;o<r.length-1;o++){var s=new yi(e,r[o],r[o+1],i);n.add(s)}return n}},xi.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var _i=u((function(){}),"In");_i.prototype.computeNodes=function(t){},_i.prototype.getNodedSubstrings=function(){},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};var bi=u((function(){if(this._segInt=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}}),"En");bi.prototype.setSegmentIntersector=function(t){this._segInt=t},bi.prototype.interfaces_=function(){return[_i]},bi.prototype.getClass=function(){return bi};var Mi=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new wt,this._index=new si,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}u(e,"e"),t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var i={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return fi.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=xi.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var i=e.next();i.setId(this._idCounter++),this._index.insert(i.getEnvelope(),i),this._monoChains.add(i)}},e.prototype.computeNodes=function(t){this._nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=new Ei(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var i=e.next(),n=this._index.query(i.getEnvelope()).iterator();n.hasNext();){var r=n.next();if(r.getId()>i.getId()&&(i.computeOverlaps(r,t),this._nOverlaps++),this._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},i.SegmentOverlapAction.get=function(){return Ei},Object.defineProperties(e,i),e}(bi),Ei=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],i=arguments[1],n=arguments[2],r=arguments[3],o=e.getContext(),s=n.getContext();this._si.processIntersections(o,i,s,r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(vi),wi=u((function t(){if(this._quadrantSegments=t.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=t.CAP_ROUND,this._joinStyle=t.JOIN_ROUND,this._mitreLimit=t.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=t.DEFAULT_SIMPLIFY_FACTOR,0!==arguments.length)if(1===arguments.length){var e=arguments[0];this.setQuadrantSegments(e)}else if(2===arguments.length){var i=arguments[0],n=arguments[1];this.setQuadrantSegments(i),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(o),this.setJoinStyle(s),this.setMitreLimit(a)}}),"t"),Ai={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};wi.prototype.getEndCapStyle=function(){return this._endCapStyle},wi.prototype.isSingleSided=function(){return this._isSingleSided},wi.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=wi.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=wi.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==wi.JOIN_ROUND&&(this._quadrantSegments=wi.DEFAULT_QUADRANT_SEGMENTS)},wi.prototype.getJoinStyle=function(){return this._joinStyle},wi.prototype.setJoinStyle=function(t){this._joinStyle=t},wi.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},wi.prototype.getSimplifyFactor=function(){return this._simplifyFactor},wi.prototype.getQuadrantSegments=function(){return this._quadrantSegments},wi.prototype.setEndCapStyle=function(t){this._endCapStyle=t},wi.prototype.getMitreLimit=function(){return this._mitreLimit},wi.prototype.setMitreLimit=function(t){this._mitreLimit=t},wi.prototype.setSingleSided=function(t){this._isSingleSided=t},wi.prototype.interfaces_=function(){return[]},wi.prototype.getClass=function(){return wi},wi.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},Ai.CAP_ROUND.get=function(){return 1},Ai.CAP_FLAT.get=function(){return 2},Ai.CAP_SQUARE.get=function(){return 3},Ai.JOIN_ROUND.get=function(){return 1},Ai.JOIN_MITRE.get=function(){return 2},Ai.JOIN_BEVEL.get=function(){return 3},Ai.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},Ai.DEFAULT_MITRE_LIMIT.get=function(){return 5},Ai.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(wi,Ai);var Si=u((function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=lt.COUNTERCLOCKWISE,this._inputLine=t||null}),"Ln"),Ti={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};Si.prototype.isDeletable=function(t,e,i,n){var r=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[i];return!!this.isConcave(r,o,s)&&!!this.isShallow(r,o,s,n)&&this.isShallowSampled(r,o,t,i,n)},Si.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e),n=!1;i<this._inputLine.length;){var r=!1;this.isDeletable(t,e,i,this._distanceTol)&&(this._isDeleted[e]=Si.DELETE,r=!0,n=!0),t=r?i:e,e=this.findNextNonDeletedIndex(t),i=this.findNextNonDeletedIndex(e)}return n},Si.prototype.isShallowConcavity=function(t,e,i,n){return lt.computeOrientation(t,e,i)===this._angleOrientation&&lt.distancePointLine(e,t,i)<n},Si.prototype.isShallowSampled=function(t,e,i,n,r){var o=Math.trunc((n-i)/Si.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var s=i;s<n;s+=o)if(!this.isShallow(t,e,this._inputLine[s],r))return!1;return!0},Si.prototype.isConcave=function(t,e,i){return lt.computeOrientation(t,e,i)===this._angleOrientation},Si.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=lt.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var e=!1;do{e=this.deleteShallowConcavities()}while(e);return this.collapseLine()},Si.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===Si.DELETE;)e++;return e},Si.prototype.isShallow=function(t,e,i,n){return lt.distancePointLine(e,t,i)<n},Si.prototype.collapseLine=function(){for(var t=new St,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==Si.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},Si.prototype.interfaces_=function(){return[]},Si.prototype.getClass=function(){return Si},Si.simplify=function(t,e){return new Si(t).simplify(e)},Ti.INIT.get=function(){return 0},Ti.DELETE.get=function(){return 1},Ti.KEEP.get=function(){return 1},Ti.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(Si,Ti);var Ci=u((function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new wt}),"wn"),Pi={COORDINATE_ARRAY_TYPE:{configurable:!0}};Ci.prototype.getCoordinates=function(){return this._ptList.toArray(Ci.COORDINATE_ARRAY_TYPE)},Ci.prototype.setPrecisionModel=function(t){this._precisionModel=t},Ci.prototype.addPt=function(t){var e=new A(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},Ci.prototype.revere=function(){},Ci.prototype.addPts=function(t,e){if(e)for(var i=0;i<t.length;i++)this.addPt(t[i]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},Ci.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},Ci.prototype.toString=function(){return(new ye).createLineString(this.getCoordinates()).toString()},Ci.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new A(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},Ci.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci},Pi.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(Ci,Pi);var Ii=u((function(){}),"Tn"),Li={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ii.toDegrees=function(t){return 180*t/Math.PI},Ii.normalize=function(t){for(;t>Math.PI;)t-=Ii.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ii.PI_TIMES_2;return t},Ii.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],i=arguments[1],n=i.x-e.x,r=i.y-e.y;return Math.atan2(r,n)}},Ii.isAcute=function(t,e,i){var n=t.x-e.x,r=t.y-e.y;return n*(i.x-e.x)+r*(i.y-e.y)>0},Ii.isObtuse=function(t,e,i){var n=t.x-e.x,r=t.y-e.y;return n*(i.x-e.x)+r*(i.y-e.y)<0},Ii.interiorAngle=function(t,e,i){var n=Ii.angle(e,t),r=Ii.angle(e,i);return Math.abs(r-n)},Ii.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ii.PI_TIMES_2;t>=Ii.PI_TIMES_2&&(t=0)}else{for(;t>=Ii.PI_TIMES_2;)t-=Ii.PI_TIMES_2;t<0&&(t=0)}return t},Ii.angleBetween=function(t,e,i){var n=Ii.angle(e,t),r=Ii.angle(e,i);return Ii.diff(n,r)},Ii.diff=function(t,e){var i=null;return(i=t<e?e-t:t-e)>Math.PI&&(i=2*Math.PI-i),i},Ii.toRadians=function(t){return t*Math.PI/180},Ii.getTurn=function(t,e){var i=Math.sin(e-t);return i>0?Ii.COUNTERCLOCKWISE:i<0?Ii.CLOCKWISE:Ii.NONE},Ii.angleBetweenOriented=function(t,e,i){var n=Ii.angle(e,t),r=Ii.angle(e,i)-n;return r<=-Math.PI?r+Ii.PI_TIMES_2:r>Math.PI?r-Ii.PI_TIMES_2:r},Li.PI_TIMES_2.get=function(){return 2*Math.PI},Li.PI_OVER_2.get=function(){return Math.PI/2},Li.PI_OVER_4.get=function(){return Math.PI/4},Li.COUNTERCLOCKWISE.get=function(){return lt.COUNTERCLOCKWISE},Li.CLOCKWISE.get=function(){return lt.CLOCKWISE},Li.NONE.get=function(){return lt.COLLINEAR},Object.defineProperties(Ii,Li);var Oi=u((function t(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new gi,this._seg1=new gi,this._offset0=new gi,this._offset1=new gi,this._side=0,this._hasNarrowConcaveAngle=!1;var e=arguments[0],i=arguments[1],n=arguments[2];this._precisionModel=e,this._bufParams=i,this._li=new ot,this._filletAngleQuantum=Math.PI/2/i.getQuadrantSegments(),i.getQuadrantSegments()>=8&&i.getJoinStyle()===wi.JOIN_ROUND&&(this._closingSegLengthFactor=t.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}),"t"),Ni={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};Oi.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var i=lt.computeOrientation(this._s0,this._s1,this._s2),n=i===lt.CLOCKWISE&&this._side===Se.LEFT||i===lt.COUNTERCLOCKWISE&&this._side===Se.RIGHT;0===i?this.addCollinear(e):n?this.addOutsideTurn(i,e):this.addInsideTurn(i,e)},Oi.prototype.addLineEndCap=function(t,e){var i=new gi(t,e),n=new gi;this.computeOffsetSegment(i,Se.LEFT,this._distance,n);var r=new gi;this.computeOffsetSegment(i,Se.RIGHT,this._distance,r);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case wi.CAP_ROUND:this._segList.addPt(n.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,lt.CLOCKWISE,this._distance),this._segList.addPt(r.p1);break;case wi.CAP_FLAT:this._segList.addPt(n.p1),this._segList.addPt(r.p1);break;case wi.CAP_SQUARE:var l=new A;l.x=Math.abs(this._distance)*Math.cos(a),l.y=Math.abs(this._distance)*Math.sin(a);var u=new A(n.p1.x+l.x,n.p1.y+l.y),h=new A(r.p1.x+l.x,r.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(h)}},Oi.prototype.getCoordinates=function(){return this._segList.getCoordinates()},Oi.prototype.addMitreJoin=function(t,e,i,n){var r=!0,o=null;try{o=H.intersection(e.p0,e.p1,i.p0,i.p1),(n<=0?1:o.distance(t)/Math.abs(n))>this._bufParams.getMitreLimit()&&(r=!1)}catch(t){if(!(t instanceof G))throw t;o=new A(0,0),r=!1}r?this._segList.addPt(o):this.addLimitedMitreJoin(e,i,n,this._bufParams.getMitreLimit())},Oi.prototype.addFilletCorner=function(t,e,i,n,r){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),l=i.x-t.x,u=i.y-t.y,h=Math.atan2(u,l);n===lt.CLOCKWISE?a<=h&&(a+=2*Math.PI):a>=h&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,h,n,r),this._segList.addPt(i)},Oi.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*Oi.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===wi.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===wi.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},Oi.prototype.createSquare=function(t){this._segList.addPt(new A(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new A(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new A(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new A(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},Oi.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},Oi.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},Oi.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},Oi.prototype.initSideSegments=function(t,e,i){this._s1=t,this._s2=e,this._side=i,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,i,this._distance,this._offset1)},Oi.prototype.addLimitedMitreJoin=function(t,e,i,n){var r=this._seg0.p1,o=Ii.angle(r,this._seg0.p0),s=Ii.angleBetweenOriented(this._seg0.p0,r,this._seg1.p1)/2,a=Ii.normalize(o+s),l=Ii.normalize(a+Math.PI),u=n*i,h=i-u*Math.abs(Math.sin(s)),c=r.x+u*Math.cos(l),p=r.y+u*Math.sin(l),d=new A(c,p),f=new gi(r,d),g=f.pointAlongOffset(1,h),m=f.pointAlongOffset(1,-h);this._side===Se.LEFT?(this._segList.addPt(g),this._segList.addPt(m)):(this._segList.addPt(m),this._segList.addPt(g))},Oi.prototype.computeOffsetSegment=function(t,e,i,n){var r=e===Se.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),l=r*i*o/a,u=r*i*s/a;n.p0.x=t.p0.x-u,n.p0.y=t.p0.y+l,n.p1.x=t.p1.x-u,n.p1.y=t.p1.y+l},Oi.prototype.addFilletArc=function(t,e,i,n,r){var o=n===lt.CLOCKWISE?-1:1,s=Math.abs(e-i),a=Math.trunc(s/this._filletAngleQuantum+.5);if(a<1)return null;for(var l=s/a,u=0,h=new A;u<s;){var c=e+o*u;h.x=t.x+r*Math.cos(c),h.y=t.y+r*Math.sin(c),this._segList.addPt(h),u+=l}},Oi.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*Oi.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var i=new A((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(i);var n=new A((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},Oi.prototype.createCircle=function(t){var e=new A(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},Oi.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},Oi.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new Ci,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*Oi.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},Oi.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),this._li.getIntersectionNum()>=2&&(this._bufParams.getJoinStyle()===wi.JOIN_BEVEL||this._bufParams.getJoinStyle()===wi.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,lt.CLOCKWISE,this._distance))},Oi.prototype.closeRing=function(){this._segList.closeRing()},Oi.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},Oi.prototype.interfaces_=function(){return[]},Oi.prototype.getClass=function(){return Oi},Ni.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Ni.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Ni.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Ni.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(Oi,Ni);var Di=u((function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e}),"Mn");Di.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var i=e<0,n=Math.abs(e),r=this.getSegGen(n);t.length<=1?this.computePointCurve(t[0],r):this.computeOffsetCurve(t,i,r);var o=r.getCoordinates();return i&&Tt.reverse(o),o},Di.prototype.computeSingleSidedBufferCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance);if(e){i.addSegments(t,!0);var r=Si.simplify(t,-n),o=r.length-1;i.initSideSegments(r[o],r[o-1],Se.LEFT),i.addFirstSegment();for(var s=o-2;s>=0;s--)i.addNextSegment(r[s],!0)}else{i.addSegments(t,!1);var a=Si.simplify(t,n),l=a.length-1;i.initSideSegments(a[0],a[1],Se.LEFT),i.addFirstSegment();for(var u=2;u<=l;u++)i.addNextSegment(a[u],!0)}i.addLastSegment(),i.closeRing()},Di.prototype.computeRingBufferCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance);e===Se.RIGHT&&(n=-n);var r=Si.simplify(t,n),o=r.length-1;i.initSideSegments(r[o-1],r[0],e);for(var s=1;s<=o;s++){var a=1!==s;i.addNextSegment(r[s],a)}i.closeRing()},Di.prototype.computeLineBufferCurve=function(t,e){var i=this.simplifyTolerance(this._distance),n=Si.simplify(t,i),r=n.length-1;e.initSideSegments(n[0],n[1],Se.LEFT);for(var o=2;o<=r;o++)e.addNextSegment(n[o],!0);e.addLastSegment(),e.addLineEndCap(n[r-1],n[r]);var s=Si.simplify(t,-i),a=s.length-1;e.initSideSegments(s[a],s[a-1],Se.LEFT);for(var l=a-2;l>=0;l--)e.addNextSegment(s[l],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Di.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case wi.CAP_ROUND:e.createCircle(t);break;case wi.CAP_SQUARE:e.createSquare(t)}},Di.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided()||0===e)return null;var i=Math.abs(e),n=this.getSegGen(i);if(t.length<=1)this.computePointCurve(t[0],n);else if(this._bufParams.isSingleSided()){var r=e<0;this.computeSingleSidedBufferCurve(t,r,n)}else this.computeLineBufferCurve(t,n);return n.getCoordinates()},Di.prototype.getBufferParameters=function(){return this._bufParams},Di.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Di.prototype.getRingCurve=function(t,e,i){if(this._distance=i,t.length<=2)return this.getLineCurve(t,i);if(0===i)return Di.copyCoordinates(t);var n=this.getSegGen(i);return this.computeRingBufferCurve(t,e,n),n.getCoordinates()},Di.prototype.computeOffsetCurve=function(t,e,i){var n=this.simplifyTolerance(this._distance);if(e){var r=Si.simplify(t,-n),o=r.length-1;i.initSideSegments(r[o],r[o-1],Se.LEFT),i.addFirstSegment();for(var s=o-2;s>=0;s--)i.addNextSegment(r[s],!0)}else{var a=Si.simplify(t,n),l=a.length-1;i.initSideSegments(a[0],a[1],Se.LEFT),i.addFirstSegment();for(var u=2;u<=l;u++)i.addNextSegment(a[u],!0)}i.addLastSegment()},Di.prototype.getSegGen=function(t){return new Oi(this._precisionModel,this._bufParams,t)},Di.prototype.interfaces_=function(){return[]},Di.prototype.getClass=function(){return Di},Di.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),i=0;i<e.length;i++)e[i]=new A(t[i]);return e};var Ri=u((function(){this._subgraphs=null,this._seg=new gi,this._cga=new lt;var t=arguments[0];this._subgraphs=t}),"An"),qi={DepthSegment:{configurable:!0}};Ri.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new wt,i=this._subgraphs.iterator();i.hasNext();){var n=i.next(),r=n.getEnvelope();t.y<r.getMinY()||t.y>r.getMaxY()||this.findStabbedSegments(t,n.getDirectedEdges(),e)}return e}if(3===arguments.length)if(L(arguments[2],Et)&&arguments[0]instanceof A&&arguments[1]instanceof je){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=s.getEdge().getCoordinates(),u=0;u<l.length-1;u++)if(this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),!(Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||lt.computeOrientation(this._seg.p0,this._seg.p1,o)===lt.RIGHT)){var h=s.getDepth(Se.LEFT);this._seg.p0.equals(l[u])||(h=s.getDepth(Se.RIGHT));var c=new Bi(this._seg,h);a.add(c)}}else if(L(arguments[2],Et)&&arguments[0]instanceof A&&L(arguments[1],Et))for(var p=arguments[0],d=arguments[1],f=arguments[2],g=d.iterator();g.hasNext();){var m=g.next();m.isForward()&&this.findStabbedSegments(p,m,f)}},Ri.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:ti.min(e)._leftDepth},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},qi.DepthSegment.get=function(){return Bi},Object.defineProperties(Ri,qi);var Bi=u((function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new gi(t),this._leftDepth=e}),"Gn");Bi.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var i=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==i||0!=(i=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?i:this._upwardSeg.compareTo(e._upwardSeg)},Bi.prototype.compareX=function(t,e){var i=t.p0.compareTo(e.p0);return 0!==i?i:t.p1.compareTo(e.p1)},Bi.prototype.toString=function(){return this._upwardSeg.toString()},Bi.prototype.interfaces_=function(){return[M]},Bi.prototype.getClass=function(){return Bi};var ki=u((function(t,e,i){this.p0=t||null,this.p1=e||null,this.p2=i||null}),"qn");ki.prototype.area=function(){return ki.area(this.p0,this.p1,this.p2)},ki.prototype.signedArea=function(){return ki.signedArea(this.p0,this.p1,this.p2)},ki.prototype.interpolateZ=function(t){if(null===t)throw new x("Supplied point is null.");return ki.interpolateZ(t,this.p0,this.p1,this.p2)},ki.prototype.longestSideLength=function(){return ki.longestSideLength(this.p0,this.p1,this.p2)},ki.prototype.isAcute=function(){return ki.isAcute(this.p0,this.p1,this.p2)},ki.prototype.circumcentre=function(){return ki.circumcentre(this.p0,this.p1,this.p2)},ki.prototype.area3D=function(){return ki.area3D(this.p0,this.p1,this.p2)},ki.prototype.centroid=function(){return ki.centroid(this.p0,this.p1,this.p2)},ki.prototype.inCentre=function(){return ki.inCentre(this.p0,this.p1,this.p2)},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.area=function(t,e,i){return Math.abs(((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2)},ki.signedArea=function(t,e,i){return((i.x-t.x)*(e.y-t.y)-(e.x-t.x)*(i.y-t.y))/2},ki.det=function(t,e,i,n){return t*n-e*i},ki.interpolateZ=function(t,e,i,n){var r=e.x,o=e.y,s=i.x-r,a=n.x-r,l=i.y-o,u=n.y-o,h=s*u-a*l,c=t.x-r,p=t.y-o,d=(u*c-a*p)/h,f=(-l*c+s*p)/h;return e.z+d*(i.z-e.z)+f*(n.z-e.z)},ki.longestSideLength=function(t,e,i){var n=t.distance(e),r=e.distance(i),o=i.distance(t),s=n;return r>s&&(s=r),o>s&&(s=o),s},ki.isAcute=function(t,e,i){return!!Ii.isAcute(t,e,i)&&!!Ii.isAcute(e,i,t)&&!!Ii.isAcute(i,t,e)},ki.circumcentre=function(t,e,i){var n=i.x,r=i.y,o=t.x-n,s=t.y-r,a=e.x-n,l=e.y-r,u=2*ki.det(o,s,a,l),h=ki.det(s,o*o+s*s,l,a*a+l*l),c=ki.det(o,o*o+s*s,a,a*a+l*l);return new A(n-h/u,r+c/u)},ki.perpendicularBisector=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=new H(t.x+i/2,t.y+n/2,1),o=new H(t.x-n+i/2,t.y+i+n/2,1);return new H(r,o)},ki.angleBisector=function(t,e,i){var n=e.distance(t),r=n/(n+e.distance(i)),o=i.x-t.x,s=i.y-t.y;return new A(t.x+r*o,t.y+r*s)},ki.area3D=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,o=e.z-t.z,s=i.x-t.x,a=i.y-t.y,l=i.z-t.z,u=r*l-o*a,h=o*s-n*l,c=n*a-r*s,p=u*u+h*h+c*c;return Math.sqrt(p)/2},ki.centroid=function(t,e,i){var n=(t.x+e.x+i.x)/3,r=(t.y+e.y+i.y)/3;return new A(n,r)},ki.inCentre=function(t,e,i){var n=e.distance(i),r=t.distance(i),o=t.distance(e),s=n+r+o,a=(n*t.x+r*e.x+o*i.x)/s,l=(n*t.y+r*e.y+o*i.y)/s;return new A(a,l)};var Fi=u((function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new wt;var t=arguments[0],e=arguments[1],i=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=i}),"Bn");Fi.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,P.EXTERIOR,P.INTERIOR)},Fi.prototype.addPolygon=function(t){var e=this._distance,i=Se.LEFT;this._distance<0&&(e=-this._distance,i=Se.RIGHT);var n=t.getExteriorRing(),r=Tt.removeRepeatedPoints(n.getCoordinates());if(this._distance<0&&this.isErodedCompletely(n,this._distance)||this._distance<=0&&r.length<3)return null;this.addPolygonRing(r,e,i,P.EXTERIOR,P.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var s=t.getInteriorRingN(o),a=Tt.removeRepeatedPoints(s.getCoordinates());this._distance>0&&this.isErodedCompletely(s,-this._distance)||this.addPolygonRing(a,e,Se.opposite(i),P.INTERIOR,P.EXTERIOR)}},Fi.prototype.isTriangleErodedCompletely=function(t,e){var i=new ki(t[0],t[1],t[2]),n=i.inCentre();return lt.distancePointLine(n,i.p0,i.p1)<Math.abs(e)},Fi.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Tt.removeRepeatedPoints(t.getCoordinates()),i=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(i,P.EXTERIOR,P.INTERIOR)},Fi.prototype.addCurve=function(t,e,i){if(null===t||t.length<2)return null;var n=new fi(t,new Ne(0,P.BOUNDARY,e,i));this._curveList.add(n)},Fi.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Fi.prototype.addPolygonRing=function(t,e,i,n,r){if(0===e&&t.length<ie.MINIMUM_VALID_SIZE)return null;var o=n,s=r;t.length>=ie.MINIMUM_VALID_SIZE&&lt.isCCW(t)&&(o=r,s=n,i=Se.opposite(i));var a=this._curveBuilder.getRingCurve(t,i,e);this.addCurve(a,o,s)},Fi.prototype.add=function(t){if(t.isEmpty())return null;t instanceof te?this.addPolygon(t):t instanceof Zt?this.addLineString(t):t instanceof Jt?this.addPoint(t):(t instanceof ee||t instanceof Gt||t instanceof ne||t instanceof jt)&&this.addCollection(t)},Fi.prototype.isErodedCompletely=function(t,e){var i=t.getCoordinates();if(i.length<4)return e<0;if(4===i.length)return this.isTriangleErodedCompletely(i,e);var n=t.getEnvelopeInternal(),r=Math.min(n.getHeight(),n.getWidth());return e<0&&2*Math.abs(e)>r},Fi.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};var Ui=u((function(){}),"Vn");Ui.prototype.locate=function(t){},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui};var zi=u((function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()}),"Un");zi.prototype.next=function(){if(this._atStart)return this._atStart=!1,zi.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new n;var t=this._parent.getGeometryN(this._index++);return t instanceof jt?(this._subcollectionIterator=new zi(t),this._subcollectionIterator.next()):t},zi.prototype.remove=function(){throw new Error(this.getClass().getName())},zi.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},zi.prototype.interfaces_=function(){return[Mt]},zi.prototype.getClass=function(){return zi},zi.isAtomic=function(t){return!(t instanceof jt)};var Vi=u((function(){this._geom=null;var t=arguments[0];this._geom=t}),"zn");Vi.prototype.locate=function(t){return Vi.locate(t,this._geom)},Vi.prototype.interfaces_=function(){return[Ui]},Vi.prototype.getClass=function(){return Vi},Vi.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&lt.isPointInRing(t,e.getCoordinates())},Vi.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var i=e.getExteriorRing();if(!Vi.isPointInRing(t,i))return!1;for(var n=0;n<e.getNumInteriorRing();n++){var r=e.getInteriorRingN(n);if(Vi.isPointInRing(t,r))return!1}return!0},Vi.containsPoint=function(t,e){if(e instanceof te)return Vi.containsPointInPolygon(t,e);if(e instanceof jt)for(var i=new zi(e);i.hasNext();){var n=i.next();if(n!==e&&Vi.containsPoint(t,n))return!0}return!1},Vi.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:Vi.containsPoint(t,e)?P.INTERIOR:P.EXTERIOR};var ji=u((function(){this._edgeMap=new p,this._edgeList=null,this._ptInAreaLocation=[P.NONE,P.NONE]}),"Xn");ji.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),i=e-1;return 0===e&&(i=this._edgeList.size()-1),this._edgeList.get(i)},ji.prototype.propagateSideLabels=function(t){for(var e=P.NONE,i=this.iterator();i.hasNext();){var n=i.next().getLabel();n.isArea(t)&&n.getLocation(t,Se.LEFT)!==P.NONE&&(e=n.getLocation(t,Se.LEFT))}if(e===P.NONE)return null;for(var r=e,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getLabel();if(a.getLocation(t,Se.ON)===P.NONE&&a.setLocation(t,Se.ON,r),a.isArea(t)){var l=a.getLocation(t,Se.LEFT),u=a.getLocation(t,Se.RIGHT);if(u!==P.NONE){if(u!==r)throw new Pe("side location conflict",s.getCoordinate());l===P.NONE&&it.shouldNeverReachHere("found single null side (at "+s.getCoordinate()+")"),r=l}else it.isTrue(a.getLocation(t,Se.LEFT)===P.NONE,"found single null side"),a.setLocation(t,Se.RIGHT,r),a.setLocation(t,Se.LEFT,r)}}},ji.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},ji.prototype.print=function(t){W.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},ji.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},ji.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var i=e.size()-1,n=e.get(i).getLabel().getLocation(t,Se.LEFT);it.isTrue(n!==P.NONE,"Found unlabelled area edge");for(var r=n,o=this.iterator();o.hasNext();){var s=o.next().getLabel();it.isTrue(s.isArea(t),"Found non-area edge");var a=s.getLocation(t,Se.LEFT),l=s.getLocation(t,Se.RIGHT);if(a===l||l!==r)return!1;r=a}return!0},ji.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},ji.prototype.iterator=function(){return this.getEdges().iterator()},ji.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new wt(this._edgeMap.values())),this._edgeList},ji.prototype.getLocation=function(t,e,i){return this._ptInAreaLocation[t]===P.NONE&&(this._ptInAreaLocation[t]=Vi.locate(e,i[t].getGeometry())),this._ptInAreaLocation[t]},ji.prototype.toString=function(){var t=new D;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var i=e.next();t.append(i),t.append("\n")}return t.toString()},ji.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},ji.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],i=this.iterator();i.hasNext();)for(var n=i.next().getLabel(),r=0;r<2;r++)n.isLine(r)&&n.getLocation(r)===P.BOUNDARY&&(e[r]=!0);for(var o=this.iterator();o.hasNext();)for(var s=o.next(),a=s.getLabel(),l=0;l<2;l++)if(a.isAnyNull(l)){var u=P.NONE;if(e[l])u=P.EXTERIOR;else{var h=s.getCoordinate();u=this.getLocation(l,h,t)}a.setAllLocationsIfNull(l,u)}},ji.prototype.getDegree=function(){return this._edgeMap.size()},ji.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji};var Gi=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,i=this._SCANNING_FOR_INCOMING,n=0;n<this._resultAreaEdgeList.size();n++){var r=this._resultAreaEdgeList.get(n),o=r.getSym();if(r.getLabel().isArea())switch(null===t&&r.isInResult()&&(t=r),i){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,i=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!r.isInResult())continue;e.setNext(r),i=this._SCANNING_FOR_INCOMING}}if(i===this._LINKING_TO_OUTGOING){if(null===t)throw new Pe("no outgoing dirEdge found",this.getCoordinate());it.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var i=t.get(0);if(1===e)return i;var n=t.get(e-1),r=i.getQuadrant(),o=n.getQuadrant();return Ue.isNorthern(r)&&Ue.isNorthern(o)?i:Ue.isNorthern(r)||Ue.isNorthern(o)?0!==i.getDy()?i:0!==n.getDy()?n:(it.shouldNeverReachHere("found two horizontal edges incident on node"),null):n},e.prototype.print=function(t){W.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var i=e.next();t.print("out "),i.print(t),t.println(),t.print("in "),i.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new wt;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var i=e.next().getLabel();i.setAllLocationsIfNull(0,t.getLocation(0)),i.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,i=this._edgeList.size()-1;i>=0;i--){var n=this._edgeList.get(i),r=n.getSym();null===e&&(e=r),null!==t&&r.setNext(t),t=n}e.setNext(t)},e.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),i=t.getDepth(Se.LEFT),n=t.getDepth(Se.RIGHT),r=this.computeDepths(e+1,this._edgeList.size(),i);if(this.computeDepths(0,e,r)!==n)throw new Pe("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[0],s=arguments[1],a=arguments[2],l=o;l<s;l++){var u=this._edgeList.get(l);u.setEdgeDepths(Se.RIGHT,a),a=u.getDepth(Se.LEFT)}return a}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,i=null,n=this._SCANNING_FOR_INCOMING,r=this._resultAreaEdgeList.size()-1;r>=0;r--){var o=this._resultAreaEdgeList.get(r),s=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),n){case this._SCANNING_FOR_INCOMING:if(s.getEdgeRing()!==t)continue;i=s,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;i.setNextMin(o),n=this._SCANNING_FOR_INCOMING}}n===this._LINKING_TO_OUTGOING&&(it.isTrue(null!==e,"found null for first outgoing dirEdge"),it.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),i.setNextMin(e))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var i=arguments[0],n=0,r=this.iterator();r.hasNext();)r.next().getEdgeRing()===i&&n++;return n}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=P.NONE,e=this.iterator();e.hasNext();){var i=e.next(),n=i.getSym();if(!i.isLineEdge()){if(i.isInResult()){t=P.INTERIOR;break}if(n.isInResult()){t=P.EXTERIOR;break}}}if(t===P.NONE)return null;for(var r=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(r===P.INTERIOR):(s.isInResult()&&(r=P.EXTERIOR),a.isInResult()&&(r=P.INTERIOR))}},e.prototype.computeLabelling=function(e){t.prototype.computeLabelling.call(this,e),this._label=new Ne(P.NONE);for(var i=this.iterator();i.hasNext();)for(var n=i.next().getEdge().getLabel(),r=0;r<2;r++){var o=n.getLocation(r);o!==P.INTERIOR&&o!==P.BOUNDARY||this._label.setLocation(r,P.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(ji),Wi=function(t){function e(){t.apply(this,arguments)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new ke(t,new Gi)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ge),Hi=u((function t(){this._pts=null,this._orientation=null;var e=arguments[0];this._pts=e,this._orientation=t.orientation(e)}),"t");Hi.prototype.compareTo=function(t){var e=t;return Hi.compareOriented(this._pts,this._orientation,e._pts,e._orientation)},Hi.prototype.interfaces_=function(){return[M]},Hi.prototype.getClass=function(){return Hi},Hi.orientation=function(t){return 1===Tt.increasingDirection(t)},Hi.compareOriented=function(t,e,i,n){for(var r=e?1:-1,o=n?1:-1,s=e?t.length:-1,a=n?i.length:-1,l=e?0:t.length-1,u=n?0:i.length-1;;){var h=t[l].compareTo(i[u]);if(0!==h)return h;var c=(l+=r)===s,p=(u+=o)===a;if(c&&!p)return-1;if(!c&&p)return 1;if(c&&p)return 0}};var Yi=u((function(){this._edges=new wt,this._ocaMap=new p}),"Hn");Yi.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var i=this._edges.get(e);e>0&&t.print(","),t.print("(");for(var n=i.getCoordinates(),r=0;r<n.length;r++)r>0&&t.print(","),t.print(n[r].x+" "+n[r].y);t.println(")")}t.print(")  ")},Yi.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Yi.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Yi.prototype.iterator=function(){return this._edges.iterator()},Yi.prototype.getEdges=function(){return this._edges},Yi.prototype.get=function(t){return this._edges.get(t)},Yi.prototype.findEqualEdge=function(t){var e=new Hi(t.getCoordinates());return this._ocaMap.get(e)},Yi.prototype.add=function(t){this._edges.add(t);var e=new Hi(t.getCoordinates());this._ocaMap.put(e,t)},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi};var Xi=u((function(){}),"Wn");Xi.prototype.processIntersections=function(t,e,i,n){},Xi.prototype.isDone=function(){},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi};var Ki=u((function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t}),"Kn");Ki.prototype.isTrivialIntersection=function(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(Ki.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.size()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},Ki.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},Ki.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},Ki.prototype.getLineIntersector=function(){return this._li},Ki.prototype.hasProperIntersection=function(){return this._hasProper},Ki.prototype.processIntersections=function(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},Ki.prototype.hasIntersection=function(){return this._hasIntersection},Ki.prototype.isDone=function(){return!1},Ki.prototype.hasInteriorIntersection=function(){return this._hasInterior},Ki.prototype.interfaces_=function(){return[Xi]},Ki.prototype.getClass=function(){return Ki},Ki.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var Zi=u((function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],i=arguments[2];this.coord=new A(t),this.segmentIndex=e,this.dist=i}),"Jn");Zi.prototype.getSegmentIndex=function(){return this.segmentIndex},Zi.prototype.getCoordinate=function(){return this.coord},Zi.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Zi.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},Zi.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Zi.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Zi.prototype.getDistance=function(){return this.dist},Zi.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Zi.prototype.interfaces_=function(){return[M]},Zi.prototype.getClass=function(){return Zi};var Qi=u((function(){this._nodeMap=new p,this.edge=null;var t=arguments[0];this.edge=t}),"Qn");Qi.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Qi.prototype.iterator=function(){return this._nodeMap.values().iterator()},Qi.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),i=e.next();e.hasNext();){var n=e.next(),r=this.createSplitEdge(i,n);t.add(r),i=n}},Qi.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Qi.prototype.createSplitEdge=function(t,e){var i=e.segmentIndex-t.segmentIndex+2,n=this.edge.pts[e.segmentIndex],r=e.dist>0||!e.coord.equals2D(n);r||i--;var o=new Array(i).fill(null),s=0;o[s++]=new A(t.coord);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)o[s++]=this.edge.pts[a];return r&&(o[s]=e.coord),new nn(o,new Ne(this.edge._label))},Qi.prototype.add=function(t,e,i){var n=new Zi(t,e,i),r=this._nodeMap.get(n);return null!==r?r:(this._nodeMap.put(n,n),n)},Qi.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi};var Ji=u((function(){}),"Zn");Ji.prototype.getChainStartIndices=function(t){var e=0,i=new wt;i.add(new R(e));do{var n=this.findChainEnd(t,e);i.add(new R(n)),e=n}while(e<t.length-1);return Ji.toIntArray(i)},Ji.prototype.findChainEnd=function(t,e){for(var i=Ue.quadrant(t[e],t[e+1]),n=e+1;n<t.length&&Ue.quadrant(t[n-1],t[n])===i;)n++;return n-1},Ji.prototype.interfaces_=function(){return[]},Ji.prototype.getClass=function(){return Ji},Ji.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),i=0;i<e.length;i++)e[i]=t.get(i).intValue();return e};var $i=u((function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Y,this.env2=new Y;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Ji;this.startIndex=e.getChainStartIndices(this.pts)}),"$n");$i.prototype.getCoordinates=function(){return this.pts},$i.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e>i?e:i},$i.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,i=this.pts[this.startIndex[t+1]].x;return e<i?e:i},$i.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],i=arguments[2],n=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[i],e.startIndex[i+1],n)}else if(6===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4],u=arguments[5],h=this.pts[r],c=this.pts[o],p=s.pts[a],d=s.pts[l];if(o-r==1&&l-a==1)return u.addIntersections(this.e,r,s.e,a),null;if(this.env1.init(h,c),this.env2.init(p,d),!this.env1.intersects(this.env2))return null;var f=Math.trunc((r+o)/2),g=Math.trunc((a+l)/2);r<f&&(a<g&&this.computeIntersectsForChain(r,f,s,a,g,u),g<l&&this.computeIntersectsForChain(r,f,s,g,l,u)),f<o&&(a<g&&this.computeIntersectsForChain(f,o,s,a,g,u),g<l&&this.computeIntersectsForChain(f,o,s,g,l,u))}},$i.prototype.getStartIndexes=function(){return this.startIndex},$i.prototype.computeIntersects=function(t,e){for(var i=0;i<this.startIndex.length-1;i++)for(var n=0;n<t.startIndex.length-1;n++)this.computeIntersectsForChain(i,t,n,e)},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i};var tn=u((function t(){this._depth=Array(2).fill().map((function(){return Array(3)}));for(var e=0;e<2;e++)for(var i=0;i<3;i++)this._depth[e][i]=t.NULL_VALUE}),"t"),en={NULL_VALUE:{configurable:!0}};tn.prototype.getDepth=function(t,e){return this._depth[t][e]},tn.prototype.setDepth=function(t,e,i){this._depth[t][e]=i},tn.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==tn.NULL_VALUE)return!1;return!0}if(1===arguments.length){var i=arguments[0];return this._depth[i][1]===tn.NULL_VALUE}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this._depth[n][r]===tn.NULL_VALUE}},tn.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var i=1;i<3;i++){var n=0;this._depth[t][i]>e&&(n=1),this._depth[t][i]=n}}},tn.prototype.getDelta=function(t){return this._depth[t][Se.RIGHT]-this._depth[t][Se.LEFT]},tn.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?P.EXTERIOR:P.INTERIOR},tn.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},tn.prototype.add=function(){if(1===arguments.length)for(var t=arguments[0],e=0;e<2;e++)for(var i=1;i<3;i++){var n=t.getLocation(e,i);n!==P.EXTERIOR&&n!==P.INTERIOR||(this.isNull(e,i)?this._depth[e][i]=tn.depthAtLocation(n):this._depth[e][i]+=tn.depthAtLocation(n))}else if(3===arguments.length){var r=arguments[0],o=arguments[1];arguments[2]===P.INTERIOR&&this._depth[r][o]++}},tn.prototype.interfaces_=function(){return[]},tn.prototype.getClass=function(){return tn},tn.depthAtLocation=function(t){return t===P.EXTERIOR?0:t===P.INTERIOR?1:tn.NULL_VALUE},en.NULL_VALUE.get=function(){return-1},Object.defineProperties(tn,en);var nn=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new Qi(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new tn,this._depthDelta=0,1===arguments.length){var i=arguments[0];e.call(this,i,null)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.pts=n,this._label=r}}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new e(t,Ne.toLineLabel(this._label))},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){if(!(t instanceof e))return!1;var i=t;if(this.pts.length!==i.pts.length)return!1;for(var n=!0,r=!0,o=this.pts.length,s=0;s<this.pts.length;s++)if(this.pts[s].equals2D(i.pts[s])||(n=!1),this.pts[s].equals2D(i.pts[--o])||(r=!1),!n&&!r)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new $i(this)),this._mce},e.prototype.getEnvelope=function(){if(null===this._env){this._env=new Y;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},e.prototype.addIntersection=function(t,e,i,n){var r=new A(t.getIntersection(n)),o=e,s=t.getEdgeDistance(i,n),a=o+1;if(a<this.pts.length){var l=this.pts[a];r.equals2D(l)&&(o=a,s=0)}this.eiList.add(r,o,s)},e.prototype.toString=function(){var t=new D;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},e.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++)this.addIntersection(t,e,i,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],i=arguments[1];i.setAtLeastIfValid(e.getLocation(0,Se.ON),e.getLocation(1,Se.ON),1),e.isArea()&&(i.setAtLeastIfValid(e.getLocation(0,Se.LEFT),e.getLocation(1,Se.LEFT),2),i.setAtLeastIfValid(e.getLocation(0,Se.RIGHT),e.getLocation(1,Se.RIGHT),2))},e}(Be),rn=u((function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Yi,this._bufParams=t||null}),"ii");rn.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},rn.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Ne(t.getLabel())).flip(),i.merge(n);var r=rn.depthDelta(n),o=e.getDepthDelta()+r;e.setDepthDelta(o)}else this._edgeList.add(t),t.setDepthDelta(rn.depthDelta(t.getLabel()))},rn.prototype.buildSubgraphs=function(t,e){for(var i=new wt,n=t.iterator();n.hasNext();){var r=n.next(),o=r.getRightmostCoordinate(),s=new Ri(i).getDepth(o);r.computeDepth(s),r.findResultEdges(),i.add(r),e.add(r.getDirectedEdges(),r.getNodes())}},rn.prototype.createSubgraphs=function(t){for(var e=new wt,i=t.getNodes().iterator();i.hasNext();){var n=i.next();if(!n.isVisited()){var r=new Le;r.create(n),e.add(r)}}return ti.sort(e,ti.reverseOrder()),e},rn.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},rn.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new Mi,i=new ot;return i.setPrecisionModel(t),e.setSegmentIntersector(new Ki(i)),e},rn.prototype.buffer=function(t,e){var i=this._workingPrecisionModel;null===i&&(i=t.getPrecisionModel()),this._geomFact=t.getFactory();var n=new Di(i,this._bufParams),r=new Fi(t,e,n).getCurves();if(r.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(r,i),this._graph=new We(new Wi),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),s=new He(this._geomFact);this.buildSubgraphs(o,s);var a=s.getPolygons();return a.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(a)},rn.prototype.computeNodedEdges=function(t,e){var i=this.getNoder(e);i.computeNodes(t);for(var n=i.getNodedSubstrings().iterator();n.hasNext();){var r=n.next(),o=r.getCoordinates();if(2!==o.length||!o[0].equals2D(o[1])){var s=r.getData(),a=new nn(r.getCoordinates(),new Ne(s));this.insertUniqueEdge(a)}}},rn.prototype.setNoder=function(t){this._workingNoder=t},rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn},rn.depthDelta=function(t){var e=t.getLocation(0,Se.LEFT),i=t.getLocation(0,Se.RIGHT);return e===P.INTERIOR&&i===P.EXTERIOR?1:e===P.EXTERIOR&&i===P.INTERIOR?-1:0},rn.convertSegStrings=function(t){for(var e=new ye,i=new wt;t.hasNext();){var n=t.next(),r=e.createLineString(n.getCoordinates());i.add(r)}return e.buildGeometry(i)};var on=u((function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=arguments[3];this._noder=i,this._scaleFactor=n,this._offsetX=r,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}}),"ri");on.prototype.rescale=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],n=0;n<i.length;n++)i[n].x=i[n].x/this._scaleFactor+this._offsetX,i[n].y=i[n].y/this._scaleFactor+this._offsetY;2===i.length&&i[0].equals2D(i[1])&&W.out.println(i)}},on.prototype.scale=function(){if(L(arguments[0],bt)){for(var t=arguments[0],e=new wt,i=t.iterator();i.hasNext();){var n=i.next();e.add(new fi(this.scale(n.getCoordinates()),n.getData()))}return e}if(arguments[0]instanceof Array){for(var r=arguments[0],o=new Array(r.length).fill(null),s=0;s<r.length;s++)o[s]=new A(Math.round((r[s].x-this._offsetX)*this._scaleFactor),Math.round((r[s].y-this._offsetY)*this._scaleFactor),r[s].z);return Tt.removeRepeatedPoints(o)}},on.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},on.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},on.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},on.prototype.interfaces_=function(){return[_i]},on.prototype.getClass=function(){return on};var sn=u((function(){this._li=new ot,this._segStrings=null;var t=arguments[0];this._segStrings=t}),"oi"),an={fact:{configurable:!0}};sn.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var i=arguments[0],n=arguments[1].iterator();n.hasNext();)for(var r=n.next().getCoordinates(),o=1;o<r.length-1;o++)if(r[o].equals(i))throw new tt("found endpt/interior pt intersection at index "+o+" :pt "+i)},sn.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),i=this._segStrings.iterator();i.hasNext();){var n=i.next();this.checkInteriorIntersections(e,n)}else if(2===arguments.length)for(var r=arguments[0],o=arguments[1],s=r.getCoordinates(),a=o.getCoordinates(),l=0;l<s.length-1;l++)for(var u=0;u<a.length-1;u++)this.checkInteriorIntersections(r,l,o,u);else if(4===arguments.length){var h=arguments[0],c=arguments[1],p=arguments[2],d=arguments[3];if(h===p&&c===d)return null;var f=h.getCoordinates()[c],g=h.getCoordinates()[c+1],m=p.getCoordinates()[d],v=p.getCoordinates()[d+1];if(this._li.computeIntersection(f,g,m,v),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,f,g)||this.hasInteriorIntersection(this._li,m,v)))throw new tt("found non-noded intersection at "+f+"-"+g+" and "+m+"-"+v)}},sn.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},sn.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var i=arguments[0].getCoordinates(),n=0;n<i.length-2;n++)this.checkCollapse(i[n],i[n+1],i[n+2])},sn.prototype.hasInteriorIntersection=function(t,e,i){for(var n=0;n<t.getIntersectionNum();n++){var r=t.getIntersection(n);if(!r.equals(e)&&!r.equals(i))return!0}return!1},sn.prototype.checkCollapse=function(t,e,i){if(t.equals(i))throw new tt("found non-noded collapse at "+sn.fact.createLineString([t,e,i]))},sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn},an.fact.get=function(){return new ye},Object.defineProperties(sn,an);var ln=u((function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],i=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=i,e<=0)throw new x("Scale factor must be non-zero");1!==e&&(this._pt=new A(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new A,this._p1Scaled=new A),this.initCorners(this._pt)}),"ai"),un={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};ln.prototype.intersectsScaled=function(t,e){var i=Math.min(t.x,e.x),n=Math.max(t.x,e.x),r=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<i||this._minx>n||this._maxy<r||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return it.isTrue(!(s&&a),"Found bad envelope test"),a},ln.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new A(this._maxx,this._maxy),this._corner[1]=new A(this._minx,this._maxy),this._corner[2]=new A(this._minx,this._miny),this._corner[3]=new A(this._maxx,this._miny)},ln.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},ln.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},ln.prototype.getCoordinate=function(){return this._originalPt},ln.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},ln.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=ln.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Y(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},ln.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},ln.prototype.intersectsToleranceSquare=function(t,e){var i=!1,n=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(i=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||i&&n||t.equals(this._pt)||e.equals(this._pt)))))},ln.prototype.addSnappedNode=function(t,e){var i=t.getCoordinate(e),n=t.getCoordinate(e+1);return!!this.intersects(i,n)&&(t.addIntersection(this.getCoordinate(),e),!0)},ln.prototype.interfaces_=function(){return[]},ln.prototype.getClass=function(){return ln},un.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(ln,un);var hn=u((function(){this.tempEnv1=new Y,this.selectedSegment=new gi}),"li");hn.prototype.select=function(){if(1!==arguments.length&&2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn};var cn=u((function(){this._index=null;var t=arguments[0];this._index=t}),"ci"),pn={HotPixelSnapAction:{configurable:!0}};cn.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2],r=e.getSafeEnvelope(),o=new dn(e,i,n);return this._index.query(r,{interfaces_:function(){return[Ze]},visitItem:function(t){t.select(r,o)}}),o.isNodeAdded()}},cn.prototype.interfaces_=function(){return[]},cn.prototype.getClass=function(){return cn},pn.HotPixelSnapAction.get=function(){return dn},Object.defineProperties(cn,pn);var dn=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],i=arguments[1],n=arguments[2];this._hotPixel=e,this._parentEdge=i,this._hotPixelVertexIndex=n}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],i=arguments[1],n=e.getContext();if(null!==this._parentEdge&&n===this._parentEdge&&i===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hn),fn=u((function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new wt}),"fi");fn.prototype.processIntersections=function(t,e,i,n){if(t===i&&e===n)return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];if(this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)}},fn.prototype.isDone=function(){return!1},fn.prototype.getInteriorIntersections=function(){return this._interiorIntersections},fn.prototype.interfaces_=function(){return[Xi]},fn.prototype.getClass=function(){return fn};var gn=u((function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new ot,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()}),"gi");gn.prototype.checkCorrectness=function(t){var e=fi.getNodedSubstrings(t),i=new sn(e);try{i.checkValid()}catch(t){if(!(t instanceof j))throw t;t.printStackTrace()}},gn.prototype.getNodedSubstrings=function(){return fi.getNodedSubstrings(this._nodedSegStrings)},gn.prototype.snapRound=function(t,e){var i=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(i),this.computeVertexSnaps(t)},gn.prototype.findInteriorIntersections=function(t,e){var i=new fn(e);return this._noder.setSegmentIntersector(i),this._noder.computeNodes(t),i.getInteriorIntersections()},gn.prototype.computeVertexSnaps=function(){if(L(arguments[0],bt))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof fi)for(var i=arguments[0],n=i.getCoordinates(),r=0;r<n.length;r++){var o=new ln(n[r],this._scaleFactor,this._li);this._pointSnapper.snap(o,i,r)&&i.addIntersection(n[r],r)}},gn.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new Mi,this._pointSnapper=new cn(this._noder.getIndex()),this.snapRound(t,this._li)},gn.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=new ln(i,this._scaleFactor,this._li);this._pointSnapper.snap(n)}},gn.prototype.interfaces_=function(){return[_i]},gn.prototype.getClass=function(){return gn};var mn=u((function(){if(this._argGeom=null,this._distance=null,this._bufParams=new wi,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this._argGeom=e,this._bufParams=i}}),"di"),vn={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};mn.prototype.bufferFixedPrecision=function(t){var e=new on(new gn(new fe(1)),t.getScale()),i=new rn(this._bufParams);i.setWorkingPrecisionModel(t),i.setNoder(e),this._resultGeometry=i.buffer(this._argGeom,this._distance)},mn.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=mn.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(e){if(!(e instanceof Pe))throw e;t._saveException=e}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var i=arguments[0],n=mn.precisionScaleFactor(this._argGeom,this._distance,i),r=new fe(n);this.bufferFixedPrecision(r)}},mn.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===fe.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},mn.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},mn.prototype.bufferOriginalPrecision=function(){try{var t=new rn(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof tt))throw t;this._saveException=t}},mn.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},mn.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new mn(t).getResultGeometry(e)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var i=arguments[0],n=arguments[1],r=arguments[2],o=new mn(i);return o.setQuadrantSegments(r),o.getResultGeometry(n)}if(arguments[2]instanceof wi&&arguments[0]instanceof ct&&"number"==typeof arguments[1]){var s=arguments[0],a=arguments[1],l=arguments[2];return new mn(s,l).getResultGeometry(a)}}else if(4===arguments.length){var u=arguments[0],h=arguments[1],c=arguments[2],p=arguments[3],d=new mn(u);return d.setQuadrantSegments(c),d.setEndCapStyle(p),d.getResultGeometry(h)}},mn.precisionScaleFactor=function(t,e,i){var n=t.getEnvelopeInternal(),r=O.max(Math.abs(n.getMaxX()),Math.abs(n.getMaxY()),Math.abs(n.getMinX()),Math.abs(n.getMinY()))+2*(e>0?e:0),o=i-Math.trunc(Math.log(r)/Math.log(10)+1);return Math.pow(10,o)},vn.CAP_ROUND.get=function(){return wi.CAP_ROUND},vn.CAP_BUTT.get=function(){return wi.CAP_FLAT},vn.CAP_FLAT.get=function(){return wi.CAP_FLAT},vn.CAP_SQUARE.get=function(){return wi.CAP_SQUARE},vn.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(mn,vn);var yn=u((function(){this._pt=[new A,new A],this._distance=_.NaN,this._isNull=!0}),"_i");yn.prototype.getCoordinates=function(){return this._pt},yn.prototype.getCoordinate=function(t){return this._pt[t]},yn.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n<this._distance&&this.initialize(e,i,n)}},yn.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},yn.prototype.getDistance=function(){return this._distance},yn.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n>this._distance&&this.initialize(e,i,n)}},yn.prototype.interfaces_=function(){return[]},yn.prototype.getClass=function(){return yn};var xn=u((function(){}),"mi");xn.prototype.interfaces_=function(){return[]},xn.prototype.getClass=function(){return xn},xn.computeDistance=function(){if(arguments[2]instanceof yn&&arguments[0]instanceof Zt&&arguments[1]instanceof A)for(var t=arguments[0],e=arguments[1],i=arguments[2],n=t.getCoordinates(),r=new gi,o=0;o<n.length-1;o++){r.setCoordinates(n[o],n[o+1]);var s=r.closestPoint(e);i.setMinimum(s,e)}else if(arguments[2]instanceof yn&&arguments[0]instanceof te&&arguments[1]instanceof A){var a=arguments[0],l=arguments[1],u=arguments[2];xn.computeDistance(a.getExteriorRing(),l,u);for(var h=0;h<a.getNumInteriorRing();h++)xn.computeDistance(a.getInteriorRingN(h),l,u)}else if(arguments[2]instanceof yn&&arguments[0]instanceof ct&&arguments[1]instanceof A){var c=arguments[0],p=arguments[1],d=arguments[2];if(c instanceof Zt)xn.computeDistance(c,p,d);else if(c instanceof te)xn.computeDistance(c,p,d);else if(c instanceof jt)for(var f=c,g=0;g<f.getNumGeometries();g++){var m=f.getGeometryN(g);xn.computeDistance(m,p,d)}else d.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof yn&&arguments[0]instanceof gi&&arguments[1]instanceof A){var v=arguments[0],y=arguments[1],x=arguments[2],_=v.closestPoint(y);x.setMinimum(_,y)}};var _n=u((function(t){this._maxPtDist=new yn,this._inputGeom=t||null}),"vi"),bn={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};_n.prototype.computeMaxMidpointDistance=function(t){var e=new En(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_n.prototype.computeMaxVertexDistance=function(t){var e=new Mn(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},_n.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},_n.prototype.getDistancePoints=function(){return this._maxPtDist},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},bn.MaxPointDistanceFilter.get=function(){return Mn},bn.MaxMidpointDistanceFilter.get=function(){return En},Object.defineProperties(_n,bn);var Mn=u((function(t){this._maxPtDist=new yn,this._minPtDist=new yn,this._geom=t||null}),"Ei");Mn.prototype.filter=function(t){this._minPtDist.initialize(),xn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Mn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Mn.prototype.interfaces_=function(){return[ft]},Mn.prototype.getClass=function(){return Mn};var En=u((function(t){this._maxPtDist=new yn,this._minPtDist=new yn,this._geom=t||null}),"xi");En.prototype.filter=function(t,e){if(0===e)return null;var i=t.getCoordinate(e-1),n=t.getCoordinate(e),r=new A((i.x+n.x)/2,(i.y+n.y)/2);this._minPtDist.initialize(),xn.computeDistance(this._geom,r,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},En.prototype.isDone=function(){return!1},En.prototype.isGeometryChanged=function(){return!1},En.prototype.getMaxPointDistance=function(){return this._maxPtDist},En.prototype.interfaces_=function(){return[Vt]},En.prototype.getClass=function(){return En};var wn=u((function(t){this._comps=t||null}),"Ni");wn.prototype.filter=function(t){t instanceof te&&this._comps.add(t)},wn.prototype.interfaces_=function(){return[zt]},wn.prototype.getClass=function(){return wn},wn.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return wn.getPolygons(t,new wt)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof te?i.add(e):e instanceof jt&&e.apply(new wn(i)),i}};var An=u((function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],i=arguments[1];this._lines=e,this._isForcedToLineString=i}}),"Ci");An.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof ie){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof Zt&&this._lines.add(t)},An.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},An.prototype.interfaces_=function(){return[ht]},An.prototype.getClass=function(){return An},An.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(An.getLines(t))}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().buildGeometry(An.getLines(e,i))}},An.getLines=function(){if(1===arguments.length){var t=arguments[0];return An.getLines(t,!1)}if(2===arguments.length){if(L(arguments[0],bt)&&L(arguments[1],bt)){for(var e=arguments[0],i=arguments[1],n=e.iterator();n.hasNext();){var r=n.next();An.getLines(r,i)}return i}if(arguments[0]instanceof ct&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new wt;return o.apply(new An(a,s)),a}if(arguments[0]instanceof ct&&L(arguments[1],bt)){var l=arguments[0],u=arguments[1];return l instanceof Zt?u.add(l):l.apply(new An(u)),u}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&L(arguments[0],bt)&&L(arguments[1],bt)){for(var h=arguments[0],c=arguments[1],p=arguments[2],d=h.iterator();d.hasNext();){var f=d.next();An.getLines(f,c,p)}return c}if("boolean"==typeof arguments[2]&&arguments[0]instanceof ct&&L(arguments[1],bt)){var g=arguments[0],m=arguments[1],v=arguments[2];return g.apply(new An(m,v)),m}}};var Sn=u((function(){if(this._boundaryRule=gt.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var t=arguments[0];if(null===t)throw new x("Rule must be non-null");this._boundaryRule=t}}),"Si");Sn.prototype.locateInternal=function(){if(arguments[0]instanceof A&&arguments[1]instanceof te){var t=arguments[0],e=arguments[1];if(e.isEmpty())return P.EXTERIOR;var i=e.getExteriorRing(),n=this.locateInPolygonRing(t,i);if(n===P.EXTERIOR)return P.EXTERIOR;if(n===P.BOUNDARY)return P.BOUNDARY;for(var r=0;r<e.getNumInteriorRing();r++){var o=e.getInteriorRingN(r),s=this.locateInPolygonRing(t,o);if(s===P.INTERIOR)return P.EXTERIOR;if(s===P.BOUNDARY)return P.BOUNDARY}return P.INTERIOR}if(arguments[0]instanceof A&&arguments[1]instanceof Zt){var a=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(a))return P.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!a.equals(u[0])&&!a.equals(u[u.length-1])?lt.isOnLine(a,u)?P.INTERIOR:P.EXTERIOR:P.BOUNDARY}if(arguments[0]instanceof A&&arguments[1]instanceof Jt){var h=arguments[0];return arguments[1].getCoordinate().equals2D(h)?P.INTERIOR:P.EXTERIOR}},Sn.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?lt.locatePointInRing(t,e.getCoordinates()):P.EXTERIOR},Sn.prototype.intersects=function(t,e){return this.locate(t,e)!==P.EXTERIOR},Sn.prototype.updateLocationInfo=function(t){t===P.INTERIOR&&(this._isIn=!0),t===P.BOUNDARY&&this._numBoundaries++},Sn.prototype.computeLocation=function(t,e){if(e instanceof Jt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof Zt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof te)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Gt)for(var i=e,n=0;n<i.getNumGeometries();n++){var r=i.getGeometryN(n);this.updateLocationInfo(this.locateInternal(t,r))}else if(e instanceof ne)for(var o=e,s=0;s<o.getNumGeometries();s++){var a=o.getGeometryN(s);this.updateLocationInfo(this.locateInternal(t,a))}else if(e instanceof jt)for(var l=new zi(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},Sn.prototype.locate=function(t,e){return e.isEmpty()?P.EXTERIOR:e instanceof Zt||e instanceof te?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?P.BOUNDARY:this._numBoundaries>0||this._isIn?P.INTERIOR:P.EXTERIOR)},Sn.prototype.interfaces_=function(){return[]},Sn.prototype.getClass=function(){return Sn};var Tn=u((function t(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var e=arguments[0],i=arguments[1];t.call(this,e,t.INSIDE_AREA,i)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._component=n,this._segIndex=r,this._pt=o}}),"t"),Cn={INSIDE_AREA:{configurable:!0}};Tn.prototype.isInsideArea=function(){return this._segIndex===Tn.INSIDE_AREA},Tn.prototype.getCoordinate=function(){return this._pt},Tn.prototype.getGeometryComponent=function(){return this._component},Tn.prototype.getSegmentIndex=function(){return this._segIndex},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn},Cn.INSIDE_AREA.get=function(){return-1},Object.defineProperties(Tn,Cn);var Pn=u((function(t){this._pts=t||null}),"wi");Pn.prototype.filter=function(t){t instanceof Jt&&this._pts.add(t)},Pn.prototype.interfaces_=function(){return[zt]},Pn.prototype.getClass=function(){return Pn},Pn.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Jt?ti.singletonList(t):Pn.getPoints(t,new wt)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e instanceof Jt?i.add(e):e instanceof jt&&e.apply(new Pn(i)),i}};var In=u((function(){this._locations=null;var t=arguments[0];this._locations=t}),"Oi");In.prototype.filter=function(t){(t instanceof Jt||t instanceof Zt||t instanceof te)&&this._locations.add(new Tn(t,0,t.getCoordinate()))},In.prototype.interfaces_=function(){return[zt]},In.prototype.getClass=function(){return In},In.getLocations=function(t){var e=new wt;return t.apply(new In(e)),e};var Ln=u((function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new Sn,this._minDistanceLocation=null,this._minDistance=_.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=i,this._geom[1]=n,this._terminateDistance=r}}),"Ti");Ln.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=1-e,r=wn.getPolygons(this._geom[e]);if(r.size()>0){var o=In.getLocations(this._geom[n]);if(this.computeContainmentDistance(o,r,i),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[n]=i[0],this._minDistanceLocation[e]=i[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&L(arguments[0],Et)&&L(arguments[1],Et)){for(var s=arguments[0],a=arguments[1],l=arguments[2],u=0;u<s.size();u++)for(var h=s.get(u),c=0;c<a.size();c++)if(this.computeContainmentDistance(h,a.get(c),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof Tn&&arguments[1]instanceof te){var p=arguments[0],d=arguments[1],f=arguments[2],g=p.getCoordinate();if(P.EXTERIOR!==this._ptLocator.locate(g,d))return this._minDistance=0,f[0]=p,f[1]=new Tn(d,g),null}},Ln.prototype.computeMinDistanceLinesPoints=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,i),this._minDistance<=this._terminateDistance)return null}},Ln.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=An.getLines(this._geom[0]),i=An.getLines(this._geom[1]),n=Pn.getPoints(this._geom[0]),r=Pn.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,r,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(i,n,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(n,r,t),void this.updateMinDistance(t,!1))))},Ln.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ln.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},Ln.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},Ln.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation||(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance))return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Jt){var t=arguments[0],e=arguments[1],i=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var n=t.getCoordinates(),r=e.getCoordinate(),o=0;o<n.length-1;o++){var s=lt.distancePointLine(r,n[o],n[o+1]);if(s<this._minDistance){this._minDistance=s;var a=new gi(n[o],n[o+1]).closestPoint(r);i[0]=new Tn(t,o,a),i[1]=new Tn(e,0,r)}if(this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof Zt&&arguments[1]instanceof Zt){var l=arguments[0],u=arguments[1],h=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var c=l.getCoordinates(),p=u.getCoordinates(),d=0;d<c.length-1;d++)for(var f=0;f<p.length-1;f++){var g=lt.distanceLineLine(c[d],c[d+1],p[f],p[f+1]);if(g<this._minDistance){this._minDistance=g;var m=new gi(c[d],c[d+1]),v=new gi(p[f],p[f+1]),y=m.closestPoints(v);h[0]=new Tn(l,d,y[0]),h[1]=new Tn(u,f,y[1])}if(this._minDistance<=this._terminateDistance)return null}}},Ln.prototype.computeMinDistancePoints=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o),a=r.getCoordinate().distance(s.getCoordinate());if(a<this._minDistance&&(this._minDistance=a,i[0]=new Tn(r,0,r.getCoordinate()),i[1]=new Tn(s,0,s.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},Ln.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new x("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ln.prototype.computeMinDistanceLines=function(t,e,i){for(var n=0;n<t.size();n++)for(var r=t.get(n),o=0;o<e.size();o++){var s=e.get(o);if(this.computeMinDistance(r,s,i),this._minDistance<=this._terminateDistance)return null}},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln},Ln.distance=function(t,e){return new Ln(t,e).distance()},Ln.isWithinDistance=function(t,e,i){return new Ln(t,e,i).distance()<=i},Ln.nearestPoints=function(t,e){return new Ln(t,e).nearestPoints()};var On=u((function(){this._pt=[new A,new A],this._distance=_.NaN,this._isNull=!0}),"Ri");On.prototype.getCoordinates=function(){return this._pt},On.prototype.getCoordinate=function(t){return this._pt[t]},On.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n<this._distance&&this.initialize(e,i,n)}},On.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2];this._pt[0].setCoordinate(i),this._pt[1].setCoordinate(n),this._distance=r,this._isNull=!1}},On.prototype.toString=function(){return $.toLineString(this._pt[0],this._pt[1])},On.prototype.getDistance=function(){return this._distance},On.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],i=arguments[1];if(this._isNull)return this.initialize(e,i),null;var n=e.distance(i);n>this._distance&&this.initialize(e,i,n)}},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On};var Nn=u((function(){}),"Pi");Nn.prototype.interfaces_=function(){return[]},Nn.prototype.getClass=function(){return Nn},Nn.computeDistance=function(){if(arguments[2]instanceof On&&arguments[0]instanceof Zt&&arguments[1]instanceof A)for(var t=arguments[0],e=arguments[1],i=arguments[2],n=new gi,r=t.getCoordinates(),o=0;o<r.length-1;o++){n.setCoordinates(r[o],r[o+1]);var s=n.closestPoint(e);i.setMinimum(s,e)}else if(arguments[2]instanceof On&&arguments[0]instanceof te&&arguments[1]instanceof A){var a=arguments[0],l=arguments[1],u=arguments[2];Nn.computeDistance(a.getExteriorRing(),l,u);for(var h=0;h<a.getNumInteriorRing();h++)Nn.computeDistance(a.getInteriorRingN(h),l,u)}else if(arguments[2]instanceof On&&arguments[0]instanceof ct&&arguments[1]instanceof A){var c=arguments[0],p=arguments[1],d=arguments[2];if(c instanceof Zt)Nn.computeDistance(c,p,d);else if(c instanceof te)Nn.computeDistance(c,p,d);else if(c instanceof jt)for(var f=c,g=0;g<f.getNumGeometries();g++){var m=f.getGeometryN(g);Nn.computeDistance(m,p,d)}else d.setMinimum(c.getCoordinate(),p)}else if(arguments[2]instanceof On&&arguments[0]instanceof gi&&arguments[1]instanceof A){var v=arguments[0],y=arguments[1],x=arguments[2],_=v.closestPoint(y);x.setMinimum(_,y)}};var Dn=u((function(){this._g0=null,this._g1=null,this._ptDist=new On,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e}),"Di"),Rn={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Dn.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Dn.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new x("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Dn.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Dn.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Dn.prototype.computeOrientedDistance=function(t,e,i){var n=new qn(e);if(t.apply(n),i.setMaximum(n.getMaxPointDistance()),this._densifyFrac>0){var r=new Bn(e,this._densifyFrac);t.apply(r),i.setMaximum(r.getMaxPointDistance())}},Dn.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Dn.prototype.interfaces_=function(){return[]},Dn.prototype.getClass=function(){return Dn},Dn.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return new Dn(t,e).distance()}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new Dn(i,n);return o.setDensifyFraction(r),o.distance()}},Rn.MaxPointDistanceFilter.get=function(){return qn},Rn.MaxDensifiedByFractionDistanceFilter.get=function(){return Bn},Object.defineProperties(Dn,Rn);var qn=u((function(){this._maxPtDist=new On,this._minPtDist=new On,this._euclideanDist=new Nn,this._geom=null;var t=arguments[0];this._geom=t}),"Ai");qn.prototype.filter=function(t){this._minPtDist.initialize(),Nn.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},qn.prototype.getMaxPointDistance=function(){return this._maxPtDist},qn.prototype.interfaces_=function(){return[ft]},qn.prototype.getClass=function(){return qn};var Bn=u((function(){this._maxPtDist=new On,this._minPtDist=new On,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))}),"Fi");Bn.prototype.filter=function(t,e){if(0===e)return null;for(var i=t.getCoordinate(e-1),n=t.getCoordinate(e),r=(n.x-i.x)/this._numSubSegs,o=(n.y-i.y)/this._numSubSegs,s=0;s<this._numSubSegs;s++){var a=i.x+s*r,l=i.y+s*o,u=new A(a,l);this._minPtDist.initialize(),Nn.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Bn.prototype.isDone=function(){return!1},Bn.prototype.isGeometryChanged=function(){return!1},Bn.prototype.getMaxPointDistance=function(){return this._maxPtDist},Bn.prototype.interfaces_=function(){return[Vt]},Bn.prototype.getClass=function(){return Bn};var kn=u((function(t,e,i){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=i||null}),"Gi"),Fn={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};kn.prototype.checkMaximumDistance=function(t,e,i){var n=new Dn(e,t);if(n.setDensifyFraction(.25),this._maxDistanceFound=n.orientedDistance(),this._maxDistanceFound>i){this._isValid=!1;var r=n.getCoordinates();this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+$.toLineString(r[0],r[1])+")"}},kn.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=kn.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),kn.VERBOSE&&W.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},kn.prototype.checkNegativeValid=function(){if(!(this._input instanceof te||this._input instanceof ne||this._input instanceof jt))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},kn.prototype.getErrorIndicator=function(){return this._errorIndicator},kn.prototype.checkMinimumDistance=function(t,e,i){var n=new Ln(t,e,i);if(this._minDistanceFound=n.distance(),this._minDistanceFound<i){this._isValid=!1;var r=n.nearestPoints();this._errorLocation=n.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+$.toLineString(r[0],r[1])+" )"}},kn.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},kn.prototype.getErrorLocation=function(){return this._errorLocation},kn.prototype.getPolygonLines=function(t){for(var e=new wt,i=new An(e),n=wn.getPolygons(t).iterator();n.hasNext();)n.next().apply(i);return t.getFactory().buildGeometry(e)},kn.prototype.getErrorMessage=function(){return this._errMsg},kn.prototype.interfaces_=function(){return[]},kn.prototype.getClass=function(){return kn},Fn.VERBOSE.get=function(){return!1},Fn.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(kn,Fn);var Un=u((function(t,e,i){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=i||null}),"Bi"),zn={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Un.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Un.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Un.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Y(this._input.getEnvelopeInternal());e.expandBy(this._distance);var i=new Y(this._result.getEnvelopeInternal());i.expandBy(t),i.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(i)),this.report("Envelope")},Un.prototype.checkDistance=function(){var t=new kn(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Un.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Un.prototype.checkPolygonal=function(){this._result instanceof te||this._result instanceof ne||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Un.prototype.getErrorIndicator=function(){return this._errorIndicator},Un.prototype.getErrorLocation=function(){return this._errorLocation},Un.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2||this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Un.prototype.report=function(t){if(!Un.VERBOSE)return null;W.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Un.prototype.getErrorMessage=function(){return this._errorMsg},Un.prototype.interfaces_=function(){return[]},Un.prototype.getClass=function(){return Un},Un.isValidMsg=function(t,e,i){var n=new Un(t,e,i);return n.isValid()?null:n.getErrorMessage()},Un.isValid=function(t,e,i){return!!new Un(t,e,i).isValid()},zn.VERBOSE.get=function(){return!1},zn.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Un,zn);var Vn=u((function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e}),"Ui");Vn.prototype.getCoordinates=function(){return this._pts},Vn.prototype.size=function(){return this._pts.length},Vn.prototype.getCoordinate=function(t){return this._pts[t]},Vn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Vn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ci.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Vn.prototype.setData=function(t){this._data=t},Vn.prototype.getData=function(){return this._data},Vn.prototype.toString=function(){return $.toLineString(new ue(this._pts))},Vn.prototype.interfaces_=function(){return[pi]},Vn.prototype.getClass=function(){return Vn};var jn=u((function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new wt,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null}),"zi");jn.prototype.getInteriorIntersection=function(){return this._interiorIntersection},jn.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},jn.prototype.getIntersectionSegments=function(){return this._intSegments},jn.prototype.count=function(){return this._intersectionCount},jn.prototype.getIntersections=function(){return this._intersections},jn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},jn.prototype.setKeepIntersections=function(t){this._keepIntersections=t},jn.prototype.processIntersections=function(t,e,i,n){if(!this._findAllIntersections&&this.hasIntersection()||t===i&&e===n||this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(i,n))return null;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=r,this._intSegments[1]=o,this._intSegments[2]=s,this._intSegments[3]=a,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},jn.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},jn.prototype.hasIntersection=function(){return null!==this._interiorIntersection},jn.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},jn.prototype.interfaces_=function(){return[Xi]},jn.prototype.getClass=function(){return jn},jn.createAllIntersectionsFinder=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e},jn.createAnyIntersectionFinder=function(t){return new jn(t)},jn.createIntersectionCounter=function(t){var e=new jn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Gn=u((function(){this._li=new ot,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t}),"Xi");Gn.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Gn.prototype.getIntersections=function(){return this._segInt.getIntersections()},Gn.prototype.isValid=function(){return this.execute(),this._isValid},Gn.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Gn.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new jn(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new Mi;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Gn.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new Pe(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Gn.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+$.toLineString(t[0],t[1])+" and "+$.toLineString(t[2],t[3])},Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.computeIntersections=function(t){var e=new Gn(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Wn=u((function t(){this._nv=null;var e=arguments[0];this._nv=new Gn(t.toSegmentStrings(e))}),"t");Wn.prototype.checkValid=function(){this._nv.checkValid()},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn},Wn.toSegmentStrings=function(t){for(var e=new wt,i=t.iterator();i.hasNext();){var n=i.next();e.add(new Vn(n.getCoordinates(),n))}return e},Wn.checkValid=function(t){new Wn(t).checkValid()};var Hn=u((function(t){this._mapOp=t}),"ki");Hn.prototype.map=function(t){for(var e=new wt,i=0;i<t.getNumGeometries();i++){var n=this._mapOp.map(t.getGeometryN(i));n.isEmpty()||e.add(n)}return t.getFactory().createGeometryCollection(ye.toGeometryArray(e))},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn},Hn.map=function(t,e){return new Hn(e).map(t)};var Yn=u((function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new wt,this._resultLineList=new wt;var t=arguments[0],e=arguments[1],i=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=i}),"ji");Yn.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next();this.collectLineEdge(i,t,this._lineEdgesList),this.collectBoundaryTouchEdge(i,t,this._lineEdgesList)}},Yn.prototype.labelIsolatedLine=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,i)},Yn.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Yn.prototype.collectLineEdge=function(t,e,i){var n=t.getLabel(),r=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Tr.isResultOfOp(n,e)||r.isCovered()||(i.add(r),t.setVisitedEdge(!0)))},Yn.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var i=e.next(),n=i.getEdge();if(i.isLineEdge()&&!n.isCoveredSet()){var r=this._op.isCoveredByA(i.getCoordinate());n.setCovered(r)}}},Yn.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next(),n=i.getLabel();i.isIsolated()&&(n.isNull(0)?this.labelIsolatedLine(i,0):this.labelIsolatedLine(i,1))}},Yn.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var i=e.next(),n=this._geometryFactory.createLineString(i.getCoordinates());this._resultLineList.add(n),i.setInResult(!0)}},Yn.prototype.collectBoundaryTouchEdge=function(t,e,i){var n=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(it.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Tr.isResultOfOp(n,e)&&e===Tr.INTERSECTION&&(i.add(t.getEdge()),t.setVisitedEdge(!0))))},Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn};var Xn=u((function(){this._op=null,this._geometryFactory=null,this._resultPointList=new wt;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e}),"Hi");Xn.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var i=this._geometryFactory.createPoint(e);this._resultPointList.add(i)}},Xn.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var i=e.next();if(!(i.isInResult()||i.isIncidentEdgeInResult()||0!==i.getEdges().getDegree()&&t!==Tr.INTERSECTION)){var n=i.getLabel();Tr.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(i)}}},Xn.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};var Kn=u((function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}),"Wi");Kn.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Kn.prototype.transformPolygon=function(t,e){var i=!0,n=this.transformLinearRing(t.getExteriorRing(),t);null!==n&&n instanceof ie&&!n.isEmpty()||(i=!1);for(var r=new wt,o=0;o<t.getNumInteriorRing();o++){var s=this.transformLinearRing(t.getInteriorRingN(o),t);null===s||s.isEmpty()||(s instanceof ie||(i=!1),r.add(s))}if(i)return this._factory.createPolygon(n,r.toArray([]));var a=new wt;return null!==n&&a.add(n),a.addAll(r),this._factory.buildGeometry(a)},Kn.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Kn.prototype.getInputGeometry=function(){return this._inputGeom},Kn.prototype.transformMultiLineString=function(t,e){for(var i=new wt,n=0;n<t.getNumGeometries();n++){var r=this.transformLineString(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Kn.prototype.transformCoordinates=function(t,e){return this.copy(t)},Kn.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Kn.prototype.transformMultiPoint=function(t,e){for(var i=new wt,n=0;n<t.getNumGeometries();n++){var r=this.transformPoint(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Kn.prototype.transformMultiPolygon=function(t,e){for(var i=new wt,n=0;n<t.getNumGeometries();n++){var r=this.transformPolygon(t.getGeometryN(n),t);null!==r&&(r.isEmpty()||i.add(r))}return this._factory.buildGeometry(i)},Kn.prototype.copy=function(t){return t.copy()},Kn.prototype.transformGeometryCollection=function(t,e){for(var i=new wt,n=0;n<t.getNumGeometries();n++){var r=this.transform(t.getGeometryN(n));null!==r&&(this._pruneEmptyGeometry&&r.isEmpty()||i.add(r))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ye.toGeometryArray(i)):this._factory.buildGeometry(i)},Kn.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Jt)return this.transformPoint(t,null);if(t instanceof ee)return this.transformMultiPoint(t,null);if(t instanceof ie)return this.transformLinearRing(t,null);if(t instanceof Zt)return this.transformLineString(t,null);if(t instanceof Gt)return this.transformMultiLineString(t,null);if(t instanceof te)return this.transformPolygon(t,null);if(t instanceof ne)return this.transformMultiPolygon(t,null);if(t instanceof jt)return this.transformGeometryCollection(t,null);throw new x("Unknown Geometry subtype: "+t.getClass().getName())},Kn.prototype.transformLinearRing=function(t,e){var i=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===i)return this._factory.createLinearRing(null);var n=i.size();return n>0&&n<4&&!this._preserveType?this._factory.createLineString(i):this._factory.createLinearRing(i)},Kn.prototype.interfaces_=function(){return[]},Kn.prototype.getClass=function(){return Kn};var Zn=u((function t(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new gi,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof Zt&&"number"==typeof arguments[1]){var e=arguments[0],i=arguments[1];t.call(this,e.getCoordinates(),i)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=t.isClosed(n),this._snapTolerance=r}}),"t");Zn.prototype.snapVertices=function(t,e){for(var i=this._isClosed?t.size()-1:t.size(),n=0;n<i;n++){var r=t.get(n),o=this.findSnapForVertex(r,e);null!==o&&(t.set(n,new A(o)),0===n&&this._isClosed&&t.set(t.size()-1,new A(o)))}},Zn.prototype.findSnapForVertex=function(t,e){for(var i=0;i<e.length;i++){if(t.equals2D(e[i]))return null;if(t.distance(e[i])<this._snapTolerance)return e[i]}return null},Zn.prototype.snapTo=function(t){var e=new St(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},Zn.prototype.snapSegments=function(t,e){if(0===e.length)return null;var i=e.length;e[0].equals2D(e[e.length-1])&&(i=e.length-1);for(var n=0;n<i;n++){var r=e[n],o=this.findSegmentIndexToSnap(r,t);o>=0&&t.add(o+1,new A(r),!1)}},Zn.prototype.findSegmentIndexToSnap=function(t,e){for(var i=_.MAX_VALUE,n=-1,r=0;r<e.size()-1;r++){if(this._seg.p0=e.get(r),this._seg.p1=e.get(r+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<i&&(i=o,n=r)}return n},Zn.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},Zn.prototype.interfaces_=function(){return[]},Zn.prototype.getClass=function(){return Zn},Zn.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var Qn=u((function(t){this._srcGeom=t||null}),"Ji"),Jn={SNAP_PRECISION_FACTOR:{configurable:!0}};Qn.prototype.snapTo=function(t,e){var i=this.extractTargetCoordinates(t);return new $n(e,i).transform(this._srcGeom)},Qn.prototype.snapToSelf=function(t,e){var i=this.extractTargetCoordinates(this._srcGeom),n=new $n(t,i,!0).transform(this._srcGeom),r=n;return e&&L(r,$t)&&(r=n.buffer(0)),r},Qn.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Qn.prototype.extractTargetCoordinates=function(t){for(var e=new f,i=t.getCoordinates(),n=0;n<i.length;n++)e.add(i[n]);return e.toArray(new Array(0).fill(null))},Qn.prototype.computeMinimumSegmentLength=function(t){for(var e=_.MAX_VALUE,i=0;i<t.length-1;i++){var n=t[i].distance(t[i+1]);n<e&&(e=n)}return e},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn},Qn.snap=function(t,e,i){var n=new Array(2).fill(null),r=new Qn(t);n[0]=r.snapTo(e,i);var o=new Qn(e);return n[1]=o.snapTo(n[0],i),n},Qn.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=Qn.computeSizeBasedSnapTolerance(t),i=t.getPrecisionModel();if(i.getType()===fe.FIXED){var n=1/i.getScale()*2/1.415;n>e&&(e=n)}return e}if(2===arguments.length){var r=arguments[0],o=arguments[1];return Math.min(Qn.computeOverlaySnapTolerance(r),Qn.computeOverlaySnapTolerance(o))}},Qn.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Qn.SNAP_PRECISION_FACTOR},Qn.snapToSelf=function(t,e,i){return new Qn(t).snapToSelf(e,i)},Jn.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Qn,Jn);var $n=function(t){function e(e,i,n){t.call(this),this._snapTolerance=e||null,this._snapPts=i||null,this._isSelfSnap=void 0!==n&&n}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var i=new Zn(t,this._snapTolerance);return i.setAllowSnappingToSourceVertices(this._isSelfSnap),i.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var i=t.toCoordinateArray(),n=this.snapLine(i,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Kn),tr=u((function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null}),"$i");tr.prototype.getCommon=function(){return _.longBitsToDouble(this._commonBits)},tr.prototype.add=function(t){var e=_.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=tr.signExpBits(this._commonBits),this._isFirst=!1,null):tr.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=tr.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=tr.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},tr.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=_.longBitsToDouble(t),i="0000000000000000000000000000000000000000000000000000000000000000"+_.toBinaryString(t),n=i.substring(i.length-64);return n.substring(0,1)+"  "+n.substring(1,12)+"(exp) "+n.substring(12)+" [ "+e+" ]"}},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr},tr.getBit=function(t,e){return t&1<<e?1:0},tr.signExpBits=function(t){return t>>52},tr.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},tr.numCommonMostSigMantissaBits=function(t,e){for(var i=0,n=52;n>=0;n--){if(tr.getBit(t,n)!==tr.getBit(e,n))return i;i++}return 52};var er=u((function(){this._commonCoord=null,this._ccFilter=new nr}),"tr"),ir={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};er.prototype.addCommonBits=function(t){var e=new rr(this._commonCoord);t.apply(e),t.geometryChanged()},er.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new A(this._commonCoord);e.x=-e.x,e.y=-e.y;var i=new rr(e);return t.apply(i),t.geometryChanged(),t},er.prototype.getCommonCoordinate=function(){return this._commonCoord},er.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},ir.CommonCoordinateFilter.get=function(){return nr},ir.Translater.get=function(){return rr},Object.defineProperties(er,ir);var nr=u((function(){this._commonBitsX=new tr,this._commonBitsY=new tr}),"nr");nr.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},nr.prototype.getCommonCoordinate=function(){return new A(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},nr.prototype.interfaces_=function(){return[ft]},nr.prototype.getClass=function(){return nr};var rr=u((function(){this.trans=null;var t=arguments[0];this.trans=t}),"ir");rr.prototype.filter=function(t,e){var i=t.getOrdinate(e,0)+this.trans.x,n=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,i),t.setOrdinate(e,1,n)},rr.prototype.isDone=function(){return!1},rr.prototype.isGeometryChanged=function(){return!0},rr.prototype.interfaces_=function(){return[Vt]},rr.prototype.getClass=function(){return rr};var or=u((function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}),"rr");or.prototype.selfSnap=function(t){return new Qn(t).snapTo(t,this._snapTolerance)},or.prototype.removeCommonBits=function(t){this._cbr=new er,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},or.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},or.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),i=Tr.overlayOp(e[0],e[1],t);return this.prepareResult(i)},or.prototype.checkValid=function(t){t.isValid()||W.out.println("Snapped geometry is invalid")},or.prototype.computeSnapTolerance=function(){this._snapTolerance=Qn.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},or.prototype.snap=function(t){var e=this.removeCommonBits(t);return Qn.snap(e[0],e[1],this._snapTolerance)},or.prototype.interfaces_=function(){return[]},or.prototype.getClass=function(){return or},or.overlayOp=function(t,e,i){return new or(t,e).getResultGeometry(i)},or.union=function(t,e){return or.overlayOp(t,e,Tr.UNION)},or.intersection=function(t,e){return or.overlayOp(t,e,Tr.INTERSECTION)},or.symDifference=function(t,e){return or.overlayOp(t,e,Tr.SYMDIFFERENCE)},or.difference=function(t,e){return or.overlayOp(t,e,Tr.DIFFERENCE)};var sr=u((function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e}),"or");sr.prototype.getResultGeometry=function(t){var e=null,i=!1,n=null;try{e=Tr.overlayOp(this._geom[0],this._geom[1],t),i=!0}catch(t){if(!(t instanceof tt))throw t;n=t}if(!i)try{e=or.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof tt?n:t}return e},sr.prototype.interfaces_=function(){return[]},sr.prototype.getClass=function(){return sr},sr.overlayOp=function(t,e,i){return new sr(t,e).getResultGeometry(i)},sr.union=function(t,e){return sr.overlayOp(t,e,Tr.UNION)},sr.intersection=function(t,e){return sr.overlayOp(t,e,Tr.INTERSECTION)},sr.symDifference=function(t,e){return sr.overlayOp(t,e,Tr.SYMDIFFERENCE)},sr.difference=function(t,e){return sr.overlayOp(t,e,Tr.DIFFERENCE)};var ar=u((function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}),"sr");ar.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},ar.prototype.interfaces_=function(){return[]},ar.prototype.getClass=function(){return ar};var lr=u((function t(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var e=arguments[0],i=arguments[1];this._eventType=t.DELETE,this._xValue=e,this._insertEvent=i}else if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._eventType=t.INSERT,this._label=n,this._xValue=r,this._obj=o}}),"t"),ur={INSERT:{configurable:!0},DELETE:{configurable:!0}};lr.prototype.isDelete=function(){return this._eventType===lr.DELETE},lr.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},lr.prototype.getObject=function(){return this._obj},lr.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},lr.prototype.getInsertEvent=function(){return this._insertEvent},lr.prototype.isInsert=function(){return this._eventType===lr.INSERT},lr.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},lr.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},lr.prototype.interfaces_=function(){return[M]},lr.prototype.getClass=function(){return lr},ur.INSERT.get=function(){return 1},ur.DELETE.get=function(){return 2},Object.defineProperties(lr,ur);var hr=u((function(){}),"lr");hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr};var cr=u((function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],i=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=i}),"cr");cr.prototype.isTrivialIntersection=function(t,e,i,n){if(t===i&&1===this._li.getIntersectionNum()){if(cr.isAdjacentSegments(e,n))return!0;if(t.isClosed()){var r=t.getNumPoints()-1;if(0===e&&n===r||0===n&&e===r)return!0}}return!1},cr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},cr.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},cr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},cr.prototype.isBoundaryPointInternal=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next().getCoordinate();if(t.isIntersection(n))return!0}return!1},cr.prototype.hasProperIntersection=function(){return this._hasProper},cr.prototype.hasIntersection=function(){return this._hasIntersection},cr.prototype.isDone=function(){return this._isDone},cr.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},cr.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},cr.prototype.addIntersections=function(t,e,i,n){if(t===i&&e===n)return null;this.numTests++;var r=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=i.getCoordinates()[n],a=i.getCoordinates()[n+1];this._li.computeIntersection(r,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),i.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,i,n)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),i.addIntersections(this._li,n,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var pr=function(t){function e(){t.call(this),this.events=new wt,this.nOverlaps=null}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){ti.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},e.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var i=this.events.get(e);if(i.isInsert()&&this.processOverlaps(e,i.getDeleteEventIndex(),i,t),t.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof cr&&L(arguments[0],Et)&&L(arguments[1],Et)){var n=arguments[0],r=arguments[1],o=arguments[2];this.addEdges(n,n),this.addEdges(r,r),this.computeIntersections(o)}else if("boolean"==typeof arguments[2]&&L(arguments[0],Et)&&arguments[1]instanceof cr){var s=arguments[0],a=arguments[1];arguments[2]?this.addEdges(s,null):this.addEdges(s),this.computeIntersections(a)}},e.prototype.addEdge=function(t,e){for(var i=t.getMonotoneChainEdge(),n=i.getStartIndexes(),r=0;r<n.length-1;r++){var o=new ar(i,r),s=new lr(e,i.getMinX(r),o);this.events.add(s),this.events.add(new lr(i.getMaxX(r),s))}},e.prototype.processOverlaps=function(t,e,i,n){for(var r=i.getObject(),o=t;o<e;o++){var s=this.events.get(o);if(s.isInsert()){var a=s.getObject();i.isSameLabel(s)||(r.computeIntersections(a,n),this.nOverlaps++)}}},e.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var i=arguments[0],n=arguments[1],r=i.iterator();r.hasNext();){var o=r.next();this.addEdge(o,n)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(hr),dr=u((function(){this._min=_.POSITIVE_INFINITY,this._max=_.NEGATIVE_INFINITY}),"hr"),fr={NodeComparator:{configurable:!0}};dr.prototype.getMin=function(){return this._min},dr.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},dr.prototype.getMax=function(){return this._max},dr.prototype.toString=function(){return $.toLineString(new A(this._min,0),new A(this._max,0))},dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},fr.NodeComparator.get=function(){return gr},Object.defineProperties(dr,fr);var gr=u((function(){}),"gr");gr.prototype.compare=function(t,e){var i=t,n=e,r=(i._min+i._max)/2,o=(n._min+n._max)/2;return r<o?-1:r>o?1:0},gr.prototype.interfaces_=function(){return[w]},gr.prototype.getClass=function(){return gr};var mr=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],i=arguments[1],n=arguments[2];this._min=e,this._max=i,this._item=n}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null;i.visitItem(this._item)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),vr=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],i=arguments[1];this._node1=e,this._node2=i,this.buildExtent(this._node1,this._node2)}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,i){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,i),null!==this._node2&&this._node2.query(t,e,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(dr),yr=u((function(){this._leaves=new wt,this._root=null,this._level=0}),"_r");yr.prototype.buildTree=function(){ti.sort(this._leaves,new dr.NodeComparator);for(var t=this._leaves,e=null,i=new wt;;){if(this.buildLevel(t,i),1===i.size())return i.get(0);e=t,t=i,i=e}},yr.prototype.insert=function(t,e,i){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new mr(t,e,i))},yr.prototype.query=function(t,e,i){this.init(),this._root.query(t,e,i)},yr.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},yr.prototype.printNode=function(t){W.out.println($.toLineString(new A(t._min,this._level),new A(t._max,this._level)))},yr.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},yr.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var i=0;i<t.size();i+=2){var n=t.get(i);if(null===(i+1<t.size()?t.get(i):null))e.add(n);else{var r=new vr(t.get(i),t.get(i+1));e.add(r)}}},yr.prototype.interfaces_=function(){return[]},yr.prototype.getClass=function(){return yr};var xr=u((function(){this._items=new wt}),"mr");xr.prototype.visitItem=function(t){this._items.add(t)},xr.prototype.getItems=function(){return this._items},xr.prototype.interfaces_=function(){return[Ze]},xr.prototype.getClass=function(){return xr};var _r=u((function(){this._index=null;var t=arguments[0];if(!L(t,$t))throw new x("Argument must be Polygonal");this._index=new Er(t)}),"vr"),br={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};_r.prototype.locate=function(t){var e=new at(t),i=new Mr(e);return this._index.query(t.y,t.y,i),e.getLocation()},_r.prototype.interfaces_=function(){return[Ui]},_r.prototype.getClass=function(){return _r},br.SegmentVisitor.get=function(){return Mr},br.IntervalIndexedGeometry.get=function(){return Er},Object.defineProperties(_r,br);var Mr=u((function(){this._counter=null;var t=arguments[0];this._counter=t}),"Er");Mr.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},Mr.prototype.interfaces_=function(){return[Ze]},Mr.prototype.getClass=function(){return Mr};var Er=u((function(){this._index=new yr;var t=arguments[0];this.init(t)}),"xr");Er.prototype.init=function(t){for(var e=An.getLines(t).iterator();e.hasNext();){var i=e.next().getCoordinates();this.addLine(i)}},Er.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var i=new gi(t[e-1],t[e]),n=Math.min(i.p0.y,i.p1.y),r=Math.max(i.p0.y,i.p1.y);this._index.insert(n,r,i)}},Er.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new xr;return this._index.query(t,e,i),i.getItems()}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];this._index.query(n,r,o)}},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};var wr=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new de,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new Sn,2===arguments.length){var e=arguments[0],i=arguments[1],n=gt.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=i,this._boundaryNodeRule=n,null!==i&&this.add(i)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=r,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,i){var n=this._nodes.addNode(i).getLabel(),r=1;P.NONE,n.getLocation(t,Se.ON)===P.BOUNDARY&&r++;var o=e.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,o)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var i=arguments[0],n=arguments[1],r=arguments[2],o=new cr(i,!0,!1);o.setIsDoneIfProperInt(r);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof ie||this._parentGeom instanceof te||this._parentGeom instanceof ne,l=n||!a;return s.computeIntersections(this._edges,o,l),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},e.prototype.computeEdgeIntersections=function(t,e,i){var n=new cr(e,i,!0);return n.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,n),n},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Jt){var t=arguments[0].getCoordinate();this.insertPoint(this._argIndex,t,P.INTERIOR)}else if(arguments[0]instanceof A){var e=arguments[0];this.insertPoint(this._argIndex,e,P.INTERIOR)}},e.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),P.EXTERIOR,P.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var i=t.getInteriorRingN(e);this.addPolygonRing(i,P.INTERIOR,P.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],P.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],P.BOUNDARY)},e.prototype.addLineString=function(t){var e=Tt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var i=new nn(e,new Ne(this._argIndex,P.INTERIOR));this._lineEdgeMap.put(t,i),this.insertEdge(i),it.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),i=0,n=t.iterator();n.hasNext();){var r=n.next();e[i++]=r.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,i){if(this.isBoundaryNode(t,e))return null;i===P.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,i)},e.prototype.addPolygonRing=function(t,e,i){if(t.isEmpty())return null;var n=Tt.removeRepeatedPoints(t.getCoordinates());if(n.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=n[0],null;var r=e,o=i;lt.isCCW(n)&&(r=i,o=e);var s=new nn(n,new Ne(this._argIndex,P.BOUNDARY,r,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,n[0],P.BOUNDARY)},e.prototype.insertPoint=function(t,e,i){var n=this._nodes.addNode(e),r=n.getLabel();null===r?n._label=new Ne(t,i):r.setLocation(t,i)},e.prototype.createEdgeSetIntersector=function(){return new pr},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var i=e.next(),n=i.getLabel().getLocation(t),r=i.eiList.iterator();r.hasNext();){var o=r.next();this.addSelfIntersectionNode(t,o.coord,n)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof ne&&(this._useBoundaryDeterminationRule=!1),e instanceof te)this.addPolygon(e);else if(e instanceof Zt)this.addLineString(e);else if(e instanceof Jt)this.addPoint(e);else if(e instanceof ee)this.addCollection(e);else if(e instanceof Gt)this.addCollection(e);else if(e instanceof ne)this.addCollection(e);else{if(!(e instanceof jt))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var i=t.getGeometryN(e);this.add(i)}},e.prototype.locate=function(t){return L(this._parentGeom,$t)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new _r(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?P.BOUNDARY:P.INTERIOR},e}(We),Ar=u((function(){if(this._li=new ot,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new wr(0,t)}else if(2===arguments.length){var e=arguments[0],i=arguments[1],n=gt.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(i.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(i.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wr(0,e,n),this._arg[1]=new wr(1,i,n)}else if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];r.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new wr(0,r,s),this._arg[1]=new wr(1,o,s)}}),"Cr");Ar.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Ar.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Ar.prototype.interfaces_=function(){return[]},Ar.prototype.getClass=function(){return Ar};var Sr=u((function(){}),"Sr");Sr.prototype.interfaces_=function(){return[]},Sr.prototype.getClass=function(){return Sr},Sr.map=function(){if(arguments[0]instanceof ct&&L(arguments[1],Sr.MapOp)){for(var t=arguments[0],e=arguments[1],i=new wt,n=0;n<t.getNumGeometries();n++){var r=e.map(t.getGeometryN(n));null!==r&&i.add(r)}return t.getFactory().buildGeometry(i)}if(L(arguments[0],bt)&&L(arguments[1],Sr.MapOp)){for(var o=arguments[0],s=arguments[1],a=new wt,l=o.iterator();l.hasNext();){var u=l.next(),h=s.map(u);null!==h&&a.add(h)}return a}},Sr.MapOp=function(){};var Tr=function(t){function e(){var e=arguments[0],i=arguments[1];t.call(this,e,i),this._ptLocator=new Sn,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Yi,this._resultPolyList=new wt,this._resultLineList=new wt,this._resultPointList=new wt,this._graph=new We(new Wi),this._geomFact=e.getFactory()}return u(e,"e"),t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var i=e.getLabel(),n=t.getLabel();e.isPointwiseEqual(t)||(n=new Ne(t.getLabel())).flip();var r=e.getDepth();r.isNull()&&r.add(i),r.add(n),i.merge(n)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),i=e.getSym();e.isInResult()&&i.isInResult()&&(e.setInResult(!1),i.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,i,n,r){var o=new wt;return o.addAll(t),o.addAll(i),o.addAll(n),o.isEmpty()?e.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},e.prototype.isCovered=function(t,e){for(var i=e.iterator();i.hasNext();){var n=i.next();if(this._ptLocator.locate(t,n)!==P.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new wt,e=this._edgeList.iterator();e.hasNext();){var i=e.next();i.isCollapsed()&&(e.remove(),t.add(i.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getEdges().getLabel();e.getLabel().merge(i)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var i=e.next();this.insertUniqueEdge(i)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new wt;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Wn.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var i=new He(this._geomFact);i.add(this._graph),this._resultPolyList=i.getPolygons();var n=new Yn(this,this._geomFact,this._ptLocator);this._resultLineList=n.build(t);var r=new Xn(this,this._geomFact,this._ptLocator);this._resultPointList=r.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var i=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,i)},e.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var i=e.next();this._graph.addNode(i.getCoordinate()).setLabel(t,i.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var i=this._graph.getEdgeEnds().iterator();i.hasNext();){var n=i.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&e.isResultOfOp(r.getLocation(0,Se.RIGHT),r.getLocation(1,Se.RIGHT),t)&&n.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),i=e.getLabel(),n=e.getDepth();if(!n.isNull()){n.normalize();for(var r=0;r<2;r++)i.isNull(r)||!i.isArea()||n.isNull(r)||(0===n.getDelta(r)?i.toLine(r):(it.isTrue(!n.isNull(r,Se.LEFT),"depth of LEFT side has not been initialized"),i.setLocation(r,Se.LEFT,n.getLocation(r,Se.LEFT)),it.isTrue(!n.isNull(r,Se.RIGHT),"depth of RIGHT side has not been initialized"),i.setLocation(r,Se.RIGHT,n.getLocation(r,Se.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),i=e.getLabel();e.isIsolated()&&(i.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(i)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ar);Tr.overlayOp=function(t,e,i){return new Tr(t,e).getResultGeometry(i)},Tr.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Tr.createEmptyResult(Tr.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var i=e;return Hn.map(t,{interfaces_:function(){return[Sr.MapOp]},map:function(t){return t.intersection(i)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),sr.overlayOp(t,e,Tr.INTERSECTION)},Tr.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Tr.createEmptyResult(Tr.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),sr.overlayOp(t,e,Tr.SYMDIFFERENCE)},Tr.resultDimension=function(t,e,i){var n=e.getDimension(),r=i.getDimension(),o=-1;switch(t){case Tr.INTERSECTION:o=Math.min(n,r);break;case Tr.UNION:o=Math.max(n,r);break;case Tr.DIFFERENCE:o=n;break;case Tr.SYMDIFFERENCE:o=Math.max(n,r)}return o},Tr.createEmptyResult=function(t,e,i,n){var r=null;switch(Tr.resultDimension(t,e,i)){case-1:r=n.createGeometryCollection(new Array(0).fill(null));break;case 0:r=n.createPoint();break;case 1:r=n.createLineString();break;case 2:r=n.createPolygon()}return r},Tr.difference=function(t,e){return t.isEmpty()?Tr.createEmptyResult(Tr.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),sr.overlayOp(t,e,Tr.DIFFERENCE))},Tr.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=t.getLocation(0),n=t.getLocation(1);return Tr.isResultOfOp(i,n,e)}if(3===arguments.length){var r=arguments[0],o=arguments[1],s=arguments[2];switch(r===P.BOUNDARY&&(r=P.INTERIOR),o===P.BOUNDARY&&(o=P.INTERIOR),s){case Tr.INTERSECTION:return r===P.INTERIOR&&o===P.INTERIOR;case Tr.UNION:return r===P.INTERIOR||o===P.INTERIOR;case Tr.DIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR;case Tr.SYMDIFFERENCE:return r===P.INTERIOR&&o!==P.INTERIOR||r!==P.INTERIOR&&o===P.INTERIOR}return!1}},Tr.INTERSECTION=1,Tr.UNION=2,Tr.DIFFERENCE=3,Tr.SYMDIFFERENCE=4;var Cr=u((function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new Sn,this._seg=new gi;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)}),"br");Cr.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var i=this._linework.getGeometryN(e).getCoordinateSequence(),n=0;n<i.size()-1;n++)if(i.getCoordinate(n,this._seg.p0),i.getCoordinate(n+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},Cr.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?P.BOUNDARY:this._ptLocator.locate(t,this._g)},Cr.prototype.extractLinework=function(t){var e=new Pr;t.apply(e);var i=e.getLinework(),n=ye.toLineStringArray(i);return t.getFactory().createMultiLineString(n)},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};var Pr=u((function(){this._linework=null,this._linework=new wt}),"wr");Pr.prototype.getLinework=function(){return this._linework},Pr.prototype.filter=function(t){if(t instanceof te){var e=t;this._linework.add(e.getExteriorRing());for(var i=0;i<e.getNumInteriorRing();i++)this._linework.add(e.getInteriorRingN(i))}},Pr.prototype.interfaces_=function(){return[zt]},Pr.prototype.getClass=function(){return Pr};var Ir=u((function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t}),"Or");Ir.prototype.extractPoints=function(t,e,i){for(var n=t.getCoordinates(),r=0;r<n.length-1;r++)this.computeOffsetPoints(n[r],n[r+1],e,i)},Ir.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Ir.prototype.getPoints=function(t){for(var e=new wt,i=An.getLines(this._g).iterator();i.hasNext();){var n=i.next();this.extractPoints(n,t,e)}return e},Ir.prototype.computeOffsetPoints=function(t,e,i,n){var r=e.x-t.x,o=e.y-t.y,s=Math.sqrt(r*r+o*o),a=i*r/s,l=i*o/s,u=(e.x+t.x)/2,h=(e.y+t.y)/2;if(this._doLeft){var c=new A(u-l,h+a);n.add(c)}if(this._doRight){var p=new A(u+l,h-a);n.add(p)}},Ir.prototype.interfaces_=function(){return[]},Ir.prototype.getClass=function(){return Ir};var Lr=u((function t(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=t.TOLERANCE,this._testCoords=new wt;var e=arguments[0],i=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=t.computeBoundaryDistanceTolerance(e,i),this._geom=[e,i,n],this._locFinder=[new Cr(this._geom[0],this._boundaryDistanceTolerance),new Cr(this._geom[1],this._boundaryDistanceTolerance),new Cr(this._geom[2],this._boundaryDistanceTolerance)]}),"t"),Or={TOLERANCE:{configurable:!0}};Lr.prototype.reportResult=function(t,e,i){W.out.println("Overlay result invalid - A:"+P.toLocationSymbol(e[0])+" B:"+P.toLocationSymbol(e[1])+" expected:"+(i?"i":"e")+" actual:"+P.toLocationSymbol(e[2]))},Lr.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Lr.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var i=this._testCoords.get(e);if(!this.checkValid(t,i))return this._invalidLocation=i,!1}return!0}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this._location[0]=this._locFinder[0].getLocation(r),this._location[1]=this._locFinder[1].getLocation(r),this._location[2]=this._locFinder[2].getLocation(r),!!Lr.hasLocation(this._location,P.BOUNDARY)||this.isValidResult(n,this._location)}},Lr.prototype.addTestPts=function(t){var e=new Ir(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Lr.prototype.isValidResult=function(t,e){var i=Tr.isResultOfOp(e[0],e[1],t),n=!(i^e[2]===P.INTERIOR);return n||this.reportResult(t,e,i),n},Lr.prototype.getInvalidLocation=function(){return this._invalidLocation},Lr.prototype.interfaces_=function(){return[]},Lr.prototype.getClass=function(){return Lr},Lr.hasLocation=function(t,e){for(var i=0;i<3;i++)if(t[i]===e)return!0;return!1},Lr.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Qn.computeSizeBasedSnapTolerance(t),Qn.computeSizeBasedSnapTolerance(e))},Lr.isValid=function(t,e,i,n){return new Lr(t,e,n).isValid(i)},Or.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Lr,Or);var Nr=u((function t(e){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=t.extractFactory(e),this._inputGeoms=e}),"t");Nr.prototype.extractElements=function(t,e){if(null===t)return null;for(var i=0;i<t.getNumGeometries();i++){var n=t.getGeometryN(i);this._skipEmpty&&n.isEmpty()||e.add(n)}},Nr.prototype.combine=function(){for(var t=new wt,e=this._inputGeoms.iterator();e.hasNext();){var i=e.next();this.extractElements(i,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},Nr.prototype.interfaces_=function(){return[]},Nr.prototype.getClass=function(){return Nr},Nr.combine=function(){if(1===arguments.length){var t=arguments[0];return new Nr(t).combine()}if(2===arguments.length){var e=arguments[0],i=arguments[1];return new Nr(Nr.createList(e,i)).combine()}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2];return new Nr(Nr.createList(n,r,o)).combine()}},Nr.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Nr.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],i=new wt;return i.add(t),i.add(e),i}if(3===arguments.length){var n=arguments[0],r=arguments[1],o=arguments[2],s=new wt;return s.add(n),s.add(r),s.add(o),s}};var Dr=u((function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new wt)}),"Dr"),Rr={STRTREE_NODE_CAPACITY:{configurable:!0}};Dr.prototype.reduceToGeometries=function(t){for(var e=new wt,i=t.iterator();i.hasNext();){var n=i.next(),r=null;L(n,Et)?r=this.unionTree(n):n instanceof ct&&(r=n),e.add(r)}return e},Dr.prototype.extractByEnvelope=function(t,e,i){for(var n=new wt,r=0;r<e.getNumGeometries();r++){var o=e.getGeometryN(r);o.getEnvelopeInternal().intersects(t)?n.add(o):i.add(o)}return this._geomFactory.buildGeometry(n)},Dr.prototype.unionOptimized=function(t,e){var i=t.getEnvelopeInternal(),n=e.getEnvelopeInternal();if(!i.intersects(n))return Nr.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var r=i.intersection(n);return this.unionUsingEnvelopeIntersection(t,e,r)},Dr.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new si(Dr.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var i=e.next();t.insert(i.getEnvelopeInternal(),i)}this._inputPolys=null;var n=t.itemsTree();return this.unionTree(n)},Dr.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],i=arguments[1],n=arguments[2];if(n-i<=1){var r=Dr.getGeometry(e,i);return this.unionSafe(r,null)}if(n-i==2)return this.unionSafe(Dr.getGeometry(e,i),Dr.getGeometry(e,i+1));var o=Math.trunc((n+i)/2),s=this.binaryUnion(e,i,o),a=this.binaryUnion(e,o,n);return this.unionSafe(s,a)}},Dr.prototype.repeatedUnion=function(t){for(var e=null,i=t.iterator();i.hasNext();){var n=i.next();e=null===e?n.copy():e.union(n)}return e},Dr.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Dr.prototype.unionActual=function(t,e){return Dr.restrictToPolygons(t.union(e))},Dr.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Dr.prototype.unionUsingEnvelopeIntersection=function(t,e,i){var n=new wt,r=this.extractByEnvelope(i,t,n),o=this.extractByEnvelope(i,e,n),s=this.unionActual(r,o);return n.add(s),Nr.combine(n)},Dr.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],i=arguments[1];return e.getFactory().createGeometryCollection([e,i]).buffer(0)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr.restrictToPolygons=function(t){if(L(t,$t))return t;var e=wn.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ye.toPolygonArray(e))},Dr.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Dr.union=function(t){return new Dr(t).union()},Rr.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Dr,Rr);var qr=u((function(){}),"Ar");qr.prototype.interfaces_=function(){return[]},qr.prototype.getClass=function(){return qr},qr.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Tr.createEmptyResult(Tr.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),sr.overlayOp(t,e,Tr.UNION)},t.GeoJSONReader=we,t.GeoJSONWriter=Ae,t.OverlayOp=Tr,t.UnionOp=qr,t.BufferOp=mn,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof t&&typeof e<"u"?n(t):"function"==typeof define&&define.amd?define(["exports"],n):n(i.jsts={})})),gH=Ye(((t,e)=>{E(),function(i,n){"use strict";var r="function",o="undefined",s="object",a="string",l="model",h="name",c="type",p="vendor",d="version",f="architecture",g="console",m="mobile",v="tablet",y="smarttv",x="wearable",_="embedded",b="Amazon",M="Apple",E="ASUS",w="BlackBerry",A="Browser",S="Chrome",T="Firefox",C="Google",P="Huawei",I="LG",L="Microsoft",O="Motorola",N="Opera",D="Samsung",R="Sharp",q="Sony",B="Xiaomi",k="Zebra",F="Facebook",U=u((function(t,e){var i={};for(var n in t)e[n]&&e[n].length%2==0?i[n]=e[n].concat(t[n]):i[n]=t[n];return i}),"extend"),z=u((function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e}),"enumerize"),V=u((function(t,e){return typeof t===a&&-1!==j(e).indexOf(j(t))}),"has"),j=u((function(t){return t.toLowerCase()}),"lowerize"),G=u((function(t){return typeof t===a?t.replace(/[^\d\.]/g,"").split(".")[0]:n}),"majorize"),W=u((function(t,e){if(typeof t===a)return t=t.replace(/^\s\s*/,""),typeof e===o?t:t.substring(0,350)}),"trim"),H=u((function(t,e){for(var i,o,a,l,u,h,c=0;c<e.length&&!u;){var p=e[c],d=e[c+1];for(i=o=0;i<p.length&&!u;)if(u=p[i++].exec(t))for(a=0;a<d.length;a++)h=u[++o],typeof(l=d[a])===s&&l.length>0?2===l.length?typeof l[1]==r?this[l[0]]=l[1].call(this,h):this[l[0]]=l[1]:3===l.length?typeof l[1]!==r||l[1].exec&&l[1].test?this[l[0]]=h?h.replace(l[1],l[2]):n:this[l[0]]=h?l[1].call(this,h,l[2]):n:4===l.length&&(this[l[0]]=h?l[3].call(this,h.replace(l[1],l[2])):n):this[l]=h||n;c+=2}}),"rgxMapper"),Y=u((function(t,e){for(var i in e)if(typeof e[i]===s&&e[i].length>0){for(var r=0;r<e[i].length;r++)if(V(e[i][r],t))return"?"===i?n:i}else if(V(e[i],t))return"?"===i?n:i;return t}),"strMapper"),X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,d],[/opios[\/ ]+([\w\.]+)/i],[d,[h,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[h,N]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[h,"UC"+A]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[d,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[d,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[d,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+A],d],[/\bfocus\/([\w\.]+)/i],[d,[h,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[h,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[h,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[h,"MIUI "+A]],[/fxios\/([-\w\.]+)/i],[d,[h,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+A]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+A],d],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,d],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,F],d],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[h,S+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,S+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[h,"Android "+A]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[d,Y,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[h,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,d],[/(cobalt)\/([\w\.]+)/i],[h,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,j]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",j]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,j]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,D],[c,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,D],[c,m]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[p,M],[c,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,M],[c,v]],[/(macintosh);/i],[l,[p,M]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,P],[c,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[p,P],[c,m]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[p,B],[c,m]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,B],[c,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[c,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[c,m]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[c,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,O],[c,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,O],[c,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,I],[c,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,I],[c,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[c,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[c,m]],[/(pixel c)\b/i],[l,[p,C],[c,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,C],[c,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,q],[c,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,q],[c,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[c,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,b],[c,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,b],[c,m]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[c,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,w],[c,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,E],[c,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,E],[c,m]],[/(nexus 9)/i],[l,[p,"HTC"],[c,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[c,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[c,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[c,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,R],[c,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[c,m]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[c,v]],[/(surface duo)/i],[l,[p,L],[c,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[c,m]],[/(u304aa)/i],[l,[p,"AT&T"],[c,m]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[c,m]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[c,v]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[c,v]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[c,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[c,v]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[c,v]],[/\b(k88) b/i],[l,[p,"ZTE"],[c,v]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[c,m]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[c,m]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[c,v]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[c,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[c,v]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[c,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[c,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[c,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[c,m]],[/\b(ph-1) /i],[l,[p,"Essential"],[c,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[c,v]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[c,v]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[c,v]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[c,v]],[/(sprint) (\w+)/i],[p,l,[c,m]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,L],[c,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,k],[c,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,k],[c,m]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[c,g]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[c,g]],[/(playstation [345portablevi]+)/i],[l,[p,q],[c,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,L],[c,g]],[/smart-tv.+(samsung)/i],[p,[c,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,D],[c,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,I],[c,y]],[/(apple) ?tv/i],[p,[l,M+" TV"],[c,y]],[/crkey/i],[[l,S+"cast"],[p,C],[c,y]],[/droid.+aft(\w)( bui|\))/i],[l,[p,b],[c,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[p,R],[c,y]],[/(bravia[\w ]+)( bui|\))/i],[l,[p,q],[c,y]],[/(mitv-\w{5}) bui/i],[l,[p,B],[c,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,W],[l,W],[c,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,y]],[/((pebble))app/i],[p,l,[c,x]],[/droid.+; (glass) \d/i],[l,[p,C],[c,x]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,k],[c,x]],[/(quest( 2)?)/i],[l,[p,F],[c,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[c,_]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[c,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[c,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,m]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,d],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[d,Y,X]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[d,Y,X]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,d],[/\(bb(10);/i],[d,[h,w]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[h,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[d,[h,S+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],d],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,d],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,d]]},Z=u((function(t,e){if(typeof t===s&&(e=t,t=n),!(this instanceof Z))return new Z(t,e).getResult();var r=t||(typeof i!==o&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),u=e?U(K,e):K;return this.getBrowser=function(){var t={};return t[h]=n,t[d]=n,H.call(t,r,u.browser),t.major=G(t.version),t},this.getCPU=function(){var t={};return t[f]=n,H.call(t,r,u.cpu),t},this.getDevice=function(){var t={};return t[p]=n,t[l]=n,t[c]=n,H.call(t,r,u.device),t},this.getEngine=function(){var t={};return t[h]=n,t[d]=n,H.call(t,r,u.engine),t},this.getOS=function(){var t={};return t[h]=n,t[d]=n,H.call(t,r,u.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(t){return r=typeof t===a&&t.length>350?W(t,350):t,this},this.setUA(r),this}),"UAParser");Z.VERSION="0.7.33",Z.BROWSER=z([h,d,"major"]),Z.CPU=z([f]),Z.DEVICE=z([l,p,c,g,m,y,v,x,_]),Z.ENGINE=Z.OS=z([h,d]),typeof t!==o?(typeof e!==o&&e.exports&&(t=e.exports=Z),t.UAParser=Z):typeof define===r&&define.amd?define((function(){return Z})):typeof i!==o&&(i.UAParser=Z);var Q=typeof i!==o&&(i.jQuery||i.Zepto);if(Q&&!Q.ua){var J=new Z;Q.ua=J.getResult(),Q.ua.get=function(){return J.getUA()},Q.ua.set=function(t){J.setUA(t);var e=J.getResult();for(var i in e)Q.ua[i]=e[i]}}}("object"==typeof window?window:t)})),kH=Ye(((t,e)=>{"use strict";E(),e.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>"%".concat(t.charCodeAt(0).toString(16).toUpperCase())))})),GH=Ye(((t,e)=>{"use strict";E();var i="%[a-f0-9]{2}",n=new RegExp("("+i+")|([^%]+?)","gi"),r=new RegExp("("+i+")+","gi");function o(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(1===t.length)return t;e=e||1;var i=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],o(i),o(n))}function s(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(n)||[],i=1;i<e.length;i++)e=(t=o(e,i).join("")).match(n)||[];return t}}function a(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},i=r.exec(t);i;){try{e[i[0]]=decodeURIComponent(i[0])}catch{var n=s(i[0]);n!==i[0]&&(e[i[0]]=n)}i=r.exec(t)}e["%C2"]="�";for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];t=t.replace(new RegExp(l,"g"),e[l])}return t}u(o,"decodeComponents"),u(s,"decode"),u(a,"customDecodeURIComponent"),e.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return a(t)}}})),HH=Ye(((t,e)=>{"use strict";E(),e.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];let i=t.indexOf(e);return-1===i?[t]:[t.slice(0,i),t.slice(i+e.length)]}})),WH=Ye(((t,e)=>{"use strict";E(),e.exports=function(t,e){for(var i={},n=Object.keys(t),r=Array.isArray(e),o=0;o<n.length;o++){var s=n[o],a=t[s];(r?-1!==e.indexOf(s):e(s,a,t))&&(i[s]=a)}return i}})),ej=Ye((t=>{"use strict";E();var e=kH(),i=GH(),n=HH(),r=WH(),o=u((t=>null==t),"isNullOrUndefined"),s=Symbol("encodeFragmentIdentifier");function a(t){switch(t.arrayFormat){case"index":return e=>(i,n)=>{let r=i.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,[c(e,t),"[",r,"]"].join("")]:[...i,[c(e,t),"[",c(r,t),"]=",c(n,t)].join("")]};case"bracket":return e=>(i,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,[c(e,t),"[]"].join("")]:[...i,[c(e,t),"[]=",c(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e="bracket-separator"===t.arrayFormat?"[]=":"=";return i=>(n,r)=>void 0===r||t.skipNull&&null===r||t.skipEmptyString&&""===r?n:(r=null===r?"":r,0===n.length?[[c(i,t),e,c(r,t)].join("")]:[[n,c(r,t)].join(t.arrayFormatSeparator)])}default:return e=>(i,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?i:null===n?[...i,c(e,t)]:[...i,[c(e,t),"=",c(n,t)].join("")]}}function l(t){let e;switch(t.arrayFormat){case"index":return(t,i,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=i):n[t]=i};case"bracket":return(t,i,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],i):n[t]=[i]:n[t]=i};case"comma":case"separator":return(e,i,n)=>{let r="string"==typeof i&&i.includes(t.arrayFormatSeparator),o="string"==typeof i&&!r&&p(i,t).includes(t.arrayFormatSeparator);i=o?p(i,t):i;let s=r||o?i.split(t.arrayFormatSeparator).map((e=>p(e,t))):null===i?i:p(i,t);n[e]=s};case"bracket-separator":return(e,i,n)=>{let r=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!r)return void(n[e]=i&&p(i,t));let o=null===i?[]:i.split(t.arrayFormatSeparator).map((e=>p(e,t)));void 0!==n[e]?n[e]=[].concat(n[e],o):n[e]=o};default:return(t,e,i)=>{void 0!==i[t]?i[t]=[].concat(i[t],e):i[t]=e}}}function h(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function c(t,i){return i.encode?i.strict?e(t):encodeURIComponent(t):t}function p(t,e){return e.decode?i(t):t}function d(t){return Array.isArray(t)?t.sort():"object"==typeof t?d(Object.keys(t)).sort(((t,e)=>Number(t)-Number(e))).map((e=>t[e])):t}function f(t){let e=t.indexOf("#");return-1!==e&&(t=t.slice(0,e)),t}function g(t){let e="",i=t.indexOf("#");return-1!==i&&(e=t.slice(i)),e}function m(t){let e=(t=f(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function v(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):e.parseBooleans&&null!==t&&("true"===t.toLowerCase()||"false"===t.toLowerCase())&&(t="true"===t.toLowerCase()),t}function y(t,e){h((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);let i=l(e),r=Object.create(null);if("string"!=typeof t||!(t=t.trim().replace(/^[?#&]/,"")))return r;for(let o of t.split("&")){if(""===o)continue;let[t,s]=n(e.decode?o.replace(/\+/g," "):o,"=");s=void 0===s?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?s:p(s,e),i(p(t,e),s,r)}for(let t of Object.keys(r)){let i=r[t];if("object"==typeof i&&null!==i)for(let t of Object.keys(i))i[t]=v(i[t],e);else r[t]=v(i,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce(((t,e)=>{let i=r[e];return i&&"object"==typeof i&&!Array.isArray(i)?t[e]=d(i):t[e]=i,t}),Object.create(null))}u(a,"encoderForArrayFormat"),u(l,"parserForArrayFormat"),u(h,"validateArrayFormatSeparator"),u(c,"encode"),u(p,"decode"),u(d,"keysSorter"),u(f,"removeHash"),u(g,"getHash"),u(m,"extract"),u(v,"parseValue"),u(y,"parse"),t.extract=m,t.parse=y,t.stringify=(t,e)=>{if(!t)return"";h((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);let i=u((i=>e.skipNull&&o(t[i])||e.skipEmptyString&&""===t[i]),"shouldFilter"),n=a(e),r={};for(let e of Object.keys(t))i(e)||(r[e]=t[e]);let s=Object.keys(r);return!1!==e.sort&&s.sort(e.sort),s.map((i=>{let r=t[i];return void 0===r?"":null===r?c(i,e):Array.isArray(r)?0===r.length&&"bracket-separator"===e.arrayFormat?c(i,e)+"[]":r.reduce(n(i),[]).join("&"):c(i,e)+"="+c(r,e)})).filter((t=>t.length>0)).join("&")},t.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);let[i,r]=n(t,"#");return Object.assign({url:i.split("?")[0]||"",query:y(m(t),e)},e&&e.parseFragmentIdentifier&&r?{fragmentIdentifier:p(r,e)}:{})},t.stringifyUrl=(e,i)=>{i=Object.assign({encode:!0,strict:!0,[s]:!0},i);let n=f(e.url).split("?")[0]||"",r=t.extract(e.url),o=t.parse(r,{sort:!1}),a=Object.assign(o,e.query),l=t.stringify(a,i);l&&(l="?".concat(l));let u=g(e.url);return e.fragmentIdentifier&&(u="#".concat(i[s]?c(e.fragmentIdentifier,i):e.fragmentIdentifier)),"".concat(n).concat(l).concat(u)},t.pick=(e,i,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[s]:!1},n);let{url:o,query:a,fragmentIdentifier:l}=t.parseUrl(e,n);return t.stringifyUrl({url:o,query:r(a,i),fragmentIdentifier:l},n)},t.exclude=(e,i,n)=>{let r=Array.isArray(i)?t=>!i.includes(t):(t,e)=>!i(t,e);return t.pick(e,r,n)}})),Eu=Ye(((t,e)=>{E();var i=u((function(){this._tweens={},this._tweensAddedDuringUpdate={}}),"_Group");i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(t=void 0!==t?t:r.now();i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var o=this._tweens[i[n]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[i[n]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,r=new i;r.Group=i,r._nextId=0,r.nextId=function(){return r._nextId++},typeof self>"u"&&typeof B<"u"&&B.hrtime?r.now=function(){var t=B.hrtime();return 1e3*t[0]+t[1]/1e6}:typeof self<"u"&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},duration:u((function(t){return this._duration=t,this}),"duration"),start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array||(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:u((function(t){return this._onRepeatCallback=t,this}),"onRepeat"),onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,i,n;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(t-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,n=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,i),1===i){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var s=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=s}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration);return!1}return!0}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),s=r.Interpolation.Utils.Linear;return e<0?s(t[0],t[1],n):e>1?s(t[i],t[i-1],i-n):s(t[o],t[o+1>i?i:o+1],n-o)},Bezier:function(t,e){for(var i=0,n=t.length-1,o=Math.pow,s=r.Interpolation.Utils.Bernstein,a=0;a<=n;a++)i+=o(1-e,n-a)*o(e,a)*t[a]*s(n,a);return i},CatmullRom:function(t,e){var i=t.length-1,n=i*e,o=Math.floor(n),s=r.Interpolation.Utils.CatmullRom;return t[0]===t[i]?(e<0&&(o=Math.floor(n=i*(1+e))),s(t[(o-1+i)%i],t[o],t[(o+1)%i],t[(o+2)%i],n-o)):e<0?t[0]-(s(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(s(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):s(t[o?o-1:0],t[o],t[i<o+1?i:o+1],t[i<o+2?i:o+2],n-o)},Utils:{Linear:function(t,e,i){return(e-t)*i+t},Bernstein:function(t,e){var i=r.Interpolation.Utils.Factorial;return i(t)/i(e)/i(t-e)},Factorial:(n=[1],function(t){var e=1;if(n[t])return n[t];for(var i=t;i>1;i--)e*=i;return n[t]=e,e}),CatmullRom:function(t,e,i,n,r){var o=.5*(i-t),s=.5*(n-e),a=r*r;return(2*e-2*i+o+s)*(r*a)+(-3*e+3*i-2*o-s)*a+o*r+e}}},function(i){"function"==typeof define&&define.amd?define([],(function(){return r})):typeof e<"u"&&"object"==typeof t?e.exports=r:void 0!==i&&(i.TWEEN=r)}(t)})),wY=Ye(((t,e)=>{E(),function(t){var i=/^\s+/,n=/\s+$/,r=0,o=t.round,s=t.min,a=t.max,l=t.random;function h(t,e){if(e=e||{},(t=t||"")instanceof h)return t;if(!(this instanceof h))return new h(t,e);var i=c(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=o(100*this._a)/100,this._format=e.format||i.format,this._gradientType=e.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=i.ok,this._tc_id=r++}function c(t){var e={r:0,g:0,b:0},i=1,n=null,r=null,o=null,l=!1,u=!1;return"string"==typeof t&&(t=Q(t)),"object"==typeof t&&(Z(t.r)&&Z(t.g)&&Z(t.b)?(e=p(t.r,t.g,t.b),l=!0,u="%"===String(t.r).substr(-1)?"prgb":"rgb"):Z(t.h)&&Z(t.s)&&Z(t.v)?(n=j(t.s),r=j(t.v),e=m(t.h,n,r),l=!0,u="hsv"):Z(t.h)&&Z(t.s)&&Z(t.l)&&(n=j(t.s),o=j(t.l),e=f(t.h,n,o),l=!0,u="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=q(i),{ok:l,format:t.format||u,r:s(255,a(e.r,0)),g:s(255,a(e.g,0)),b:s(255,a(e.b,0)),a:i}}function p(t,e,i){return{r:255*B(t,255),g:255*B(e,255),b:255*B(i,255)}}function d(t,e,i){t=B(t,255),e=B(e,255),i=B(i,255);var n,r,o=a(t,e,i),l=s(t,e,i),u=(o+l)/2;if(o==l)n=r=0;else{var h=o-l;switch(r=u>.5?h/(2-o-l):h/(o+l),o){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:r,l:u}}function f(t,e,i){var n,r,o;function s(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=B(t,360),e=B(e,100),i=B(i,100),u(s,"hue2rgb"),0===e)n=r=o=i;else{var a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;n=s(l,a,t+1/3),r=s(l,a,t),o=s(l,a,t-1/3)}return{r:255*n,g:255*r,b:255*o}}function g(t,e,i){t=B(t,255),e=B(e,255),i=B(i,255);var n,r,o=a(t,e,i),l=s(t,e,i),u=o,h=o-l;if(r=0===o?0:h/o,o==l)n=0;else{switch(o){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:r,v:u}}function m(e,i,n){e=6*B(e,360),i=B(i,100),n=B(n,100);var r=t.floor(e),o=e-r,s=n*(1-i),a=n*(1-o*i),l=n*(1-(1-o)*i),u=r%6;return{r:255*[n,a,s,s,l,n][u],g:255*[l,n,n,a,s,s][u],b:255*[s,s,l,n,n,a][u]}}function v(t,e,i,n){var r=[V(o(t).toString(16)),V(o(e).toString(16)),V(o(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function y(t,e,i,n,r){var s=[V(o(t).toString(16)),V(o(e).toString(16)),V(o(i).toString(16)),V(G(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function x(t,e,i,n){return[V(G(n)),V(o(t).toString(16)),V(o(e).toString(16)),V(o(i).toString(16))].join("")}function _(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.s-=e/100,i.s=k(i.s),h(i)}function b(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.s+=e/100,i.s=k(i.s),h(i)}function M(t){return h(t).desaturate(100)}function E(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.l+=e/100,i.l=k(i.l),h(i)}function w(t,e){e=0===e?0:e||10;var i=h(t).toRgb();return i.r=a(0,s(255,i.r-o(-e/100*255))),i.g=a(0,s(255,i.g-o(-e/100*255))),i.b=a(0,s(255,i.b-o(-e/100*255))),h(i)}function A(t,e){e=0===e?0:e||10;var i=h(t).toHsl();return i.l-=e/100,i.l=k(i.l),h(i)}function S(t,e){var i=h(t).toHsl(),n=(i.h+e)%360;return i.h=n<0?360+n:n,h(i)}function T(t){var e=h(t).toHsl();return e.h=(e.h+180)%360,h(e)}function C(t){var e=h(t).toHsl(),i=e.h;return[h(t),h({h:(i+120)%360,s:e.s,l:e.l}),h({h:(i+240)%360,s:e.s,l:e.l})]}function P(t){var e=h(t).toHsl(),i=e.h;return[h(t),h({h:(i+90)%360,s:e.s,l:e.l}),h({h:(i+180)%360,s:e.s,l:e.l}),h({h:(i+270)%360,s:e.s,l:e.l})]}function I(t){var e=h(t).toHsl(),i=e.h;return[h(t),h({h:(i+72)%360,s:e.s,l:e.l}),h({h:(i+216)%360,s:e.s,l:e.l})]}function L(t,e,i){e=e||6,i=i||30;var n=h(t).toHsl(),r=360/i,o=[h(t)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,o.push(h(n));return o}function O(t,e){e=e||6;for(var i=h(t).toHsv(),n=i.h,r=i.s,o=i.v,s=[],a=1/e;e--;)s.push(h({h:n,s:r,v:o})),o=(o+a)%1;return s}u(h,"tinycolor"),h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,i,n,r=this.toRgb();return e=r.r/255,i=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:t.pow((i+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=q(t),this._roundA=o(100*this._a)/100,this},toHsv:function(){var t=g(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=g(this._r,this._g,this._b),e=o(360*t.h),i=o(100*t.s),n=o(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b),e=o(360*t.h),i=o(100*t.s),n=o(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return v(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return y(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*B(this._r,255))+"%",g:o(100*B(this._g,255))+"%",b:o(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*B(this._r,255))+"%, "+o(100*B(this._g,255))+"%, "+o(100*B(this._b,255))+"%)":"rgba("+o(100*B(this._r,255))+"%, "+o(100*B(this._g,255))+"%, "+o(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(D[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+x(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var r=h(t);i="#"+x(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return!e&&n&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t)?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return h(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(E,arguments)},brighten:function(){return this._applyModification(w,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(C,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}},h.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:j(t[n]));t=i}return h(t,e)},u(c,"inputToRGB"),u(p,"rgbToRgb"),u(d,"rgbToHsl"),u(f,"hslToRgb"),u(g,"rgbToHsv"),u(m,"hsvToRgb"),u(v,"rgbToHex"),u(y,"rgbaToHex"),u(x,"rgbaToArgbHex"),h.equals=function(t,e){return!(!t||!e)&&h(t).toRgbString()==h(e).toRgbString()},h.random=function(){return h.fromRatio({r:l(),g:l(),b:l()})},u(_,"desaturate"),u(b,"saturate"),u(M,"greyscale"),u(E,"lighten"),u(w,"brighten"),u(A,"darken"),u(S,"spin"),u(T,"complement"),u(C,"triad"),u(P,"tetrad"),u(I,"splitcomplement"),u(L,"analogous"),u(O,"monochromatic"),h.mix=function(t,e,i){i=0===i?0:i||50;var n=h(t).toRgb(),r=h(e).toRgb(),o=i/100;return h({r:(r.r-n.r)*o+n.r,g:(r.g-n.g)*o+n.g,b:(r.b-n.b)*o+n.b,a:(r.a-n.a)*o+n.a})},h.readability=function(e,i){var n=h(e),r=h(i);return(t.max(n.getLuminance(),r.getLuminance())+.05)/(t.min(n.getLuminance(),r.getLuminance())+.05)},h.isReadable=function(t,e,i){var n,r,o=h.readability(t,e);switch(r=!1,(n=J(i)).level+n.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},h.mostReadable=function(t,e,i){var n,r,o,s,a=null,l=0;r=(i=i||{}).includeFallbackColors,o=i.level,s=i.size;for(var u=0;u<e.length;u++)(n=h.readability(t,e[u]))>l&&(l=n,a=h(e[u]));return h.isReadable(t,a,{level:o,size:s})||!r?a:(i.includeFallbackColors=!1,h.mostReadable(t,["#fff","#000"],i))};var N=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=h.hexNames=R(N);function R(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function q(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function B(e,i){U(e)&&(e="100%");var n=z(e);return e=s(i,a(0,parseFloat(e))),n&&(e=parseInt(e*i,10)/100),t.abs(e-i)<1e-6?1:e%i/parseFloat(i)}function k(t){return s(1,a(0,t))}function F(t){return parseInt(t,16)}function U(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function z(t){return"string"==typeof t&&-1!=t.indexOf("%")}function V(t){return 1==t.length?"0"+t:""+t}function j(t){return t<=1&&(t=100*t+"%"),t}function G(e){return t.round(255*parseFloat(e)).toString(16)}function W(t){return F(t)/255}u(R,"flip"),u(q,"boundAlpha"),u(B,"bound01"),u(k,"clamp01"),u(F,"parseIntFromHex"),u(U,"isOnePointZero"),u(z,"isPercentage"),u(V,"pad2"),u(j,"convertToPercentage"),u(G,"convertDecimalToHex"),u(W,"convertHexToDecimal");var H,Y,X,K=(Y="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",X="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{CSS_UNIT:new RegExp(H),rgb:new RegExp("rgb"+Y),rgba:new RegExp("rgba"+X),hsl:new RegExp("hsl"+Y),hsla:new RegExp("hsla"+X),hsv:new RegExp("hsv"+Y),hsva:new RegExp("hsva"+X),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function Z(t){return!!K.CSS_UNIT.exec(t)}function Q(t){t=t.replace(i,"").replace(n,"").toLowerCase();var e,r=!1;if(N[t])t=N[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=K.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=K.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=K.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=K.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=K.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=K.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=K.hex8.exec(t))?{r:F(e[1]),g:F(e[2]),b:F(e[3]),a:W(e[4]),format:r?"name":"hex8"}:(e=K.hex6.exec(t))?{r:F(e[1]),g:F(e[2]),b:F(e[3]),format:r?"name":"hex"}:(e=K.hex4.exec(t))?{r:F(e[1]+""+e[1]),g:F(e[2]+""+e[2]),b:F(e[3]+""+e[3]),a:W(e[4]+""+e[4]),format:r?"name":"hex8"}:!!(e=K.hex3.exec(t))&&{r:F(e[1]+""+e[1]),g:F(e[2]+""+e[2]),b:F(e[3]+""+e[3]),format:r?"name":"hex"}}function J(t){var e,i;return"AA"!==(e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==e&&(e="AA"),"small"!==(i=(t.size||"small").toLowerCase())&&"large"!==i&&(i="small"),{level:e,size:i}}u(Z,"isValidCSSUnit"),u(Q,"stringInputToObject"),u(J,"validateWCAG2Parms"),typeof e<"u"&&e.exports?e.exports=h:"function"==typeof define&&define.amd?define((function(){return h})):window.tinycolor=h}(Math)})),Kx=Ye(((t,e)=>{E();var i="__lodash_hash_undefined__",n=9007199254740991,r="[object Arguments]",o="[object Function]",s="[object Object]",a=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,h={};h["[object Float32Array]"]=h["[object Float64Array]"]=h["[object Int8Array]"]=h["[object Int16Array]"]=h["[object Int32Array]"]=h["[object Uint8Array]"]=h["[object Uint8ClampedArray]"]=h["[object Uint16Array]"]=h["[object Uint32Array]"]=!0,h[r]=h["[object Array]"]=h["[object ArrayBuffer]"]=h["[object Boolean]"]=h["[object DataView]"]=h["[object Date]"]=h["[object Error]"]=h[o]=h["[object Map]"]=h["[object Number]"]=h[s]=h["[object RegExp]"]=h["[object Set]"]=h["[object String]"]=h["[object WeakMap]"]=!1;var c="object"==typeof global&&global&&global.Object===Object&&global,p="object"==typeof self&&self&&self.Object===Object&&self,d=c||p||Function("return this")(),f="object"==typeof t&&t&&!t.nodeType&&t,g=f&&"object"==typeof e&&e&&!e.nodeType&&e,m=g&&g.exports===f,v=m&&c.process,y=function(){try{return g&&g.require&&g.require("util").types||v&&v.binding&&v.binding("util")}catch{}}(),x=y&&y.isTypedArray;function _(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function b(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function M(t){return function(e){return t(e)}}function w(t,e){return null==t?void 0:t[e]}function A(t,e){return function(i){return t(e(i))}}u(_,"apply"),u(b,"baseTimes"),u(M,"baseUnary"),u(w,"getValue"),u(A,"overArg");var S,T=Array.prototype,C=Function.prototype,P=Object.prototype,I=d["__core-js_shared__"],L=C.toString,O=P.hasOwnProperty,N=(S=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",D=P.toString,R=L.call(Object),q=RegExp("^"+L.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),B=m?d.Buffer:void 0,k=d.Symbol,F=d.Uint8Array,U=B?B.allocUnsafe:void 0,z=A(Object.getPrototypeOf,Object),V=Object.create,j=P.propertyIsEnumerable,G=T.splice,W=k?k.toStringTag:void 0,H=function(){try{var t=Yt(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Y=B?B.isBuffer:void 0,X=Math.max,K=Date.now,Z=Yt(d,"Map"),Q=Yt(Object,"create"),J=function(){function t(){}return u(t,"object"),function(e){if(!me(e))return{};if(V)return V(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();function $(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function tt(){this.__data__=Q?Q(null):{},this.size=0}function et(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function it(t){var e=this.__data__;if(Q){var n=e[t];return n===i?void 0:n}return O.call(e,t)?e[t]:void 0}function nt(t){var e=this.__data__;return Q?void 0!==e[t]:O.call(e,t)}function rt(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Q&&void 0===e?i:e,this}function ot(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function st(){this.__data__=[],this.size=0}function at(t){var e=this.__data__,i=St(e,t);return!(i<0)&&(i==e.length-1?e.pop():G.call(e,i,1),--this.size,!0)}function lt(t){var e=this.__data__,i=St(e,t);return i<0?void 0:e[i][1]}function ut(t){return St(this.__data__,t)>-1}function ht(t,e){var i=this.__data__,n=St(i,t);return n<0?(++this.size,i.push([t,e])):i[n][1]=e,this}function ct(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function pt(){this.size=0,this.__data__={hash:new $,map:new(Z||ot),string:new $}}function dt(t){var e=Ht(this,t).delete(t);return this.size-=e?1:0,e}function ft(t){return Ht(this,t).get(t)}function gt(t){return Ht(this,t).has(t)}function mt(t,e){var i=Ht(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this}function vt(t){var e=this.__data__=new ot(t);this.size=e.size}function yt(){this.__data__=new ot,this.size=0}function xt(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}function _t(t){return this.__data__.get(t)}function bt(t){return this.__data__.has(t)}function Mt(t,e){var i=this.__data__;if(i instanceof ot){var n=i.__data__;if(!Z||n.length<199)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new ct(n)}return i.set(t,e),this.size=i.size,this}function Et(t,e){var i=he(t),n=!i&&ue(t),r=!i&&!n&&de(t),o=!i&&!n&&!r&&xe(t),s=i||n||r||o,a=s?b(t.length,String):[],l=a.length;for(var u in t)(e||O.call(t,u))&&(!s||!("length"==u||r&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Zt(u,l)))&&a.push(u);return a}function wt(t,e,i){(void 0!==i&&!le(t[e],i)||void 0===i&&!(e in t))&&Tt(t,e,i)}function At(t,e,i){var n=t[e];(!O.call(t,e)||!le(n,i)||void 0===i&&!(e in t))&&Tt(t,e,i)}function St(t,e){for(var i=t.length;i--;)if(le(t[i][0],e))return i;return-1}function Tt(t,e,i){"__proto__"==e&&H?H(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}u($,"Hash"),u(tt,"hashClear"),u(et,"hashDelete"),u(it,"hashGet"),u(nt,"hashHas"),u(rt,"hashSet"),$.prototype.clear=tt,$.prototype.delete=et,$.prototype.get=it,$.prototype.has=nt,$.prototype.set=rt,u(ot,"ListCache"),u(st,"listCacheClear"),u(at,"listCacheDelete"),u(lt,"listCacheGet"),u(ut,"listCacheHas"),u(ht,"listCacheSet"),ot.prototype.clear=st,ot.prototype.delete=at,ot.prototype.get=lt,ot.prototype.has=ut,ot.prototype.set=ht,u(ct,"MapCache"),u(pt,"mapCacheClear"),u(dt,"mapCacheDelete"),u(ft,"mapCacheGet"),u(gt,"mapCacheHas"),u(mt,"mapCacheSet"),ct.prototype.clear=pt,ct.prototype.delete=dt,ct.prototype.get=ft,ct.prototype.has=gt,ct.prototype.set=mt,u(vt,"Stack"),u(yt,"stackClear"),u(xt,"stackDelete"),u(_t,"stackGet"),u(bt,"stackHas"),u(Mt,"stackSet"),vt.prototype.clear=yt,vt.prototype.delete=xt,vt.prototype.get=_t,vt.prototype.has=bt,vt.prototype.set=Mt,u(Et,"arrayLikeKeys"),u(wt,"assignMergeValue"),u(At,"assignValue"),u(St,"assocIndexOf"),u(Tt,"baseAssignValue");var Ct=Gt();function Pt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":W&&W in Object(t)?Xt(t):ie(t)}function It(t){return ve(t)&&Pt(t)==r}function Lt(t){return!(!me(t)||$t(t))&&(fe(t)?q:a).test(ae(t))}function Ot(t){return ve(t)&&ge(t.length)&&!!h[Pt(t)]}function Nt(t){if(!me(t))return ee(t);var e=te(t),i=[];for(var n in t)"constructor"==n&&(e||!O.call(t,n))||i.push(n);return i}function Dt(t,e,i,n,r){t!==e&&Ct(e,(function(o,s){if(r||(r=new vt),me(o))Rt(t,e,s,i,Dt,n,r);else{var a=n?n(re(t,s),o,s+"",t,e,r):void 0;void 0===a&&(a=o),wt(t,s,a)}}),Me)}function Rt(t,e,i,n,r,o,s){var a=re(t,i),l=re(e,i),u=s.get(l);if(u)wt(t,i,u);else{var h=o?o(a,l,i+"",t,e,s):void 0,c=void 0===h;if(c){var p=he(l),d=!p&&de(l),f=!p&&!d&&xe(l);h=l,p||d||f?he(a)?h=a:pe(a)?h=zt(a):d?(c=!1,h=kt(l,!0)):f?(c=!1,h=Ut(l,!0)):h=[]:ye(l)||ue(l)?(h=a,ue(a)?h=_e(a):(!me(a)||fe(a))&&(h=Kt(l))):c=!1}c&&(s.set(l,h),r(h,l,n,o,s),s.delete(l)),wt(t,i,h)}}function qt(t,e){return oe(ne(t,e,Ae),t+"")}u(Pt,"baseGetTag"),u(It,"baseIsArguments"),u(Lt,"baseIsNative"),u(Ot,"baseIsTypedArray"),u(Nt,"baseKeysIn"),u(Dt,"baseMerge"),u(Rt,"baseMergeDeep"),u(qt,"baseRest");var Bt=H?function(t,e){return H(t,"toString",{configurable:!0,enumerable:!1,value:we(e),writable:!0})}:Ae;function kt(t,e){if(e)return t.slice();var i=t.length,n=U?U(i):new t.constructor(i);return t.copy(n),n}function Ft(t){var e=new t.constructor(t.byteLength);return new F(e).set(new F(t)),e}function Ut(t,e){var i=e?Ft(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function zt(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}function Vt(t,e,i,n){var r=!i;i||(i={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=n?n(i[a],t[a],a,i,t):void 0;void 0===l&&(l=t[a]),r?Tt(i,a,l):At(i,a,l)}return i}function jt(t){return qt((function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&Qt(i[0],i[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=i[n];a&&t(e,a,n,o)}return e}))}function Gt(t){return function(e,i,n){for(var r=-1,o=Object(e),s=n(e),a=s.length;a--;){var l=s[t?a:++r];if(!1===i(o[l],l,o))break}return e}}function Wt(t,e,i,n,r,o){return me(t)&&me(e)&&(o.set(e,t),Dt(t,e,void 0,Wt,o),o.delete(e)),t}function Ht(t,e){var i=t.__data__;return Jt(e)?i["string"==typeof e?"string":"hash"]:i.map}function Yt(t,e){var i=w(t,e);return Lt(i)?i:void 0}function Xt(t){var e=O.call(t,W),i=t[W];try{t[W]=void 0;var n=!0}catch{}var r=D.call(t);return n&&(e?t[W]=i:delete t[W]),r}function Kt(t){return"function"!=typeof t.constructor||te(t)?{}:J(z(t))}function Zt(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&l.test(t))&&t>-1&&t%1==0&&t<e}function Qt(t,e,i){if(!me(i))return!1;var n=typeof e;return!!("number"==n?ce(i)&&Zt(e,i.length):"string"==n&&e in i)&&le(i[e],t)}function Jt(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function $t(t){return!!N&&N in t}function te(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||P)}function ee(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function ie(t){return D.call(t)}function ne(t,e,i){return e=X(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=X(n.length-e,0),s=Array(o);++r<o;)s[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=i(s),_(t,this,a)}}function re(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}u(kt,"cloneBuffer"),u(Ft,"cloneArrayBuffer"),u(Ut,"cloneTypedArray"),u(zt,"copyArray"),u(Vt,"copyObject"),u(jt,"createAssigner"),u(Gt,"createBaseFor"),u(Wt,"customDefaultsMerge"),u(Ht,"getMapData"),u(Yt,"getNative"),u(Xt,"getRawTag"),u(Kt,"initCloneObject"),u(Zt,"isIndex"),u(Qt,"isIterateeCall"),u(Jt,"isKeyable"),u($t,"isMasked"),u(te,"isPrototype"),u(ee,"nativeKeysIn"),u(ie,"objectToString"),u(ne,"overRest"),u(re,"safeGet");var oe=se(Bt);function se(t){var e=0,i=0;return function(){var n=K(),r=16-(n-i);if(i=n,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function ae(t){if(null!=t){try{return L.call(t)}catch{}try{return t+""}catch{}}return""}function le(t,e){return t===e||t!=t&&e!=e}u(se,"shortOut"),u(ae,"toSource"),u(le,"eq");var ue=It(function(){return arguments}())?It:function(t){return ve(t)&&O.call(t,"callee")&&!j.call(t,"callee")},he=Array.isArray;function ce(t){return null!=t&&ge(t.length)&&!fe(t)}function pe(t){return ve(t)&&ce(t)}u(ce,"isArrayLike"),u(pe,"isArrayLikeObject");var de=Y||Se;function fe(t){if(!me(t))return!1;var e=Pt(t);return e==o||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function ge(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}function me(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ve(t){return null!=t&&"object"==typeof t}function ye(t){if(!ve(t)||Pt(t)!=s)return!1;var e=z(t);if(null===e)return!0;var i=O.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&L.call(i)==R}u(fe,"isFunction"),u(ge,"isLength"),u(me,"isObject"),u(ve,"isObjectLike"),u(ye,"isPlainObject");var xe=x?M(x):Ot;function _e(t){return Vt(t,Me(t))}u(_e,"toPlainObject");var be=qt((function(t){return t.push(void 0,Wt),_(Ee,void 0,t)}));function Me(t){return ce(t)?Et(t,!0):Nt(t)}u(Me,"keysIn");var Ee=jt((function(t,e,i,n){Dt(t,e,i,n)}));function we(t){return function(){return t}}function Ae(t){return t}function Se(){return!1}u(we,"constant"),u(Ae,"identity"),u(Se,"stubFalse"),e.exports=be})),hX=Ye(((t,e)=>{E();var i=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function o(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}u(r,"apply"),u(o,"baseTimes");var s=Object.prototype,a=s.hasOwnProperty,l=s.toString,h=s.propertyIsEnumerable,c=Math.max;function p(t,e){var i=S(t)||A(t)?o(t.length,String):[],n=i.length,r=!!n;for(var s in t)(e||a.call(t,s))&&(!r||"length"!=s&&!x(s,n))&&i.push(s);return i}function d(t,e,i,n){return void 0===t||w(t,s[i])&&!a.call(n,i)?e:t}function f(t,e,i){var n=t[e];(!a.call(t,e)||!w(n,i)||void 0===i&&!(e in t))&&(t[e]=i)}function g(t){if(!L(t))return M(t);var e=b(t),i=[];for(var n in t)"constructor"==n&&(e||!a.call(t,n))||i.push(n);return i}function m(t,e){return e=c(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,o=c(i.length-e,0),s=Array(o);++n<o;)s[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=s,r(t,this,a)}}function v(t,e,i,n){i||(i={});for(var r=-1,o=e.length;++r<o;){var s=e[r],a=n?n(i[s],t[s],s,i,t):void 0;f(i,s,void 0===a?t[s]:a)}return i}function y(t){return m((function(e,i){var n=-1,r=i.length,o=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(r--,o):void 0,s&&_(i[0],i[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++n<r;){var a=i[n];a&&t(e,a,n,o)}return e}))}function x(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}function _(t,e,i){if(!L(i))return!1;var n=typeof e;return!!("number"==n?T(i)&&x(e,i.length):"string"==n&&e in i)&&w(i[e],t)}function b(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||s)}function M(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}function w(t,e){return t===e||t!=t&&e!=e}function A(t){return C(t)&&a.call(t,"callee")&&(!h.call(t,"callee")||"[object Arguments]"==l.call(t))}u(p,"arrayLikeKeys"),u(d,"assignInDefaults"),u(f,"assignValue"),u(g,"baseKeysIn"),u(m,"baseRest"),u(v,"copyObject"),u(y,"createAssigner"),u(x,"isIndex"),u(_,"isIterateeCall"),u(b,"isPrototype"),u(M,"nativeKeysIn"),u(w,"eq"),u(A,"isArguments");var S=Array.isArray;function T(t){return null!=t&&I(t.length)&&!P(t)}function C(t){return O(t)&&T(t)}function P(t){var e=L(t)?l.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function I(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function L(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function O(t){return!!t&&"object"==typeof t}u(T,"isArrayLike"),u(C,"isArrayLikeObject"),u(P,"isFunction"),u(I,"isLength"),u(L,"isObject"),u(O,"isObjectLike");var N=y((function(t,e,i,n){v(e,R(e),t,n)})),D=m((function(t){return t.push(void 0,d),r(N,void 0,t)}));function R(t){return T(t)?p(t,!0):g(t)}u(R,"keysIn"),e.exports=D})),_X=Ye(((t,e)=>{"use strict";E();var i,n={},r=!1;typeof e<"u"&&e.exports?(e.exports=n,r=!0):typeof document<"u"?window.ClipperLib=n:self.ClipperLib=n,r?(o="chrome",i="Netscape"):(o=navigator.userAgent.toString().toLowerCase(),i=navigator.appName);var o,s={};-1!=o.indexOf("chrome")&&-1==o.indexOf("chromium")?s.chrome=1:s.chrome=0,-1!=o.indexOf("chromium")?s.chromium=1:s.chromium=0,-1!=o.indexOf("safari")&&-1==o.indexOf("chrome")&&-1==o.indexOf("chromium")?s.safari=1:s.safari=0,-1!=o.indexOf("firefox")?s.firefox=1:s.firefox=0,-1!=o.indexOf("firefox/17")?s.firefox17=1:s.firefox17=0,-1!=o.indexOf("firefox/15")?s.firefox15=1:s.firefox15=0,-1!=o.indexOf("firefox/3")?s.firefox3=1:s.firefox3=0,-1!=o.indexOf("opera")?s.opera=1:s.opera=0,-1!=o.indexOf("msie 10")?s.msie10=1:s.msie10=0,-1!=o.indexOf("msie 9")?s.msie9=1:s.msie9=0,-1!=o.indexOf("msie 8")?s.msie8=1:s.msie8=0,-1!=o.indexOf("msie 7")?s.msie7=1:s.msie7=0,-1!=o.indexOf("msie ")?s.msie=1:s.msie=0,n.biginteger_used=null;var a;function l(t,e,i){n.biginteger_used=1,null!=t&&("number"==typeof t&&typeof e>"u"?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function h(){return new l(null)}function c(t,e,i,n,r,o){for(;--o>=0;){var s=e*this[t++]+i[n]+r;r=Math.floor(s/67108864),i[n++]=67108863&s}return r}function p(t,e,i,n,r,o){for(var s=32767&e,a=e>>15;--o>=0;){var l=32767&this[t],u=this[t++]>>15,h=a*l+u*s;r=((l=s*l+((32767&h)<<15)+i[n]+(1073741823&r))>>>30)+(h>>>15)+a*u+(r>>>30),i[n++]=1073741823&l}return r}function d(t,e,i,n,r,o){for(var s=16383&e,a=e>>14;--o>=0;){var l=16383&this[t],u=this[t++]>>14,h=a*l+u*s;r=((l=s*l+((16383&h)<<14)+i[n]+r)>>28)+(h>>14)+a*u,i[n++]=268435455&l}return r}u(l,"BigInteger"),u(h,"nbi"),u(c,"am1"),u(p,"am2"),u(d,"am3"),"Microsoft Internet Explorer"==i?(l.prototype.am=p,a=30):"Netscape"!=i?(l.prototype.am=c,a=26):(l.prototype.am=d,a=28),l.prototype.DB=a,l.prototype.DM=(1<<a)-1,l.prototype.DV=1<<a;l.prototype.FV=Math.pow(2,52),l.prototype.F1=52-a,l.prototype.F2=2*a-52;var f,g,m=new Array;for(f="0".charCodeAt(0),g=0;g<=9;++g)m[f++]=g;for(f="a".charCodeAt(0),g=10;g<36;++g)m[f++]=g;for(f="A".charCodeAt(0),g=10;g<36;++g)m[f++]=g;function v(t){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t)}function y(t,e){var i=m[t.charCodeAt(e)];return null==i?-1:i}function x(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function _(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function b(t){var e=h();return e.fromInt(t),e}function M(t,e){var i;if(16==e)i=4;else if(8==e)i=3;else if(256==e)i=8;else if(2==e)i=1;else if(32==e)i=5;else{if(4!=e)return void this.fromRadix(t,e);i=2}this.t=0,this.s=0;for(var n=t.length,r=!1,o=0;--n>=0;){var s=8==i?255&t[n]:y(t,n);s<0?"-"==t.charAt(n)&&(r=!0):(r=!1,0==o?this[this.t++]=s:o+i>this.DB?(this[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this[this.t++]=s>>this.DB-o):this[this.t-1]|=s<<o,(o+=i)>=this.DB&&(o-=this.DB))}8==i&&128&t[0]&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),r&&l.ZERO.subTo(this,this)}function w(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function A(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,r=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(i=this[s]>>a)>0&&(r=!0,o=v(i));s>=0;)a<e?(i=(this[s]&(1<<a)-1)<<e-a,i|=this[--s]>>(a+=this.DB-e)):(i=this[s]>>(a-=e)&n,a<=0&&(a+=this.DB,--s)),i>0&&(r=!0),r&&(o+=v(i));return r?o:"0"}function S(){var t=h();return l.ZERO.subTo(this,t),t}function T(){return this.s<0?this.negate():this}function C(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function P(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function I(){return this.t<=0?0:this.DB*(this.t-1)+P(this[this.t-1]^this.s&this.DM)}function L(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function O(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function N(t,e){var i,n=t%this.DB,r=this.DB-n,o=(1<<r)-1,s=Math.floor(t/this.DB),a=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+s+1]=this[i]>>r|a,a=(this[i]&o)<<n;for(i=s-1;i>=0;--i)e[i]=0;e[s]=a,e.t=this.t+s+1,e.s=this.s,e.clamp()}function D(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,r=this.DB-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&o)<<r,e[s-i]=this[s]>>n;n>0&&(e[this.t-i-1]|=(this.s&o)<<r),e.t=this.t-i,e.clamp()}}function R(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function q(t,e){var i=this.abs(),n=t.abs(),r=i.t;for(e.t=r+n.t;--r>=0;)e[r]=0;for(r=0;r<n.t;++r)e[r+i.t]=i.am(0,n[r],e,r,0,i.t);e.s=0,e.clamp(),this.s!=t.s&&l.ZERO.subTo(e,e)}function B(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function k(t,e,i){var n=t.abs();if(!(n.t<=0)){var r=this.abs();if(r.t<n.t)return null!=e&&e.fromInt(0),void(null!=i&&this.copyTo(i));null==i&&(i=h());var o=h(),s=this.s,a=t.s,u=this.DB-P(n[n.t-1]);u>0?(n.lShiftTo(u,o),r.lShiftTo(u,i)):(n.copyTo(o),r.copyTo(i));var c=o.t,p=o[c-1];if(0!=p){var d=p*(1<<this.F1)+(c>1?o[c-2]>>this.F2:0),f=this.FV/d,g=(1<<this.F1)/d,m=1<<this.F2,v=i.t,y=v-c,x=null==e?h():e;for(o.dlShiftTo(y,x),i.compareTo(x)>=0&&(i[i.t++]=1,i.subTo(x,i)),l.ONE.dlShiftTo(c,x),x.subTo(o,o);o.t<c;)o[o.t++]=0;for(;--y>=0;){var _=i[--v]==p?this.DM:Math.floor(i[v]*f+(i[v-1]+m)*g);if((i[v]+=o.am(0,_,i,y,0,c))<_)for(o.dlShiftTo(y,x),i.subTo(x,i);i[v]<--_;)i.subTo(x,i)}null!=e&&(i.drShiftTo(c,e),s!=a&&l.ZERO.subTo(e,e)),i.t=c,i.clamp(),u>0&&i.rShiftTo(u,i),s<0&&l.ZERO.subTo(i,i)}}}function F(t){var e=h();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(l.ZERO)>0&&t.subTo(e,e),e}function U(t){this.m=t}function z(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function V(t){return t}function j(t){t.divRemTo(this.m,null,t)}function G(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function W(t,e){t.squareTo(e),this.reduce(e)}function H(){if(this.t<1)return 0;var t=this[0];if(!(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e}function Y(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function X(t){var e=h();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(l.ZERO)>0&&this.m.subTo(e,e),e}function K(t){var e=h();return t.copyTo(e),this.reduce(e),e}function Z(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[i=e+this.m.t]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Q(t,e){t.squareTo(e),this.reduce(e)}function J(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function $(){return 0==(this.t>0?1&this[0]:this.s)}function tt(t,e){if(t>4294967295||t<1)return l.ONE;var i=h(),n=h(),r=e.convert(this),o=P(t)-1;for(r.copyTo(i);--o>=0;)if(e.sqrTo(i,n),(t&1<<o)>0)e.mulTo(n,r,i);else{var s=i;i=n,n=s}return e.revert(i)}function et(t,e){var i;return i=t<256||e.isEven()?new U(e):new Y(e),this.exp(t,i)}function it(){var t=h();return this.copyTo(t),t}function nt(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function rt(){return 0==this.t?this.s:this[0]<<24>>24}function ot(){return 0==this.t?this.s:this[0]<<16>>16}function st(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function at(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function lt(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),i=Math.pow(t,e),n=b(i),r=h(),o=h(),s="";for(this.divRemTo(n,r,o);r.signum()>0;)s=(i+o.intValue()).toString(t).substr(1)+s,r.divRemTo(n,r,o);return o.intValue().toString(t)+s}function ut(t,e){this.fromInt(0),null==e&&(e=10);for(var i=this.chunkSize(e),n=Math.pow(e,i),r=!1,o=0,s=0,a=0;a<t.length;++a){var u=y(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(r=!0):(s=e*s+u,++o>=i&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0))}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),r&&l.ZERO.subTo(this,this)}function ht(t,e,i){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,i),this.testBit(t-1)||this.bitwiseTo(l.ONE.shiftLeft(t-1),yt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(l.ONE.shiftLeft(t-1),this);else{var n=new Array,r=7&t;n.length=1+(t>>3),e.nextBytes(n),r>0?n[0]&=(1<<r)-1:n[0]=0,this.fromString(n,256)}}function ct(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,r=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[r++]=i|this.s<<this.DB-n);t>=0;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),128&i&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(e[r++]=i);return e}function pt(t){return 0==this.compareTo(t)}function dt(t){return this.compareTo(t)<0?this:t}function ft(t){return this.compareTo(t)>0?this:t}function gt(t,e,i){var n,r,o=Math.min(t.t,this.t);for(n=0;n<o;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=o;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=o;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function mt(t,e){return t&e}function vt(t){var e=h();return this.bitwiseTo(t,mt,e),e}function yt(t,e){return t|e}function xt(t){var e=h();return this.bitwiseTo(t,yt,e),e}function _t(t,e){return t^e}function bt(t){var e=h();return this.bitwiseTo(t,_t,e),e}function Mt(t,e){return t&~e}function Et(t){var e=h();return this.bitwiseTo(t,Mt,e),e}function wt(){for(var t=h(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function At(t){var e=h();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function St(t){var e=h();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Tt(t){if(0==t)return-1;var e=0;return 65535&t||(t>>=16,e+=16),255&t||(t>>=8,e+=8),15&t||(t>>=4,e+=4),3&t||(t>>=2,e+=2),1&t||++e,e}function Ct(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+Tt(this[t]);return this.s<0?this.t*this.DB:-1}function Pt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function It(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=Pt(this[i]^e);return t}function Lt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Ot(t,e){var i=l.ONE.shiftLeft(t);return this.bitwiseTo(i,e,i),i}function Nt(t){return this.changeBit(t,yt)}function Dt(t){return this.changeBit(t,Mt)}function Rt(t){return this.changeBit(t,_t)}function qt(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function Bt(t){var e=h();return this.addTo(t,e),e}function kt(t){var e=h();return this.subTo(t,e),e}function Ft(t){var e=h();return this.multiplyTo(t,e),e}function Ut(){var t=h();return this.squareTo(t),t}function zt(t){var e=h();return this.divRemTo(t,e,null),e}function Vt(t){var e=h();return this.divRemTo(t,null,e),e}function jt(t){var e=h(),i=h();return this.divRemTo(t,e,i),new Array(e,i)}function Gt(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Wt(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Ht(){}function Yt(t){return t}function Xt(t,e,i){t.multiplyTo(e,i)}function Kt(t,e){t.squareTo(e)}function Zt(t){return this.exp(t,new Ht)}function Qt(t,e,i){var n,r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;r>0;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()}function Jt(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function $t(t){this.r2=h(),this.q3=h(),l.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function te(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=h();return t.copyTo(e),this.reduce(e),e}function ee(t){return t}function ie(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function ne(t,e){t.squareTo(e),this.reduce(e)}function re(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function oe(t,e){var i,n,r=t.bitLength(),o=b(1);if(r<=0)return o;i=r<18?1:r<48?3:r<144?4:r<768?5:6,n=r<8?new U(e):e.isEven()?new $t(e):new Y(e);var s=new Array,a=3,l=i-1,u=(1<<i)-1;if(s[1]=n.convert(this),i>1){var c=h();for(n.sqrTo(s[1],c);a<=u;)s[a]=h(),n.mulTo(c,s[a-2],s[a]),a+=2}var p,d,f=t.t-1,g=!0,m=h();for(r=P(t[f])-1;f>=0;){for(r>=l?p=t[f]>>r-l&u:(p=(t[f]&(1<<r+1)-1)<<l-r,f>0&&(p|=t[f-1]>>this.DB+r-l)),a=i;!(1&p);)p>>=1,--a;if((r-=a)<0&&(r+=this.DB,--f),g)s[p].copyTo(o),g=!1;else{for(;a>1;)n.sqrTo(o,m),n.sqrTo(m,o),a-=2;a>0?n.sqrTo(o,m):(d=o,o=m,m=d),n.mulTo(m,s[p],o)}for(;f>=0&&!(t[f]&1<<r);)n.sqrTo(o,m),d=o,o=m,m=d,--r<0&&(r=this.DB-1,--f)}return n.revert(o)}function se(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(r<o&&(o=r),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i}function ae(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function le(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return l.ZERO;for(var i=t.clone(),n=this.clone(),r=b(1),o=b(0),s=b(0),a=b(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),e?((!r.isEven()||!o.isEven())&&(r.addTo(this,r),o.subTo(t,o)),r.rShiftTo(1,r)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);i.compareTo(n)>=0?(i.subTo(n,i),e&&r.subTo(s,r),o.subTo(a,o)):(n.subTo(i,n),e&&s.subTo(r,s),a.subTo(o,a))}return 0!=n.compareTo(l.ONE)?l.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}u(v,"int2char"),u(y,"intAt"),u(x,"bnpCopyTo"),u(_,"bnpFromInt"),u(b,"nbv"),u(M,"bnpFromString"),u(w,"bnpClamp"),u(A,"bnToString"),u(S,"bnNegate"),u(T,"bnAbs"),u(C,"bnCompareTo"),u(P,"nbits"),u(I,"bnBitLength"),u(L,"bnpDLShiftTo"),u(O,"bnpDRShiftTo"),u(N,"bnpLShiftTo"),u(D,"bnpRShiftTo"),u(R,"bnpSubTo"),u(q,"bnpMultiplyTo"),u(B,"bnpSquareTo"),u(k,"bnpDivRemTo"),u(F,"bnMod"),u(U,"Classic"),u(z,"cConvert"),u(V,"cRevert"),u(j,"cReduce"),u(G,"cMulTo"),u(W,"cSqrTo"),U.prototype.convert=z,U.prototype.revert=V,U.prototype.reduce=j,U.prototype.mulTo=G,U.prototype.sqrTo=W,u(H,"bnpInvDigit"),u(Y,"Montgomery"),u(X,"montConvert"),u(K,"montRevert"),u(Z,"montReduce"),u(Q,"montSqrTo"),u(J,"montMulTo"),Y.prototype.convert=X,Y.prototype.revert=K,Y.prototype.reduce=Z,Y.prototype.mulTo=J,Y.prototype.sqrTo=Q,u($,"bnpIsEven"),u(tt,"bnpExp"),u(et,"bnModPowInt"),l.prototype.copyTo=x,l.prototype.fromInt=_,l.prototype.fromString=M,l.prototype.clamp=w,l.prototype.dlShiftTo=L,l.prototype.drShiftTo=O,l.prototype.lShiftTo=N,l.prototype.rShiftTo=D,l.prototype.subTo=R,l.prototype.multiplyTo=q,l.prototype.squareTo=B,l.prototype.divRemTo=k,l.prototype.invDigit=H,l.prototype.isEven=$,l.prototype.exp=tt,l.prototype.toString=A,l.prototype.negate=S,l.prototype.abs=T,l.prototype.compareTo=C,l.prototype.bitLength=I,l.prototype.mod=F,l.prototype.modPowInt=et,l.ZERO=b(0),l.ONE=b(1),u(it,"bnClone"),u(nt,"bnIntValue"),u(rt,"bnByteValue"),u(ot,"bnShortValue"),u(st,"bnpChunkSize"),u(at,"bnSigNum"),u(lt,"bnpToRadix"),u(ut,"bnpFromRadix"),u(ht,"bnpFromNumber"),u(ct,"bnToByteArray"),u(pt,"bnEquals"),u(dt,"bnMin"),u(ft,"bnMax"),u(gt,"bnpBitwiseTo"),u(mt,"op_and"),u(vt,"bnAnd"),u(yt,"op_or"),u(xt,"bnOr"),u(_t,"op_xor"),u(bt,"bnXor"),u(Mt,"op_andnot"),u(Et,"bnAndNot"),u(wt,"bnNot"),u(At,"bnShiftLeft"),u(St,"bnShiftRight"),u(Tt,"lbit"),u(Ct,"bnGetLowestSetBit"),u(Pt,"cbit"),u(It,"bnBitCount"),u(Lt,"bnTestBit"),u(Ot,"bnpChangeBit"),u(Nt,"bnSetBit"),u(Dt,"bnClearBit"),u(Rt,"bnFlipBit"),u(qt,"bnpAddTo"),u(Bt,"bnAdd"),u(kt,"bnSubtract"),u(Ft,"bnMultiply"),u(Ut,"bnSquare"),u(zt,"bnDivide"),u(Vt,"bnRemainder"),u(jt,"bnDivideAndRemainder"),u(Gt,"bnpDMultiply"),u(Wt,"bnpDAddOffset"),u(Ht,"NullExp"),u(Yt,"nNop"),u(Xt,"nMulTo"),u(Kt,"nSqrTo"),Ht.prototype.convert=Yt,Ht.prototype.revert=Yt,Ht.prototype.mulTo=Xt,Ht.prototype.sqrTo=Kt,u(Zt,"bnPow"),u(Qt,"bnpMultiplyLowerTo"),u(Jt,"bnpMultiplyUpperTo"),u($t,"Barrett"),u(te,"barrettConvert"),u(ee,"barrettRevert"),u(ie,"barrettReduce"),u(ne,"barrettSqrTo"),u(re,"barrettMulTo"),$t.prototype.convert=te,$t.prototype.revert=ee,$t.prototype.reduce=ie,$t.prototype.mulTo=re,$t.prototype.sqrTo=ne,u(oe,"bnModPow"),u(se,"bnGCD"),u(ae,"bnpModInt"),u(le,"bnModInverse");var ue=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],he=(1<<26)/ue[ue.length-1];function ce(t){var e,i=this.abs();if(1==i.t&&i[0]<=ue[ue.length-1]){for(e=0;e<ue.length;++e)if(i[0]==ue[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<ue.length;){for(var n=ue[e],r=e+1;r<ue.length&&n<he;)n*=ue[r++];for(n=i.modInt(n);e<r;)if(n%ue[e++]==0)return!1}return i.millerRabin(t)}function pe(t){var e=this.subtract(l.ONE),i=e.getLowestSetBit();if(i<=0)return!1;var n=e.shiftRight(i);(t=t+1>>1)>ue.length&&(t=ue.length);for(var r=h(),o=0;o<t;++o){r.fromInt(ue[Math.floor(Math.random()*ue.length)]);var s=r.modPow(n,this);if(0!=s.compareTo(l.ONE)&&0!=s.compareTo(e)){for(var a=1;a++<i&&0!=s.compareTo(e);)if(0==(s=s.modPowInt(2,this)).compareTo(l.ONE))return!1;if(0!=s.compareTo(e))return!1}}return!0}u(ce,"bnIsProbablePrime"),u(pe,"bnpMillerRabin"),l.prototype.chunkSize=st,l.prototype.toRadix=lt,l.prototype.fromRadix=ut,l.prototype.fromNumber=ht,l.prototype.bitwiseTo=gt,l.prototype.changeBit=Ot,l.prototype.addTo=qt,l.prototype.dMultiply=Gt,l.prototype.dAddOffset=Wt,l.prototype.multiplyLowerTo=Qt,l.prototype.multiplyUpperTo=Jt,l.prototype.modInt=ae,l.prototype.millerRabin=pe,l.prototype.clone=it,l.prototype.intValue=nt,l.prototype.byteValue=rt,l.prototype.shortValue=ot,l.prototype.signum=at,l.prototype.toByteArray=ct,l.prototype.equals=pt,l.prototype.min=dt,l.prototype.max=ft,l.prototype.and=vt,l.prototype.or=xt,l.prototype.xor=bt,l.prototype.andNot=Et,l.prototype.not=wt,l.prototype.shiftLeft=At,l.prototype.shiftRight=St,l.prototype.getLowestSetBit=Ct,l.prototype.bitCount=It,l.prototype.testBit=Lt,l.prototype.setBit=Nt,l.prototype.clearBit=Dt,l.prototype.flipBit=Rt,l.prototype.add=Bt,l.prototype.subtract=kt,l.prototype.multiply=Ft,l.prototype.divide=zt,l.prototype.remainder=Vt,l.prototype.divideAndRemainder=jt,l.prototype.modPow=oe,l.prototype.modInverse=le,l.prototype.pow=Zt,l.prototype.gcd=se,l.prototype.isProbablePrime=ce,l.prototype.square=Ut;var de,fe=l;fe.prototype.IsNegative=function(){return-1==this.compareTo(fe.ZERO)},fe.op_Equality=function(t,e){return 0==t.compareTo(e)},fe.op_Inequality=function(t,e){return 0!=t.compareTo(e)},fe.op_GreaterThan=function(t,e){return t.compareTo(e)>0},fe.op_LessThan=function(t,e){return t.compareTo(e)<0},fe.op_Addition=function(t,e){return new fe(t).add(new fe(e))},fe.op_Subtraction=function(t,e){return new fe(t).subtract(new fe(e))},fe.Int128Mul=function(t,e){return new fe(t).multiply(new fe(e))},fe.op_Division=function(t,e){return t.divide(e)},fe.prototype.ToDouble=function(){return parseFloat(this.toString())},typeof de>"u"&&(de=u((function(t,e){var i;if(typeof Object.getOwnPropertyNames>"u"){for(i in e.prototype)(typeof t.prototype[i]>"u"||t.prototype[i]==Object.prototype[i])&&(t.prototype[i]=e.prototype[i]);for(i in e)typeof t[i]>"u"&&(t[i]=e[i]);t.$baseCtor=e}else{for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)typeof Object.getOwnPropertyDescriptor(t.prototype,n[r])>"u"&&Object.defineProperty(t.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(i in e)typeof t[i]>"u"&&(t[i]=e[i]);t.$baseCtor=e}}),"Inherit")),n.Path=function(){return[]},n.Paths=function(){return[]},n.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},n.DoublePoint0=function(){this.X=0,this.Y=0},n.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},n.DoublePoint2=function(t,e){this.X=t,this.Y=e},n.PolyNode=function(){this.m_Parent=null,this.m_polygon=new n.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},n.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},n.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},n.PolyNode.prototype.Contour=function(){return this.m_polygon},n.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},n.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},n.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},n.PolyNode.prototype.Childs=function(){return this.m_Childs},n.PolyNode.prototype.Parent=function(){return this.m_Parent},n.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},n.PolyTree=function(){this.m_AllPolys=[],n.PolyNode.call(this)},n.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},n.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},n.PolyTree.prototype.Total=function(){return this.m_AllPolys.length},de(n.PolyTree,n.PolyNode),n.Math_Abs_Int64=n.Math_Abs_Int32=n.Math_Abs_Double=function(t){return Math.abs(t)},n.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},s.msie||s.opera||s.safari?n.Cast_Int32=function(t){return 0|t}:n.Cast_Int32=function(t){return~~t},s.chrome?n.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:s.firefox&&"function"==typeof Number.toInteger?n.Cast_Int64=function(t){return Number.toInteger(t)}:s.msie7||s.msie8?n.Cast_Int64=function(t){return parseInt(t,10)}:s.msie?n.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:n.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},n.Clear=function(t){t.length=0},n.PI=3.141592653589793,n.PI2=6.283185307179586,n.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof n.DoublePoint){var i=t[0];this.X=n.Clipper.Round(i.X),this.Y=n.Clipper.Round(i.Y)}else{var r=t[0];this.X=r.X,this.Y=r.Y}else this.X=0,this.Y=0},n.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},n.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},n.IntPoint0=function(){this.X=0,this.Y=0},n.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},n.IntPoint1dp=function(t){this.X=n.Clipper.Round(t.X),this.Y=n.Clipper.Round(t.Y)},n.IntPoint2=function(t,e){this.X=t,this.Y=e},n.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},n.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},n.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},n.IntRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},n.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},n.PolyType={ptSubject:0,ptClip:1},n.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},n.JoinType={jtSquare:0,jtRound:1,jtMiter:2},n.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},n.EdgeSide={esLeft:0,esRight:1},n.Direction={dRightToLeft:0,dLeftToRight:1},n.TEdge=function(){this.Bot=new n.IntPoint,this.Curr=new n.IntPoint,this.Top=new n.IntPoint,this.Delta=new n.IntPoint,this.Dx=0,this.PolyTyp=n.PolyType.ptSubject,this.Side=n.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},n.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new n.IntPoint},n.MyIntersectNodeSort=function(){},n.MyIntersectNodeSort.Compare=function(t,e){return e.Pt.Y-t.Pt.Y},n.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},n.Scanbeam=function(){this.Y=0,this.Next=null},n.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},n.OutPt=function(){this.Idx=0,this.Pt=new n.IntPoint,this.Next=null,this.Prev=null},n.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new n.IntPoint},n.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},n.ClipperBase.horizontal=-9007199254740992,n.ClipperBase.Skip=-2,n.ClipperBase.Unassigned=-1,n.ClipperBase.tolerance=1e-20,n.ClipperBase.loRange=47453132,n.ClipperBase.hiRange=0xfffffffffffff,n.ClipperBase.near_zero=function(t){return t>-n.ClipperBase.tolerance&&t<n.ClipperBase.tolerance},n.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},n.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(n.IntPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!=e);return!1},n.ClipperBase.prototype.PointOnLineSegment=function(t,e,i,n){return n?t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&fe.op_Equality(fe.Int128Mul(t.X-e.X,i.Y-e.Y),fe.Int128Mul(i.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},n.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var n=e;;){if(this.PointOnLineSegment(t,n.Pt,n.Next.Pt,i))return!0;if((n=n.Next)==e)break}return!1},n.ClipperBase.prototype.SlopesEqual=n.ClipperBase.SlopesEqual=function(){var t,e,i,r,o,s,a=arguments,l=a.length;return 3==l?(t=a[0],e=a[1],a[2]?fe.op_Equality(fe.Int128Mul(t.Delta.Y,e.Delta.X),fe.Int128Mul(t.Delta.X,e.Delta.Y)):n.Cast_Int64(t.Delta.Y*e.Delta.X)==n.Cast_Int64(t.Delta.X*e.Delta.Y)):4==l?(i=a[0],r=a[1],o=a[2],a[3]?fe.op_Equality(fe.Int128Mul(i.Y-r.Y,r.X-o.X),fe.Int128Mul(i.X-r.X,r.Y-o.Y)):n.Cast_Int64((i.Y-r.Y)*(r.X-o.X))-n.Cast_Int64((i.X-r.X)*(r.Y-o.Y))==0):(i=a[0],r=a[1],o=a[2],s=a[3],a[4]?fe.op_Equality(fe.Int128Mul(i.Y-r.Y,o.X-s.X),fe.Int128Mul(i.X-r.X,o.Y-s.Y)):n.Cast_Int64((i.Y-r.Y)*(o.X-s.X))-n.Cast_Int64((i.X-r.X)*(o.Y-s.Y))==0)},n.ClipperBase.SlopesEqual3=function(t,e,i){return i?fe.op_Equality(fe.Int128Mul(t.Delta.Y,e.Delta.X),fe.Int128Mul(t.Delta.X,e.Delta.Y)):n.Cast_Int64(t.Delta.Y*e.Delta.X)==n.Cast_Int64(t.Delta.X*e.Delta.Y)},n.ClipperBase.SlopesEqual4=function(t,e,i,r){return r?fe.op_Equality(fe.Int128Mul(t.Y-e.Y,e.X-i.X),fe.Int128Mul(t.X-e.X,e.Y-i.Y)):n.Cast_Int64((t.Y-e.Y)*(e.X-i.X))-n.Cast_Int64((t.X-e.X)*(e.Y-i.Y))==0},n.ClipperBase.SlopesEqual5=function(t,e,i,r,o){return o?fe.op_Equality(fe.Int128Mul(t.Y-e.Y,i.X-r.X),fe.Int128Mul(t.X-e.X,i.Y-r.Y)):n.Cast_Int64((t.Y-e.Y)*(i.X-r.X))-n.Cast_Int64((t.X-e.X)*(i.Y-r.Y))==0},n.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var i=0,r=this.m_edges[t].length;i<r;++i)this.m_edges[t][i]=null;n.Clear(this.m_edges[t])}n.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},n.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},n.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>n.ClipperBase.hiRange||t.Y>n.ClipperBase.hiRange||-t.X>n.ClipperBase.hiRange||-t.Y>n.ClipperBase.hiRange)&&n.Error("Coordinate outside allowed range in RangeTest()."):(t.X>n.ClipperBase.loRange||t.Y>n.ClipperBase.loRange||-t.X>n.ClipperBase.loRange||-t.Y>n.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},n.ClipperBase.prototype.InitEdge=function(t,e,i,n){t.Next=e,t.Prev=i,t.Curr.X=n.X,t.Curr.Y=n.Y,t.OutIdx=-1},n.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y),this.SetDx(t),t.PolyTyp=e},n.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;n.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||n.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=n.ClipperBase.horizontal&&t.Prev.Dx!=n.ClipperBase.horizontal)break;for(;t.Prev.Dx==n.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==n.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},n.ClipperBase.prototype.ProcessBound=function(t,e){var i,r,o=t,s=t;if(t.Dx==n.ClipperBase.horizontal&&(r=e?t.Prev.Bot.X:t.Next.Bot.X,t.Bot.X!=r&&this.ReverseHorizontal(t)),s.OutIdx!=n.ClipperBase.Skip)if(e){for(;s.Top.Y==s.Next.Bot.Y&&s.Next.OutIdx!=n.ClipperBase.Skip;)s=s.Next;if(s.Dx==n.ClipperBase.horizontal&&s.Next.OutIdx!=n.ClipperBase.Skip){for(i=s;i.Prev.Dx==n.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X==s.Next.Top.X?e||(s=i.Prev):i.Prev.Top.X>s.Next.Top.X&&(s=i.Prev)}for(;t!=s;)t.NextInLML=t.Next,t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),s=s.Next}else{for(;s.Top.Y==s.Prev.Bot.Y&&s.Prev.OutIdx!=n.ClipperBase.Skip;)s=s.Prev;if(s.Dx==n.ClipperBase.horizontal&&s.Prev.OutIdx!=n.ClipperBase.Skip){for(i=s;i.Next.Dx==n.ClipperBase.horizontal;)i=i.Next;i.Next.Top.X==s.Prev.Top.X?e||(s=i.Next):i.Next.Top.X>s.Prev.Top.X&&(s=i.Next)}for(;t!=s;)t.NextInLML=t.Prev,t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==n.ClipperBase.horizontal&&t!=o&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),s=s.Prev}if(s.OutIdx==n.ClipperBase.Skip){if(t=s,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=s&&t.Dx==n.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=s&&t.Dx==n.ClipperBase.horizontal;)t=t.Next}if(t==s)s=e?t.Next:t.Prev;else{t=e?s.Next:s.Prev;var a=new n.LocalMinima;a.Next=null,a.Y=t.Bot.Y,a.LeftBound=null,a.RightBound=t,a.RightBound.WindDelta=0,s=this.ProcessBound(a.RightBound,e),this.InsertLocalMinima(a)}}return s},n.ClipperBase.prototype.AddPath=function(t,e,i){!i&&e==n.PolyType.ptClip&&n.Error("AddPath: Open paths must be subject.");var r=t.length-1;if(i)for(;r>0&&n.IntPoint.op_Equality(t[r],t[0]);)--r;for(;r>0&&n.IntPoint.op_Equality(t[r],t[r-1]);)--r;if(i&&r<2||!i&&r<1)return!1;for(var o=new Array,s=0;s<=r;s++)o.push(new n.TEdge);var a=!0;o[1].Curr.X=t[1].X,o[1].Curr.Y=t[1].Y;var l={Value:this.m_UseFullRange};this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[r],l),this.m_UseFullRange=l.Value,this.InitEdge(o[0],o[1],o[r],t[0]),this.InitEdge(o[r],o[0],o[r-1],t[r]);for(s=r-1;s>=1;--s)l.Value=this.m_UseFullRange,this.RangeTest(t[s],l),this.m_UseFullRange=l.Value,this.InitEdge(o[s],o[s+1],o[s-1],t[s]);for(var u=o[0],h=u,c=u;;)if(n.IntPoint.op_Equality(h.Curr,h.Next.Curr)){if(h==h.Next)break;h==u&&(u=h.Next),c=h=this.RemoveEdge(h)}else{if(h.Prev==h.Next)break;if(!i||!n.ClipperBase.SlopesEqual(h.Prev.Curr,h.Curr,h.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr)){if((h=h.Next)==c)break}else h==u&&(u=h.Next),c=h=(h=this.RemoveEdge(h)).Prev}if(!i&&h==h.Next||i&&h.Prev==h.Next)return!1;i||(this.m_HasOpenPaths=!0,u.Prev.OutIdx=n.ClipperBase.Skip);h=u;do{this.InitEdge2(h,e),h=h.Next,a&&h.Curr.Y!=u.Curr.Y&&(a=!1)}while(h!=u);if(a){if(i)return!1;for(h.Prev.OutIdx=n.ClipperBase.Skip,h.Prev.Bot.X<h.Prev.Top.X&&this.ReverseHorizontal(h.Prev),(f=new n.LocalMinima).Next=null,f.Y=h.Bot.Y,f.LeftBound=null,f.RightBound=h,f.RightBound.Side=n.EdgeSide.esRight,f.RightBound.WindDelta=0;h.Next.OutIdx!=n.ClipperBase.Skip;)h.NextInLML=h.Next,h.Bot.X!=h.Prev.Top.X&&this.ReverseHorizontal(h),h=h.Next;return this.InsertLocalMinima(f),this.m_edges.push(o),!0}this.m_edges.push(o);for(var p,d=null;(h=this.FindNextLocMin(h))!=d;){var f;null==d&&(d=h),(f=new n.LocalMinima).Next=null,f.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(f.LeftBound=h.Prev,f.RightBound=h,p=!1):(f.LeftBound=h,f.RightBound=h.Prev,p=!0),f.LeftBound.Side=n.EdgeSide.esLeft,f.RightBound.Side=n.EdgeSide.esRight,i?f.LeftBound.Next==f.RightBound?f.LeftBound.WindDelta=-1:f.LeftBound.WindDelta=1:f.LeftBound.WindDelta=0,f.RightBound.WindDelta=-f.LeftBound.WindDelta,h=this.ProcessBound(f.LeftBound,p);var g=this.ProcessBound(f.RightBound,!p);f.LeftBound.OutIdx==n.ClipperBase.Skip?f.LeftBound=null:f.RightBound.OutIdx==n.ClipperBase.Skip&&(f.RightBound=null),this.InsertLocalMinima(f),p||(h=g)}return!0},n.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,r=0,o=t.length;r<o;++r)this.AddPath(t[r],e,i)&&(n=!0);return n},n.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return!(n.IntPoint.op_Equality(t,i)||n.IntPoint.op_Equality(t,e)||n.IntPoint.op_Equality(i,e))&&(t.X!=i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y)},n.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},n.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=n.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},n.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},n.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},n.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e},n.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=n.EdgeSide.esLeft,e.OutIdx=n.ClipperBase.Unassigned),null!=(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,e.Side=n.EdgeSide.esRight,e.OutIdx=n.ClipperBase.Unassigned),t=t.Next}},n.Clipper=function(t){typeof t>"u"&&(t=0),this.m_PolyOuts=null,this.m_ClipType=n.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=n.PolyFillType.pftEvenOdd,this.m_SubjFillType=n.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,n.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=n.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t)},n.Clipper.ioReverseSolution=1,n.Clipper.ioStrictlySimple=2,n.Clipper.ioPreserveCollinear=4,n.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),n.ClipperBase.prototype.Clear.call(this))},n.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},n.Clipper.prototype.Reset=function(){n.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},n.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new n.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){(i=new n.Scanbeam).Y=t,i.Next=this.m_Scanbeam,this.m_Scanbeam=i}else{for(var e=this.m_Scanbeam;null!==e.Next&&t<=e.Next.Y;)e=e.Next;if(t==e.Y)return;var i;(i=new n.Scanbeam).Y=t,i.Next=e.Next,e.Next=i}},n.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,i=t[1]instanceof n.PolyTree;if(4==e&&!i){var r=t[0],o=t[1],s=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&n.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,n.Clear(o),this.m_SubjFillType=s,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!1;try{(u=this.ExecuteInternal())&&this.BuildResult(o)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}if(4==e&&i){r=t[0];var l=t[1];s=t[2],a=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=s,this.m_ClipFillType=a,this.m_ClipType=r,this.m_UsingPolyTree=!0;try{var u;(u=this.ExecuteInternal())&&this.BuildResult2(l)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return u}if(2==e&&!i){r=t[0],o=t[1];return this.Execute(r,o,n.PolyFillType.pftEvenOdd,n.PolyFillType.pftEvenOdd)}if(2==e&&i){r=t[0],l=t[1];return this.Execute(r,l,n.PolyFillType.pftEvenOdd,n.PolyFillType.pftEvenOdd)}},n.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},n.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),n.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(t,e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var i=0,r=this.m_PolyOuts.length;i<r;i++){null===(o=this.m_PolyOuts[i]).Pts||o.IsOpen||(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts)}this.JoinCommonEdges();for(i=0,r=this.m_PolyOuts.length;i<r;i++){var o;null!==(o=this.m_PolyOuts[i]).Pts&&!o.IsOpen&&this.FixupOutPolygon(o)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{n.Clear(this.m_Joins),n.Clear(this.m_GhostJoins)}},n.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;this.m_Scanbeam;return this.m_Scanbeam=this.m_Scanbeam.Next,null,t},n.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);n.Clear(this.m_PolyOuts)},n.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];null!==e.Pts&&this.DisposeOutPts(e.Pts),e=null,this.m_PolyOuts[t]=null},n.Clipper.prototype.DisposeOutPts=function(t){if(null!==t){for(t.Prev.Next=null;null!==t;)t,t=t.Next,null}},n.Clipper.prototype.AddJoin=function(t,e,i){var r=new n.Join;r.OutPt1=t,r.OutPt2=e,r.OffPt.X=i.X,r.OffPt.Y=i.Y,this.m_Joins.push(r)},n.Clipper.prototype.AddGhostJoin=function(t,e){var i=new n.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,this.m_GhostJoins.push(i)},n.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,i=this.m_CurrentLM.RightBound;this.PopLocalMinima();var r=null;if(null===e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(r=this.AddOutPt(i,i.Bot))):null==i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(r=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(i,e),this.SetWindingCount(e),i.WindCnt=e.WindCnt,i.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(r=this.AddLocalMinPoly(e,i,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=i&&(n.ClipperBase.IsHorizontal(i)?this.AddEdgeToSEL(i):this.InsertScanbeam(i.Top.Y)),null!=e&&null!=i){if(null!==r&&n.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&0!==i.WindDelta)for(var o=0,s=this.m_GhostJoins.length;o<s;o++){var a=this.m_GhostJoins[o];this.HorzSegmentsOverlap(a.OutPt1.Pt,a.OffPt,i.Bot,i.Top)&&this.AddJoin(a.OutPt1,r,a.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&n.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var l=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(r,l,e.Top)}if(e.NextInAEL!=i){if(i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&n.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){l=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(r,l,i.Top)}var u=e.NextInAEL;if(null!==u)for(;u!=i;)this.IntersectEdges(i,u,e.Curr,!1),u=u.NextInAEL}}}},n.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},n.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<n.Clipper.TopX(t,e.Top.Y):t.Top.X>n.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},n.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==n.PolyType.ptSubject?this.m_SubjFillType==n.PolyFillType.pftEvenOdd:this.m_ClipFillType==n.PolyFillType.pftEvenOdd},n.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==n.PolyType.ptSubject?this.m_ClipFillType==n.PolyFillType.pftEvenOdd:this.m_SubjFillType==n.PolyFillType.pftEvenOdd},n.Clipper.prototype.IsContributing=function(t){var e,i;switch(t.PolyTyp==n.PolyType.ptSubject?(e=this.m_SubjFillType,i=this.m_ClipFillType):(e=this.m_ClipFillType,i=this.m_SubjFillType),e){case n.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case n.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case n.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(-1!=t.WindCnt)return!1}switch(this.m_ClipType){case n.ClipType.ctIntersection:switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case n.ClipType.ctUnion:switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case n.ClipType.ctDifference:if(t.PolyTyp==n.PolyType.ptSubject)switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case n.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(i){case n.PolyFillType.pftEvenOdd:case n.PolyFillType.pftNonZero:return 0===t.WindCnt2;case n.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},n.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=n.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,r=e.PrevInAEL;null!==r;)r.PolyTyp==e.PolyTyp&&0!==r.WindDelta&&(i=!i),r=r.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},n.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},n.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},n.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e)null!==(i=e.NextInAEL)&&(i.PrevInAEL=t),null!==(n=t.PrevInAEL)&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i;else if(e.NextInAEL==t){null!==(i=t.NextInAEL)&&(i.PrevInAEL=e),null!==(n=e.PrevInAEL)&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else{var i=t.NextInAEL,n=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},n.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e)null!==(i=e.NextInSEL)&&(i.PrevInSEL=t),null!==(n=t.PrevInSEL)&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i;else if(e.NextInSEL==t){null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,n=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},n.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0==e.WindDelta&&this.AddOutPt(e,i),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},n.Clipper.prototype.AddLocalMinPoly=function(t,e,i){var r,o,s;if(n.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(r=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,t.Side=n.EdgeSide.esLeft,e.Side=n.EdgeSide.esRight,s=(o=t).PrevInAEL==e?e.PrevInAEL:o.PrevInAEL):(r=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=n.EdgeSide.esRight,e.Side=n.EdgeSide.esLeft,s=(o=e).PrevInAEL==t?t.PrevInAEL:o.PrevInAEL),null!==s&&s.OutIdx>=0&&n.Clipper.TopX(s,i.Y)==n.Clipper.TopX(o,i.Y)&&n.ClipperBase.SlopesEqual(o,s,this.m_UseFullRange)&&0!==o.WindDelta&&0!==s.WindDelta){var a=this.AddOutPt(s,i);this.AddJoin(r,a,o.Top)}return r},n.Clipper.prototype.CreateOutRec=function(){var t=new n.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},n.Clipper.prototype.AddOutPt=function(t,e){var i=t.Side==n.EdgeSide.esLeft;if(t.OutIdx<0){(o=this.CreateOutRec()).IsOpen=0===t.WindDelta;var r=new n.OutPt;return o.Pts=r,r.Idx=o.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,r.Next=r,r.Prev=r,o.IsOpen||this.SetHoleState(t,o),t.OutIdx=o.Idx,r}var o,s=(o=this.m_PolyOuts[t.OutIdx]).Pts;return i&&n.IntPoint.op_Equality(e,s.Pt)?s:!i&&n.IntPoint.op_Equality(e,s.Prev.Pt)?s.Prev:((r=new n.OutPt).Idx=o.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,r.Next=s,r.Prev=s.Prev,r.Prev.Next=r,s.Prev=r,i&&(o.Pts=r),r)},n.Clipper.prototype.SwapPoints=function(t,e){var i=new n.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,e.Value.X=i.X,e.Value.Y=i.Y},n.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){return t.X>i.X==t.X<n.X||e.X>i.X==e.X<n.X||i.X>t.X==i.X<e.X||n.X>t.X==n.X<e.X||t.X==i.X&&e.X==n.X||t.X==n.X&&e.X==i.X},n.Clipper.prototype.InsertPolyPtBetween=function(t,e,i){var r=new n.OutPt;return r.Pt.X=i.X,r.Pt.Y=i.Y,e==t.Next?(t.Next=r,e.Prev=r,r.Next=e,r.Prev=t):(e.Next=r,t.Prev=r,r.Next=t,r.Prev=e),r},n.Clipper.prototype.SetHoleState=function(t,e){for(var i=!1,n=t.PrevInAEL;null!==n;)n.OutIdx>=0&&0!=n.WindDelta&&(i=!i,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[n.OutIdx])),n=n.PrevInAEL;i&&(e.IsHole=!0)},n.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?n.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},n.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;n.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Prev;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;n.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Next;var o=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;n.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Prev;var s=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;n.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Next;var a=Math.abs(this.GetDx(e.Pt,i.Pt));return r>=s&&r>=a||o>=s&&o>=a},n.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!=t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y==t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!=t&&i.Prev!=t&&(e=i)),i=i.Next;if(null!==e)for(;e!=i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;n.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},n.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X||i.Next==i?e:n.Next==n||this.FirstIsBottomPt(i,n)?t:e},n.Clipper.prototype.Param1RightOfParam2=function(t,e){do{if((t=t.FirstLeft)==e)return!0}while(null!==t);return!1},n.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},n.Clipper.prototype.AppendPolygon=function(t,e){var i,r=this.m_PolyOuts[t.OutIdx],o=this.m_PolyOuts[e.OutIdx];i=this.Param1RightOfParam2(r,o)?o:this.Param1RightOfParam2(o,r)?r:this.GetLowermostRec(r,o);var s,a=r.Pts,l=a.Prev,u=o.Pts,h=u.Prev;t.Side==n.EdgeSide.esLeft?(e.Side==n.EdgeSide.esLeft?(this.ReversePolyPtLinks(u),u.Next=a,a.Prev=u,l.Next=h,h.Prev=l,r.Pts=h):(h.Next=a,a.Prev=h,u.Prev=l,l.Next=u,r.Pts=u),s=n.EdgeSide.esLeft):(e.Side==n.EdgeSide.esRight?(this.ReversePolyPtLinks(u),l.Next=h,h.Prev=l,u.Next=a,a.Prev=u):(l.Next=u,u.Prev=l,a.Prev=h,h.Next=a),s=n.EdgeSide.esRight),r.BottomPt=null,i==o&&(o.FirstLeft!=r&&(r.FirstLeft=o.FirstLeft),r.IsHole=o.IsHole),o.Pts=null,o.BottomPt=null,o.FirstLeft=r;var c=t.OutIdx,p=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var d=this.m_ActiveEdges;null!==d;){if(d.OutIdx==p){d.OutIdx=c,d.Side=s;break}d=d.NextInAEL}o.Idx=r.Idx},n.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do{i=e.Next,e.Next=e.Prev,e.Prev=i,e=i}while(e!=t)}},n.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},n.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},n.Clipper.prototype.IntersectEdges=function(t,e,i,r){var o,s,a,l,u,h,c=!r&&null===t.NextInLML&&t.Top.X==i.X&&t.Top.Y==i.Y,p=!r&&null===e.NextInLML&&e.Top.X==i.X&&e.Top.Y==i.Y,d=t.OutIdx>=0,f=e.OutIdx>=0;if(0===t.WindDelta||0===e.WindDelta)return 0===t.WindDelta&&0===e.WindDelta?(c||p)&&d&&f&&this.AddLocalMaxPoly(t,e,i):t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==n.ClipType.ctUnion?0===t.WindDelta?f&&(this.AddOutPt(t,i),d&&(t.OutIdx=-1)):d&&(this.AddOutPt(e,i),f&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==n.ClipType.ctUnion&&0!==e.WindCnt2?0===e.WindDelta&&1==Math.abs(t.WindCnt)&&(this.m_ClipType!=n.ClipType.ctUnion||0===t.WindCnt2)&&(this.AddOutPt(e,i),f&&(e.OutIdx=-1)):(this.AddOutPt(t,i),d&&(t.OutIdx=-1))),c&&(t.OutIdx<0?this.DeleteFromAEL(t):n.Error("Error intersecting polylines")),void(p&&(e.OutIdx<0?this.DeleteFromAEL(e):n.Error("Error intersecting polylines")));if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var g=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=g}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta==0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;switch(t.PolyTyp==n.PolyType.ptSubject?(o=this.m_SubjFillType,a=this.m_ClipFillType):(o=this.m_ClipFillType,a=this.m_SubjFillType),e.PolyTyp==n.PolyType.ptSubject?(s=this.m_SubjFillType,l=this.m_ClipFillType):(s=this.m_ClipFillType,l=this.m_SubjFillType),o){case n.PolyFillType.pftPositive:u=t.WindCnt;break;case n.PolyFillType.pftNegative:u=-t.WindCnt;break;default:u=Math.abs(t.WindCnt)}switch(s){case n.PolyFillType.pftPositive:h=e.WindCnt;break;case n.PolyFillType.pftNegative:h=-e.WindCnt;break;default:h=Math.abs(e.WindCnt)}if(d&&f)c||p||0!==u&&1!=u||0!==h&&1!=h||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=n.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(d)(0===h||1==h)&&(this.AddOutPt(t,i),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(f)(0===u||1==u)&&(this.AddOutPt(e,i),n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e));else if(!(0!==u&&1!=u||0!==h&&1!=h||c||p)){var m,v;switch(a){case n.PolyFillType.pftPositive:m=t.WindCnt2;break;case n.PolyFillType.pftNegative:m=-t.WindCnt2;break;default:m=Math.abs(t.WindCnt2)}switch(l){case n.PolyFillType.pftPositive:v=e.WindCnt2;break;case n.PolyFillType.pftNegative:v=-e.WindCnt2;break;default:v=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1==u&&1==h)switch(this.m_ClipType){case n.ClipType.ctIntersection:m>0&&v>0&&this.AddLocalMinPoly(t,e,i);break;case n.ClipType.ctUnion:m<=0&&v<=0&&this.AddLocalMinPoly(t,e,i);break;case n.ClipType.ctDifference:(t.PolyTyp==n.PolyType.ptClip&&m>0&&v>0||t.PolyTyp==n.PolyType.ptSubject&&m<=0&&v<=0)&&this.AddLocalMinPoly(t,e,i);break;case n.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else n.Clipper.SwapSides(t,e)}c!=p&&(c&&t.OutIdx>=0||p&&e.OutIdx>=0)&&(n.Clipper.SwapSides(t,e),n.Clipper.SwapPolyIndexes(t,e)),c&&this.DeleteFromAEL(t),p&&this.DeleteFromAEL(e)},n.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!=this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},n.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!=this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},n.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&n.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,n.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},n.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},n.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=n.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=n.Direction.dRightToLeft)},n.Clipper.prototype.PrepareHorzJoins=function(t,e){var i=this.m_PolyOuts[t.OutIdx].Pts;t.Side!=n.EdgeSide.esLeft&&(i=i.Prev),e&&(n.IntPoint.op_Equality(i.Pt,t.Top)?this.AddGhostJoin(i,t.Bot):this.AddGhostJoin(i,t.Top))},n.Clipper.prototype.ProcessHorizontal=function(t,e){var i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);for(var r=i.Dir,o=i.Left,s=i.Right,a=t,l=null;null!==a.NextInLML&&n.ClipperBase.IsHorizontal(a.NextInLML);)a=a.NextInLML;for(null===a.NextInLML&&(l=this.GetMaximaPair(a));;){for(var u=t==a,h=this.GetNextInAEL(t,r);null!==h&&!(h.Curr.X==t.Top.X&&null!==t.NextInLML&&h.Dx<t.NextInLML.Dx);){var c=this.GetNextInAEL(h,r);if(r==n.Direction.dLeftToRight&&h.Curr.X<=s||r==n.Direction.dRightToLeft&&h.Curr.X>=o){if(t.OutIdx>=0&&0!=t.WindDelta&&this.PrepareHorzJoins(t,e),h==l&&u)return r==n.Direction.dLeftToRight?this.IntersectEdges(t,h,h.Top,!1):this.IntersectEdges(h,t,h.Top,!1),void(l.OutIdx>=0&&n.Error("ProcessHorizontal error"));if(r==n.Direction.dLeftToRight){var p=new n.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(t,h,p,!0)}else{p=new n.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(h,t,p,!0)}this.SwapPositionsInAEL(t,h)}else if(r==n.Direction.dLeftToRight&&h.Curr.X>=s||r==n.Direction.dRightToLeft&&h.Curr.X<=o)break;h=c}if(t.OutIdx>=0&&0!==t.WindDelta&&this.PrepareHorzJoins(t,e),null===t.NextInLML||!n.ClipperBase.IsHorizontal(t.NextInLML))break;(t=this.UpdateEdgeIntoAEL(t)).OutIdx>=0&&this.AddOutPt(t,t.Bot);i={Dir:r,Left:o,Right:s};this.GetHorzDirection(t,i),r=i.Dir,o=i.Left,s=i.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var d=this.AddOutPt(t,t.Top);if(0===(t=this.UpdateEdgeIntoAEL(t)).WindDelta)return;var f=t.PrevInAEL;c=t.NextInAEL;if(null!==f&&f.Curr.X==t.Bot.X&&f.Curr.Y==t.Bot.Y&&0!==f.WindDelta&&f.OutIdx>=0&&f.Curr.Y>f.Top.Y&&n.ClipperBase.SlopesEqual(t,f,this.m_UseFullRange)){var g=this.AddOutPt(f,t.Bot);this.AddJoin(d,g,t.Top)}else if(null!==c&&c.Curr.X==t.Bot.X&&c.Curr.Y==t.Bot.Y&&0!==c.WindDelta&&c.OutIdx>=0&&c.Curr.Y>c.Top.Y&&n.ClipperBase.SlopesEqual(t,c,this.m_UseFullRange)){g=this.AddOutPt(c,t.Bot);this.AddJoin(d,g,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else null!==l?l.OutIdx>=0?(r==n.Direction.dLeftToRight?this.IntersectEdges(t,l,t.Top,!1):this.IntersectEdges(l,t,t.Top,!1),l.OutIdx>=0&&n.Error("ProcessHorizontal error")):(this.DeleteFromAEL(t),this.DeleteFromAEL(l)):(t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},n.Clipper.prototype.GetNextInAEL=function(t,e){return e==n.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},n.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},n.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},n.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},n.Clipper.prototype.GetMaximaPair=function(t){var e=null;return n.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:n.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||-2!=e.OutIdx&&(e.NextInAEL!=e.PrevInAEL||n.ClipperBase.IsHorizontal(e))?e:null},n.Clipper.prototype.ProcessIntersections=function(t,e){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t,e),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch{this.m_SortedEdges=null,this.m_IntersectList.length=0,n.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},n.Clipper.prototype.BuildIntersectList=function(t,e){if(null!==this.m_ActiveEdges){var i=this.m_ActiveEdges;for(this.m_SortedEdges=i;null!==i;)i.PrevInSEL=i.PrevInAEL,i.NextInSEL=i.NextInAEL,i.Curr.X=n.Clipper.TopX(i,e),i=i.NextInAEL;for(var r=!0;r&&null!==this.m_SortedEdges;){for(r=!1,i=this.m_SortedEdges;null!==i.NextInSEL;){var o=i.NextInSEL,s=new n.IntPoint;if(i.Curr.X>o.Curr.X){!this.IntersectPoint(i,o,s)&&i.Curr.X>o.Curr.X+1&&n.Error("Intersection error"),s.Y>t&&(s.Y=t,Math.abs(i.Dx)>Math.abs(o.Dx)?s.X=n.Clipper.TopX(o,t):s.X=n.Clipper.TopX(i,t));var a=new n.IntersectNode;a.Edge1=i,a.Edge2=o,a.Pt.X=s.X,a.Pt.Y=s.Y,this.m_IntersectList.push(a),this.SwapPositionsInSEL(i,o),r=!0}else i=o}if(null===i.PrevInSEL)break;i.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},n.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},n.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},n.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i==t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},n.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt,!0),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0};var ge=u((function(t){return t<0?Math.ceil(t-.5):Math.round(t)}),"R1"),me=u((function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)}),"R2"),ve=u((function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)}),"R3"),ye=u((function(t){return t<0?(t-=.5)<-2147483648?Math.ceil(t):0|t:(t+=.5)>2147483647?Math.floor(t):0|t}),"R4");s.msie?n.Clipper.Round=ge:s.chromium?n.Clipper.Round=ve:s.safari?n.Clipper.Round=ye:n.Clipper.Round=me,n.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+n.Clipper.Round(t.Dx*(e-t.Bot.Y))},n.Clipper.prototype.IntersectPoint=function(t,e,i){var r,o;if(i.X=0,i.Y=0,n.ClipperBase.SlopesEqual(t,e,this.m_UseFullRange)||t.Dx==e.Dx)return e.Bot.Y>t.Bot.Y?(i.X=e.Bot.X,i.Y=e.Bot.Y):(i.X=t.Bot.X,i.Y=t.Bot.Y),!1;if(0===t.Delta.X)i.X=t.Bot.X,n.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(o=e.Bot.Y-e.Bot.X/e.Dx,i.Y=n.Clipper.Round(i.X/e.Dx+o));else if(0===e.Delta.X)i.X=e.Bot.X,n.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(r=t.Bot.Y-t.Bot.X/t.Dx,i.Y=n.Clipper.Round(i.X/t.Dx+r));else{r=t.Bot.X-t.Bot.Y*t.Dx;var s=((o=e.Bot.X-e.Bot.Y*e.Dx)-r)/(t.Dx-e.Dx);i.Y=n.Clipper.Round(s),Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=n.Clipper.Round(t.Dx*s+r):i.X=n.Clipper.Round(e.Dx*s+o)}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=n.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=n.Clipper.TopX(t,i.Y):i.X=n.Clipper.TopX(e,i.Y)}return!0},n.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var i=this.IsMaxima(e,t);if(i){var r=this.GetMaximaPair(e);i=null===r||!n.ClipperBase.IsHorizontal(r)}if(i){var o=e.PrevInAEL;this.DoMaxima(e),e=null===o?this.m_ActiveEdges:o.NextInAEL}else{if(this.IsIntermediate(e,t)&&n.ClipperBase.IsHorizontal(e.NextInLML)?((e=this.UpdateEdgeIntoAEL(e)).OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=n.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){o=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==o&&o.OutIdx>=0&&o.Curr.X==e.Curr.X&&0!==o.WindDelta){var s=this.AddOutPt(o,e.Curr),a=this.AddOutPt(e,e.Curr);this.AddJoin(s,a,e.Curr)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){s=null;e.OutIdx>=0&&(s=this.AddOutPt(e,e.Top));o=(e=this.UpdateEdgeIntoAEL(e)).PrevInAEL;var l=e.NextInAEL;if(null!==o&&o.Curr.X==e.Bot.X&&o.Curr.Y==e.Bot.Y&&null!==s&&o.OutIdx>=0&&o.Curr.Y>o.Top.Y&&n.ClipperBase.SlopesEqual(e,o,this.m_UseFullRange)&&0!==e.WindDelta&&0!==o.WindDelta){a=this.AddOutPt(o,e.Bot);this.AddJoin(s,a,e.Top)}else if(null!==l&&l.Curr.X==e.Bot.X&&l.Curr.Y==e.Bot.Y&&null!==s&&l.OutIdx>=0&&l.Curr.Y>l.Top.Y&&n.ClipperBase.SlopesEqual(e,l,this.m_UseFullRange)&&0!==e.WindDelta&&0!==l.WindDelta){a=this.AddOutPt(l,e.Bot);this.AddJoin(s,a,e.Top)}}e=e.NextInAEL}},n.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var i=t.NextInAEL;null!==i&&i!=e;)this.IntersectEdges(t,i,t.Top,!0),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1==t.OutIdx&&-1==e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?this.IntersectEdges(t,e,t.Top,!1):0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):n.Error("DoMaxima error")},n.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},n.Clipper.Orientation=function(t){return n.Clipper.Area(t)>=0},n.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do{e++,i=i.Next}while(i!=t);return e},n.Clipper.prototype.BuildResult=function(t){n.Clear(t);for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var r=this.m_PolyOuts[e];if(null!==r.Pts){var o=r.Pts.Prev,s=this.PointCount(o);if(!(s<2)){for(var a=new Array(s),l=0;l<s;l++)a[l]=o.Pt,o=o.Prev;t.push(a)}}}},n.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var r=this.m_PolyOuts[e],o=this.PointCount(r.Pts);if(!(r.IsOpen&&o<2||!r.IsOpen&&o<3)){this.FixHoleLinkage(r);var s=new n.PolyNode;t.m_AllPolys.push(s),r.PolyNode=s,s.m_polygon.length=o;for(var a=r.Pts.Prev,l=0;l<o;l++)s.m_polygon[l]=a.Pt,a=a.Prev}}for(e=0,i=this.m_PolyOuts.length;e<i;e++){null!==(r=this.m_PolyOuts[e]).PolyNode&&(r.IsOpen?(r.PolyNode.IsOpen=!0,t.AddChild(r.PolyNode)):null!==r.FirstLeft&&null!=r.FirstLeft.PolyNode?r.FirstLeft.PolyNode.AddChild(r.PolyNode):t.AddChild(r.PolyNode))}},n.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts;;){if(i.Prev==i||i.Prev==i.Next)return this.DisposeOutPts(i),void(t.Pts=null);if(n.IntPoint.op_Equality(i.Pt,i.Next.Pt)||n.IntPoint.op_Equality(i.Pt,i.Prev.Pt)||n.ClipperBase.SlopesEqual(i.Prev.Pt,i.Pt,i.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt))){e=null;i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev,null}else{if(i==e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},n.Clipper.prototype.DupOutPt=function(t,e){var i=new n.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},n.Clipper.prototype.GetOverlap=function(t,e,i,n,r){return t<e?i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)),r.Left<r.Right},n.Clipper.prototype.JoinHorz=function(t,e,i,r,o,s){var a=t.Pt.X>e.Pt.X?n.Direction.dRightToLeft:n.Direction.dLeftToRight,l=i.Pt.X>r.Pt.X?n.Direction.dRightToLeft:n.Direction.dLeftToRight;if(a==l)return!1;if(a==n.Direction.dLeftToRight){for(;t.Next.Pt.X<=o.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==o.Y;)t=t.Next;s&&t.Pt.X!=o.X&&(t=t.Next),e=this.DupOutPt(t,!s),n.IntPoint.op_Inequality(e.Pt,o)&&((t=e).Pt.X=o.X,t.Pt.Y=o.Y,e=this.DupOutPt(t,!s))}else{for(;t.Next.Pt.X>=o.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==o.Y;)t=t.Next;!s&&t.Pt.X!=o.X&&(t=t.Next),e=this.DupOutPt(t,s),n.IntPoint.op_Inequality(e.Pt,o)&&((t=e).Pt.X=o.X,t.Pt.Y=o.Y,e=this.DupOutPt(t,s))}if(l==n.Direction.dLeftToRight){for(;i.Next.Pt.X<=o.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y==o.Y;)i=i.Next;s&&i.Pt.X!=o.X&&(i=i.Next),r=this.DupOutPt(i,!s),n.IntPoint.op_Inequality(r.Pt,o)&&((i=r).Pt.X=o.X,i.Pt.Y=o.Y,r=this.DupOutPt(i,!s))}else{for(;i.Next.Pt.X>=o.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y==o.Y;)i=i.Next;!s&&i.Pt.X!=o.X&&(i=i.Next),r=this.DupOutPt(i,s),n.IntPoint.op_Inequality(r.Pt,o)&&((i=r).Pt.X=o.X,i.Pt.Y=o.Y,r=this.DupOutPt(i,s))}return a==n.Direction.dLeftToRight==s?(t.Prev=i,i.Next=t,e.Next=r,r.Prev=e):(t.Next=i,i.Prev=t,e.Prev=r,r.Next=e),!0},n.Clipper.prototype.JoinPoints=function(t,e,i){var r=t.OutPt1,o=new n.OutPt,s=t.OutPt2,a=new n.OutPt,l=t.OutPt1.Pt.Y==t.OffPt.Y;if(l&&n.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&n.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){for(o=t.OutPt1.Next;o!=r&&n.IntPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;var u=o.Pt.Y>t.OffPt.Y;for(a=t.OutPt2.Next;a!=s&&n.IntPoint.op_Equality(a.Pt,t.OffPt);)a=a.Next;return u!=a.Pt.Y>t.OffPt.Y&&(u?(o=this.DupOutPt(r,!1),a=this.DupOutPt(s,!0),r.Prev=s,s.Next=r,o.Next=a,a.Prev=o,t.OutPt1=r,t.OutPt2=o,!0):(o=this.DupOutPt(r,!0),a=this.DupOutPt(s,!1),r.Next=s,s.Prev=r,o.Prev=a,a.Next=o,t.OutPt1=r,t.OutPt2=o,!0))}if(l){for(o=r;r.Prev.Pt.Y==r.Pt.Y&&r.Prev!=o&&r.Prev!=s;)r=r.Prev;for(;o.Next.Pt.Y==o.Pt.Y&&o.Next!=r&&o.Next!=s;)o=o.Next;if(o.Next==r||o.Next==s)return!1;for(a=s;s.Prev.Pt.Y==s.Pt.Y&&s.Prev!=a&&s.Prev!=o;)s=s.Prev;for(;a.Next.Pt.Y==a.Pt.Y&&a.Next!=s&&a.Next!=r;)a=a.Next;if(a.Next==s||a.Next==r)return!1;var h={Left:null,Right:null};if(!this.GetOverlap(r.Pt.X,o.Pt.X,s.Pt.X,a.Pt.X,h))return!1;var c,p=h.Left,d=h.Right,f=new n.IntPoint;return r.Pt.X>=p&&r.Pt.X<=d?(f.X=r.Pt.X,f.Y=r.Pt.Y,c=r.Pt.X>o.Pt.X):s.Pt.X>=p&&s.Pt.X<=d?(f.X=s.Pt.X,f.Y=s.Pt.Y,c=s.Pt.X>a.Pt.X):o.Pt.X>=p&&o.Pt.X<=d?(f.X=o.Pt.X,f.Y=o.Pt.Y,c=o.Pt.X>r.Pt.X):(f.X=a.Pt.X,f.Y=a.Pt.Y,c=a.Pt.X>s.Pt.X),t.OutPt1=r,t.OutPt2=s,this.JoinHorz(r,o,s,a,f,c)}for(o=r.Next;n.IntPoint.op_Equality(o.Pt,r.Pt)&&o!=r;)o=o.Next;var g=o.Pt.Y>r.Pt.Y||!n.ClipperBase.SlopesEqual(r.Pt,o.Pt,t.OffPt,this.m_UseFullRange);if(g){for(o=r.Prev;n.IntPoint.op_Equality(o.Pt,r.Pt)&&o!=r;)o=o.Prev;if(o.Pt.Y>r.Pt.Y||!n.ClipperBase.SlopesEqual(r.Pt,o.Pt,t.OffPt,this.m_UseFullRange))return!1}for(a=s.Next;n.IntPoint.op_Equality(a.Pt,s.Pt)&&a!=s;)a=a.Next;var m=a.Pt.Y>s.Pt.Y||!n.ClipperBase.SlopesEqual(s.Pt,a.Pt,t.OffPt,this.m_UseFullRange);if(m){for(a=s.Prev;n.IntPoint.op_Equality(a.Pt,s.Pt)&&a!=s;)a=a.Prev;if(a.Pt.Y>s.Pt.Y||!n.ClipperBase.SlopesEqual(s.Pt,a.Pt,t.OffPt,this.m_UseFullRange))return!1}return o!=r&&a!=s&&o!=a&&(e!=i||g!=m)&&(g?(o=this.DupOutPt(r,!1),a=this.DupOutPt(s,!0),r.Prev=s,s.Next=r,o.Next=a,a.Prev=o,t.OutPt1=r,t.OutPt2=o,!0):(o=this.DupOutPt(r,!0),a=this.DupOutPt(s,!1),r.Next=s,s.Prev=r,o.Prev=a,a.Next=o,t.OutPt1=r,t.OutPt2=o,!0))},n.Clipper.GetBounds=function(t){for(var e=0,i=t.length;e<i&&0==t[e].length;)e++;if(e==i)return new n.IntRect(0,0,0,0);var r=new n.IntRect;for(r.left=t[e][0].X,r.right=r.left,r.top=t[e][0].Y,r.bottom=r.top;e<i;e++)for(var o=0,s=t[e].length;o<s;o++)t[e][o].X<r.left?r.left=t[e][o].X:t[e][o].X>r.right&&(r.right=t[e][o].X),t[e][o].Y<r.top?r.top=t[e][o].Y:t[e][o].Y>r.bottom&&(r.bottom=t[e][o].Y);return r},n.Clipper.prototype.GetBounds2=function(t){var e=t,i=new n.IntRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},n.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(n<3)return 0;for(var r=e[0],o=1;o<=n;++o){var s=o==n?e[0]:e[o];if(s.Y==t.Y&&(s.X==t.X||r.Y==t.Y&&s.X>t.X==r.X<t.X))return-1;if(r.Y<t.Y!=s.Y<t.Y)if(r.X>=t.X)if(s.X>t.X)i=1-i;else{if(0==(a=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y)))return-1;a>0==s.Y>r.Y&&(i=1-i)}else if(s.X>t.X){var a;if(0==(a=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y)))return-1;a>0==s.Y>r.Y&&(i=1-i)}r=s}return i},n.Clipper.prototype.PointInPolygon=function(t,e){for(var i=0,n=e;;){var r=e.Pt.X,o=e.Pt.Y,s=e.Next.Pt.X,a=e.Next.Pt.Y;if(a==t.Y&&(s==t.X||o==t.Y&&s>t.X==r<t.X))return-1;if(o<t.Y!=a<t.Y)if(r>=t.X)if(s>t.X)i=1-i;else{if(0==(l=(r-t.X)*(a-t.Y)-(s-t.X)*(o-t.Y)))return-1;l>0==a>o&&(i=1-i)}else if(s>t.X){var l;if(0==(l=(r-t.X)*(a-t.Y)-(s-t.X)*(o-t.Y)))return-1;l>0==a>o&&(i=1-i)}if(n==(e=e.Next))break}return i},n.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(n>=0)return 0!=n;i=i.Next}while(i!=t);return!0},n.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i];null!==r.Pts&&r.FirstLeft==t&&this.Poly2ContainsPoly1(r.Pts,e.Pts)&&(r.FirstLeft=e)}},n.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i=0,n=this.m_PolyOuts,r=n.length,o=n[i];i<r;o=n[++i])o.FirstLeft==t&&(o.FirstLeft=e)},n.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},n.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i,r=this.m_Joins[t],o=this.GetOutRec(r.OutPt1.Idx),s=this.GetOutRec(r.OutPt2.Idx);if(null!=o.Pts&&null!=s.Pts)if(i=o==s?o:this.Param1RightOfParam2(o,s)?s:this.Param1RightOfParam2(s,o)?o:this.GetLowermostRec(o,s),this.JoinPoints(r,o,s))if(o==s){if(o.Pts=r.OutPt1,o.BottomPt=null,(s=this.CreateOutRec()).Pts=r.OutPt2,this.UpdateOutPtIdxs(s),this.m_UsingPolyTree)for(var a=0,l=this.m_PolyOuts.length;a<l-1;a++){var u=this.m_PolyOuts[a];null==u.Pts||n.Clipper.ParseFirstLeft(u.FirstLeft)!=o||u.IsHole==o.IsHole||this.Poly2ContainsPoly1(u.Pts,r.OutPt2)&&(u.FirstLeft=s)}this.Poly2ContainsPoly1(s.Pts,o.Pts)?(s.IsHole=!o.IsHole,s.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,o),(s.IsHole^this.ReverseSolution)==this.Area(s)>0&&this.ReversePolyPtLinks(s.Pts)):this.Poly2ContainsPoly1(o.Pts,s.Pts)?(s.IsHole=o.IsHole,o.IsHole=!s.IsHole,s.FirstLeft=o.FirstLeft,o.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(o,s),(o.IsHole^this.ReverseSolution)==this.Area(o)>0&&this.ReversePolyPtLinks(o.Pts)):(s.IsHole=o.IsHole,s.FirstLeft=o.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(o,s))}else s.Pts=null,s.BottomPt=null,s.Idx=o.Idx,o.IsHole=i.IsHole,i==s&&(o.FirstLeft=s.FirstLeft),s.FirstLeft=o,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,o)}},n.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do{e.Idx=t.Idx,e=e.Prev}while(e!=t.Pts)},n.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i)do{for(var r=i.Next;r!=e.Pts;){if(n.IntPoint.op_Equality(i.Pt,r.Pt)&&r.Next!=i&&r.Prev!=i){var o=i.Prev,s=r.Prev;i.Prev=s,s.Next=i,r.Prev=o,o.Next=r,e.Pts=i;var a=this.CreateOutRec();a.Pts=r,this.UpdateOutPtIdxs(a),this.Poly2ContainsPoly1(a.Pts,e.Pts)?(a.IsHole=!e.IsHole,a.FirstLeft=e):this.Poly2ContainsPoly1(e.Pts,a.Pts)?(a.IsHole=e.IsHole,e.IsHole=!a.IsHole,a.FirstLeft=e.FirstLeft,e.FirstLeft=a):(a.IsHole=e.IsHole,a.FirstLeft=e.FirstLeft),r=i}r=r.Next}i=i.Next}while(i!=e.Pts)}},n.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var i=0,n=0,r=e-1;n<e;++n)i+=(t[r].X+t[n].X)*(t[r].Y-t[n].Y),r=n;return.5*-i},n.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var i=0;do{i+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next}while(e!=t.Pts);return.5*i},n.Clipper.SimplifyPolygon=function(t,e){var i=new Array,r=new n.Clipper(0);return r.StrictlySimple=!0,r.AddPath(t,n.PolyType.ptSubject,!0),r.Execute(n.ClipType.ctUnion,i,e,e),i},n.Clipper.SimplifyPolygons=function(t,e){typeof e>"u"&&(e=n.PolyFillType.pftEvenOdd);var i=new Array,r=new n.Clipper(0);return r.StrictlySimple=!0,r.AddPaths(t,n.PolyType.ptSubject,!0),r.Execute(n.ClipType.ctUnion,i,e,e),i},n.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},n.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y,r=i.X-e.X,o=n*e.X+r*e.Y;return(o=n*t.X+r*t.Y-o)*o/(n*n+r*r)},n.Clipper.SlopesNearCollinear=function(t,e,i,r){return n.Clipper.DistanceFromLineSqrd(e,t,i)<r},n.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r<=i},n.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},n.Clipper.CleanPolygon=function(t,e){typeof e>"u"&&(e=1.415);var i=t.length;if(0==i)return new Array;for(var r=new Array(i),o=0;o<i;++o)r[o]=new n.OutPt;for(o=0;o<i;++o)r[o].Pt=t[o],r[o].Next=r[(o+1)%i],r[o].Next.Prev=r[o],r[o].Idx=0;for(var s=e*e,a=r[0];0==a.Idx&&a.Next!=a.Prev;)n.Clipper.PointsAreClose(a.Pt,a.Prev.Pt,s)?(a=n.Clipper.ExcludeOp(a),i--):n.Clipper.PointsAreClose(a.Prev.Pt,a.Next.Pt,s)?(n.Clipper.ExcludeOp(a.Next),a=n.Clipper.ExcludeOp(a),i-=2):n.Clipper.SlopesNearCollinear(a.Prev.Pt,a.Pt,a.Next.Pt,s)?(a=n.Clipper.ExcludeOp(a),i--):(a.Idx=1,a=a.Next);i<3&&(i=0);var l=new Array(i);for(o=0;o<i;++o)l[o]=new n.IntPoint(a.Pt),a=a.Next;return r=null,l},n.Clipper.CleanPolygons=function(t,e){for(var i=new Array(t.length),r=0,o=t.length;r<o;r++)i[r]=n.Clipper.CleanPolygon(t[r],e);return i},n.Clipper.Minkowski=function(t,e,i,r){var o=r?1:0,s=t.length,a=e.length,l=new Array;if(i)for(var u=0;u<a;u++){for(var h=new Array(s),c=0,p=t.length,d=t[c];c<p;d=t[++c])h[c]=new n.IntPoint(e[u].X+d.X,e[u].Y+d.Y);l.push(h)}else for(u=0;u<a;u++){for(h=new Array(s),c=0,p=t.length,d=t[c];c<p;d=t[++c])h[c]=new n.IntPoint(e[u].X-d.X,e[u].Y-d.Y);l.push(h)}var f=new Array;for(u=0;u<a-1+o;u++)for(c=0;c<s;c++){var g=new Array;g.push(l[u%a][c%s]),g.push(l[(u+1)%a][c%s]),g.push(l[(u+1)%a][(c+1)%s]),g.push(l[u%a][(c+1)%s]),n.Clipper.Orientation(g)||g.reverse(),f.push(g)}var m=new n.Clipper(0);return m.AddPaths(f,n.PolyType.ptSubject,!0),m.Execute(n.ClipType.ctUnion,l,n.PolyFillType.pftNonZero,n.PolyFillType.pftNonZero),l},n.Clipper.MinkowskiSum=function(){var t=arguments,e=t.length;if(3==e){var i=t[0],r=t[1],o=t[2];return n.Clipper.Minkowski(i,r,!0,o)}if(4==e){i=t[0];for(var s=t[1],a=t[2],l=(o=t[3],new n.Clipper),u=0,h=s.length;u<h;++u){var c=n.Clipper.Minkowski(i,s[u],!0,o);l.AddPaths(c,n.PolyType.ptSubject,!0)}o&&l.AddPaths(s,n.PolyType.ptClip,!0);var p=new n.Paths;return l.Execute(n.ClipType.ctUnion,p,a,a),p}},n.Clipper.MinkowskiDiff=function(t,e,i){return n.Clipper.Minkowski(t,e,!1,i)},n.Clipper.PolyTreeToPaths=function(t){var e=new Array;return n.Clipper.AddPolyNodeToPaths(t,n.Clipper.NodeType.ntAny,e),e},n.Clipper.AddPolyNodeToPaths=function(t,e,i){var r=!0;switch(e){case n.Clipper.NodeType.ntOpen:return;case n.Clipper.NodeType.ntClosed:r=!t.IsOpen}t.m_polygon.length>0&&r&&i.push(t.m_polygon);for(var o=0,s=t.Childs(),a=s.length,l=s[o];o<a;l=s[++o])n.Clipper.AddPolyNodeToPaths(l,e,i)},n.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new n.Paths,i=0,r=t.ChildCount();i<r;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},n.Clipper.ClosedPathsFromPolyTree=function(t){var e=new n.Paths;return n.Clipper.AddPolyNodeToPaths(t,n.Clipper.NodeType.ntClosed,e),e},de(n.Clipper,n.ClipperBase),n.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},n.ClipperOffset=function(t,e){typeof t>"u"&&(t=2),typeof e>"u"&&(e=n.ClipperOffset.def_arc_tolerance),this.m_destPolys=new n.Paths,this.m_srcPoly=new n.Path,this.m_destPoly=new n.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new n.IntPoint,this.m_polyNodes=new n.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},n.ClipperOffset.two_pi=6.28318530717959,n.ClipperOffset.def_arc_tolerance=.25,n.ClipperOffset.prototype.Clear=function(){n.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},n.ClipperOffset.Round=n.Clipper.Round,n.ClipperOffset.prototype.AddPath=function(t,e,i){var r=t.length-1;if(!(r<0)){var o=new n.PolyNode;if(o.m_jointype=e,o.m_endtype=i,i==n.EndType.etClosedLine||i==n.EndType.etClosedPolygon)for(;r>0&&n.IntPoint.op_Equality(t[0],t[r]);)r--;o.m_polygon.push(t[0]);for(var s=0,a=0,l=1;l<=r;l++)n.IntPoint.op_Inequality(o.m_polygon[s],t[l])&&(s++,o.m_polygon.push(t[l]),(t[l].Y>o.m_polygon[a].Y||t[l].Y==o.m_polygon[a].Y&&t[l].X<o.m_polygon[a].X)&&(a=s));if(!(i==n.EndType.etClosedPolygon&&s<2||i!=n.EndType.etClosedPolygon&&s<0)&&(this.m_polyNodes.AddChild(o),i==n.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new n.IntPoint(0,a);else{var u=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(o.m_polygon[a].Y>u.Y||o.m_polygon[a].Y==u.Y&&o.m_polygon[a].X<u.X)&&(this.m_lowest=new n.IntPoint(this.m_polyNodes.ChildCount()-1,a))}}},n.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,r=t.length;n<r;n++)this.AddPath(t[n],e,i)},n.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!n.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){((e=this.m_polyNodes.Childs()[t]).m_endtype==n.EndType.etClosedPolygon||e.m_endtype==n.EndType.etClosedLine&&n.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++){var e;(e=this.m_polyNodes.Childs()[t]).m_endtype==n.EndType.etClosedLine&&!n.Clipper.Orientation(e.m_polygon)&&e.m_polygon.reverse()}},n.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,r=e.Y-t.Y;if(0==i&&0==r)return new n.DoublePoint(0,0);var o=1/Math.sqrt(i*i+r*r);return i*=o,r*=o,new n.DoublePoint(r,-i)},n.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,n.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){(o=this.m_polyNodes.Childs()[e]).m_endtype==n.EndType.etClosedPolygon&&this.m_destPolys.push(o.m_polygon)}else{var i;this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5,i=this.ArcTolerance<=0?n.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*n.ClipperOffset.def_arc_tolerance?Math.abs(t)*n.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var r=3.14159265358979/Math.acos(1-i/Math.abs(t));this.m_sin=Math.sin(n.ClipperOffset.two_pi/r),this.m_cos=Math.cos(n.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/n.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(e=0;e<this.m_polyNodes.ChildCount();e++){var o=this.m_polyNodes.Childs()[e];this.m_srcPoly=o.m_polygon;var s=this.m_srcPoly.length;if(!(0==s||t<=0&&(s<3||o.m_endtype!=n.EndType.etClosedPolygon))){if(this.m_destPoly=new Array,1==s){if(o.m_jointype==n.JoinType.jtRound)for(var a=1,l=0,u=1;u<=r;u++){this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X+a*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y+l*t)));var h=a;a=a*this.m_cos-this.m_sin*l,l=h*this.m_sin+l*this.m_cos}else for(a=-1,l=-1,u=0;u<4;++u)this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X+a*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y+l*t))),a<0?a=1:l<0?l=1:a=-1;this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(u=0;u<s-1;u++)this.m_normals.push(n.ClipperOffset.GetUnitNormal(this.m_srcPoly[u],this.m_srcPoly[u+1]));if(o.m_endtype==n.EndType.etClosedLine||o.m_endtype==n.EndType.etClosedPolygon?this.m_normals.push(n.ClipperOffset.GetUnitNormal(this.m_srcPoly[s-1],this.m_srcPoly[0])):this.m_normals.push(new n.DoublePoint(this.m_normals[s-2])),o.m_endtype==n.EndType.etClosedPolygon){var c=s-1;for(u=0;u<s;u++)c=this.OffsetPoint(u,c,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(o.m_endtype==n.EndType.etClosedLine){for(c=s-1,u=0;u<s;u++)c=this.OffsetPoint(u,c,o.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;var p=this.m_normals[s-1];for(u=s-1;u>0;u--)this.m_normals[u]=new n.DoublePoint(-this.m_normals[u-1].X,-this.m_normals[u-1].Y);this.m_normals[0]=new n.DoublePoint(-p.X,-p.Y),c=0;for(u=s-1;u>=0;u--)c=this.OffsetPoint(u,c,o.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(c=0,u=1;u<s-1;++u)c=this.OffsetPoint(u,c,o.m_jointype);var d;if(o.m_endtype==n.EndType.etOpenButt){u=s-1;d=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[u].X+this.m_normals[u].X*t),n.ClipperOffset.Round(this.m_srcPoly[u].Y+this.m_normals[u].Y*t)),this.m_destPoly.push(d),d=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[u].X-this.m_normals[u].X*t),n.ClipperOffset.Round(this.m_srcPoly[u].Y-this.m_normals[u].Y*t)),this.m_destPoly.push(d)}else{u=s-1;c=s-2,this.m_sinA=0,this.m_normals[u]=new n.DoublePoint(-this.m_normals[u].X,-this.m_normals[u].Y),o.m_endtype==n.EndType.etOpenSquare?this.DoSquare(u,c):this.DoRound(u,c)}for(u=s-1;u>0;u--)this.m_normals[u]=new n.DoublePoint(-this.m_normals[u-1].X,-this.m_normals[u-1].Y);this.m_normals[0]=new n.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y);for(u=(c=s-1)-1;u>0;--u)c=this.OffsetPoint(u,c,o.m_jointype);o.m_endtype==n.EndType.etOpenButt?(d=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(d),d=new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),n.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(d)):(c=1,this.m_sinA=0,o.m_endtype==n.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}}}},n.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof n.PolyTree;if(e){var i=t[0],r=t[1];if(i.Clear(),this.FixOrientations(),this.DoOffset(r),(l=new n.Clipper(0)).AddPaths(this.m_destPolys,n.PolyType.ptSubject,!0),r>0)l.Execute(n.ClipType.ctUnion,i,n.PolyFillType.pftPositive,n.PolyFillType.pftPositive);else{var o=n.Clipper.GetBounds(this.m_destPolys);if((u=new n.Path).push(new n.IntPoint(o.left-10,o.bottom+10)),u.push(new n.IntPoint(o.right+10,o.bottom+10)),u.push(new n.IntPoint(o.right+10,o.top-10)),u.push(new n.IntPoint(o.left-10,o.top-10)),l.AddPath(u,n.PolyType.ptSubject,!0),l.ReverseSolution=!0,l.Execute(n.ClipType.ctUnion,i,n.PolyFillType.pftNegative,n.PolyFillType.pftNegative),1==i.ChildCount()&&i.Childs()[0].ChildCount()>0){var s=i.Childs()[0];i.Childs()[0]=s.Childs()[0];for(var a=1;a<s.ChildCount();a++)i.AddChild(s.Childs()[a])}else i.Clear()}}else{var l;i=t[0],r=t[1];if(n.Clear(i),this.FixOrientations(),this.DoOffset(r),(l=new n.Clipper(0)).AddPaths(this.m_destPolys,n.PolyType.ptSubject,!0),r>0)l.Execute(n.ClipType.ctUnion,i,n.PolyFillType.pftPositive,n.PolyFillType.pftPositive);else{var u;o=n.Clipper.GetBounds(this.m_destPolys);(u=new n.Path).push(new n.IntPoint(o.left-10,o.bottom+10)),u.push(new n.IntPoint(o.right+10,o.bottom+10)),u.push(new n.IntPoint(o.right+10,o.top-10)),u.push(new n.IntPoint(o.left-10,o.top-10)),l.AddPath(u,n.PolyType.ptSubject,!0),l.ReverseSolution=!0,l.Execute(n.ClipType.ctUnion,i,n.PolyFillType.pftNegative,n.PolyFillType.pftNegative),i.length>0&&i.splice(0,1)}}},n.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,this.m_sinA<5e-5&&this.m_sinA>-5e-5)return e;if(this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1),this.m_sinA*this.m_delta<0)this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new n.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(i){case n.JoinType.jtMiter:var r=this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y+1;r>=this.m_miterLim?this.DoMiter(t,e,r):this.DoSquare(t,e);break;case n.JoinType.jtSquare:this.DoSquare(t,e);break;case n.JoinType.jtRound:this.DoRound(t,e)}return e=t},n.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i)),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i)))),this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i)),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i))))},n.ClipperOffset.prototype.DoMiter=function(t,e,i){var r=this.m_delta/i;this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*r),n.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*r)))},n.ClipperOffset.prototype.DoRound=function(t,e){for(var i,r=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),o=n.Cast_Int32(n.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(r))),s=this.m_normals[e].X,a=this.m_normals[e].Y,l=0;l<o;++l)this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+s*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+a*this.m_delta))),i=s,s=s*this.m_cos-this.m_sin*a,a=i*this.m_sin+a*this.m_cos;this.m_destPoly.push(new n.IntPoint(n.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),n.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},n.Error=function(t){try{throw new Error(t)}catch(t){alert(t.message)}},n.JS={},n.JS.AreaOfPolygon=function(t,e){return e||(e=1),n.Clipper.Area(t)/(e*e)},n.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var i=0,r=0;r<t.length;r++)i+=n.Clipper.Area(t[r]);return i/(e*e)},n.JS.BoundsOfPath=function(t,e){return n.JS.BoundsOfPaths([t],e)},n.JS.BoundsOfPaths=function(t,e){e||(e=1);var i=n.Clipper.GetBounds(t);return i.left/=e,i.bottom/=e,i.right/=e,i.top/=e,i},n.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array;t=n.JS.Clone(t);if("number"!=typeof e||null===e)return n.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||e<0)return t;i||(t=[t]);for(var r,o,s,a,l,u,h,c=t.length,p=[],d=0;d<c;d++)if(0!==(r=(o=t[d]).length)){if(r<3){s=o,p.push(s);continue}for(s=o,a=e*e,l=o[0],u=1,h=1;h<r;h++)(o[h].X-l.X)*(o[h].X-l.X)+(o[h].Y-l.Y)*(o[h].Y-l.Y)<=a||(s[u]=o[h],l=o[h],u++);l=o[u-1],(o[0].X-l.X)*(o[0].X-l.X)+(o[0].Y-l.Y)*(o[0].Y-l.Y)<=a&&u--,u<r&&s.splice(u,r-u),s.length&&p.push(s)}return!i&&p.length?p=p[0]:i||0!==p.length?i&&0===p.length&&(p=[[]]):p=[],p},n.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,r,o,s=t.length,a=new Array(s);for(n=0;n<s;n++){for(i=t[n].length,o=new Array(i),r=0;r<i;r++)o[r]={X:t[n][r].X,Y:t[n][r].Y};a[n]=o}return e||(a=a[0]),a},n.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return n.Error("Tolerance is not a number in Lighten()."),n.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||e<0)return n.JS.Clone(t);t[0]instanceof Array||(t=[t]);var i,r,o,s,a,l,u,h,c,p,d,f,g,m,v,y,x=t.length,_=e*e,b=[];for(i=0;i<x;i++)if(0!=(l=(o=t[i]).length)){for(s=0;s<1e6;s++){for(a=[],o[(l=o.length)-1].X!=o[0].X||o[l-1].Y!=o[0].Y?(d=1,o.push({X:o[0].X,Y:o[0].Y}),l=o.length):d=0,p=[],r=0;r<l-2;r++)u=o[r],c=o[r+1],h=o[r+2],v=u.X,y=u.Y,f=h.X-v,g=h.Y-y,(0!==f||0!==g)&&((m=((c.X-v)*f+(c.Y-y)*g)/(f*f+g*g))>1?(v=h.X,y=h.Y):m>0&&(v+=f*m,y+=g*m)),(f=c.X-v)*f+(g=c.Y-y)*g<=_&&(p[r+1]=1,r++);for(a.push({X:o[0].X,Y:o[0].Y}),r=1;r<l-1;r++)p[r]||a.push({X:o[r].X,Y:o[r].Y});if(a.push({X:o[l-1].X,Y:o[l-1].Y}),d&&o.pop(),!p.length)break;o=a}a[(l=a.length)-1].X==a[0].X&&a[l-1].Y==a[0].Y&&a.pop(),a.length>2&&b.push(a)}return!t[0]instanceof Array&&(b=b[0]),typeof b>"u"&&(b=[[]]),b},n.JS.PerimeterOfPath=function(t,e,i){if(typeof t>"u")return 0;var n,r,o=Math.sqrt,s=0,a=0,l=0,u=0,h=0,c=t.length;if(c<2)return 0;for(e&&(t[c]=t[0],c++);--c;)a=(n=t[c]).X,l=n.Y,s+=o((a-(u=(r=t[c-1]).X))*(a-u)+(l-(h=r.Y))*(l-h));return e&&t.pop(),s/i},n.JS.PerimeterOfPaths=function(t,e,i){i||(i=1);for(var r=0,o=0;o<t.length;o++)r+=n.JS.PerimeterOfPath(t[o],e,i);return r},n.JS.ScaleDownPath=function(t,e){var i,n;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=n.X/e,n.Y=n.Y/e},n.JS.ScaleDownPaths=function(t,e){var i,n,r;Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(r=t[i][n]).X=r.X/e,r.Y=r.Y/e},n.JS.ScaleUpPath=function(t,e){var i,n,r=Math.round;for(e||(e=1),i=t.length;i--;)(n=t[i]).X=r(n.X*e),n.Y=r(n.Y*e)},n.JS.ScaleUpPaths=function(t,e){var i,n,r,o=Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)(r=t[i][n]).X=o(r.X*e),r.Y=o(r.Y*e)},n.ExPolygons=function(){return[]},n.ExPolygon=function(){this.outer=null,this.holes=null},n.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new n.ExPolygon;i.outer=t.Contour();var r,o,s,a,l,u,h=t.Childs(),c=h.length;for(i.holes=new Array(c),s=0;s<c;s++)for(r=h[s],i.holes[s]=r.Contour(),a=0,u=(l=r.Childs()).length;a<u;a++)o=l[a],n.JS.AddOuterPolyNodeToExPolygons(o,e);e.push(i)},n.JS.ExPolygonsToPaths=function(t){var e,i,r,o,s=new n.Paths;for(e=0,r=t.length;e<r;e++)for(s.push(t[e].outer),i=0,o=t[e].holes.length;i<o;i++)s.push(t[e].holes[i]);return s},n.JS.PolyTreeToExPolygons=function(t){var e,i,r,o,s=new n.ExPolygons;for(i=0,o=(r=t.Childs()).length;i<o;i++)e=r[i],n.JS.AddOuterPolyNodeToExPolygons(e,s);return s},e.exports=n})),LZ=Ye(((t,e)=>{"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}E(),u(i,"_classCallCheck"),u(n,"_defineProperties"),u(r,"_createClass");var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.R,r=void 0===n?1:n,o=e.Q,s=void 0===o?1:o,a=e.A,l=void 0===a?1:a,u=e.B,h=void 0===u?0:u,c=e.C,p=void 0===c?1:c;i(this,t),this.R=r,this.Q=s,this.A=l,this.C=p,this.B=h,this.cov=NaN,this.x=NaN}return u(t,"KalmanFilter"),r(t,[{key:"filter",value:u((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(isNaN(this.x))this.x=1/this.C*t,this.cov=1/this.C*this.Q*(1/this.C);else{var i=this.predict(e),n=this.uncertainty(),r=n*this.C*(1/(this.C*n*this.C+this.Q));this.x=i+r*(t-this.C*i),this.cov=n-r*this.C*n}return this.x}),"filter")},{key:"predict",value:u((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.A*this.x+this.B*t}),"predict")},{key:"uncertainty",value:u((function(){return this.A*this.cov*this.A+this.R}),"uncertainty")},{key:"lastMeasurement",value:u((function(){return this.x}),"lastMeasurement")},{key:"setMeasurementNoise",value:u((function(t){this.Q=t}),"setMeasurementNoise")},{key:"setProcessNoise",value:u((function(t){this.R=t}),"setProcessNoise")}]),t}();e.exports=o})),VZ=Ye(((t,e)=>{"use strict";E(),e.exports=u((function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var e=t.length,i=-1;i++<e;)for(var n=i+1;n<t.length;++n)t[i]===t[n]&&t.splice(n--,1);return t}),"unique"),e.exports.immutable=u((function(t){if(!Array.isArray(t))throw new TypeError("array-unique expects an array.");for(var i=t.length,n=new Array(i),r=0;r<i;r++)n[r]=t[r];return e.exports(n)}),"uniqueImmutable")})),iQ=Ye(((t,e)=>{var i,n;E(),i=t,n=function(){var t=u((function(){function e(t){return r.appendChild(t.dom),t}function i(t){for(var e=0;e<r.children.length;e++)r.children[e].style.display=e===t?"block":"none";n=t}u(e,"e"),u(i,"u");var n=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(t){t.preventDefault(),i(++n%r.children.length)}),!1);var o=(performance||Date).now(),s=o,a=0,l=e(new t.Panel("FPS","#0ff","#002")),h=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=e(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:r,addPanel:e,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(h.update(t-o,200),t>s+1e3&&(l.update(1e3*a/(t-s),100),s=t,a=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:r,setMode:i}}),"f");return t.Panel=function(t,e,i){var n=1/0,r=0,o=Math.round,s=o(window.devicePixelRatio||1),a=80*s,l=48*s,u=3*s,h=2*s,c=3*s,p=15*s,d=74*s,f=30*s,g=document.createElement("canvas");g.width=a,g.height=l,g.style.cssText="width:80px;height:48px";var m=g.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=i,m.fillRect(0,0,a,l),m.fillStyle=e,m.fillText(t,u,h),m.fillRect(c,p,d,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c,p,d,f),{dom:g,update:function(l,v){n=Math.min(n,l),r=Math.max(r,l),m.fillStyle=i,m.globalAlpha=1,m.fillRect(0,0,a,p),m.fillStyle=e,m.fillText(o(l)+" "+t+" ("+o(n)+"-"+o(r)+")",u,h),m.drawImage(g,c+s,p,d-s,f,c,p,d-s,f),m.fillRect(c+d-s,p,s,f),m.fillStyle=i,m.globalAlpha=.9,m.fillRect(c+d-s,p,s,o((1-l/v)*f))}}},t},"object"==typeof t&&typeof e<"u"?e.exports=n():"function"==typeof define&&define.amd?define(n):i.Stats=n()})),GQ=Ye(((t,e)=>{var i,n;E(),i=t,n=function(){"use strict";let{entries:t,setPrototypeOf:e,isFrozen:i,getPrototypeOf:n,getOwnPropertyDescriptor:r}=Object,{freeze:o,seal:s,create:a}=Object,{apply:l,construct:h}=typeof Reflect<"u"&&Reflect;o||(o=u((function(t){return t}),"freeze")),s||(s=u((function(t){return t}),"seal")),l||(l=u((function(t,e,i){return t.apply(e,i)}),"apply")),h||(h=u((function(t,e){return new t(...e)}),"construct"));let c=M(Array.prototype.forEach),p=M(Array.prototype.pop),d=M(Array.prototype.push),f=M(String.prototype.toLowerCase),g=M(String.prototype.toString),m=M(String.prototype.match),v=M(String.prototype.replace),y=M(String.prototype.indexOf),x=M(String.prototype.trim),_=M(RegExp.prototype.test),b=E(TypeError);function M(t){return function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return l(t,e,n)}}function E(t){return function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];return h(t,i)}}function w(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;e&&e(t,null);let o=n.length;for(;o--;){let e=n[o];if("string"==typeof e){let t=r(e);t!==e&&(i(n)||(n[o]=t),e=t)}t[e]=!0}return t}function A(e){let i=a(null);for(let[n,o]of t(e))void 0!==r(e,n)&&(i[n]=o);return i}function S(t,e){for(;null!==t;){let i=r(t,e);if(i){if(i.get)return M(i.get);if("function"==typeof i.value)return M(i.value)}t=n(t)}function i(t){return console.warn("fallback value for",t),null}return u(i,"fallbackValue"),i}u(M,"unapply"),u(E,"unconstruct"),u(w,"addToSet"),u(A,"clone"),u(S,"lookupGetter");let T=o(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),C=o(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=o(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I=o(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=o(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),O=o(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),N=o(["#text"]),D=o(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R=o(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q=o(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),B=o(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),k=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),F=s(/<%[\w\W]*|[\w\W]*%>/gm),U=s(/\${[\w\W]*}/gm),z=s(/^data-[\-\w.\u00B7-\uFFFF]/),V=s(/^aria-[\-\w]+$/),j=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G=s(/^(?:\w+script|data):/i),W=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),H=s(/^html$/i);var Y=Object.freeze({__proto__:null,MUSTACHE_EXPR:k,ERB_EXPR:F,TMPLIT_EXPR:U,DATA_ATTR:z,ARIA_ATTR:V,IS_ALLOWED_URI:j,IS_SCRIPT_OR_DATA:G,ATTR_WHITESPACE:W,DOCTYPE_NAME:H});let X=u((function(){return typeof window>"u"?null:window}),"getGlobal"),K=u((function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let i=null,n="data-tt-policy-suffix";e&&e.hasAttribute(n)&&(i=e.getAttribute(n));let r="dompurify"+(i?"#"+i:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}}),"_createTrustedTypesPolicy");function Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X(),i=u((t=>Z(t)),"DOMPurify");if(i.version="3.0.6",i.removed=[],!e||!e.document||9!==e.document.nodeType)return i.isSupported=!1,i;let{document:n}=e,r=n,s=r.currentScript,{DocumentFragment:l,HTMLTemplateElement:h,Node:M,Element:E,NodeFilter:k,NamedNodeMap:F=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:U,DOMParser:z,trustedTypes:V}=e,G=E.prototype,W=S(G,"cloneNode"),Q=S(G,"nextSibling"),J=S(G,"childNodes"),$=S(G,"parentNode");if("function"==typeof h){let t=n.createElement("template");t.content&&t.content.ownerDocument&&(n=t.content.ownerDocument)}let tt,et="",{implementation:it,createNodeIterator:nt,createDocumentFragment:rt,getElementsByTagName:ot}=n,{importNode:st}=r,at={};i.isSupported="function"==typeof t&&"function"==typeof $&&it&&void 0!==it.createHTMLDocument;let{MUSTACHE_EXPR:lt,ERB_EXPR:ut,TMPLIT_EXPR:ht,DATA_ATTR:ct,ARIA_ATTR:pt,IS_SCRIPT_OR_DATA:dt,ATTR_WHITESPACE:ft}=Y,{IS_ALLOWED_URI:gt}=Y,mt=null,vt=w({},[...T,...C,...P,...L,...N]),yt=null,xt=w({},[...D,...R,...q,...B]),_t=Object.seal(a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),bt=null,Mt=null,Et=!0,wt=!0,At=!1,St=!0,Tt=!1,Ct=!1,Pt=!1,It=!1,Lt=!1,Ot=!1,Nt=!1,Dt=!0,Rt=!1,qt="user-content-",Bt=!0,kt=!1,Ft={},Ut=null,zt=w({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Vt=null,jt=w({},["audio","video","img","source","image","track"]),Gt=null,Wt=w({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ht="http://www.w3.org/1998/Math/MathML",Yt="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml",Kt=Xt,Zt=!1,Qt=null,Jt=w({},[Ht,Yt,Xt],g),$t=null,te=["application/xhtml+xml","text/html"],ee="text/html",ie=null,ne=null,re=n.createElement("form"),oe=u((function(t){return t instanceof RegExp||t instanceof Function}),"isRegexOrFunction"),se=u((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ne||ne!==t){if((!t||"object"!=typeof t)&&(t={}),t=A(t),$t=$t=-1===te.indexOf(t.PARSER_MEDIA_TYPE)?ee:t.PARSER_MEDIA_TYPE,ie="application/xhtml+xml"===$t?g:f,mt="ALLOWED_TAGS"in t?w({},t.ALLOWED_TAGS,ie):vt,yt="ALLOWED_ATTR"in t?w({},t.ALLOWED_ATTR,ie):xt,Qt="ALLOWED_NAMESPACES"in t?w({},t.ALLOWED_NAMESPACES,g):Jt,Gt="ADD_URI_SAFE_ATTR"in t?w(A(Wt),t.ADD_URI_SAFE_ATTR,ie):Wt,Vt="ADD_DATA_URI_TAGS"in t?w(A(jt),t.ADD_DATA_URI_TAGS,ie):jt,Ut="FORBID_CONTENTS"in t?w({},t.FORBID_CONTENTS,ie):zt,bt="FORBID_TAGS"in t?w({},t.FORBID_TAGS,ie):{},Mt="FORBID_ATTR"in t?w({},t.FORBID_ATTR,ie):{},Ft="USE_PROFILES"in t&&t.USE_PROFILES,Et=!1!==t.ALLOW_ARIA_ATTR,wt=!1!==t.ALLOW_DATA_ATTR,At=t.ALLOW_UNKNOWN_PROTOCOLS||!1,St=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Tt=t.SAFE_FOR_TEMPLATES||!1,Ct=t.WHOLE_DOCUMENT||!1,Lt=t.RETURN_DOM||!1,Ot=t.RETURN_DOM_FRAGMENT||!1,Nt=t.RETURN_TRUSTED_TYPE||!1,It=t.FORCE_BODY||!1,Dt=!1!==t.SANITIZE_DOM,Rt=t.SANITIZE_NAMED_PROPS||!1,Bt=!1!==t.KEEP_CONTENT,kt=t.IN_PLACE||!1,gt=t.ALLOWED_URI_REGEXP||j,Kt=t.NAMESPACE||Xt,_t=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&oe(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_t.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&oe(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_t.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(_t.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Tt&&(wt=!1),Ot&&(Lt=!0),Ft&&(mt=w({},[...N]),yt=[],!0===Ft.html&&(w(mt,T),w(yt,D)),!0===Ft.svg&&(w(mt,C),w(yt,R),w(yt,B)),!0===Ft.svgFilters&&(w(mt,P),w(yt,R),w(yt,B)),!0===Ft.mathMl&&(w(mt,L),w(yt,q),w(yt,B))),t.ADD_TAGS&&(mt===vt&&(mt=A(mt)),w(mt,t.ADD_TAGS,ie)),t.ADD_ATTR&&(yt===xt&&(yt=A(yt)),w(yt,t.ADD_ATTR,ie)),t.ADD_URI_SAFE_ATTR&&w(Gt,t.ADD_URI_SAFE_ATTR,ie),t.FORBID_CONTENTS&&(Ut===zt&&(Ut=A(Ut)),w(Ut,t.FORBID_CONTENTS,ie)),Bt&&(mt["#text"]=!0),Ct&&w(mt,["html","head","body"]),mt.table&&(w(mt,["tbody"]),delete bt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw b('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');tt=t.TRUSTED_TYPES_POLICY,et=tt.createHTML("")}else void 0===tt&&(tt=K(V,s)),null!==tt&&"string"==typeof et&&(et=tt.createHTML(""));o&&o(t),ne=t}}),"_parseConfig"),ae=w({},["mi","mo","mn","ms","mtext"]),le=w({},["foreignobject","desc","title","annotation-xml"]),ue=w({},["title","style","font","a","script"]),he=w({},C);w(he,P),w(he,I);let ce=w({},L);w(ce,O);let pe=u((function(t){let e=$(t);(!e||!e.tagName)&&(e={namespaceURI:Kt,tagName:"template"});let i=f(t.tagName),n=f(e.tagName);return!!Qt[t.namespaceURI]&&(t.namespaceURI===Yt?e.namespaceURI===Xt?"svg"===i:e.namespaceURI===Ht?"svg"===i&&("annotation-xml"===n||ae[n]):!!he[i]:t.namespaceURI===Ht?e.namespaceURI===Xt?"math"===i:e.namespaceURI===Yt?"math"===i&&le[n]:!!ce[i]:t.namespaceURI===Xt?!(e.namespaceURI===Yt&&!le[n]||e.namespaceURI===Ht&&!ae[n])&&!ce[i]&&(ue[i]||!he[i]):!("application/xhtml+xml"!==$t||!Qt[t.namespaceURI]))}),"_checkValidNamespace"),de=u((function(t){d(i.removed,{element:t});try{t.parentNode.removeChild(t)}catch{t.remove()}}),"_forceRemove"),fe=u((function(t,e){try{d(i.removed,{attribute:e.getAttributeNode(t),from:e})}catch{d(i.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!yt[t])if(Lt||Ot)try{de(e)}catch{}else try{e.setAttribute(t,"")}catch{}}),"_removeAttribute"),ge=u((function(t){let e=null,i=null;if(It)t="<remove></remove>"+t;else{let e=m(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===$t&&Kt===Xt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let r=tt?tt.createHTML(t):t;if(Kt===Xt)try{e=(new z).parseFromString(r,$t)}catch{}if(!e||!e.documentElement){e=it.createDocument(Kt,"template",null);try{e.documentElement.innerHTML=Zt?et:r}catch{}}let o=e.body||e.documentElement;return t&&i&&o.insertBefore(n.createTextNode(i),o.childNodes[0]||null),Kt===Xt?ot.call(e,Ct?"html":"body")[0]:Ct?e.documentElement:o}),"_initDocument"),me=u((function(t){return nt.call(t.ownerDocument||t,t,k.SHOW_ELEMENT|k.SHOW_COMMENT|k.SHOW_TEXT,null)}),"_createNodeIterator"),ve=u((function(t){return t instanceof U&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof F)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)}),"_isClobbered"),ye=u((function(t){return"function"==typeof M&&t instanceof M}),"_isNode"),xe=u((function(t,e,n){at[t]&&c(at[t],(t=>{t.call(i,e,n,ne)}))}),"_executeHook"),_e=u((function(t){let e=null;if(xe("beforeSanitizeElements",t,null),ve(t))return de(t),!0;let n=ie(t.nodeName);if(xe("uponSanitizeElement",t,{tagName:n,allowedTags:mt}),t.hasChildNodes()&&!ye(t.firstElementChild)&&_(/<[/\w]/g,t.innerHTML)&&_(/<[/\w]/g,t.textContent))return de(t),!0;if(!mt[n]||bt[n]){if(!bt[n]&&Me(n)&&(_t.tagNameCheck instanceof RegExp&&_(_t.tagNameCheck,n)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(n)))return!1;if(Bt&&!Ut[n]){let e=$(t)||t.parentNode,i=J(t)||t.childNodes;if(i&&e)for(let n=i.length-1;n>=0;--n)e.insertBefore(W(i[n],!0),Q(t))}return de(t),!0}return t instanceof E&&!pe(t)||("noscript"===n||"noembed"===n||"noframes"===n)&&_(/<\/no(script|embed|frames)/i,t.innerHTML)?(de(t),!0):(Tt&&3===t.nodeType&&(e=t.textContent,c([lt,ut,ht],(t=>{e=v(e,t," ")})),t.textContent!==e&&(d(i.removed,{element:t.cloneNode()}),t.textContent=e)),xe("afterSanitizeElements",t,null),!1)}),"_sanitizeElements"),be=u((function(t,e,i){if(Dt&&("id"===e||"name"===e)&&(i in n||i in re))return!1;if((!wt||Mt[e]||!_(ct,e))&&(!Et||!_(pt,e)))if(!yt[e]||Mt[e]){if(!(Me(t)&&(_t.tagNameCheck instanceof RegExp&&_(_t.tagNameCheck,t)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(t))&&(_t.attributeNameCheck instanceof RegExp&&_(_t.attributeNameCheck,e)||_t.attributeNameCheck instanceof Function&&_t.attributeNameCheck(e))||"is"===e&&_t.allowCustomizedBuiltInElements&&(_t.tagNameCheck instanceof RegExp&&_(_t.tagNameCheck,i)||_t.tagNameCheck instanceof Function&&_t.tagNameCheck(i))))return!1}else if(!Gt[e]&&!_(gt,v(i,ft,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==y(i,"data:")||!Vt[t])&&(!At||_(dt,v(i,ft,"")))&&i)return!1;return!0}),"_isValidAttribute"),Me=u((function(t){return t.indexOf("-")>0}),"_isBasicCustomElement"),Ee=u((function(t){xe("beforeSanitizeAttributes",t,null);let{attributes:e}=t;if(!e)return;let n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:yt},r=e.length;for(;r--;){let o=e[r],{name:s,namespaceURI:a,value:l}=o,u=ie(s),h="value"===s?l:x(l);if(n.attrName=u,n.attrValue=h,n.keepAttr=!0,n.forceKeepAttr=void 0,xe("uponSanitizeAttribute",t,n),h=n.attrValue,n.forceKeepAttr||(fe(s,t),!n.keepAttr))continue;if(!St&&_(/\/>/i,h)){fe(s,t);continue}Tt&&c([lt,ut,ht],(t=>{h=v(h,t," ")}));let d=ie(t.nodeName);if(be(d,u,h)){if(Rt&&("id"===u||"name"===u)&&(fe(s,t),h=qt+h),tt&&"object"==typeof V&&"function"==typeof V.getAttributeType&&!a)switch(V.getAttributeType(d,u)){case"TrustedHTML":h=tt.createHTML(h);break;case"TrustedScriptURL":h=tt.createScriptURL(h)}try{a?t.setAttributeNS(a,s,h):t.setAttribute(s,h),p(i.removed)}catch{}}}xe("afterSanitizeAttributes",t,null)}),"_sanitizeAttributes"),we=u((function t(e){let i=null,n=me(e);for(xe("beforeSanitizeShadowDOM",e,null);i=n.nextNode();)xe("uponSanitizeShadowNode",i,null),!_e(i)&&(i.content instanceof l&&t(i.content),Ee(i));xe("afterSanitizeShadowDOM",e,null)}),"_sanitizeShadowDOM");return i.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,o=null,s=null,a=null;if(Zt=!t,Zt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!ye(t)){if("function"!=typeof t.toString)throw b("toString is not a function");if("string"!=typeof(t=t.toString()))throw b("dirty is not a string, aborting")}if(!i.isSupported)return t;if(Pt||se(e),i.removed=[],"string"==typeof t&&(kt=!1),kt){if(t.nodeName){let e=ie(t.nodeName);if(!mt[e]||bt[e])throw b("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof M)n=ge("\x3c!----\x3e"),o=n.ownerDocument.importNode(t,!0),1===o.nodeType&&"BODY"===o.nodeName||"HTML"===o.nodeName?n=o:n.appendChild(o);else{if(!Lt&&!Tt&&!Ct&&-1===t.indexOf("<"))return tt&&Nt?tt.createHTML(t):t;if(n=ge(t),!n)return Lt?null:Nt?et:""}n&&It&&de(n.firstChild);let u=me(kt?t:n);for(;s=u.nextNode();)_e(s)||(s.content instanceof l&&we(s.content),Ee(s));if(kt)return t;if(Lt){if(Ot)for(a=rt.call(n.ownerDocument);n.firstChild;)a.appendChild(n.firstChild);else a=n;return(yt.shadowroot||yt.shadowrootmode)&&(a=st.call(r,a,!0)),a}let h=Ct?n.outerHTML:n.innerHTML;return Ct&&mt["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&_(H,n.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+h),Tt&&c([lt,ut,ht],(t=>{h=v(h,t," ")})),tt&&Nt?tt.createHTML(h):h},i.setConfig=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};se(t),Pt=!0},i.clearConfig=function(){ne=null,Pt=!1},i.isValidAttribute=function(t,e,i){ne||se({});let n=ie(t),r=ie(e);return be(n,r,i)},i.addHook=function(t,e){"function"==typeof e&&(at[t]=at[t]||[],d(at[t],e))},i.removeHook=function(t){if(at[t])return p(at[t])},i.removeHooks=function(t){at[t]&&(at[t]=[])},i.removeAllHooks=function(){at={}},i}return u(Z,"createDOMPurify"),Z()},"object"==typeof t&&typeof e<"u"?e.exports=n():"function"==typeof define&&define.amd?define(n):(i=typeof globalThis<"u"?globalThis:i||self).DOMPurify=n()})),$Q=Ye(((t,e)=>{E(),function(){"use strict";function t(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function i(t,e,i){var n=e.x,r=e.y,o=i.x-n,s=i.y-r;if(0!==o||0!==s){var a=((t.x-n)*o+(t.y-r)*s)/(o*o+s*s);a>1?(n=i.x,r=i.y):a>0&&(n+=o*a,r+=s*a)}return(o=t.x-n)*o+(s=t.y-r)*s}function n(e,i){for(var n,r=e[0],o=[r],s=1,a=e.length;s<a;s++)t(n=e[s],r)>i&&(o.push(n),r=n);return r!==n&&o.push(n),o}function r(t,e,n,o,s){for(var a,l=o,u=e+1;u<n;u++){var h=i(t[u],t[e],t[n]);h>l&&(a=u,l=h)}l>o&&(a-e>1&&r(t,e,a,o,s),s.push(t[a]),n-a>1&&r(t,a,n,o,s))}function o(t,e){var i=t.length-1,n=[t[0]];return r(t,0,i,e,n),n.push(t[i]),n}function s(t,e,i){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=o(t=i?t:n(t,r),r)}u(t,"getSqDist"),u(i,"getSqSegDist"),u(n,"simplifyRadialDist"),u(r,"simplifyDPStep"),u(o,"simplifyDouglasPeucker"),u(s,"simplify"),"function"==typeof define&&define.amd?define((function(){return s})):typeof e<"u"?(e.exports=s,e.exports.default=s):typeof self<"u"?self.simplify=s:window.simplify=s}()}));E(),E(),E(),E();var ec,C0,ZS,Kb,gB,QS=class{constructor(t){te(this,C0),te(this,Kb),te(this,ec,void 0),ce(this,ec,t)}directionsTo(t,e){let i=M(this,ec).analytics;return t instanceof ia?0===t.destinations.length?[]:(i.getDirections(this,t.destinations[t.destinations.length-1]),tt(this,Kb,gB).call(this,t,e)):(i.getDirections(this,t),tt(this,C0,ZS).call(this,t,e))}distanceTo(t,e){let i=tt(this,C0,ZS).call(this,t,e);return(null==i?void 0:i.distance)||0}};ec=new WeakMap,C0=new WeakSet,ZS=u((function(t,e){let i=A0(this),n=A0(t),r=M(this,ec).navigator.getDirections({originIds:i,destinationNodeIds:n,accessible:(null==e?void 0:e.accessible)||!1,includedVortexIds:null!=e&&e.includedVortexIds?new Set(e.includedVortexIds):void 0,excludedVortexIds:null!=e&&e.excludedVortexIds?new Set(e.excludedVortexIds):void 0,simplify:null==e?void 0:e.simplify});return new tc(M(this,ec),r)}),"#directionsToSingleDestination"),Kb=new WeakSet,gB=u((function(t,e){let i,n=[],r=A0(this);for(let o=0;o<t.destinations.length;o++){i=A0(t.destinations[o]);let s=M(this,ec).navigator.getDirections({originIds:r,destinationNodeIds:i,includedVortexIds:null!=e&&e.includedVortexIds?new Set(e.includedVortexIds):void 0,excludedVortexIds:null!=e&&e.excludedVortexIds?new Set(e.excludedVortexIds):void 0,accessible:(null==e?void 0:e.accessible)||!1,simplify:null==e?void 0:e.simplify}),a=new tc(M(this,ec),s);n.push(a),r=0===a.path.length?i:[a.path[a.path.length-1].id]}return n}),"#directionsToDestinationSet"),u(QS,"MappedinNavigatable");var ja=QS;E(),E();var vB="mi-debug",KS=(t=>(t[t.LOG=0]="LOG",t[t.WARN=1]="WARN",t[t.ERROR=2]="ERROR",t[t.SILENT=3]="SILENT",t))(KS||{});function yB(t){0<=t&&t<=3&&(xB.logState=t)}u(yB,"setLoggerLevel");var xB={logState:0,log(...t){this.logState<=0&&console.log("[MappedInJS]",...t)},warn(...t){this.logState<=1&&console.warn("[MappedInJS]",...t)},error(...t){this.logState<=2&&console.error("[MappedInJS]",...t)},assert(...t){console.assert(...t)},time(t){console.time(t)},timeEnd(t){console.timeEnd(t)}},Le=xB;E(),E(),E(),E();var JS=u((function(t,e){return(JS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)}),"extendStatics");function bh(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}JS(t,e),u(i,"__"),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}u(bh,"__extends");var _i=u((function(){return _i=Object.assign||u((function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}),"__assign"),_i.apply(this,arguments)}),"__assign");function lr(t,e,i,n){function r(t){return t instanceof i?t:new i((function(e){e(t)}))}return u(r,"adopt"),new(i||(i=Promise))((function(i,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):r(t.value).then(s,a)}u(s,"fulfilled"),u(a,"rejected"),u(l,"step"),l((n=n.apply(t,e||[])).next())}))}function ur(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function bB(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _B(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}u(lr,"__awaiter"),u(ur,"__generator"),u(bB,"__values"),u(_B,"__read"),E(),E(),E();var _h,Ds,nc,wh,Ro,ra,mr,Cd,cr=u((function(){return cr=Object.assign||u((function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}),"__assign"),cr.apply(this,arguments)}),"__assign");function wB(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}function Sr(t,e,i,n){function r(t){return t instanceof i?t:new i((function(e){e(t)}))}return u(r,"adopt"),new(i||(i=Promise))((function(i,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):r(t.value).then(s,a)}u(s,"fulfilled"),u(a,"rejected"),u(l,"step"),l((n=n.apply(t,e||[])).next())}))}function Ar(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function su(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function No(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}function Tl(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)(n||!(r in e))&&(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))}u(wB,"__rest"),u(Sr,"__awaiter"),u(Ar,"__generator"),u(su,"__values"),u(No,"__read"),u(Tl,"__spreadArray"),E(),E(),E(),function(t){t.US="US",t.EU="EU"}(_h||(_h={})),E(),function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"}(Ds||(Ds={})),function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"}(nc||(nc={})),function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"}(wh||(wh={})),E(),function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"}(Ro||(Ro={})),E(),function(t){t.BEFORE="before",t.ENRICHMENT="enrichment",t.DESTINATION="destination"}(ra||(ra={})),E(),function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"}(mr||(mr={})),E(),function(t){t.XHR="xhr",t.SendBeacon="beacon",t.Fetch="fetch"}(Cd||(Cd={})),E(),E();var $S="-",P0="AMP",MB="".concat(P0,"_unsent"),eA="https://api2.amplitude.com/2/httpapi",EB="https://api.eu.amplitude.com/2/httpapi",TB="https://api2.amplitude.com/batch",SB="https://api.eu.amplitude.com/batch";E();var _K=1e3,Jb=u((function(t){if(Object.keys(t).length>_K)return!1;for(var e in t){var i=t[e];if(!tA(e,i))return!1}return!0}),"isValidObject"),tA=u((function(t,e){var i,n;if("string"!=typeof t)return!1;if(Array.isArray(e)){var r=!0;try{for(var o=su(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(Array.isArray(a))return!1;if("object"==typeof a)r=r&&Jb(a);else if(!["number","string"].includes(typeof a))return!1;if(!r)return!1}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}}else{if(null==e)return!1;if("object"==typeof e)return Jb(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0}),"isValidProperties"),Sl=function(){function t(){this._propertySet=new Set,this._properties={}}return u(t,"Identify"),t.prototype.getUserProperties=function(){return cr({},this._properties)},t.prototype.set=function(t,e){return this._safeSet(Ds.SET,t,e),this},t.prototype.setOnce=function(t,e){return this._safeSet(Ds.SET_ONCE,t,e),this},t.prototype.append=function(t,e){return this._safeSet(Ds.APPEND,t,e),this},t.prototype.prepend=function(t,e){return this._safeSet(Ds.PREPEND,t,e),this},t.prototype.postInsert=function(t,e){return this._safeSet(Ds.POSTINSERT,t,e),this},t.prototype.preInsert=function(t,e){return this._safeSet(Ds.PREINSERT,t,e),this},t.prototype.remove=function(t,e){return this._safeSet(Ds.REMOVE,t,e),this},t.prototype.add=function(t,e){return this._safeSet(Ds.ADD,t,e),this},t.prototype.unset=function(t){return this._safeSet(Ds.UNSET,t,$S),this},t.prototype.clearAll=function(){return this._properties={},this._properties[Ds.CLEAR_ALL]=$S,this},t.prototype._safeSet=function(t,e,i){if(this._validate(t,e,i)){var n=this._properties[t];return void 0===n&&(n={},this._properties[t]=n),n[e]=i,this._propertySet.add(e),!0}return!1},t.prototype._validate=function(t,e,i){return void 0===this._properties[Ds.CLEAR_ALL]&&!this._propertySet.has(e)&&(t===Ds.ADD?"number"==typeof i:t===Ds.UNSET||t===Ds.REMOVE||tA(e,i))},t}(),AB=u((function(t,e,i){return cr(cr(cr({},"string"==typeof t?{event_type:t}:t),i),e&&{event_properties:e})}),"createTrackEvent"),I0=u((function(t,e){return cr(cr({},e),{event_type:wh.IDENTIFY,user_properties:t.getUserProperties()})}),"createIdentifyEvent"),CB=u((function(t,e,i,n){var r;return cr(cr({},n),{event_type:wh.GROUP_IDENTIFY,group_properties:i.getUserProperties(),groups:(r={},r[t]=e,r)})}),"createGroupIdentifyEvent"),PB=u((function(t,e,i){var n,r=new Sl;return r.set(t,e),cr(cr({},i),{event_type:wh.IDENTIFY,user_properties:r.getUserProperties(),groups:(n={},n[t]=e,n)})}),"createGroupEvent"),IB=u((function(t,e){return cr(cr({},e),{event_type:wh.REVENUE,event_properties:t.getEventProperties()})}),"createRevenueEvent");E(),E();var Mh=u((function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=mr.Unknown),{event:t,code:e,message:i}}),"buildResult"),OB=function(){function t(){this.queue=[],this.applying=!1,this.plugins=[]}return u(t,"Timeline"),t.prototype.register=function(t,e){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(i){switch(i.label){case 0:return[4,t.setup(e)];case 1:return i.sent(),this.plugins.push(t),[2]}}))}))},t.prototype.deregister=function(t){return this.plugins.splice(this.plugins.findIndex((function(e){return e.name===t})),1),Promise.resolve()},t.prototype.reset=function(){this.applying=!1,this.plugins=[]},t.prototype.push=function(t){var e=this;return new Promise((function(i){e.queue.push([t,i]),e.scheduleApply(0)}))},t.prototype.scheduleApply=function(t){var e=this;this.applying||(this.applying=!0,setTimeout((function(){e.apply(e.queue.shift()).then((function(){e.applying=!1,e.queue.length>0&&e.scheduleApply(0)}))}),t))},t.prototype.apply=function(t){return Sr(this,void 0,void 0,(function(){var e,i,n,r,o,s,a,l,u,h,c,p,d,f,g,m,v,y;return Ar(this,(function(x){switch(x.label){case 0:if(!t)return[2];e=No(t,1),i=e[0],n=No(t,2),r=n[1],o=this.plugins.filter((function(t){return t.type===ra.BEFORE})),x.label=1;case 1:x.trys.push([1,6,7,8]),s=su(o),a=s.next(),x.label=2;case 2:return a.done?[3,5]:[4,a.value.execute(cr({},i))];case 3:i=x.sent(),x.label=4;case 4:return a=s.next(),[3,2];case 5:return[3,8];case 6:return l=x.sent(),g={error:l},[3,8];case 7:try{a&&!a.done&&(m=s.return)&&m.call(s)}finally{if(g)throw g.error}return[7];case 8:u=this.plugins.filter((function(t){return t.type===ra.ENRICHMENT})),x.label=9;case 9:x.trys.push([9,14,15,16]),h=su(u),c=h.next(),x.label=10;case 10:return c.done?[3,13]:[4,c.value.execute(cr({},i))];case 11:i=x.sent(),x.label=12;case 12:return c=h.next(),[3,10];case 13:return[3,16];case 14:return p=x.sent(),v={error:p},[3,16];case 15:try{c&&!c.done&&(y=h.return)&&y.call(h)}finally{if(v)throw v.error}return[7];case 16:return d=this.plugins.filter((function(t){return t.type===ra.DESTINATION})),f=d.map((function(t){var e=cr({},i);return t.execute(e).catch((function(t){return Mh(e,0,String(t))}))})),Promise.all(f).then((function(t){var e=No(t,1)[0];r(e)})),[2]}}))}))},t.prototype.flush=function(){return Sr(this,void 0,void 0,(function(){var t,e,i,n=this;return Ar(this,(function(r){switch(r.label){case 0:return t=this.queue,this.queue=[],[4,Promise.all(t.map((function(t){return n.apply(t)})))];case 1:return r.sent(),e=this.plugins.filter((function(t){return t.type===ra.DESTINATION})),i=e.map((function(t){return t.flush&&t.flush()})),[4,Promise.all(i)];case 2:return r.sent(),[2]}}))}))},t}();E();var LB="Event tracked successfully",DB="Unexpected error occurred",NB="Event rejected due to exceeded retry count",RB="Event skipped due to optOut config",BB="Event rejected due to missing API key",kB="Invalid API key",qB="Client not initialized",nA=function(){function t(t){void 0===t&&(t="$default"),this.initializing=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new OB,this.name=t}return u(t,"AmplitudeCore"),t.prototype._init=function(t){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(e){switch(e.label){case 0:return this.config=t,this.timeline.reset(),[4,this.runQueuedFunctions("q")];case 1:return e.sent(),[2]}}))}))},t.prototype.runQueuedFunctions=function(t){return Sr(this,void 0,void 0,(function(){var e,i,n,r,o,s;return Ar(this,(function(a){switch(a.label){case 0:e=this[t],this[t]=[],a.label=1;case 1:a.trys.push([1,6,7,8]),i=su(e),n=i.next(),a.label=2;case 2:return n.done?[3,5]:[4,(0,n.value)()];case 3:a.sent(),a.label=4;case 4:return n=i.next(),[3,2];case 5:return[3,8];case 6:return r=a.sent(),o={error:r},[3,8];case 7:try{n&&!n.done&&(s=i.return)&&s.call(i)}finally{if(o)throw o.error}return[7];case 8:return[2]}}))}))},t.prototype.track=function(t,e,i){var n=AB(t,e,i);return this.dispatch(n)},t.prototype.identify=function(t,e){var i=I0(t,e);return this.dispatch(i)},t.prototype.groupIdentify=function(t,e,i,n){var r=CB(t,e,i,n);return this.dispatch(r)},t.prototype.setGroup=function(t,e,i){var n=PB(t,e,i);return this.dispatch(n)},t.prototype.revenue=function(t,e){var i=IB(t,e);return this.dispatch(i)},t.prototype.add=function(t){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(e){return this.config?[2,this.timeline.register(t,this.config)]:(this.q.push(this.add.bind(this,t)),[2])}))}))},t.prototype.remove=function(t){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(e){return this.config?[2,this.timeline.deregister(t)]:(this.q.push(this.remove.bind(this,t)),[2])}))}))},t.prototype.dispatchWithCallback=function(t,e){if(!this.config)return e(Mh(t,0,qB));this.process(t).then(e)},t.prototype.dispatch=function(t){return Sr(this,void 0,void 0,(function(){var e=this;return Ar(this,(function(i){return this.config?[2,this.process(t)]:[2,new Promise((function(i){e.dispatchQ.push(e.dispatchWithCallback.bind(e,t,i))}))]}))}))},t.prototype.process=function(t){return Sr(this,void 0,void 0,(function(){var e,i,n;return Ar(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.config.optOut?[2,Mh(t,0,RB)]:[4,this.timeline.push(t)];case 1:return 200===(n=r.sent()).code?this.config.loggerProvider.log(n.message):this.config.loggerProvider.error(n.message),[2,n];case 2:return e=r.sent(),i=String(e),this.config.loggerProvider.error(i),[2,n=Mh(t,0,i)];case 3:return[2]}}))}))},t.prototype.setOptOut=function(t){this.config?this.config.optOut=!!t:this.q.push(this.setOptOut.bind(this,!!t))},t.prototype.flush=function(){return this.timeline.flush()},t}();E();var $b=function(){function t(){this.productId="",this.quantity=1,this.price=0}return u(t,"Revenue"),t.prototype.setProductId=function(t){return this.productId=t,this},t.prototype.setQuantity=function(t){return t>0&&(this.quantity=t),this},t.prototype.setPrice=function(t){return this.price=t,this},t.prototype.setRevenueType=function(t){return this.revenueType=t,this},t.prototype.setRevenue=function(t){return this.revenue=t,this},t.prototype.setEventProperties=function(t){return Jb(t)&&(this.properties=t),this},t.prototype.getEventProperties=function(){var t=this.properties?cr({},this.properties):{};return t[nc.REVENUE_PRODUCT_ID]=this.productId,t[nc.REVENUE_QUANTITY]=this.quantity,t[nc.REVENUE_PRICE]=this.price,t[nc.REVENUE_TYPE]=this.revenueType,t[nc.REVENUE]=this.revenue,t},t}();E(),E();var FB=u((function(t,e){var i=Math.max(e,1);return t.reduce((function(t,e,n){var r=Math.floor(n/i);return t[r]||(t[r]=[]),t[r].push(e),t}),[])}),"chunk");E(),E();var e_="Amplitude Logger ",UB=function(){function t(){this.logLevel=Ro.None}return u(t,"Logger"),t.prototype.disable=function(){this.logLevel=Ro.None},t.prototype.enable=function(t){void 0===t&&(t=Ro.Warn),this.logLevel=t},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ro.Verbose||console.log("".concat(e_,"[Log]: ").concat(t.join(" ")))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ro.Warn||console.warn("".concat(e_,"[Warn]: ").concat(t.join(" ")))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ro.Error||console.error("".concat(e_,"[Error]: ").concat(t.join(" ")))},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.logLevel<Ro.Debug||console.log("".concat(e_,"[Debug]: ").concat(t.join(" ")))},t}(),t_=u((function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,logLevel:Ro.Warn,loggerProvider:new UB,optOut:!1,serverUrl:eA,serverZone:_h.US,useBatch:!1}}),"getDefaultConfig"),iA=function(){function t(t){var e,i,n;this._optOut=!1;var r=t_();this.apiKey=t.apiKey,this.flushIntervalMillis=t.flushIntervalMillis||r.flushIntervalMillis,this.flushMaxRetries=t.flushMaxRetries||r.flushMaxRetries,this.flushQueueSize=t.flushQueueSize||r.flushQueueSize,this.loggerProvider=t.loggerProvider||r.loggerProvider,this.logLevel=null!==(e=t.logLevel)&&void 0!==e?e:r.logLevel,this.minIdLength=t.minIdLength,this.plan=t.plan,this.ingestionMetadata=t.ingestionMetadata,this.optOut=null!==(i=t.optOut)&&void 0!==i?i:r.optOut,this.serverUrl=t.serverUrl,this.serverZone=t.serverZone||r.serverZone,this.storageProvider=t.storageProvider,this.transportProvider=t.transportProvider,this.useBatch=null!==(n=t.useBatch)&&void 0!==n?n:r.useBatch,this.loggerProvider.enable(this.logLevel);var o=rA(t.serverUrl,t.serverZone,t.useBatch);this.serverZone=o.serverZone,this.serverUrl=o.serverUrl}return u(t,"Config"),Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(t){this._optOut=t},enumerable:!1,configurable:!0}),t}(),wK=u((function(t,e){return t===_h.EU?e?SB:EB:e?TB:eA}),"getServerUrl"),rA=u((function(t,e,i){if(void 0===t&&(t=""),void 0===e&&(e=t_().serverZone),void 0===i&&(i=t_().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=[_h.US,_h.EU].includes(e)?e:t_().serverZone;return{serverZone:n,serverUrl:wK(n,i)}}),"createServerConfig"),sA=function(){function t(){this.name="amplitude",this.type=ra.DESTINATION,this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return u(t,"Destination"),t.prototype.setup=function(t){var e;return Sr(this,void 0,void 0,(function(){var i,n=this;return Ar(this,(function(r){switch(r.label){case 0:return this.config=t,this.storageKey="".concat(MB,"_").concat(this.config.apiKey.substring(0,10)),[4,null===(e=this.config.storageProvider)||void 0===e?void 0:e.get(this.storageKey)];case 1:return i=r.sent(),this.saveEvents(),i&&i.length>0&&Promise.all(i.map((function(t){return n.execute(t)}))).catch(),[2,Promise.resolve(void 0)]}}))}))},t.prototype.execute=function(t){var e=this;return new Promise((function(i){var n={event:t,attempts:0,callback:function(t){return i(t)},timeout:0};e.addToQueue(n)}))},t.prototype.addToQueue=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=e.filter((function(e){return e.attempts<t.config.flushMaxRetries?(e.attempts+=1,!0):(t.fulfillRequest([e],500,NB),!1)}));n.forEach((function(e){t.queue=t.queue.concat(e),0!==e.timeout?setTimeout((function(){e.timeout=0,t.schedule(0)}),e.timeout):t.schedule(t.config.flushIntervalMillis)})),this.saveEvents()},t.prototype.schedule=function(t){var e=this;this.scheduled||(this.scheduled=setTimeout((function(){e.flush(!0).then((function(){e.queue.length>0&&e.schedule(t)}))}),t))},t.prototype.flush=function(t){return void 0===t&&(t=!1),Sr(this,void 0,void 0,(function(){var e,i,n,r=this;return Ar(this,(function(o){switch(o.label){case 0:return e=[],i=[],this.queue.forEach((function(t){return 0===t.timeout?e.push(t):i.push(t)})),this.queue=i,this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),n=FB(e,this.config.flushQueueSize),[4,Promise.all(n.map((function(e){return r.send(e,t)})))];case 1:return o.sent(),[2]}}))}))},t.prototype.send=function(t,e){return void 0===e&&(e=!0),Sr(this,void 0,void 0,(function(){var i,n,r,o,s;return Ar(this,(function(a){switch(a.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(t,400,BB)];i={api_key:this.config.apiKey,events:t.map((function(t){var e=t.event;e.extra;return wB(e,["extra"])})),options:{min_id_length:this.config.minIdLength}},a.label=1;case 1:return a.trys.push([1,3,,4]),n=rA(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(n,i)];case 2:if(null===(r=a.sent()))return this.fulfillRequest(t,0,DB),[2];if(!e){if("body"in r){o="";try{o=JSON.stringify(r.body,null,2)}catch{}this.fulfillRequest(t,r.statusCode,"".concat(r.status,": ").concat(o))}else this.fulfillRequest(t,r.statusCode,r.status);return[2]}return this.handleReponse(r,t),[3,4];case 3:return s=a.sent(),this.fulfillRequest(t,0,String(s)),[3,4];case 4:return[2]}}))}))},t.prototype.handleReponse=function(t,e){switch(t.status){case mr.Success:this.handleSuccessResponse(t,e);break;case mr.Invalid:this.handleInvalidResponse(t,e);break;case mr.PayloadTooLarge:this.handlePayloadTooLargeResponse(t,e);break;case mr.RateLimit:this.handleRateLimitResponse(t,e);break;default:this.handleOtherReponse(e)}},t.prototype.handleSuccessResponse=function(t,e){this.fulfillRequest(e,t.statusCode,LB)},t.prototype.handleInvalidResponse=function(t,e){var i=this;if(t.body.missingField||t.body.error.startsWith(kB))this.fulfillRequest(e,t.statusCode,t.body.error);else{var n=Tl(Tl(Tl(Tl([],No(Object.values(t.body.eventsWithInvalidFields)),!1),No(Object.values(t.body.eventsWithMissingFields)),!1),No(Object.values(t.body.eventsWithInvalidIdLengths)),!1),No(t.body.silencedEvents),!1).flat(),r=new Set(n),o=e.filter((function(e,n){if(!r.has(n))return!0;i.fulfillRequest([e],t.statusCode,t.body.error)}));this.addToQueue.apply(this,Tl([],No(o),!1))}},t.prototype.handlePayloadTooLargeResponse=function(t,e){1!==e.length?(this.config.flushQueueSize/=2,this.addToQueue.apply(this,Tl([],No(e),!1))):this.fulfillRequest(e,t.statusCode,t.body.error)},t.prototype.handleRateLimitResponse=function(t,e){var i=this,n=Object.keys(t.body.exceededDailyQuotaUsers),r=Object.keys(t.body.exceededDailyQuotaDevices),o=t.body.throttledEvents,s=new Set(n),a=new Set(r),l=new Set(o),u=e.filter((function(e,n){if(!(e.event.user_id&&s.has(e.event.user_id)||e.event.device_id&&a.has(e.event.device_id)))return l.has(n)&&(e.timeout=i.throttleTimeout),!0;i.fulfillRequest([e],t.statusCode,t.body.error)}));this.addToQueue.apply(this,Tl([],No(u),!1))},t.prototype.handleOtherReponse=function(t){var e=this;this.addToQueue.apply(this,Tl([],No(t.map((function(t){return t.timeout=t.attempts*e.retryTimeout,t}))),!1))},t.prototype.fulfillRequest=function(t,e,i){this.saveEvents(),t.forEach((function(t){return t.callback(Mh(t.event,e,i))}))},t.prototype.saveEvents=function(){if(this.config.storageProvider){var t=Array.from(this.queue.map((function(t){return t.event})));this.config.storageProvider.set(this.storageKey,t)}},t}();E();var Wa=u((function(t){return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return{promise:t.apply(void 0,Tl([],No(e),!1))}}}),"returnWrapper");E();var MK=u((function(t){return void 0===t&&(t=0),((new Error).stack||"").split("\n").slice(2+t).map((function(t){return t.trim()}))}),"getStacktrace"),zr=u((function(t){return function(){var e=cr({},t.config);return{logger:e.loggerProvider,logLevel:e.logLevel}}}),"getClientLogConfig"),EK=u((function(t,e){var i,n;e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"");try{for(var r=su(e.split(".")),o=r.next();!o.done;o=r.next()){var s=o.value;if(!(s in t))return;t=t[s]}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return t}),"getValueByStringPath"),Gr=u((function(t,e){return function(){var i,n,r={};try{for(var o=su(e),s=o.next();!s.done;s=o.next()){var a=s.value;r[a]=EK(t,a)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r}}),"getClientStates"),Vr=u((function(t,e,i,n,r){return void 0===r&&(r=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=i(),l=a.logger,u=a.logLevel;if(u&&u<Ro.Debug||!u||!l)return t.apply(r,o);var h={type:"invoke public method",name:e,args:o,stacktrace:MK(1),time:{start:(new Date).toISOString()},states:{}};n&&h.states&&(h.states.before=n());var c=t.apply(r,o);return c&&c.promise?c.promise.then((function(){n&&h.states&&(h.states.after=n()),h.time&&(h.time.end=(new Date).toISOString()),l.debug(JSON.stringify(h,null,2))})):(n&&h.states&&(h.states.after=n()),h.time&&(h.time.end=(new Date).toISOString()),l.debug(JSON.stringify(h,null,2))),c}}),"debugWrapper");E();var Eh=u((function(t){return t?(t^16*Math.random()>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Eh)}),"UUID");E();var O0=function(){function t(){this.memoryStorage=new Map}return u(t,"MemoryStorage"),t.prototype.isEnabled=function(){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(t){return[2,!0]}))}))},t.prototype.get=function(t){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(e){return[2,this.memoryStorage.get(t)]}))}))},t.prototype.getRaw=function(t){return Sr(this,void 0,void 0,(function(){var e;return Ar(this,(function(i){switch(i.label){case 0:return[4,this.get(t)];case 1:return[2,(e=i.sent())?JSON.stringify(e):void 0]}}))}))},t.prototype.set=function(t,e){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(i){return this.memoryStorage.set(t,e),[2]}))}))},t.prototype.remove=function(t){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(e){return this.memoryStorage.delete(t),[2]}))}))},t.prototype.reset=function(){return Sr(this,void 0,void 0,(function(){return Ar(this,(function(t){return this.memoryStorage.clear(),[2]}))}))},t}();E();var Uf=function(){function t(){}return u(t,"BaseTransport"),t.prototype.send=function(t,e){return Promise.resolve(null)},t.prototype.buildResponse=function(t){var e,i,n,r,o,s,a,l,u,h,c,p,d,f,g,m,v,y,x,_,b,M;if("object"!=typeof t)return null;var E=t.code||0,w=this.buildStatus(E);switch(w){case mr.Success:return{status:w,statusCode:E,body:{eventsIngested:null!==(e=t.events_ingested)&&void 0!==e?e:0,payloadSizeBytes:null!==(i=t.payload_size_bytes)&&void 0!==i?i:0,serverUploadTime:null!==(n=t.server_upload_time)&&void 0!==n?n:0}};case mr.Invalid:return{status:w,statusCode:E,body:{error:null!==(r=t.error)&&void 0!==r?r:"",missingField:null!==(o=t.missing_field)&&void 0!==o?o:"",eventsWithInvalidFields:null!==(s=t.events_with_invalid_fields)&&void 0!==s?s:{},eventsWithMissingFields:null!==(a=t.events_with_missing_fields)&&void 0!==a?a:{},eventsWithInvalidIdLengths:null!==(l=t.events_with_invalid_id_lengths)&&void 0!==l?l:{},epsThreshold:null!==(u=t.eps_threshold)&&void 0!==u?u:0,exceededDailyQuotaDevices:null!==(h=t.exceeded_daily_quota_devices)&&void 0!==h?h:{},silencedDevices:null!==(c=t.silenced_devices)&&void 0!==c?c:[],silencedEvents:null!==(p=t.silenced_events)&&void 0!==p?p:[],throttledDevices:null!==(d=t.throttled_devices)&&void 0!==d?d:{},throttledEvents:null!==(f=t.throttled_events)&&void 0!==f?f:[]}};case mr.PayloadTooLarge:return{status:w,statusCode:E,body:{error:null!==(g=t.error)&&void 0!==g?g:""}};case mr.RateLimit:return{status:w,statusCode:E,body:{error:null!==(m=t.error)&&void 0!==m?m:"",epsThreshold:null!==(v=t.eps_threshold)&&void 0!==v?v:0,throttledDevices:null!==(y=t.throttled_devices)&&void 0!==y?y:{},throttledUsers:null!==(x=t.throttled_users)&&void 0!==x?x:{},exceededDailyQuotaDevices:null!==(_=t.exceeded_daily_quota_devices)&&void 0!==_?_:{},exceededDailyQuotaUsers:null!==(b=t.exceeded_daily_quota_users)&&void 0!==b?b:{},throttledEvents:null!==(M=t.throttled_events)&&void 0!==M?M:[]}};case mr.Timeout:default:return{status:w,statusCode:E}}},t.prototype.buildStatus=function(t){return t>=200&&t<300?mr.Success:429===t?mr.RateLimit:413===t?mr.PayloadTooLarge:408===t?mr.Timeout:t>=400&&t<500?mr.Invalid:t>=500?mr.Failed:mr.Unknown},t}();E(),E(),E();var oA=u((function(t,e){return(oA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)}),"extendStatics");function zB(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}oA(t,e),u(i,"__"),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}u(zB,"__extends");var eo=u((function(){return eo=Object.assign||u((function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}),"__assign"),eo.apply(this,arguments)}),"__assign");function aA(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}function fs(t,e,i,n){function r(t){return t instanceof i?t:new i((function(e){e(t)}))}return u(r,"adopt"),new(i||(i=Promise))((function(i,o){function s(t){try{l(n.next(t))}catch(t){o(t)}}function a(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):r(t.value).then(s,a)}u(s,"fulfilled"),u(a,"rejected"),u(l,"step"),l((n=n.apply(t,e||[])).next())}))}function ps(t,e){var i,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(r=2&a[0]?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],n=0}finally{i=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function GB(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}u(aA,"__rest"),u(fs,"__awaiter"),u(ps,"__generator"),u(GB,"__read"),E(),E();var Bo=u((function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:void 0}),"getGlobalScope"),Pd=u((function(){var t,e=Bo();return null!==(t=null==e?void 0:e.location)&&void 0!==t&&t.search?e.location.search.substring(1).split("&").filter(Boolean).reduce((function(t,e){var i=e.split("=",2),n=VB(i[0]),r=VB(i[1]);return r&&(t[n]=r),t}),{}):{}}),"getQueryParams"),VB=u((function(t){void 0===t&&(t="");try{return decodeURIComponent(t)}catch{return""}}),"tryDecodeURIComponent");E();var HB="utm_campaign",jB="utm_content",WB="utm_id",YB="utm_medium",XB="utm_source",ZB="utm_term",lA="dclid",uA="fbclid",cA="gbraid",hA="gclid",fA="ko_click_id",pA="msclkid",dA="ttclid",mA="twclid",gA="wbraid",QB="EMPTY",n_={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,msclkid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},KB="MKTG",JB=function(){function t(){}return u(t,"CampaignParser"),t.prototype.parse=function(){return fs(this,void 0,void 0,(function(){return ps(this,(function(t){return[2,eo(eo(eo(eo({},n_),this.getUtmParam()),this.getReferrer()),this.getClickIds())]}))}))},t.prototype.getUtmParam=function(){var t=Pd();return{utm_campaign:t[HB],utm_content:t[jB],utm_id:t[WB],utm_medium:t[YB],utm_source:t[XB],utm_term:t[ZB]}},t.prototype.getReferrer=function(){var t,e,i={referrer:void 0,referring_domain:void 0};try{i.referrer=document.referrer||void 0,i.referring_domain=null!==(e=null===(t=i.referrer)||void 0===t?void 0:t.split("/")[2])&&void 0!==e?e:void 0}catch{}return i},t.prototype.getClickIds=function(){var t,e=Pd();return(t={})[lA]=e[lA],t[uA]=e[uA],t[cA]=e[cA],t[hA]=e[hA],t[fA]=e[fA],t[pA]=e[pA],t[dA]=e[dA],t[mA]=e[mA],t[gA]=e[gA],t},t}();E(),E();var zf=u((function(t,e,i){return void 0===e&&(e=""),void 0===i&&(i=10),[P0,e,t.substring(0,i)].filter(Boolean).join("_")}),"getCookieName"),vA=u((function(t){return"".concat(P0.toLowerCase(),"_").concat(t.substring(0,6))}),"getOldCookieName"),yA=function(){function t(t,e){var i,n;this.storage=e.storage,this.storageKey=zf(t,KB),this.parser=new JB,this.track=e.track,this.onNewCampaign=e.onNewCampaign,this.disabled=!!e.disabled,this.trackNewCampaigns=!!e.trackNewCampaigns,this.trackPageViews=!!e.trackPageViews,this.excludeReferrers=null!==(i=e.excludeReferrers)&&void 0!==i?i:[],typeof location<"u"&&this.excludeReferrers.unshift(location.hostname),this.initialEmptyValue=null!==(n=e.initialEmptyValue)&&void 0!==n?n:QB}return u(t,"CampaignTracker"),t.prototype.isNewCampaign=function(t,e,i){void 0===i&&(i=!1);t.referrer;var n=t.referring_domain,r=aA(t,["referrer","referring_domain"]),o=e||{},s=(o.referrer,o.referring_domain),a=aA(o,["referrer","referring_domain"]);if(t.referring_domain&&this.excludeReferrers.includes(t.referring_domain))return!1;var l=JSON.stringify(r)!==JSON.stringify(a),u=i?$B(n||"")!==$B(s||""):n!==s;return!e||l||u},t.prototype.saveCampaignToStorage=function(t){return fs(this,void 0,void 0,(function(){return ps(this,(function(e){switch(e.label){case 0:return[4,this.storage.set(this.storageKey,t)];case 1:return e.sent(),[2]}}))}))},t.prototype.getCampaignFromStorage=function(){return fs(this,void 0,void 0,(function(){return ps(this,(function(t){switch(t.label){case 0:return[4,this.storage.get(this.storageKey)];case 1:return[2,t.sent()]}}))}))},t.prototype.createCampaignEvent=function(t){var e=this,i=eo(eo({},n_),t),n=Object.entries(i).reduce((function(t,i){var n=GB(i,2),r=n[0],o=n[1];return t.setOnce("initial_".concat(r),o||e.initialEmptyValue),o?t.set(r,o):t.unset(r)}),new Sl),r={event_type:"Page View",event_properties:{page_title:typeof document<"u"&&document.title||"",page_location:typeof location<"u"&&location.href||"",page_path:typeof location<"u"&&location.pathname||""}};return eo(eo({},I0(n)),this.trackPageViews&&r)},t.prototype.send=function(t){return fs(this,void 0,void 0,(function(){var e,i;return ps(this,(function(n){switch(n.label){case 0:return this.disabled?[2]:[4,this.parser.parse()];case 1:return e=n.sent(),[4,this.getCampaignFromStorage()];case 2:if(i=n.sent(),!t){if(!this.trackNewCampaigns||!this.isNewCampaign(e,i))return[2];this.onNewCampaign(e)}return[4,this.track(this.createCampaignEvent(e))];case 3:return n.sent(),[4,this.saveCampaignToStorage(e)];case 4:return n.sent(),[2]}}))}))},t}(),$B=u((function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")}),"domainWithoutSubdomain");E();var Gf=function(){function t(t){this.options=eo({},t)}return u(t,"CookieStorage"),t.prototype.isEnabled=function(){return fs(this,void 0,void 0,(function(){var e,i,n;return ps(this,(function(r){switch(r.label){case 0:if(!Bo())return[2,!1];e=String(Date.now()),i=new t(this.options),n="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,i.set(n,e)];case 2:return r.sent(),[4,i.get(n)];case 3:return[2,r.sent()===e];case 4:return r.sent(),[2,!1];case 5:return[4,i.remove(n)];case 6:return r.sent(),[7];case 7:return[2]}}))}))},t.prototype.get=function(t){return fs(this,void 0,void 0,(function(){var e;return ps(this,(function(i){switch(i.label){case 0:return[4,this.getRaw(t)];case 1:if(!(e=i.sent()))return[2,void 0];try{try{e=decodeURIComponent(atob(e))}catch{}return[2,JSON.parse(e)]}catch{return[2,void 0]}return[2]}}))}))},t.prototype.getRaw=function(t){var e;return fs(this,void 0,void 0,(function(){var i,n,r;return ps(this,(function(o){return i=Bo(),n=null!==(e=null==i?void 0:i.document.cookie.split("; "))&&void 0!==e?e:[],(r=n.find((function(e){return 0===e.indexOf(t+"=")})))?[2,r.substring(t.length+1)]:[2,void 0]}))}))},t.prototype.set=function(t,e){var i;return fs(this,void 0,void 0,(function(){var n,r,o,s,a,l;return ps(this,(function(u){try{n=null!==(i=this.options.expirationDays)&&void 0!==i?i:0,o=void 0,(r=null!==e?n:-1)&&((s=new Date).setTime(s.getTime()+24*r*60*60*1e3),o=s),a="".concat(t,"=").concat(btoa(encodeURIComponent(JSON.stringify(e)))),o&&(a+="; expires=".concat(o.toUTCString())),a+="; path=/",this.options.domain&&(a+="; domain=".concat(this.options.domain)),this.options.secure&&(a+="; Secure"),this.options.sameSite&&(a+="; SameSite=".concat(this.options.sameSite)),(l=Bo())&&(l.document.cookie=a)}catch{}return[2]}))}))},t.prototype.remove=function(t){return fs(this,void 0,void 0,(function(){return ps(this,(function(e){switch(e.label){case 0:return[4,this.set(t,null)];case 1:return e.sent(),[2]}}))}))},t.prototype.reset=function(){return fs(this,void 0,void 0,(function(){return ps(this,(function(t){return[2]}))}))},t}();E();var i_=function(){function t(t,e){this.storage=t,this.storageKey=zf(e),this.cache={optOut:!1}}return u(t,"SessionManager"),t.prototype.load=function(){var t;return fs(this,void 0,void 0,(function(){var e;return ps(this,(function(i){switch(i.label){case 0:return e=this,[4,this.storage.get(this.storageKey)];case 1:return e.cache=null!==(t=i.sent())&&void 0!==t?t:{optOut:!1},[2,this]}}))}))},t.prototype.setSession=function(t){this.cache=eo(eo({},this.cache),t),this.storage.set(this.storageKey,this.cache)},t.prototype.getSessionId=function(){return this.cache.sessionId},t.prototype.setSessionId=function(t){this.setSession({sessionId:t})},t.prototype.getDeviceId=function(){return this.cache.deviceId},t.prototype.setDeviceId=function(t){this.setSession({deviceId:t})},t.prototype.getUserId=function(){return this.cache.userId},t.prototype.setUserId=function(t){this.setSession({userId:t})},t.prototype.getLastEventTime=function(){return this.cache.lastEventTime},t.prototype.setLastEventTime=function(t){this.setSession({lastEventTime:t})},t.prototype.getOptOut=function(){return this.cache.optOut},t.prototype.setOptOut=function(t){this.setSession({optOut:t})},t.prototype.getLastEventId=function(){return this.cache.lastEventId},t.prototype.setLastEventId=function(t){this.setSession({lastEventId:t})},t}();E();var xA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zB(e,t),u(e,"FetchTransport"),e.prototype.send=function(t,e){return fs(this,void 0,void 0,(function(){var i,n;return ps(this,(function(r){switch(r.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(e),method:"POST"},[4,fetch(t,i)];case 1:return[4,r.sent().json()];case 2:return n=r.sent(),[2,this.buildResponse(n)]}}))}))},e}(Uf);E(),E();var ek=Bt(bA()),TK=function(){function t(){this.ua=new ek.UAParser(typeof navigator<"u"?navigator.userAgent:null).getResult()}return u(t,"ApplicationContextProviderImpl"),t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:CK(),platform:"Web",os:SK(this.ua),deviceModel:AK(this.ua)}},t}(),SK=u((function(t){var e,i;return[null===(e=t.browser)||void 0===e?void 0:e.name,null===(i=t.browser)||void 0===i?void 0:i.major].filter((function(t){return null!=t})).join(" ")}),"getOs"),AK=u((function(t){var e;return null===(e=t.os)||void 0===e?void 0:e.name}),"getDeviceModel"),CK=u((function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""}),"getLanguage"),PK=function(){function t(){this.queue=[]}return u(t,"EventBridgeImpl"),t.prototype.logEvent=function(t){this.receiver?this.receiver(t):this.queue.length<512&&this.queue.push(t)},t.prototype.setEventReceiver=function(t){this.receiver=t,this.queue.length>0&&(this.queue.forEach((function(e){t(e)})),this.queue=[])},t}(),Th=u((function(){return Th=Object.assign||u((function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}),"__assign"),Th.apply(this,arguments)}),"__assign"),s_=u((function(t,e){var i=typeof t;if(i!==typeof e)return!1;for(var n=0,r=["string","number","boolean","undefined"];n<r.length;n++){if(r[n]===i)return t===e}if(null==t&&null==e)return!0;if(null==t||null==e||t.length!==e.length)return!1;var o=Array.isArray(t),s=Array.isArray(e);if(o!==s)return!1;if(!o||!s){var a=Object.keys(t).sort(),l=Object.keys(e).sort();if(!s_(a,l))return!1;var u=!0;return Object.keys(t).forEach((function(i){s_(t[i],e[i])||(u=!1)})),u}for(var h=0;h<t.length;h++)if(!s_(t[h],e[h]))return!1;return!0}),"isEqual"),IK="$set",OK="$unset",LK="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),i=e.length,n=new Array(i);i--;)n[i]=[e[i],t[e[i]]];return n});var DK=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return u(t,"IdentityStoreImpl"),t.prototype.editIdentity=function(){var t=this,e=Th({},this.identity.userProperties),i=Th(Th({},this.identity),{userProperties:e});return{setUserId:function(t){return i.userId=t,this},setDeviceId:function(t){return i.deviceId=t,this},setUserProperties:function(t){return i.userProperties=t,this},updateUserProperties:function(t){for(var e=i.userProperties||{},n=0,r=Object.entries(t);n<r.length;n++){var o=r[n],s=o[0],a=o[1];switch(s){case IK:for(var l=0,u=Object.entries(a);l<u.length;l++){var h=u[l],c=h[0],p=h[1];e[c]=p}break;case OK:for(var d=0,f=Object.keys(a);d<f.length;d++){delete e[c=f[d]]}break;case LK:e={}}}return i.userProperties=e,this},commit:function(){return t.setIdentity(i),this}}},t.prototype.getIdentity=function(){return Th({},this.identity)},t.prototype.setIdentity=function(t){var e=Th({},this.identity);this.identity=Th({},t),s_(e,this.identity)||this.listeners.forEach((function(e){e(t)}))},t.prototype.addIdentityListener=function(t){this.listeners.add(t)},t.prototype.removeIdentityListener=function(t){this.listeners.delete(t)},t}(),D0=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,tk=function(){function t(){this.identityStore=new DK,this.eventBridge=new PK,this.applicationContextProvider=new TK}return u(t,"AnalyticsConnector"),t.getInstance=function(e){return D0.analyticsConnectorInstances||(D0.analyticsConnectorInstances={}),D0.analyticsConnectorInstances[e]||(D0.analyticsConnectorInstances[e]=new t),D0.analyticsConnectorInstances[e]},t}(),N0=u((function(){return tk.getInstance("$default_instance")}),"getAnalyticsConnector");E();var _A=function(){function t(){this.name="identity",this.type=ra.BEFORE,this.identityStore=N0().identityStore}return u(t,"IdentityEventSender"),t.prototype.execute=function(t){return fs(this,void 0,void 0,(function(){var e;return ps(this,(function(i){return(e=t.user_properties)&&this.identityStore.editIdentity().updateUserProperties(e).commit(),[2,t]}))}))},t.prototype.setup=function(t){return Promise.resolve(void 0)},t}();E();var wA=u((function(){var t,e,i,n;if(typeof navigator>"u")return"";var r=navigator.userLanguage;return null!==(n=null!==(i=null!==(e=null===(t=navigator.languages)||void 0===t?void 0:t[0])&&void 0!==e?e:navigator.language)&&void 0!==i?i:r)&&void 0!==n?n:""}),"getLanguage");E();var o_=u((function(t,e){for(var i=0;i<e.length;i++){var n=e[i],r=n.name,o=n.args,s=n.resolve,a=t&&t[r];if("function"==typeof a){var l=a.apply(t,o);"function"==typeof s&&s(null==l?void 0:l.promise)}}return t}),"convertProxyObjectToRealObject"),a_=u((function(t){return t&&void 0!==t._q}),"isInstanceProxy");E();var ik=Bt(bA());E();var nk="1.6.8",NK="Web",RK="$remote",rk=function(){function t(){var t;this.name="context",this.type=ra.BEFORE,this.eventId=0,this.library="amplitude-ts/".concat(nk),typeof navigator<"u"&&(t=navigator.userAgent),this.uaResult=new ik.default(t).getResult()}return u(t,"Context"),t.prototype.setup=function(t){return this.config=t,Promise.resolve(void 0)},t.prototype.execute=function(t){return lr(this,void 0,void 0,(function(){var e,i,n,r,o;return ur(this,(function(s){return this.isSessionValid()||(this.config.sessionId=Date.now()),this.config.lastEventTime=Date.now(),e=(new Date).getTime(),i=this.uaResult.browser.name,n=this.uaResult.browser.version,r=this.uaResult.device.model||this.uaResult.os.name,o=this.uaResult.device.vendor,[2,_i(_i(_i(_i(_i(_i(_i(_i(_i(_i(_i(_i({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:e},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:NK}),this.config.trackingOptions.osName&&{os_name:i}),this.config.trackingOptions.osVersion&&{os_version:n}),this.config.trackingOptions.deviceManufacturer&&{device_manufacturer:o}),this.config.trackingOptions.deviceModel&&{device_model:r}),this.config.trackingOptions.language&&{language:wA()}),this.config.trackingOptions.ipAddress&&{ip:RK}),{insert_id:Eh(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),t),{event_id:this.eventId++,library:this.library})]}))}))},t.prototype.isSessionValid=function(){var t=this.config.lastEventTime||Date.now();return Date.now()-t<this.config.sessionTimeout},t}();E(),E();var R0=function(){function t(){}return u(t,"LocalStorage"),t.prototype.isEnabled=function(){return lr(this,void 0,void 0,(function(){var e,i,n;return ur(this,(function(r){switch(r.label){case 0:if(!Bo())return[2,!1];e=String(Date.now()),i=new t,n="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,i.set(n,e)];case 2:return r.sent(),[4,i.get(n)];case 3:return[2,r.sent()===e];case 4:return r.sent(),[2,!1];case 5:return[4,i.remove(n)];case 6:return r.sent(),[7];case 7:return[2]}}))}))},t.prototype.get=function(t){return lr(this,void 0,void 0,(function(){var e;return ur(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(t)];case 1:return(e=i.sent())?[2,JSON.parse(e)]:[2,void 0];case 2:return i.sent(),[2,void 0];case 3:return[2]}}))}))},t.prototype.getRaw=function(t){var e;return lr(this,void 0,void 0,(function(){return ur(this,(function(i){return[2,(null===(e=Bo())||void 0===e?void 0:e.localStorage.getItem(t))||void 0]}))}))},t.prototype.set=function(t,e){var i;return lr(this,void 0,void 0,(function(){return ur(this,(function(n){try{null===(i=Bo())||void 0===i||i.localStorage.setItem(t,JSON.stringify(e))}catch{}return[2]}))}))},t.prototype.remove=function(t){var e;return lr(this,void 0,void 0,(function(){return ur(this,(function(i){try{null===(e=Bo())||void 0===e||e.localStorage.removeItem(t)}catch{}return[2]}))}))},t.prototype.reset=function(){var t;return lr(this,void 0,void 0,(function(){return ur(this,(function(e){try{null===(t=Bo())||void 0===t||t.localStorage.clear()}catch{}return[2]}))}))},t}();E();var sk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={done:4},e}return bh(e,t),u(e,"XHRTransport"),e.prototype.send=function(t,e){return lr(this,void 0,void 0,(function(){var i=this;return ur(this,(function(n){return[2,new Promise((function(n,r){typeof XMLHttpRequest>"u"&&r(new Error("XHRTransport is not supported."));var o=new XMLHttpRequest;o.open("POST",t,!0),o.onreadystatechange=function(){if(o.readyState===i.state.done)try{var t=o.responseText,e=JSON.parse(t),s=i.buildResponse(e);n(s)}catch(t){r(t)}},o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Accept","*/*"),o.send(JSON.stringify(e))}))]}))}))},e}(Uf);E();var ok=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bh(e,t),u(e,"SendBeaconTransport"),e.prototype.send=function(t,e){return lr(this,void 0,void 0,(function(){var i=this;return ur(this,(function(n){return[2,new Promise((function(n,r){var o=Bo();if(null==o||!o.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(e);return n(o.navigator.sendBeacon(t,JSON.stringify(e))?i.buildResponse({code:200,events_ingested:e.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(t){r(t)}}))]}))}))},e}(Uf),l_=u((function(){var t=new O0;return{cookieExpiration:365,cookieSameSite:"Lax",cookieSecure:!1,cookieStorage:t,disableCookies:!1,domain:"",sessionManager:new i_(t,""),sessionTimeout:18e5,storageProvider:new O0,trackingOptions:{deviceManufacturer:!0,deviceModel:!0,ipAddress:!0,language:!0,osName:!0,osVersion:!0,platform:!0},transportProvider:new xA}}),"getDefaultConfig"),ak=function(t){function e(e,i,n){var r,o,s,a,l,u,h,c,p,d,f,g,m=this,v=l_();return(m=t.call(this,_i(_i({flushIntervalMillis:1e3,flushMaxRetries:5,flushQueueSize:30},n),{apiKey:e,storageProvider:null!==(r=null==n?void 0:n.storageProvider)&&void 0!==r?r:v.storageProvider,transportProvider:null!==(o=null==n?void 0:n.transportProvider)&&void 0!==o?o:v.transportProvider}))||this).cookieStorage=null!==(s=null==n?void 0:n.cookieStorage)&&void 0!==s?s:v.cookieStorage,m.sessionManager=null!==(a=null==n?void 0:n.sessionManager)&&void 0!==a?a:v.sessionManager,m.sessionTimeout=null!==(l=null==n?void 0:n.sessionTimeout)&&void 0!==l?l:v.sessionTimeout,m.appVersion=null==n?void 0:n.appVersion,m.attribution=null==n?void 0:n.attribution,m.cookieExpiration=null!==(u=null==n?void 0:n.cookieExpiration)&&void 0!==u?u:v.cookieExpiration,m.cookieSameSite=null!==(h=null==n?void 0:n.cookieSameSite)&&void 0!==h?h:v.cookieSameSite,m.cookieSecure=null!==(c=null==n?void 0:n.cookieSecure)&&void 0!==c?c:v.cookieSecure,m.deviceId=null==n?void 0:n.deviceId,m.disableCookies=null!==(p=null==n?void 0:n.disableCookies)&&void 0!==p?p:v.disableCookies,m.domain=null!==(d=null==n?void 0:n.domain)&&void 0!==d?d:v.domain,m.lastEventTime=null!==(f=m.lastEventTime)&&void 0!==f?f:null==n?void 0:n.lastEventTime,m.optOut=!(null==n||!n.optOut),m.partnerId=null==n?void 0:n.partnerId,m.sessionId=null==n?void 0:n.sessionId,m.trackingOptions=null!==(g=null==n?void 0:n.trackingOptions)&&void 0!==g?g:v.trackingOptions,m.userId=i,m}return bh(e,t),u(e,"BrowserConfig"),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this.sessionManager.getDeviceId()},set:function(t){this.sessionManager.setDeviceId(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this.sessionManager.getUserId()},set:function(t){this.sessionManager.setUserId(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.sessionManager.getSessionId()},set:function(t){this.sessionManager.setSessionId(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this.sessionManager.getOptOut()},set:function(t){var e;null===(e=this.sessionManager)||void 0===e||e.setOptOut(!!t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this.sessionManager.getLastEventTime()},set:function(t){this.sessionManager.setLastEventTime(t)},enumerable:!1,configurable:!0}),e}(iA),lk=u((function(t,e,i){return lr(void 0,void 0,void 0,(function(){var n,r,o,s,a,l,u,h,c,p,d,f,g,m,v,y,x;return ur(this,(function(_){switch(_.label){case 0:return n=l_(),null!==(g=null==i?void 0:i.domain)&&void 0!==g?(o=g,[3,3]):[3,1];case 1:return[4,FK()];case 2:o=_.sent(),_.label=3;case 3:return r=o,[4,BK(_i(_i({},i),{domain:r}))];case 4:return s=_.sent(),a=zf(t),[4,s.get(a)];case 5:return l=_.sent(),u=Pd(),[4,new i_(s,t).load()];case 6:return h=_.sent(),c=ak.bind,p=[void 0,t,null!=e?e:null==l?void 0:l.userId],d=[_i({},i)],f={cookieStorage:s,sessionManager:h,deviceId:qK(null==l?void 0:l.deviceId,null==i?void 0:i.deviceId,u.deviceId),domain:r,optOut:null!==(m=null==i?void 0:i.optOut)&&void 0!==m?m:!(null==l||!l.optOut)},[4,s.get(a)];case 7:return f.sessionId=null!==(y=null===(v=_.sent())||void 0===v?void 0:v.sessionId)&&void 0!==y?y:null==i?void 0:i.sessionId,[4,kK(i)];case 8:return[2,new(c.apply(ak,p.concat([_i.apply(void 0,d.concat([(f.storageProvider=_.sent(),f.trackingOptions=_i(_i({},n.trackingOptions),null==i?void 0:i.trackingOptions),f.transportProvider=null!==(x=null==i?void 0:i.transportProvider)&&void 0!==x?x:EA(null==i?void 0:i.transport),f)]))])))]}}))}))}),"useBrowserConfig"),BK=u((function(t,e){return void 0===e&&(e=l_()),lr(void 0,void 0,void 0,(function(){var i,n,r;return ur(this,(function(o){switch(o.label){case 0:return i=_i(_i({},e),t),n=null==t?void 0:t.cookieStorage,(r=!n)?[3,2]:[4,n.isEnabled()];case 1:r=!o.sent(),o.label=2;case 2:return r?[2,MA(i)]:[2,n]}}))}))}),"createCookieStorage"),MA=u((function(t){return lr(void 0,void 0,void 0,(function(){var e,i;return ur(this,(function(n){switch(n.label){case 0:return e=new Gf({domain:t.domain,expirationDays:t.cookieExpiration,sameSite:t.cookieSameSite,secure:t.cookieSecure}),(i=t.disableCookies)?[3,2]:[4,e.isEnabled()];case 1:i=!n.sent(),n.label=2;case 2:return i?[4,(e=new R0).isEnabled()]:[3,4];case 3:n.sent()||(e=new O0),n.label=4;case 4:return[2,e]}}))}))}),"createFlexibleStorage"),kK=u((function(t){return lr(void 0,void 0,void 0,(function(){var e,i,n,r,o,s,a;return ur(this,(function(l){switch(l.label){case 0:if(t&&Object.prototype.hasOwnProperty.call(t,"storageProvider")&&!t.storageProvider)return[3,9];l.label=1;case 1:l.trys.push([1,7,8,9]),e=bB([null==t?void 0:t.storageProvider,new R0]),i=e.next(),l.label=2;case 2:return i.done?[3,6]:(n=i.value,(r=n)?[4,n.isEnabled()]:[3,4]);case 3:r=l.sent(),l.label=4;case 4:if(r)return[2,n];l.label=5;case 5:return i=e.next(),[3,2];case 6:return[3,9];case 7:return o=l.sent(),s={error:o},[3,9];case 8:try{i&&!i.done&&(a=e.return)&&a.call(e)}finally{if(s)throw s.error}return[7];case 9:return[2,void 0]}}))}))}),"createEventsStorage"),qK=u((function(t,e,i){return e||i||t||Eh()}),"createDeviceId"),EA=u((function(t){return t===Cd.XHR?new sk:t===Cd.SendBeacon?new ok:l_().transportProvider}),"createTransport"),FK=u((function(t){return lr(void 0,void 0,void 0,(function(){var e,i,n,r,o,s,a;return ur(this,(function(l){switch(l.label){case 0:return[4,(new Gf).isEnabled()];case 1:if(!l.sent()||!t&&typeof location>"u")return[2,""];for(e=null!=t?t:location.hostname,i=e.split("."),n=[],r="AMP_TLDTEST",o=i.length-2;o>=0;--o)n.push(i.slice(o).join("."));o=0,l.label=2;case 2:return o<n.length?(s=n[o],[4,(a=new Gf({domain:"."+s})).set(r,1)]):[3,7];case 3:return l.sent(),[4,a.get(r)];case 4:return l.sent()?[4,a.remove(r)]:[3,6];case 5:return l.sent(),[2,"."+s];case 6:return o++,[3,2];case 7:return[2,""]}}))}))}),"getTopLevelDomain");E();var ck=u((function(t,e){return lr(void 0,void 0,void 0,(function(){var i,n,r,o,s,a,l,u,h;return ur(this,(function(c){switch(c.label){case 0:return[4,(i=new Gf).isEnabled()];case 1:return(!c.sent()||null!=e&&e.disableCookies)&&(i=new R0),[4,i.isEnabled()];case 2:return c.sent()?(n=vA(t),[4,i.getRaw(n)]):[2,{optOut:!1}];case 3:return(r=c.sent())?[4,i.remove(n)]:[2,{optOut:!1}];case 4:return c.sent(),o=_B(r.split("."),5),s=o[0],a=o[1],l=o[2],u=o[3],h=o[4],[2,{deviceId:s,userId:UK(a),sessionId:uk(u),lastEventTime:uk(h),optOut:!!l}]}}))}))}),"parseOldCookies"),uk=u((function(t){var e=parseInt(t,32);if(!isNaN(e))return e}),"parseTime"),UK=u((function(t){if(atob&&escape&&t)try{return decodeURIComponent(escape(atob(t)))}catch{return}}),"decode"),zK=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bh(e,t),u(e,"AmplitudeBrowser"),e.prototype.init=function(e,i,n){var r,o,s;return void 0===e&&(e=""),lr(this,void 0,void 0,(function(){var a,l,u,h,c=this;return ur(this,(function(p){switch(p.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,ck(e,n)]);case 1:return a=p.sent(),[4,lk(e,i||a.userId,_i(_i({},n),{deviceId:null!==(r=a.deviceId)&&void 0!==r?r:null==n?void 0:n.deviceId,sessionId:null!==(o=a.sessionId)&&void 0!==o?o:null==n?void 0:n.sessionId,optOut:null!==(s=null==n?void 0:n.optOut)&&void 0!==s?s:a.optOut,lastEventTime:a.lastEventTime}))];case 2:return l=p.sent(),[4,t.prototype._init.call(this,l)];case 3:return p.sent(),u=!this.config.lastEventTime,(!this.config.sessionId||this.config.lastEventTime&&Date.now()-this.config.lastEventTime>this.config.sessionTimeout)&&(this.setSessionId(Date.now()),u=!0),(h=N0()).eventBridge.setEventReceiver((function(t){c.track(t.eventType,t.eventProperties)})),h.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),[4,this.add(new rk)];case 4:return p.sent(),[4,this.add(new _A)];case 5:return p.sent(),[4,this.add(new sA)];case 6:return p.sent(),this.initializing=!1,[4,this.runAttributionStrategy(l.attribution,u)];case 7:return p.sent(),[4,this.runQueuedFunctions("dispatchQ")];case 8:return p.sent(),[2]}}))}))},e.prototype.runAttributionStrategy=function(t,e){return void 0===e&&(e=!1),lr(this,void 0,void 0,(function(){var i,n,r;return ur(this,(function(o){switch(o.label){case 0:return i=this.track.bind(this),n=this.setSessionId.bind(this,Date.now()),[4,MA(this.config)];case 1:return r=o.sent(),[4,new yA(this.config.apiKey,_i(_i({},t),{storage:r,track:i,onNewCampaign:n})).send(e)];case 2:return o.sent(),[2]}}))}))},e.prototype.getUserId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.userId},e.prototype.setUserId=function(t){this.config?this.config.userId=t:this.q.push(this.setUserId.bind(this,t))},e.prototype.getDeviceId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.deviceId},e.prototype.setDeviceId=function(t){this.config?this.config.deviceId=t:this.q.push(this.setDeviceId.bind(this,t))},e.prototype.reset=function(){this.setUserId(void 0),this.setDeviceId(Eh())},e.prototype.getSessionId=function(){var t;return null===(t=this.config)||void 0===t?void 0:t.sessionId},e.prototype.setSessionId=function(t){this.config?(this.config.sessionId=t,this.config.lastEventTime=void 0):this.q.push(this.setSessionId.bind(this,t))},e.prototype.setTransport=function(t){this.config?this.config.transportProvider=EA(t):this.q.push(this.setTransport.bind(this,t))},e.prototype.identify=function(e,i){if(a_(e)){var n=e._q;e._q=[],e=o_(new Sl,n)}return null!=i&&i.user_id&&this.setUserId(i.user_id),null!=i&&i.device_id&&this.setDeviceId(i.device_id),t.prototype.identify.call(this,e,i)},e.prototype.groupIdentify=function(e,i,n,r){if(a_(n)){var o=n._q;n._q=[],n=o_(new Sl,o)}return t.prototype.groupIdentify.call(this,e,i,n,r)},e.prototype.revenue=function(e,i){if(a_(e)){var n=e._q;e._q=[],e=o_(new $b,n)}return t.prototype.revenue.call(this,e,i)},e}(nA),u_=u((function(){var t=new zK;return{init:Vr(Wa(t.init.bind(t)),"init",zr(t),Gr(t,["config"])),add:Vr(Wa(t.add.bind(t)),"add",zr(t),Gr(t,["config.apiKey","timeline.plugins"])),remove:Vr(Wa(t.remove.bind(t)),"remove",zr(t),Gr(t,["config.apiKey","timeline.plugins"])),track:Vr(Wa(t.track.bind(t)),"track",zr(t),Gr(t,["config.apiKey","timeline.queue.length"])),logEvent:Vr(Wa(t.logEvent.bind(t)),"logEvent",zr(t),Gr(t,["config.apiKey","timeline.queue.length"])),identify:Vr(Wa(t.identify.bind(t)),"identify",zr(t),Gr(t,["config.apiKey","timeline.queue.length"])),groupIdentify:Vr(Wa(t.groupIdentify.bind(t)),"groupIdentify",zr(t),Gr(t,["config.apiKey","timeline.queue.length"])),setGroup:Vr(Wa(t.setGroup.bind(t)),"setGroup",zr(t),Gr(t,["config.apiKey","timeline.queue.length"])),revenue:Vr(Wa(t.revenue.bind(t)),"revenue",zr(t),Gr(t,["config.apiKey","timeline.queue.length"])),flush:Vr(Wa(t.flush.bind(t)),"flush",zr(t),Gr(t,["config.apiKey","timeline.queue.length"])),getUserId:Vr(t.getUserId.bind(t),"getUserId",zr(t),Gr(t,["config","config.userId"])),setUserId:Vr(t.setUserId.bind(t),"setUserId",zr(t),Gr(t,["config","config.userId"])),getDeviceId:Vr(t.getDeviceId.bind(t),"getDeviceId",zr(t),Gr(t,["config","config.deviceId"])),setDeviceId:Vr(t.setDeviceId.bind(t),"setDeviceId",zr(t),Gr(t,["config","config.deviceId"])),reset:Vr(t.reset.bind(t),"reset",zr(t),Gr(t,["config","config.userId","config.deviceId"])),getSessionId:Vr(t.getSessionId.bind(t),"getSessionId",zr(t),Gr(t,["config"])),setSessionId:Vr(t.setSessionId.bind(t),"setSessionId",zr(t),Gr(t,["config"])),setOptOut:Vr(t.setOptOut.bind(t),"setOptOut",zr(t),Gr(t,["config"])),setTransport:Vr(t.setTransport.bind(t),"setTransport",zr(t),Gr(t,["config"]))}}),"createInstance"),ts=u_(),RAe=ts.add,BAe=ts.flush,kAe=ts.getDeviceId,qAe=ts.getSessionId,FAe=ts.getUserId,UAe=ts.groupIdentify,zAe=ts.identify,GAe=ts.init,VAe=ts.logEvent,HAe=ts.remove,jAe=ts.reset,WAe=ts.revenue,YAe=ts.setDeviceId,XAe=ts.setGroup,ZAe=ts.setOptOut,QAe=ts.setSessionId,KAe=ts.setTransport,JAe=ts.setUserId,$Ae=ts.track,BA={production:"40ead723d18886045e302513245edb27",development:""},Id={plan:{version:"22",branch:"main",source:"websdk",versionId:"197467d1-8926-452d-a088-b3817cbac89f"},ingestionMetadata:{sourceName:"browser-typescript-ampli",sourceVersion:"2.0.0"}},kA=class{constructor(t){this.event_properties=t,A(this,"event_type","Analytics:categorySelected-call"),this.event_properties=t}};u(kA,"AnalyticsCategorySelectedCall");var B0=kA,qA=class{constructor(t){this.event_properties=t,A(this,"event_type","Analytics:locationSelected-call"),this.event_properties=t}};u(qA,"AnalyticsLocationSelectedCall");var k0=qA,FA=class{constructor(t){this.event_properties=t,A(this,"event_type","BlueDot:disable-call"),this.event_properties=t}};u(FA,"BlueDotDisableCall");var q0=FA,UA=class{constructor(t){this.event_properties=t,A(this,"event_type","BlueDot:enable-call"),this.event_properties=t}};u(UA,"BlueDotEnableCall");var F0=UA,zA=class{constructor(t){this.event_properties=t,A(this,"event_type","BlueDot:off-call"),this.event_properties=t}};u(zA,"BlueDotOffCall");var U0=zA,GA=class{constructor(t){this.event_properties=t,A(this,"event_type","BlueDot:on-call"),this.event_properties=t}};u(GA,"BlueDotOnCall");var z0=GA,VA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:animate-call"),this.event_properties=t}};u(VA,"CameraAnimateCall");var G0=VA,HA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:cancelAnimation-call"),this.event_properties=t}};u(HA,"CameraCancelAnimationCall");var V0=HA,jA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:focusOn-call"),this.event_properties=t}};u(jA,"CameraFocusOnCall");var H0=jA,WA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:getSafeAreaInsets-call"),this.event_properties=t}};u(WA,"CameraGetSafeAreaInsetsCall");var j0=WA,YA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:interaction.disable-call"),this.event_properties=t}};u(YA,"CameraInteractionDisableCall");var W0=YA,XA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:interaction.enable-call"),this.event_properties=t}};u(XA,"CameraInteractionEnableCall");var Y0=XA,ZA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:set-call"),this.event_properties=t}};u(ZA,"CameraSetCall");var X0=ZA,QA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:setSafeAreaInsets-call"),this.event_properties=t}};u(QA,"CameraSetSafeAreaInsetsCall");var Z0=QA,KA=class{constructor(t){this.event_properties=t,A(this,"event_type","Camera:translate-call"),this.event_properties=t}};u(KA,"CameraTranslateCall");var Q0=KA,JA=class{constructor(t){this.event_properties=t,A(this,"event_type","FlatLabels:add-call"),this.event_properties=t}};u(JA,"FlatLabelsAddCall");var K0=JA,$A=class{constructor(t){this.event_properties=t,A(this,"event_type","FlatLabels:labelAllLocations-call"),this.event_properties=t}};u($A,"FlatLabelsLabelAllLocationsCall");var J0=$A,eC=class{constructor(t){this.event_properties=t,A(this,"event_type","FlatLabels:remove-call"),this.event_properties=t}};u(eC,"FlatLabelsRemoveCall");var $0=eC,tC=class{constructor(t){this.event_properties=t,A(this,"event_type","FlatLabels:removeAll-call"),this.event_properties=t}};u(tC,"FlatLabelsRemoveAllCall");var TA=tC,nC=class{constructor(t){this.event_properties=t,A(this,"event_type","FlatLabels:setAppearance-call"),this.event_properties=t}};u(nC,"FlatLabelsSetAppearanceCall");var ev=nC,iC=class{constructor(t){this.event_properties=t,A(this,"event_type","FloatingLabels:add-call"),this.event_properties=t}};u(iC,"FloatingLabelsAddCall");var tv=iC,rC=class{constructor(t){this.event_properties=t,A(this,"event_type","FloatingLabels:labelAllLocations-call"),this.event_properties=t}};u(rC,"FloatingLabelsLabelAllLocationsCall");var nv=rC,sC=class{constructor(t){this.event_properties=t,A(this,"event_type","FloatingLabels:remove-call"),this.event_properties=t}};u(sC,"FloatingLabelsRemoveCall");var iv=sC,oC=class{constructor(t){this.event_properties=t,A(this,"event_type","FloatingLabels:removeAll-call"),this.event_properties=t}};u(oC,"FloatingLabelsRemoveAllCall");var SA=oC,aC=class{constructor(t){this.event_properties=t,A(this,"event_type","FloatingLabels:resetPriority-call"),this.event_properties=t}};u(aC,"FloatingLabelsResetPriorityCall");var rv=aC,lC=class{constructor(t){this.event_properties=t,A(this,"event_type","FloatingLabels:setAppearance-call"),this.event_properties=t}};u(lC,"FloatingLabelsSetAppearanceCall");var sv=lC,uC=class{constructor(t){this.event_properties=t,A(this,"event_type","FloatingLabels:setPriority-call"),this.event_properties=t}};u(uC,"FloatingLabelsSetPriorityCall");var ov=uC,cC=class{constructor(t){this.event_properties=t,A(this,"event_type","global:getVenue-call"),this.event_properties=t}};u(cC,"GlobalGetVenueCall");var av=cC,hC=class{constructor(t){this.event_properties=t,A(this,"event_type","global:getVenueMVF-call"),this.event_properties=t}};u(hC,"GlobalGetVenueMvfCall");var lv=hC,fC=class{constructor(t){this.event_properties=t,A(this,"event_type","global:showVenue-call"),this.event_properties=t}};u(fC,"GlobalShowVenueCall");var uv=fC,pC=class{constructor(t){this.event_properties=t,A(this,"event_type","Journey:clear-call"),this.event_properties=t}};u(pC,"JourneyClearCall");var cv=pC,dC=class{constructor(t){this.event_properties=t,A(this,"event_type","Journey:draw-call"),this.event_properties=t}};u(dC,"JourneyDrawCall");var hv=dC,mC=class{constructor(t){this.event_properties=t,A(this,"event_type","Journey:setStep-call"),this.event_properties=t}};u(mC,"JourneySetStepCall");var fv=mC,gC=class{constructor(t){this.event_properties=t,A(this,"event_type","Mappedin:getCollectionItemById-call"),this.event_properties=t}};u(gC,"MappedinGetCollectionItemByIdCall");var AA=gC,vC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinCoordinate:absoluteDistanceTo-call"),this.event_properties=t}};u(vC,"MappedinCoordinateAbsoluteDistanceToCall");var CA=vC,yC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinCoordinate:nearestNode-call"),this.event_properties=t}};u(yC,"MappedinCoordinateNearestNodeCall");var PA=yC,xC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinLocation:clone-call"),this.event_properties=t}};u(xC,"MappedinLocationCloneCall");var pv=xC,bC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinLocation:directionsTo-call"),this.event_properties=t}};u(bC,"MappedinLocationDirectionsToCall");var dv=bC,_C=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinLocation:distanceTo-call"),this.event_properties=t}};u(_C,"MappedinLocationDistanceToCall");var mv=_C,wC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinMap:createCoordinate-call"),this.event_properties=t}};u(wC,"MappedinMapCreateCoordinateCall");var IA=wC,MC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinMap:createCoordinateByXY-call"),this.event_properties=t}};u(MC,"MappedinMapCreateCoordinateByXyCall");var OA=MC,EC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinMap:getNorth-call"),this.event_properties=t}};u(EC,"MappedinMapGetNorthCall");var LA=EC,TC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinNode:directionsTo-call"),this.event_properties=t}};u(TC,"MappedinNodeDirectionsToCall");var gv=TC,SC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinNode:distanceTo-call"),this.event_properties=t}};u(SC,"MappedinNodeDistanceToCall");var vv=SC,AC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinPolygon:directionsTo-call"),this.event_properties=t}};u(AC,"MappedinPolygonDirectionsToCall");var yv=AC,CC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinPolygon:distanceTo-call"),this.event_properties=t}};u(CC,"MappedinPolygonDistanceToCall");var xv=CC,PC=class{constructor(t){this.event_properties=t,A(this,"event_type","MappedinVenue:metadata-read"),this.event_properties=t}};u(PC,"MappedinVenueMetadataRead");var bv=PC,IC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:addInteractivePolygon-call"),this.event_properties=t}};u(IC,"MapViewAddInteractivePolygonCall");var _v=IC,OC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:addInteractivePolygonsForAllLocations-call"),this.event_properties=t}};u(OC,"MapViewAddInteractivePolygonsForAllLocationsCall");var wv=OC,LC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:clearPolygonColor-call"),this.event_properties=t}};u(LC,"MapViewClearPolygonColorCall");var Mv=LC,DC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:createCustomTooltip-call"),this.event_properties=t}};u(DC,"MapViewCreateCustomTooltipCall");var Ev=DC,NC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:createMarker-call"),this.event_properties=t}};u(NC,"MapViewCreateMarkerCall");var DA=NC,RC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:createTooltip-call"),this.event_properties=t}};u(RC,"MapViewCreateTooltipCall");var Tv=RC,BC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:destroy-call"),this.event_properties=t}};u(BC,"MapViewDestroyCall");var Sv=BC,kC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:disableImageFlippingForAllPolygons-call"),this.event_properties=t}};u(kC,"MapViewDisableImageFlippingForAllPolygonsCall");var Av=kC,qC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:drawPath-call"),this.event_properties=t}};u(qC,"MapViewDrawPathCall");var Cv=qC,FC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:enableImageFlippingForAllLocations-call"),this.event_properties=t}};u(FC,"MapViewEnableImageFlippingForAllLocationsCall");var Pv=FC,UC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:enableImageFlippingForPolygon-call"),this.event_properties=t}};u(UC,"MapViewEnableImageFlippingForPolygonCall");var Iv=UC,zC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:getNearestNodeByScreenCoordinates-call"),this.event_properties=t}};u(zC,"MapViewGetNearestNodeByScreenCoordinatesCall");var Ov=zC,GC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:getPolygonAtCoordinate-call"),this.event_properties=t}};u(GC,"MapViewGetPolygonAtCoordinateCall");var Lv=GC,VC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:getPrimaryLocationForPolygon-call"),this.event_properties=t}};u(VC,"MapViewGetPrimaryLocationForPolygonCall");var Dv=VC,HC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:labelAllLocations-call"),this.event_properties=t}};u(HC,"MapViewLabelAllLocationsCall");var Nv=HC,jC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removeAllInteractivePolygons-call"),this.event_properties=t}};u(jC,"MapViewRemoveAllInteractivePolygonsCall");var Rv=jC,WC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removeAllMarkers-call"),this.event_properties=t}};u(WC,"MapViewRemoveAllMarkersCall");var Bv=WC,YC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removeAllPaths-call"),this.event_properties=t}};u(YC,"MapViewRemoveAllPathsCall");var kv=YC,XC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removeAllTooltips-call"),this.event_properties=t}};u(XC,"MapViewRemoveAllTooltipsCall");var qv=XC,ZC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removeInteractivePolygon-call"),this.event_properties=t}};u(ZC,"MapViewRemoveInteractivePolygonCall");var Fv=ZC,QC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removeMarker-call"),this.event_properties=t}};u(QC,"MapViewRemoveMarkerCall");var NA=QC,KC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removePath-call"),this.event_properties=t}};u(KC,"MapViewRemovePathCall");var Uv=KC,JC=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:removeTooltip-call"),this.event_properties=t}};u(JC,"MapViewRemoveTooltipCall");var zv=JC,$C=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:setBackgroundColor-call"),this.event_properties=t}};u($C,"MapViewSetBackgroundColorCall");var Gv=$C,e4=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:setHoverColor-call"),this.event_properties=t}};u(e4,"MapViewSetHoverColorCall");var Vv=e4,t4=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:setMap-call"),this.event_properties=t}};u(t4,"MapViewSetMapCall");var Hv=t4,n4=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:setPolygonColor-call"),this.event_properties=t}};u(n4,"MapViewSetPolygonColorCall");var jv=n4,i4=class{constructor(t){this.event_properties=t,A(this,"event_type","MapView:setState-call"),this.event_properties=t}};u(i4,"MapViewSetStateCall");var Wv=i4,r4=class{constructor(t){this.event_properties=t,A(this,"event_type","metrics:mapLoad-event"),this.event_properties=t}};u(r4,"MetricsMapLoadEvent");var Yv=r4,s4=class{constructor(t){this.event_properties=t,A(this,"event_type","OfflineSearch:addQuery-call"),this.event_properties=t}};u(s4,"OfflineSearchAddQueryCall");var Xv=s4,o4=class{constructor(t){this.event_properties=t,A(this,"event_type","OfflineSearch:constructor-call"),this.event_properties=t}};u(o4,"OfflineSearchConstructorCall");var Zv=o4,a4=class{constructor(t){this.event_properties=t,A(this,"event_type","OfflineSearch:search-call"),this.event_properties=t}};u(a4,"OfflineSearchSearchCall");var Qv=a4,l4=class{constructor(t){this.event_properties=t,A(this,"event_type","OfflineSearch:suggest-call"),this.event_properties=t}};u(l4,"OfflineSearchSuggestCall");var Kv=l4,c_=u((()=>({promise:Promise.resolve()})),"getVoidPromiseResult"),u4=class{constructor(){A(this,"disabled",!1),A(this,"amplitude")}get client(){return this.isInitializedAndEnabled(),this.amplitude}get isLoaded(){return null!=this.amplitude}isInitializedAndEnabled(){return this.amplitude?!this.disabled:(console.error("ERROR: Ampli is not yet initialized. Have you called ampli.load() on app start?"),!1)}load(t){var e,i;if(this.disabled=null!=(e=t.disabled)&&e,this.amplitude)return console.warn("WARNING: Ampli is already intialized. Ampli.load() should be called once at application startup."),c_();let n=null;if(t.client&&"apiKey"in t.client?n=t.client.apiKey:"environment"in t&&(n=BA[t.environment]),t.client&&"instance"in t.client)this.amplitude=t.client.instance;else{if(n)return this.amplitude=u_(),this.amplitude.init(n,void 0,{...Id,...null!=(null==t?void 0:t.client)&&"configuration"in t.client?null==(i=t.client)?void 0:i.configuration:{}});console.error("ERROR: ampli.load() requires 'environment', 'client.apiKey', or 'client.instance'")}return c_()}identify(t,e,i){if(!this.isInitializedAndEnabled())return c_();t&&(i={...i,user_id:t});let n=new Sl,r=e;if(null!=r)for(let[t,e]of Object.entries(r))n.set(t,e);return this.amplitude.identify(n,i)}track(t,e){return this.isInitializedAndEnabled()?this.amplitude.track(t,void 0,e):c_()}analyticsCategorySelectedCall(t,e){return this.track(new B0(t),e)}analyticsLocationSelectedCall(t,e){return this.track(new k0(t),e)}blueDotDisableCall(t,e){return this.track(new q0(t),e)}blueDotEnableCall(t,e){return this.track(new F0(t),e)}blueDotOffCall(t,e){return this.track(new U0(t),e)}blueDotOnCall(t,e){return this.track(new z0(t),e)}cameraAnimateCall(t,e){return this.track(new G0(t),e)}cameraCancelAnimationCall(t,e){return this.track(new V0(t),e)}cameraFocusOnCall(t,e){return this.track(new H0(t),e)}cameraGetSafeAreaInsetsCall(t,e){return this.track(new j0(t),e)}cameraInteractionDisableCall(t,e){return this.track(new W0(t),e)}cameraInteractionEnableCall(t,e){return this.track(new Y0(t),e)}cameraSetCall(t,e){return this.track(new X0(t),e)}cameraSetSafeAreaInsetsCall(t,e){return this.track(new Z0(t),e)}cameraTranslateCall(t,e){return this.track(new Q0(t),e)}flatLabelsAddCall(t,e){return this.track(new K0(t),e)}flatLabelsLabelAllLocationsCall(t,e){return this.track(new J0(t),e)}flatLabelsRemoveCall(t,e){return this.track(new $0(t),e)}flatLabelsRemoveAllCall(t,e){return this.track(new TA(t),e)}flatLabelsSetAppearanceCall(t,e){return this.track(new ev(t),e)}floatingLabelsAddCall(t,e){return this.track(new tv(t),e)}floatingLabelsLabelAllLocationsCall(t,e){return this.track(new nv(t),e)}floatingLabelsRemoveCall(t,e){return this.track(new iv(t),e)}floatingLabelsRemoveAllCall(t,e){return this.track(new SA(t),e)}floatingLabelsResetPriorityCall(t,e){return this.track(new rv(t),e)}floatingLabelsSetAppearanceCall(t,e){return this.track(new sv(t),e)}floatingLabelsSetPriorityCall(t,e){return this.track(new ov(t),e)}globalGetVenueCall(t,e){return this.track(new av(t),e)}globalGetVenueMvfCall(t,e){return this.track(new lv(t),e)}globalShowVenueCall(t,e){return this.track(new uv(t),e)}journeyClearCall(t,e){return this.track(new cv(t),e)}journeyDrawCall(t,e){return this.track(new hv(t),e)}journeySetStepCall(t,e){return this.track(new fv(t),e)}mappedinGetCollectionItemByIdCall(t,e){return this.track(new AA(t),e)}mappedinCoordinateAbsoluteDistanceToCall(t,e){return this.track(new CA(t),e)}mappedinCoordinateNearestNodeCall(t,e){return this.track(new PA(t),e)}mappedinLocationCloneCall(t,e){return this.track(new pv(t),e)}mappedinLocationDirectionsToCall(t,e){return this.track(new dv(t),e)}mappedinLocationDistanceToCall(t,e){return this.track(new mv(t),e)}mappedinMapCreateCoordinateCall(t,e){return this.track(new IA(t),e)}mappedinMapCreateCoordinateByXyCall(t,e){return this.track(new OA(t),e)}mappedinMapGetNorthCall(t,e){return this.track(new LA(t),e)}mappedinNodeDirectionsToCall(t,e){return this.track(new gv(t),e)}mappedinNodeDistanceToCall(t,e){return this.track(new vv(t),e)}mappedinPolygonDirectionsToCall(t,e){return this.track(new yv(t),e)}mappedinPolygonDistanceToCall(t,e){return this.track(new xv(t),e)}mappedinVenueMetadataRead(t,e){return this.track(new bv(t),e)}mapViewAddInteractivePolygonCall(t,e){return this.track(new _v(t),e)}mapViewAddInteractivePolygonsForAllLocationsCall(t,e){return this.track(new wv(t),e)}mapViewClearPolygonColorCall(t,e){return this.track(new Mv(t),e)}mapViewCreateCustomTooltipCall(t,e){return this.track(new Ev(t),e)}mapViewCreateMarkerCall(t,e){return this.track(new DA(t),e)}mapViewCreateTooltipCall(t,e){return this.track(new Tv(t),e)}mapViewDestroyCall(t,e){return this.track(new Sv(t),e)}mapViewDisableImageFlippingForAllPolygonsCall(t,e){return this.track(new Av(t),e)}mapViewDrawPathCall(t,e){return this.track(new Cv(t),e)}mapViewEnableImageFlippingForAllLocationsCall(t,e){return this.track(new Pv(t),e)}mapViewEnableImageFlippingForPolygonCall(t,e){return this.track(new Iv(t),e)}mapViewGetNearestNodeByScreenCoordinatesCall(t,e){return this.track(new Ov(t),e)}mapViewGetPolygonAtCoordinateCall(t,e){return this.track(new Lv(t),e)}mapViewGetPrimaryLocationForPolygonCall(t,e){return this.track(new Dv(t),e)}mapViewLabelAllLocationsCall(t,e){return this.track(new Nv(t),e)}mapViewRemoveAllInteractivePolygonsCall(t,e){return this.track(new Rv(t),e)}mapViewRemoveAllMarkersCall(t,e){return this.track(new Bv(t),e)}mapViewRemoveAllPathsCall(t,e){return this.track(new kv(t),e)}mapViewRemoveAllTooltipsCall(t,e){return this.track(new qv(t),e)}mapViewRemoveInteractivePolygonCall(t,e){return this.track(new Fv(t),e)}mapViewRemoveMarkerCall(t,e){return this.track(new NA(t),e)}mapViewRemovePathCall(t,e){return this.track(new Uv(t),e)}mapViewRemoveTooltipCall(t,e){return this.track(new zv(t),e)}mapViewSetBackgroundColorCall(t,e){return this.track(new Gv(t),e)}mapViewSetHoverColorCall(t,e){return this.track(new Vv(t),e)}mapViewSetMapCall(t,e){return this.track(new Hv(t),e)}mapViewSetPolygonColorCall(t,e){return this.track(new jv(t),e)}mapViewSetStateCall(t,e){return this.track(new Wv(t),e)}metricsMapLoadEvent(t,e){return this.track(new Yv(t),e)}offlineSearchAddQueryCall(t,e){return this.track(new Xv(t),e)}offlineSearchConstructorCall(t,e){return this.track(new Zv(t),e)}offlineSearchSearchCall(t,e){return this.track(new Qv(t),e)}offlineSearchSuggestCall(t,e){return this.track(new Kv(t),e)}};u(u4,"Ampli");var RA=u4,Jv=new RA;E();var yH=Bt(jk()),xH=Bt(O4());E();var cH=Bt(bq());E(),E(),E();var wF=Bt(_F());E();var nP=class{constructor({origin:t,destination:e,vortex:i,elevationDelta:n=0,distance:r=0,angle:o=0,pathWeight:s=0}){let a,l;if(A(this,"origin"),A(this,"destination"),A(this,"vortex"),A(this,"distance"),A(this,"angle"),A(this,"weight"),this.origin=t,this.destination=e,this.vortex=i,this.distance=r,this.angle=o,i)this.distance=0,this.angle=0,a=void 0!==i.weight&&i.weight>0?i.weight:"elevator"===i.type?2e3:1e3,l=i.multiplier&&i.multiplier>=1?i.multiplier:1,this.weight=n*l+a;else{let t=s||e.weight;a=t&&t>=0?t:0,l=e.multiplier&&e.multiplier>=1?e.multiplier:1,this.weight=this.distance*l+a}if(isNaN(this.angle))throw new Error("nan angle")}};u(nP,"Edge");var tP=nP,Kf=tP;function Gre(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale||1);try{if(!t.georeference)throw new Error("map ".concat(t.name||t.shortName||t.id," does not have a georeference field"));if(t.georeference.length<3)throw new Error("map ".concat(t.name||t.shortName||t.id," has less than 3 georeference points, we require at least 3 for proper map scaling"));let e=t.georeference[0],i=t.georeference[2],n=(0,wF.getDistance)({latitude:e.target.x,longitude:e.target.y},{latitude:i.target.x,longitude:i.target.y}),r=e.control.x-i.control.x,o=e.control.y-i.control.y;return Math.sqrt(r*r+o*o)/n}catch(t){return Le.error(t),1}}function Iw(t,e){let i=t.x-e.x,n=t.y-e.y;return(Math.atan2(n,i)+2.5*Math.PI)%(2*Math.PI)}u(Gre,"getMapScale"),u(Iw,"getAngle");var sP=class{constructor({nodes:t,vortexes:e,maps:i,showVortexNames:n=!1}){A(this,"edges"),A(this,"nodesById"),A(this,"mapsById"),this.edges={},this.mapsById=i.map((t=>({...t,_scale:Gre(t)}))).reduce(((t,e)=>(t[e.id]=e,t)),{});let r=t.filter((t=>!!this.mapsById[t.map])).map((t=>({...t,paths:t.paths?t.paths.filter((({map:e})=>e===t.map)):[]})));this.nodesById=r.reduce(((t,e)=>(t[e.id]=e,t)),{});for(let t in this.nodesById)this.nodesById.hasOwnProperty(t)&&(this.nodesById[t].paths=this.nodesById[t].paths.filter((({node:t})=>!!this.nodesById[t])));let o=e.map((t=>({...t,name:n?t.name:t.type,nodes:t.nodes?t.nodes.filter((t=>!!this.nodesById[t])):[]})));r.forEach((t=>{this.edges[t.id]=t.paths.map((({node:e,weight:i})=>{let n=this.nodesById[e];return new Kf({angle:Iw(t,n),destination:n,distance:this.getDistance(t,n),origin:t,pathWeight:i})}))})),o.forEach((t=>{if(null==t.nodes||0===t.nodes.length)return;let e=0;for(;e<t.nodes.length-1;){let i=this.nodesById[t.nodes[e]];if(e++,null==i)continue;let n=e;for(;n<t.nodes.length;){let e=this.nodesById[t.nodes[n]];if(n++,null==e)continue;let r=this.mapsById[i.map].elevation||0,o=this.mapsById[e.map].elevation||0,s=Math.abs(r-o);this.edges[i.id].push(new Kf({destination:e,elevationDelta:s,origin:i,vortex:t})),this.edges[e.id].push(new Kf({destination:i,elevationDelta:s,origin:e,vortex:t}))}}}))}aStar({originIds:t,destinationNodeIds:e,accessible:i,includedVortexIds:n,excludedVortexIds:r}){let o=t.map((t=>this.nodesById[t])).filter((t=>t)),s=e.map((t=>this.nodesById[t])).filter((t=>t));if(0===o.length||0===s.length)return[];let a=[],l={},u={};for(o.forEach((t=>{let e=this.getShortestEuclideanDistance(t,s);a.push({origin:t,priority:e}),l[t.id]=null,u[t.id]=0})),a.sort(((t,e)=>t.priority-e.priority));a.length>0;){let t=a[0];if(s.includes(t.origin)){let e=[],i=l[t.origin.id];for(;null!=i;){e.push(i);let t=l[i.origin.id];i=null!=t?t:null}return e.reverse()}for(let e of this.edges[t.origin.id]){let o=e.vortex&&!1===e.vortex.accessible||!1===e.origin.accessible||!1===e.destination.accessible,h=e.vortex&&(n&&!n.has(e.vortex.id)||r&&r.has(e.vortex.id));if(i&&o||h)continue;let c=u[t.origin.id]+e.weight;if(null==u[e.destination.id]||c<u[e.destination.id]){u[e.destination.id]=c;let t=c+this.getShortestEuclideanDistance(e.destination,s);a.push({origin:e.destination,priority:t}),l[e.destination.id]=e}}a.splice(0,1),a.sort(((t,e)=>t.priority-e.priority))}return[]}getDistance(t,e){let i,n=t.x-e.x,r=t.y-e.y,o=n*n+r*r;return i=null==this.mapsById[t.map]?1:this.mapsById[t.map]._scale,Math.sqrt(o)/i}getShortestEuclideanDistance(t,e){return e.reduce(((e,i)=>{let n=this.getDistance(t,i);return Math.min(e,n)}),Number.MAX_VALUE)}};u(sP,"NavigationGraph");var iP=sP,rP=iP;E(),E();var Jf=(t=>(t.DEPARTURE="Departure",t.TAKEVORTEX="TakeVortex",t.EXITVORTEX="ExitVortex",t.TURN="Turn",t.ARRIVAL="Arrival",t))(Jf||{}),g1=(t=>(t.STRAIGHT="Straight",t.RIGHT="Right",t.SLIGHTRIGHT="SlightRight",t.LEFT="Left",t.SLIGHTLEFT="SlightLeft",t))(g1||{});function Vre(t){switch(t){case"down":case"up":return"".concat(t," ");default:return""}}u(Vre,"vortexDirectionTest");var aP=class{constructor({origin:t,action:e,distance:i,atLocation:n,instruction:r}){A(this,"node"),A(this,"instruction"),A(this,"action"),A(this,"atLocation"),A(this,"type"),A(this,"distance",0),this.node=t,this.action=e,this.distance=i||0,this.atLocation=n,this.instruction="",r?this.instruction=r:(null!=e&&"Departure"===e.type?this.instruction=null!=n?"Depart from ".concat(n.name):"Depart from current location":null!=e&&"Arrival"===e.type?this.instruction=null!=n?"Arrive at ".concat(n.name):"Arrive at destination":null!=e&&"TakeVortex"===e.type?this.instruction="Take ".concat(n&&n.name," ").concat(Vre(e.direction),"to ").concat(e.toMap.name):null!=e&&"ExitVortex"===e.type?this.instruction="Exit ".concat(n&&n.name," at ").concat(e.toMap.name):null!=e&&"bearing"in e&&"Right"===e.bearing?this.instruction="Turn right":null!=e&&"bearing"in e&&"SlightRight"===e.bearing?this.instruction="Turn slightly right":null!=e&&"bearing"in e&&"Straight"===e.bearing?this.instruction="Head straight":null!=e&&"bearing"in e&&"SlightLeft"===e.bearing?this.instruction="Turn slightly left":null!=e&&"bearing"in e&&"Left"===e.bearing&&(this.instruction="Turn left"),null!=e&&"Turn"===e.type&&n&&(this.instruction+=" at ".concat(n.name)))}};u(aP,"Directive");var oP=aP,Ph=oP;function lP(t,e,i,n){if(!(t&&e&&i&&n))return null;let r=t.x,o=t.y,s=e.x,a=e.y,l=i.x,u=i.y,h=n.x,c=n.y;if(r===s&&o===a||l===h&&u===c)return null;let p=(c-u)*(s-r)-(h-l)*(a-o);if(0===p)return null;let d=((h-l)*(o-u)-(c-u)*(r-l))/p,f=((s-r)*(o-u)-(a-o)*(r-l))/p;return d<0||d>1||f<0||f>1?null:{x:r+d*(s-r),y:o+d*(a-o)}}function MF(t,e,i){if(t.x===e.x)return[{x:t.x+i,y:t.y},{x:e.x+i,y:e.y}];if(t.y===e.y)return[{x:t.x,y:t.y+i},{x:e.x,y:e.y+i}];let n=-1/((e.y-t.y)/(e.x-t.x)),r=i*Math.sqrt(1/(1+n*n)),o=n*r;return[{x:t.x+r,y:t.y+o},{x:e.x+r,y:e.y+o}]}function EF(t,e,i=[],n=0){let r=!0;return i.forEach((i=>{if(n>0){let o=MF(t,e,-n),s=MF(t,e,n);if(lP(o[0],o[1],i[0],i[1])||lP(s[0],s[1],i[0],i[1]))return void(r=!1)}else if(lP(t,e,i[0],i[1]))return void(r=!1)})),r}E(),u(lP,"getLineIntersection"),u(MF,"getOffsetLine"),u(EF,"hasLineOfSight");var Ow=.1*Math.PI;function Lw(t,e){return((e-t+Math.PI)%(2*Math.PI)+2*Math.PI)%(2*Math.PI)-Math.PI}u(Lw,"differenceBetweenAngles");var hP=class{constructor({locations:t,nodes:e,vortexes:i,maps:n,polygons:r,showVortexNames:o}){A(this,"graph"),A(this,"locationsByNodeId"),A(this,"geometryEdgesByMapId",new Map),this.graph=new rP({maps:n,nodes:e,showVortexNames:o,vortexes:i}),this.locationsByNodeId=t.reduce(((t,e)=>(e.nodes&&e.nodes.forEach((i=>{t[i.node]=e})),e.polygons&&e.polygons.forEach((i=>{i.entrances&&i.entrances.forEach((i=>{t[i]=e}))})),t)),{}),r&&r.forEach((t=>{this.geometryEdgesByMapId.has(t.map)||this.geometryEdgesByMapId.set(t.map,[]),t.vertexes.forEach(((e,i)=>{t.vertexes[i+1]?this.geometryEdgesByMapId.get(t.map).push([e,t.vertexes[i+1]]):this.geometryEdgesByMapId.get(t.map).push([e,t.vertexes[0]])}))}))}getClosestLocationInRay(t,e=.5*Math.PI,i=10){let n=0,r=0,o=t;for(;Math.abs(n)<e&&r<i;){let t=this.graph.edges[o.destination.id],s=null,a=0;for(let e of t)if(e.distance>0)if(null!=s){let t=-Lw(o.angle,e.angle);Math.abs(t)<Math.abs(a)&&(s=e,a=t)}else s=e,a=-Lw(o.angle,e.angle);if(null==s)return null;{if(Math.abs(a)>=e||(n+=a,r+=s.distance,Math.abs(n)>=e||r>i))return null;let t=this.locationsByNodeId[s.destination.id];if(null!=t)return t;o=s}}return null}getDirections({originIds:t,destinationNodeIds:e,accessible:i,departFrom:n,arriveAt:r,includedVortexIds:o,excludedVortexIds:s,simplify:a}){var l,u,h;let c=this.graph.aStar({originIds:t,destinationNodeIds:e,accessible:i,includedVortexIds:o,excludedVortexIds:s});if(0===c.length)return{distance:0,instructions:[new Ph({distance:0,instruction:"No Valid Path Available"})],path:[]};let p=0,d=[],f=[];if(null!=a&&a.enabled){let t=null!=(l=null==a?void 0:a.bufferRadius)?l:1.8,e=[c[0]];for(let i=1;i<c.length;i++){if(c[i].origin.map!==c[i-1].origin.map){let n=null!=(u=this.geometryEdgesByMapId.get(c[i-1].origin.map))?u:[];f.push(...this.simplifySteps(e,n,t)),e=[c[i]]}e.push(c[i])}let i=c[c.length-1],n=null!=(h=this.geometryEdgesByMapId.get(i.origin.map))?h:[];f.push(...this.simplifySteps(e,n,t)),c=f}for(let t=0;t<c.length;t++)d.push(c[t].origin);d.push(c[c.length-1].destination);let g=[],m=null,v=null,y=0,x=0;for(let t=0;t<c.length;t++){let e=c[t],i=e.origin,o=e.destination;if(p+=e.distance,y+=(null==v?void 0:v.distance)||0,0===t&&g.push(new Ph({action:{type:"Departure"},atLocation:n,distance:0,origin:i})),null!=e.vortex){let t=this.graph.mapsById[i.map],n=this.graph.mapsById[o.map],r="none";if(null!=t.elevation&&null!=n.elevation){let e=t.elevation-n.elevation;e>0?r="down":e<0&&(r="up")}g.push(new Ph({action:{direction:r,fromMap:t,toMap:n,type:"TakeVortex"},atLocation:e.vortex,distance:y,origin:i})),x+=y,y=0}else if(null!=m&&null!=v)if(null!=v.vortex){let t=this.graph.mapsById[m.map],e=this.graph.mapsById[v.destination.map];g.push(new Ph({action:{fromMap:t,toMap:e,type:"ExitVortex"},atLocation:v.vortex,distance:y,origin:i})),x+=y,y=0}else{let t=this.graph.edges[i.id].filter((t=>t.destination!==m&&t.destination!==e.destination));if(t.length>0){let n=-Lw(v.angle,e.angle),r=t.reduce(((t,i)=>{let n=-Lw(e.angle,i.angle);return Math.min(t,Math.abs(n))}),Math.PI);if(Math.abs(n)>=Ow||Math.abs(r)<=Ow){let t;t=n<=-Math.PI/4?"Right":n<=-Ow?"SlightRight":n<=Ow?"Straight":n<=Math.PI/4?"SlightLeft":"Left";let e=this.locationsByNodeId[i.id];if(e||(e=this.getClosestLocationInRay(v,.5*Math.PI,10)),null!=e){let n=new Ph({action:{bearing:t,referencePosition:"At",type:"Turn"},atLocation:e,distance:y,origin:i});n.type=t,g.push(n)}else g.push(new Ph({action:{bearing:t,referencePosition:"At",type:"Turn"},distance:y,origin:i}));x+=y,y=0}}}t===c.length-1&&(g.push(new Ph({action:{type:"Arrival"},atLocation:r,distance:p-x<0?0:p-x,origin:e.destination})),x+=y,y=0),m=i,v=e}let _=[],b=null;for(let t=g.length-1;t>=0;t--){let e=g[t],{action:i}=e;i&&"TakeVortex"===i.type?(b=e.node,_.unshift(e)):i&&"Turn"===i.type&&null!=b?this.graph.getDistance(e.node,b)>5&&_.unshift(e):_.unshift(e)}return{distance:p,instructions:_,path:d}}simplifySteps(t,e,i){if(t.length<3)return t;let n=[t[0]],r=1;for(let o=r+2;o<t.length;o++)if(!EF(t[r].origin,t[o].origin,e,i)){let e=o-1;n.push(new Kf({...t[r],destination:t[e].origin,distance:this.graph.getDistance(t[r].origin,t[e].origin),angle:Iw(t[r].origin,t[e].origin)})),r=e}return n.push(new Kf({...t[r],destination:t[t.length-1].origin,distance:this.graph.getDistance(t[r].origin,t[t.length-1].origin),angle:Iw(t[r].origin,t[t.length-1].origin)}),t[t.length-1]),n}};u(hP,"Navigator");var uP=hP,cP=uP;E(),E(),E(),E();var ds=6371008.8,TF={centimeters:100*ds,centimetres:100*ds,degrees:ds/111325,feet:3.28084*ds,inches:39.37*ds,kilometers:ds/1e3,kilometres:ds/1e3,meters:ds,metres:ds,miles:ds/1609.344,millimeters:1e3*ds,millimetres:1e3*ds,nauticalmiles:ds/1852,radians:1,yards:1.0936*ds},oIe={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ds,yards:1.0936133};function ms(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function oi(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!lu(t[0])||!lu(t[1]))throw new Error("coordinates must contain numbers");return ms({type:"Point",coordinates:t},e,i)}function Vi(t,e,i){void 0===i&&(i={});for(var n=0,r=t;n<r.length;n++){var o=r[n];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++)if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}return ms({type:"Polygon",coordinates:t},e,i)}function gr(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return ms({type:"LineString",coordinates:t},e,i)}function $t(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function $f(t,e,i){return void 0===i&&(i={}),ms({type:"MultiLineString",coordinates:t},e,i)}function fP(t,e,i){return void 0===i&&(i={}),ms({type:"MultiPoint",coordinates:t},e,i)}function v1(t,e){void 0===e&&(e="kilometers");var i=TF[e];if(!i)throw new Error(e+" units is invalid");return t*i}function y1(t,e){void 0===e&&(e="kilometers");var i=TF[e];if(!i)throw new Error(e+" units is invalid");return t/i}function ep(t){return 180*(t%(2*Math.PI))/Math.PI}function Ns(t){return t%360*Math.PI/180}function lu(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function ns(t,e,i){if(null!==t)for(var n,r,o,s,a,l,u,h,c=0,p=0,d=t.type,f="FeatureCollection"===d,g="Feature"===d,m=f?t.features.length:1,v=0;v<m;v++){a=(h=!!(u=f?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var y=0;y<a;y++){var x=0,_=0;if(null!==(s=h?u.geometries[y]:u)){l=s.coordinates;var b=s.type;switch(c=!i||"Polygon"!==b&&"MultiPolygon"!==b?0:1,b){case null:break;case"Point":if(!1===e(l,p,v,x,_))return!1;p++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,v,x,_))return!1;p++,"MultiPoint"===b&&x++}"LineString"===b&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(r=0;r<l[n].length-c;r++){if(!1===e(l[n][r],p,v,x,_))return!1;p++}"MultiLineString"===b&&x++,"Polygon"===b&&_++}"Polygon"===b&&x++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for(_=0,r=0;r<l[n].length;r++){for(o=0;o<l[n][r].length-c;o++){if(!1===e(l[n][r][o],p,v,x,_))return!1;p++}_++}x++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===ns(s.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function SF(t,e,i,n){var r=i;return ns(t,(function(t,n,o,s,a){r=0===n&&void 0===i?t:e(r,t,n,o,s,a)}),n),r}function Ci(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function uu(t,e){var i,n,r,o,s,a,l,u,h,c,p=0,d="FeatureCollection"===t.type,f="Feature"===t.type,g=d?t.features.length:1;for(i=0;i<g;i++){for(a=d?t.features[i].geometry:f?t.geometry:t,u=d?t.features[i].properties:f?t.properties:{},h=d?t.features[i].bbox:f?t.bbox:void 0,c=d?t.features[i].id:f?t.id:void 0,s=(l=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<s;r++)if(null!==(o=l?a.geometries[r]:a))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,p,u,h,c))return!1;break;case"GeometryCollection":for(n=0;n<o.geometries.length;n++)if(!1===e(o.geometries[n],p,u,h,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,u,h,c))return!1;p++}}function vo(t,e){uu(t,(function(t,i,n,r,o){var s,a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return!1!==e(ms(t,n,{bbox:r,id:o}),i,0)&&void 0}switch(a){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var u=t.coordinates[l];if(!1===e(ms({type:s,coordinates:u},n),i,l))return!1}}))}function Dw(t,e){vo(t,(function(t,i,n){var r=0;if(t.geometry){var o=t.geometry.type;if("Point"!==o&&"MultiPoint"!==o){var s,a=0,l=0,u=0;if(!1===ns(t,(function(o,h,c,p,d){if(void 0===s||i>a||p>l||d>u)return s=o,a=i,l=p,u=d,void(r=0);var f=gr([s,o],t.properties);if(!1===e(f,i,n,d,r))return!1;r++,s=o})))return!1}}}))}function AF(t,e,i){var n=i,r=!1;return Dw(t,(function(t,o,s,a,l){n=!1===r&&void 0===i?t:e(n,t,o,s,a,l),r=!0})),n}function pP(t){var e=[1/0,1/0,-1/0,-1/0];return ns(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}u(ms,"feature"),u(oi,"point"),u(Vi,"polygon"),u(gr,"lineString"),u($t,"featureCollection"),u($f,"multiLineString"),u(fP,"multiPoint"),u(v1,"radiansToLength"),u(y1,"lengthToRadians"),u(ep,"radiansToDegrees"),u(Ns,"degreesToRadians"),u(lu,"isNumber"),u(ns,"coordEach"),u(SF,"coordReduce"),u(Ci,"featureEach"),u(uu,"geomEach"),u(vo,"flattenEach"),u(Dw,"segmentEach"),u(AF,"segmentReduce"),u(pP,"bbox"),pP.default=pP;var Rs=pP;E(),E();var CF=" ",ko=class t{static get separator(){return CF}static set separator(t){CF=t}static parse(t){if(!isNaN(parseFloat(t))&&isFinite(t))return Number(t);let e=String(t).trim().replace(/^-/,"").replace(/[NSEW]$/i,"").split(/[^0-9.,]+/);if(""==e[e.length-1]&&e.splice(e.length-1),""==e)return NaN;let i=null;switch(e.length){case 3:i=e[0]/1+e[1]/60+e[2]/3600;break;case 2:i=e[0]/1+e[1]/60;break;case 1:i=e[0];break;default:return NaN}return/^-|[WS]$/i.test(t.trim())&&(i=-i),Number(i)}static toDms(e,i="d",n){if(isNaN(e)||"string"==typeof e&&""==e.trim()||"boolean"==typeof e||e==1/0||null==e)return null;if(void 0===n)switch(i){case"d":case"deg":n=4;break;case"dm":case"deg+min":n=2;break;case"dms":case"deg+min+sec":n=0;break;default:i="d",n=4}e=Math.abs(e);let r=null,o=null,s=null,a=null;switch(i){default:case"d":case"deg":o=e.toFixed(n),o<100&&(o="0"+o),o<10&&(o="0"+o),r=o+"°";break;case"dm":case"deg+min":o=Math.floor(e),s=(60*e%60).toFixed(n),60==s&&(s=(0).toFixed(n),o++),o=("000"+o).slice(-3),s<10&&(s="0"+s),r=o+"°"+t.separator+s+"′";break;case"dms":case"deg+min+sec":o=Math.floor(e),s=Math.floor(3600*e/60)%60,a=(3600*e%60).toFixed(n),60==a&&(a=(0).toFixed(n),s++),60==s&&(s=0,o++),o=("000"+o).slice(-3),s=("00"+s).slice(-2),a<10&&(a="0"+a),r=o+"°"+t.separator+s+"′"+t.separator+a+"″"}return r}static toLat(e,i,n){let r=t.toDms(t.wrap90(e),i,n);return null===r?"–":r.slice(1)+t.separator+(e<0?"S":"N")}static toLon(e,i,n){let r=t.toDms(t.wrap180(e),i,n);return null===r?"–":r+t.separator+(e<0?"W":"E")}static toBrng(e,i,n){let r=t.toDms(t.wrap360(e),i,n);return null===r?"–":r.replace("360","0")}static fromLocale(t){let e=123456.789.toLocaleString(),i={thousands:e.slice(3,4),decimal:e.slice(7,8)};return t.replace(i.thousands,"⁜").replace(i.decimal,".").replace("⁜",",")}static toLocale(t){let e=123456.789.toLocaleString(),i={thousands:e.slice(3,4),decimal:e.slice(7,8)};return t.replace(/,([0-9])/,"⁜$1").replace(".",i.decimal).replace("⁜",i.thousands)}static compassPoint(e,i=3){if(![1,2,3].includes(Number(i)))throw new RangeError("invalid precision ‘".concat(i,"’"));e=t.wrap360(e);let n=4*2**(i-1);return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][Math.round(e*n/360)%n*16/n]}static wrap360(t){return 0<=t&&t<360?t:(t%360+360)%360}static wrap180(t){return-180<t&&t<=180?t:(t+540)%360-180}static wrap90(t){return-90<=t&&t<=90?t:Math.abs((t%360+270)%360-180)-90}};u(ko,"Dms");var dP=ko;Number.prototype.toRadians=function(){return this*Math.PI/180},Number.prototype.toDegrees=function(){return 180*this/Math.PI};var Wn=dP,yr=Math.PI,en=class t{constructor(t,e){if(isNaN(t))throw new TypeError("invalid lat ‘".concat(t,"’"));if(isNaN(e))throw new TypeError("invalid lon ‘".concat(e,"’"));this._lat=Wn.wrap90(Number(t)),this._lon=Wn.wrap180(Number(e))}get lat(){return this._lat}get latitude(){return this._lat}set lat(t){if(this._lat=isNaN(t)?Wn.wrap90(Wn.parse(t)):Wn.wrap90(Number(t)),isNaN(this._lat))throw new TypeError("invalid lat ‘".concat(t,"’"))}set latitude(t){if(this._lat=isNaN(t)?Wn.wrap90(Wn.parse(t)):Wn.wrap90(Number(t)),isNaN(this._lat))throw new TypeError("invalid latitude ‘".concat(t,"’"))}get lon(){return this._lon}get lng(){return this._lon}get longitude(){return this._lon}set lon(t){if(this._lon=isNaN(t)?Wn.wrap180(Wn.parse(t)):Wn.wrap180(Number(t)),isNaN(this._lon))throw new TypeError("invalid lon ‘".concat(t,"’"))}set lng(t){if(this._lon=isNaN(t)?Wn.wrap180(Wn.parse(t)):Wn.wrap180(Number(t)),isNaN(this._lon))throw new TypeError("invalid lng ‘".concat(t,"’"))}set longitude(t){if(this._lon=isNaN(t)?Wn.wrap180(Wn.parse(t)):Wn.wrap180(Number(t)),isNaN(this._lon))throw new TypeError("invalid longitude ‘".concat(t,"’"))}static get metresToKm(){return.001}static get metresToMiles(){return 1/1609.344}static get metresToNauticalMiles(){return 1/1852}static parse(...e){if(0==e.length)throw new TypeError("invalid (empty) point");if(null===e[0]||null===e[1])throw new TypeError("invalid (null) point");let i,n;if(2==e.length&&([i,n]=e,i=Wn.wrap90(Wn.parse(i)),n=Wn.wrap180(Wn.parse(n)),isNaN(i)||isNaN(n)))throw new TypeError("invalid point ‘".concat(e.toString(),"’"));if(1==e.length&&"string"==typeof e[0]&&([i,n]=e[0].split(","),i=Wn.wrap90(Wn.parse(i)),n=Wn.wrap180(Wn.parse(n)),isNaN(i)||isNaN(n)))throw new TypeError("invalid point ‘".concat(e[0],"’"));if(1==e.length&&"object"==typeof e[0]){let t=e[0];if("Point"==t.type&&Array.isArray(t.coordinates)?[n,i]=t.coordinates:(null!=t.latitude&&(i=t.latitude),null!=t.lat&&(i=t.lat),null!=t.longitude&&(n=t.longitude),null!=t.lng&&(n=t.lng),null!=t.lon&&(n=t.lon),i=Wn.wrap90(Wn.parse(i)),n=Wn.wrap180(Wn.parse(n))),isNaN(i)||isNaN(n))throw new TypeError("invalid point ‘".concat(JSON.stringify(e[0]),"’"))}if(isNaN(i)||isNaN(n))throw new TypeError("invalid point ‘".concat(e.toString(),"’"));return new t(i,n)}distanceTo(e,i=6371e3){if(e instanceof t||(e=t.parse(e)),isNaN(i))throw new TypeError("invalid radius ‘".concat(i,"’"));let n=i,r=this.lat.toRadians(),o=this.lon.toRadians(),s=e.lat.toRadians(),a=s-r,l=e.lon.toRadians()-o,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(r)*Math.cos(s)*Math.sin(l/2)*Math.sin(l/2);return n*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))}initialBearingTo(e){if(e instanceof t||(e=t.parse(e)),this.equals(e))return NaN;let i=this.lat.toRadians(),n=e.lat.toRadians(),r=(e.lon-this.lon).toRadians(),o=Math.cos(i)*Math.sin(n)-Math.sin(i)*Math.cos(n)*Math.cos(r),s=Math.sin(r)*Math.cos(n),a=Math.atan2(s,o).toDegrees();return Wn.wrap360(a)}finalBearingTo(e){e instanceof t||(e=t.parse(e));let i=e.initialBearingTo(this)+180;return Wn.wrap360(i)}midpointTo(e){e instanceof t||(e=t.parse(e));let i=this.lat.toRadians(),n=this.lon.toRadians(),r=e.lat.toRadians(),o=(e.lon-this.lon).toRadians(),s=Math.cos(i),a=0,l=Math.sin(i),u={x:s+Math.cos(r)*Math.cos(o),y:a+Math.cos(r)*Math.sin(o),z:l+Math.sin(r)},h=Math.atan2(u.z,Math.sqrt(u.x*u.x+u.y*u.y)),c=n+Math.atan2(u.y,u.x),p=h.toDegrees(),d=c.toDegrees();return new t(p,d)}intermediatePointTo(e,i){if(e instanceof t||(e=t.parse(e)),this.equals(e))return new t(this.lat,this.lon);let n=this.lat.toRadians(),r=this.lon.toRadians(),o=e.lat.toRadians(),s=e.lon.toRadians(),a=o-n,l=s-r,u=Math.sin(a/2)*Math.sin(a/2)+Math.cos(n)*Math.cos(o)*Math.sin(l/2)*Math.sin(l/2),h=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),c=Math.sin((1-i)*h)/Math.sin(h),p=Math.sin(i*h)/Math.sin(h),d=c*Math.cos(n)*Math.cos(r)+p*Math.cos(o)*Math.cos(s),f=c*Math.cos(n)*Math.sin(r)+p*Math.cos(o)*Math.sin(s),g=c*Math.sin(n)+p*Math.sin(o),m=Math.atan2(g,Math.sqrt(d*d+f*f)),v=Math.atan2(f,d),y=m.toDegrees(),x=v.toDegrees();return new t(y,x)}destinationPoint(e,i,n=6371e3){let r=e/n,o=Number(i).toRadians(),s=this.lat.toRadians(),a=this.lon.toRadians(),l=Math.sin(s)*Math.cos(r)+Math.cos(s)*Math.sin(r)*Math.cos(o),u=Math.asin(l),h=Math.sin(o)*Math.sin(r)*Math.cos(s),c=Math.cos(r)-Math.sin(s)*l,p=a+Math.atan2(h,c),d=u.toDegrees(),f=p.toDegrees();return new t(d,f)}static intersection(e,i,n,r){if(e instanceof t||(e=t.parse(e)),n instanceof t||(n=t.parse(n)),isNaN(i))throw new TypeError("invalid brng1 ‘".concat(i,"’"));if(isNaN(r))throw new TypeError("invalid brng2 ‘".concat(r,"’"));let o=e.lat.toRadians(),s=e.lon.toRadians(),a=n.lat.toRadians(),l=n.lon.toRadians(),u=Number(i).toRadians(),h=Number(r).toRadians(),c=a-o,p=l-s,d=2*Math.asin(Math.sqrt(Math.sin(c/2)*Math.sin(c/2)+Math.cos(o)*Math.cos(a)*Math.sin(p/2)*Math.sin(p/2)));if(Math.abs(d)<Number.EPSILON)return new t(e.lat,e.lon);let f=(Math.sin(a)-Math.sin(o)*Math.cos(d))/(Math.sin(d)*Math.cos(o)),g=(Math.sin(o)-Math.sin(a)*Math.cos(d))/(Math.sin(d)*Math.cos(a)),m=Math.acos(Math.min(Math.max(f,-1),1)),v=Math.acos(Math.min(Math.max(g,-1),1)),y=u-(Math.sin(l-s)>0?m:2*yr-m),x=(Math.sin(l-s)>0?2*yr-v:v)-h;if(0==Math.sin(y)&&0==Math.sin(x)||Math.sin(y)*Math.sin(x)<0)return null;let _=-Math.cos(y)*Math.cos(x)+Math.sin(y)*Math.sin(x)*Math.cos(d),b=Math.atan2(Math.sin(d)*Math.sin(y)*Math.sin(x),Math.cos(x)+Math.cos(y)*_),M=Math.asin(Math.min(Math.max(Math.sin(o)*Math.cos(b)+Math.cos(o)*Math.sin(b)*Math.cos(u),-1),1)),E=s+Math.atan2(Math.sin(u)*Math.sin(b)*Math.cos(o),Math.cos(b)-Math.sin(o)*Math.sin(M)),w=M.toDegrees(),A=E.toDegrees();return new t(w,A)}crossTrackDistanceTo(e,i,n=6371e3){e instanceof t||(e=t.parse(e)),i instanceof t||(i=t.parse(i));let r=n;if(this.equals(e))return 0;let o=e.distanceTo(this,r)/r,s=e.initialBearingTo(this).toRadians(),a=e.initialBearingTo(i).toRadians();return Math.asin(Math.sin(o)*Math.sin(s-a))*r}alongTrackDistanceTo(e,i,n=6371e3){e instanceof t||(e=t.parse(e)),i instanceof t||(i=t.parse(i));let r=n;if(this.equals(e))return 0;let o=e.distanceTo(this,r)/r,s=e.initialBearingTo(this).toRadians(),a=e.initialBearingTo(i).toRadians(),l=Math.asin(Math.sin(o)*Math.sin(s-a));return Math.acos(Math.cos(o)/Math.abs(Math.cos(l)))*Math.sign(Math.cos(a-s))*r}maxLatitude(t){let e=Number(t).toRadians(),i=this.lat.toRadians();return Math.acos(Math.abs(Math.sin(e)*Math.cos(i))).toDegrees()}static crossingParallels(t,e,i){if(t.equals(e))return null;let n=Number(i).toRadians(),r=t.lat.toRadians(),o=t.lon.toRadians(),s=e.lat.toRadians(),a=e.lon.toRadians()-o,l=Math.sin(r)*Math.cos(s)*Math.cos(n)*Math.sin(a),u=Math.sin(r)*Math.cos(s)*Math.cos(n)*Math.cos(a)-Math.cos(r)*Math.sin(s)*Math.cos(n),h=Math.cos(r)*Math.cos(s)*Math.sin(n)*Math.sin(a);if(h*h>l*l+u*u)return null;let c=Math.atan2(-u,l),p=Math.acos(h/Math.sqrt(l*l+u*u)),d=o+c+p,f=(o+c-p).toDegrees(),g=d.toDegrees();return{lon1:Wn.wrap180(f),lon2:Wn.wrap180(g)}}rhumbDistanceTo(e,i=6371e3){e instanceof t||(e=t.parse(e));let n=i,r=this.lat.toRadians(),o=e.lat.toRadians(),s=o-r,a=Math.abs(e.lon-this.lon).toRadians();Math.abs(a)>yr&&(a=a>0?-(2*yr-a):2*yr+a);let l=Math.log(Math.tan(o/2+yr/4)/Math.tan(r/2+yr/4)),u=Math.abs(l)>1e-11?s/l:Math.cos(r);return Math.sqrt(s*s+u*u*a*a)*n}rhumbBearingTo(e){if(e instanceof t||(e=t.parse(e)),this.equals(e))return NaN;let i=this.lat.toRadians(),n=e.lat.toRadians(),r=(e.lon-this.lon).toRadians();Math.abs(r)>yr&&(r=r>0?-(2*yr-r):2*yr+r);let o=Math.log(Math.tan(n/2+yr/4)/Math.tan(i/2+yr/4)),s=Math.atan2(r,o).toDegrees();return Wn.wrap360(s)}rhumbDestinationPoint(e,i,n=6371e3){let r=this.lat.toRadians(),o=this.lon.toRadians(),s=Number(i).toRadians(),a=e/n,l=a*Math.cos(s),u=r+l;Math.abs(u)>yr/2&&(u=u>0?yr-u:-yr-u);let h=Math.log(Math.tan(u/2+yr/4)/Math.tan(r/2+yr/4)),c=Math.abs(h)>1e-11?l/h:Math.cos(r),p=o+a*Math.sin(s)/c,d=u.toDegrees(),f=p.toDegrees();return new t(d,f)}rhumbMidpointTo(e){e instanceof t||(e=t.parse(e));let i=this.lat.toRadians(),n=this.lon.toRadians(),r=e.lat.toRadians(),o=e.lon.toRadians();Math.abs(o-n)>yr&&(n+=2*yr);let s=(i+r)/2,a=Math.tan(yr/4+i/2),l=Math.tan(yr/4+r/2),u=Math.tan(yr/4+s/2),h=((o-n)*Math.log(u)+n*Math.log(l)-o*Math.log(a))/Math.log(l/a);isFinite(h)||(h=(n+o)/2);let c=s.toDegrees(),p=h.toDegrees();return new t(c,p)}static areaOf(t,e=6371e3){let i=e,n=t[0].equals(t[t.length-1]);n||t.push(t[0]);let r=t.length-1,o=0;for(let e=0;e<r;e++){let i=t[e].lat.toRadians(),n=t[e+1].lat.toRadians(),r=(t[e+1].lon-t[e].lon).toRadians();o+=2*Math.atan2(Math.tan(r/2)*(Math.tan(i/2)+Math.tan(n/2)),1+Math.tan(i/2)*Math.tan(n/2))}a(t)&&(o=Math.abs(o)-2*yr);let s=Math.abs(o*i*i);return n||t.pop(),s;function a(t){let e=0,i=t[0].initialBearingTo(t[1]);for(let n=0;n<t.length-1;n++){let r=t[n].initialBearingTo(t[n+1]),o=t[n].finalBearingTo(t[n+1]);e+=(r-i+540)%360-180,e+=(o-r+540)%360-180,i=o}return e+=(t[0].initialBearingTo(t[1])-i+540)%360-180,Math.abs(e)<90}}equals(e){return e instanceof t||(e=t.parse(e)),!(Math.abs(this.lat-e.lat)>Number.EPSILON||Math.abs(this.lon-e.lon)>Number.EPSILON)}toGeoJSON(){return{type:"Point",coordinates:[this.lon,this.lat]}}toString(t="d",e){if(!["d","dm","dms","n"].includes(t))throw new RangeError("invalid format ‘".concat(t,"’"));if("n"==t)return null==e&&(e=4),"".concat(this.lat.toFixed(e),",").concat(this.lon.toFixed(e));let i=Wn.toLat(this.lat,t,e),n=Wn.toLon(this.lon,t,e);return"".concat(i,", ").concat(n)}};u(en,"LatLonSpherical");var mi=en;function xr(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Pi(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function mP(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)}function no(t){return"Feature"===t.type?t.geometry:t}function Ma(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}E(),E(),E(),E(),u(xr,"getCoord"),u(Pi,"getCoords"),u(mP,"featureOf"),u(no,"getGeom"),u(Ma,"getType");var Kre=Bt(Nw(),1);E();var ase=Bt(WF(),1);function Bs(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var n=xr(t),r=no(e),o=r.type,s=e.bbox,a=r.coordinates;if(s&&!1===lse(n,s))return!1;"Polygon"===o&&(a=[a]);for(var l=!1,u=0;u<a.length&&!l;u++)if(YF(n,a[u][0],i.ignoreBoundary)){for(var h=!1,c=1;c<a[u].length&&!h;)YF(n,a[u][c],!i.ignoreBoundary)&&(h=!0),c++;h||(l=!0)}return l}function YF(t,e,i){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,o=e.length-1;r<e.length;o=r++){var s=e[r][0],a=e[r][1],l=e[o][0],u=e[o][1];if(t[1]*(s-l)+a*(l-t[0])+u*(t[0]-s)==0&&(s-t[0])*(l-t[0])<=0&&(a-t[1])*(u-t[1])<=0)return!i;a>t[1]!=u>t[1]&&t[0]<(l-s)*(t[1]-a)/(u-a)+s&&(n=!n)}return n}function lse(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function use(t,e,i){void 0===i&&(i={});var n=xr(t),r=xr(e),o=Ns(r[1]-n[1]),s=Ns(r[0]-n[0]),a=Ns(n[1]),l=Ns(r[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(a)*Math.cos(l);return v1(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),i.units)}E(),E(),u(Bs,"booleanPointInPolygon"),u(YF,"inRing"),u(lse,"inBBox"),E(),E(),u(use,"distance");var hr=use;E();var x5e=function(){function t(t,e,i){this.a=t,this.b=e,this.c=i;var n,r,o=e.x-t.x,s=e.y-t.y,a=i.x-t.x,l=i.y-t.y,u=o*(t.x+e.x)+s*(t.y+e.y),h=a*(t.x+i.x)+l*(t.y+i.y),c=2*(o*(i.y-e.y)-s*(i.x-e.x));this.x=(l*u-s*h)/c,this.y=(o*h-a*u)/c,n=this.x-t.x,r=this.y-t.y,this.r=n*n+r*r}return u(t,"Triangle"),t}();E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E();var ZF=new ArrayBuffer(16),aOe=new Float64Array(ZF),lOe=new Uint32Array(ZF);E(),E(),E(),E(),E(),E();var Ese=Bt(CP(),1);E(),E(),E(),E(),E();var vDe=function(){function t(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(e=0;e<this.length-1;e++){var i=this.points[e],n=this.points[e+1];this.centers.push({x:(i.x+n.x)/2,y:(i.y+n.y)/2,z:(i.z+n.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(e=0;e<this.centers.length-1;e++){var r=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+r),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this}return u(t,"Spline"),t.prototype.cacheSteps=function(t){var e=[],i=this.pos(0);e.push(0);for(var n=0;n<this.duration;n+=10){var r=this.pos(n);Math.sqrt((r.x-i.x)*(r.x-i.x)+(r.y-i.y)*(r.y-i.y)+(r.z-i.z)*(r.z-i.z))>t&&(e.push(n),i=r)}return e},t.prototype.vector=function(t){var e=this.pos(t+10),i=this.pos(t-10);return{angle:180*Math.atan2(e.y-i.y,e.x-i.x)/3.14,speed:Math.sqrt((i.x-e.x)*(i.x-e.x)+(i.y-e.y)*(i.y-e.y)+(i.z-e.z)*(i.z-e.z))}},t.prototype.pos=function(t){var e=t-this.delay;e<0&&(e=0),e>this.duration&&(e=this.duration-1);var i=e/this.duration;if(i>=1)return this.points[this.length-1];var n=Math.floor((this.points.length-1)*i);return Tse((this.length-1)*i-n,this.points[n],this.controls[n][1],this.controls[n+1][0],this.points[n+1])},t}();function Tse(t,e,i,n,r){var o=Sse(t);return{x:r.x*o[0]+n.x*o[1]+i.x*o[2]+e.x*o[3],y:r.y*o[0]+n.y*o[1]+i.y*o[2]+e.y*o[3],z:r.z*o[0]+n.z*o[1]+i.z*o[2]+e.z*o[3]}}function Sse(t){var e=t*t;return[e*t,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]}function w1(t,e){void 0===e&&(e={});var i=Number(t[0]),n=Number(t[1]),r=Number(t[2]),o=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[i,n];return Vi([[s,[r,n],[r,o],[i,o],s]],e.properties,{bbox:t,id:e.id})}function Ase(t){return w1(Rs(t))}u(Tse,"bezier"),u(Sse,"B"),E(),E(),E(),E(),u(w1,"bboxPolygon"),u(Ase,"envelope");var PP=Ase;function cu(t,e,i,n){void 0===n&&(n={});var r=xr(t),o=Ns(r[0]),s=Ns(r[1]),a=Ns(i),l=y1(e,n.units),u=Math.asin(Math.sin(s)*Math.cos(l)+Math.cos(s)*Math.sin(l)*Math.cos(a));return oi([ep(o+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(s),Math.cos(l)-Math.sin(s)*Math.sin(u))),ep(u)],n.properties)}function lc(t,e,i){if(void 0===i&&(i={}),!0===i.final)return Cse(t,e);var n=xr(t),r=xr(e),o=Ns(n[0]),s=Ns(r[0]),a=Ns(n[1]),l=Ns(r[1]),u=Math.sin(s-o)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(s-o);return ep(Math.atan2(u,h))}function Cse(t,e){var i=lc(e,t);return i=(i+180)%360}function Pse(t,e){void 0===e&&(e={});var i=Rs(t);return oi([(i[0]+i[2])/2,(i[1]+i[3])/2],e.properties,e)}E(),E(),E(),u(cu,"destination"),E(),E(),u(lc,"bearing"),u(Cse,"calculateFinalBearing"),E(),u(Pse,"center");var tp=Pse;E(),E(),E(),E(),E();var Ose=Bt(bK(),1);function Lse(t){if(!t)throw new Error("geojson is required");var e=[];return vo(t,(function(t){Dse(t,e)})),$t(e)}function Dse(t,e){var i=[],n=t.geometry;if(null!==n){switch(n.type){case"Polygon":i=Pi(n);break;case"LineString":i=[Pi(n)]}i.forEach((function(i){Nse(i,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}function Nse(t,e){var i=[];return t.reduce((function(t,n){var r=gr([t,n],e);return r.bbox=Rse(t,n),i.push(r),n})),i}function Rse(t,e){var i=t[0],n=t[1],r=e[0],o=e[1];return[i<r?i:r,n<o?n:o,i>r?i:r,n>o?n:o]}E(),E(),E(),E(),u(Lse,"lineSegment"),u(Dse,"lineSegmentFeature"),u(Nse,"createSegments"),u(Rse,"bbox");var np=Lse,vU=Bt(Ww(),1);function loe(t,e){var i={},n=[];if("LineString"===t.type&&(t=ms(t)),"LineString"===e.type&&(e=ms(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var r=gU(t,e);return r&&n.push(r),$t(n)}var o=(0,vU.default)();return o.load(np(e)),Ci(np(t),(function(t){Ci(o.search(t),(function(e){var r=gU(t,e);if(r){var o=Pi(r).join(",");i[o]||(i[o]=!0,n.push(r))}}))})),$t(n)}function gU(t,e){var i=Pi(t),n=Pi(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var r=i[0][0],o=i[0][1],s=i[1][0],a=i[1][1],l=n[0][0],u=n[0][1],h=n[1][0],c=n[1][1],p=(c-u)*(s-r)-(h-l)*(a-o);if(0===p)return null;var d=((h-l)*(o-u)-(c-u)*(r-l))/p,f=((s-r)*(o-u)-(a-o)*(r-l))/p;return d>=0&&d<=1&&f>=0&&f<=1?oi([r+d*(s-r),o+d*(a-o)]):null}u(loe,"lineIntersect"),u(gU,"intersects");var ip=loe;function uoe(t,e,i){void 0===i&&(i={});var n=oi([1/0,1/0],{dist:1/0}),r=0;return vo(t,(function(t){for(var o=Pi(t),s=0;s<o.length-1;s++){var a=oi(o[s]);a.properties.dist=hr(e,a,i);var l=oi(o[s+1]);l.properties.dist=hr(e,l,i);var u=hr(a,l,i),h=Math.max(a.properties.dist,l.properties.dist),c=lc(a,l),p=cu(e,h,c+90,i),d=cu(e,h,c-90,i),f=ip(gr([p.geometry.coordinates,d.geometry.coordinates]),gr([a.geometry.coordinates,l.geometry.coordinates])),g=null;f.features.length>0&&((g=f.features[0]).properties.dist=hr(e,g,i),g.properties.location=r+hr(a,g,i)),a.properties.dist<n.properties.dist&&((n=a).properties.index=s,n.properties.location=r),l.properties.dist<n.properties.dist&&((n=l).properties.index=s+1,n.properties.location=r+u),g&&g.properties.dist<n.properties.dist&&((n=g).properties.index=s),r+=u}})),n}u(uoe,"nearestPointOnLine");var uc=uoe;E(),E(),E();var hoe=Bt(Nw(),1);function rp(t,e){return void 0===e&&(e={}),AF(t,(function(t,i){var n=i.geometry.coordinates;return t+hr(n[0],n[1],e)}),0)}function foe(t,e,i){var n=Pi(i);if("LineString"!==Ma(i))throw new Error("line must be a LineString");for(var r,o=uc(i,t),s=uc(i,e),a=[(r=o.properties.index<=s.properties.index?[o,s]:[s,o])[0].geometry.coordinates],l=r[0].properties.index+1;l<r[1].properties.index+1;l++)a.push(n[l]);return a.push(r[1].geometry.coordinates),gr(a,i.properties)}E(),E(),E(),E(),E(),E(),u(rp,"length"),E(),u(foe,"lineSlice");var Xw=foe;function poe(t,e,i){void 0===i&&(i={});for(var n=xr(t),r=Pi(e),o=0;o<r.length-1;o++){var s=!1;if(i.ignoreEndVertices&&(0===o&&(s="start"),o===r.length-2&&(s="end"),0===o&&o+1===r.length-1&&(s="both")),doe(r[o],r[o+1],n,s,typeof i.epsilon>"u"?null:i.epsilon))return!0}return!1}function doe(t,e,i,n,r){var o=i[0],s=i[1],a=t[0],l=t[1],u=e[0],h=e[1],c=u-a,p=h-l,d=(i[0]-a)*p-(i[1]-l)*c;if(null!==r){if(Math.abs(d)>r)return!1}else if(0!==d)return!1;return n?"start"===n?Math.abs(c)>=Math.abs(p)?c>0?a<o&&o<=u:u<=o&&o<a:p>0?l<s&&s<=h:h<=s&&s<l:"end"===n?Math.abs(c)>=Math.abs(p)?c>0?a<=o&&o<u:u<o&&o<=a:p>0?l<=s&&s<h:h<s&&s<=l:"both"===n&&(Math.abs(c)>=Math.abs(p)?c>0?a<o&&o<u:u<o&&o<a:p>0?l<s&&s<h:h<s&&s<l):Math.abs(c)>=Math.abs(p)?c>0?a<=o&&o<=u:u<=o&&o<=a:p>0?l<=s&&s<=h:h<=s&&s<=l}E(),E(),E(),E(),u(poe,"booleanPointOnLine"),u(doe,"isPointOnLineSegment");var Hd=poe;E(),E(),E(),E();var voe=Bt(CP(),1);E();var xU=Math.PI/180,bU=180/Math.PI,E1=u((function(t,e){this.lon=t,this.lat=e,this.x=xU*t,this.y=xU*e}),"Coord");E1.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},E1.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:-1*(180-this.lon);return new E1(e,t)};var _U=u((function(){this.coords=[],this.length=0}),"LineString");_U.prototype.move_to=function(t){this.length++,this.coords.push(t)};var jP=u((function(t){this.properties=t||{},this.geometries=[]}),"Arc");jP.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},jP.prototype.wkt=function(){for(var t="",e="LINESTRING(",i=u((function(t){e+=t[0]+" "+t[1]+","}),"collect"),n=0;n<this.geometries.length;n++){if(0===this.geometries[n].coords.length)return"LINESTRING(empty)";this.geometries[n].coords.forEach(i),t+=e.substring(0,e.length-1)+")"}return t};var wU=u((function(t,e,i){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new E1(t.x,t.y),this.end=new E1(e.x,e.y),this.properties=i||{};var n=this.start.x-this.end.x,r=this.start.y-this.end.y,o=Math.pow(Math.sin(r/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(n/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)}),"GreatCircle");wU.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),i=Math.sin(t*this.g)/Math.sin(this.g),n=e*Math.cos(this.start.y)*Math.cos(this.start.x)+i*Math.cos(this.end.y)*Math.cos(this.end.x),r=e*Math.cos(this.start.y)*Math.sin(this.start.x)+i*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+i*Math.sin(this.end.y),s=bU*Math.atan2(o,Math.sqrt(Math.pow(n,2)+Math.pow(r,2)));return[bU*Math.atan2(r,n),s]},wU.prototype.Arc=function(t,e){var i=[];if(!t||t<=2)i.push([this.start.lon,this.start.lat]),i.push([this.end.lon,this.end.lat]);else for(var n=1/(t-1),r=0;r<t;++r){var o=n*r,s=this.interpolate(o);i.push(s)}for(var a=!1,l=0,u=e&&e.offset?e.offset:10,h=180-u,c=-180+u,p=360-u,d=1;d<i.length;++d){var f=i[d-1][0],g=i[d][0],m=Math.abs(g-f);m>p&&(g>h&&f<c||f>h&&g<c)?a=!0:m>l&&(l=m)}var v=[];if(a&&l<u){var y=[];v.push(y);for(var x=0;x<i.length;++x){var _=parseFloat(i[x][0]);if(x>0&&Math.abs(_-i[x-1][0])>p){var b=parseFloat(i[x-1][0]),M=parseFloat(i[x-1][1]),E=parseFloat(i[x][0]),w=parseFloat(i[x][1]);if(b>-180&&b<c&&180===E&&x+1<i.length&&i[x-1][0]>-180&&i[x-1][0]<c){y.push([-180,i[x][1]]),x++,y.push([i[x][0],i[x][1]]);continue}if(b>h&&b<180&&-180===E&&x+1<i.length&&i[x-1][0]>h&&i[x-1][0]<180){y.push([180,i[x][1]]),x++,y.push([i[x][0],i[x][1]]);continue}if(b<c&&E>h){var A=b;b=E,E=A;var S=M;M=w,w=S}if(b>h&&E<c&&(E+=360),b<=180&&E>=180&&b<E){var T=(180-b)/(E-b),C=T*w+(1-T)*M;y.push([i[x-1][0]>h?180:-180,C]),(y=[]).push([i[x-1][0]>h?-180:180,C]),v.push(y)}else y=[],v.push(y);y.push([_,i[x][1]])}else y.push([i[x][0],i[x][1]])}}else{var P=[];v.push(P);for(var I=0;I<i.length;++I)P.push([i[I][0],i[I][1]])}for(var L=new jP(this.properties),O=0;O<v.length;++O){var N=new _U;L.geometries.push(N);for(var D=v[O],R=0;R<D.length;++R)N.move_to(D[R])}return L},E();var boe=Bt(Ww(),1);E(),E(),E(),E(),E(),E();var Zae=Bt(Ww(),1),Qae=Bt(yI(),1);E(),E(),E(),E(),E(),E(),E();var $ae=Bt(Nw(),1),gn=[],vn=[],yn=[],xn=[],bn=[],_n=[],wn=[],Mn=[],En=[],Tn=[],Sn=[],An=[],Cn=[],Pn=[],In=[],On=[],Ln=[],Dn=[],Nn=[],Rn=[],Bn=[],kn=[],qn=[],Fn=[];wn[85]=Tn[85]=-1,Mn[85]=Sn[85]=0,En[85]=An[85]=1,Nn[85]=kn[85]=1,Rn[85]=qn[85]=0,Bn[85]=Fn[85]=1,gn[85]=xn[85]=0,vn[85]=bn[85]=-1,yn[85]=In[85]=0,On[85]=Cn[85]=0,Ln[85]=Pn[85]=1,_n[85]=Dn[85]=1,kn[1]=kn[169]=0,qn[1]=qn[169]=-1,Fn[1]=Fn[169]=0,Cn[1]=Cn[169]=-1,Pn[1]=Pn[169]=0,In[1]=In[169]=0,Tn[4]=Tn[166]=0,Sn[4]=Sn[166]=-1,An[4]=An[166]=1,On[4]=On[166]=1,Ln[4]=Ln[166]=0,Dn[4]=Dn[166]=0,wn[16]=wn[154]=0,Mn[16]=Mn[154]=1,En[16]=En[154]=1,xn[16]=xn[154]=1,bn[16]=bn[154]=0,_n[16]=_n[154]=1,Nn[64]=Nn[106]=0,Rn[64]=Rn[106]=1,Bn[64]=Bn[106]=0,gn[64]=gn[106]=-1,vn[64]=vn[106]=0,yn[64]=yn[106]=1,Nn[2]=Nn[168]=0,Rn[2]=Rn[168]=-1,Bn[2]=Bn[168]=1,kn[2]=kn[168]=0,qn[2]=qn[168]=-1,Fn[2]=Fn[168]=0,Cn[2]=Cn[168]=-1,Pn[2]=Pn[168]=0,In[2]=In[168]=0,On[2]=On[168]=-1,Ln[2]=Ln[168]=0,Dn[2]=Dn[168]=1,wn[8]=wn[162]=0,Mn[8]=Mn[162]=-1,En[8]=En[162]=0,Tn[8]=Tn[162]=0,Sn[8]=Sn[162]=-1,An[8]=An[162]=1,Cn[8]=Cn[162]=1,Pn[8]=Pn[162]=0,In[8]=In[162]=1,On[8]=On[162]=1,Ln[8]=Ln[162]=0,Dn[8]=Dn[162]=0,wn[32]=wn[138]=0,Mn[32]=Mn[138]=1,En[32]=En[138]=1,Tn[32]=Tn[138]=0,Sn[32]=Sn[138]=1,An[32]=An[138]=0,gn[32]=gn[138]=1,vn[32]=vn[138]=0,yn[32]=yn[138]=0,xn[32]=xn[138]=1,bn[32]=bn[138]=0,_n[32]=_n[138]=1,kn[128]=kn[42]=0,qn[128]=qn[42]=1,Fn[128]=Fn[42]=1,Nn[128]=Nn[42]=0,Rn[128]=Rn[42]=1,Bn[128]=Bn[42]=0,gn[128]=gn[42]=-1,vn[128]=vn[42]=0,yn[128]=yn[42]=1,xn[128]=xn[42]=-1,bn[128]=bn[42]=0,_n[128]=_n[42]=0,Tn[5]=Tn[165]=-1,Sn[5]=Sn[165]=0,An[5]=An[165]=0,kn[5]=kn[165]=1,qn[5]=qn[165]=0,Fn[5]=Fn[165]=0,On[20]=On[150]=0,Ln[20]=Ln[150]=1,Dn[20]=Dn[150]=1,xn[20]=xn[150]=0,bn[20]=bn[150]=-1,_n[20]=_n[150]=1,wn[80]=wn[90]=-1,Mn[80]=Mn[90]=0,En[80]=En[90]=1,Nn[80]=Nn[90]=1,Rn[80]=Rn[90]=0,Bn[80]=Bn[90]=1,Cn[65]=Cn[105]=0,Pn[65]=Pn[105]=1,In[65]=In[105]=0,gn[65]=gn[105]=0,vn[65]=vn[105]=-1,yn[65]=yn[105]=0,wn[160]=wn[10]=-1,Mn[160]=Mn[10]=0,En[160]=En[10]=1,Tn[160]=Tn[10]=-1,Sn[160]=Sn[10]=0,An[160]=An[10]=0,kn[160]=kn[10]=1,qn[160]=qn[10]=0,Fn[160]=Fn[10]=0,Nn[160]=Nn[10]=1,Rn[160]=Rn[10]=0,Bn[160]=Bn[10]=1,On[130]=On[40]=0,Ln[130]=Ln[40]=1,Dn[130]=Dn[40]=1,Cn[130]=Cn[40]=0,Pn[130]=Pn[40]=1,In[130]=In[40]=0,gn[130]=gn[40]=0,vn[130]=vn[40]=-1,yn[130]=yn[40]=0,xn[130]=xn[40]=0,bn[130]=bn[40]=-1,_n[130]=_n[40]=1,Tn[37]=Tn[133]=0,Sn[37]=Sn[133]=1,An[37]=An[133]=1,kn[37]=kn[133]=0,qn[37]=qn[133]=1,Fn[37]=Fn[133]=0,gn[37]=gn[133]=-1,vn[37]=vn[133]=0,yn[37]=yn[133]=0,xn[37]=xn[133]=1,bn[37]=bn[133]=0,_n[37]=_n[133]=0,On[148]=On[22]=-1,Ln[148]=Ln[22]=0,Dn[148]=Dn[22]=0,kn[148]=kn[22]=0,qn[148]=qn[22]=-1,Fn[148]=Fn[22]=1,Nn[148]=Nn[22]=0,Rn[148]=Rn[22]=1,Bn[148]=Bn[22]=1,xn[148]=xn[22]=-1,bn[148]=bn[22]=0,_n[148]=_n[22]=1,wn[82]=wn[88]=0,Mn[82]=Mn[88]=-1,En[82]=En[88]=1,On[82]=On[88]=1,Ln[82]=Ln[88]=0,Dn[82]=Dn[88]=1,Cn[82]=Cn[88]=-1,Pn[82]=Pn[88]=0,In[82]=In[88]=1,Nn[82]=Nn[88]=0,Rn[82]=Rn[88]=-1,Bn[82]=Bn[88]=0,wn[73]=wn[97]=0,Mn[73]=Mn[97]=1,En[73]=En[97]=0,Tn[73]=Tn[97]=0,Sn[73]=Sn[97]=-1,An[73]=An[97]=0,Cn[73]=Cn[97]=1,Pn[73]=Pn[97]=0,In[73]=In[97]=0,gn[73]=gn[97]=1,vn[73]=vn[97]=0,yn[73]=yn[97]=1,wn[145]=wn[25]=0,Mn[145]=Mn[25]=-1,En[145]=En[25]=0,Cn[145]=Cn[25]=1,Pn[145]=Pn[25]=0,In[145]=In[25]=1,kn[145]=kn[25]=0,qn[145]=qn[25]=1,Fn[145]=Fn[25]=1,xn[145]=xn[25]=-1,bn[145]=bn[25]=0,_n[145]=_n[25]=0,Tn[70]=Tn[100]=0,Sn[70]=Sn[100]=1,An[70]=An[100]=0,On[70]=On[100]=-1,Ln[70]=Ln[100]=0,Dn[70]=Dn[100]=1,Nn[70]=Nn[100]=0,Rn[70]=Rn[100]=-1,Bn[70]=Bn[100]=1,gn[70]=gn[100]=1,vn[70]=vn[100]=0,yn[70]=yn[100]=0,Tn[101]=Tn[69]=0,Sn[101]=Sn[69]=1,An[101]=An[69]=0,gn[101]=gn[69]=1,vn[101]=vn[69]=0,yn[101]=yn[69]=0,kn[149]=kn[21]=0,qn[149]=qn[21]=1,Fn[149]=Fn[21]=1,xn[149]=xn[21]=-1,bn[149]=bn[21]=0,_n[149]=_n[21]=0,On[86]=On[84]=-1,Ln[86]=Ln[84]=0,Dn[86]=Dn[84]=1,Nn[86]=Nn[84]=0,Rn[86]=Rn[84]=-1,Bn[86]=Bn[84]=1,wn[89]=wn[81]=0,Mn[89]=Mn[81]=-1,En[89]=En[81]=0,Cn[89]=Cn[81]=1,Pn[89]=Pn[81]=0,In[89]=In[81]=1,wn[96]=wn[74]=0,Mn[96]=Mn[74]=1,En[96]=En[74]=0,Tn[96]=Tn[74]=-1,Sn[96]=Sn[74]=0,An[96]=An[74]=1,Nn[96]=Nn[74]=1,Rn[96]=Rn[74]=0,Bn[96]=Bn[74]=0,gn[96]=gn[74]=1,vn[96]=vn[74]=0,yn[96]=yn[74]=1,wn[24]=wn[146]=0,Mn[24]=Mn[146]=-1,En[24]=En[146]=1,On[24]=On[146]=1,Ln[24]=Ln[146]=0,Dn[24]=Dn[146]=1,Cn[24]=Cn[146]=0,Pn[24]=Pn[146]=1,In[24]=In[146]=1,xn[24]=xn[146]=0,bn[24]=bn[146]=-1,_n[24]=_n[146]=0,Tn[6]=Tn[164]=-1,Sn[6]=Sn[164]=0,An[6]=An[164]=1,On[6]=On[164]=-1,Ln[6]=Ln[164]=0,Dn[6]=Dn[164]=0,kn[6]=kn[164]=0,qn[6]=qn[164]=-1,Fn[6]=Fn[164]=1,Nn[6]=Nn[164]=1,Rn[6]=Rn[164]=0,Bn[6]=Bn[164]=0,Cn[129]=Cn[41]=0,Pn[129]=Pn[41]=1,In[129]=In[41]=1,kn[129]=kn[41]=0,qn[129]=qn[41]=1,Fn[129]=Fn[41]=0,gn[129]=gn[41]=-1,vn[129]=vn[41]=0,yn[129]=yn[41]=0,xn[129]=xn[41]=0,bn[129]=bn[41]=-1,_n[129]=_n[41]=0,On[66]=On[104]=0,Ln[66]=Ln[104]=1,Dn[66]=Dn[104]=0,Cn[66]=Cn[104]=-1,Pn[66]=Pn[104]=0,In[66]=In[104]=1,Nn[66]=Nn[104]=0,Rn[66]=Rn[104]=-1,Bn[66]=Bn[104]=0,gn[66]=gn[104]=0,vn[66]=vn[104]=-1,yn[66]=yn[104]=1,wn[144]=wn[26]=-1,Mn[144]=Mn[26]=0,En[144]=En[26]=0,kn[144]=kn[26]=1,qn[144]=qn[26]=0,Fn[144]=Fn[26]=1,Nn[144]=Nn[26]=0,Rn[144]=Rn[26]=1,Bn[144]=Bn[26]=1,xn[144]=xn[26]=-1,bn[144]=bn[26]=0,_n[144]=_n[26]=1,Tn[36]=Tn[134]=0,Sn[36]=Sn[134]=1,An[36]=An[134]=1,On[36]=On[134]=0,Ln[36]=Ln[134]=1,Dn[36]=Dn[134]=0,gn[36]=gn[134]=0,vn[36]=vn[134]=-1,yn[36]=yn[134]=1,xn[36]=xn[134]=1,bn[36]=bn[134]=0,_n[36]=_n[134]=0,wn[9]=wn[161]=-1,Mn[9]=Mn[161]=0,En[9]=En[161]=0,Tn[9]=Tn[161]=0,Sn[9]=Sn[161]=-1,An[9]=An[161]=0,Cn[9]=Cn[161]=1,Pn[9]=Pn[161]=0,In[9]=In[161]=0,kn[9]=kn[161]=1,qn[9]=qn[161]=0,Fn[9]=Fn[161]=1,wn[136]=0,Mn[136]=1,En[136]=1,Tn[136]=0,Sn[136]=1,An[136]=0,On[136]=-1,Ln[136]=0,Dn[136]=1,Cn[136]=-1,Pn[136]=0,In[136]=0,kn[136]=0,qn[136]=-1,Fn[136]=0,Nn[136]=0,Rn[136]=-1,Bn[136]=1,gn[136]=1,vn[136]=0,yn[136]=0,xn[136]=1,bn[136]=0,_n[136]=1,wn[34]=0,Mn[34]=-1,En[34]=0,Tn[34]=0,Sn[34]=-1,An[34]=1,On[34]=1,Ln[34]=0,Dn[34]=0,Cn[34]=1,Pn[34]=0,In[34]=1,kn[34]=0,qn[34]=1,Fn[34]=1,Nn[34]=0,Rn[34]=1,Bn[34]=0,gn[34]=-1,vn[34]=0,yn[34]=1,xn[34]=-1,bn[34]=0,_n[34]=0,wn[35]=0,Mn[35]=1,En[35]=1,Tn[35]=0,Sn[35]=-1,An[35]=1,On[35]=1,Ln[35]=0,Dn[35]=0,Cn[35]=-1,Pn[35]=0,In[35]=0,kn[35]=0,qn[35]=-1,Fn[35]=0,Nn[35]=0,Rn[35]=1,Bn[35]=0,gn[35]=-1,vn[35]=0,yn[35]=1,xn[35]=1,bn[35]=0,_n[35]=1,wn[153]=0,Mn[153]=1,En[153]=1,Cn[153]=-1,Pn[153]=0,In[153]=0,kn[153]=0,qn[153]=-1,Fn[153]=0,xn[153]=1,bn[153]=0,_n[153]=1,Tn[102]=0,Sn[102]=-1,An[102]=1,On[102]=1,Ln[102]=0,Dn[102]=0,Nn[102]=0,Rn[102]=1,Bn[102]=0,gn[102]=-1,vn[102]=0,yn[102]=1,wn[155]=0,Mn[155]=-1,En[155]=0,Cn[155]=1,Pn[155]=0,In[155]=1,kn[155]=0,qn[155]=1,Fn[155]=1,xn[155]=-1,bn[155]=0,_n[155]=0,Tn[103]=0,Sn[103]=1,An[103]=0,On[103]=-1,Ln[103]=0,Dn[103]=1,Nn[103]=0,Rn[103]=-1,Bn[103]=1,gn[103]=1,vn[103]=0,yn[103]=0,wn[152]=0,Mn[152]=1,En[152]=1,On[152]=-1,Ln[152]=0,Dn[152]=1,Cn[152]=-1,Pn[152]=0,In[152]=0,kn[152]=0,qn[152]=-1,Fn[152]=0,Nn[152]=0,Rn[152]=-1,Bn[152]=1,xn[152]=1,bn[152]=0,_n[152]=1,wn[156]=0,Mn[156]=-1,En[156]=1,On[156]=1,Ln[156]=0,Dn[156]=1,Cn[156]=-1,Pn[156]=0,In[156]=0,kn[156]=0,qn[156]=-1,Fn[156]=0,Nn[156]=0,Rn[156]=1,Bn[156]=1,xn[156]=-1,bn[156]=0,_n[156]=1,wn[137]=0,Mn[137]=1,En[137]=1,Tn[137]=0,Sn[137]=1,An[137]=0,Cn[137]=-1,Pn[137]=0,In[137]=0,kn[137]=0,qn[137]=-1,Fn[137]=0,gn[137]=1,vn[137]=0,yn[137]=0,xn[137]=1,bn[137]=0,_n[137]=1,wn[139]=0,Mn[139]=1,En[139]=1,Tn[139]=0,Sn[139]=-1,An[139]=0,Cn[139]=1,Pn[139]=0,In[139]=0,kn[139]=0,qn[139]=1,Fn[139]=0,gn[139]=-1,vn[139]=0,yn[139]=0,xn[139]=1,bn[139]=0,_n[139]=1,wn[98]=0,Mn[98]=-1,En[98]=0,Tn[98]=0,Sn[98]=-1,An[98]=1,On[98]=1,Ln[98]=0,Dn[98]=0,Cn[98]=1,Pn[98]=0,In[98]=1,Nn[98]=0,Rn[98]=1,Bn[98]=0,gn[98]=-1,vn[98]=0,yn[98]=1,wn[99]=0,Mn[99]=1,En[99]=0,Tn[99]=0,Sn[99]=-1,An[99]=1,On[99]=1,Ln[99]=0,Dn[99]=0,Cn[99]=-1,Pn[99]=0,In[99]=1,Nn[99]=0,Rn[99]=-1,Bn[99]=0,gn[99]=1,vn[99]=0,yn[99]=1,Tn[38]=0,Sn[38]=-1,An[38]=1,On[38]=1,Ln[38]=0,Dn[38]=0,kn[38]=0,qn[38]=1,Fn[38]=1,Nn[38]=0,Rn[38]=1,Bn[38]=0,gn[38]=-1,vn[38]=0,yn[38]=1,xn[38]=-1,bn[38]=0,_n[38]=0,Tn[39]=0,Sn[39]=1,An[39]=1,On[39]=-1,Ln[39]=0,Dn[39]=0,kn[39]=0,qn[39]=-1,Fn[39]=1,Nn[39]=0,Rn[39]=1,Bn[39]=0,gn[39]=-1,vn[39]=0,yn[39]=1,xn[39]=1,bn[39]=0,_n[39]=0;var xI=u((function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]}),"p00"),bI=u((function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]}),"p01"),_I=u((function(t){return[[t.topright,1],[1,1],[1,t.righttop]]}),"p02"),wI=u((function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]}),"p03"),MI=u((function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]}),"p04"),EI=u((function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]}),"p05"),TI=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]}),"p06"),SI=u((function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]}),"p07"),ele=u((function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]}),"p08"),tle=u((function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]}),"p09"),nle=u((function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]}),"p10"),ile=u((function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]}),"p11"),rle=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]}),"p12"),sle=u((function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]}),"p13"),ole=u((function(){return[[0,0],[0,1],[1,1],[1,0]]}),"p14"),ale=u((function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]}),"p15"),lle=u((function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]}),"p16"),ule=u((function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]}),"p17"),cle=u((function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]}),"p18"),hle=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]}),"p19"),fle=u((function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]}),"p20"),ple=u((function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]}),"p21"),dle=u((function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]}),"p22"),mle=u((function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]}),"p23"),gle=u((function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]}),"p24"),vle=u((function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]}),"p25"),yle=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]}),"p26"),xle=u((function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]}),"p27"),ble=u((function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]}),"p28"),_le=u((function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]}),"p29"),wle=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]}),"p30"),Mle=u((function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]}),"p31"),Ele=u((function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]}),"p32"),Tle=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]}),"p33"),Sle=u((function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]}),"p34"),Ale=u((function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]}),"p35"),Cle=u((function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]}),"p36"),Ple=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]}),"p37"),Ile=u((function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]}),"p38"),Ole=u((function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]}),"p39"),Yn=[],Xn=[],Zn=[],Qn=[],Kn=[],Jn=[],$n=[],ei=[];Qn[1]=Kn[1]=18,Qn[169]=Kn[169]=18,Zn[4]=Xn[4]=12,Zn[166]=Xn[166]=12,Yn[16]=ei[16]=4,Yn[154]=ei[154]=4,Jn[64]=$n[64]=22,Jn[106]=$n[106]=22,Zn[2]=Jn[2]=17,Qn[2]=Kn[2]=18,Zn[168]=Jn[168]=17,Qn[168]=Kn[168]=18,Yn[8]=Qn[8]=9,Xn[8]=Zn[8]=12,Yn[162]=Qn[162]=9,Xn[162]=Zn[162]=12,Yn[32]=ei[32]=4,Xn[32]=$n[32]=1,Yn[138]=ei[138]=4,Xn[138]=$n[138]=1,Kn[128]=ei[128]=21,Jn[128]=$n[128]=22,Kn[42]=ei[42]=21,Jn[42]=$n[42]=22,Xn[5]=Kn[5]=14,Xn[165]=Kn[165]=14,Zn[20]=ei[20]=6,Zn[150]=ei[150]=6,Yn[80]=Jn[80]=11,Yn[90]=Jn[90]=11,Qn[65]=$n[65]=3,Qn[105]=$n[105]=3,Yn[160]=Jn[160]=11,Xn[160]=Kn[160]=14,Yn[10]=Jn[10]=11,Xn[10]=Kn[10]=14,Zn[130]=ei[130]=6,Qn[130]=$n[130]=3,Zn[40]=ei[40]=6,Qn[40]=$n[40]=3,Xn[101]=$n[101]=1,Xn[69]=$n[69]=1,Kn[149]=ei[149]=21,Kn[21]=ei[21]=21,Zn[86]=Jn[86]=17,Zn[84]=Jn[84]=17,Yn[89]=Qn[89]=9,Yn[81]=Qn[81]=9,Yn[96]=$n[96]=0,Xn[96]=Jn[96]=15,Yn[74]=$n[74]=0,Xn[74]=Jn[74]=15,Yn[24]=Zn[24]=8,Qn[24]=ei[24]=7,Yn[146]=Zn[146]=8,Qn[146]=ei[146]=7,Xn[6]=Jn[6]=15,Zn[6]=Kn[6]=16,Xn[164]=Jn[164]=15,Zn[164]=Kn[164]=16,Qn[129]=ei[129]=7,Kn[129]=$n[129]=20,Qn[41]=ei[41]=7,Kn[41]=$n[41]=20,Zn[66]=$n[66]=2,Qn[66]=Jn[66]=19,Zn[104]=$n[104]=2,Qn[104]=Jn[104]=19,Yn[144]=Kn[144]=10,Jn[144]=ei[144]=23,Yn[26]=Kn[26]=10,Jn[26]=ei[26]=23,Xn[36]=ei[36]=5,Zn[36]=$n[36]=2,Xn[134]=ei[134]=5,Zn[134]=$n[134]=2,Yn[9]=Kn[9]=10,Xn[9]=Qn[9]=13,Yn[161]=Kn[161]=10,Xn[161]=Qn[161]=13,Xn[37]=ei[37]=5,Kn[37]=$n[37]=20,Xn[133]=ei[133]=5,Kn[133]=$n[133]=20,Zn[148]=Kn[148]=16,Jn[148]=ei[148]=23,Zn[22]=Kn[22]=16,Jn[22]=ei[22]=23,Yn[82]=Zn[82]=8,Qn[82]=Jn[82]=19,Yn[88]=Zn[88]=8,Qn[88]=Jn[88]=19,Yn[73]=$n[73]=0,Xn[73]=Qn[73]=13,Yn[97]=$n[97]=0,Xn[97]=Qn[97]=13,Yn[145]=Qn[145]=9,Kn[145]=ei[145]=21,Yn[25]=Qn[25]=9,Kn[25]=ei[25]=21,Xn[70]=$n[70]=1,Zn[70]=Jn[70]=17,Xn[100]=$n[100]=1,Zn[100]=Jn[100]=17,Yn[34]=Qn[34]=9,Xn[34]=Zn[34]=12,Kn[34]=ei[34]=21,Jn[34]=$n[34]=22,Yn[136]=ei[136]=4,Xn[136]=$n[136]=1,Zn[136]=Jn[136]=17,Qn[136]=Kn[136]=18,Yn[35]=ei[35]=4,Xn[35]=Zn[35]=12,Qn[35]=Kn[35]=18,Jn[35]=$n[35]=22,Yn[153]=ei[153]=4,Qn[153]=Kn[153]=18,Xn[102]=Zn[102]=12,Jn[102]=$n[102]=22,Yn[155]=Qn[155]=9,Kn[155]=ei[155]=23,Xn[103]=$n[103]=1,Zn[103]=Jn[103]=17,Yn[152]=ei[152]=4,Zn[152]=Jn[152]=17,Qn[152]=Kn[152]=18,Yn[156]=Zn[156]=8,Qn[156]=Kn[156]=18,Jn[156]=ei[156]=23,Yn[137]=ei[137]=4,Xn[137]=$n[137]=1,Qn[137]=Kn[137]=18,Yn[139]=ei[139]=4,Xn[139]=Qn[139]=13,Kn[139]=$n[139]=20,Yn[98]=Qn[98]=9,Xn[98]=Zn[98]=12,Jn[98]=$n[98]=22,Yn[99]=$n[99]=0,Xn[99]=Zn[99]=12,Qn[99]=Jn[99]=19,Xn[38]=Zn[38]=12,Kn[38]=ei[38]=21,Jn[38]=$n[38]=22,Xn[39]=ei[39]=5,Zn[39]=Kn[39]=16,Jn[39]=$n[39]=22;var dt=[];function Dle(t){return(t>0)-(t<0)||+t}function tm(t,e,i){var n=e[0]-t[0],r=e[1]-t[1],o=i[0]-e[0];return Dle(n*(i[1]-e[1])-o*r)}function pG(t,e){var i=t.geometry.coordinates[0].map((function(t){return t[0]})),n=t.geometry.coordinates[0].map((function(t){return t[1]})),r=e.geometry.coordinates[0].map((function(t){return t[0]})),o=e.geometry.coordinates[0].map((function(t){return t[1]}));return Math.max.apply(null,i)===Math.max.apply(null,r)&&Math.max.apply(null,n)===Math.max.apply(null,o)&&Math.min.apply(null,i)===Math.min.apply(null,r)&&Math.min.apply(null,n)===Math.min.apply(null,o)}function AI(t,e){return e.geometry.coordinates[0].every((function(e){return Bs(oi(e),t)}))}function dG(t,e){return t[0]===e[0]&&t[1]===e[1]}dt[1]=dt[169]=xI,dt[4]=dt[166]=bI,dt[16]=dt[154]=_I,dt[64]=dt[106]=wI,dt[168]=dt[2]=MI,dt[162]=dt[8]=EI,dt[138]=dt[32]=TI,dt[42]=dt[128]=SI,dt[5]=dt[165]=ele,dt[20]=dt[150]=tle,dt[80]=dt[90]=nle,dt[65]=dt[105]=ile,dt[160]=dt[10]=rle,dt[130]=dt[40]=sle,dt[85]=ole,dt[101]=dt[69]=ale,dt[149]=dt[21]=lle,dt[86]=dt[84]=ule,dt[89]=dt[81]=cle,dt[96]=dt[74]=hle,dt[24]=dt[146]=fle,dt[6]=dt[164]=ple,dt[129]=dt[41]=dle,dt[66]=dt[104]=mle,dt[144]=dt[26]=gle,dt[36]=dt[134]=vle,dt[9]=dt[161]=yle,dt[37]=dt[133]=xle,dt[148]=dt[22]=ble,dt[82]=dt[88]=_le,dt[73]=dt[97]=wle,dt[145]=dt[25]=Mle,dt[70]=dt[100]=Ele,dt[34]=function(t){return[SI(t),EI(t)]},dt[35]=Tle,dt[136]=function(t){return[TI(t),MI(t)]},dt[153]=function(t){return[_I(t),xI(t)]},dt[102]=function(t){return[bI(t),wI(t)]},dt[155]=Sle,dt[103]=Ale,dt[152]=function(t){return[_I(t),MI(t)]},dt[156]=Cle,dt[137]=function(t){return[TI(t),xI(t)]},dt[139]=Ple,dt[98]=function(t){return[EI(t),wI(t)]},dt[99]=Ile,dt[38]=function(t){return[bI(t),SI(t)]},dt[39]=Ole,E(),E(),E(),E(),E(),E(),E(),E(),u(Dle,"mathSign"),u(tm,"orientationIndex"),u(pG,"envelopeIsEqual"),u(AI,"envelopeContains"),u(dG,"coordinatesEqual");var Nle=function(){function t(e){this.id=t.buildId(e),this.coordinates=e,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1}return u(t,"Node"),t.buildId=function(t){return t.join(",")},t.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter((function(e){return e.from.id!==t.from.id}))},t.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter((function(e){return e.to.id!==t.to.id}))},t.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},t.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort((function(e,i){var n=e.to,r=i.to;if(n.coordinates[0]-t.coordinates[0]>=0&&r.coordinates[0]-t.coordinates[0]<0)return 1;if(n.coordinates[0]-t.coordinates[0]<0&&r.coordinates[0]-t.coordinates[0]>=0)return-1;if(n.coordinates[0]-t.coordinates[0]==0&&r.coordinates[0]-t.coordinates[0]==0)return n.coordinates[1]-t.coordinates[1]>=0||r.coordinates[1]-t.coordinates[1]>=0?n.coordinates[1]-r.coordinates[1]:r.coordinates[1]-n.coordinates[1];var o=tm(t.coordinates,n.coordinates,r.coordinates);return o<0?1:o>0?-1:Math.pow(n.coordinates[0]-t.coordinates[0],2)+Math.pow(n.coordinates[1]-t.coordinates[1],2)-(Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2))})),this.outerEdgesSorted=!0)},t.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},t.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},t.prototype.addInnerEdge=function(t){this.innerEdges.push(t)},t}(),CI=Nle;E();var Rle=function(){function t(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)}return u(t,"Edge"),t.prototype.getSymetric=function(){return this.symetric||(this.symetric=new t(this.to,this.from),this.symetric.symetric=this),this.symetric},t.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},t.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},t.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},t.prototype.toLineString=function(){return gr([this.from.coordinates,this.to.coordinates])},t.prototype.compareTo=function(t){return tm(t.from.coordinates,t.to.coordinates,this.to.coordinates)},t}(),mG=Rle;E();var Ble=function(){function t(){this.edges=[],this.polygon=void 0,this.envelope=void 0}return u(t,"EdgeRing"),t.prototype.push=function(t){this.edges.push(t),this.polygon=this.envelope=void 0},t.prototype.get=function(t){return this.edges[t]},Object.defineProperty(t.prototype,"length",{get:function(){return this.edges.length},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.edges.forEach(t)},t.prototype.map=function(t){return this.edges.map(t)},t.prototype.some=function(t){return this.edges.some(t)},t.prototype.isValid=function(){return!0},t.prototype.isHole=function(){var t=this,e=this.edges.reduce((function(e,i,n){return i.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=n),e}),0),i=(0===e?this.length:e)-1,n=(e+1)%this.length,r=tm(this.edges[i].from.coordinates,this.edges[e].from.coordinates,this.edges[n].from.coordinates);return 0===r?this.edges[i].from.coordinates[0]>this.edges[n].from.coordinates[0]:r>0},t.prototype.toMultiPoint=function(){return fP(this.edges.map((function(t){return t.from.coordinates})))},t.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map((function(t){return t.from.coordinates}));return t.push(this.edges[0].from.coordinates),this.polygon=Vi([t])},t.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=PP(this.toPolygon())},t.findEdgeRingContaining=function(t,e){var i,n,r=t.getEnvelope();return e.forEach((function(e){var o=e.getEnvelope();if(n&&(i=n.getEnvelope()),!pG(o,r)&&AI(o,r)){for(var s=t.map((function(t){return t.from.coordinates})),a=void 0,l=u((function(t){e.some((function(e){return dG(t,e.from.coordinates)}))||(a=t)}),"_loop_1"),h=0,c=s;h<c.length;h++){l(c[h])}a&&e.inside(oi(a))&&(!n||AI(i,o))&&(n=e)}})),n},t.prototype.inside=function(t){return Bs(t,this.toPolygon())},t}(),PI=Ble;function kle(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}u(kle,"validateGeoJson");var CFe=function(){function t(){this.edges=[],this.nodes={}}return u(t,"Graph"),t.fromGeoJson=function(e){kle(e);var i=new t;return vo(e,(function(t){mP(t,"LineString","Graph::fromGeoJson"),SF(t,(function(t,e){if(t){var n=i.getNode(t),r=i.getNode(e);i.addEdge(n,r)}return e}))})),i},t.prototype.getNode=function(t){var e=CI.buildId(t),i=this.nodes[e];return i||(i=this.nodes[e]=new CI(t)),i},t.prototype.addEdge=function(t,e){var i=new mG(t,e),n=i.getSymetric();this.edges.push(i),this.edges.push(n)},t.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map((function(e){return t.nodes[e]})).forEach((function(e){return t._removeIfDangle(e)}))},t.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var i=t.getOuterEdges().map((function(t){return t.to}));this.removeNode(t),i.forEach((function(t){return e._removeIfDangle(t)}))}},t.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach((function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))}))},t.prototype._computeNextCWEdges=function(t){var e=this;typeof t>"u"?Object.keys(this.nodes).forEach((function(t){return e._computeNextCWEdges(e.nodes[t])})):t.getOuterEdges().forEach((function(e,i){t.getOuterEdge((0===i?t.getOuterEdges().length:i)-1).symetric.next=e}))},t.prototype._computeNextCCWEdges=function(t,e){for(var i,n,r=t.getOuterEdges(),o=r.length-1;o>=0;--o){var s=r[o],a=s.symetric,l=void 0,u=void 0;s.label===e&&(l=s),a.label===e&&(u=a),l&&u&&(u&&(n=u),l&&(n&&(n.next=l,n=void 0),i||(i=l)))}n&&(n.next=i)},t.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach((function(i){if(!(i.label>=0)){t.push(i);var n=i;do{n.label=e,n=n.next}while(!i.isEqual(n));e++}})),t},t.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach((function(t){t.label=void 0})),this._findLabeledEdgeRings().forEach((function(e){t._findIntersectionNodes(e).forEach((function(i){t._computeNextCCWEdges(i,e.label)}))}));var e=[];return this.edges.forEach((function(i){i.ring||e.push(t._findEdgeRing(i))})),e},t.prototype._findIntersectionNodes=function(t){var e=[],i=t,n=u((function(){var n=0;i.from.getOuterEdges().forEach((function(e){e.label===t.label&&++n})),n>1&&e.push(i.from),i=i.next}),"_loop_1");do{n()}while(!t.isEqual(i));return e},t.prototype._findEdgeRing=function(t){var e=t,i=new PI;do{i.push(e),e.ring=i,e=e.next}while(!t.isEqual(e));return i},t.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach((function(t){return e.removeEdge(t)})),t.innerEdges.forEach((function(t){return e.removeEdge(t)})),delete this.nodes[t.id]},t.prototype.removeEdge=function(t){this.edges=this.edges.filter((function(e){return!e.isEqual(t)})),t.deleteEdge()},t}();E(),E(),E(),E();var zle=Bt(II(),1);E();var Gle=Bt(II(),1);E(),E();var Hle=Bt(EG(),1);E();var Kle=Bt(NG(),1);function BG(t){for(var e=t,i=[];e.parent;)i.unshift(e),e=e.parent;return i}function $le(){return new kG((function(t){return t.f}))}E(),E(),u(BG,"pathTo"),u($le,"getHeap");var NI={search:function(t,e,i,n){t.cleanDirty();var r=(n=n||{}).heuristic||NI.heuristics.manhattan,o=n.closest||!1,s=$le(),a=e;for(e.h=r(e,i),s.push(e);s.size()>0;){var l=s.pop();if(l===i)return BG(l);l.closed=!0;for(var u=t.neighbors(l),h=0,c=u.length;h<c;++h){var p=u[h];if(!p.closed&&!p.isWall()){var d=l.g+p.getCost(l),f=p.visited;(!f||d<p.g)&&(p.visited=!0,p.parent=l,p.h=p.h||r(p,i),p.g=d,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),f?s.rescoreElement(p):s.push(p))}}}return o?BG(a):[]},heuristics:{manhattan:function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},diagonal:function(t,e){var i=Math.sqrt(2),n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return 1*(n+r)+(i-2)*Math.min(n,r)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};function L1(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var i=0;i<t.length;i++){this.grid[i]=[];for(var n=0,r=t[i];n<r.length;n++){var o=new dM(i,n,r[n]);this.grid[i][n]=o,this.nodes.push(o)}}this.init()}function dM(t,e,i){this.x=t,this.y=e,this.weight=i}function kG(t){this.content=[],this.scoreFunction=t}function RI(){this._=null}function im(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function D1(t,e){var i=e,n=e.R,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function N1(t,e){var i=e,n=e.L,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function qG(t){for(;t.L;)t=t.L;return t}u(L1,"Graph"),L1.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)NI.cleanNode(this.nodes[t])},L1.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)NI.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},L1.prototype.markDirty=function(t){this.dirtyNodes.push(t)},L1.prototype.neighbors=function(t){var e=[],i=t.x,n=t.y,r=this.grid;return r[i-1]&&r[i-1][n]&&e.push(r[i-1][n]),r[i+1]&&r[i+1][n]&&e.push(r[i+1][n]),r[i]&&r[i][n-1]&&e.push(r[i][n-1]),r[i]&&r[i][n+1]&&e.push(r[i][n+1]),this.diagonal&&(r[i-1]&&r[i-1][n-1]&&e.push(r[i-1][n-1]),r[i+1]&&r[i+1][n-1]&&e.push(r[i+1][n-1]),r[i-1]&&r[i-1][n+1]&&e.push(r[i-1][n+1]),r[i+1]&&r[i+1][n+1]&&e.push(r[i+1][n+1])),e},L1.prototype.toString=function(){for(var t,e,i,n,r=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],i=0,n=(e=o[s]).length;i<n;i++)t.push(e[i].weight);r.push(t.join(" "))}return r.join("\n")},u(dM,"GridNode"),dM.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},dM.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},dM.prototype.isWall=function(){return 0===this.weight},u(kG,"BinaryHeap"),kG.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),i=this.content.pop();e!==this.content.length-1&&(this.content[e]=i,this.scoreFunction(i)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var i=(t+1>>1)-1,n=this.content[i];if(!(this.scoreFunction(e)<this.scoreFunction(n)))break;this.content[i]=e,this.content[t]=n,t=i}},bubbleUp:function(t){for(var e=this.content.length,i=this.content[t],n=this.scoreFunction(i);;){var r,o=t+1<<1,s=o-1,a=null;if(s<e){var l=this.content[s];(r=this.scoreFunction(l))<n&&(a=s)}if(o<e){var u=this.content[o];this.scoreFunction(u)<(null===a?n:r)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=i,t=a}}},E(),E(),E(),E(),E(),E(),E(),E(),u(RI,"RedBlackTree"),u(im,"RedBlackNode"),RI.prototype={constructor:RI,insert:function(t,e){var i,n,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=qG(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(n=i.U).L?(r=n.R)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.R&&(D1(this,i),i=(t=i).U),i.C=!1,n.C=!0,N1(this,n)):(r=n.L)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.L&&(N1(this,i),i=(t=i).U),i.C=!1,n.C=!0,D1(this,n)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,r=t.U,o=t.L,s=t.R;if(i=o?s?qG(s):o:s,r?r.L===t?r.L=i:r.R=i:this._=i,o&&s?(n=i.C,i.C=t.C,i.L=o,o.U=i,i!==s?(r=i.U,i.U=t.U,t=i.R,r.L=t,i.R=s,s.U=i):(i.U=r,r=i,t=i.R)):(n=t.C,t=i),t&&(t.U=r),!n){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,D1(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){(!e.R||!e.R.C)&&(e.L.C=!1,e.C=!0,N1(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,D1(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,N1(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){(!e.L||!e.L.C)&&(e.R.C=!1,e.C=!0,D1(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,N1(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}},u(D1,"RedBlackRotateLeft"),u(N1,"RedBlackRotateRight"),u(qG,"RedBlackFirst");var BI=RI;function rm(t,e,i,n){var r=[null,null],o=ks.push(r)-1;return r.left=t,r.right=e,i&&R1(r,t,e,i),n&&R1(r,e,t,n),qo[t.index].halfedges.push(o),qo[e.index].halfedges.push(o),r}function sm(t,e,i){var n=[e,i];return n.left=t,n}function R1(t,e,i,n){t[0]||t[1]?t.left===i?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=i)}function eue(t,e,i,n,r){var o,s=t[0],a=t[1],l=s[0],u=s[1],h=0,c=1,p=a[0]-l,d=a[1]-u;if(o=e-l,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<c&&(c=o)}else if(p>0){if(o>c)return;o>h&&(h=o)}if(o=n-l,p||!(o<0)){if(o/=p,p<0){if(o>c)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<c&&(c=o)}if(o=i-u,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>h&&(h=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<c&&(c=o)}return!(h>0)&&!(c<1)||(h>0&&(t[0]=[l+h*p,u+h*d]),c<1&&(t[1]=[l+c*p,u+c*d])),!0}}}}}function tue(t,e,i,n,r){var o=t[1];if(o)return!0;var s,a,l=t[0],u=t.left,h=t.right,c=u[0],p=u[1],d=h[0],f=h[1],g=(c+d)/2,m=(p+f)/2;if(f===p){if(g<e||g>=n)return;if(c>d){if(l){if(l[1]>=r)return}else l=[g,i];o=[g,r]}else{if(l){if(l[1]<i)return}else l=[g,r];o=[g,i]}}else if(a=m-(s=(c-d)/(f-p))*g,s<-1||s>1)if(c>d){if(l){if(l[1]>=r)return}else l=[(i-a)/s,i];o=[(r-a)/s,r]}else{if(l){if(l[1]<i)return}else l=[(r-a)/s,r];o=[(i-a)/s,i]}else if(p<f){if(l){if(l[0]>=n)return}else l=[e,s*e+a];o=[n,s*n+a]}else{if(l){if(l[0]<e)return}else l=[n,s*n+a];o=[e,s*e+a]}return t[0]=l,t[1]=o,!0}function FG(t,e,i,n){for(var r,o=ks.length;o--;)tue(r=ks[o],t,e,i,n)&&eue(r,t,e,i,n)&&(Math.abs(r[0][0]-r[1][0])>Ii||Math.abs(r[0][1]-r[1][1])>Ii)||delete ks[o]}function UG(t){return qo[t.index]={site:t,halfedges:[]}}function nue(t,e){var i=t.site,n=e.left,r=e.right;return i===r&&(r=n,n=i),r?Math.atan2(r[1]-n[1],r[0]-n[0]):(i===n?(n=e[1],r=e[0]):(n=e[0],r=e[1]),Math.atan2(n[0]-r[0],r[1]-n[1]))}function kI(t,e){return e[+(e.left!==t.site)]}function iue(t,e){return e[+(e.left===t.site)]}function zG(){for(var t,e,i,n,r=0,o=qo.length;r<o;++r)if((t=qo[r])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(i=0;i<n;++i)s[i]=i,a[i]=nue(t,ks[e[i]]);for(s.sort((function(t,e){return a[e]-a[t]})),i=0;i<n;++i)a[i]=e[s[i]];for(i=0;i<n;++i)e[i]=a[i]}}function GG(t,e,i,n){var r,o,s,a,l,u,h,c,p,d,f,g,m=qo.length,v=!0;for(r=0;r<m;++r)if(o=qo[r]){for(s=o.site,a=(l=o.halfedges).length;a--;)ks[l[a]]||l.splice(a,1);for(a=0,u=l.length;a<u;)f=(d=iue(o,ks[l[a]]))[0],g=d[1],c=(h=kI(o,ks[l[++a%u]]))[0],p=h[1],(Math.abs(f-c)>Ii||Math.abs(g-p)>Ii)&&(l.splice(a,0,ks.push(sm(s,d,Math.abs(f-t)<Ii&&n-g>Ii?[t,Math.abs(c-t)<Ii?p:n]:Math.abs(g-n)<Ii&&i-f>Ii?[Math.abs(p-n)<Ii?c:i,n]:Math.abs(f-i)<Ii&&g-e>Ii?[i,Math.abs(c-i)<Ii?p:e]:Math.abs(g-e)<Ii&&f-t>Ii?[Math.abs(p-e)<Ii?c:t,e]:null))-1),++u);u&&(v=!1)}if(v){var y,x,_,b=1/0;for(r=0,v=null;r<m;++r)(o=qo[r])&&((_=(y=(s=o.site)[0]-t)*y+(x=s[1]-e)*x)<b&&(b=_,v=o));if(v){var M=[t,e],E=[t,n],w=[i,n],A=[i,e];v.halfedges.push(ks.push(sm(s=v.site,M,E))-1,ks.push(sm(s,E,w))-1,ks.push(sm(s,w,A))-1,ks.push(sm(s,A,M))-1)}}for(r=0;r<m;++r)(o=qo[r])&&(o.halfedges.length||delete qo[r])}E(),E(),u(rm,"createEdge"),u(sm,"createBorderEdge"),u(R1,"setEdgeEnd"),u(eue,"clipEdge"),u(tue,"connectEdge"),u(FG,"clipEdges"),u(UG,"createCell"),u(nue,"cellHalfedgeAngle"),u(kI,"cellHalfedgeStart"),u(iue,"cellHalfedgeEnd"),u(zG,"sortCellHalfedges"),u(GG,"clipCells"),E();var mM,VG=[];function rue(){im(this),this.x=this.y=this.arc=this.site=this.cy=null}function lp(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,r=t.site,o=i.site;if(n!==o){var s=r[0],a=r[1],l=n[0]-s,u=n[1]-a,h=o[0]-s,c=o[1]-a,p=2*(l*c-u*h);if(!(p>=-HG)){var d=l*l+u*u,f=h*h+c*c,g=(c*d-u*f)/p,m=(l*f-h*d)/p,v=VG.pop()||new rue;v.arc=t,v.site=r,v.x=g+s,v.y=(v.cy=m+a)+Math.sqrt(g*g+m*m),t.circle=v;for(var y=null,x=om._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}om.insert(y,v),y||(mM=v)}}}}function up(t){var e=t.circle;e&&(e.P||(mM=e.N),om.remove(e),VG.push(e),im(e),t.circle=null)}u(rue,"Circle"),u(lp,"attachCircle"),u(up,"detachCircle");var WG=[];function sue(){im(this),this.edge=this.site=this.circle=null}function jG(t){var e=WG.pop()||new sue;return e.site=t,e}function qI(t){up(t),cp.remove(t),WG.push(t),im(t)}function YG(t){var e=t.circle,i=e.x,n=e.cy,r=[i,n],o=t.P,s=t.N,a=[t];qI(t);for(var l=o;l.circle&&Math.abs(i-l.circle.x)<Ii&&Math.abs(n-l.circle.cy)<Ii;)o=l.P,a.unshift(l),qI(l),l=o;a.unshift(l),up(l);for(var u=s;u.circle&&Math.abs(i-u.circle.x)<Ii&&Math.abs(n-u.circle.cy)<Ii;)s=u.N,a.push(u),qI(u),u=s;a.push(u),up(u);var h,c=a.length;for(h=1;h<c;++h)u=a[h],l=a[h-1],R1(u.edge,l.site,u.site,r);l=a[0],(u=a[c-1]).edge=rm(l.site,u.site,null,r),lp(l),lp(u)}function XG(t){for(var e,i,n,r,o=t[0],s=t[1],a=cp._;a;)if((n=ZG(a,s)-o)>Ii)a=a.L;else{if(!((r=o-oue(a,s))>Ii)){n>-Ii?(e=a.P,i=a):r>-Ii?(e=a,i=a.N):e=i=a;break}if(!a.R){e=a;break}a=a.R}UG(t);var l=jG(t);if(cp.insert(e,l),e||i){if(e===i)return up(e),i=jG(e.site),cp.insert(l,i),l.edge=i.edge=rm(e.site,l.site),lp(e),void lp(i);if(!i)return void(l.edge=rm(e.site,l.site));up(e),up(i);var u=e.site,h=u[0],c=u[1],p=t[0]-h,d=t[1]-c,f=i.site,g=f[0]-h,m=f[1]-c,v=2*(p*m-d*g),y=p*p+d*d,x=g*g+m*m,_=[(m*y-d*x)/v+h,(p*x-g*y)/v+c];R1(i.edge,u,f,_),l.edge=rm(u,t,null,_),i.edge=rm(t,f,null,_),lp(e),lp(i)}}function ZG(t,e){var i=t.site,n=i[0],r=i[1],o=r-e;if(!o)return n;var s=t.P;if(!s)return-1/0;var a=(i=s.site)[0],l=i[1],u=l-e;if(!u)return a;var h=a-n,c=1/o-1/u,p=h/u;return c?(-p+Math.sqrt(p*p-2*c*(h*h/(-2*u)-l+u/2+r-o/2)))/c+n:(n+a)/2}function oue(t,e){var i=t.N;if(i)return ZG(i,e);var n=t.site;return n[1]===e?n[0]:1/0}u(sue,"Beach"),u(jG,"createBeach"),u(qI,"detachBeach"),u(YG,"removeBeach"),u(XG,"addBeach"),u(ZG,"leftBreakPoint"),u(oue,"rightBreakPoint");var cp,qo,om,ks,Ii=1e-6,HG=1e-12;function aue(t,e,i){return(t[0]-i[0])*(e[1]-t[1])-(t[0]-e[0])*(i[1]-t[1])}function lue(t,e){return e[1]-t[1]||e[0]-t[0]}function gM(t,e){var i,n,r,o=t.sort(lue).pop();for(ks=[],qo=new Array(t.length),cp=new BI,om=new BI;;)if(r=mM,o&&(!r||o[1]<r.y||o[1]===r.y&&o[0]<r.x))(o[0]!==i||o[1]!==n)&&(XG(o),i=o[0],n=o[1]),o=t.pop();else{if(!r)break;YG(r.arc)}if(zG(),e){var s=+e[0][0],a=+e[0][1],l=+e[1][0],u=+e[1][1];FG(s,a,l,u),GG(s,a,l,u)}this.edges=ks,this.cells=qo,cp=om=ks=qo=null}u(aue,"triangleArea"),u(lue,"lexicographic"),u(gM,"Diagram"),gM.prototype={constructor:gM,polygons:function(){var t=this.edges;return this.cells.map((function(e){var i=e.halfedges.map((function(i){return kI(e,t[i])}));return i.data=e.site.data,i}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(i,n){if(o=(r=i.halfedges).length)for(var r,o,s,a=i.site,l=-1,u=e[r[o-1]],h=u.left===a?u.right:u.left;++l<o;)s=h,h=(u=e[r[l]]).left===a?u.right:u.left,s&&h&&n<s.index&&n<h.index&&aue(a,s,h)<0&&t.push([a.data,s.data,h.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,i){for(var n,r,o=this,s=o._found||0,a=o.cells.length;!(r=o.cells[s]);)if(++s>=a)return null;var l=t-r.site[0],u=e-r.site[1],h=l*l+u*u;do{r=o.cells[n=s],s=null,r.halfedges.forEach((function(i){var n=o.edges[i],a=n.left;if(a!==r.site&&a||(a=n.right)){var l=t-a[0],u=e-a[1],c=l*l+u*u;c<h&&(h=c,s=a.index)}}))}while(null!==s);return o._found=n,null==i||h<=i*i?r.site:null}},E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E(),E();var gue=Bt(am(),1);E();var pm=Bt($G(),1);function Fo(){return new xM}function xM(){this.reset()}E(),E(),E(),u(Fo,"default"),u(xM,"Adder"),xM.prototype={constructor:xM,reset:function(){this.s=this.t=0},add:function(t){eV(yM,t,this.t),eV(this,yM.s,this.s),this.s?this.t+=yM.t:this.s=yM.t},valueOf:function(){return this.s}};var yM=new xM;function eV(t,e,i){var n=t.s=e+i,r=n-e,o=n-r;t.t=e-o+(i-r)}u(eV,"add"),E();var jt=1e-6,Un=Math.PI,vs=Un/2,bM=Un/4,io=2*Un,Uo=180/Un,br=Un/180,vi=Math.abs,Cl=Math.atan,qs=Math.atan2,Gt=Math.cos,_M=Math.exp,B1=Math.log,Vt=Math.sin,is=Math.sqrt,k1=Math.tan;function wM(t){return t>1?0:t<-1?Un:Math.acos(t)}function ys(t){return t>1?vs:t<-1?-vs:Math.asin(t)}function zo(){}function MM(t,e){t&&nV.hasOwnProperty(t.type)&&nV[t.type](t,e)}u(wM,"acos"),u(ys,"asin"),E(),u(zo,"noop"),E(),u(MM,"streamGeometry");var tV={Feature:function(t,e){MM(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,r=i.length;++n<r;)MM(i[n].geometry,e)}},nV={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)t=i[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){zI(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)zI(i[n],e,0)},Polygon:function(t,e){iV(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,n=-1,r=i.length;++n<r;)iV(i[n],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,r=i.length;++n<r;)MM(i[n],e)}};function zI(t,e,i){var n,r=-1,o=t.length-i;for(e.lineStart();++r<o;)n=t[r],e.point(n[0],n[1],n[2]);e.lineEnd()}function iV(t,e){var i=-1,n=t.length;for(e.polygonStart();++i<n;)zI(t[i],e,1);e.polygonEnd()}function hc(t,e){t&&tV.hasOwnProperty(t.type)?tV[t.type](t,e):MM(t,e)}u(zI,"streamLine"),u(iV,"streamPolygon"),u(hc,"default");var vue=Fo(),fHe=Fo();function lm(t){return[qs(t[1],t[0]),ys(t[2])]}function Pl(t){var e=t[0],i=t[1],n=Gt(i);return[n*Gt(e),n*Vt(e),Vt(i)]}function q1(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function hp(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function EM(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function F1(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function um(t){var e=is(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}E(),E(),u(lm,"spherical"),u(Pl,"cartesian"),u(q1,"cartesianDot"),u(hp,"cartesianCross"),u(EM,"cartesianAddInPlace"),u(F1,"cartesianScale"),u(um,"cartesianNormalizeInPlace");var SHe=Fo();function U1(t,e){function i(i,n){return i=t(i,n),e(i[0],i[1])}return u(i,"compose"),t.invert&&e.invert&&(i.invert=function(i,n){return(i=e.invert(i,n))&&t.invert(i[0],i[1])}),i}function GI(t,e){return[t>Un?t-io:t<-Un?t+io:t,e]}function VI(t,e,i){return(t%=io)?e||i?U1(sV(t),oV(e,i)):sV(t):e||i?oV(e,i):GI}function rV(t){return function(e,i){return[(e+=t)>Un?e-io:e<-Un?e+io:e,i]}}function sV(t){var e=rV(t);return e.invert=rV(-t),e}function oV(t,e){var i=Gt(t),n=Vt(t),r=Gt(e),o=Vt(e);function s(t,e){var s=Gt(e),a=Gt(t)*s,l=Vt(t)*s,u=Vt(e),h=u*i+a*n;return[qs(l*r-h*o,a*i-u*n),ys(h*r+l*o)]}return u(s,"rotation"),s.invert=function(t,e){var s=Gt(e),a=Gt(t)*s,l=Vt(t)*s,u=Vt(e),h=u*r-l*o;return[qs(l*r+u*o,a*i+h*n),ys(h*i-a*n)]},s}function lV(t,e,i,n,r,o){if(i){var s=Gt(e),a=Vt(e),l=n*i;null==r?(r=e+n*io,o=e-l/2):(r=aV(s,r),o=aV(s,o),(n>0?r<o:r>o)&&(r+=n*io));for(var u,h=r;n>0?h>o:h<o;h-=l)u=lm([s,-a*Gt(h),-a*Vt(h)]),t.point(u[0],u[1])}}function aV(t,e){(e=Pl(e))[0]-=t,um(e);var i=wM(-e[1]);return((-e[2]<0?-i:i)+io-jt)%io}function z1(){var t,e=[];return{point:function(e,i){t.push([e,i])},lineStart:function(){e.push(t=[])},lineEnd:zo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}}function HI(t,e,i,n,r,o){var s,a=t[0],l=t[1],u=0,h=1,c=e[0]-a,p=e[1]-l;if(s=i-a,c||!(s>0)){if(s/=c,c<0){if(s<u)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>u&&(u=s)}if(s=r-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>u&&(u=s)}else if(c>0){if(s<u)return;s<h&&(h=s)}if(s=n-l,p||!(s>0)){if(s/=p,p<0){if(s<u)return;s<h&&(h=s)}else if(p>0){if(s>h)return;s>u&&(u=s)}if(s=o-l,p||!(s<0)){if(s/=p,p<0){if(s>h)return;s>u&&(u=s)}else if(p>0){if(s<u)return;s<h&&(h=s)}return u>0&&(t[0]=a+u*c,t[1]=l+u*p),h<1&&(e[0]=a+h*c,e[1]=l+h*p),!0}}}}}function fp(t,e){return vi(t[0]-e[0])<jt&&vi(t[1]-e[1])<jt}function TM(t,e,i,n){this.x=t,this.z=e,this.o=i,this.e=n,this.v=!1,this.n=this.p=null}function G1(t,e,i,n,r){var o,s,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,i,n=t[0],s=t[e];if(fp(n,s)){for(r.lineStart(),o=0;o<e;++o)r.point((n=t[o])[0],n[1]);return void r.lineEnd()}a.push(i=new TM(n,t,null,!0)),l.push(i.o=new TM(n,null,i,!1)),a.push(i=new TM(s,t,null,!1)),l.push(i.o=new TM(s,null,i,!0))}})),a.length){for(l.sort(e),uV(a),uV(l),o=0,s=l.length;o<s;++o)l[o].e=i=!i;for(var u,h,c=a[0];;){for(var p=c,d=!0;p.v;)if((p=p.n)===c)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(o=0,s=u.length;o<s;++o)r.point((h=u[o])[0],h[1]);else n(p.x,p.n.x,1,r);p=p.n}else{if(d)for(u=p.p.z,o=u.length-1;o>=0;--o)r.point((h=u[o])[0],h[1]);else n(p.x,p.p.x,-1,r);p=p.p}u=(p=p.o).z,d=!d}while(!p.v);r.lineEnd()}}}function uV(t){if(e=t.length){for(var e,i,n=0,r=t[0];++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function fc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function SM(t){return 1===t.length&&(t=yue(t)),{left:function(e,i,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;t(e[o],i)<0?n=o+1:r=o}return n},right:function(e,i,n,r){for(null==n&&(n=0),null==r&&(r=e.length);n<r;){var o=n+r>>>1;t(e[o],i)>0?r=o:n=o+1}return n}}}function yue(t){return function(e,i){return fc(t(e),i)}}E(),E(),E(),E(),E(),u(U1,"default"),u(GI,"rotationIdentity"),GI.invert=GI,u(VI,"rotateRadians"),u(rV,"forwardRotationLambda"),u(sV,"rotationLambda"),u(oV,"rotationPhiGamma"),u(lV,"circleStream"),u(aV,"circleRadius"),E(),E(),u(z1,"default"),E(),u(HI,"default"),E(),E(),u(fp,"default"),u(TM,"Intersection"),u(G1,"default"),u(uV,"link"),E(),E(),E(),u(fc,"default"),E(),u(SM,"default"),u(yue,"ascendingComparator");var cV=SM(fc),xue=cV.right,bue=cV.left;E(),E(),E(),E(),E(),E(),E(),E(),E();var hV=Array.prototype,wue=hV.slice,Mue=hV.map;E(),E(),E(),E();var cWe=Math.sqrt(50),hWe=Math.sqrt(10),fWe=Math.sqrt(2);function cm(t){for(var e,i,n,r=t.length,o=-1,s=0;++o<r;)s+=t[o].length;for(i=new Array(s);--r>=0;)for(e=(n=t[r]).length;--e>=0;)i[--s]=n[e];return i}E(),E(),E(),E(),E(),E(),E(),E(),u(cm,"default"),E(),E(),E(),E(),E(),E(),E();var V1=1e9,CM=-V1;function jI(t,e,i,n){function r(r,o){return t<=r&&r<=i&&e<=o&&o<=n}function o(r,o,a,u){var h=0,c=0;if(null==r||(h=s(r,a))!==(c=s(o,a))||l(r,o)<0^a>0)do{u.point(0===h||3===h?t:i,h>1?n:e)}while((h=(h+a+4)%4)!==c);else u.point(o[0],o[1])}function s(n,r){return vi(n[0]-t)<jt?r>0?0:3:vi(n[0]-i)<jt?r>0?2:1:vi(n[1]-e)<jt?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var i=s(t,1),n=s(e,1);return i!==n?i-n:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return u(r,"visible"),u(o,"interpolate"),u(s,"corner"),u(a,"compareIntersection"),u(l,"comparePoint"),function(s){var l,h,c,p,d,f,g,m,v,y,x,_=s,b=z1(),M={point:E,lineStart:T,lineEnd:C,polygonStart:A,polygonEnd:S};function E(t,e){r(t,e)&&_.point(t,e)}function w(){for(var e=0,i=0,r=h.length;i<r;++i)for(var o,s,a=h[i],l=1,u=a.length,c=a[0],p=c[0],d=c[1];l<u;++l)o=p,s=d,p=(c=a[l])[0],d=c[1],s<=n?d>n&&(p-o)*(n-s)>(d-s)*(t-o)&&++e:d<=n&&(p-o)*(n-s)<(d-s)*(t-o)&&--e;return e}function A(){_=b,l=[],h=[],x=!0}function S(){var t=w(),e=x&&t,i=(l=cm(l)).length;(e||i)&&(s.polygonStart(),e&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&G1(l,a,t,o,s),s.polygonEnd()),_=s,l=h=c=null}function T(){M.point=P,h&&h.push(c=[]),y=!0,v=!1,g=m=NaN}function C(){l&&(P(p,d),f&&v&&b.rejoin(),l.push(b.result())),M.point=E,v&&_.lineEnd()}function P(o,s){var a=r(o,s);if(h&&c.push([o,s]),y)p=o,d=s,f=a,y=!1,a&&(_.lineStart(),_.point(o,s));else if(a&&v)_.point(o,s);else{var l=[g=Math.max(CM,Math.min(V1,g)),m=Math.max(CM,Math.min(V1,m))],u=[o=Math.max(CM,Math.min(V1,o)),s=Math.max(CM,Math.min(V1,s))];HI(l,u,t,e,i,n)?(v||(_.lineStart(),_.point(l[0],l[1])),_.point(u[0],u[1]),a||_.lineEnd(),x=!1):a&&(_.lineStart(),_.point(o,s),x=!1)}g=o,m=s,v=a}return u(E,"point"),u(w,"polygonInside"),u(A,"polygonStart"),u(S,"polygonEnd"),u(T,"lineStart"),u(C,"lineEnd"),u(P,"linePoint"),M}}u(jI,"clipExtent"),E(),E();var WI=Fo();function PM(t,e){var i=e[0],n=e[1],r=[Vt(i),-Gt(i),0],o=0,s=0;WI.reset();for(var a=0,l=t.length;a<l;++a)if(h=(u=t[a]).length)for(var u,h,c=u[h-1],p=c[0],d=c[1]/2+bM,f=Vt(d),g=Gt(d),m=0;m<h;++m,p=y,f=_,g=b,c=v){var v=u[m],y=v[0],x=v[1]/2+bM,_=Vt(x),b=Gt(x),M=y-p,E=M>=0?1:-1,w=E*M,A=w>Un,S=f*_;if(WI.add(qs(S*E*Vt(w),g*b+S*Gt(w))),o+=A?M+E*io:M,A^p>=i^y>=i){var T=hp(Pl(c),Pl(v));um(T);var C=hp(r,T);um(C);var P=(A^M>=0?-1:1)*ys(C[2]);(n>P||n===P&&(T[0]||T[1]))&&(s+=A^M>=0?1:-1)}}return(o<-jt||o<jt&&WI<-jt)^1&s}u(PM,"default"),E(),E();var GXe=Fo();function hm(t){return t}E(),E(),E(),E(),u(hm,"default"),E();var xZe=Fo(),bZe=Fo();E();var fm=1/0,IM=fm,H1=-fm,OM=H1,Due={point:Nue,lineStart:zo,lineEnd:zo,polygonStart:zo,polygonEnd:zo,result:function(){var t=[[fm,IM],[H1,OM]];return H1=OM=-(IM=fm=1/0),t}};function Nue(t,e){t<fm&&(fm=t),t>H1&&(H1=t),e<IM&&(IM=e),e>OM&&(OM=e)}u(Nue,"boundsPoint");var LM=Due;function YI(t){this._context=t}E(),E(),u(YI,"PathContext"),YI.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,io)}},result:zo},E();var UZe=Fo();function XI(){this._string=[]}function dV(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function j1(t,e,i,n){return function(r,o){var s,a,l,h=e(o),c=r.invert(n[0],n[1]),p=z1(),d=e(p),f=!1,g={point:m,lineStart:y,lineEnd:x,polygonStart:function(){g.point=_,g.lineStart=b,g.lineEnd=M,a=[],s=[]},polygonEnd:function(){g.point=m,g.lineStart=y,g.lineEnd=x,a=cm(a);var t=PM(s,c);a.length?(f||(o.polygonStart(),f=!0),G1(a,Bue,t,i,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),a=s=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function m(e,i){var n=r(e,i);t(e=n[0],i=n[1])&&o.point(e,i)}function v(t,e){var i=r(t,e);h.point(i[0],i[1])}function y(){g.point=v,h.lineStart()}function x(){g.point=m,h.lineEnd()}function _(t,e){l.push([t,e]);var i=r(t,e);d.point(i[0],i[1])}function b(){d.lineStart(),l=[]}function M(){_(l[0][0],l[0][1]),d.lineEnd();var t,e,i,n,r=d.clean(),u=p.result(),h=u.length;if(l.pop(),s.push(l),l=null,h){if(1&r){if((e=(i=u[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<e;++t)o.point((n=i[t])[0],n[1]);o.lineEnd()}return}h>1&&2&r&&u.push(u.pop().concat(u.shift())),a.push(u.filter(Rue))}}return u(m,"point"),u(v,"pointLine"),u(y,"lineStart"),u(x,"lineEnd"),u(_,"pointRing"),u(b,"ringStart"),u(M,"ringEnd"),g}}function Rue(t){return t.length>1}function Bue(t,e){return((t=t.x)[0]<0?t[1]-vs-jt:vs-t[1])-((e=e.x)[0]<0?e[1]-vs-jt:vs-e[1])}E(),u(XI,"PathString"),XI.prototype={_radius:4.5,_circle:dV(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=dV(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},u(dV,"circle"),E(),E(),E(),E(),E(),E(),u(j1,"default"),u(Rue,"validSegment"),u(Bue,"compareIntersection");var ZI=j1((function(){return!0}),kue,Fue,[-Un,-vs]);function kue(t){var e,i=NaN,n=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?Un:-Un,l=vi(o-i);vi(l-Un)<jt?(t.point(i,n=(n+s)/2>0?vs:-vs),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),t.point(o,n),e=0):r!==a&&l>=Un&&(vi(i-r)<jt&&(i-=r*jt),vi(o-a)<jt&&(o-=a*jt),n=que(i,n,o,s),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(a,n),e=0),t.point(i=o,n=s),r=a},lineEnd:function(){t.lineEnd(),i=n=NaN},clean:function(){return 2-e}}}function que(t,e,i,n){var r,o,s=Vt(t-i);return vi(s)>jt?Cl((Vt(e)*(o=Gt(n))*Vt(i)-Vt(n)*(r=Gt(e))*Vt(t))/(r*o*s)):(e+n)/2}function Fue(t,e,i,n){var r;if(null==t)r=i*vs,n.point(-Un,r),n.point(0,r),n.point(Un,r),n.point(Un,0),n.point(Un,-r),n.point(0,-r),n.point(-Un,-r),n.point(-Un,0),n.point(-Un,r);else if(vi(t[0]-e[0])>jt){var o=t[0]<e[0]?Un:-Un;r=i*o/2,n.point(-o,r),n.point(0,r),n.point(o,r)}else n.point(e[0],e[1])}function QI(t,e){var i=Gt(t),n=i>0,r=vi(i)>jt;function o(i,n,r,o){lV(o,t,e,r,i,n)}function s(t,e){return Gt(t)*Gt(e)>i}function a(t){var e,i,o,a,u;return{lineStart:function(){a=o=!1,u=1},point:function(c,p){var d,f=[c,p],g=s(c,p),m=n?g?0:h(c,p):g?h(c+(c<0?Un:-Un),p):0;if(!e&&(a=o=g)&&t.lineStart(),g!==o&&((!(d=l(e,f))||fp(e,d)||fp(f,d))&&(f[0]+=jt,f[1]+=jt,g=s(f[0],f[1]))),g!==o)u=0,g?(t.lineStart(),d=l(f,e),t.point(d[0],d[1])):(d=l(e,f),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(r&&e&&n^g){var v;!(m&i)&&(v=l(f,e,!0))&&(u=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}g&&(!e||!fp(e,f))&&t.point(f[0],f[1]),e=f,o=g,i=m},lineEnd:function(){o&&t.lineEnd(),e=null},clean:function(){return u|(a&&o)<<1}}}function l(t,e,n){var r=[1,0,0],o=hp(Pl(t),Pl(e)),s=q1(o,o),a=o[0],l=s-a*a;if(!l)return!n&&t;var u=i*s/l,h=-i*a/l,c=hp(r,o),p=F1(r,u);EM(p,F1(o,h));var d=c,f=q1(p,d),g=q1(d,d),m=f*f-g*(q1(p,p)-1);if(!(m<0)){var v=is(m),y=F1(d,(-f-v)/g);if(EM(y,p),y=lm(y),!n)return y;var x,_=t[0],b=e[0],M=t[1],E=e[1];b<_&&(x=_,_=b,b=x);var w=b-_,A=vi(w-Un)<jt;if(!A&&E<M&&(x=M,M=E,E=x),A||w<jt?A?M+E>0^y[1]<(vi(y[0]-_)<jt?M:E):M<=y[1]&&y[1]<=E:w>Un^(_<=y[0]&&y[0]<=b)){var S=F1(d,(-f+v)/g);return EM(S,p),[y,lm(S)]}}}function h(e,i){var r=n?t:Un-t,o=0;return e<-r?o|=1:e>r&&(o|=2),i<-r?o|=4:i>r&&(o|=8),o}return u(o,"interpolate"),u(s,"visible"),u(a,"clipLine"),u(l,"intersect"),u(h,"code"),j1(s,a,o,n?[0,-t]:[-Un,t-Un])}function W1(t){return function(e){var i=new KI;for(var n in t)i[n]=t[n];return i.stream=e,i}}function KI(){}function Y1(t,e,i){var n=e[1][0]-e[0][0],r=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),hc(i,t.stream(LM));var s=LM.result(),a=Math.min(n/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),l=+e[0][0]+(n-a*(s[1][0]+s[0][0]))/2,u=+e[0][1]+(r-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([l,u])}function DM(t,e,i){return Y1(t,[[0,0],e],i)}u(kue,"clipAntimeridianLine"),u(que,"clipAntimeridianIntersect"),u(Fue,"clipAntimeridianInterpolate"),E(),u(QI,"default"),E(),u(W1,"transformer"),u(KI,"TransformStream"),KI.prototype={constructor:KI,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},E(),u(Y1,"fitExtent"),u(DM,"fitSize"),E();var mV=16,Uue=Gt(30*br);function NM(t,e){return+e?Gue(t,e):zue(t)}function zue(t){return W1({point:function(e,i){e=t(e,i),this.stream.point(e[0],e[1])}})}function Gue(t,e){function i(n,r,o,s,a,l,u,h,c,p,d,f,g,m){var v=u-n,y=h-r,x=v*v+y*y;if(x>4*e&&g--){var _=s+p,b=a+d,M=l+f,E=is(_*_+b*b+M*M),w=ys(M/=E),A=vi(vi(M)-1)<jt||vi(o-c)<jt?(o+c)/2:qs(b,_),S=t(A,w),T=S[0],C=S[1],P=T-n,I=C-r,L=y*P-v*I;(L*L/x>e||vi((v*P+y*I)/x-.5)>.3||s*p+a*d+l*f<Uue)&&(i(n,r,o,s,a,l,T,C,A,_/=E,b/=E,M,g,m),m.point(T,C),i(T,C,A,_,b,M,u,h,c,p,d,f,g,m))}}return u(i,"resampleLineTo"),function(e){var n,r,o,s,a,l,h,c,p,d,f,g,m={point:v,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function v(i,n){i=t(i,n),e.point(i[0],i[1])}function y(){c=NaN,m.point=x,e.lineStart()}function x(n,r){var o=Pl([n,r]),s=t(n,r);i(c,p,h,d,f,g,c=s[0],p=s[1],h=n,d=o[0],f=o[1],g=o[2],mV,e),e.point(c,p)}function _(){m.point=v,e.lineEnd()}function b(){y(),m.point=M,m.lineEnd=E}function M(t,e){x(n=t,e),r=c,o=p,s=d,a=f,l=g,m.point=x}function E(){i(c,p,h,d,f,g,r,o,n,s,a,l,mV,e),m.lineEnd=_,_()}return u(v,"point"),u(y,"lineStart"),u(x,"linePoint"),u(_,"lineEnd"),u(b,"ringStart"),u(M,"ringPoint"),u(E,"ringEnd"),m}}u(NM,"default"),u(zue,"resampleNone"),u(Gue,"resample");var Vue=W1({point:function(t,e){this.stream.point(t*br,e*br)}});function Il(t){return JI((function(){return t}))()}function JI(t){var e,i,n,r,o,s,a,l,h,c,p=150,d=480,f=250,g=0,m=0,v=0,y=0,x=0,_=null,b=ZI,M=null,E=hm,w=.5,A=NM(C,w);function S(t){return[(t=o(t[0]*br,t[1]*br))[0]*p+i,n-t[1]*p]}function T(t){return(t=o.invert((t[0]-i)/p,(n-t[1])/p))&&[t[0]*Uo,t[1]*Uo]}function C(t,r){return[(t=e(t,r))[0]*p+i,n-t[1]*p]}function P(){o=U1(r=VI(v,y,x),e);var t=e(g,m);return i=d-t[0]*p,n=f+t[1]*p,I()}function I(){return h=c=null,S}return u(S,"projection"),u(T,"invert"),u(C,"projectTransform"),S.stream=function(t){return h&&c===t?h:h=Vue(b(r,A(E(c=t))))},S.clipAngle=function(t){return arguments.length?(b=+t?QI(_=t*br,6*br):(_=null,ZI),I()):_*Uo},S.clipExtent=function(t){return arguments.length?(E=null==t?(M=s=a=l=null,hm):jI(M=+t[0][0],s=+t[0][1],a=+t[1][0],l=+t[1][1]),I()):null==M?null:[[M,s],[a,l]]},S.scale=function(t){return arguments.length?(p=+t,P()):p},S.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],P()):[d,f]},S.center=function(t){return arguments.length?(g=t[0]%360*br,m=t[1]%360*br,P()):[g*Uo,m*Uo]},S.rotate=function(t){return arguments.length?(v=t[0]%360*br,y=t[1]%360*br,x=t.length>2?t[2]%360*br:0,P()):[v*Uo,y*Uo,x*Uo]},S.precision=function(t){return arguments.length?(A=NM(C,w=t*t),I()):is(w)},S.fitExtent=function(t,e){return Y1(S,t,e)},S.fitSize=function(t,e){return DM(S,t,e)},u(P,"recenter"),u(I,"reset"),function(){return e=t.apply(this,arguments),S.invert=e.invert&&T,P()}}function RM(t){return function(e,i){var n=Gt(e),r=Gt(i),o=t(n*r);return[o*r*Vt(e),o*Vt(i)]}}function du(t){return function(e,i){var n=is(e*e+i*i),r=t(n),o=Vt(r),s=Gt(r);return[qs(e*o,n*s),ys(n&&i*o/n)]}}u(Il,"projection"),u(JI,"projectionMutator"),E(),E(),E(),E(),u(RM,"azimuthalRaw"),u(du,"azimuthalInvert");var xV=RM((function(t){return is(2/(1+t))}));xV.invert=du((function(t){return 2*ys(t/2)})),E();var $I=RM((function(t){return(t=wM(t))&&t/Vt(t)}));function BM(){return Il($I).scale(79.4188).clipAngle(179.999)}function e5(t,e){return[t,B1(k1((vs+e)/2))]}function kM(t,e){return[t,e]}function bV(t,e){var i=Gt(e),n=Gt(t)*i;return[i*Vt(t)/n,Vt(e)/n]}function _V(t,e){var i=e*e,n=i*i;return[t*(.8707-.131979*i+n*(n*(.003971*i-.001529*n)-.013791)),e*(1.007226+i*(.015085+n*(.028874*i-.044475-.005916*n)))]}function wV(t,e){return[Gt(e)*Vt(t),Vt(e)]}function MV(t,e){var i=Gt(e),n=1+Gt(t)*i;return[i*Vt(t)/n,Vt(e)/n]}function EV(t,e){return[B1(k1((vs+e)/2)),-t]}function Wue(t,e,i){var n=(i=i||{}).units||"kilometers",r=i.steps||8;if(!t)throw new Error("geojson is required");if("object"!=typeof i)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(r<=0)throw new Error("steps must be greater than 0");var o=[];switch(t.type){case"GeometryCollection":return uu(t,(function(t){var i=qM(t,e,n,r);i&&o.push(i)})),$t(o);case"FeatureCollection":return Ci(t,(function(t){var i=qM(t,e,n,r);i&&Ci(i,(function(t){t&&o.push(t)}))})),$t(o)}return qM(t,e,n,r)}function qM(t,e,i,n){var r=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var s=[];return uu(t,(function(t){var r=qM(t,e,i,n);r&&s.push(r)})),$t(s)}var a=Yue(o),l={type:o.type,coordinates:SV(o.coordinates,a)},u=(new pm.GeoJSONReader).read(l),h=v1(y1(e,i),"meters"),c=pm.BufferOp.bufferOp(u,h,n);if(!TV((c=(new pm.GeoJSONWriter).write(c)).coordinates))return ms({type:c.type,coordinates:AV(c.coordinates,a)},r)}function TV(t){return Array.isArray(t[0])?TV(t[0]):isNaN(t[0])}function SV(t,e){return"object"!=typeof t[0]?e(t):t.map((function(t){return SV(t,e)}))}function AV(t,e){return"object"!=typeof t[0]?e.invert(t):t.map((function(t){return AV(t,e)}))}function Yue(t){var e=tp(t).geometry.coordinates,i=[-e[0],-e[1]];return BM().rotate(i).scale(ds)}$I.invert=du((function(t){return t})),u(BM,"default"),E(),E(),u(e5,"mercatorRaw"),e5.invert=function(t,e){return[t,2*Cl(_M(e))-vs]},E(),E(),u(kM,"equirectangularRaw"),kM.invert=kM,E(),u(bV,"gnomonicRaw"),bV.invert=du(Cl),E(),E(),u(_V,"naturalEarth1Raw"),_V.invert=function(t,e){var i,n=e,r=25;do{var o=n*n,s=o*o;n-=i=(n*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(vi(i)>jt&&--r>0);return[t/(.8707+(o=n*n)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),n]},E(),u(wV,"orthographicRaw"),wV.invert=du(ys),E(),u(MV,"stereographicRaw"),MV.invert=du((function(t){return 2*Cl(t)})),E(),u(EV,"transverseMercatorRaw"),EV.invert=function(t,e){return[-e,2*Cl(_M(t))-vs]},u(Wue,"buffer"),u(qM,"bufferFeature"),u(TV,"coordsIsNaN"),u(SV,"projectCoords"),u(AV,"unprojectCoords"),u(Yue,"defineProjection");var t5=Wue;E();var Xue=Bt(am(),1);E();var Zue=Bt(am(),1);E();var Kue=Bt(am(),1);E(),E();var Jue=Bt(am(),1);E(),E(),E(),E();var ace=1e-7,lce=.22,uce=.2,PV=.005,IV=["connection.json","manifest.geojson","map.geojson","node.geojson","styles.json","mapstack.geojson"];function n5(t,e,i){let n=pce(e),[r,o]=t.features.reduce(((t,e)=>{let[r,o]=t,s=[e],{properties:a}=e,l=(a.entrances||[]).reduce(((t,e)=>(n.has(e)&&t.push(n.get(e)),t)),[]);if(l.length&&(s=cce(e,l)),i&&"LineString"===s[0].geometry.type){let t=i.get(s[0].properties.id).type;r.has(t)||r.set(t,[]),r.get(t).push(...s)}else o.push(...s);return t}),[new Map,[]]),s=1;return r.forEach((t=>{var e;let n={kind:t[0].properties.kind,id:t[0].properties.id,externalId:t[0].properties.externalId},a=((null==(e=null==i?void 0:i.get(t[0].properties.id))?void 0:e.width)||lce)/2,l=s/r.size*a*uce;if(t.length){let e=t5($f(t.map((({geometry:t})=>t.coordinates))),a+l,{units:"meters",steps:3});e.properties={...n,...e.properties};let i=[];i="MultiPolygon"===e.geometry.type?e.geometry.coordinates.map((t=>({...Vi(t),properties:n}))):[e],o=o.concat(i)}s++})),$t(o)}function cce(t,e){return e.reduce(((t,e)=>{let i={epsilon:ace},n=t.findIndex((t=>Hd(tp(e),t,i))),r=t[n];if(r){let[i,o]=fce(r,e);t.splice(n,1,i,o)}return t}),[t])}function hce(t){return null!=t&&(null!=t.polygons||null!=t.lineStrings)}function fce(t,e){let{coordinates:i}=e.geometry,{coordinates:n}=t.geometry,r=i.map((e=>uc(t,oi(e))));return n.reduce(((e,i)=>{let n=Xw(oi(i),r[0],t),o=Xw(oi(i),r[1],t),s=rp(n)<rp(o)?n:o;return s.properties={...t.properties,entrances:[]},e.concat([s])}),[])}function OV(t){let e=new Map;for(let i in t){let n=t[i];if(!hce(n))continue;let{altitude:r,color:o,width:s,height:a,opacity:l}=n;(n.polygons||n.lineStrings).forEach((t=>{e.set(t,{altitude:r,color:o,width:s,height:a,opacity:l,type:i})}))}return e}function pce(t){return new Map(t.features.map((t=>{let{properties:e}=t,{id:i}=e;return[i,t]})))}function dce(t){if(null==t||"object"!=typeof t)return!1;for(let e of IV)if("Uint8Array"!==t[e][Symbol.toStringTag])return!1;return!0}function mce(t){var e;if(null==t||"object"!=typeof t)return!1;let i=["building.geojson","category.geojson","location.geojson","manifest.geojson"];for(let n of i)if("Uint8Array"!==(null==(e=null==t?void 0:t[n])?void 0:e[Symbol.toStringTag]))return!1;return!0}async function NV(t){return new Promise((async(e,i)=>{try{if(null==t||"object"!=typeof t)throw new Error("Error parsing data! Unzipping failed.");if("Uint8Array"!==t[Symbol.toStringTag])throw new Error("Unexpected file type! Unzipping failed.");let i=(await import("./browser-TSE6NP6L.js")).unzipSync(t);if(!mce(i))throw new Error("MVF is missing some expect static files. Unzipping failed.");let n={"building.geojson":i["building.geojson"],"category.geojson":i["category.geojson"],"location.geojson":i["location.geojson"],"manifest.geojson":i["manifest.geojson"],space:{},obstruction:{},node:{},level:{},connection:{}},r=Object.keys(i);for(let t of r){if(0===i[t].length)continue;let e=t.split("/");if(e.length<0)throw new Error("Encounted a file with no name! Unzipping failed.");if(e.length>2)throw new Error("Encountered unexpected nesting in MVF! Unzipping failed.");if(1!==e.length){if("image"===e[0]){Le.warn("MVF unzipping encountered an image. Ignoring as this case has not been implemented.");continue}null==n[e[0]]&&(n[e[0]]={}),n[e[0]][e[1]]=i[t]}}e(n)}catch(t){i(t)}}))}async function r5(t){return new Promise((async(e,i)=>{try{if(null==t||"object"!=typeof t)throw new Error("Error parsing data! Unzipping failed.");if("Uint8Array"!==t[Symbol.toStringTag])throw new Error("Unexpected file type! Unzipping failed.");let i=(await import("./browser-TSE6NP6L.js")).unzipSync(t);if(!dce(i))throw new Error("MVF is missing some expect static files. Unzipping failed.");let n={"connection.json":i["connection.json"],"manifest.geojson":i["manifest.geojson"],"node.geojson":i["node.geojson"],"map.geojson":i["map.geojson"],"mapstack.geojson":i["mapstack.geojson"],"styles.json":i["styles.json"],space:{},obstruction:{},entrance:{}},r=Object.keys(i);for(let t of r){if(0===i[t].length)continue;let e=t.split("/");if(e.length<0)throw new Error("Encounted a file with no name! Unzipping failed.");if(e.length>2)throw new Error("Encountered unexpected nesting in MVF! Unzipping failed.");if(1!==e.length){if("image"===e[0]){Le.warn("MVF unzipping encountered an image. Ignoring as this case has not been implemented.");continue}null==n[e[0]]&&(n[e[0]]={}),n[e[0]][e[1]]=i[t]}}e(n)}catch(t){i(t)}}))}function RV(t){let[e,i,n,r]=Rs(t);return{minLat:i,minLong:e,maxLat:r,maxLong:n}}function gce(t,e,i){let n=i.createGeoreferences(),r=new Set;e.forEach((t=>{t.layer&&r.add(t.layer)}));let o=t.id||"",s=t.externalId||o||"",a=t.elevation||0,l=[...r].map((t=>({id:t,visible:!0}))),u=1/i.mapScale;return{id:o,georeference:n,name:s,shortName:s,scene:{polygons:e},elevation:a,scale:u,x_scale:u,layers:l,width:i.widthInMapUnits,height:i.heightInMapUnits}}u(n5,"processObstructions"),u(cce,"splitObstructionByAllEntrances"),u(hce,"isPolygonStyle"),u(fce,"splitObstructionByEntrance"),u(OV,"getStylesMap"),u(pce,"getEntranceMap"),u(dce,"validateStaticMVFFiles"),u(mce,"validateStaticMVFv1Files"),u(NV,"unzipMVFv1"),u(r5,"unzipMVF"),u(RV,"getMapExtent"),u(gce,"convertMap");var o5=class{constructor(t){A(this,"mapExtent"),A(this,"stretchRatio"),A(this,"midLat"),A(this,"midLong"),A(this,"mapUnitRatio",1e6),A(this,"latDistance"),A(this,"longDistance"),A(this,"mapScale"),A(this,"widthInMapUnits"),A(this,"heightInMapUnits"),this.mapExtent=t;let{minLat:e,minLong:i,maxLat:n,maxLong:r}=t,o=(e+n)/2,s=(i+r)/2,a=new mi(o,r),l=new mi(o,i),u=new mi(e,s),h=new mi(n,s);this.latDistance=u.distanceTo(h),this.longDistance=a.distanceTo(l);let c=this.latDistance/this.longDistance,p=(n-e)/(r-i);this.stretchRatio=c/p,this.midLat=o,this.midLong=s,this.widthInMapUnits=(r-i)*this.mapUnitRatio,this.heightInMapUnits=(n-e)*this.mapUnitRatio*this.stretchRatio,this.mapScale=this.widthInMapUnits/this.longDistance}convert(t){let e=t[1],i=(t[0]-this.midLong)*this.mapUnitRatio,n=(this.midLat-e)*this.mapUnitRatio*this.stretchRatio;return{x:i+this.widthInMapUnits/2,y:n+this.heightInMapUnits/2}}createGeoreferences(){let{minLat:t,minLong:e,maxLat:i,maxLong:n}=this.mapExtent;return[[t,e],[t,n],[i,n],[i,e]].map((t=>({target:{x:t[0],y:t[1]},control:this.convert([t[1],t[0]])})))}};u(o5,"CoordinateConverter");var FM=o5;function vce(t,e){let i=new Map,n=[];return t.features.forEach((t=>{let e=t.properties.id;e&&!i.has(e)&&i.set(e,t)})),i.forEach(((t,r)=>{let o=t.properties.map||"",s=e.get(o);if(s){let e=s.convert(t.geometry.coordinates),a=t.properties.externalId||"",l=[];t.properties.neighbors.forEach((t=>{var e;let n=null!=(e=t.weight)?e:0,r=i.get(t.id);r&&r.properties.map===o&&l.push({node:r.properties.id,map:r.properties.map,weight:n})})),n.push({id:r,map:o,externalId:a,paths:l,...e})}})),n}function yce(t,e,i){let n=[];return t.features.forEach((t=>{let r=i.convert(t.geometry.coordinates);n.push({id:t.properties.id,x:r.x,y:r.y,map:e,paths:t.properties.neighbors.map((t=>({node:t,map:e})))})})),n}u(vce,"convertNodes"),u(yce,"convertNodes_MVFv1");var LV=u(((t,e,i,n,r)=>{let o=[];return e.features.forEach(((s,a)=>{var l;if("Point"===s.geometry.type)return;let u="desk-entrance"===(null==(l=s.properties.kind)?void 0:l.toLowerCase()),h=(u?s.properties.externalId:s.properties.id)||"",c=s.properties.externalId||"",p=i.get(h)||[];if("destinationNodes"in s.properties&&s.properties.destinationNodes.forEach((e=>{p.push({map:t,id:e})})),u&&i.set(c,p),"LineString"===s.geometry.type)return;let d=n.get(s.properties.id),f=s.geometry.coordinates[0].map((t=>r.convert(t))),g=s.properties.center?r.convert(s.properties.center):void 0,m=s.geometry.coordinates.slice(1).map((t=>t.map((t=>r.convert(t))))),v=Math.max(r.widthInMapUnits,r.heightInMapUnits)/1e3,y=s.properties.kind||"",x="void"===y.toLowerCase(),_=1-(a+1)/e.features.length*PV;o.push({entrances:p,map:t,id:h,externalId:c,layer:y,geometry:{visible:!x,position:{x:0,y:0,z:((null==d?void 0:d.altitude)||0)*r.mapScale/v},scale:{x:1,y:1,z:((null==d?void 0:d.height)||1)*r.mapScale/v*_}},material:{color:(null==d?void 0:d.color)||"#000000"},vertexes:f,center:g,holes:m})})),o}),"generateMappedinPolygons"),DV=u(((t,e,i)=>{let n=[];return e.features.forEach((e=>{if(!e.geometry.coordinates[0].forEach)return;let r=e.properties,o=e.geometry.coordinates[0].map((t=>i.convert(t))),s=e.geometry.coordinates.slice(1).map((t=>t.map((t=>i.convert(t))))),a=Math.max(i.widthInMapUnits,i.heightInMapUnits)/1e3,l=[];"entrances"in e.properties&&e.properties.entrances.forEach((t=>l.push({id:"n_"+t.id,map:t.level}))),n.push({entrances:null!=l?l:[],map:t,id:e.properties.id||"",externalId:e.properties.externalId||"",layer:e.properties.layer||"Polygon",geometry:{visible:!0,position:{x:0,y:0,z:((null==r?void 0:r.altitude)||0)*i.mapScale/a},scale:{x:1,y:1,z:((null==r?void 0:r.height)||1)*i.mapScale/a}},material:{color:(null==r?void 0:r.color)||"#000000"},vertexes:o,holes:s})})),n}),"generateMappedinPolygons_MVFv1");function xce(t,e,i,n,r,o){let s=LV(t,i,n,r,o),a=LV(t,e,n,r,o);return s.concat(a)}function bce(t){let e=[];return t.forEach((t=>{var i;e.push({id:t.id||"",name:t.externalId||"",type:t.type||"",weight:1e3,multiplier:1,nodes:t.nodes||[],accessible:null!=(i=t.accessible)&&i})})),e}function _ce(t){let e=new Map;return t.features.forEach((t=>{var i,n,r,o,s,a,l;let u="",h=["n_".concat(t.properties.id)];t.properties.destinations.forEach((t=>{let e=t.split("-");u=e[0],h.push("n_".concat(e[1]))}));let c=null!=(n=null==(i=e.get(u))?void 0:i.nodes)?n:[],p=new Set([...c,...h]);e.set(u,{id:u,name:null!=(r=t.properties.name)?r:"",type:null!=(o=t.properties.type)?o:"",weight:null!=(s=t.properties.weight)?s:1e3,multiplier:null!=(a=t.properties.multiplier)?a:1,nodes:Array.from(p),accessible:null!=(l=t.properties.accessible)&&l})})),Array.from(e.values())}function BV(t,e){if(e)for(let i in e)e.hasOwnProperty(i)&&Object.assign(t[i],e[i]);return t}function s5(t){let e=new TextDecoder,i=e.decode.bind(e);try{let e={"connection.json":JSON.parse(i(t["connection.json"])),"manifest.geojson":JSON.parse(i(t["manifest.geojson"])),"styles.json":JSON.parse(i(t["styles.json"])),"map.geojson":JSON.parse(i(t["map.geojson"])),"mapstack.geojson":JSON.parse(i(t["mapstack.geojson"])),"node.geojson":JSON.parse(i(t["node.geojson"])),obstruction:{},space:{},entrance:{},annotation:{}};if(null!=t.annotation){let n=Object.keys(t.annotation);for(let r of n){let n=r.replace(/\.json|\.geojson/g,"");e.annotation[n]=JSON.parse(i(t.annotation[r]))}}let n=Object.keys(t.space);for(let r of n){let n=r.replace(/\.json|\.geojson/g,"");e.space[n]=JSON.parse(i(t.space[r]))}let r=Object.keys(t.obstruction);for(let n of r){let r=n.replace(/\.json|\.geojson/g,"");e.obstruction[r]=JSON.parse(i(t.obstruction[n]))}let o=Object.keys(t.entrance);for(let n of o){let r=n.replace(/\.json|\.geojson/g,"");e.entrance[r]=JSON.parse(i(t.entrance[n]))}return e}catch(t){throw Le.error(t),new Error("MVF parsing failed! Probably encountered a bad file.")}}function kV(t){let e=new TextDecoder,i=e.decode.bind(e);try{let e={"manifest.geojson":JSON.parse(i(t["manifest.geojson"])),"building.geojson":JSON.parse(i(t["building.geojson"])),"category.geojson":JSON.parse(i(t["category.geojson"])),"location.geojson":JSON.parse(i(t["location.geojson"])),obstruction:{},space:{},level:{},node:{},connection:{}},n=Object.keys(t.space);for(let r of n){let n=r.replace(/\.json|\.geojson/g,"");e.space[n]=JSON.parse(i(t.space[r]))}let r=Object.keys(t.obstruction);for(let n of r){let r=n.replace(/\.json|\.geojson/g,"");e.obstruction[r]=JSON.parse(i(t.obstruction[n]))}let o=Object.keys(t.node);for(let n of o){let r=n.replace(/\.json|\.geojson/g,"");e.node[r]=JSON.parse(i(t.node[n]))}let s=Object.keys(t.level);for(let n of s){let r=n.replace(/\.json|\.geojson/g,"");e.level[r]=JSON.parse(i(t.level[n]))}let a=Object.keys(t.connection);for(let n of a){let r=n.replace(/\.json|\.geojson/g,"");e.connection[r]=JSON.parse(i(t.connection[n]))}return e}catch(t){throw Le.error(t),new Error("MVF parsing failed! Probably encountered a bad file.")}}function qV(t,e){var i;let n=null!=(i=e.properties.externalId)?i:"";return 0===n.length&&(n=e.properties.id),"location-".concat(t,"-").concat(n.toLowerCase().replace(" ","-"))}function FV(t,e){var i;let n=new Set;if("entrance"===t)n.add("Entrance");else if("obstruction"===t){let t=e.properties.kind;null!=t&&t.length>0&&n.add(t),e.properties.footprintComponent&&n.add("Exterior")}else if("space"===t){let t=e.properties.kind;null!=t&&t.length>0&&n.add("default"===t?"Room":t);let r=null!=(i=e.properties.tags)?i:[];if(r.length>0)for(let t of r)n.add(t)}return Array.from(n).filter((t=>t.length>0))}function UV(t){return"category-".concat(t.toLowerCase().replace(" ","-"))}function i5(t,e,i){let n=FV(t,e);for(let t of n){let e=UV(t);null==i[e]&&(i[e]={id:e,name:t})}}function zV(t){var e,i,n;return null!=(n=null==(i=null==(e=null==t?void 0:t.properties)?void 0:e.kind)?void 0:i.startsWith("connection"))&&n}function wce(t){var e;let i=null!=(e=t.properties.externalId)?e:"";return zV(t)&&0===i.length&&(i="unnamed-connection-"+t.properties.id),i}function X1(t,e,i,n){var r;if((null==e.properties.externalId||0===e.properties.externalId.length)&&!zV(e)||"obstruction"===t&&"desks"!==(null==(r=e.properties.kind)?void 0:r.toLowerCase()))return;let o=wce(e),s=qV(t,e);if(null==n[s]){let t={id:s,type:"",name:o,nodes:[],polygons:[],categories:[]};n[s]=t}if("space"===t||"obstruction"===t){let t={map:i.id,id:e.properties.id};n[s].polygons.push(t)}if("destinationNodes"in e.properties&&e.properties.destinationNodes.forEach((t=>{let e={map:i.id,node:t};n[s].nodes.push(e)})),"node"in e.properties&&e.properties.node){let t={map:i.id,node:e.properties.node};n[s].nodes.push(t)}let a=FV(t,e);for(let t of a){let e=UV(t);n[s].categories.push(e)}}function Mce(t,e=new Map){var i,n,r,o,s,a,l,u,h;let c={},p={},{space:d,"map.geojson":f,entrance:g,obstruction:m}=t;for(let t of f){let f=null!=(n=null==(i=d[t.id])?void 0:i.features)?n:[],v=null!=(o=null==(r=g[t.id])?void 0:r.features)?o:[],y=null!=(a=null==(s=m[t.id])?void 0:s.features)?a:[];for(let e of f)["Polygon","Point"].includes(e.geometry.type)&&"hallway"!==(null==(l=e.properties.kind)?void 0:l.toLowerCase())&&(i5("space",e,p),X1("space",e,t,c));let x=new Map;for(let e of v)x.set(e.properties.id,e),e.properties.externalId&&(i5("entrance",e,p),X1("entrance",e,t,c));let _={type:"Feature",geometry:{type:"LineString",coordinates:[]},properties:{id:"footprintComponent",externalId:"footprintComponent",node:void 0,metadata:void 0}};X1("entrance",_,t,c);for(let i of y){if(i5("obstruction",i,p),X1("obstruction",i,t,c),i.properties.footprintComponent){let e=i.properties.entrances;for(let i of e){let e=x.get(i);e&&X1("entrance",{...e,properties:{...e.properties,externalId:_.properties.externalId}},t,c)}}if("desks"===(null==(u=i.properties.kind)?void 0:u.toLowerCase())&&i.properties.externalId.length>0){let t=null!=(h=e.get(i.properties.id))?h:[];for(let e of t){let t=qV("obstruction",i);null!=c[t]&&c[t].nodes.push({map:e.map,node:e.id})}}}}return{locations:Object.values(c),categories:Object.values(p)}}function GV(t){var e,i,n,r,o,s,a,l,u,h;let c=null!=(e=t.obstruction)?e:[],p=null!=(i=t.space)?i:[],d=null!=(n=t.entrance)?n:[],f=null!=(r=t["mapstack.geojson"])?r:[],g=null!=(o=t["map.geojson"])?o:[],m=null!=(s=t["styles.json"])?s:{},v=null!=(a=t["manifest.geojson"])?a:{},y=null!=(l=t["node.geojson"])?l:[],x=null!=(u=t["connection.json"])?u:[],_={},b=new Map,M=[],E=OV(m),w=new Map,A=new Map;g.forEach((t=>{let e=t.id;e&&!A.has(e)&&A.set(e,t)})),f.forEach((({maps:t})=>{t.forEach((t=>{if(!A.has(t))return;let e=n5(c[t],d[t],E);if(e.features.length){let i=RV(e),n=new FM(i);b.set(t,n),_[t]=xce(t,e,p[t],w,E,n),M.push(gce(A.get(t),_[t],n))}}))}));let S=Object.values(_).flat(),T=bce(x),C=vce(y,b),P=v.features[0],I=P.properties.name,L=P.geometry.coordinates[0],O=P.geometry.coordinates[1],N=(null==(h=M[0])?void 0:h.id)||"",{locations:D,categories:R}=Mce(t,w);return{polygons:S,venue:{name:I,latitude:O,longitude:L,defaultMap:N},maps:M,vortexes:T,nodes:C,locations:D,mapGroups:[],locationStates:[],categories:R,themes:[],imageBinaries:new Map}}function VV(t){var e,i,n,r,o,s,a;let l=null!=(e=t.obstruction)?e:{},u=null!=(i=t.space)?i:{},h=null!=(n=t.node)?n:{},c=null!=(r=t.level)?r:{},p=null!=(o=t["manifest.geojson"])?o:{},d=null!=(s=t.connection)?s:{},f={},g=new Map,m=[],v=[],y=[];Object.keys(c).forEach((t=>{let e=n5(l[t],{type:"FeatureCollection",features:[]});if(e.features.length){let i=RV(e),n=new FM(i);g.set(t,n);let r=DV(t,u[t],n),o=DV(t,e,n);f[t]=r.concat(o),v=v.concat(yce(h[t],t,n)),m.push(Ece(c[t],f[t],n))}y=y.concat(_ce(d[t]))}));let x=Object.values(f).flat(),_=p.features[0],b=_.properties.name,M=_.geometry.coordinates[0],E=_.geometry.coordinates[1],w=(null==(a=m[0])?void 0:a.id)||"",A=new Map;x.forEach((t=>A.set(t.id,t)));let S=[],T=t["location.geojson"].features.map((t=>{if(t.properties.spaces){let e=t.properties.spaces.map((t=>t.id)).map((t=>A.get(t))).filter((t=>t));if(e){let t=[];e.forEach((e=>{t.push(...e.entrances.map((t=>({node:t.id,map:t.level}))))})),S=t}}return{...t.properties,nodes:S,polygons:t.properties.spaces}})),C=t["category.geojson"].features.map((t=>t.properties));return{polygons:x,venue:{name:b,latitude:E,longitude:M,defaultMap:w},maps:m,vortexes:y,nodes:v,locations:T,mapGroups:[],locationStates:[],categories:C,themes:[],imageBinaries:new Map}}function Ece(t,e,i){let n=i.createGeoreferences(),r=new Set,o=t.features[0].properties;e.forEach((t=>{t.layer&&r.add(t.layer)}));let s=[...r].map((t=>({id:t,visible:!0}))),a=1/i.mapScale;return{id:o.id,georeference:n,name:o.name,shortName:o.abbreviation||o.name,scene:{polygons:e},elevation:o.elevation,scale:a,x_scale:a,layers:s,width:i.widthInMapUnits,height:i.heightInMapUnits}}u(xce,"convertPolygons"),u(bce,"convertVortexes"),u(_ce,"convertVortexes_MVFv1"),u(BV,"overrideMVF"),u(s5,"parseMVF"),u(kV,"parseMVFv1"),u(qV,"getLocationId"),u(FV,"getFeatureCategories"),u(UV,"getCategoryIdFromName"),u(i5,"mutateCategoriesWithNewFeature"),u(zV,"isFeatureConnection"),u(wce,"getLocationLabel"),u(X1,"mutateLocationsWithNewFeature"),u(Mce,"createMetaDataFromMVF"),u(GV,"convertMVFToMappedin"),u(VV,"convertMVFv1ToMappedin"),u(Ece,"convertMap_MVFv1"),E();var a5=class{constructor(){A(this,"_subscribers",{})}publish(t,e){!this._subscribers||!this._subscribers[t]||this._subscribers[t].forEach((function(t){"function"==typeof t&&t(e)}))}on(t,e){this._subscribers||(this._subscribers={}),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push(e)}off(t,e){if(!this._subscribers||null==this._subscribers[t])return;let i=this._subscribers[t].indexOf(e);-1!==i&&this._subscribers[t].splice(i,1)}destroy(){this._subscribers={}}};u(a5,"PubSub");var pc,dm,dp,mm,Z1,l5,UM,HV,Go=a5,u5={supplementaryUrl:"https://api-gateway.mappedin.com/analytics/",headers:{},accessToken:"",clientId:"",noAuth:!1,includeHidden:!0,clientSecret:"",apiGateway:"",authorization:"",perspective:"Website",language:"",things:{},venue:""},c5=class extends Go{constructor(t){super(),te(this,Z1),te(this,UM),A(this,"perspective"),A(this,"things"),A(this,"options"),te(this,pc,void 0),te(this,dm,""),A(this,"updatedAt"),A(this,"categories",[]),A(this,"locations",[]),A(this,"vortexes",[]),A(this,"maps",[]),A(this,"nodes",[]),A(this,"polygons",[]),A(this,"venue",{}),A(this,"events",[]),A(this,"mapGroups",[]),A(this,"themes",[]),A(this,"locationStates",[]),A(this,"rankings"),A(this,"currentLanguage"),te(this,dp,{}),A(this,"_categoriesById"),A(this,"_locationsById"),A(this,"_vortexesById"),A(this,"_mapsById"),A(this,"_nodesById"),A(this,"_polygonsById"),A(this,"_eventsById"),A(this,"_mapGroupsById"),A(this,"_locationStatesById"),A(this,"_locationRankingsById"),A(this,"_rankingsById"),A(this,"_categoriesByExternalId"),A(this,"_locationsByExternalId"),A(this,"_vortexesByExternalId"),A(this,"_mapsByExternalId"),A(this,"_nodesByExternalId"),A(this,"_polygonsByExternalId"),A(this,"_eventsByExternalId"),A(this,"_mapGroupsByExternalId"),A(this,"_locationStatesByExternalId"),A(this,"_locationRankingsByExternalId"),A(this,"_rankingsByExternalId"),te(this,mm,void 0),A(this,"images"),A(this,"imageBinaries"),A(this,"scenes"),A(this,"analytics"),A(this,"navigator"),this.options=t,ce(this,pc,bo.create(this));let e=Qa.create({...t,testMode:!(null!=t&&t.emitAnalyticsEvents)});this.analytics={locationSelected:e.locationSelected,categorySelected:e.categorySelected,getDirections:e.getDirections},globalThis.MappedinDebug||(globalThis.MappedinDebug={enable(){globalThis.sessionStorage.setItem(vB,"true")}})}generateGetters(t){try{for(let e=0,i=t.length;e<i;++e){let i=t[e];Array.isArray(this[i])&&(Object.defineProperty(this,"_".concat(i,"ByExternalId"),{configurable:!0,get(){let t=M(this,pc)[i];if(null!=t)return t;let e={};return this[i].forEach((t=>e[t.externalId]=t)),M(this,pc)[i]=e,e}}),Object.defineProperty(this,"_".concat(i,"ById"),{configurable:!0,get(){let t=M(this,pc)[i];if(null!=t)return t;let e={};return this[i].forEach((t=>e[t.id]=t)),M(this,pc)[i]=e,e}}))}return this}catch(t){throw new Error("Unable to generate getters, "+t)}}getCollectionItemById(t,e){let i="_".concat(t,"ById"),n="_".concat(t,"ByExternalId"),r=this[i];return null!=r&&null!=r[e]||(r=this[n],null!=r&&null!=r[e])?r[e]:null}async hydrateFromMVF(t){let e=GV(t);return this.hydrate(e)}async hydrateFromMVFv1(t){let e=VV(t);return this.hydrate(e)}async changeLanguage(t,e=!0){var i;if(this.currentLanguage.code!==t){if(null==(i=this.venue.languages)||!i.find((e=>e.code===t)))return void Le.error("Language ".concat(t," not found in venue ").concat(this.venue.slug));if(e&&!M(this,dp)[this.currentLanguage.code]&&(M(this,dp)[this.currentLanguage.code]=JSON.stringify(this.toJSON())),bo.clearInstance(this),ce(this,pc,bo.create(this)),this.currentLanguage=this.venue.languages.find((e=>e.code===t)),null!=M(this,dp)[t]){let e=JSON.parse(M(this,dp)[t]);await this.hydrate(e)}else this.options.language=this.currentLanguage.code,await this.fetch();this.publish(0,this.currentLanguage)}}async hydrate(t,e){let i;if("string"==typeof t)try{ce(this,dm,t),i=JSON.parse(t)}catch(t){return void Le.error("Unable to parse JSON",t)}else i=t,ce(this,dm,JSON.stringify(i));let n=Object.keys(i);for(let t=0,e=n.length;t<e;++t){let e=n[t],r=i[e];null!=pp[e]&&"function"==typeof pp[e].hydrate&&(this[e]=pp[e].hydrate(r,this))}e&&await jV(i);let{images:r,scenes:o,imageBinaries:s}=i;this.images=r,this.scenes=o,this.imageBinaries=s,this.generateGetters(n),tt(this,Z1,l5).call(this),this.initNavigator()}async fetch(){"vortexes"in this.options.things||(this.options.things.vortexes=["name","type","accessible","weight","multiplier","nodes"]),"locationStates"in this.options.things||(this.options.things.locationStates=["name","id","value"]),zM(this.options.clientId)||this.options.things.rankings&&delete this.options.things.rankings;let{things:t}=this.options,e=[],i=Object.keys(t);for(let t=0,n=i.length;t<n;++t){let n=i[t];pp[n]&&e.push(pp[n].fetch(this).then((t=>(this[n]=t,Promise.resolve()))))}return e.push(gm(this.options,"cdn-access-token",{venue:this.options.venue},!1).then((t=>ce(this,mm,t.token)),(()=>Promise.resolve()))),this.generateGetters(i),Promise.all(e).then((()=>{var t;this.currentLanguage=this.currentLanguage||(null==(t=this.venue.languages)?void 0:t.find((t=>t.code===this.options.language)))||this.venue.defaultLanguage,tt(this,Z1,l5).call(this),this.initNavigator()}))}initNavigator(){this.navigator=new cP({locations:this.locations.map((t=>t.toJSON())),nodes:this.nodes.map((t=>t.toJSON())),vortexes:this.vortexes.map((t=>t.toJSON())),maps:this.maps.map((t=>t.toJSON())),polygons:this.polygons.map((t=>t.toJSON()))})}toJSON(){var t;let e={};for(let t in pp)Array.isArray(this[t])&&(e[t]=this[t].map((t=>t.toJSON())));let i={...e,venue:this.venue.toJSON()};return null!=this.rankings&&(i.rankings=null==(t=this.rankings)?void 0:t.toJSON()),delete i.locationRankings,i}toString(){return M(this,dm)||JSON.stringify(this.toJSON())}};pc=new WeakMap,dm=new WeakMap,dp=new WeakMap,mm=new WeakMap,Z1=new WeakSet,l5=u((function(){M(this,mm)&&this.maps.forEach((t=>{var e;null!=(e=t.scene)&&e.polygons&&(t.scene.polygons+="?".concat(M(this,mm)))})),tt(this,UM,HV).call(this)}),"#transformData"),UM=new WeakSet,HV=u((function(){let t=this.categories.filter((t=>t.sortOrder)).map((t=>t.sortOrder));if(t.length<=0)return;let e=Math.min(...t),i=Math.max(...t);this.polygons.forEach((t=>{var n,r;let o=Bh(t,this);if(o){let s=o.categories.filter((t=>t.sortOrder)).map((t=>t.sortOrder));if(s.length>0){let o=Math.min(...s);t.categoryRank=WV(o,e,i,null!=(r=null==(n=t.rank)?void 0:n.score)?r:0)}}}))}),"#applyCategoryRankToPolygons"),u(c5,"Mappedin");var sa=c5;E();var XV={venue:["slug","name","defaultMap","metadata","countrycode","tzid","logo","externalId","secureContentStorage","languages","topLocations","defaultLanguage"],nodes:["externalId","x","y","paths","accessible","operationHours"],vortexes:["externalId","nodes","types","accessible"],polygons:["vertexes","geometry","canvasBounds","layer","externalId","entrances","material"],locations:["externalId","name","type","picture","description","icon","logo","sortOrder","phone","operationHours","social","color","toMap","tags","shortName","detailsUrl","locationState","metadata","siblingGroups","gallery","showSmartLabelWhenImagePresent","amenity"],categories:["name","color","sortOrder","parents","icon","iconFromDefaultList"],maps:["name","subtitle","elevation","height","width","layers","shortName","scene","group","x_scale"],mapGroups:["name"],themes:["name","themeData"],rankings:["polygons"]};E(),E();var rs=u((function(){return rs=Object.assign||u((function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}),"__assign"),rs.apply(this,arguments)}),"__assign");function yi(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ro(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var n,r,o=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(t){r={error:t}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}u(yi,"__values"),u(ro,"__read");var Q1,Tce="ENTRIES",tH="KEYS",nH="VALUES",so="",h5=function(){function t(t,e){var i=t._tree,n=Array.from(i.keys());this.set=t,this._type=e,this._path=n.length>0?[{node:i,keys:n}]:[]}return u(t,"TreeIterator"),t.prototype.next=function(){var t=this.dive();return this.backtrack(),t},t.prototype.dive=function(){if(0===this._path.length)return{done:!0,value:void 0};var t=vm(this._path),e=t.node,i=t.keys;if(vm(i)===so)return{done:!1,value:this.result()};var n=e.get(vm(i));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()},t.prototype.backtrack=function(){if(0!==this._path.length){var t=vm(this._path).keys;t.pop(),!(t.length>0)&&(this._path.pop(),this.backtrack())}},t.prototype.key=function(){return this.set._prefix+this._path.map((function(t){var e=t.keys;return vm(e)})).filter((function(t){return t!==so})).join("")},t.prototype.value=function(){return vm(this._path).node.get(so)},t.prototype.result=function(){switch(this._type){case nH:return this.value();case tH:return this.key();default:return[this.key(),this.value()]}},t.prototype[Symbol.iterator]=function(){return this},t}(),vm=u((function(t){return t[t.length-1]}),"last$1"),Sce=u((function(t,e,i){var n=new Map;if(void 0===e)return n;for(var r=e.length+1,o=r+i,s=new Uint8Array(o*r).fill(i+1),a=0;a<r;++a)s[a]=a;for(var l=1;l<o;++l)s[l*r]=l;return iH(t,e,i,n,s,1,r,""),n}),"fuzzySearch"),iH=u((function(t,e,i,n,r,o,s,a){var l,u,h=o*s;try{t:for(var c=yi(t.keys()),p=c.next();!p.done;p=c.next()){var d=p.value;if(d===so){var f=r[h-1];f<=i&&n.set(a,[t.get(d),f])}else{for(var g=o,m=0;m<d.length;++m,++g){for(var v=d[m],y=s*g,x=y-s,_=r[y],b=Math.max(0,g-i-1),M=Math.min(s-1,g+i),E=b;E<M;++E){var w=v!==e[E],A=r[x+E]+ +w,S=r[x+E+1]+1,T=r[y+E]+1,C=r[y+E+1]=Math.min(A,S,T);C<_&&(_=C)}if(_>i)continue t}iH(t.get(d),e,i,n,r,g,s,a+d)}}}catch(t){l={error:t}}finally{try{p&&!p.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}}),"recurse"),f5=function(){function t(t,e){void 0===t&&(t=new Map),void 0===e&&(e=""),this._size=void 0,this._tree=t,this._prefix=e}return u(t,"SearchableMap"),t.prototype.atPrefix=function(e){var i,n;if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");var r=ro(VM(this._tree,e.slice(this._prefix.length)),2),o=r[0],s=r[1];if(void 0===o){var a=ro(v5(s),2),l=a[0],u=a[1];try{for(var h=yi(l.keys()),c=h.next();!c.done;c=h.next()){var p=c.value;if(p!==so&&p.startsWith(u)){var d=new Map;return d.set(p.slice(u.length),l.get(p)),new t(d,e)}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(n=h.return)&&n.call(h)}finally{if(i)throw i.error}}}return new t(o,e)},t.prototype.clear=function(){this._size=void 0,this._tree.clear()},t.prototype.delete=function(t){return this._size=void 0,Ace(this._tree,t)},t.prototype.entries=function(){return new h5(this,Tce)},t.prototype.forEach=function(t){var e,i;try{for(var n=yi(this),r=n.next();!r.done;r=n.next()){var o=ro(r.value,2);t(o[0],o[1],this)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.fuzzyGet=function(t,e){return Sce(this._tree,t,e)},t.prototype.get=function(t){var e=g5(this._tree,t);return void 0!==e?e.get(so):void 0},t.prototype.has=function(t){var e=g5(this._tree,t);return void 0!==e&&e.has(so)},t.prototype.keys=function(){return new h5(this,tH)},t.prototype.set=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");return this._size=void 0,p5(this._tree,t).set(so,e),this},Object.defineProperty(t.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var t=this.entries();!t.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),t.prototype.update=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");this._size=void 0;var i=p5(this._tree,t);return i.set(so,e(i.get(so))),this},t.prototype.fetch=function(t,e){if("string"!=typeof t)throw new Error("key must be a string");this._size=void 0;var i=p5(this._tree,t),n=i.get(so);return void 0===n&&i.set(so,n=e()),n},t.prototype.values=function(){return new h5(this,nH)},t.prototype[Symbol.iterator]=function(){return this.entries()},t.from=function(e){var i,n,r=new t;try{for(var o=yi(e),s=o.next();!s.done;s=o.next()){var a=ro(s.value,2),l=a[0],u=a[1];r.set(l,u)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r},t.fromObject=function(e){return t.from(Object.entries(e))},t}(),VM=u((function(t,e,i){var n,r;if(void 0===i&&(i=[]),0===e.length||null==t)return[t,i];try{for(var o=yi(t.keys()),s=o.next();!s.done;s=o.next()){var a=s.value;if(a!==so&&e.startsWith(a))return i.push([t,a]),VM(t.get(a),e.slice(a.length),i)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i.push([t,e]),VM(void 0,"",i)}),"trackDown"),g5=u((function(t,e){var i,n;if(0===e.length||null==t)return t;try{for(var r=yi(t.keys()),o=r.next();!o.done;o=r.next()){var s=o.value;if(s!==so&&e.startsWith(s))return g5(t.get(s),e.slice(s.length))}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}}),"lookup"),p5=u((function(t,e){var i,n,r=e.length;t:for(var o=0;t&&o<r;){try{for(var s=(i=void 0,yi(t.keys())),a=s.next();!a.done;a=s.next()){var l=a.value;if(l!==so&&e[o]===l[0]){for(var u=Math.min(r-o,l.length),h=1;h<u&&e[o+h]===l[h];)++h;var c=t.get(l);if(h===l.length)t=c;else{var p=new Map;p.set(l.slice(h),c),t.set(e.slice(o,o+h),p),t.delete(l),t=p}o+=h;continue t}}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}var d=new Map;return t.set(e.slice(o),d),d}return t}),"createPath"),Ace=u((function(t,e){var i=ro(VM(t,e),2),n=i[0],r=i[1];if(void 0!==n)if(n.delete(so),0===n.size)rH(r);else if(1===n.size){var o=ro(n.entries().next().value,2),s=o[0],a=o[1];sH(r,s,a)}}),"remove"),rH=u((function(t){if(0!==t.length){var e=ro(v5(t),2),i=e[0],n=e[1];if(i.delete(n),0===i.size)rH(t.slice(0,-1));else if(1===i.size){var r=ro(i.entries().next().value,2),o=r[0],s=r[1];o!==so&&sH(t.slice(0,-1),o,s)}}}),"cleanup"),sH=u((function(t,e,i){if(0!==t.length){var n=ro(v5(t),2),r=n[0],o=n[1];r.set(o+e,i),r.delete(o)}}),"merge"),v5=u((function(t){return t[t.length-1]}),"last"),y5="or",Cce="and",Pce="and_not",mp=function(){function t(t){if(null==(null==t?void 0:t.fields))throw new Error('MiniSearch: option "fields" must be provided');this._options=rs(rs(rs({},m5),t),{searchOptions:rs(rs({},KV),t.searchOptions||{})}),this._index=new f5,this._documentCount=0,this._documentIds=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this.addFields(this._options.fields)}return u(t,"MiniSearch"),t.prototype.add=function(t){var e,i,n,r,o=this._options,s=o.extractField,a=o.tokenize,l=o.processTerm,u=o.fields,h=o.idField,c=s(t,h);if(null==c)throw new Error('MiniSearch: document does not have ID field "'.concat(h,'"'));var p=this.addDocumentId(c);this.saveStoredFields(p,t);try{for(var d=yi(u),f=d.next();!f.done;f=d.next()){var g=f.value,m=s(t,g);if(null!=m){var v=a(m.toString(),g),y=this._fieldIds[g],x=new Set(v).size;this.addFieldLength(p,y,this._documentCount-1,x);try{for(var _=(n=void 0,yi(v)),b=_.next();!b.done;b=_.next()){var M=l(b.value,g);M&&this.addTerm(y,p,M)}}catch(t){n={error:t}}finally{try{b&&!b.done&&(r=_.return)&&r.call(_)}finally{if(n)throw n.error}}}}}catch(t){e={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(e)throw e.error}}},t.prototype.addAll=function(t){var e,i;try{for(var n=yi(t),r=n.next();!r.done;r=n.next()){var o=r.value;this.add(o)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}},t.prototype.addAllAsync=function(t,e){var i=this;void 0===e&&(e={});var n=e.chunkSize,r=void 0===n?10:n,o={chunk:[],promise:Promise.resolve()},s=t.reduce((function(t,e,n){var o=t.chunk,s=t.promise;return o.push(e),(n+1)%r==0?{chunk:[],promise:s.then((function(){return new Promise((function(t){return setTimeout(t,0)}))})).then((function(){return i.addAll(o)}))}:{chunk:o,promise:s}}),o),a=s.chunk;return s.promise.then((function(){return i.addAll(a)}))},t.prototype.remove=function(t){var e,i,n,r,o,s,a=this._options,l=a.tokenize,u=a.processTerm,h=a.extractField,c=a.fields,p=a.idField,d=h(t,p);if(null==d)throw new Error('MiniSearch: document does not have ID field "'.concat(p,'"'));try{for(var f=yi(this._documentIds),g=f.next();!g.done;g=f.next()){var m=ro(g.value,2),v=m[0];if(d===m[1]){try{for(var y=(n=void 0,yi(c)),x=y.next();!x.done;x=y.next()){var _=x.value,b=h(t,_);if(null!=b){var M=l(b.toString(),_),E=this._fieldIds[_],w=new Set(M).size;this.removeFieldLength(v,E,this._documentCount,w);try{for(var A=(o=void 0,yi(M)),S=A.next();!S.done;S=A.next()){var T=u(S.value,_);T&&this.removeTerm(E,v,T)}}catch(t){o={error:t}}finally{try{S&&!S.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}}}}catch(t){n={error:t}}finally{try{x&&!x.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}return this._storedFields.delete(v),this._documentIds.delete(v),this._fieldLength.delete(v),void(this._documentCount-=1)}}}catch(t){e={error:t}}finally{try{g&&!g.done&&(i=f.return)&&i.call(f)}finally{if(e)throw e.error}}throw new Error("MiniSearch: cannot remove document with ID ".concat(d,": it is not in the index"))},t.prototype.removeAll=function(t){var e,i;if(t)try{for(var n=yi(t),r=n.next();!r.done;r=n.next()){var o=r.value;this.remove(o)}}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(e)throw e.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new f5,this._documentCount=0,this._documentIds=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},t.prototype.search=function(t,e){var i,n;void 0===e&&(e={});var r=this.executeQuery(t,e),o=[];try{for(var s=yi(r),a=s.next();!a.done;a=s.next()){var l=ro(a.value,2),u=l[0],h=l[1],c=h.score,p=h.terms,d=h.match,f=p.length,g={id:this._documentIds.get(u),score:c*f,terms:Object.keys(d),match:d};Object.assign(g,this._storedFields.get(u)),(null==e.filter||e.filter(g))&&o.push(g)}}catch(t){i={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o.sort($V),o},t.prototype.autoSuggest=function(t,e){var i,n,r,o;void 0===e&&(e={}),e=rs(rs({},Nce),e);var s=new Map;try{for(var a=yi(this.search(t,e)),l=a.next();!l.done;l=a.next()){var u=l.value,h=u.score,c=(y=u.terms).join(" ");null!=(m=s.get(c))?(m.score+=h,m.count+=1):s.set(c,{score:h,terms:y,count:1})}}catch(t){i={error:t}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}var p=[];try{for(var d=yi(s),f=d.next();!f.done;f=d.next()){var g=ro(f.value,2),m=g[0],v=g[1],y=(h=v.score,v.terms),x=v.count;p.push({suggestion:m,terms:y,score:h/x})}}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}return p.sort($V),p},Object.defineProperty(t.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),t.loadJSON=function(e,i){if(null==i)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return t.loadJS(JSON.parse(e),i)},t.getDefault=function(t){if(m5.hasOwnProperty(t))return d5(m5,t);throw new Error('MiniSearch: unknown option "'.concat(t,'"'))},t.loadJS=function(e,i){var n,r,o,s,a=e.index,l=e.documentCount,u=e.nextId,h=e.documentIds,c=e.fieldIds,p=e.fieldLength,d=e.averageFieldLength,f=e.storedFields,g=e.serializationVersion;if(1!==g&&2!==g)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var m=new t(i);m._documentCount=l,m._nextId=u,m._documentIds=GM(h),m._fieldIds=c,m._fieldLength=GM(p),m._avgFieldLength=d,m._storedFields=GM(f),m._index=new f5;try{for(var v=yi(a),y=v.next();!y.done;y=v.next()){var x=ro(y.value,2),_=x[0],b=x[1],M=new Map;try{for(var E=(o=void 0,yi(Object.keys(b))),w=E.next();!w.done;w=E.next()){var A=w.value,S=b[A];1===g&&(S=S.ds),M.set(parseInt(A,10),GM(S))}}catch(t){o={error:t}}finally{try{w&&!w.done&&(s=E.return)&&s.call(E)}finally{if(o)throw o.error}}m._index.set(_,M)}}catch(t){n={error:t}}finally{try{y&&!y.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}return m},t.prototype.executeQuery=function(t,e){var i=this;if(void 0===e&&(e={}),"string"!=typeof t){var n=rs(rs(rs({},e),t),{queries:void 0}),r=t.queries.map((function(t){return i.executeQuery(t,n)}));return this.combineResults(r,t.combineWith)}var o=this._options,s=o.tokenize,a=o.processTerm,l=o.searchOptions,u=rs(rs({tokenize:s,processTerm:a},l),e),h=u.tokenize,c=u.processTerm,p=h(t).map((function(t){return c(t)})).filter((function(t){return!!t})).map(Dce(u)).map((function(t){return i.executeQuerySpec(t,u)}));return this.combineResults(p,u.combineWith)},t.prototype.executeQuerySpec=function(t,e){var i,n,r,o,s,a,l=rs(rs({},this._options.searchOptions),e),u=(l.fields||this._options.fields).reduce((function(t,e){var i;return rs(rs({},t),((i={})[e]=d5(t,e)||1,i))}),l.boost||{}),h=l.boostDocument,c=l.weights,p=l.maxFuzzy,d=rs(rs({},KV.weights),c),f=d.fuzzy,g=d.prefix,m=this._index.get(t.term),v=this.termResults(t.term,t.term,1,m,u,h);if(t.prefix&&(s=this._index.atPrefix(t.term)),t.fuzzy){var y=!0===t.fuzzy?.2:t.fuzzy,x=y<1?Math.min(p,Math.round(t.term.length*y)):y;x&&(a=this._index.fuzzyGet(t.term,x))}if(s)try{for(var _=yi(s),b=_.next();!b.done;b=_.next()){var M=ro(b.value,2),E=M[0],w=M[1];if(C=E.length-t.term.length){null==a||a.delete(E);var A=g*E.length/(E.length+.3*C);this.termResults(t.term,E,A,w,u,h,v)}}}catch(t){i={error:t}}finally{try{b&&!b.done&&(n=_.return)&&n.call(_)}finally{if(i)throw i.error}}if(a)try{for(var S=yi(a.keys()),T=S.next();!T.done;T=S.next()){E=T.value;var C,P=ro(a.get(E),2),I=P[0];if(C=P[1]){A=f*E.length/(E.length+C);this.termResults(t.term,E,A,I,u,h,v)}}}catch(t){r={error:t}}finally{try{T&&!T.done&&(o=S.return)&&o.call(S)}finally{if(r)throw r.error}}return v},t.prototype.combineResults=function(t,e){if(void 0===e&&(e=y5),0===t.length)return new Map;var i=e.toLowerCase();return t.reduce(Ice[i])||new Map},t.prototype.toJSON=function(){var t,e,i,n,r=[];try{for(var o=yi(this._index),s=o.next();!s.done;s=o.next()){var a=ro(s.value,2),l=a[0],u=a[1],h={};try{for(var c=(i=void 0,yi(u)),p=c.next();!p.done;p=c.next()){var d=ro(p.value,2),f=d[0],g=d[1];h[f]=Object.fromEntries(g)}}catch(t){i={error:t}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}r.push([l,h])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),index:r,serializationVersion:2}},t.prototype.termResults=function(t,e,i,n,r,o,s){var a,l,u,h,c;if(void 0===s&&(s=new Map),null==n)return s;try{for(var p=yi(Object.keys(r)),d=p.next();!d.done;d=p.next()){var f=d.value,g=r[f],m=this._fieldIds[f],v=n.get(m);if(null!=v){var y=v.size,x=this._avgFieldLength[m];try{for(var _=(u=void 0,yi(v.keys())),b=_.next();!b.done;b=_.next()){var M=b.value,E=o?o(this._documentIds.get(M),e):1;if(E){var w=v.get(M),A=this._fieldLength.get(M)[m],S=i*g*E*Lce(w,y,this._documentCount,A,x),T=s.get(M);if(T){T.score+=S,Rce(T.terms,t);var C=d5(T.match,e);C?C.push(f):T.match[e]=[f]}else s.set(M,{score:S,terms:[t],match:(c={},c[e]=[f],c)})}}}catch(t){u={error:t}}finally{try{b&&!b.done&&(h=_.return)&&h.call(_)}finally{if(u)throw u.error}}}}}catch(t){a={error:t}}finally{try{d&&!d.done&&(l=p.return)&&l.call(p)}finally{if(a)throw a.error}}return s},t.prototype.addTerm=function(t,e,i){var n=this._index.fetch(i,eH),r=n.get(t);if(null==r)(r=new Map).set(e,1),n.set(t,r);else{var o=r.get(e);r.set(e,(o||0)+1)}},t.prototype.removeTerm=function(t,e,i){if(this._index.has(i)){var n=this._index.fetch(i,eH),r=n.get(t);null==r||null==r.get(e)?this.warnDocumentChanged(e,t,i):r.get(e)<=1?r.size<=1?n.delete(t):r.delete(e):r.set(e,r.get(e)-1),0===this._index.get(i).size&&this._index.delete(i)}else this.warnDocumentChanged(e,t,i)},t.prototype.warnDocumentChanged=function(t,e,i){var n,r;if(null!=console&&null!=console.warn)try{for(var o=yi(Object.keys(this._fieldIds)),s=o.next();!s.done;s=o.next()){var a=s.value;if(this._fieldIds[a]===e)return void console.warn("MiniSearch: document with ID ".concat(this._documentIds.get(t),' has changed before removal: term "').concat(i,'" was not present in field "').concat(a,'". Removing a document after it has changed can corrupt the index!'))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.addDocumentId=function(t){var e=this._nextId;return this._documentIds.set(e,t),this._documentCount+=1,this._nextId+=1,e},t.prototype.addFields=function(t){for(var e=0;e<t.length;e++)this._fieldIds[t[e]]=e},t.prototype.addFieldLength=function(t,e,i,n){var r=this._fieldLength.get(t);null==r&&this._fieldLength.set(t,r=[]),r[e]=n;var o=(this._avgFieldLength[e]||0)*i+n;this._avgFieldLength[e]=o/(i+1)},t.prototype.removeFieldLength=function(t,e,i,n){var r=this._avgFieldLength[e]*i-n;this._avgFieldLength[e]=r/(i-1)},t.prototype.saveStoredFields=function(t,e){var i,n,r=this._options,o=r.storeFields,s=r.extractField;if(null!=o&&0!==o.length){var a=this._storedFields.get(t);null==a&&this._storedFields.set(t,a={});try{for(var l=yi(o),u=l.next();!u.done;u=l.next()){var h=u.value,c=s(e,h);void 0!==c&&(a[h]=c)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(i)throw i.error}}}},t}(),d5=u((function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}),"getOwnProperty"),Ice=((Q1={})[y5]=function(t,e){var i,n;try{for(var r=yi(e.keys()),o=r.next();!o.done;o=r.next()){var s=o.value,a=t.get(s);if(null==a)t.set(s,e.get(s));else{var l=e.get(s),u=l.score,h=l.terms,c=l.match;a.score=a.score+u,a.match=Object.assign(a.match,c),JV(a.terms,h)}}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return t},Q1[Cce]=function(t,e){var i,n,r=new Map;try{for(var o=yi(e.keys()),s=o.next();!s.done;s=o.next()){var a=s.value,l=t.get(a);if(null!=l){var u=e.get(a),h=u.score,c=u.terms,p=u.match;JV(l.terms,c),r.set(a,{score:l.score+h,terms:l.terms,match:Object.assign(l.match,p)})}}}catch(t){i={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return r},Q1[Pce]=function(t,e){var i,n;try{for(var r=yi(e.keys()),o=r.next();!o.done;o=r.next()){var s=o.value;t.delete(s)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return t},Q1),ZV=1.2,QV=.7,Oce=.5,Lce=u((function(t,e,i,n,r){return Math.log(1+(i-e+.5)/(e+.5))*(Oce+t*(ZV+1)/(t+ZV*(1-QV+QV*n/r)))}),"calcBM25Score"),Dce=u((function(t){return function(e,i,n){return{term:e,fuzzy:"function"==typeof t.fuzzy?t.fuzzy(e,i,n):t.fuzzy||!1,prefix:"function"==typeof t.prefix?t.prefix(e,i,n):!0===t.prefix}}}),"termToQuerySpec"),m5={idField:"id",extractField:function(t,e){return t[e]},tokenize:function(t,e){return t.split(Bce)},processTerm:function(t,e){return t.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[]},KV={combineWith:y5,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375}},Nce={prefix:function(t,e,i){return e===i.length-1}},Rce=u((function(t,e){t.includes(e)||t.push(e)}),"assignUniqueTerm"),JV=u((function(t,e){var i,n;try{for(var r=yi(e),o=r.next();!o.done;o=r.next()){var s=o.value;t.includes(s)||t.push(s)}}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}}),"assignUniqueTerms"),$V=u((function(t,e){var i=t.score;return e.score-i}),"byScore"),eH=u((function(){return new Map}),"createMap"),GM=u((function(t){var e,i,n=new Map;try{for(var r=yi(Object.keys(t)),o=r.next();!o.done;o=r.next()){var s=o.value;n.set(parseInt(s,10),t[s])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return n}),"objectToNumericMap"),Bce=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;E();var x5=[0,4,6,8,10],Cr=u((()=>{let t=new Array(16).fill(0),e=4294967296*Math.random();for(let i=0;i<t.length;i++)i>0&&!(3&i)&&(e=4294967296*Math.random()),t[i]=e>>>((3&i)<<3)&255;let i=t.map((t=>t.toString(16).padStart(2,"0")));return i[6]="4"+i[6][1],i[8]=["8","9","a","b"].includes(i[7][0])?i[7]:"a"+i[7][1],x5.map(((t,e)=>i.slice(t,e===x5.length-1?void 0:x5[e+1]).join(""))).join("-")}),"randomId");E();var kce=["0","1","2","3","4","5","6","7","8","9"],qce=["۱","۲","۳","۴","۵","۶","۷","۸","۹","۰"],Fce=["０","１","２","３","４","５","６","７","８","９"],Uce=["၀","၁","၂","၃","၄","၅","၆","၇","၈","၉"],Hrt=[...kce,...qce,...Fce,...Uce],oH=["about","after","all","also","am","an","and","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","has","had","he","have","her","here","him","himself","his","how","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your","a","i"];E();var zce=32,oa=!1,Gce=120,b5=0,w5=class{constructor(t){A(this,"_callback"),A(this,"_frameCount"),A(this,"_ordering"),A(this,"_supersededBy"),A(this,"name"),A(this,"_remainingFrameCount"),A(this,"_lastFrameTime"),A(this,"userdata"),this._callback=t.callback,this._frameCount=null!=t.frameCount?t.frameCount:1,this._ordering=null!=t.ordering?t.ordering:0,this._supersededBy=null!=t.supersededBy?new Set(t.supersededBy):new Set,this.name=t.name,this.userdata=t.userdata,this._remainingFrameCount=this._frameCount,this._lastFrameTime=0,oa&&Le.log("update instantiated",this.name)}getLastFrameTime(){return this._lastFrameTime}};u(w5,"FrameUpdate");var xs=w5,M5=class{constructor(t){if(A(this,"_postponed"),A(this,"userdata"),A(this,"_priority"),A(this,"_group"),A(this,"name"),A(this,"_lastFrameTime"),A(this,"_callback"),A(this,"_complete"),A(this,"_scheduled"),A(this,"_cancelled"),null!=t.group&&null!=t.priority)throw new Error("cannot specify task priority individually within group");if(null!=t.group&&null!=t.postponeOnAdd)throw new Error("cannot specify task postpone individually within group");this._callback=t.callback,this._group=null!=t.group?t.group:null,this._priority=null!=t.priority?t.priority:0,this._postponed=null!=t.postponeOnAdd&&t.postponeOnAdd,this.name=t.name,this.userdata=t.userdata||{},this._complete=!1,this._scheduled=!1,this._cancelled=!1,this._lastFrameTime=0,oa&&Le.log("task instantiated",this.name)}isComplete(){return this._complete}getLastFrameTime(){return this._lastFrameTime}};u(M5,"FrameTask");var Hi=M5,E5=class{constructor(t){A(this,"_postponed"),A(this,"_onComplete"),A(this,"_priority"),A(this,"userdata"),A(this,"name"),A(this,"_tasks"),A(this,"_scheduledTasks"),A(this,"_scheduled"),A(this,"_cancelled"),this._onComplete=null!=t.onComplete?t.onComplete:()=>{},this._priority=null!=t.priority?t.priority:0,this._postponed=null!=t.postponeOnAdd&&t.postponeOnAdd,this.name=t.name,this.userdata=t.userdata,this._tasks=new Set,this._scheduledTasks=new Set,this._scheduled=!1,this._cancelled=!1,oa&&Le.log("task group instantiated",this.name)}isComplete(){return 0===this._scheduledTasks.size}getTasks(){return Array.from(this._tasks.values())}clear(){this._tasks.clear(),this._scheduledTasks.clear()}_popTask(){for(let t of this._scheduledTasks)return this._scheduledTasks.delete(t),t}};u(E5,"FrameTaskGroup");var dc=E5,T5=class{constructor(t){A(this,"_maxMillisecondsPerFrame"),A(this,"_time"),this._maxMillisecondsPerFrame=null!=(null==t?void 0:t.maxMillisecondsPerFrame)?t.maxMillisecondsPerFrame:zce,this._time=0}beginFrame(){this._time=performance.now()+this._maxMillisecondsPerFrame}hasTimeRemaining(){return performance.now()<=this._time}};u(T5,"RealTimeTimer");var _5=T5,S5=class{constructor(t){var e;A(this,"_raf"),A(this,"_timer"),A(this,"_performance"),A(this,"_scheduledUpdatesByOrdering"),A(this,"_scheduledTasksByPriority"),A(this,"_postponedTasks"),A(this,"_requestAnimationFrameHandle"),A(this,"_updatesToRunThisFrame"),A(this,"_lastFrameTime",0),A(this,"_updatesRunLastFrame"),this._timer=null!=(null==t?void 0:t.timer)?t.timer:new _5,this._performance=null!=(null==t?void 0:t.performance)&&t.performance,this._scheduledUpdatesByOrdering=new ym,this._scheduledTasksByPriority=new ym,this._postponedTasks=new Set,this._requestAnimationFrameHandle=null,this._updatesToRunThisFrame=[],this._lastFrameTime=0,this._updatesRunLastFrame=new Set,this.update=this.update.bind(this),oa&&Le.log("task scheduler instantiated"),null!=(e=globalThis.MappedinDebug)&&e.TEST_IOS&&(this._raf=t=>setTimeout(t,16))}clear(){for(let t of this._scheduledTasksByPriority.values())t._cancelled=!0;for(let t of this._postponedTasks.values())t._cancelled=!0;this._scheduledUpdatesByOrdering=new ym,this._scheduledTasksByPriority=new ym,this._postponedTasks=new Set,this._lastFrameTime=0,this._updatesRunLastFrame.clear(),oa&&Le.log("task scheduler cleared")}destroy(){this.clear()}requestAnimationFrame(){null==this._requestAnimationFrameHandle&&(this._requestAnimationFrameHandle="function"==typeof this._raf?this._raf(this.update):requestAnimationFrame(this.update))}update(t){let e;this._timer.beginFrame(),this._performance&&(e=performance.now());let i=!1;oa&&(0===b5&&(i=!0),++b5,b5%=Gce);let n=this._scheduledUpdatesByOrdering.keys();for(let t=n.length-1;t>=0;--t){let e=n[t];for(let t of this._scheduledUpdatesByOrdering.get(e).values())this._updatesToRunThisFrame.push(t),i&&Le.log("update scheduled to run this frame",t.name)}for(let t of this._updatesToRunThisFrame){--t._remainingFrameCount,t._remainingFrameCount<=0&&this._scheduledUpdatesByOrdering.delete(t._ordering,t),t._superseded=!1;for(let e of this._updatesToRunThisFrame)t._supersededBy.has(e)&&(t._superseded=!0,i&&Le.log("update superseded",t.name,e.name))}for(let t=0;t<this._updatesToRunThisFrame.length;++t)this._updatesToRunThisFrame[t]._superseded&&(this._updatesToRunThisFrame.splice(t,1),--t);for(let e of this._updatesToRunThisFrame){let n;this._performance&&(n=performance.now()),e._callback(t),this._performance&&(e._lastFrameTime=performance.now()-n),i&&Le.log("update completed",e.name)}this._updatesRunLastFrame.clear();for(let t of this._updatesToRunThisFrame)this._updatesRunLastFrame.add(t);if(this._updatesToRunThisFrame.splice(0,this._updatesToRunThisFrame.length),this._scheduledTasksByPriority.size>0)do{this._executeOneTask(t)}while(this._timer.hasTimeRemaining()&&this._scheduledTasksByPriority.size>0);this._performance&&(this._lastFrameTime=performance.now()-e),this._requestAnimationFrameHandle=null,(this._scheduledUpdatesByOrdering.size>0||this._scheduledTasksByPriority.size>0)&&this.requestAnimationFrame()}flushTasks(){for(;this._scheduledTasksByPriority.size>0;)this._executeOneTask(performance.now())}getLastFrameTime(){return this._lastFrameTime}getUpdatesRunLastFrame(){return this._updatesRunLastFrame}_executeOneTask(t){let e,i=this._scheduledTasksByPriority.popFromMaxKey(),n=null;Le.assert(void 0!==i),Object.getPrototypeOf(i)===dc.prototype&&(n=i,i=n._popTask()),Le.assert(void 0!==i),Le.assert(Object.getPrototypeOf(i)===Hi.prototype),this._performance&&(e=performance.now()),i._callback(t),i._complete=!0,this._performance&&(i._lastFrameTime=performance.now()-e),oa&&Le.log("task completed",i.name),null!=n&&(n.isComplete()?(n.clear(),n._onComplete(),oa&&Le.log("group completed",n.name)):this._scheduledTasksByPriority.insert(n._priority,n))}scheduleUpdate(t){t._remainingFrameCount=t._frameCount,this._scheduledUpdatesByOrdering.insert(t._ordering,t),this.requestAnimationFrame()}scheduleTask(t){if(Object.getPrototypeOf(t)===dc)throw new Error("frame task groups are automatically scheduled when a task is added to them and cannot be manually scheduled: "+t.name);if(t._scheduled)throw new Error("cannot schedule already scheduled task: "+t.name);if(t._cancelled)throw new Error("cannot schedule cancelled task: "+t.name);let e=t;"_group"in t&&null!=t._group&&(t._group._tasks.add(t),t._group._scheduledTasks.add(t),e=t._group),e._postponed?this._postponedTasks.add(e):this._scheduledTasksByPriority.insert(e._priority,e),t._scheduled=!0,e._scheduled=!0,oa&&Le.log("task scheduled",t.name),this.requestAnimationFrame()}cancelUpdate(t){this._scheduledUpdatesByOrdering.delete(t._ordering,t),oa&&Le.log("update cancelled",t.name)}cancelTask(t){if(!t._scheduled)throw new Error("cannot cancel task that has not been scheduled: "+t.name);if(t._cancelled)throw new Error("cannot cancel task that has already been cancelled: "+t.name);if("_group"in t&&null!=t._group){let e=t._group.isComplete();t._group._tasks.delete(t),t._group._scheduledTasks.delete(t),t._group.isComplete()&&(this._scheduledTasksByPriority.delete(t._group._priority,t._group),e||t._group._onComplete())}else this._scheduledTasksByPriority.delete(t._priority,t),this._postponedTasks.delete(t);Object.getPrototypeOf(t)===Hi.prototype?t._cancelled=!0:"clear"in t&&t.clear(),oa&&Le.log("task cancelled",t.name)}postponeTask(t){if("_group"in t&&null!=t._group)throw new Error("cannot postpone individual tasks in group: "+t.name);if(t._cancelled)throw new Error("cannot postpone cancelled task: "+t.name);if(!t._postponed){if(Object.getPrototypeOf(t)===Hi.prototype){if("_complete"in t)return;if(!t._scheduled)throw new Error("cannot postpone task that has not been scheduled: "+t.name)}this._scheduledTasksByPriority.delete(t._priority,t),(Object.getPrototypeOf(t)===Hi.prototype||!t.isComplete())&&this._postponedTasks.add(t),t._postponed=!0,oa&&Le.log("task postponed",t.name)}}resumeTask(t){if("_group"in t&&null!=t._group)throw new Error("cannot resume individual tasks in groups");if(t._cancelled)throw new Error("cannot resume cancelled task");if(t._postponed){if(Object.getPrototypeOf(t)===Hi.prototype){if("_complete"in t&&t._complete)return;if(!t._scheduled)throw new Error("cannot resume unscheduled task")}this._postponedTasks.delete(t),(Object.getPrototypeOf(t)===Hi.prototype||!t.isComplete())&&this._scheduledTasksByPriority.insert(t._priority,t),t._postponed=!1,this.requestAnimationFrame(),oa&&Le.log("task resumed",t.name)}}setTaskPriority(t,e){if(Object.getPrototypeOf(t)===Hi.prototype&&!t._scheduled)throw new Error("task must be scheduled to be reprioritized");this._scheduledTasksByPriority.has(t._priority,t)&&(this._scheduledTasksByPriority.delete(t._priority,t),this._scheduledTasksByPriority.insert(e,t)),t._priority=e,oa&&Le.log("task priority changed",t.name,e)}};u(S5,"TaskScheduler");var gp=S5,A5=class{constructor(){A(this,"_map"),A(this,"_size"),A(this,"_sortedKeys"),this._map=new Map,this._size=0,this._sortedKeys=[]}has(t,e){return null!=this._map.get(t)&&this._map.get(t).has(e)}get(t){return this._map.get(t)}insert(t,e){if(Le.assert("number"==typeof t&&Number.isFinite(t)),null==this._map.get(t)){this._map.set(t,new Set);for(let e=0;e<=this._sortedKeys.length;++e)if(e===this._sortedKeys.length||t<this._sortedKeys[e]){this._sortedKeys.splice(e,0,t);break}}this._map.get(t).has(e)||(this._map.get(t).add(e),++this._size)}delete(t,e){null!=this._map.get(t)&&this._map.get(t).has(e)&&(this._map.get(t).delete(e),--this._size,0===this._map.get(t).size&&(this._map.delete(t),this._sortedKeys.splice(this._sortedKeys.indexOf(t),1)))}pop(t){if(null!=this._map.get(t)){let e;for(e of this._map.get(t).values()){this._map.get(t).delete(e),--this._size;break}return 0===this._map.get(t).size&&(this._map.delete(t),this._sortedKeys.splice(this._sortedKeys.indexOf(t),1)),e}}popFromMaxKey(){if(this._sortedKeys.length>0)return this.pop(this._sortedKeys[this._sortedKeys.length-1])}values(){let t=this._map.keys(),e=null,i={[Symbol.iterator]:()=>i,next:()=>{if(null==e){let i=t.next();if(i.done)return i;e=this._map.get(i.value).values()}let i=e.next();for(;i.done;){let n=t.next();if(n.done)return n;e=this._map.get(n.value).values(),i=e.next()}return i}};return i}keys(){return this._sortedKeys}get size(){let t=0;for(let e of this._map.values())t+=e.size;return Le.assert(t===this._size),t}};u(A5,"Multimap");var gc,Ka,kh,mu,Pr,J1,$1,bm,ey,ty,ny,iy,_m,vc,HM,jM,qh,ry,WM,YM,XM,lH,ym=A5,mc=u((t=>t.normalize("NFD").replace(/[\u0300-\u036f|\u2019|\u0027|\']/g,"").toLowerCase()),"removeAccents"),xm="",Vce=.09,Hce=1,jce=.025,Wce=.5,Yce=5e-4,Xce=5e-4,Zce=.01,Qce=.05,aH=1,Kce=.01,Jce=.2,$ce={MappedinCategory:"categories",MappedinLocation:"locations"},ehe={searchDescriptions:!0,searchTags:!0,searchTagsInCategories:!1,searchDescriptionsInCategories:!1,stopWords:oH,jsonIndex:void 0,useLocationRank:!0,emitAnalyticsEvents:"production"===B.env.NODE_ENV,constants:{PRIMARY_INDEX_FUZZYNESS:Vce,PRIMARY_INDEX_WEIGHT:Hce,SECONDARY_INDEX_WEIGHT:jce,CATEGORY_NAME_WEIGHT:Wce,LOCATION_NAME_WEIGHT:aH,CATEGORY_LOCATION_DESCRIPTION_WEIGHT:Yce,CATEGORY_LOCATION_TAGS_WEIGHT:Xce,CATEGORY_LOCATION_NAME_WEIGHT:Zce,PRIMARY_INDEX_TAGS_NAME_WEIGHT:Qce,LOCATION_DEFAULT_RANK:aH,RATIO_OF_FUZZY_TO_EXACT:Kce,RATIO_OF_PREFIX_TO_EXACT:Jce}},C5=class{constructor(t,e){var i;te(this,XM),te(this,gc,void 0),te(this,Ka,void 0),te(this,kh,void 0),te(this,mu,void 0),te(this,Pr,void 0),te(this,J1,new gp({performance:!0})),te(this,$1,void 0),te(this,bm,void 0),te(this,ey,new Map),te(this,ty,void 0),te(this,ny,void 0),te(this,iy,void 0),A(this,"buildIndices",u((()=>{var t,e;ce(this,qh,new Promise((t=>{ce(this,ry,t)})));let{PRIMARY_INDEX_FUZZYNESS:i,PRIMARY_INDEX_WEIGHT:n,CATEGORY_NAME_WEIGHT:r,RATIO_OF_FUZZY_TO_EXACT:o,RATIO_OF_PREFIX_TO_EXACT:s,PRIMARY_INDEX_TAGS_NAME_WEIGHT:a}=M(this,Pr).constants,l=["object","query","weight","tag","rank"],u={fields:["query","name","tag"],storeFields:l,searchOptions:{combineWith:"OR",prefix:!0,fuzzy:i},boost:{name:n,query:n,tag:a},weights:{fuzzy:o,prefix:s},boostDocument:t=>t.includes("MappedinLocation")?n:t.includes("MappedinCategory")?r:n},h={fields:["description"],storeFields:l,searchOptions:{combineWith:"AND",prefix:!0,fuzzy:.1},processTerm:(t,e)=>{var i;return null!=(i=M(this,$1))&&i.has(t.toLowerCase())?null:t.toLowerCase()}},c={fields:["category.locations.description","category.locations.tags","category.locations.name"],storeFields:[...l,"ref","category.locations.tags","category.locations.name","category.locations.description"],searchOptions:{combineWith:"AND",prefix:!0,fuzzy:!1}};if(null!=(t=M(this,Pr))&&t.jsonIndex){let{primary:t,secondary:i,extra:n}=JSON.parse(null==(e=M(this,Pr))?void 0:e.jsonIndex);ce(this,Ka,mp.loadJS(t,u)),ce(this,kh,mp.loadJS(i,h)),ce(this,mu,mp.loadJS(n,c))}else ce(this,Ka,new mp(u)),ce(this,kh,new mp(h)),ce(this,mu,new mp(c)),M(this,gc).locations.forEach(M(this,HM)),M(this,gc).categories.forEach(M(this,jM));M(this,J1).update(performance.now())}),"buildIndices")),te(this,_m,0),te(this,vc,u((t=>{XS(this,_m)._++,M(this,J1).scheduleUpdate(new xs({name:"updateIndex",ordering:0,frameCount:1,callback:()=>{t(),XS(this,_m)._--,0===M(this,_m)&&M(this,ry).call(this)}}))}),"#addTask")),te(this,HM,u((t=>{var e,i,n;let{SECONDARY_INDEX_WEIGHT:r,LOCATION_DEFAULT_RANK:o,PRIMARY_INDEX_TAGS_NAME_WEIGHT:s}=M(this,Pr).constants,a=o;null!=(e=M(this,Pr))&&e.useLocationRank&&(a=Array.isArray(t.polygons)?Math.max(...t.polygons.map((t=>{var e,i;return null!=(e=t.rank)&&e.score?null==(i=t.rank)?void 0:i.score:o})),o):o),M(this,vc).call(this,(()=>{M(this,Ka).add({name:mc(t.name),tags:"",id:"MappedinLocation_"+t.id,weight:o,rank:a})})),null!=(i=M(this,Pr))&&i.searchTags&&Array.isArray(t.tags)&&t.tags.forEach((e=>{M(this,Ka).add({name:"",tag:mc(e),id:"MappedinLocation_"+t.id,weight:s,rank:a})})),null!=(n=M(this,Pr))&&n.searchDescriptions&&M(this,vc).call(this,(()=>M(this,kh).add({description:mc(t.description||""),id:"MappedinLocation_"+t.id,weight:r,rank:a})))}),"#processLocation")),te(this,jM,u((t=>{var e,i;let{CATEGORY_LOCATION_DESCRIPTION_WEIGHT:n,CATEGORY_LOCATION_TAGS_WEIGHT:r,CATEGORY_LOCATION_NAME_WEIGHT:o,CATEGORY_NAME_WEIGHT:s}=M(this,Pr).constants;M(this,vc).call(this,(()=>M(this,Ka).add({name:mc(t.name||""),description:"",id:"MappedinCategory_"+t.id,weight:s})));let a=t.locations.reduce(((t,e)=>t+" ".concat(xm," ")+e.name),"")+" ".concat(xm);if(null!=(e=M(this,Pr))&&e.searchDescriptionsInCategories&&t.locations.forEach((e=>{null!=e.description&&M(this,vc).call(this,(()=>M(this,mu).add({id:"MappedinCategory_"+t.id,"category.locations.description":mc(e.description),ref:e.name,weight:n})))})),null!=(i=M(this,Pr))&&i.searchTagsInCategories){let e=t.locations.reduce(((t,e)=>{var i;return t+(null==(i=e.tags)?void 0:i.reduce(((t,e)=>t+" ".concat(xm," ")+e),""))+" ".concat(xm)}),"");M(this,vc).call(this,(()=>M(this,mu).add({"category.locations.tags":mc(e),id:"MappedinCategory_"+t.id,weight:r})))}M(this,vc).call(this,(()=>M(this,mu).add({"category.locations.name":mc(a),id:"MappedinCategory_"+t.id,weight:o})))}),"#processCategory")),te(this,qh,void 0),te(this,ry,void 0),te(this,WM,u((t=>{var e;let i=t.score,{object:n,id:r,weight:o,rank:s}=t,[a,l]=r.split("_"),u=n||M(this,gc).getCollectionItemById($ce[a],l);return s&&null!=(e=M(this,Pr))&&e.useLocationRank&&(i+=s),o&&(i*=o),{score:i,type:a,object:u}}),"#processSearchResult")),te(this,YM,u(((t,e)=>{for(let i in t.match)t.match[i].forEach((n=>{let r=t.ref||t[n]||e.object[n];if("category.locations.tags"===n||"category.locations.name"===n){let e=new RegExp("[^".concat(xm,"]* ")+i+" [^".concat(xm,"]*"),"ig").exec(t[n]);null!=e&&(r=e[0].slice(1,-1))}e.matches.push({term:i,weight:t.weight,matchesOn:n,value:r})}))}),"#addMatches")),ce(this,bm,Qa.create({...t.options,testMode:!1===(null==e?void 0:e.emitAnalyticsEvents)})),ce(this,Pr,{...ehe,...e}),ce(this,gc,t),ce(this,$1,new Set(null==(i=M(this,Pr))?void 0:i.stopWords));let n=M(this,gc).venue.slug;M(this,gc).on(0,this.buildIndices),this.buildIndices(),ce(this,ty,wm((t=>{M(this,bm).trackSearchSuggest({query:t}),ht.addPendingEvent(new Kv({venue:n}))}),300)),ce(this,ny,wm((t=>{M(this,bm).trackSearch({query:t}),ht.addPendingEvent(new Qv({venue:n}))}),300)),ce(this,iy,wm((()=>{ht.addPendingEvent(new Xv({venue:n}))}),300)),ht.addPendingEvent(new Zv({search_descriptions:M(this,Pr).searchDescriptions,search_tags:M(this,Pr).searchTags,search_descriptions_in_categories:M(this,Pr).searchDescriptionsInCategories,search_tags_in_categories:M(this,Pr).searchTagsInCategories,use_location_rank:M(this,Pr).useLocationRank,venue:n}))}async suggest(t){await M(this,qh);let{PRIMARY_INDEX_FUZZYNESS:e,PRIMARY_INDEX_WEIGHT:i,PRIMARY_INDEX_TAGS_NAME_WEIGHT:n,RATIO_OF_FUZZY_TO_EXACT:r,RATIO_OF_PREFIX_TO_EXACT:o}=M(this,Pr).constants,s=M(this,Ka).autoSuggest(t,{fields:["name","tag","query"],combineWith:"AND",prefix:!0,fuzzy:e,boost:{name:i,query:i,tag:n},weights:{fuzzy:r,prefix:o}});return M(this,ty).call(this,t),{total:s.length,hits:s.map((t=>({text:t.suggestion})))}}async search(t){await M(this,qh);let e=tt(this,XM,lH).call(this,t);return M(this,ny).call(this,t),e}async toJSON(){return await M(this,qh),JSON.stringify({primary:M(this,Ka),secondary:M(this,kh),extra:M(this,mu)})}async addQuery(t){let e,i,{query:n,object:r,weight:o=1}=t;await M(this,qh),e=r instanceof Ja?"MappedinLocation":r instanceof yc?"MappedinCategory":"Custom","MappedinLocation"===e||"MappedinCategory"===e?i=e+"_"+r.id:"string"==typeof r.id?i="Custom_"+r.id:(i=M(this,ey).get(r),i||(i="Custom_"+Cr(),M(this,ey).set(r,i))),M(this,Ka).add({id:i,weight:o,object:r,query:mc(n)}),M(this,iy).call(this)}};gc=new WeakMap,Ka=new WeakMap,kh=new WeakMap,mu=new WeakMap,Pr=new WeakMap,J1=new WeakMap,$1=new WeakMap,bm=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,iy=new WeakMap,_m=new WeakMap,vc=new WeakMap,HM=new WeakMap,jM=new WeakMap,qh=new WeakMap,ry=new WeakMap,WM=new WeakMap,YM=new WeakMap,XM=new WeakSet,lH=u((function(t){let e=[],i=mc(t);e=[...M(this,Ka).search(i),...M(this,kh).search(i),...M(this,mu).search(i)].sort(((t,e)=>e.score-t.score));let n={};for(let t of e){let e=M(this,WM).call(this,t);n[t.id]?n[t.id].score+=e.score:n[t.id]={...e,matches:[]},M(this,YM).call(this,t,n[t.id])}return Object.keys(n).map((t=>({...n[t],matches:n[t].matches.sort(((t,e)=>e.weight-t.weight))}))).sort(((t,e)=>e.score-t.score))}),"#doSearch"),u(C5,"OfflineSearch");var K1=C5;E();var xc=(t=>(t.MULTI_GEOMETRY="MULTI_GEOMETRY",t.SINGLE_GEOMETRY="SINGLE_GEOMETRY",t))(xc||{});E();var oy,ay,ly,Mm,sy=class t{constructor(t,e){te(this,oy,void 0),te(this,ay,void 0),te(this,ly,void 0),te(this,Mm,{}),A(this,"defaultMap",""),A(this,"address",""),A(this,"city",""),A(this,"countrycode",""),A(this,"externalId",""),A(this,"id",""),A(this,"latitude"),A(this,"logo"),A(this,"longitude"),A(this,"name",""),A(this,"operationHours"),A(this,"postal",""),A(this,"slug",""),A(this,"state",""),A(this,"telephone",""),A(this,"tzid",""),A(this,"tzidOverride",""),A(this,"utcOffset",""),A(this,"website",""),A(this,"secureContentStorage",!1),A(this,"defaultLanguage"),A(this,"languages",[]),A(this,"topLocations",[]),ce(this,ay,t),ce(this,oy,e),Object.assign(this,e)}get metadata(){return ht.addPendingEvent(new bv({venue:this.slug})),M(this,ly)}set metadata(t){ce(this,ly,t)}static hydrate(e,i){return new t(i,e)}static async fetch(e){let i={fields:e.options.things.venue,slug:e.options.venue,limit:1};try{let n=await Ir(e.options,"venue",i);return new t(e,Array.isArray(n)?n[0]:n)}catch(t){return Le.error("Fetch Venue:",t),{}}}get isMultiBuilding(){if(null==M(this,Mm).isMultiBuilding){let t=M(this,ay).maps,e=t.reduce(((t,e)=>t.add(e.elevation)),new Set),i=t.length!==e.size;M(this,Mm).isMultiBuilding=i}return M(this,Mm).isMultiBuilding}toJSON(){return M(this,oy)}};oy=new WeakMap,ay=new WeakMap,ly=new WeakMap,Mm=new WeakMap,u(sy,"MappedinVenue");var bc=sy,P5=globalThis.fetch;function _o(){if(null==P5)throw new Error("fetch is not available in your environment. Pass your own function into `setFetchFn` (node-fetch, etc)");return P5}function the(t){P5=t}u(_o,"isomorphicFetch"),u(the,"setFetchFn");var uH,nhe=null==(uH=null==B?void 0:B.env)?void 0:uH.npm_package_version;globalThis.btoa||(globalThis.btoa=cH.encode);var ihe=["ar"];function vp(t){let e={...u5,things:XV,...t};return e.headers={...e.headers,"mappedin-sdk-version":nhe},t.platformString&&(e.headers={...e.headers,"mappedin-platform-version":t.platformString}),e.noAuth||(e.accessToken?e.authorization="Bearer ".concat(e.accessToken):e.clientId&&e.clientSecret&&(e.authorization="Basic ".concat(globalThis.btoa("".concat(e.clientId,":").concat(e.clientSecret))))),e}function hH(t){return t.endsWith("/")?t:"".concat(t,"/")}async function rhe(t){let e={emitAnalyticsEvents:!0,version:"2.0.0",...t},i=vp({...e}),n=new sa(i),r=await mH(i);if("1.0.0"===i.version){let t=kV(await NV(r));return n.hydrateFromMVFv1(t),n}let o=BV(s5(await r5(r)),i.override);return"function"==typeof e.onMVFParsed&&e.onMVFParsed(o),await n.hydrateFromMVF(o),ht.addPendingEvent(new lv({venue:i.venue})),n}async function she(t){let e={emitAnalyticsEvents:!0,clientId:t.key,clientSecret:t.secret,venue:t.mapId,...t},i=vp({...e}),n=new sa(i);try{if(!i.key)throw new Error("key is required.");if(!i.secret)throw new Error("secret is required.");if(!i.mapId)throw new Error("mapId is required.");let t=await che(i),r=s5(await r5(t));"function"==typeof e.onMVFParsed&&e.onMVFParsed(r),n.hydrateFromMVF(r)}catch(t){Le.error("Failed to get Maker map data.",t)}return n}async function fH(t){let e={emitAnalyticsEvents:!0,secure:!0,...t},i=vp({baseUrl:"https://api-gateway.mappedin.com/",...e}),n="public/1/".concat(i.useDraftData?"draft/":""),r=new sa({...i,baseUrl:i.baseUrl+n});return await r.fetch(),e.emitAnalyticsEvents,ht.addPendingEvent(new av({venue:i.venue})),r}u(vp,"parseOptions"),u(hH,"normalizeUrl"),u(rhe,"getVenueMVF"),u(she,"getVenueMaker"),u(fH,"getVenue");var I5={shouldPopulateBundledImagesAsBlobs:!(typeof globalThis.navigator<"u"&&"ReactNative"==globalThis.navigator.product)};async function pH(t){let e=vp({baseUrl:"https://api-gateway.mappedin.com/",...I5,...t}),{url:i,updated_at:n}=await dH(t),r=await _o()(i,{mode:"cors"}),{data:o,format:s="jsonstring"}=await r.json();if("jsonstring"!==s)throw new Error("Unrecognized format ".concat(s));let a=new sa(e);return await a.hydrate(o,e.shouldPopulateBundledImagesAsBlobs),a.updatedAt=n,a}async function dH(t){let e=vp({baseUrl:"https://api-gateway.mappedin.com/",...I5,...t}),{version:i,venue:n}=t,r="".concat(t.bundleBaseUri||e.baseUrl+"exports/legacy".concat(null!=e.language&&ihe.includes(e.language)?"-"+e.language:"","/1/bundle"),"?venue=").concat(n,"&version=1.0.0");return e.language=void 0,await ZM(e,r)}async function ohe(t,{url:e,updated_at:i}){let n=vp({baseUrl:"https://api-gateway.mappedin.com/",...I5,...t}),r=await _o()(e,{mode:"cors"}),{data:o,format:s="jsonstring"}=await r.json();if("jsonstring"!==s)throw new Error("Unrecognized format".concat(s));let a=new sa(n);return await a.hydrate(o,n.shouldPopulateBundledImagesAsBlobs),a.updatedAt=i,a}async function ahe(t){var e;let i=vp({baseUrl:"https://api-gateway.mappedin.com/",...u5,...t}),n="".concat(i.bundleBaseUri||i.baseUrl+"exports/mvf/1/bundle","?venue=").concat(i.venue,"&version=").concat(null!=(e=i.version)?e:"2.0.0");return i.headers["Content-Type"]="application/zip",await ZM(i,n)}async function mH(t){return new Promise((async(e,i)=>{try{let{url:i}=await ahe(t),n=await _o()(i).then((t=>t.arrayBuffer()));e(new Uint8Array(n))}catch(t){i(t)}}))}async function lhe(t){let e="".concat(t.authBaseUri?hH(t.authBaseUri):"https://auth-maker.mappedin.com/","api-key/token"),i=await _o()(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:t.key,secret:t.secret})});if(!i.ok)throw new Error("".concat(i.status," ").concat(i.statusText));return i.json()}async function uhe(t,e){let i="".concat(t.bundleBaseUri?hH(t.bundleBaseUri):"https://maker.mappedin.com/","api/venue/").concat(t.mapId,"/mvf"),n=await _o()(i,{headers:{Authorization:"Bearer ".concat(e)}});if(!n.ok)throw new Error("".concat(n.status," ").concat(n.statusText));return n.json()}async function che(t){return new Promise((async(e,i)=>{try{let{access_token:i}=await lhe(t),{url:n}=await uhe(t,i),r=await _o()(n).then((t=>t.arrayBuffer()));e(new Uint8Array(r))}catch(t){i(t)}}))}async function hhe(t,e=!0){let i=new sa({venue:""});return await i.hydrate(t,e),i}u(pH,"getVenueBundle"),u(dH,"getVenueBundleURL"),u(ohe,"downloadBundle"),u(ahe,"getVenueMVFURL"),u(mH,"downloadVenueBundleMVF"),u(lhe,"getMakerAccessToken"),u(uhe,"getMakerBundleURL"),u(che,"downloadMakerMVF"),u(hhe,"hydrateVenue");var _c,wp,Ol,Tm,gu,KM,_H,JM,wH,cy,D5,hy,N5,Ll,bH=Bt(gH()),vH="5.25.0",phe="https://api2.amplitude.com/2/httpapi",dhe="https://api2.amplitude.com/batch",mhe="__unspecified__",O5={branch:"main",version:"0",source:"websdk"},Ho=class t{constructor(){te(this,KM),te(this,JM),te(this,cy),te(this,hy),te(this,Ol,{}),te(this,Tm,!1),te(this,gu,void 0),te(this,Ll,u((async t=>{vhe(t.type)&&(window.removeEventListener("visibilitychange",M(this,Ll)),window.removeEventListener("pagehide",M(this,Ll)),window.removeEventListener("beforeunload",M(this,Ll)),window.removeEventListener("unload",M(this,Ll)),await this.sendAllPendingEvents())}),"#handlePageUnload")),null==M(t,wp)&&ce(t,wp,vH),typeof navigator<"u"&&null!=navigator.userAgent&&ce(this,gu,new bH.UAParser(navigator.userAgent).getResult())}static setContext(e){ce(t,_c,e)}static setVersion(e){ce(t,wp,e)}addPendingEvent(e){var i;if(null==M(t,_c))return;let n=e.event_type;if(!tt(this,JM,wH).call(this,e))return;null==e.event_properties&&(e.event_properties={});let r=M(this,Ol)[n];(0,xH.default)(e.event_properties,null!=(i=null==r?void 0:r.event_properties)?i:{}),M(this,Ol)[n]=e}async sendAllPendingEvents(){if(null==M(t,_c)||Object.keys(M(this,Ol)).length<1)return;if(M(this,Tm))return void Le.warn("The current batch of analytics is already sending. Wait until this finishes before trying to send again.");let e=[];for(let t in M(this,Ol)){let i=M(this,Ol)[t],n=tt(this,cy,D5).call(this,i);null!=n&&e.push(n)}if(!(e.length<1))try{ce(this,Tm,!0),200===(await tt(this,hy,N5).call(this,dhe,e)).status&&ce(this,Ol,{})}catch(t){Le.warn("Error sending batch product analytics!",t)}finally{ce(this,Tm,!1)}}async load(){if(!Jv.isLoaded){let{promise:t}=Jv.load({environment:"production",client:{configuration:{trackingOptions:{osName:!0}}}});t.then((()=>{window.addEventListener("pagehide",M(this,Ll)),window.addEventListener("beforeunload",M(this,Ll)),window.addEventListener("unload",M(this,Ll)),window.addEventListener("visibilitychange",M(this,Ll))}))}}async sendEventNow(e){if(null==M(t,_c))return;let i=tt(this,cy,D5).call(this,e);if(null!=i)try{await tt(this,hy,N5).call(this,phe,[i])}catch(t){Le.warn("Error sending single product analytics event!",t)}}};_c=new WeakMap,wp=new WeakMap,Ol=new WeakMap,Tm=new WeakMap,gu=new WeakMap,KM=new WeakSet,_H=u((function(t){let e=t.event_type;return null!=M(this,Ol)[e]}),"#isEventTypePending"),JM=new WeakSet,wH=u((function(t){if(!tt(this,KM,_H).call(this,t))return!0;let e=t.event_type,i=M(this,Ol)[e];return!(0,yH.default)(i.event_properties,t.event_properties)}),"#didEventPropertiesChange"),cy=new WeakSet,D5=u((function(t){var e,i,n,r,o,s,a,l,u,h,c,p,d,f,g,m,v;if(null!=M(Ho,_c))return null==(null==(e=t.event_properties)?void 0:e.venue)&&Le.warn("Error processing product analytics event! Unspecified venue slug",t),null==Id.plan&&Le.warn("Error processing product analytics event! Unknown coinfiguration plan",t),{event_type:t.event_type,session_id:null!=(i=Jv.client.getSessionId())?i:eE(),device_id:null!=(n=Jv.client.getDeviceId())?n:$M(),plan:{branch:null!=(o=null==(r=Id.plan)?void 0:r.branch)?o:O5.branch,version:null!=(a=null==(s=Id.plan)?void 0:s.version)?a:O5.version,source:null!=(u=null==(l=Id.plan)?void 0:l.source)?u:O5.source},os_name:null==(h=M(this,gu))?void 0:h.browser.name,os_version:null==(c=M(this,gu))?void 0:c.browser.version,device_manufacturer:null==(p=M(this,gu))?void 0:p.device.vendor,device_model:null==(d=M(this,gu))?void 0:d.device.model,event_properties:{...t.event_properties,context:M(Ho,_c),sdk_version:M(Ho,wp),browser_name:null==(f=M(this,gu))?void 0:f.browser.name,browser_version:null==(g=M(this,gu))?void 0:g.browser.version,venue:null!=(v=null==(m=t.event_properties)?void 0:m.venue)?v:mhe},time:t.time}}),"#makeBatchFormattedEvent"),hy=new WeakSet,N5=u((async function(t,e){return await _o()(t,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify({api_key:BA.production,events:e})})}),"#batchSend"),Ll=new WeakMap,u(Ho,"ProductAnalytics"),te(Ho,_c,void 0),te(Ho,wp,void 0);var L5=Ho,ghe=new L5,ht=ghe;function vhe(t){return"beforeunload"===t||"pagehide"===t||"unload"===t||"hidden"===document.visibilityState}u(vhe,"areWeLeavingThePage");var el,Sm,oo,py,fy=class t extends ja{constructor(t,e){super(t),te(this,el,void 0),te(this,Sm,void 0),te(this,oo,{}),A(this,"id",""),A(this,"x",0),A(this,"y",0),A(this,"operationHours"),A(this,"externalId"),te(this,py,void 0),ce(this,el,t),ce(this,Sm,e);let i=Object.assign({},e);delete i.map,Object.assign(this,i)}get map(){let t=M(this,oo).map;if(typeof t<"u")return t;let e=M(this,el).getCollectionItemById("maps",M(this,Sm).map);return M(this,oo).map=e,e}get lat(){var t;let e=M(this,oo).cachedLatLon;if(null!=e)return e.lat;let i=null==(t=M(this,el)._mapsById)?void 0:t[this.map.id];if(null==i)throw new Error("Map not found");return M(this,oo).cachedLatLon=i.createCoordinateByXY(this.x,this.y),M(this,oo).cachedLatLon.lat}get lon(){var t;let e=M(this,oo).cachedLatLon;if(null!=e)return e.lon;let i=null==(t=M(this,el)._mapsById)?void 0:t[this.map.id];if(null==i)throw new Error("Map not found");return M(this,oo).cachedLatLon=i.createCoordinateByXY(this.x,this.y),M(this,oo).cachedLatLon.lon}get paths(){let t=M(this,oo).paths;if(typeof t<"u")return t;let e=[],i=M(this,el)._nodesById,n=M(this,py);if(Array.isArray(n))for(let t=0,r=n.length;t<r;++t){let r=i[n[t].node];null!=r&&e.push(r)}return M(this,oo).paths=e,e}set paths(t){ce(this,py,t)}get locations(){var t,e,i;let n=M(this,oo).locations;if(typeof n<"u")return n;let r=[],o=null!=(i=null==(e=null==(t=bo.instances.get(M(this,el)))?void 0:t.locationsByMapId)?void 0:e.get(this.map.id))?i:[],s=this.id;for(let t=0,e=o.length;t<e;++t){let e=o[t],i=e.nodes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;++t)if(i[t].id===s){r.push(e);break}}return M(this,oo).locations=r,r}get polygon(){var t,e,i;let n=M(this,oo).polygon;if(typeof n<"u")return n;let r,o=null!=(i=null==(e=null==(t=bo.instances.get(M(this,el)))?void 0:t.polygonsByMapId)?void 0:e.get(this.map.id))?i:[],s=this.id;for(let t=0,e=o.length;t<e;++t){let e=o[t];e.entrances.map((t=>t.id)).includes(s)&&(r=e)}return M(this,oo).polygon=r,r}static hydrate(e,i){return e.map((e=>new t(i,e)))}static async fetch(e){let i=e.options.things.nodes.slice();e.options.things.maps&&Or(i,"map"),["weight","multiplier","accessible"].forEach((function(t){Or(i,t)}));let n={fields:i,venue:e.options.venue};try{return(await Ir(e.options,"node",n)).map((i=>new t(e,i)))}catch(t){return Le.error("Fetch Nodes:",t),[]}}directionsTo(t,e){let i=t instanceof ia,n=M(this,el).venue.slug,r=new gv({with_destination_set:i||void 0,venue:n});return ht.addPendingEvent(r),super.directionsTo(t,e)}distanceTo(t,e){let i=M(this,el).venue.slug;return ht.addPendingEvent(new vv({venue:i})),super.distanceTo(t,e)}toJSON(){return M(this,Sm)}};el=new WeakMap,Sm=new WeakMap,oo=new WeakMap,py=new WeakMap,u(fy,"MappedinNode");var Fs=fy;E();var vu,Am,tl,my,dy=class t extends ja{constructor(t,e){super(t),te(this,vu,void 0),te(this,Am,void 0),te(this,tl,{}),A(this,"geometry"),A(this,"perspectives"),A(this,"image"),A(this,"holes"),A(this,"textures"),A(this,"material"),A(this,"label"),A(this,"id",""),A(this,"layer"),A(this,"layerId"),A(this,"name"),A(this,"externalId"),A(this,"vertexes"),A(this,"center"),A(this,"canvasBounds"),A(this,"categoryRank"),te(this,my,void 0),ce(this,vu,t),ce(this,Am,e);let i=Object.assign({},e);delete i.map,Object.assign(this,i)}get map(){let t=M(this,tl).map;if(typeof t<"u")return t;let e=M(this,vu).getCollectionItemById("maps",M(this,Am).map);return M(this,tl).map=e,e}get locations(){var t,e;let i=M(this,tl).locations;if(typeof i<"u")return i;let n=[],r=null!=(e=null==(t=bo.instances.get(M(this,vu)))?void 0:t.locationsByMapId.get(this.map.id))?e:[],{id:o}=this;for(let t=0,e=r.length;t<e;++t){let e=r[t],i=e.polygons;if(Array.isArray(i))for(let t=0,r=i.length;t<r;++t)if(i[t].id===o){n.push(e);break}}return M(this,tl).locations=n,n}get entrances(){let t=M(this,tl).entrances;if(typeof t<"u")return t;let e=[],i=M(this,my),n=M(this,vu)._nodesById;if(Array.isArray(i)){for(let t=0,r=i.length;t<r;++t){let r=n[i[t].id];null!=r&&e.push(r)}return M(this,tl).entrances=e,e}return[]}set entrances(t){ce(this,my,t)}get rank(){let t=M(this,tl).rank;if(typeof t<"u")return t;let{rankings:e}=M(this,vu);if(!e||!e.polygons)return null;let i=e.polygons.find((t=>t.polygonId===this.id));return i?(M(this,tl).rank={score:i.score,node:i.entranceNodeId},{score:i.score,node:i.entranceNodeId}):(M(this,tl).rank=null,null)}static hydrate(e,i){return e.map((e=>new t(i,e)))}static async fetch(e){let i=e.options.things.polygons.slice();e.options.things.maps&&Or(i,"map"),e.options.things.nodes&&Or(i,"entrances");let n={fields:i,venue:e.options.venue};try{return(await Ir(e.options,"polygon",n)).map((i=>new t(e,i)))}catch(t){return Le.error("Fetch Polygons:",t),[]}}directionsTo(t,e){let i=t instanceof ia,n=M(this,vu).venue.slug,r=new yv({with_destination_set:i||void 0,venue:n});return ht.addPendingEvent(r),super.directionsTo(t,e)}distanceTo(t,e){let i=M(this,vu).venue.slug;return ht.addPendingEvent(new xv({venue:i})),super.distanceTo(t,e)}toJSON(){return M(this,Am)}};vu=new WeakMap,Am=new WeakMap,tl=new WeakMap,my=new WeakMap,u(dy,"MappedinPolygon");var $a=dy;E();var yhe=0,xhe="9999-12-31T00:00:00.000Z";function bhe(t,e,i=new Date){if(!t.states)return;let n=i||new Date,r=t.states.find((t=>{let e=new Date(t.start||yhe),i=new Date(t.end||xhe);return e<n&&i>n}));return r?e.find((t=>t.value===r.type)):void 0}u(bhe,"getCurrentLocationState");var Ea,Uh,Ta,gy,vy,yy,Cm=class t extends ja{constructor(t,e){super(t),te(this,Ea,void 0),te(this,Uh,void 0),te(this,Ta,{}),A(this,"states"),A(this,"id",""),A(this,"name",""),A(this,"type",""),A(this,"description"),A(this,"sortOrder"),A(this,"logo"),A(this,"phone"),A(this,"social"),A(this,"color"),A(this,"shortName"),A(this,"detailsUrl"),A(this,"tags"),A(this,"toMap"),A(this,"externalId"),A(this,"showLabelWhenImagePresent"),A(this,"showSmartLabelWhenImagePresent"),A(this,"picture"),A(this,"operationHours"),A(this,"siblingGroups"),A(this,"gallery"),A(this,"amenity"),te(this,gy,void 0),te(this,vy,[]),te(this,yy,void 0),ce(this,Ea,t),ce(this,Uh,e);let i=Object.assign({},e);delete i.categories,Object.assign(this,i)}get polygons(){let t=M(this,Ta).polygons;if(typeof t<"u")return t;let e=[],i=M(this,gy),n=M(this,Ea)._polygonsById;if(Array.isArray(i))for(let t=0,r=i.length;t<r;++t){let r=n[i[t].id];null!=r&&e.push(r)}return M(this,Ta).polygons=e,e}set polygons(t){ce(this,gy,t)}get nodes(){let t=M(this,Ta).nodes;if(typeof t<"u")return t;let e=[],i=M(this,vy),n=M(this,Ea)._nodesById;if(i&&i.length)for(let t=0,r=i.length;t<r;++t){let r=n[i[t].node];null!=r&&e.push(r)}return M(this,Ta).nodes=e,e}set nodes(t){ce(this,vy,t)}get parent(){let t=M(this,Ta).parent;if(typeof t<"u")return t;let e,i=M(this,Ea)._locationsById,n=M(this,yy);return void 0!==n&&(e=i[n]),M(this,Ta).parent=e,e}set parent(t){ce(this,yy,t)}get categories(){let t=M(this,Ta).categories;if(typeof t<"u")return t;let e=[];return M(this,Uh).categories.forEach((t=>{let i=M(this,Ea).getCollectionItemById("categories",t);i&&e.push(i)})),M(this,Ta).categories=e,e}get state(){return bhe(this,M(this,Ea).locationStates)}clone(){let e=M(this,Ea).venue.slug;return ht.addPendingEvent(new pv({venue:e})),new t(M(this,Ea),M(this,Uh))}get nodeOperationHours(){let t=M(this,Ta).nodeOperationHours;if(typeof t<"u")return t;if(null==this.nodes)return{};let e=M(this,Uh).nodes.reduce(((t,e)=>(null!=e.operationHours&&(t[e.node]=e.operationHours),t)),{});return M(this,Ta).nodeOperationHours=e,e}static hydrate(e,i){return e.map((e=>new t(i,e)))}static async fetch(e){let i=e.options.things.locations.slice();e.options.things.categories&&Or(i,"categories"),e.options.things.nodes&&Or(i,"nodes"),e.options.things.polygons&&Or(i,"polygons"),e.options.things.locationStates&&Or(i,"states");let n={fields:i,venue:e.options.venue};try{let i=await Ir(e.options,"location",n);return e.options.includeHidden||(i=i.filter((t=>!t.hidden))),i.map((i=>new t(e,i)))}catch(t){return Le.error("Fetch Locations:",t),[]}}directionsTo(t,e){let i=t instanceof ia,n=M(this,Ea).venue.slug,r=new dv({with_destination_set:i||void 0,venue:n});return ht.addPendingEvent(r),super.directionsTo(t,e)}distanceTo(t,e){let i=M(this,Ea).venue.slug;return ht.addPendingEvent(new mv({venue:i})),super.distanceTo(t,e)}toJSON(){let t=M(this,Uh);return delete t.color,t}};Ea=new WeakMap,Uh=new WeakMap,Ta=new WeakMap,gy=new WeakMap,vy=new WeakMap,yy=new WeakMap,u(Cm,"MappedinLocation");var Ja=Cm;E();var Pm,Mp,by,xy=class t{constructor(t,e){te(this,Pm,void 0),te(this,Mp,{}),te(this,by,void 0),A(this,"name"),A(this,"externalId"),A(this,"parents"),A(this,"id"),A(this,"icon"),A(this,"iconFromDefaultList"),A(this,"sortOrder"),this.id=e.id,ce(this,by,e),ce(this,Pm,t),Object.assign(this,e)}get locations(){var t;let e=M(this,Mp).locations;if(typeof e<"u")return e;let i=[],{locations:n}=M(this,Pm),{id:r}=this;for(let e=0,o=n.length;e<o;++e){let o=n[e],s=o.categories;if(Array.isArray(s))for(let e=0,n=s.length;e<n;++e)if((null==(t=s[e])?void 0:t.id)===r){i.push(o);break}}return M(this,Mp).locations=i,i}get children(){var t;let e=M(this,Mp).children;if(typeof e<"u")return e;let{categories:i}=M(this,Pm),{id:n}=this,r=[];for(let e=0;e<i.length;e++)n&&null!=(t=i[e].parents)&&t.includes(n)&&r.push(i[e]);return M(this,Mp).children=r,r}static hydrate(e,i){return e.map((e=>new t(i,e)))}static async fetch(e){let i={fields:e.options.things.categories,venue:e.options.venue};try{return(await Ir(e.options,"category",i)).map((i=>new t(e,i)))}catch(t){return Le.error("Fetch Categories:",t),[]}}toJSON(){return M(this,by)}};Pm=new WeakMap,Mp=new WeakMap,by=new WeakMap,u(xy,"MappedinCategory");var yc=xy;E();var _y,wc,R5=class{constructor(t,e){te(this,_y,void 0),te(this,wc,void 0),A(this,"distance",0),A(this,"path",[]),A(this,"instructions",[]),ce(this,wc,t),ce(this,_y,e),this.distance=e.distance,this.instructions=e.instructions.map((t=>{var e,i,n,r,o,s,a,l,u,h,c,p;let d={...t,action:{...t.action},atLocation:null!=(e=t.atLocation)&&e.id?null==(n=null==(i=M(this,wc))?void 0:i._vortexesById)?void 0:n[t.atLocation.id]:void 0,node:null!=(r=t.node)&&r.id?null==(s=null==(o=M(this,wc))?void 0:o._nodesById)?void 0:s[t.node.id]:void 0};if("TakeVortex"===(null==(a=d.action)?void 0:a.type)||"ExitVortex"===(null==(l=d.action)?void 0:l.type)){let t=null==(h=M(this,wc)._mapsById)?void 0:h[null==(u=d.action)?void 0:u.fromMap.id],e=null==(p=M(this,wc)._mapsById)?void 0:p[null==(c=d.action)?void 0:c.toMap.id];t&&e&&(d.action.fromMap=t,d.action.toMap=e)}return d})),this.path=e.path.reduce(((t,{id:e})=>{var i,n;let r=null==(n=null==(i=M(this,wc))?void 0:i._nodesById)?void 0:n[e];return r&&t.push(r),t}),[])}toJSON(){return M(this,_y)}};_y=new WeakMap,wc=new WeakMap,u(R5,"MappedinDirections");var tc=R5;E();var B5=class{constructor(t){A(this,"destinations",[]),this.destinations=t}};u(B5,"MappedinDestinationSet");var ia=B5;E();var My,wy=class t{constructor(t){A(this,"id",""),te(this,My,void 0),A(this,"accessible"),A(this,"name"),A(this,"type"),A(this,"weight"),A(this,"multiplier"),A(this,"nodes"),ce(this,My,t),Object.assign(this,t)}static hydrate(e){return e.map((e=>new t(e)))}static async fetch(e){let i=e.options.things.vortexes.slice();["name","type","accessible","weight","multiplier","nodes"].forEach((function(t){Or(i,t)}));let n={fields:i,venue:e.options.venue};try{return(await Ir(e.options,"vortex",n)).map((e=>new t(e)))}catch(t){return Le.error("Fetch Vortexes:",t),[]}}toJSON(){return M(this,My)}};My=new WeakMap,u(wy,"MappedinVortex");var yp=wy;E();var Ty,Ey=class t{constructor(t){A(this,"id",""),te(this,Ty,void 0),ce(this,Ty,t),Object.assign(this,t)}static hydrate(e){return e.map((e=>new t(e)))}static async fetch(e){let i={fields:e.options.things.themes.slice(),venue:e.options.venue};try{return(await Ir(e.options,"apollo-theme",i)).map((e=>new t(e)))}catch(t){return Le.error("Fetch Theme:",t),[]}}toJSON(){return M(this,Ty)}};Ty=new WeakMap,u(Ey,"MappedinTheme");var tE=Ey;E();var Ay,Sy=class t{constructor(t){te(this,Ay,void 0),A(this,"polygons",[]),ce(this,Ay,t),Object.assign(this,t)}static hydrate(e){return new t(e)}static async fetch(e){try{let i=await gm({...e.options,secure:!1},"smart-labels/polygon-label-ranking",{venue:e.options.venue},!0);return new t(i)}catch(t){return Le.error("Fetch Rankings:",t),null}}toJSON(){return M(this,Ay)}};Ay=new WeakMap,u(Sy,"MappedinRankings");var xp=Sy;E(),E();var Py,Im,Iy,Cy=class t{constructor(t,e){te(this,Py,void 0),te(this,Im,void 0),te(this,Iy,{}),A(this,"id",""),A(this,"type",""),A(this,"name",""),A(this,"description"),A(this,"image"),A(this,"startDate"),A(this,"endDate"),A(this,"showDate"),ce(this,Im,e),ce(this,Py,t),Object.assign(this,e)}location(){let t=M(this,Iy).location;if(typeof t<"u")return t;let e,i=M(this,Py)._locationsById,n=M(this,Im).location;if(null!=n){let t=i[n];null!=t&&(e=t)}return M(this,Iy).location=e,e}static hydrate(e,i){return e.map((e=>new t(i,e)))}static async fetch(e){let i=e.options.things.events.slice();e.options.things.locations&&Or(i,"location");let n={fields:i,venue:e.options.venue,activeAtOrAfter:Date.now()};try{return(await Ir(e.options,"event",n)).map((i=>new t(e,i)))}catch(t){return Le.error("Fetch Events:",t),[]}}toJSON(){return M(this,Im)}};Py=new WeakMap,Im=new WeakMap,Iy=new WeakMap,u(Cy,"MappedinEvent");var bp=Cy;E();var Ly,Oy=class t{constructor(t){te(this,Ly,void 0),A(this,"id",""),A(this,"name",""),A(this,"value",""),ce(this,Ly,t),Object.assign(this,t)}static hydrate(e){return e.map((e=>new t(e)))}static async fetch(e){let i={fields:e.options.things.locationStates.slice(),venue:e.options.venue};try{return(await Ir(e.options,"location-state",i)).map((e=>new t(e)))}catch(t){return Le.error("Fetch Location States:",t),[]}}toJSON(){return M(this,Ly)}};Ly=new WeakMap,u(Oy,"MappedinLocationState");var Em=Oy;E();var yu,Ny,Ry,Dy=class t{constructor(t,e){te(this,yu,void 0),te(this,Ny,{}),te(this,Ry,void 0),A(this,"id",""),A(this,"group",""),A(this,"name",""),A(this,"shortName",""),A(this,"elevation",0),A(this,"subtitle"),A(this,"scale",0),A(this,"layers"),A(this,"x_scale"),A(this,"perspectiveId"),A(this,"scene"),A(this,"width",0),A(this,"height",0),A(this,"georeference",[]),A(this,"_scale",0),ce(this,yu,t),ce(this,Ry,e),Object.assign(this,e),this._scale=MH(this),this.scale=this.x_scale||1/this._scale}get polygons(){var t,e,i;return null!=(i=null==(e=null==(t=bo.instances.get(M(this,yu)))?void 0:t.polygonsByMapId)?void 0:e.get(this.id))?i:[]}get locations(){var t,e,i;return null!=(i=null==(e=null==(t=bo.instances.get(M(this,yu)))?void 0:t.locationsByMapId)?void 0:e.get(this.id))?i:[]}get nodes(){var t,e,i;return null!=(i=null==(e=null==(t=bo.instances.get(M(this,yu)))?void 0:t.nodesByMapId)?void 0:e.get(this.id))?i:[]}get mapGroup(){let t=M(this,Ny).mapGroup;if(typeof t<"u")return t;let e=this.group,i=e&&M(this,yu)._mapGroupsById[e]||null;return M(this,Ny).mapGroup=i,i}createCoordinateByXY(t,e){return new aa({x:t,y:e,map:this,mappedin:M(this,yu)})}createCoordinate(t,e){return new aa({lat:t,lon:e,map:this,mappedin:M(this,yu)})}getNorth(){let t;try{let e=this.georeference[0],i=this.georeference[2],n=new mi(e.target.x,e.target.y),r=new mi(i.target.x,i.target.y);t=-((n.finalBearingTo(r)+0)*Math.PI/180-Math.atan2(i.control.y-e.control.y,i.control.x-e.control.x)-Math.PI/2)}catch(e){t=0,Le.warn(e),Le.warn("Couldn't georeference ".concat(this.name||this.shortName||this.id,". Probably not enough geocoordinates."))}return t}static hydrate(e,i){return e.map((e=>new t(i,e)))}static async fetch(e){var i;let n=e.options.things.maps.slice();e.options.perspective&&Or(n,"perspectives"),e.options.things.mapGroups&&Or(n,"group"),Or(n,"elevation"),Or(n,"x_scale"),Or(n,"scale"),Or(n,"georeference");let r={fields:n,perspective:e.options.perspective,venue:e.options.venue};try{let s=await Ir(e.options,"map",r),a=u((t=>{let e=o.layers.find((e=>e.id===t));e?e.visible=!0:o.layers.push({id:t,visible:!0})}),"setVisibleLayer");for(let r=0,l=s.length;r<l;++r){var o=s[r];if(o){let t=o.perspective;null!=t&&(o.perspectiveId=t.id,n.indexOf("scene")>-1&&(o.scene=t.scene),t.layers?(o.layers.forEach((t=>{t.visible=!1})),t.layers.forEach(a)):o.layers.forEach((t=>{t.visible=!0}))),delete o.perspective}if(e.options.preloadMapGeometry&&null!=(i=o.scene)&&i.polygons&&"string"==typeof o.scene.polygons){let t=await _o()(o.scene.polygons);o.scene.polygons=await t.json()}s[r]=new t(e,o)}return s}catch(t){return Le.error("Fetch Maps:",t),[]}}toJSON(){return M(this,Ry)}};yu=new WeakMap,Ny=new WeakMap,Ry=new WeakMap,u(Dy,"MappedinMap");var Fh=Dy;E();var By,k5,ky,q5,qy,Fy,nE,EH,iE,TH,xu,bu,_u,wu,F5=class{constructor(t){te(this,By),te(this,ky),te(this,nE),te(this,iE),A(this,"map"),te(this,qy,{}),te(this,Fy,void 0),te(this,xu,void 0),te(this,bu,void 0),te(this,_u,void 0),te(this,wu,void 0);let{map:e,mappedin:i}=t;null!=t.lat&&null!=t.lon&&(ce(this,xu,t.lat),ce(this,bu,t.lon)),null!=t.x&&null!=t.y&&(ce(this,_u,t.x),ce(this,wu,t.y)),this.map=e,ce(this,Fy,i)}get x(){return tt(this,ky,q5).call(this,"x")}get y(){return tt(this,ky,q5).call(this,"y")}get lat(){return tt(this,By,k5).call(this,"lat")}get lon(){return tt(this,By,k5).call(this,"lon")}absoluteDistanceTo(t){return SH([t.lat,t.lon],[this.lat,this.lon])}get nearestNode(){let t=M(this,qy).nearestNode;if(typeof t<"u")return t;let e=bo.instances.get(M(this,Fy)).findNearestNodeOnMap(this.map.id,this);return M(this,qy).nearestNode=e,e}toJSON(){return{x:this.x,y:this.y,map:this.map,lat:this.lat,lon:this.lon}}};By=new WeakSet,k5=u((function(t){if(typeof M(this,xu)<"u"&&typeof M(this,bu)<"u")return M(this,"lat"===t?xu:bu);if(typeof M(this,_u)<"u"&&typeof M(this,wu)<"u"){let[e,i]=tt(this,iE,TH).call(this,M(this,_u),M(this,wu));return ce(this,xu,e),ce(this,bu,i),M(this,"lat"===t?xu:bu)}throw Error("MappedinCoordinate is missing x and y")}),"#getLatLon"),ky=new WeakSet,q5=u((function(t){if(M(this,_u)&&M(this,wu))return M(this,"x"===t?_u:wu);if(null!=M(this,xu)&&null!=M(this,bu)){let[e,i]=tt(this,nE,EH).call(this,M(this,xu),M(this,bu));return ce(this,_u,e),ce(this,wu,i),M(this,"x"===t?_u:wu)}throw Error("MappedinCoordinate is missing lat and lon")}),"#getXY"),qy=new WeakMap,Fy=new WeakMap,nE=new WeakSet,EH=u((function(t,e){let i=this.map.georeference[0],n=new mi(i.target.x,i.target.y),r=new mi(t,e),o=n.distanceTo(r),s=(n.finalBearingTo(r)+360)%360*Math.PI/180||0,a=o*(1/this.map.scale),l=s+this.map.getNorth(),u=Math.sin(l)*a,h=Math.cos(l)*a;return[i.control.x+u,i.control.y-h]}),"#latLonToXY"),iE=new WeakSet,TH=u((function(t,e){let i,n=this.map.georeference[0],r=new mi(n.target.x,n.target.y),o=t-n.control.x,s=n.control.y-e,a=Math.atan2(o,s);i=0===o&&0===s?0:0===o?s:o/Math.sin(a);let l=a-this.map.getNorth(),u=i/this.map._scale,h=r.destinationPoint(u,180*l/Math.PI);return[h.lat,h.lon]}),"#xyToLatLon"),xu=new WeakMap,bu=new WeakMap,_u=new WeakMap,wu=new WeakMap,u(F5,"MappedinCoordinate");var aa=F5;E();var zy,Om,Gy,Uy=class t{constructor(t,e){te(this,zy,void 0),te(this,Om,void 0),te(this,Gy,{}),A(this,"id",""),A(this,"name",""),ce(this,Om,e),ce(this,zy,t),Object.assign(this,e)}get maps(){let t=M(this,Gy).maps;if(typeof t<"u")return t;let e=[],{maps:i}=M(this,zy),{id:n}=M(this,Om);for(let t=0,r=i.length;t<r;++t){let r=i[t];r.group===n&&e.push(r)}return M(this,Gy).maps=e,e}static hydrate(e,i){return e.map((e=>new t(i,e)))}static async fetch(e){let i={fields:e.options.things.mapGroups.slice(),venue:e.options.venue};try{return(await Ir(e.options,"map-group",i)).map((i=>new t(e,i)))}catch(t){return Le.error("Fetch Map Groups:",t),[]}}toJSON(){return M(this,Om)}};zy=new WeakMap,Om=new WeakMap,Gy=new WeakMap,u(Uy,"MappedinMapGroup");var _p=Uy;E(),E();var Ep,Dl,Nl,AH="mi-session-data",CH="mi-local-data",Vy=class t{constructor(){te(this,Dl,void 0),te(this,Nl,void 0);try{let t=sessionStorage.getItem(AH);ce(this,Dl,t?JSON.parse(t):{id:Cr()})}catch{ce(this,Dl,{id:Cr()})}try{let t=localStorage.getItem(CH);ce(this,Nl,t?JSON.parse(t):{deviceId:Cr()})}catch{ce(this,Nl,{deviceId:Cr()})}M(this,Dl).id||(M(this,Dl).id=Cr()),M(this,Nl).deviceId||(M(this,Nl).deviceId=Cr())}static getInstance(){return M(this,Ep)||ce(this,Ep,new t),M(this,Ep)}static ___clearInstance(){ce(this,Ep,void 0)}saveSessionData(t,e){M(this,Dl)[t]=e;try{return sessionStorage.setItem(AH,JSON.stringify(M(this,Dl))),!0}catch{return!1}}loadSessionData(t){let e=M(this,Dl)[t];if(null!=e)return e}saveLocalData(t,e){M(this,Nl)[t]=e;try{return localStorage.setItem(CH,JSON.stringify(M(this,Nl))),!0}catch{return!1}}loadLocalData(t){let e=M(this,Nl)[t];if(null!=e)return e}};Ep=new WeakMap,Dl=new WeakMap,Nl=new WeakMap,u(Vy,"SafeStorage"),te(Vy,Ep,void 0);var Hy=Vy;function zM(t){return/^[\da-f]{24}$/i.test(t)}function PH(t,e=!1){let i="";if(null!=t){let n="?",r=e?Object.keys(t).filter((t=>!["slug","venue"].includes(t))):Object.keys(t);for(let e=0,o=r.length;e<o;++e){let o=r[e],s=t[o];null!=s&&(i+="".concat(n+encodeURIComponent(o),"=").concat(encodeURIComponent(s)),n="&")}}return i}function _he(t,e,i,n=!1){var r,o;return n?"".concat(t.supplementaryUrl).concat(e,"?venue=").concat(i.venue||i.slug):null!=(r=t.baseUrl)&&r.includes("gateway")?"".concat(t.baseUrl).concat(e,"/").concat(i.venue||i.slug).concat(PH(i,null==(o=t.baseUrl)?void 0:o.includes("gateway"))):t.baseUrl+e+PH(i)}async function Ir(t,e,i,n=!1){return gm(t,e,i,n,!0)}async function gm(t,e,i,n=!1,r=!1){let o=_he(t,e,i,n),s=await ZM(t,o,n);if(!r&&Array.isArray(s)){if(1===s.length)return s[0];throw new Error("Invalid response object")}return s}function whe(t,e,i=!1){let n={language:t.language,clientId:t.clientId,clientSecret:t.clientSecret};i&&delete n.language,n.language&&(e+="&lang=".concat(encodeURIComponent(n.language)));let{headers:r}=t;r["Content-Type"]=r["Content-Type"]||"text/json",t.accessToken?r.Authorization="Bearer ".concat(t.accessToken):t.noAuth||t.clientId&&t.clientSecret&&(r["x-mappedin-key"]=btoa(t.clientId),r["x-mappedin-secret"]=btoa(t.clientSecret)),n.language&&(r["Accept-Language"]=n.language);let o={method:"GET",headers:r};return t.secure&&(e+="&withcdntoken"),{req:o,url:e}}async function ZM(t,e,i=!1){let n=whe(t,e,i),r=await _o()(n.url,n.req);if(!r.ok)throw new Error("".concat(r.status," ").concat(r.statusText));return r.json()}function Or(t,e){t.indexOf(e)<0&&t.push(e)}function SH([t,e],[i,n]){let r=new mi(t,e),o=new mi(i,n);return r.distanceTo(o)}function MH(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale);let e;try{let i=t.georeference[0],n=t.georeference[2],r=new mi(i.target.x,i.target.y),o=new mi(n.target.x,n.target.y),s=r.distanceTo(o),a=i.control.x-n.control.x,l=i.control.y-n.control.y;e=Math.sqrt(a*a+l*l)/s}catch(i){e=1,Le.warn(i),Le.warn("Couldn't georeference ".concat(t.name||t.shortName||t.id,". Probably not enough geocoordinates."))}return e}function A0(t){var e;return t instanceof $a?t.entrances.map((t=>t.id)):t instanceof Ja?(null==(e=t.nodes)?void 0:e.map((t=>t.id)))||[]:[t.id]}async function jV(t){let e={},{maps:i,images:n,scenes:r,polygons:o}=t;if(null!=n)try{let t=Object.keys(n).map((t=>fetch("data:image/png;base64,".concat(n[t])).then((t=>t.blob())).then((i=>{e[t]=i})).catch((t=>{Le.error(t)}))));await Promise.all(t)}catch(t){Le.error(t)}return i.forEach((t=>{var i;(null!=(i=t.scene)&&i.polygons||r[t.id])&&(null!=r&&r[t.id]&&(t.scene||(t.scene={}),Object.defineProperty(t.scene,"polygons",{get:()=>r[t.id]})),null!=n&&(t.scene.images=t.scene.images.map((({filename:t})=>({filename:t,url:e[t]}))),t.scene.polygons.forEach((t=>{var i,n;if(null!=(i=null==t?void 0:t.image)&&i.url&&null!=(n=null==t?void 0:t.image)&&n.url){let i=t.image.url.split("/"),n=e[i[i.length-1]];n&&(t.image.url=n)}}))))})),null!=n&&o.forEach((t=>{var i;if(null!=(i=null==t?void 0:t.image)&&i.url){let i=t.image.url.split("/"),n=e[i[i.length-1]];n&&(t.image.url=n)}})),null!=t.images&&delete t.images,null!=t.scenes&&delete t.scenes,t}function wm(t,e,i){let n;return function(...r){let o=this,s=u((function(){n=null,i||t.apply(o,r)}),"later"),a=i&&!n;clearTimeout(n),n=setTimeout(s,e),a&&t.apply(o,r)}}function WV(t,e,i,n=0){if(!t||t<=0)return 0;let r=0;n>=0&&n<=1&&(r=n/10);let o=1e-5,s=1+(i-t)/(i-e)+r;return Math.max(1+o,Math.min(2-o,s))}function $M(){return Hy.getInstance().loadLocalData("deviceId")}function eE(){return Hy.getInstance().loadSessionData("id")}u(zM,"isGatewayKey"),u(PH,"stringifyQuery"),u(_he,"buildUrl"),u(Ir,"getArray"),u(gm,"getObject"),u(whe,"constructParamsForRequest"),u(ZM,"generateAPIRequest"),u(Or,"addToSet"),u(SH,"getDistanceBetweenLatLon"),u(MH,"getMapScale"),u(A0,"getNodesForNavigatable"),u(jV,"populateBundledImagesAsBlobs"),u(wm,"debounce"),u(WV,"normalizeCategoryRank"),u($M,"getDeviceID"),u(eE,"getSessionID");var Bh=u(((t,e)=>{if("string"==typeof t){if(void 0===e||!Array.isArray(e.polygons))return null;t=e.polygons.find((function(e){return e.id===t}))}let i=null;if(null!=t&&void 0!==t.locations&&t.locations.length>0){i=t.locations[0];for(let e=0,n=t.locations.length;e<n;e++){let n=t.locations[e];for(;void 0!==n.parent;)n=n.parent,n.polygons.includes(t)&&(i=n);if(void 0===n.parent&&n.polygons.includes(t))return n}}return i}),"getPrimaryLocationForPolygon");function U5(t){let e=+this._x.call(null,t),i=+this._y.call(null,t);return IH(this.cover(e,i),e,i,t)}function IH(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var r,o,s,a,l,u,h,c,p,d=t._root,f={data:n},g=t._x0,m=t._y0,v=t._x1,y=t._y1;if(!d)return t._root=f,t;for(;d.length;)if((u=e>=(o=(g+v)/2))?g=o:v=o,(h=i>=(s=(m+y)/2))?m=s:y=s,r=d,!(d=d[c=h<<1|u]))return r[c]=f,t;if(a=+t._x.call(null,d.data),l=+t._y.call(null,d.data),e===a&&i===l)return f.next=d,r?r[c]=f:t._root=f,t;do{r=r?r[c]=new Array(4):t._root=new Array(4),(u=e>=(o=(g+v)/2))?g=o:v=o,(h=i>=(s=(m+y)/2))?m=s:y=s}while((c=h<<1|u)==(p=(l>=s)<<1|a>=o));return r[p]=d,r[c]=f,t}function OH(t){var e,i,n,r,o=t.length,s=new Array(o),a=new Array(o),l=1/0,u=1/0,h=-1/0,c=-1/0;for(i=0;i<o;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(r=+this._y.call(null,e))||(s[i]=n,a[i]=r,n<l&&(l=n),n>h&&(h=n),r<u&&(u=r),r>c&&(c=r));if(l>h||u>c)return this;for(this.cover(l,u).cover(h,c),i=0;i<o;++i)IH(this,s[i],a[i],t[i]);return this}function z5(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,r=this._x1,o=this._y1;if(isNaN(i))r=(i=Math.floor(t))+1,o=(n=Math.floor(e))+1;else{for(var s,a,l=r-i||1,u=this._root;i>t||t>=r||n>e||e>=o;)switch(a=(e<n)<<1|t<i,s=new Array(4),s[a]=u,u=s,l*=2,a){case 0:r=i+l,o=n+l;break;case 1:i=r-l,o=n+l;break;case 2:r=i+l,n=o-l;break;case 3:i=r-l,n=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=i,this._y0=n,this._x1=r,this._y1=o,this}function G5(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t}function V5(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function bs(t,e,i,n,r){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=r}function H5(t,e,i){var n,r,o,s,a,l,u,h=this._x0,c=this._y0,p=this._x1,d=this._y1,f=[],g=this._root;for(g&&f.push(new bs(g,h,c,p,d)),null==i?i=1/0:(h=t-i,c=e-i,p=t+i,d=e+i,i*=i);l=f.pop();)if(!(!(g=l.node)||(r=l.x0)>p||(o=l.y0)>d||(s=l.x1)<h||(a=l.y1)<c))if(g.length){var m=(r+s)/2,v=(o+a)/2;f.push(new bs(g[3],m,v,s,a),new bs(g[2],r,v,m,a),new bs(g[1],m,o,s,v),new bs(g[0],r,o,m,v)),(u=(e>=v)<<1|t>=m)&&(l=f[f.length-1],f[f.length-1]=f[f.length-1-u],f[f.length-1-u]=l)}else{var y=t-+this._x.call(null,g.data),x=e-+this._y.call(null,g.data),_=y*y+x*x;if(_<i){var b=Math.sqrt(i=_);h=t-b,c=e-b,p=t+b,d=e+b,n=g.data}}return n}function j5(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,i,n,r,o,s,a,l,u,h,c,p,d=this._root,f=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!d)return this;if(d.length)for(;;){if((u=o>=(a=(f+m)/2))?f=a:m=a,(h=s>=(l=(g+v)/2))?g=l:v=l,e=d,!(d=d[c=h<<1|u]))return this;if(!d.length)break;(e[c+1&3]||e[c+2&3]||e[c+3&3])&&(i=e,p=c)}for(;d.data!==t;)if(n=d,!(d=d.next))return this;return(r=d.next)&&delete d.next,n?(r?n.next=r:delete n.next,this):e?(r?e[c]=r:delete e[c],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(i?i[p]=d:this._root=d),this):(this._root=r,this)}function LH(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this}function W5(){return this._root}function Y5(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t}function X5(t){var e,i,n,r,o,s,a=[],l=this._root;for(l&&a.push(new bs(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,n=e.x0,r=e.y0,o=e.x1,s=e.y1)&&l.length){var u=(n+o)/2,h=(r+s)/2;(i=l[3])&&a.push(new bs(i,u,h,o,s)),(i=l[2])&&a.push(new bs(i,n,h,u,s)),(i=l[1])&&a.push(new bs(i,u,r,o,h)),(i=l[0])&&a.push(new bs(i,n,r,u,h))}return this}function Z5(t){var e,i=[],n=[];for(this._root&&i.push(new bs(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var r=e.node;if(r.length){var o,s=e.x0,a=e.y0,l=e.x1,u=e.y1,h=(s+l)/2,c=(a+u)/2;(o=r[0])&&i.push(new bs(o,s,a,h,c)),(o=r[1])&&i.push(new bs(o,h,a,l,c)),(o=r[2])&&i.push(new bs(o,s,c,h,u)),(o=r[3])&&i.push(new bs(o,h,c,l,u))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function DH(t){return t[0]}function Q5(t){return arguments.length?(this._x=t,this):this._x}function NH(t){return t[1]}function K5(t){return arguments.length?(this._y=t,this):this._y}function jy(t,e,i){var n=new J5(null==e?DH:e,null==i?NH:i,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function J5(t,e,i,n,r,o){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=r,this._y1=o,this._root=void 0}function RH(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}E(),E(),E(),E(),u(U5,"default"),u(IH,"add"),u(OH,"addAll"),E(),u(z5,"default"),E(),u(G5,"default"),E(),u(V5,"default"),E(),E(),u(bs,"default"),u(H5,"default"),E(),u(j5,"default"),u(LH,"removeAll"),E(),u(W5,"default"),E(),u(Y5,"default"),E(),u(X5,"default"),E(),u(Z5,"default"),E(),u(DH,"defaultX"),u(Q5,"default"),E(),u(NH,"defaultY"),u(K5,"default"),u(jy,"quadtree"),u(J5,"Quadtree"),u(RH,"leaf_copy");var jo=jy.prototype=J5.prototype;jo.copy=function(){var t,e,i=new J5(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=RH(n),i;for(t=[{source:n,target:i._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(e=n.source[r])&&(e.length?t.push({source:e,target:n.target[r]=new Array(4)}):n.target[r]=RH(e));return i},jo.add=U5,jo.addAll=OH,jo.cover=z5,jo.data=G5,jo.extent=V5,jo.find=H5,jo.remove=j5,jo.removeAll=LH,jo.root=W5,jo.size=Y5,jo.visit=X5,jo.visitAfter=Z5,jo.x=Q5,jo.y=K5;var Mu,ss,Rl=class t{constructor(t){te(this,Mu,void 0),A(this,"categories"),A(this,"locations"),A(this,"vortexes"),A(this,"maps"),A(this,"nodes"),A(this,"polygons"),A(this,"events"),A(this,"mapGroups"),A(this,"locationStates"),A(this,"rankings"),A(this,"languages",{}),te(this,ss,{}),ce(this,Mu,t)}get polygonsByMapId(){if(M(this,ss).polygonsByMapId)return M(this,ss).polygonsByMapId;let t,e={};for(let i=0,n=M(this,Mu).polygons.length;i<n;++i)t=M(this,Mu).polygons[i],e[t.map.id]||(e[t.map.id]=[]),e[t.map.id].push(t);let i=Object.entries(e).reduce(((t,[e,i])=>(t.set(e,i),t)),new Map);return M(this,ss).polygonsByMapId=i,M(this,ss).polygonsByMapId}get nodesByMapId(){if(M(this,ss).nodesByMapId)return M(this,ss).nodesByMapId;let t,e={};for(let i=0,n=M(this,Mu).nodes.length;i<n;++i)t=M(this,Mu).nodes[i],e[t.map.id]||(e[t.map.id]=[]),e[t.map.id].push(t);let i=Object.entries(e).reduce(((t,[e,i])=>(t.set(e,i),t)),new Map);return M(this,ss).nodesByMapId=i,M(this,ss).nodesByMapId}findNearestNodeOnMap(t,e){var i;if(M(this,ss).nodeTreesByMap||(M(this,ss).nodeTreesByMap=new Map),!M(this,ss).nodeTreesByMap.has(t)){let e=null!=(i=this.nodesByMapId.get(t))?i:[],n=jy();n.x((t=>t.x)),n.y((t=>t.y)),n.addAll(e),M(this,ss).nodeTreesByMap.set(t,n)}return M(this,ss).nodeTreesByMap.get(t).find(e.x,e.y)}get locationsByMapId(){if(M(this,ss).locationsByMapId)return M(this,ss).locationsByMapId;let t,e={};for(let i=0,n=M(this,Mu).locations.length;i<n;++i){t=M(this,Mu).locations[i];for(let i=0,n=t.polygons.length;i<n;++i)e[t.polygons[i].map.id]||(e[t.polygons[i].map.id]=[]),e[t.polygons[i].map.id].push(t);for(let i=0,n=t.nodes.length;i<n;++i){let n=t.nodes[i];e[n.map.id]||(e[n.map.id]=[]),e[n.map.id].push(t)}}let i=Object.entries(e).reduce(((t,[e,i])=>(t.set(e,i),t)),new Map);return M(this,ss).locationsByMapId=i,M(this,ss).locationsByMapId}static create(e){return t.instances.has(e)||t.instances.set(e,new t(e)),t.instances.get(e)}static clear(){t.instances.clear()}static clearInstance(e){t.instances.has(e)&&t.instances.delete(e)}};Mu=new WeakMap,ss=new WeakMap,u(Rl,"MappedinCache"),A(Rl,"instances",new Map);var tj,Wy,Lm,Dm,Yy,Nm,Rm,Bm,zh,km,qm,Fm,Xy,Um,Tp,$5=Rl,bo=$5,Vo=(t=>(t.CATEGORY="categories",t.EVENT="events",t.LOCATION="locations",t.MAPGROUP="mapGroups",t.MAP="maps",t.NODE="nodes",t.POLYGON="polygons",t.VORTEX="vortexes",t))(Vo||{}),pp={categories:yc,locations:Ja,vortexes:yp,maps:Fh,nodes:Fs,polygons:$a,venue:bc,events:bp,mapGroups:_p,themes:tE,locationStates:Em,rankings:xp},nj=Bt(ej()),Lhe=null==(tj=null==B?void 0:B.env)?void 0:tj.npm_package_version,rE=["websdk","web","webv2","kiosk-v2","mobile","iossdk","androidsdk","reactnativesdk"],n6=rE[0],Dhe=!1,Bl=class t{constructor(t){var e;te(this,Wy,void 0),te(this,Lm,void 0),te(this,Dm,void 0),te(this,Yy,void 0),te(this,Nm,void 0),te(this,Rm,void 0),te(this,Bm,void 0),te(this,zh,void 0),te(this,km,void 0),te(this,qm,void 0),te(this,Fm,void 0),te(this,Xy,void 0),te(this,Um,void 0),te(this,Tp,void 0),ce(this,zh,t.clientId),ce(this,km,t.clientSecret),ce(this,qm,t.accessToken),ce(this,Bm,t.noAuth||!1);let i="https://api-gateway.mappedin.com/track-analytics/a/";!M(this,Bm)&&M(this,zh)&&!zM(M(this,zh))&&(i="https://web-proxy.mappedin.com/a/"),ce(this,Dm,i),ce(this,Dm,M(this,Dm)+(t.venue+"/")),ce(this,Um,t.venue),ce(this,Lm,!1),ce(this,Wy,"boolean"==typeof t.testMode?t.testMode:"true"===(null==(e=t.testMode)?void 0:e.toLowerCase())),ce(this,Yy,rE.find((e=>e===t.context))||rE[0]),ce(this,Nm,$M()),ce(this,Rm,eE()),ce(this,Fm,new Set),ce(this,Xy,t.platformString||""),this.locationSelected=this.locationSelected.bind(this),this.categorySelected=this.categorySelected.bind(this),this.getDirections=wm(this.getDirections.bind(this),2500)}static create(e){return t.instance||(t.instance=new t(e)),t.instance}track(t,e){let i={...e,g:M(this,Lm)};M(this,Tp)&&(i={...i,...M(this,Tp)});let n=M(this,Dm)+t+"?"+nj.default.stringify(i,{skipEmptyString:!0,skipNull:!0});if(Dhe&&Le.log("Analytics.track",n),M(this,Wy))return;let r={"mi-context":n6||M(this,Yy),"mi-session":M(this,Rm),"mi-device":M(this,Nm),"mappedin-sdk-version":Lhe,"mappedin-platform-version":M(this,Xy)};M(this,qm)?r.Authorization="Bearer ".concat(M(this,qm)):M(this,Bm)||M(this,km)&&M(this,zh)&&(r["x-mappedin-key"]=btoa(M(this,zh)),r["x-mappedin-secret"]=btoa(M(this,km))),_o()(n,{method:"GET",mode:"cors",headers:r})}updateAnalyticsUserPosition(t){ce(this,Tp,t?{...t,bluedotTimestamp:Date.now()}:void 0)}locationSelected(t){let e=t.id||t;ht.addPendingEvent(new k0({venue:M(this,Um)})),this.track("select-location",{id:e})}categorySelected(t){let e=t.id||t;ht.addPendingEvent(new B0({venue:M(this,Um)})),this.track("select-category",{id:e})}mapViewLoaded(t,e,i,n){this.track("load-mapview",{type:t,force:e,benchmark:i||-1,reason:n||"success"})}getDirections(t,e){let i={start:t.id,end:e.id,type:"location_to_location"};this.track("query-directions",i)}getSessionID(){return M(this,Rm)}getDeviceID(){return M(this,Nm)}setGeolocationMode(t){ce(this,Lm,t)}trackBlueDotEvent(e){e&&Object.values(t.BLUEDOT_EVENT).includes(e)&&!M(this,Fm).has(e)&&(this.track(e),M(this,Fm).add(e))}trackSearch(t){null!=t&&this.track("query-search",t)}trackSearchSuggest(t){null!=t&&this.track("query-suggest",t)}static setContext(t){let e=rE.find((e=>e===t));e&&(n6=e)}static clearContext(){n6=void 0}static destroy(){t.instance=null}};Wy=new WeakMap,Lm=new WeakMap,Dm=new WeakMap,Yy=new WeakMap,Nm=new WeakMap,Rm=new WeakMap,Bm=new WeakMap,zh=new WeakMap,km=new WeakMap,qm=new WeakMap,Fm=new WeakMap,Xy=new WeakMap,Um=new WeakMap,Tp=new WeakMap,u(Bl,"Analytics"),A(Bl,"instance",null),A(Bl,"BLUEDOT_EVENT",{ATTEMPT_BLUEDOT:"attempt-bluedot",FOUND_POSITION:"found-position",FOUND_FLOOR:"found-floor"});var i6=Bl,Qa=i6;E(),E();var Zy=Bt(Eu()),a6=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(a6||{}),Ec=(t=>(t[t.OPTIONAL_MINIMUM=0]="OPTIONAL_MINIMUM",t[t.OPTIONAL_MAXIMUM=1]="OPTIONAL_MAXIMUM",t[t.MEDIUM=2]="MEDIUM",t[t.HIGH=3]="HIGH",t[t.ALWAYS_VISIBLE=4]="ALWAYS_VISIBLE",t))(Ec||{}),sE=(t=>(t[t.OUTSIDE_MAP=0]="OUTSIDE_MAP",t[t.NO_POSITIONS_PROVIDED=1]="NO_POSITIONS_PROVIDED",t[t.GEOLOCATION_PROVIDER_ERROR=2]="GEOLOCATION_PROVIDER_ERROR",t[t.CUSTOM_GEOLOCATION_PROVIDER_ERROR=3]="CUSTOM_GEOLOCATION_PROVIDER_ERROR",t))(sE||{}),zm=(t=>(t[t.NOT_LISTENING=0]="NOT_LISTENING",t[t.LISTENING=1]="LISTENING",t[t.HAS_POSITION=2]="HAS_POSITION",t[t.HAS_INDOOR_POSITION=3]="HAS_INDOOR_POSITION",t[t.LOCATION_UNCERTAIN=4]="LOCATION_UNCERTAIN",t))(zm||{}),oE=(t=>(t[t.HIDDEN=0]="HIDDEN",t[t.GHOST=1]="GHOST",t[t.NORMAL=2]="NORMAL",t[t.UNCERTAIN=3]="UNCERTAIN",t))(oE||{}),Gm=(t=>(t.EXPLORE="explore",t.FOLLOW="follow",t.STACKED="STACKED",t))(Gm||{}),Qy=(t=>(t[t.CENTER=0]="CENTER",t[t.TOP=1]="TOP",t[t.LEFT=2]="LEFT",t[t.BOTTOM=3]="BOTTOM",t[t.RIGHT=4]="RIGHT",t))(Qy||{}),aE=(t=>(t.CLICK="CLICK",t.STATE_CHANGE="STATE_CHANGE",t.POLYGON_CLICKED="POLYGON_CLICKED",t.NOTHING_CLICKED="NOTHING_CLICKED",t.MAP_CHANGED="MAP_CHANGED",t.MAP_CHANGED_WITH_REASON="MAP_CHANGED_WITH_REASON",t.OUTDOOR_VIEW_LOADED="OUTDOOR_VIEW_LOADED",t))(aE||{}),lE=(t=>(t.POSITION_UPDATE="POSITION_UPDATE",t.STATE_CHANGE="STATE_CHANGE",t))(lE||{}),Ky=(t=>(t.USER_INTERACTION_START="USER_INTERACTION_START",t.USER_INTERACTION_END="USER_INTERACTION_END",t.ZOOM_CHANGED="ZOOM_CHANGED",t.ROTATION_CHANGED="ROTATION_CHANGED",t.TILT_CHANGED="TILT_CHANGED",t.POSITION_CHANGED="POSITION_CHANGED",t.CHANGED="CHANGED",t))(Ky||{}),uE=(t=>(t.UP="up",t.DOWN="down",t.LEFT="left",t.RIGHT="right",t))(uE||{}),l6=(t=>(t.PIXELS="pixels",t.PORTIONS="portions",t))(l6||{}),ua={linear:Zy.default.Easing.Linear.None,"ease-in":Zy.default.Easing.Quadratic.In,"ease-out":Zy.default.Easing.Quadratic.Out,"ease-in-out":Zy.default.Easing.Quadratic.InOut},Jy=(t=>(t.LINEAR="linear",t.EASE_IN="ease-in",t.EASE_OUT="ease-out",t.EASE_IN_OUT="ease-in-out",t))(Jy||{}),Sp=(t=>(t.ACTIVE="ACTIVE",t.INACTIVE="INACTIVE",t.OVERVIEW="OVERVIEW",t.ZOOMED_IN="ZOOMED_IN",t))(Sp||{}),$y=(t=>(t.DYNAMIC_FOCUS_USER_INTERACTION="dynamic-focus-user-interaction",t.BLUE_DOT_LEVEL_TRANSITION="blue-dot-level-transition",t.JOURNEY_CONNECTION_CLICK="journey-connection-click",t))($y||{});E(),E();var Vm={margin:6,text:{numLines:2,lineHeight:1.2,size:11.5,maxWidth:150,foregroundColor:"white",backgroundColor:"#333"},marker:{size:5,foregroundColor:{active:"white",inactive:void 0},backgroundColor:{active:"#333",inactive:void 0}}},cE={lightOnDark:{...Vm,text:{...Vm.text,foregroundColor:"white",backgroundColor:"#333"},marker:{...Vm.marker,foregroundColor:{active:"white",inactive:void 0},backgroundColor:{active:"#333",inactive:void 0}}},darkOnLight:{...Vm,text:{...Vm.text,foregroundColor:"#333",backgroundColor:"white"},marker:{...Vm.marker,foregroundColor:{active:"#333",inactive:void 0},backgroundColor:{active:"white",inactive:void 0}}}};E(),E();var zc="151",IT={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Nhe=0,ij=1,Rhe=2,NW=1,Bhe=2,lx=3,Pa=0,_s=1,Dr=2,Nr=0,mg=1,rj=2,sj=3,UE=4,EO=5,cg=100,khe=101,qhe=102,oj=103,aj=104,Fhe=200,Uhe=201,zhe=202,Ghe=203,RW=204,BW=205,Vhe=206,Hhe=207,jhe=208,Whe=209,Yhe=210,Xhe=0,Zhe=1,Qhe=2,G6=3,Khe=4,Jhe=5,$he=6,efe=7,TO=0,tfe=1,nfe=2,Nc=0,ife=1,rfe=2,sfe=3,ofe=4,afe=5,Fx=300,xg=301,bg=302,V6=303,H6=304,OT=306,wr=1e3,ca=1001,vx=1002,ui=1003,zE=1004,cx=1005,wi=1006,SO=1007,Dp=1008,Mr=1009,lfe=1010,ufe=1011,kW=1012,cfe=1013,il=1014,Au=1015,Np=1016,hfe=1017,ffe=1018,Xh=1020,pfe=1021,Gs=1023,dfe=1024,mfe=1025,Zh=1026,Qh=1027,AO=1028,gfe=1029,vfe=1030,yfe=1031,xfe=1033,u6=33776,c6=33777,h6=33778,f6=33779,lj=35840,uj=35841,cj=35842,hj=35843,bfe=36196,fj=37492,pj=37496,dj=37808,mj=37809,gj=37810,vj=37811,yj=37812,xj=37813,bj=37814,_j=37815,wj=37816,Mj=37817,Ej=37818,Tj=37819,Sj=37820,Aj=37821,p6=36492,_fe=36283,Cj=36284,Pj=36285,Ij=36286,_g=2300,wg=2301,d6=2302,Oj=2400,Lj=2401,Dj=2402,rl=3e3,ai=3001,da=3200,Ig=3201,CO=0,wfe=1,qW="",Lr="srgb",yx="srgb-linear",FW="display-p3",Rc=7680,Og=7681,LT=514,Ux=519,j6=35044,Nj="300 es",W6=1035,RO=class{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});let i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;let i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;let i=this._listeners[t];if(void 0!==i){let t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;let e=this._listeners[t.type];if(void 0!==e){t.target=this;let i=e.slice(0);for(let e=0,n=i.length;e<n;e++)i[e].call(this,t);t.target=null}}};u(RO,"EventDispatcher");var Eo=RO,wo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Rj=1234567,hx=Math.PI/180,xx=180/Math.PI;function Cu(){let t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(wo[255&t]+wo[t>>8&255]+wo[t>>16&255]+wo[t>>24&255]+"-"+wo[255&e]+wo[e>>8&255]+"-"+wo[e>>16&15|64]+wo[e>>24&255]+"-"+wo[63&i|128]+wo[i>>8&255]+"-"+wo[i>>16&255]+wo[i>>24&255]+wo[255&n]+wo[n>>8&255]+wo[n>>16&255]+wo[n>>24&255]).toLowerCase()}function ao(t,e,i){return Math.max(e,Math.min(i,t))}function PO(t,e){return(t%e+e)%e}function Mfe(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)}function Efe(t,e,i){return t!==e?(i-t)/(e-t):0}function fx(t,e,i){return(1-i)*t+i*e}function Tfe(t,e,i,n){return fx(t,e,1-Math.exp(-i*n))}function Sfe(t,e=1){return e-Math.abs(PO(t,2*e)-e)}function Afe(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)}function Cfe(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)}function Pfe(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Ife(t,e){return t+Math.random()*(e-t)}function Ofe(t){return t*(.5-Math.random())}function Lfe(t){void 0!==t&&(Rj=t);let e=Rj+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296}function Dfe(t){return t*hx}function Nfe(t){return t*xx}function Y6(t){return 0==(t&t-1)&&0!==t}function Rfe(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function UW(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Bfe(t,e,i,n,r){let o=Math.cos,s=Math.sin,a=o(i/2),l=s(i/2),u=o((e+n)/2),h=s((e+n)/2),c=o((e-n)/2),p=s((e-n)/2),d=o((n-e)/2),f=s((n-e)/2);switch(r){case"XYX":t.set(a*h,l*c,l*p,a*u);break;case"YZY":t.set(l*p,a*h,l*c,a*u);break;case"ZXZ":t.set(l*c,l*p,a*h,a*u);break;case"XZX":t.set(a*h,l*f,l*d,a*u);break;case"YXY":t.set(l*d,a*h,l*f,a*u);break;case"ZYZ":t.set(l*f,l*d,a*h,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Dc(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function qi(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}u(Cu,"generateUUID"),u(ao,"clamp"),u(PO,"euclideanModulo"),u(Mfe,"mapLinear"),u(Efe,"inverseLerp"),u(fx,"lerp"),u(Tfe,"damp"),u(Sfe,"pingpong"),u(Afe,"smoothstep"),u(Cfe,"smootherstep"),u(Pfe,"randInt"),u(Ife,"randFloat"),u(Ofe,"randFloatSpread"),u(Lfe,"seededRandom"),u(Dfe,"degToRad"),u(Nfe,"radToDeg"),u(Y6,"isPowerOfTwo"),u(Rfe,"ceilPowerOfTwo"),u(UW,"floorPowerOfTwo"),u(Bfe,"setQuaternionFromProperEuler"),u(Dc,"denormalize"),u(qi,"normalize");var Br={DEG2RAD:hx,RAD2DEG:xx,generateUUID:Cu,clamp:ao,euclideanModulo:PO,mapLinear:Mfe,inverseLerp:Efe,lerp:fx,damp:Tfe,pingpong:Sfe,smoothstep:Afe,smootherstep:Cfe,randInt:Pfe,randFloat:Ife,randFloatSpread:Ofe,seededRandom:Lfe,degToRad:Dfe,radToDeg:Nfe,isPowerOfTwo:Y6,ceilPowerOfTwo:Rfe,floorPowerOfTwo:UW,setQuaternionFromProperEuler:Bfe,normalize:qi,denormalize:Dc},gT=class t{constructor(e=0,i=0){t.prototype.isVector2=!0,this.x=e,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,i=this.y,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6],this.y=n[1]*e+n[4]*i+n[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(ao(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let i=Math.cos(e),n=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*i-o*n+t.x,this.y=r*n+o*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}};u(gT,"Vector2");var qe=gT,vT=class t{constructor(){t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,e,i,n,r,o,s,a,l){let u=this.elements;return u[0]=t,u[1]=n,u[2]=s,u[3]=e,u[4]=r,u[5]=a,u[6]=i,u[7]=o,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[3],a=i[6],l=i[1],u=i[4],h=i[7],c=i[2],p=i[5],d=i[8],f=n[0],g=n[3],m=n[6],v=n[1],y=n[4],x=n[7],_=n[2],b=n[5],M=n[8];return r[0]=o*f+s*v+a*_,r[3]=o*g+s*y+a*b,r[6]=o*m+s*x+a*M,r[1]=l*f+u*v+h*_,r[4]=l*g+u*y+h*b,r[7]=l*m+u*x+h*M,r[2]=c*f+p*v+d*_,r[5]=c*g+p*y+d*b,r[8]=c*m+p*x+d*M,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8];return e*o*u-e*s*l-i*r*u+i*s*a+n*r*l-n*o*a}invert(){let t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],h=u*o-s*l,c=s*a-u*r,p=l*r-o*a,d=e*h+i*c+n*p;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);let f=1/d;return t[0]=h*f,t[1]=(n*l-u*i)*f,t[2]=(s*i-n*o)*f,t[3]=c*f,t[4]=(u*e-n*a)*f,t[5]=(n*r-s*e)*f,t[6]=p*f,t[7]=(i*a-l*e)*f,t[8]=(o*e-i*r)*f,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,n,r,o,s){let a=Math.cos(r),l=Math.sin(r);return this.set(i*a,i*l,-i*(a*o+l*s)+o+t,-n*l,n*a,-n*(-l*o+a*s)+s+e,0,0,1),this}scale(t,e){return this.premultiply(m6.makeScale(t,e)),this}rotate(t){return this.premultiply(m6.makeRotation(-t)),this}translate(t,e){return this.premultiply(m6.makeTranslation(t,e)),this}makeTranslation(t,e){return this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}};u(vT,"Matrix3");var li=vT,m6=new li;function zW(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function bx(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function gg(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function g6(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}u(zW,"arrayNeedsUint32"),u(bx,"createElementNS"),u(gg,"SRGBToLinear"),u(g6,"LinearToSRGB");var kfe=(new li).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),qfe=(new li).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function Ffe(t){return t.convertSRGBToLinear().applyMatrix3(qfe)}function Ufe(t){return t.applyMatrix3(kfe).convertLinearToSRGB()}u(Ffe,"DisplayP3ToLinearSRGB"),u(Ufe,"LinearSRGBToDisplayP3");var Hm,zfe={[yx]:t=>t,[Lr]:t=>t.convertSRGBToLinear(),[FW]:Ffe},Gfe={[yx]:t=>t,[Lr]:t=>t.convertLinearToSRGB(),[FW]:Ufe},Sa={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return yx},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,i){if(!1===this.enabled||e===i||!e||!i)return t;let n=zfe[e],r=Gfe[i];if(void 0===n||void 0===r)throw new Error('Unsupported color space conversion, "'.concat(e,'" to "').concat(i,'".'));return r(n(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}},BO=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Hm&&(Hm=bx("canvas")),Hm.width=t.width,Hm.height=t.height;let i=Hm.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=Hm}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=bx("canvas");e.width=t.width,e.height=t.height;let i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);let n=i.getImageData(0,0,t.width,t.height),r=n.data;for(let t=0;t<r.length;t++)r[t]=255*gg(r[t]/255);return i.putImageData(n,0,0),e}if(t.data){let e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*gg(e[t]/255)):e[t]=gg(e[t]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}};u(BO,"ImageUtils");var GE=BO,kO=class{constructor(t=null){this.isSource=!0,this.uuid=Cu(),this.data=t,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){let e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];let i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let t;if(Array.isArray(n)){t=[];for(let e=0,i=n.length;e<i;e++)n[e].isDataTexture?t.push(v6(n[e].image)):t.push(v6(n[e]))}else t=v6(n);i.url=t}return e||(t.images[this.uuid]=i),i}};u(kO,"Source");var Mg=kO;function v6(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?GE.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}u(v6,"serializeImage");var Vfe=0,pg=class t extends Eo{constructor(e=t.DEFAULT_IMAGE,i=t.DEFAULT_MAPPING,n=ca,r=ca,o=wi,s=Dp,a=Gs,l=Mr,u=t.DEFAULT_ANISOTROPY,h=rl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Vfe++}),this.uuid=Cu(),this.name="",this.source=new Mg(e),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new qe(0,0),this.repeat=new qe(1,1),this.center=new qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new li,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];let i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Fx)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case wr:t.x=t.x-Math.floor(t.x);break;case ca:t.x=t.x<0?0:1;break;case vx:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case wr:t.y=t.y-Math.floor(t.y);break;case ca:t.y=t.y<0?0:1;break;case vx:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}};u(pg,"Texture");var Er=pg;Er.DEFAULT_IMAGE=null,Er.DEFAULT_MAPPING=Fx,Er.DEFAULT_ANISOTROPY=1;var yT=class t{constructor(e=0,i=0,n=0,r=1){t.prototype.isVector4=!0,this.x=e,this.y=i,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,i=this.y,n=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*i+o[8]*n+o[12]*r,this.y=o[1]*e+o[5]*i+o[9]*n+o[13]*r,this.z=o[2]*e+o[6]*i+o[10]*n+o[14]*r,this.w=o[3]*e+o[7]*i+o[11]*n+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,n,r,o=t.elements,s=o[0],a=o[4],l=o[8],u=o[1],h=o[5],c=o[9],p=o[2],d=o[6],f=o[10];if(Math.abs(a-u)<.01&&Math.abs(l-p)<.01&&Math.abs(c-d)<.01){if(Math.abs(a+u)<.1&&Math.abs(l+p)<.1&&Math.abs(c+d)<.1&&Math.abs(s+h+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let t=(s+1)/2,o=(h+1)/2,g=(f+1)/2,m=(a+u)/4,v=(l+p)/4,y=(c+d)/4;return t>o&&t>g?t<.01?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(t),n=m/i,r=v/i):o>g?o<.01?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(o),i=m/n,r=y/n):g<.01?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(g),i=v/r,n=y/r),this.set(i,n,r,e),this}let g=Math.sqrt((d-c)*(d-c)+(l-p)*(l-p)+(u-a)*(u-a));return Math.abs(g)<.001&&(g=1),this.x=(d-c)/g,this.y=(l-p)/g,this.z=(u-a)/g,this.w=Math.acos((s+h+f-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}};u(yT,"Vector4");var Fi=yT,qO=class extends Eo{constructor(t=1,e=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Fi(0,0,t,e),this.scissorTest=!1,this.viewport=new Fi(0,0,t,e);let n={width:t,height:e,depth:1};this.texture=new Er(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:wi,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(t,e,i=1){(this.width!==t||this.height!==e||this.depth!==i)&&(this.width=t,this.height=e,this.depth=i,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let e=Object.assign({},t.texture.image);return this.texture.source=new Mg(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}};u(qO,"WebGLRenderTarget");var ti=qO,FO=class extends Er{constructor(t=null,e=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=ui,this.minFilter=ui,this.wrapR=ca,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};u(FO,"DataArrayTexture");var VE=FO,UO=class extends Er{constructor(t=null,e=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:n},this.magFilter=ui,this.minFilter=ui,this.wrapR=ca,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};u(UO,"Data3DTexture");var HE=UO,zO=class extends ti{constructor(t=1,e=1,i=1,n={}){super(t,e,n),this.isWebGLMultipleRenderTargets=!0;let r=this.texture;this.texture=[];for(let t=0;t<i;t++)this.texture[t]=r.clone(),this.texture[t].isRenderTargetTexture=!0}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=t,this.texture[n].image.height=e,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let e=0,i=t.texture.length;e<i;e++)this.texture[e]=t.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}};u(zO,"WebGLMultipleRenderTargets");var jE=zO,GO=class{constructor(t=0,e=0,i=0,n=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=n}static slerpFlat(t,e,i,n,r,o,s){let a=i[n+0],l=i[n+1],u=i[n+2],h=i[n+3],c=r[o+0],p=r[o+1],d=r[o+2],f=r[o+3];if(0===s)return t[e+0]=a,t[e+1]=l,t[e+2]=u,void(t[e+3]=h);if(1===s)return t[e+0]=c,t[e+1]=p,t[e+2]=d,void(t[e+3]=f);if(h!==f||a!==c||l!==p||u!==d){let t=1-s,e=a*c+l*p+u*d+h*f,i=e>=0?1:-1,n=1-e*e;if(n>Number.EPSILON){let r=Math.sqrt(n),o=Math.atan2(r,e*i);t=Math.sin(t*o)/r,s=Math.sin(s*o)/r}let r=s*i;if(a=a*t+c*r,l=l*t+p*r,u=u*t+d*r,h=h*t+f*r,t===1-s){let t=1/Math.sqrt(a*a+l*l+u*u+h*h);a*=t,l*=t,u*=t,h*=t}}t[e]=a,t[e+1]=l,t[e+2]=u,t[e+3]=h}static multiplyQuaternionsFlat(t,e,i,n,r,o){let s=i[n],a=i[n+1],l=i[n+2],u=i[n+3],h=r[o],c=r[o+1],p=r[o+2],d=r[o+3];return t[e]=s*d+u*h+a*p-l*c,t[e+1]=a*d+u*c+l*h-s*p,t[e+2]=l*d+u*p+s*c-a*h,t[e+3]=u*d-s*h-a*c-l*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){let i=t._x,n=t._y,r=t._z,o=t._order,s=Math.cos,a=Math.sin,l=s(i/2),u=s(n/2),h=s(r/2),c=a(i/2),p=a(n/2),d=a(r/2);switch(o){case"XYZ":this._x=c*u*h+l*p*d,this._y=l*p*h-c*u*d,this._z=l*u*d+c*p*h,this._w=l*u*h-c*p*d;break;case"YXZ":this._x=c*u*h+l*p*d,this._y=l*p*h-c*u*d,this._z=l*u*d-c*p*h,this._w=l*u*h+c*p*d;break;case"ZXY":this._x=c*u*h-l*p*d,this._y=l*p*h+c*u*d,this._z=l*u*d+c*p*h,this._w=l*u*h-c*p*d;break;case"ZYX":this._x=c*u*h-l*p*d,this._y=l*p*h+c*u*d,this._z=l*u*d-c*p*h,this._w=l*u*h+c*p*d;break;case"YZX":this._x=c*u*h+l*p*d,this._y=l*p*h+c*u*d,this._z=l*u*d-c*p*h,this._w=l*u*h-c*p*d;break;case"XZY":this._x=c*u*h-l*p*d,this._y=l*p*h-c*u*d,this._z=l*u*d+c*p*h,this._w=l*u*h+c*p*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,i=e[0],n=e[4],r=e[8],o=e[1],s=e[5],a=e[9],l=e[2],u=e[6],h=e[10],c=i+s+h;if(c>0){let t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(u-a)*t,this._y=(r-l)*t,this._z=(o-n)*t}else if(i>s&&i>h){let t=2*Math.sqrt(1+i-s-h);this._w=(u-a)/t,this._x=.25*t,this._y=(n+o)/t,this._z=(r+l)/t}else if(s>h){let t=2*Math.sqrt(1+s-i-h);this._w=(r-l)/t,this._x=(n+o)/t,this._y=.25*t,this._z=(a+u)/t}else{let t=2*Math.sqrt(1+h-i-s);this._w=(o-n)/t,this._x=(r+l)/t,this._y=(a+u)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ao(this.dot(t),-1,1)))}rotateTowards(t,e){let i=this.angleTo(t);if(0===i)return this;let n=Math.min(1,e/i);return this.slerp(t,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let i=t._x,n=t._y,r=t._z,o=t._w,s=e._x,a=e._y,l=e._z,u=e._w;return this._x=i*u+o*s+n*l-r*a,this._y=n*u+o*a+r*s-i*l,this._z=r*u+o*l+i*a-n*s,this._w=o*u-i*s-n*a-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);let i=this._x,n=this._y,r=this._z,o=this._w,s=o*t._w+i*t._x+n*t._y+r*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;let a=1-s*s;if(a<=Number.EPSILON){let t=1-e;return this._w=t*o+e*this._w,this._x=t*i+e*this._x,this._y=t*n+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}let l=Math.sqrt(a),u=Math.atan2(l,s),h=Math.sin((1-e)*u)/l,c=Math.sin(e*u)/l;return this._w=o*h+this._w*c,this._x=i*h+this._x*c,this._y=n*h+this._y*c,this._z=r*h+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){let t=Math.random(),e=Math.sqrt(1-t),i=Math.sqrt(t),n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(n),i*Math.sin(r),i*Math.cos(r),e*Math.sin(n))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}};u(GO,"Quaternion");var Ia=GO,xT=class t{constructor(e=0,i=0,n=0){t.prototype.isVector3=!0,this.x=e,this.y=i,this.z=n}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Bj.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Bj.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*n,this.y=r[1]*e+r[4]*i+r[7]*n,this.z=r[2]*e+r[5]*i+r[8]*n,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,i=this.y,n=this.z,r=t.elements,o=1/(r[3]*e+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*n+r[12])*o,this.y=(r[1]*e+r[5]*i+r[9]*n+r[13])*o,this.z=(r[2]*e+r[6]*i+r[10]*n+r[14])*o,this}applyQuaternion(t){let e=this.x,i=this.y,n=this.z,r=t.x,o=t.y,s=t.z,a=t.w,l=a*e+o*n-s*i,u=a*i+s*e-r*n,h=a*n+r*i-o*e,c=-r*e-o*i-s*n;return this.x=l*a+c*-r+u*-s-h*-o,this.y=u*a+c*-o+h*-r-l*-s,this.z=h*a+c*-s+l*-o-u*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,i=this.y,n=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*n,this.y=r[1]*e+r[5]*i+r[9]*n,this.z=r[2]*e+r[6]*i+r[10]*n,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(e,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let i=t.x,n=t.y,r=t.z,o=e.x,s=e.y,a=e.z;return this.x=n*a-r*s,this.y=r*o-i*a,this.z=i*s-n*o,this}projectOnVector(t){let e=t.lengthSq();if(0===e)return this.set(0,0,0);let i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return y6.copy(this).projectOnVector(t),this.sub(y6)}reflect(t){return this.sub(y6.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;let i=this.dot(t)/e;return Math.acos(ao(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){let n=Math.sin(e)*t;return this.x=n*Math.sin(i),this.y=Math.cos(e)*t,this.z=n*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=n,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,i=Math.sqrt(1-t**2);return this.x=i*Math.cos(e),this.y=i*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};u(xT,"Vector3");var K=xT,y6=new K,Bj=new Ia,VO=class{constructor(t=new K(1/0,1/0,1/0),e=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Sc.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Sc.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let i=Sc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){if(t.updateWorldMatrix(!1,!1),void 0!==t.boundingBox)null===t.boundingBox&&t.computeBoundingBox(),jm.copy(t.boundingBox),jm.applyMatrix4(t.matrixWorld),this.union(jm);else{let i=t.geometry;if(void 0!==i)if(e&&void 0!==i.attributes&&void 0!==i.attributes.position){let e=i.attributes.position;for(let i=0,n=e.count;i<n;i++)Sc.fromBufferAttribute(e,i).applyMatrix4(t.matrixWorld),this.expandByPoint(Sc)}else null===i.boundingBox&&i.computeBoundingBox(),jm.copy(i.boundingBox),jm.applyMatrix4(t.matrixWorld),this.union(jm)}let i=t.children;for(let t=0,n=i.length;t<n;t++)this.expandByObject(i[t],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Sc),Sc.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ex),hE.subVectors(this.max,ex),Wm.subVectors(t.a,ex),Ym.subVectors(t.b,ex),Xm.subVectors(t.c,ex),Gh.subVectors(Ym,Wm),Vh.subVectors(Xm,Ym),Ap.subVectors(Wm,Xm);let e=[0,-Gh.z,Gh.y,0,-Vh.z,Vh.y,0,-Ap.z,Ap.y,Gh.z,0,-Gh.x,Vh.z,0,-Vh.x,Ap.z,0,-Ap.x,-Gh.y,Gh.x,0,-Vh.y,Vh.x,0,-Ap.y,Ap.x,0];return!(!x6(e,Wm,Ym,Xm,hE)||(e=[1,0,0,0,1,0,0,0,1],!x6(e,Wm,Ym,Xm,hE)))&&(fE.crossVectors(Gh,Vh),e=[fE.x,fE.y,fE.z],x6(e,Wm,Ym,Xm,hE))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Sc).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Sc).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Tc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Tc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Tc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Tc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Tc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Tc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Tc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Tc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Tc)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}};u(VO,"Box3");var Yt=VO,Tc=[new K,new K,new K,new K,new K,new K,new K,new K],Sc=new K,jm=new Yt,Wm=new K,Ym=new K,Xm=new K,Gh=new K,Vh=new K,Ap=new K,ex=new K,hE=new K,fE=new K,Cp=new K;function x6(t,e,i,n,r){for(let o=0,s=t.length-3;o<=s;o+=3){Cp.fromArray(t,o);let s=r.x*Math.abs(Cp.x)+r.y*Math.abs(Cp.y)+r.z*Math.abs(Cp.z),a=e.dot(Cp),l=i.dot(Cp),u=n.dot(Cp);if(Math.max(-Math.max(a,l,u),Math.min(a,l,u))>s)return!1}return!0}u(x6,"satForAxes");var Hfe=new Yt,tx=new K,b6=new K,HO=class{constructor(t=new K,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let i=this.center;void 0!==e?i.copy(e):Hfe.setFromPoints(t).getCenter(i);let n=0;for(let e=0,r=t.length;e<r;e++)n=Math.max(n,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(n),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;tx.subVectors(t,this.center);let e=tx.lengthSq();if(e>this.radius*this.radius){let t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(tx,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(b6.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(tx.copy(t.center).add(b6)),this.expandByPoint(tx.copy(t.center).sub(b6))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}};u(HO,"Sphere");var Kh=HO,Ac=new K,_6=new K,pE=new K,Hh=new K,w6=new K,dE=new K,M6=new K,jO=class{constructor(t=new K,e=new K(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ac)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Ac.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ac.copy(this.origin).addScaledVector(this.direction,e),Ac.distanceToSquared(t))}distanceSqToSegment(t,e,i,n){_6.copy(t).add(e).multiplyScalar(.5),pE.copy(e).sub(t).normalize(),Hh.copy(this.origin).sub(_6);let r,o,s,a,l=.5*t.distanceTo(e),u=-this.direction.dot(pE),h=Hh.dot(this.direction),c=-Hh.dot(pE),p=Hh.lengthSq(),d=Math.abs(1-u*u);if(d>0)if(r=u*c-h,o=u*h-c,a=l*d,r>=0)if(o>=-a)if(o<=a){let t=1/d;r*=t,o*=t,s=r*(r+u*o+2*h)+o*(u*r+o+2*c)+p}else o=l,r=Math.max(0,-(u*o+h)),s=-r*r+o*(o+2*c)+p;else o=-l,r=Math.max(0,-(u*o+h)),s=-r*r+o*(o+2*c)+p;else o<=-a?(r=Math.max(0,-(-u*l+h)),o=r>0?-l:Math.min(Math.max(-l,-c),l),s=-r*r+o*(o+2*c)+p):o<=a?(r=0,o=Math.min(Math.max(-l,-c),l),s=o*(o+2*c)+p):(r=Math.max(0,-(u*l+h)),o=r>0?l:Math.min(Math.max(-l,-c),l),s=-r*r+o*(o+2*c)+p);else o=u>0?-l:l,r=Math.max(0,-(u*o+h)),s=-r*r+o*(o+2*c)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,r),n&&n.copy(_6).addScaledVector(pE,o),s}intersectSphere(t,e){Ac.subVectors(t.center,this.origin);let i=Ac.dot(this.direction),n=Ac.dot(Ac)-i*i,r=t.radius*t.radius;if(n>r)return null;let o=Math.sqrt(r-n),s=i-o,a=i+o;return a<0?null:s<0?this.at(a,e):this.at(s,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;let i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){let i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,n,r,o,s,a,l=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,c=this.origin;return l>=0?(i=(t.min.x-c.x)*l,n=(t.max.x-c.x)*l):(i=(t.max.x-c.x)*l,n=(t.min.x-c.x)*l),u>=0?(r=(t.min.y-c.y)*u,o=(t.max.y-c.y)*u):(r=(t.max.y-c.y)*u,o=(t.min.y-c.y)*u),i>o||r>n||((r>i||isNaN(i))&&(i=r),(o<n||isNaN(n))&&(n=o),h>=0?(s=(t.min.z-c.z)*h,a=(t.max.z-c.z)*h):(s=(t.max.z-c.z)*h,a=(t.min.z-c.z)*h),i>a||s>n)||((s>i||i!=i)&&(i=s),(a<n||n!=n)&&(n=a),n<0)?null:this.at(i>=0?i:n,e)}intersectsBox(t){return null!==this.intersectBox(t,Ac)}intersectTriangle(t,e,i,n,r){w6.subVectors(e,t),dE.subVectors(i,t),M6.crossVectors(w6,dE);let o,s=this.direction.dot(M6);if(s>0){if(n)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}Hh.subVectors(this.origin,t);let a=o*this.direction.dot(dE.crossVectors(Hh,dE));if(a<0)return null;let l=o*this.direction.dot(w6.cross(Hh));if(l<0||a+l>s)return null;let u=-o*Hh.dot(M6);return u<0?null:this.at(u/s,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}};u(jO,"Ray");var _x=jO,gx=class t{constructor(){t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,e,i,n,r,o,s,a,l,u,h,c,p,d,f,g){let m=this.elements;return m[0]=t,m[4]=e,m[8]=i,m[12]=n,m[1]=r,m[5]=o,m[9]=s,m[13]=a,m[2]=l,m[6]=u,m[10]=h,m[14]=c,m[3]=p,m[7]=d,m[11]=f,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new t).fromArray(this.elements)}copy(t){let e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){let e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){let e=this.elements,i=t.elements,n=1/Zm.setFromMatrixColumn(t,0).length(),r=1/Zm.setFromMatrixColumn(t,1).length(),o=1/Zm.setFromMatrixColumn(t,2).length();return e[0]=i[0]*n,e[1]=i[1]*n,e[2]=i[2]*n,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*o,e[9]=i[9]*o,e[10]=i[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,i=t.x,n=t.y,r=t.z,o=Math.cos(i),s=Math.sin(i),a=Math.cos(n),l=Math.sin(n),u=Math.cos(r),h=Math.sin(r);if("XYZ"===t.order){let t=o*u,i=o*h,n=s*u,r=s*h;e[0]=a*u,e[4]=-a*h,e[8]=l,e[1]=i+n*l,e[5]=t-r*l,e[9]=-s*a,e[2]=r-t*l,e[6]=n+i*l,e[10]=o*a}else if("YXZ"===t.order){let t=a*u,i=a*h,n=l*u,r=l*h;e[0]=t+r*s,e[4]=n*s-i,e[8]=o*l,e[1]=o*h,e[5]=o*u,e[9]=-s,e[2]=i*s-n,e[6]=r+t*s,e[10]=o*a}else if("ZXY"===t.order){let t=a*u,i=a*h,n=l*u,r=l*h;e[0]=t-r*s,e[4]=-o*h,e[8]=n+i*s,e[1]=i+n*s,e[5]=o*u,e[9]=r-t*s,e[2]=-o*l,e[6]=s,e[10]=o*a}else if("ZYX"===t.order){let t=o*u,i=o*h,n=s*u,r=s*h;e[0]=a*u,e[4]=n*l-i,e[8]=t*l+r,e[1]=a*h,e[5]=r*l+t,e[9]=i*l-n,e[2]=-l,e[6]=s*a,e[10]=o*a}else if("YZX"===t.order){let t=o*a,i=o*l,n=s*a,r=s*l;e[0]=a*u,e[4]=r-t*h,e[8]=n*h+i,e[1]=h,e[5]=o*u,e[9]=-s*u,e[2]=-l*u,e[6]=i*h+n,e[10]=t-r*h}else if("XZY"===t.order){let t=o*a,i=o*l,n=s*a,r=s*l;e[0]=a*u,e[4]=-h,e[8]=l*u,e[1]=t*h+r,e[5]=o*u,e[9]=i*h-n,e[2]=n*h-i,e[6]=s*u,e[10]=r*h+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(jfe,t,Wfe)}lookAt(t,e,i){let n=this.elements;return Aa.subVectors(t,e),0===Aa.lengthSq()&&(Aa.z=1),Aa.normalize(),jh.crossVectors(i,Aa),0===jh.lengthSq()&&(1===Math.abs(i.z)?Aa.x+=1e-4:Aa.z+=1e-4,Aa.normalize(),jh.crossVectors(i,Aa)),jh.normalize(),mE.crossVectors(Aa,jh),n[0]=jh.x,n[4]=mE.x,n[8]=Aa.x,n[1]=jh.y,n[5]=mE.y,n[9]=Aa.y,n[2]=jh.z,n[6]=mE.z,n[10]=Aa.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let i=t.elements,n=e.elements,r=this.elements,o=i[0],s=i[4],a=i[8],l=i[12],u=i[1],h=i[5],c=i[9],p=i[13],d=i[2],f=i[6],g=i[10],m=i[14],v=i[3],y=i[7],x=i[11],_=i[15],b=n[0],M=n[4],E=n[8],w=n[12],A=n[1],S=n[5],T=n[9],C=n[13],P=n[2],I=n[6],L=n[10],O=n[14],N=n[3],D=n[7],R=n[11],q=n[15];return r[0]=o*b+s*A+a*P+l*N,r[4]=o*M+s*S+a*I+l*D,r[8]=o*E+s*T+a*L+l*R,r[12]=o*w+s*C+a*O+l*q,r[1]=u*b+h*A+c*P+p*N,r[5]=u*M+h*S+c*I+p*D,r[9]=u*E+h*T+c*L+p*R,r[13]=u*w+h*C+c*O+p*q,r[2]=d*b+f*A+g*P+m*N,r[6]=d*M+f*S+g*I+m*D,r[10]=d*E+f*T+g*L+m*R,r[14]=d*w+f*C+g*O+m*q,r[3]=v*b+y*A+x*P+_*N,r[7]=v*M+y*S+x*I+_*D,r[11]=v*E+y*T+x*L+_*R,r[15]=v*w+y*C+x*O+_*q,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],i=t[4],n=t[8],r=t[12],o=t[1],s=t[5],a=t[9],l=t[13],u=t[2],h=t[6],c=t[10],p=t[14];return t[3]*(+r*a*h-n*l*h-r*s*c+i*l*c+n*s*p-i*a*p)+t[7]*(+e*a*p-e*l*c+r*o*c-n*o*p+n*l*u-r*a*u)+t[11]*(+e*l*h-e*s*p-r*o*h+i*o*p+r*s*u-i*l*u)+t[15]*(-n*s*u-e*a*h+e*s*c+n*o*h-i*o*c+i*a*u)}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(t,e,i){let n=this.elements;return t.isVector3?(n[12]=t.x,n[13]=t.y,n[14]=t.z):(n[12]=t,n[13]=e,n[14]=i),this}invert(){let t=this.elements,e=t[0],i=t[1],n=t[2],r=t[3],o=t[4],s=t[5],a=t[6],l=t[7],u=t[8],h=t[9],c=t[10],p=t[11],d=t[12],f=t[13],g=t[14],m=t[15],v=h*g*l-f*c*l+f*a*p-s*g*p-h*a*m+s*c*m,y=d*c*l-u*g*l-d*a*p+o*g*p+u*a*m-o*c*m,x=u*f*l-d*h*l+d*s*p-o*f*p-u*s*m+o*h*m,_=d*h*a-u*f*a-d*s*c+o*f*c+u*s*g-o*h*g,b=e*v+i*y+n*x+r*_;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let M=1/b;return t[0]=v*M,t[1]=(f*c*r-h*g*r-f*n*p+i*g*p+h*n*m-i*c*m)*M,t[2]=(s*g*r-f*a*r+f*n*l-i*g*l-s*n*m+i*a*m)*M,t[3]=(h*a*r-s*c*r-h*n*l+i*c*l+s*n*p-i*a*p)*M,t[4]=y*M,t[5]=(u*g*r-d*c*r+d*n*p-e*g*p-u*n*m+e*c*m)*M,t[6]=(d*a*r-o*g*r-d*n*l+e*g*l+o*n*m-e*a*m)*M,t[7]=(o*c*r-u*a*r+u*n*l-e*c*l-o*n*p+e*a*p)*M,t[8]=x*M,t[9]=(d*h*r-u*f*r-d*i*p+e*f*p+u*i*m-e*h*m)*M,t[10]=(o*f*r-d*s*r+d*i*l-e*f*l-o*i*m+e*s*m)*M,t[11]=(u*s*r-o*h*r-u*i*l+e*h*l+o*i*p-e*s*p)*M,t[12]=_*M,t[13]=(u*f*n-d*h*n+d*i*c-e*f*c-u*i*g+e*h*g)*M,t[14]=(d*s*n-o*f*n-d*i*a+e*f*a+o*i*g-e*s*g)*M,t[15]=(o*h*n-u*s*n+u*i*a-e*h*a-o*i*c+e*s*c)*M,this}scale(t){let e=this.elements,i=t.x,n=t.y,r=t.z;return e[0]*=i,e[4]*=n,e[8]*=r,e[1]*=i,e[5]*=n,e[9]*=r,e[2]*=i,e[6]*=n,e[10]*=r,e[3]*=i,e[7]*=n,e[11]*=r,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}makeTranslation(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let i=Math.cos(e),n=Math.sin(e),r=1-i,o=t.x,s=t.y,a=t.z,l=r*o,u=r*s;return this.set(l*o+i,l*s-n*a,l*a+n*s,0,l*s+n*a,u*s+i,u*a-n*o,0,l*a-n*s,u*a+n*o,r*a*a+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,n,r,o){return this.set(1,i,r,0,t,1,o,0,e,n,1,0,0,0,0,1),this}compose(t,e,i){let n=this.elements,r=e._x,o=e._y,s=e._z,a=e._w,l=r+r,u=o+o,h=s+s,c=r*l,p=r*u,d=r*h,f=o*u,g=o*h,m=s*h,v=a*l,y=a*u,x=a*h,_=i.x,b=i.y,M=i.z;return n[0]=(1-(f+m))*_,n[1]=(p+x)*_,n[2]=(d-y)*_,n[3]=0,n[4]=(p-x)*b,n[5]=(1-(c+m))*b,n[6]=(g+v)*b,n[7]=0,n[8]=(d+y)*M,n[9]=(g-v)*M,n[10]=(1-(c+f))*M,n[11]=0,n[12]=t.x,n[13]=t.y,n[14]=t.z,n[15]=1,this}decompose(t,e,i){let n=this.elements,r=Zm.set(n[0],n[1],n[2]).length(),o=Zm.set(n[4],n[5],n[6]).length(),s=Zm.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),t.x=n[12],t.y=n[13],t.z=n[14],kl.copy(this);let a=1/r,l=1/o,u=1/s;return kl.elements[0]*=a,kl.elements[1]*=a,kl.elements[2]*=a,kl.elements[4]*=l,kl.elements[5]*=l,kl.elements[6]*=l,kl.elements[8]*=u,kl.elements[9]*=u,kl.elements[10]*=u,e.setFromRotationMatrix(kl),i.x=r,i.y=o,i.z=s,this}makePerspective(t,e,i,n,r,o){let s=this.elements,a=2*r/(e-t),l=2*r/(i-n),u=(e+t)/(e-t),h=(i+n)/(i-n),c=-(o+r)/(o-r),p=-2*o*r/(o-r);return s[0]=a,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=c,s[14]=p,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(t,e,i,n,r,o){let s=this.elements,a=1/(e-t),l=1/(i-n),u=1/(o-r),h=(e+t)*a,c=(i+n)*l,p=(o+r)*u;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-c,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-p,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(t){let e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){let i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}};u(gx,"Matrix4");var Ot=gx,Zm=new K,kl=new Ot,jfe=new K(0,0,0),Wfe=new K(1,1,1),jh=new K,mE=new K,Aa=new K,kj=new Ot,qj=new Ia,bT=class t{constructor(e=0,i=0,n=0,r=t.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=i,this._z=n,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,n=this._order){return this._x=t,this._y=e,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){let n=t.elements,r=n[0],o=n[4],s=n[8],a=n[1],l=n[5],u=n[9],h=n[2],c=n[6],p=n[10];switch(e){case"XYZ":this._y=Math.asin(ao(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ao(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(ao(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,r));break;case"ZYX":this._y=Math.asin(-ao(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(c,p),this._z=Math.atan2(a,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(ao(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-ao(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(c,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return kj.makeRotationFromQuaternion(t),this.setFromRotationMatrix(kj,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return qj.setFromEuler(this),this.setFromQuaternion(qj,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};u(bT,"Euler");var Jh=bT;Jh.DEFAULT_ORDER="XYZ";var WO=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}};u(WO,"Layers");var wx=WO,Yfe=0,Fj=new K,Qm=new Ia,Cc=new Ot,gE=new K,nx=new K,Xfe=new K,Zfe=new Ia,Uj=new K(1,0,0),zj=new K(0,1,0),Gj=new K(0,0,1),Qfe={type:"added"},Vj={type:"removed"},dg=class t extends Eo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Yfe++}),this.uuid=Cu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=t.DEFAULT_UP.clone();let e=new K,i=new Jh,n=new Ia,r=new K(1,1,1);function o(){n.setFromEuler(i,!1)}function s(){i.setFromQuaternion(n,void 0,!1)}u(o,"onRotationChange"),u(s,"onQuaternionChange"),i._onChange(o),n._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ot},normalMatrix:{value:new li}}),this.matrix=new Ot,this.matrixWorld=new Ot,this.matrixAutoUpdate=t.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=t.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new wx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Qm.setFromAxisAngle(t,e),this.quaternion.multiply(Qm),this}rotateOnWorldAxis(t,e){return Qm.setFromAxisAngle(t,e),this.quaternion.premultiply(Qm),this}rotateX(t){return this.rotateOnAxis(Uj,t)}rotateY(t){return this.rotateOnAxis(zj,t)}rotateZ(t){return this.rotateOnAxis(Gj,t)}translateOnAxis(t,e){return Fj.copy(t).applyQuaternion(this.quaternion),this.position.add(Fj.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Uj,t)}translateY(t){return this.translateOnAxis(zj,t)}translateZ(t){return this.translateOnAxis(Gj,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Cc.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?gE.copy(t):gE.set(t,e,i);let n=this.parent;this.updateWorldMatrix(!0,!1),nx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cc.lookAt(nx,gE,this.up):Cc.lookAt(gE,nx,this.up),this.quaternion.setFromRotationMatrix(Cc),n&&(Cc.extractRotation(n.matrixWorld),Qm.setFromRotationMatrix(Cc),this.quaternion.premultiply(Qm.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Qfe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}let e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Vj)),this}removeFromParent(){let t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let e=this.children[t];e.parent=null,e.dispatchEvent(Vj)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Cc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Cc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Cc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,n=this.children.length;i<n;i++){let n=this.children[i].getObjectByProperty(t,e);if(void 0!==n)return n}}getObjectsByProperty(t,e){let i=[];this[t]===e&&i.push(this);for(let n=0,r=this.children.length;n<r;n++){let r=this.children[n].getObjectsByProperty(t,e);r.length>0&&(i=i.concat(r))}return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nx,t,Xfe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(nx,Zfe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);let e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);let e=this.children;for(let i=0,n=e.length;i<n;i++)e[i].traverseVisible(t)}traverseAncestors(t){let e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let e=this.children;for(let i=0,n=e.length;i<n;i++){let n=e[i];(!0===n.matrixWorldAutoUpdate||!0===t)&&n.updateMatrixWorld(t)}}updateWorldMatrix(t,e){let i=this.parent;if(!0===t&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){let t=this.children;for(let e=0,i=t.length;e<i;e++){let i=t[e];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(t){let e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let n={};function r(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),u(r,"serialize"),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(t.geometries,this.geometry);let e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){let i=e.shapes;if(Array.isArray(i))for(let e=0,n=i.length;e<n;e++){let n=i[e];r(t.shapes,n)}else r(t.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let e=[];for(let i=0,n=this.material.length;i<n;i++)e.push(r(t.materials,this.material[i]));n.material=e}else n.material=r(t.materials,this.material);if(this.children.length>0){n.children=[];for(let e=0;e<this.children.length;e++)n.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){n.animations=[];for(let e=0;e<this.animations.length;e++){let i=this.animations[e];n.animations.push(r(t.animations,i))}}if(e){let e=o(t.geometries),n=o(t.materials),r=o(t.textures),s=o(t.images),a=o(t.shapes),l=o(t.skeletons),u=o(t.animations),h=o(t.nodes);e.length>0&&(i.geometries=e),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),s.length>0&&(i.images=s),a.length>0&&(i.shapes=a),l.length>0&&(i.skeletons=l),u.length>0&&(i.animations=u),h.length>0&&(i.nodes=h)}return i.object=n,i;function o(t){let e=[];for(let i in t){let n=t[i];delete n.metadata,e.push(n)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){let i=t.children[e];this.add(i.clone())}return this}};u(dg,"Object3D");var ci=dg;ci.DEFAULT_UP=new K(0,1,0),ci.DEFAULT_MATRIX_AUTO_UPDATE=!0,ci.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var ql=new K,Pc=new K,E6=new K,Ic=new K,Km=new K,Jm=new K,Hj=new K,T6=new K,S6=new K,A6=new K,vE=!1,Oc=class t{constructor(t=new K,e=new K,i=new K){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,n){n.subVectors(i,e),ql.subVectors(t,e),n.cross(ql);let r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(t,e,i,n,r){ql.subVectors(n,e),Pc.subVectors(i,e),E6.subVectors(t,e);let o=ql.dot(ql),s=ql.dot(Pc),a=ql.dot(E6),l=Pc.dot(Pc),u=Pc.dot(E6),h=o*l-s*s;if(0===h)return r.set(-2,-1,-1);let c=1/h,p=(l*a-s*u)*c,d=(o*u-s*a)*c;return r.set(1-p-d,d,p)}static containsPoint(t,e,i,n){return this.getBarycoord(t,e,i,n,Ic),Ic.x>=0&&Ic.y>=0&&Ic.x+Ic.y<=1}static getUV(t,e,i,n,r,o,s,a){return!1===vE&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vE=!0),this.getInterpolation(t,e,i,n,r,o,s,a)}static getInterpolation(t,e,i,n,r,o,s,a){return this.getBarycoord(t,e,i,n,Ic),a.setScalar(0),a.addScaledVector(r,Ic.x),a.addScaledVector(o,Ic.y),a.addScaledVector(s,Ic.z),a}static isFrontFacing(t,e,i,n){return ql.subVectors(i,e),Pc.subVectors(t,e),ql.cross(Pc).dot(n)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,n){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[n]),this}setFromAttributeAndIndices(t,e,i,n){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ql.subVectors(this.c,this.b),Pc.subVectors(this.a,this.b),.5*ql.cross(Pc).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return t.getNormal(this.a,this.b,this.c,e)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,i){return t.getBarycoord(e,this.a,this.b,this.c,i)}getUV(e,i,n,r,o){return!1===vE&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vE=!0),t.getInterpolation(e,this.a,this.b,this.c,i,n,r,o)}getInterpolation(e,i,n,r,o){return t.getInterpolation(e,this.a,this.b,this.c,i,n,r,o)}containsPoint(e){return t.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return t.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let i,n,r=this.a,o=this.b,s=this.c;Km.subVectors(o,r),Jm.subVectors(s,r),T6.subVectors(t,r);let a=Km.dot(T6),l=Jm.dot(T6);if(a<=0&&l<=0)return e.copy(r);S6.subVectors(t,o);let u=Km.dot(S6),h=Jm.dot(S6);if(u>=0&&h<=u)return e.copy(o);let c=a*h-u*l;if(c<=0&&a>=0&&u<=0)return i=a/(a-u),e.copy(r).addScaledVector(Km,i);A6.subVectors(t,s);let p=Km.dot(A6),d=Jm.dot(A6);if(d>=0&&p<=d)return e.copy(s);let f=p*l-a*d;if(f<=0&&l>=0&&d<=0)return n=l/(l-d),e.copy(r).addScaledVector(Jm,n);let g=u*d-p*h;if(g<=0&&h-u>=0&&p-d>=0)return Hj.subVectors(s,o),n=(h-u)/(h-u+(p-d)),e.copy(o).addScaledVector(Hj,n);let m=1/(g+f+c);return i=f*m,n=c*m,e.copy(r).addScaledVector(Km,i).addScaledVector(Jm,n)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}};u(Oc,"Triangle");var Lp=Oc,Kfe=0,YO=class extends Eo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Kfe++}),this.uuid=Cu(),this.name="",this.type="Material",this.blending=mg,this.side=Pa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=RW,this.blendDst=BW,this.blendEquation=cg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=G6,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ux,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rc,this.stencilZFail=Rc,this.stencilZPass=Rc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(let e in t){let i=t[e];if(void 0===i){console.warn("THREE.Material: parameter '".concat(e,"' has value of undefined."));continue}let n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:console.warn("THREE.Material: '".concat(e,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(t){let e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});let i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(t){let e=[];for(let i in t){let n=t[i];delete n.metadata,e.push(n)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==mg&&(i.blending=this.blending),this.side!==Pa&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),u(n,"extractFromCache"),e){let e=n(t.textures),r=n(t.images);e.length>0&&(i.textures=e),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,i=null;if(null!==e){let t=e.length;i=new Array(t);for(let n=0;n!==t;++n)i[n]=e[n].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}};u(YO,"Material");var ha=YO,GW={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Fl={h:0,s:0,l:0},yE={h:0,s:0,l:0};function C6(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}u(C6,"hue2rgb");var XO=class{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===e&&void 0===i?this.set(t):this.setRGB(t,e,i)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Lr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Sa.toWorkingColorSpace(this,e),this}setRGB(t,e,i,n=Sa.workingColorSpace){return this.r=t,this.g=e,this.b=i,Sa.toWorkingColorSpace(this,n),this}setHSL(t,e,i,n=Sa.workingColorSpace){if(t=PO(t,1),e=ao(e,0,1),i=ao(i,0,1),0===e)this.r=this.g=this.b=i;else{let n=i<=.5?i*(1+e):i+e-i*e,r=2*i-n;this.r=C6(r,n,t+1/3),this.g=C6(r,n,t),this.b=C6(r,n,t-1/3)}return Sa.toWorkingColorSpace(this,n),this}setStyle(t,e=Lr){function i(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(u(i,"handleAlpha"),n=/^(\w+)\(([^\)]*)\)/.exec(t)){let r,o=n[1],s=n[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,Sa.toWorkingColorSpace(this,e),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,Sa.toWorkingColorSpace(this,e),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){let t=parseFloat(r[1])/360,n=parseFloat(r[2])/100,o=parseFloat(r[3])/100;return i(r[4]),this.setHSL(t,n,o,e)}break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){let i=n[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(6===r)return this.setHex(parseInt(i,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Lr){let i=GW[t.toLowerCase()];return void 0!==i?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=gg(t.r),this.g=gg(t.g),this.b=gg(t.b),this}copyLinearToSRGB(t){return this.r=g6(t.r),this.g=g6(t.g),this.b=g6(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Lr){return Sa.fromWorkingColorSpace(Mo.copy(this),t),ao(255*Mo.r,0,255)<<16^ao(255*Mo.g,0,255)<<8^ao(255*Mo.b,0,255)<<0}getHexString(t=Lr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Sa.workingColorSpace){Sa.fromWorkingColorSpace(Mo.copy(this),e);let i,n,r=Mo.r,o=Mo.g,s=Mo.b,a=Math.max(r,o,s),l=Math.min(r,o,s),u=(l+a)/2;if(l===a)i=0,n=0;else{let t=a-l;switch(n=u<=.5?t/(a+l):t/(2-a-l),a){case r:i=(o-s)/t+(o<s?6:0);break;case o:i=(s-r)/t+2;break;case s:i=(r-o)/t+4}i/=6}return t.h=i,t.s=n,t.l=u,t}getRGB(t,e=Sa.workingColorSpace){return Sa.fromWorkingColorSpace(Mo.copy(this),e),t.r=Mo.r,t.g=Mo.g,t.b=Mo.b,t}getStyle(t=Lr){Sa.fromWorkingColorSpace(Mo.copy(this),t);let e=Mo.r,i=Mo.g,n=Mo.b;return t!==Lr?"color(".concat(t," ").concat(e.toFixed(3)," ").concat(i.toFixed(3)," ").concat(n.toFixed(3),")"):"rgb(".concat(255*e|0,",").concat(255*i|0,",").concat(255*n|0,")")}offsetHSL(t,e,i){return this.getHSL(Fl),Fl.h+=t,Fl.s+=e,Fl.l+=i,this.setHSL(Fl.h,Fl.s,Fl.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Fl),t.getHSL(yE);let i=fx(Fl.h,yE.h,e),n=fx(Fl.s,yE.s,e),r=fx(Fl.l,yE.l,e);return this.setHSL(i,n,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,i=this.g,n=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*n,this.g=r[1]*e+r[4]*i+r[7]*n,this.b=r[2]*e+r[5]*i+r[8]*n,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};u(XO,"Color");var at=XO,Mo=new at;at.NAMES=GW;var ZO=class extends ha{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=TO,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};u(ZO,"MeshBasicMaterial");var ls=ZO,os=new K,xE=new qe,QO=class{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=j6,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[t+n]=e.array[i+n];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)xE.fromBufferAttribute(this,e),xE.applyMatrix3(t),this.setXY(e,xE.x,xE.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)os.fromBufferAttribute(this,e),os.applyMatrix3(t),this.setXYZ(e,os.x,os.y,os.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)os.fromBufferAttribute(this,e),os.applyMatrix4(t),this.setXYZ(e,os.x,os.y,os.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)os.fromBufferAttribute(this,e),os.applyNormalMatrix(t),this.setXYZ(e,os.x,os.y,os.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)os.fromBufferAttribute(this,e),os.transformDirection(t),this.setXYZ(e,os.x,os.y,os.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Dc(e,this.array)),e}setX(t,e){return this.normalized&&(e=qi(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Dc(e,this.array)),e}setY(t,e){return this.normalized&&(e=qi(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Dc(e,this.array)),e}setZ(t,e){return this.normalized&&(e=qi(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Dc(e,this.array)),e}setW(t,e){return this.normalized&&(e=qi(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=qi(e,this.array),i=qi(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,n){return t*=this.itemSize,this.normalized&&(e=qi(e,this.array),i=qi(i,this.array),n=qi(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t*=this.itemSize,this.normalized&&(e=qi(e,this.array),i=qi(i,this.array),n=qi(n,this.array),r=qi(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=n,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==j6&&(t.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}};u(QO,"BufferAttribute");var rn=QO,KO=class extends rn{constructor(t,e,i){super(new Uint16Array(t),e,i)}};u(KO,"Uint16BufferAttribute");var WE=KO,JO=class extends rn{constructor(t,e,i){super(new Uint32Array(t),e,i)}};u(JO,"Uint32BufferAttribute");var YE=JO,$O=class extends rn{constructor(t,e,i){super(new Float32Array(t),e,i)}};u($O,"Float32BufferAttribute");var Rr=$O,Jfe=0,nl=new Ot,P6=new ci,$m=new K,Ca=new Yt,ix=new Yt,zs=new K,_T=class t extends Eo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jfe++}),this.uuid=Cu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(zW(t)?YE:WE)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);let i=this.attributes.normal;if(void 0!==i){let e=(new li).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}let n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(t),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return nl.makeRotationFromQuaternion(t),this.applyMatrix4(nl),this}rotateX(t){return nl.makeRotationX(t),this.applyMatrix4(nl),this}rotateY(t){return nl.makeRotationY(t),this.applyMatrix4(nl),this}rotateZ(t){return nl.makeRotationZ(t),this.applyMatrix4(nl),this}translate(t,e,i){return nl.makeTranslation(t,e,i),this.applyMatrix4(nl),this}scale(t,e,i){return nl.makeScale(t,e,i),this.applyMatrix4(nl),this}lookAt(t){return P6.lookAt(t),P6.updateMatrix(),this.applyMatrix4(P6.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter($m).negate(),this.translate($m.x,$m.y,$m.z),this}setFromPoints(t){let e=[];for(let i=0,n=t.length;i<n;i++){let n=t[i];e.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Rr(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Yt);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){let i=e[t];Ca.setFromBufferAttribute(i),this.morphTargetsRelative?(zs.addVectors(this.boundingBox.min,Ca.min),this.boundingBox.expandByPoint(zs),zs.addVectors(this.boundingBox.max,Ca.max),this.boundingBox.expandByPoint(zs)):(this.boundingBox.expandByPoint(Ca.min),this.boundingBox.expandByPoint(Ca.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Kh);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new K,1/0);if(t){let i=this.boundingSphere.center;if(Ca.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){let i=e[t];ix.setFromBufferAttribute(i),this.morphTargetsRelative?(zs.addVectors(Ca.min,ix.min),Ca.expandByPoint(zs),zs.addVectors(Ca.max,ix.max),Ca.expandByPoint(zs)):(Ca.expandByPoint(ix.min),Ca.expandByPoint(ix.max))}Ca.getCenter(i);let n=0;for(let e=0,r=t.count;e<r;e++)zs.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared(zs));if(e)for(let r=0,o=e.length;r<o;r++){let o=e[r],s=this.morphTargetsRelative;for(let e=0,r=o.count;e<r;e++)zs.fromBufferAttribute(o,e),s&&($m.fromBufferAttribute(t,e),zs.add($m)),n=Math.max(n,i.distanceToSquared(zs))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let i=t.array,n=e.position.array,r=e.normal.array,o=e.uv.array,s=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new rn(new Float32Array(4*s),4));let a=this.getAttribute("tangent").array,l=[],h=[];for(let t=0;t<s;t++)l[t]=new K,h[t]=new K;let c=new K,p=new K,d=new K,f=new qe,g=new qe,m=new qe,v=new K,y=new K;function x(t,e,i){c.fromArray(n,3*t),p.fromArray(n,3*e),d.fromArray(n,3*i),f.fromArray(o,2*t),g.fromArray(o,2*e),m.fromArray(o,2*i),p.sub(c),d.sub(c),g.sub(f),m.sub(f);let r=1/(g.x*m.y-m.x*g.y);isFinite(r)&&(v.copy(p).multiplyScalar(m.y).addScaledVector(d,-g.y).multiplyScalar(r),y.copy(d).multiplyScalar(g.x).addScaledVector(p,-m.x).multiplyScalar(r),l[t].add(v),l[e].add(v),l[i].add(v),h[t].add(y),h[e].add(y),h[i].add(y))}u(x,"handleTriangle");let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let t=0,e=_.length;t<e;++t){let e=_[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)x(i[t+0],i[t+1],i[t+2])}let b=new K,M=new K,E=new K,w=new K;function A(t){E.fromArray(r,3*t),w.copy(E);let e=l[t];b.copy(e),b.sub(E.multiplyScalar(E.dot(e))).normalize(),M.crossVectors(w,e);let i=M.dot(h[t])<0?-1:1;a[4*t]=b.x,a[4*t+1]=b.y,a[4*t+2]=b.z,a[4*t+3]=i}u(A,"handleVertex");for(let t=0,e=_.length;t<e;++t){let e=_[t],n=e.start;for(let t=n,r=n+e.count;t<r;t+=3)A(i[t+0]),A(i[t+1]),A(i[t+2])}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new rn(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);let n=new K,r=new K,o=new K,s=new K,a=new K,l=new K,u=new K,h=new K;if(t)for(let c=0,p=t.count;c<p;c+=3){let p=t.getX(c+0),d=t.getX(c+1),f=t.getX(c+2);n.fromBufferAttribute(e,p),r.fromBufferAttribute(e,d),o.fromBufferAttribute(e,f),u.subVectors(o,r),h.subVectors(n,r),u.cross(h),s.fromBufferAttribute(i,p),a.fromBufferAttribute(i,d),l.fromBufferAttribute(i,f),s.add(u),a.add(u),l.add(u),i.setXYZ(p,s.x,s.y,s.z),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,s=e.count;t<s;t+=3)n.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),u.subVectors(o,r),h.subVectors(n,r),u.cross(h),i.setXYZ(t+0,u.x,u.y,u.z),i.setXYZ(t+1,u.x,u.y,u.z),i.setXYZ(t+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){let t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)zs.fromBufferAttribute(t,e),zs.normalize(),t.setXYZ(e,zs.x,zs.y,zs.z)}toNonIndexed(){function e(t,e){let i=t.array,n=t.itemSize,r=t.normalized,o=new i.constructor(e.length*n),s=0,a=0;for(let r=0,l=e.length;r<l;r++){s=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*n;for(let t=0;t<n;t++)o[a++]=i[s++]}return new rn(o,n,r)}if(u(e,"convertBufferAttribute"),null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let i=new t,n=this.index.array,r=this.attributes;for(let t in r){let o=e(r[t],n);i.setAttribute(t,o)}let o=this.morphAttributes;for(let t in o){let r=[],s=o[t];for(let t=0,i=s.length;t<i;t++){let i=e(s[t],n);r.push(i)}i.morphAttributes[t]=r}i.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let t=0,e=s.length;t<e;t++){let e=s[t];i.addGroup(e.start,e.count,e.materialIndex)}return i}toJSON(){let t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){let e=this.parameters;for(let i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};let e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let i=this.attributes;for(let e in i){let n=i[e];t.data.attributes[e]=n.toJSON(t.data)}let n={},r=!1;for(let e in this.morphAttributes){let i=this.morphAttributes[e],o=[];for(let e=0,n=i.length;e<n;e++){let n=i[e];o.push(n.toJSON(t.data))}o.length>0&&(n[e]=o,r=!0)}r&&(t.data.morphAttributes=n,t.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));let s=this.boundingSphere;return null!==s&&(t.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let i=t.index;null!==i&&this.setIndex(i.clone(e));let n=t.attributes;for(let t in n){let i=n[t];this.setAttribute(t,i.clone(e))}let r=t.morphAttributes;for(let t in r){let i=[],n=r[t];for(let t=0,r=n.length;t<r;t++)i.push(n[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;let o=t.groups;for(let t=0,e=o.length;t<e;t++){let e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}let s=t.boundingBox;null!==s&&(this.boundingBox=s.clone());let a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};u(_T,"BufferGeometry");var Ji=_T,jj=new Ot,Tu=new _x,bE=new Kh,Wj=new K,eg=new K,tg=new K,ng=new K,I6=new K,_E=new K,wE=new qe,ME=new qe,EE=new qe,Yj=new K,Xj=new K,Zj=new K,TE=new K,SE=new K,eL=class extends ci{constructor(t=new Ji,e=new ls){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){let e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){let i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,o=i.morphTargetsRelative;e.fromBufferAttribute(n,t);let s=this.morphTargetInfluences;if(r&&s){_E.set(0,0,0);for(let i=0,n=r.length;i<n;i++){let n=s[i],a=r[i];0!==n&&(I6.fromBufferAttribute(a,t),o?_E.addScaledVector(I6,n):_E.addScaledVector(I6.sub(e),n))}e.add(_E)}return this.isSkinnedMesh&&this.applyBoneTransform(t,e),e}raycast(t,e){let i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0===n||(null===i.boundingSphere&&i.computeBoundingSphere(),bE.copy(i.boundingSphere),bE.applyMatrix4(r),Tu.copy(t.ray).recast(t.near),!1===bE.containsPoint(Tu.origin)&&(null===Tu.intersectSphere(bE,Wj)||Tu.origin.distanceToSquared(Wj)>(t.far-t.near)**2))||(jj.copy(r).invert(),Tu.copy(t.ray).applyMatrix4(jj),null!==i.boundingBox&&!1===Tu.intersectsBox(i.boundingBox)))return;let o,s=i.index,a=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv2,h=i.attributes.normal,c=i.groups,p=i.drawRange;if(null!==s)if(Array.isArray(n))for(let i=0,r=c.length;i<r;i++){let r=c[i],a=n[r.materialIndex];for(let i=Math.max(r.start,p.start),n=Math.min(s.count,Math.min(r.start+r.count,p.start+p.count));i<n;i+=3){let n=s.getX(i),c=s.getX(i+1),p=s.getX(i+2);o=AE(this,a,t,Tu,l,u,h,n,c,p),o&&(o.faceIndex=Math.floor(i/3),o.face.materialIndex=r.materialIndex,e.push(o))}}else{for(let i=Math.max(0,p.start),r=Math.min(s.count,p.start+p.count);i<r;i+=3){let r=s.getX(i),a=s.getX(i+1),c=s.getX(i+2);o=AE(this,n,t,Tu,l,u,h,r,a,c),o&&(o.faceIndex=Math.floor(i/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(n))for(let i=0,r=c.length;i<r;i++){let r=c[i],s=n[r.materialIndex];for(let i=Math.max(r.start,p.start),n=Math.min(a.count,Math.min(r.start+r.count,p.start+p.count));i<n;i+=3){o=AE(this,s,t,Tu,l,u,h,i,i+1,i+2),o&&(o.faceIndex=Math.floor(i/3),o.face.materialIndex=r.materialIndex,e.push(o))}}else{for(let i=Math.max(0,p.start),r=Math.min(a.count,p.start+p.count);i<r;i+=3){o=AE(this,n,t,Tu,l,u,h,i,i+1,i+2),o&&(o.faceIndex=Math.floor(i/3),e.push(o))}}}};u(eL,"Mesh");var Ft=eL;function $fe(t,e,i,n,r,o,s,a){let l;if(l=e.side===_s?n.intersectTriangle(s,o,r,!0,a):n.intersectTriangle(r,o,s,e.side===Pa,a),null===l)return null;SE.copy(a),SE.applyMatrix4(t.matrixWorld);let u=i.ray.origin.distanceTo(SE);return u<i.near||u>i.far?null:{distance:u,point:SE.clone(),object:t}}function AE(t,e,i,n,r,o,s,a,l,u){t.getVertexPosition(a,eg),t.getVertexPosition(l,tg),t.getVertexPosition(u,ng);let h=$fe(t,e,i,n,eg,tg,ng,TE);if(h){r&&(wE.fromBufferAttribute(r,a),ME.fromBufferAttribute(r,l),EE.fromBufferAttribute(r,u),h.uv=Lp.getInterpolation(TE,eg,tg,ng,wE,ME,EE,new qe)),o&&(wE.fromBufferAttribute(o,a),ME.fromBufferAttribute(o,l),EE.fromBufferAttribute(o,u),h.uv2=Lp.getInterpolation(TE,eg,tg,ng,wE,ME,EE,new qe)),s&&(Yj.fromBufferAttribute(s,a),Xj.fromBufferAttribute(s,l),Zj.fromBufferAttribute(s,u),h.normal=Lp.getInterpolation(TE,eg,tg,ng,Yj,Xj,Zj,new K),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));let t={a:a,b:l,c:u,normal:new K,materialIndex:0};Lp.getNormal(eg,tg,ng,t.normal),h.face=t}return h}u($fe,"checkIntersection"),u(AE,"checkGeometryIntersection");var wT=class t extends Ji{constructor(t=1,e=1,i=1,n=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:n,heightSegments:r,depthSegments:o};let s=this;n=Math.floor(n),r=Math.floor(r),o=Math.floor(o);let a=[],l=[],h=[],c=[],p=0,d=0;function f(t,e,i,n,r,o,u,f,g,m,v){let y=o/g,x=u/m,_=o/2,b=u/2,M=f/2,E=g+1,w=m+1,A=0,S=0,T=new K;for(let o=0;o<w;o++){let s=o*x-b;for(let a=0;a<E;a++){let u=a*y-_;T[t]=u*n,T[e]=s*r,T[i]=M,l.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[i]=f>0?1:-1,h.push(T.x,T.y,T.z),c.push(a/g),c.push(1-o/m),A+=1}}for(let t=0;t<m;t++)for(let e=0;e<g;e++){let i=p+e+E*t,n=p+e+E*(t+1),r=p+(e+1)+E*(t+1),o=p+(e+1)+E*t;a.push(i,n,o),a.push(n,r,o),S+=6}s.addGroup(d,S,v),d+=S,p+=A}f("z","y","x",-1,-1,i,e,t,o,r,0),f("z","y","x",1,-1,i,e,-t,o,r,1),f("x","z","y",1,1,t,i,e,n,o,2),f("x","z","y",1,-1,t,i,-e,n,o,3),f("x","y","z",1,-1,t,e,i,n,r,4),f("x","y","z",-1,-1,t,e,-i,n,r,5),this.setIndex(a),this.setAttribute("position",new Rr(l,3)),this.setAttribute("normal",new Rr(h,3)),this.setAttribute("uv",new Rr(c,2)),u(f,"buildPlane")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(e){return new t(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};u(wT,"BoxGeometry");var Bc=wT;function Eg(t){let e={};for(let i in t){e[i]={};for(let n in t[i]){let r=t[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][n]=null):e[i][n]=r.clone():Array.isArray(r)?e[i][n]=r.slice():e[i][n]=r}}return e}function Yo(t){let e={};for(let i=0;i<t.length;i++){let n=Eg(t[i]);for(let t in n)e[t]=n[t]}return e}function epe(t){let e=[];for(let i=0;i<t.length;i++)e.push(t[i].clone());return e}function VW(t){return null===t.getRenderTarget()&&t.outputEncoding===ai?Lr:yx}u(Eg,"cloneUniforms"),u(Yo,"mergeUniforms"),u(epe,"cloneUniformsGroups"),u(VW,"getUnlitUniformColorSpace");var tpe={clone:Eg,merge:Yo},npe="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ipe="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",tL=class extends ha{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=npe,this.fragmentShader=ipe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Eg(t.uniforms),this.uniformsGroups=epe(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let i in this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?e.uniforms[i]={type:"t",value:n.toJSON(t).uuid}:n&&n.isColor?e.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?e.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?e.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?e.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?e.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?e.uniforms[i]={type:"m4",value:n.toArray()}:e.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;let i={};for(let t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}};u(tL,"ShaderMaterial");var Xt=tL,nL=class extends ci{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ot,this.projectionMatrix=new Ot,this.projectionMatrixInverse=new Ot}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}};u(nL,"Camera");var Tg=nL,iL=class extends Tg{constructor(t=50,e=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=2*xx*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(.5*hx*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*xx*Math.atan(Math.tan(.5*hx*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,i,n,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(.5*hx*this.fov)/this.zoom,i=2*e,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){let t=o.fullWidth,s=o.fullHeight;r+=o.offsetX*n/t,e-=o.offsetY*i/s,n*=o.width/t,i*=o.height/s}let s=this.filmOffset;0!==s&&(r+=t*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,e,e-i,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}};u(iL,"PerspectiveCamera");var as=iL,ig=-90,rg=1,rL=class extends ci{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i;let n=new as(ig,rg,t,e);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);let r=new as(ig,rg,t,e);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);let o=new as(ig,rg,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);let s=new as(ig,rg,t,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);let a=new as(ig,rg,t,e);a.layers=this.layers,a.up.set(0,1,0),a.lookAt(0,0,1),this.add(a);let l=new as(ig,rg,t,e);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();let i=this.renderTarget,[n,r,o,s,a,l]=this.children,u=t.getRenderTarget(),h=t.toneMapping,c=t.xr.enabled;t.toneMapping=Nc,t.xr.enabled=!1;let p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,n),t.setRenderTarget(i,1),t.render(e,r),t.setRenderTarget(i,2),t.render(e,o),t.setRenderTarget(i,3),t.render(e,s),t.setRenderTarget(i,4),t.render(e,a),i.texture.generateMipmaps=p,t.setRenderTarget(i,5),t.render(e,l),t.setRenderTarget(u),t.toneMapping=h,t.xr.enabled=c,i.texture.needsPMREMUpdate=!0}};u(rL,"CubeCamera");var X6=rL,sL=class extends Er{constructor(t,e,i,n,r,o,s,a,l,u){super(t=void 0!==t?t:[],e=void 0!==e?e:xg,i,n,r,o,s,a,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}};u(sL,"CubeTexture");var XE=sL,oL=class extends ti{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let i={width:t,height:t,depth:1},n=[i,i,i,i,i,i];this.texture=new XE(n,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:wi}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let i={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Bc(5,5,5),s=new Xt({name:"CubemapFromEquirect",uniforms:Eg(i),vertexShader:n,fragmentShader:r,side:_s,blending:Nr});s.uniforms.tEquirect.value=e;let a=new Ft(o,s),l=e.minFilter;return e.minFilter===Dp&&(e.minFilter=wi),new X6(1,10,this).update(t,a),e.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,i,n){let r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,i,n);t.setRenderTarget(r)}};u(oL,"WebGLCubeRenderTarget");var Z6=oL,O6=new K,rpe=new K,spe=new li,aL=class{constructor(t=new K(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,n){return this.normal.set(t,e,i),this.constant=n,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){let n=O6.subVectors(i,e).cross(rpe.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(n,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let i=t.delta(O6),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;let r=-(t.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:e.copy(t.start).addScaledVector(i,r)}intersectsLine(t){let e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let i=e||spe.getNormalMatrix(t),n=this.coplanarPoint(O6).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}};u(aL,"Plane");var Lc=aL,Pp=new Kh,CE=new K,lL=class{constructor(t=new Lc,e=new Lc,i=new Lc,n=new Lc,r=new Lc,o=new Lc){this.planes=[t,e,i,n,r,o]}set(t,e,i,n,r,o){let s=this.planes;return s[0].copy(t),s[1].copy(e),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(o),this}copy(t){let e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){let e=this.planes,i=t.elements,n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],l=i[5],u=i[6],h=i[7],c=i[8],p=i[9],d=i[10],f=i[11],g=i[12],m=i[13],v=i[14],y=i[15];return e[0].setComponents(s-n,h-a,f-c,y-g).normalize(),e[1].setComponents(s+n,h+a,f+c,y+g).normalize(),e[2].setComponents(s+r,h+l,f+p,y+m).normalize(),e[3].setComponents(s-r,h-l,f-p,y-m).normalize(),e[4].setComponents(s-o,h-u,f-d,y-v).normalize(),e[5].setComponents(s+o,h+u,f+d,y+v).normalize(),this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Pp.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Pp.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Pp)}intersectsSprite(t){return Pp.center.set(0,0,0),Pp.radius=.7071067811865476,Pp.applyMatrix4(t.matrixWorld),this.intersectsSphere(Pp)}intersectsSphere(t){let e=this.planes,i=t.center,n=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(i)<n)return!1;return!0}intersectsBox(t){let e=this.planes;for(let i=0;i<6;i++){let n=e[i];if(CE.x=n.normal.x>0?t.max.x:t.min.x,CE.y=n.normal.y>0?t.max.y:t.min.y,CE.z=n.normal.z>0?t.max.z:t.min.z,n.distanceToPoint(CE)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}};u(lL,"Frustum");var kc=lL;function HW(){let t=null,e=!1,i=null,n=null;function r(e,o){i(e,o),n=t.requestAnimationFrame(r)}return u(r,"onAnimationFrame"),{start:function(){!0!==e&&null!==i&&(n=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function ope(t,e){let i=e.isWebGL2,n=new WeakMap;function r(e,n){let r,o=e.array,s=e.usage,a=t.createBuffer();if(t.bindBuffer(n,a),t.bufferData(n,o,s),e.onUploadCallback(),o instanceof Float32Array)r=5126;else if(o instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(o instanceof Int16Array)r=5122;else if(o instanceof Uint32Array)r=5125;else if(o instanceof Int32Array)r=5124;else if(o instanceof Int8Array)r=5120;else if(o instanceof Uint8Array)r=5121;else{if(!(o instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+o);r=5121}return{buffer:a,type:r,bytesPerElement:o.BYTES_PER_ELEMENT,version:e.version}}function o(e,n,r){let o=n.array,s=n.updateRange;t.bindBuffer(r,e),-1===s.count?t.bufferSubData(r,0,o):(i?t.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):t.bufferSubData(r,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),n.onUploadCallback()}function s(t){return t.isInterleavedBufferAttribute&&(t=t.data),n.get(t)}function a(e){e.isInterleavedBufferAttribute&&(e=e.data);let i=n.get(e);i&&(t.deleteBuffer(i.buffer),n.delete(e))}function l(t,e){if(t.isGLBufferAttribute){let e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);let i=n.get(t);void 0===i?n.set(t,r(t,e)):i.version<t.version&&(o(i.buffer,t,e),i.version=t.version)}return u(r,"createBuffer"),u(o,"updateBuffer"),u(s,"get"),u(a,"remove"),u(l,"update"),{get:s,remove:a,update:l}}u(HW,"WebGLAnimation"),u(ope,"WebGLAttributes");var MT=class t extends Ji{constructor(t=1,e=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:n};let r=t/2,o=e/2,s=Math.floor(i),a=Math.floor(n),l=s+1,u=a+1,h=t/s,c=e/a,p=[],d=[],f=[],g=[];for(let t=0;t<u;t++){let e=t*c-o;for(let i=0;i<l;i++){let n=i*h-r;d.push(n,-e,0),f.push(0,0,1),g.push(i/s),g.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<s;e++){let i=e+l*t,n=e+l*(t+1),r=e+1+l*(t+1),o=e+1+l*t;p.push(i,n,o),p.push(n,r,o)}this.setIndex(p),this.setAttribute("position",new Rr(d,3)),this.setAttribute("normal",new Rr(f,3)),this.setAttribute("uv",new Rr(g,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(e){return new t(e.width,e.height,e.widthSegments,e.heightSegments)}};u(MT,"PlaneGeometry");var To=MT,ape="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",lpe="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",upe="#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",cpe="#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",hpe="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",fpe="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",ppe="vec3 transformed = vec3( position );",dpe="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",mpe="float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",gpe="#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",vpe="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",ype="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",xpe="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",bpe="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",_pe="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",wpe="#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",Mpe="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",Epe="#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Tpe="#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Spe="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",Ape="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",Cpe="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",Ppe="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",Ipe="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",Ope="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",Lpe="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",Dpe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Npe="vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",Rpe="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Bpe="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",kpe="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",qpe="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",Fpe="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Upe="#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",zpe="#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",Gpe="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",Vpe="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Hpe="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",jpe="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",Wpe="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",Ype="LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",Xpe="varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",Zpe="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",Qpe="#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",Kpe="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Jpe="varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",$pe="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",ede="varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",tde="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",nde="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",ide="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",rde="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",sde="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",ode="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",ade="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",lde="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",ude="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",cde="#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",hde="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",fde="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",pde="#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",dde="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",mde="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",gde="#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",vde="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",yde="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",xde="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",bde="float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",_de="#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",wde="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Mde="#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",Ede="#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",Tde="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",Sde="#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Ade="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",Cde="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",Pde="#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",Ide="#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",Ode="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",Lde="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Dde="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Nde="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",Rde="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",Bde="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",kde="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",qde="#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",Fde="#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",Ude="#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",zde="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",Gde="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",Vde="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",Hde="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",jde="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",Wde="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Yde="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Xde="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Zde="#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",Qde="#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",Kde="#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",Jde="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",$de="#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",eme="#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",tme="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",nme="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",ime="uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",rme="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",sme="#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ome="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",ame="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",lme="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",ume="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",cme="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",hme="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",fme="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",pme="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",dme="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",mme="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",gme="#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",vme="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",yme="#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",xme="#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",bme="#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",_me="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",wme="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Mme="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",Eme="#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Tme="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Sme="#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",Ame="#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Cme="#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Pme="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ime="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Ome="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Lme="#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Dme="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Nme="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Rme="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",fn={alphamap_fragment:ape,alphamap_pars_fragment:lpe,alphatest_fragment:upe,alphatest_pars_fragment:cpe,aomap_fragment:hpe,aomap_pars_fragment:fpe,begin_vertex:ppe,beginnormal_vertex:dpe,bsdfs:mpe,iridescence_fragment:gpe,bumpmap_pars_fragment:vpe,clipping_planes_fragment:ype,clipping_planes_pars_fragment:xpe,clipping_planes_pars_vertex:bpe,clipping_planes_vertex:_pe,color_fragment:wpe,color_pars_fragment:Mpe,color_pars_vertex:Epe,color_vertex:Tpe,common:Spe,cube_uv_reflection_fragment:Ape,defaultnormal_vertex:Cpe,displacementmap_pars_vertex:Ppe,displacementmap_vertex:Ipe,emissivemap_fragment:Ope,emissivemap_pars_fragment:Lpe,encodings_fragment:Dpe,encodings_pars_fragment:Npe,envmap_fragment:Rpe,envmap_common_pars_fragment:Bpe,envmap_pars_fragment:kpe,envmap_pars_vertex:qpe,envmap_physical_pars_fragment:Qpe,envmap_vertex:Fpe,fog_vertex:Upe,fog_pars_vertex:zpe,fog_fragment:Gpe,fog_pars_fragment:Vpe,gradientmap_pars_fragment:Hpe,lightmap_fragment:jpe,lightmap_pars_fragment:Wpe,lights_lambert_fragment:Ype,lights_lambert_pars_fragment:Xpe,lights_pars_begin:Zpe,lights_toon_fragment:Kpe,lights_toon_pars_fragment:Jpe,lights_phong_fragment:$pe,lights_phong_pars_fragment:ede,lights_physical_fragment:tde,lights_physical_pars_fragment:nde,lights_fragment_begin:ide,lights_fragment_maps:rde,lights_fragment_end:sde,logdepthbuf_fragment:ode,logdepthbuf_pars_fragment:ade,logdepthbuf_pars_vertex:lde,logdepthbuf_vertex:ude,map_fragment:cde,map_pars_fragment:hde,map_particle_fragment:fde,map_particle_pars_fragment:pde,metalnessmap_fragment:dde,metalnessmap_pars_fragment:mde,morphcolor_vertex:gde,morphnormal_vertex:vde,morphtarget_pars_vertex:yde,morphtarget_vertex:xde,normal_fragment_begin:bde,normal_fragment_maps:_de,normal_pars_fragment:wde,normal_pars_vertex:Mde,normal_vertex:Ede,normalmap_pars_fragment:Tde,clearcoat_normal_fragment_begin:Sde,clearcoat_normal_fragment_maps:Ade,clearcoat_pars_fragment:Cde,iridescence_pars_fragment:Pde,output_fragment:Ide,packing:Ode,premultiplied_alpha_fragment:Lde,project_vertex:Dde,dithering_fragment:Nde,dithering_pars_fragment:Rde,roughnessmap_fragment:Bde,roughnessmap_pars_fragment:kde,shadowmap_pars_fragment:qde,shadowmap_pars_vertex:Fde,shadowmap_vertex:Ude,shadowmask_pars_fragment:zde,skinbase_vertex:Gde,skinning_pars_vertex:Vde,skinning_vertex:Hde,skinnormal_vertex:jde,specularmap_fragment:Wde,specularmap_pars_fragment:Yde,tonemapping_fragment:Xde,tonemapping_pars_fragment:Zde,transmission_fragment:Qde,transmission_pars_fragment:Kde,uv_pars_fragment:Jde,uv_pars_vertex:$de,uv_vertex:eme,worldpos_vertex:tme,background_vert:nme,background_frag:ime,backgroundCube_vert:rme,backgroundCube_frag:sme,cube_vert:ome,cube_frag:ame,depth_vert:lme,depth_frag:ume,distanceRGBA_vert:cme,distanceRGBA_frag:hme,equirect_vert:fme,equirect_frag:pme,linedashed_vert:dme,linedashed_frag:mme,meshbasic_vert:gme,meshbasic_frag:vme,meshlambert_vert:yme,meshlambert_frag:xme,meshmatcap_vert:bme,meshmatcap_frag:_me,meshnormal_vert:wme,meshnormal_frag:Mme,meshphong_vert:Eme,meshphong_frag:Tme,meshphysical_vert:Sme,meshphysical_frag:Ame,meshtoon_vert:Cme,meshtoon_frag:Pme,points_vert:Ime,points_frag:Ome,shadow_vert:Lme,shadow_frag:Dme,sprite_vert:Nme,sprite_frag:Rme},mt={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new li},alphaMap:{value:null},alphaMapTransform:{value:new li},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new li}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new li}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new li}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new li},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new li},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new li},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new li}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new li}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new li}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new li}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new li},alphaMap:{value:null},alphaTest:{value:0}}},Su={basic:{uniforms:Yo([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:Yo([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new at(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:Yo([mt.common,mt.specularmap,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,mt.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:Yo([mt.common,mt.envmap,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.roughnessmap,mt.metalnessmap,mt.fog,mt.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:Yo([mt.common,mt.aomap,mt.lightmap,mt.emissivemap,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.gradientmap,mt.fog,mt.lights,{emissive:{value:new at(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:Yo([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,mt.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:Yo([mt.points,mt.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:Yo([mt.common,mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:Yo([mt.common,mt.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:Yo([mt.common,mt.bumpmap,mt.normalmap,mt.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:Yo([mt.sprite,mt.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new li},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:Yo([mt.common,mt.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:Yo([mt.lights,mt.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};Su.physical={uniforms:Yo([Su.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new li},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new li},clearcoatNormalScale:{value:new qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new li},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new li},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new li},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new li},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new li},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new li},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new li},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new li},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new li}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};var PE={r:0,b:0,g:0};function Bme(t,e,i,n,r,o,s){let a,l,h=new at(0),c=!0===o?0:1,p=null,d=0,f=null;function g(n,o){let s=!1,u=!0===o.isScene?o.background:null;u&&u.isTexture&&(u=(o.backgroundBlurriness>0?i:e).get(u));let g=t.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(u=null),null===u?m(h,c):u&&u.isColor&&(m(u,1),s=!0),(t.autoClear||s)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),u&&(u.isCubeTexture||u.mapping===OT)?(void 0===l&&(l=new Ft(new Bc(1,1,1),new Xt({name:"BackgroundCubeMaterial",uniforms:Eg(Su.backgroundCube.uniforms),vertexShader:Su.backgroundCube.vertexShader,fragmentShader:Su.backgroundCube.fragmentShader,side:_s,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),l.material.uniforms.envMap.value=u,l.material.uniforms.flipEnvMap.value=u.isCubeTexture&&!1===u.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=o.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,l.material.toneMapped=u.encoding!==ai,(p!==u||d!==u.version||f!==t.toneMapping)&&(l.material.needsUpdate=!0,p=u,d=u.version,f=t.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):u&&u.isTexture&&(void 0===a&&(a=new Ft(new To(2,2),new Xt({name:"BackgroundMaterial",uniforms:Eg(Su.background.uniforms),vertexShader:Su.background.vertexShader,fragmentShader:Su.background.fragmentShader,side:Pa,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=u,a.material.uniforms.backgroundIntensity.value=o.backgroundIntensity,a.material.toneMapped=u.encoding!==ai,!0===u.matrixAutoUpdate&&u.updateMatrix(),a.material.uniforms.uvTransform.value.copy(u.matrix),(p!==u||d!==u.version||f!==t.toneMapping)&&(a.material.needsUpdate=!0,p=u,d=u.version,f=t.toneMapping),a.layers.enableAll(),n.unshift(a,a.geometry,a.material,0,0,null))}function m(e,i){e.getRGB(PE,VW(t)),n.buffers.color.setClear(PE.r,PE.g,PE.b,i,s)}return u(g,"render"),u(m,"setClear"),{getClearColor:function(){return h},setClearColor:function(t,e=1){h.set(t),c=e,m(h,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,m(h,c)},render:g}}function kme(t,e,i,n){let r=t.getParameter(34921),o=n.isWebGL2?null:e.get("OES_vertex_array_object"),s=n.isWebGL2||null!==o,a={},l=v(null),h=l,c=!1;function p(e,n,r,o,a){let l=!1;if(s){let t=m(o,r,n);h!==t&&(h=t,f(h.object)),l=y(e,o,r,a),l&&x(e,o,r,a)}else{let t=!0===n.wireframe;(h.geometry!==o.id||h.program!==r.id||h.wireframe!==t)&&(h.geometry=o.id,h.program=r.id,h.wireframe=t,l=!0)}null!==a&&i.update(a,34963),(l||c)&&(c=!1,A(e,n,r,o),null!==a&&t.bindBuffer(34963,i.get(a).buffer))}function d(){return n.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function f(e){return n.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function g(e){return n.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function m(t,e,i){let n=!0===i.wireframe,r=a[t.id];void 0===r&&(r={},a[t.id]=r);let o=r[e.id];void 0===o&&(o={},r[e.id]=o);let s=o[n];return void 0===s&&(s=v(d()),o[n]=s),s}function v(t){let e=[],i=[],n=[];for(let t=0;t<r;t++)e[t]=0,i[t]=0,n[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:i,attributeDivisors:n,object:t,attributes:{},index:null}}function y(t,e,i,n){let r=h.attributes,o=e.attributes,s=0,a=i.getAttributes();for(let e in a)if(a[e].location>=0){let i=r[e],n=o[e];if(void 0===n&&("instanceMatrix"===e&&t.instanceMatrix&&(n=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(n=t.instanceColor)),void 0===i||i.attribute!==n||n&&i.data!==n.data)return!0;s++}return h.attributesNum!==s||h.index!==n}function x(t,e,i,n){let r={},o=e.attributes,s=0,a=i.getAttributes();for(let e in a)if(a[e].location>=0){let i=o[e];void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor));let n={};n.attribute=i,i&&i.data&&(n.data=i.data),r[e]=n,s++}h.attributes=r,h.attributesNum=s,h.index=n}function _(){let t=h.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function b(t){M(t,0)}function M(i,r){let o=h.newAttributes,s=h.enabledAttributes,a=h.attributeDivisors;o[i]=1,0===s[i]&&(t.enableVertexAttribArray(i),s[i]=1),a[i]!==r&&((n.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),a[i]=r)}function E(){let e=h.newAttributes,i=h.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==e[n]&&(t.disableVertexAttribArray(n),i[n]=0)}function w(e,i,r,o,s,a){!0!==n.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,i,r,o,s,a):t.vertexAttribIPointer(e,i,r,s,a)}function A(r,o,s,a){if(!1===n.isWebGL2&&(r.isInstancedMesh||a.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;_();let l=a.attributes,u=s.getAttributes(),h=o.defaultAttributeValues;for(let e in u){let n=u[e];if(n.location>=0){let o=l[e];if(void 0===o&&("instanceMatrix"===e&&r.instanceMatrix&&(o=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(o=r.instanceColor)),void 0!==o){let e=o.normalized,s=o.itemSize,l=i.get(o);if(void 0===l)continue;let u=l.buffer,h=l.type,c=l.bytesPerElement;if(o.isInterleavedBufferAttribute){let i=o.data,l=i.stride,p=o.offset;if(i.isInstancedInterleavedBuffer){for(let t=0;t<n.locationSize;t++)M(n.location+t,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let t=0;t<n.locationSize;t++)b(n.location+t);t.bindBuffer(34962,u);for(let t=0;t<n.locationSize;t++)w(n.location+t,s/n.locationSize,h,e,l*c,(p+s/n.locationSize*t)*c)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<n.locationSize;t++)M(n.location+t,o.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<n.locationSize;t++)b(n.location+t);t.bindBuffer(34962,u);for(let t=0;t<n.locationSize;t++)w(n.location+t,s/n.locationSize,h,e,s*c,s/n.locationSize*t*c)}}else if(void 0!==h){let i=h[e];if(void 0!==i)switch(i.length){case 2:t.vertexAttrib2fv(n.location,i);break;case 3:t.vertexAttrib3fv(n.location,i);break;case 4:t.vertexAttrib4fv(n.location,i);break;default:t.vertexAttrib1fv(n.location,i)}}}}E()}function S(){P();for(let t in a){let e=a[t];for(let t in e){let i=e[t];for(let t in i)g(i[t].object),delete i[t];delete e[t]}delete a[t]}}function T(t){if(void 0===a[t.id])return;let e=a[t.id];for(let t in e){let i=e[t];for(let t in i)g(i[t].object),delete i[t];delete e[t]}delete a[t.id]}function C(t){for(let e in a){let i=a[e];if(void 0===i[t.id])continue;let n=i[t.id];for(let t in n)g(n[t].object),delete n[t];delete i[t.id]}}function P(){I(),c=!0,h!==l&&(h=l,f(h.object))}function I(){l.geometry=null,l.program=null,l.wireframe=!1}return u(p,"setup"),u(d,"createVertexArrayObject"),u(f,"bindVertexArrayObject"),u(g,"deleteVertexArrayObject"),u(m,"getBindingState"),u(v,"createBindingState"),u(y,"needsUpdate"),u(x,"saveCache"),u(_,"initAttributes"),u(b,"enableAttribute"),u(M,"enableAttributeAndDivisor"),u(E,"disableUnusedAttributes"),u(w,"vertexAttribPointer"),u(A,"setupVertexAttributes"),u(S,"dispose"),u(T,"releaseStatesOfGeometry"),u(C,"releaseStatesOfProgram"),u(P,"reset"),u(I,"resetDefaultState"),{setup:p,reset:P,resetDefaultState:I,dispose:S,releaseStatesOfGeometry:T,releaseStatesOfProgram:C,initAttributes:_,enableAttribute:b,disableUnusedAttributes:E}}function qme(t,e,i,n){let r,o=n.isWebGL2;function s(t){r=t}function a(e,n){t.drawArrays(r,e,n),i.update(n,r,1)}function l(n,s,a){if(0===a)return;let l,u;if(o)l=t,u="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),u="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](r,n,s,a),i.update(s,r,a)}u(s,"setMode"),u(a,"render"),u(l,"renderInstances"),this.setMode=s,this.render=a,this.renderInstances=l}function Fme(t,e,i){let n;function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){let i=e.get("EXT_texture_filter_anisotropic");n=t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}u(r,"getMaxAnisotropy"),u(o,"getMaxPrecision");let s=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===t.constructor.name,a=void 0!==i.precision?i.precision:"highp",l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);let h=s||e.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,p=t.getParameter(34930),d=t.getParameter(35660),f=t.getParameter(3379),g=t.getParameter(34076),m=t.getParameter(34921),v=t.getParameter(36347),y=t.getParameter(36348),x=t.getParameter(36349),_=d>0,b=s||e.has("OES_texture_float");return{isWebGL2:s,drawBuffers:h,getMaxAnisotropy:r,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:p,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:x,vertexTextures:_,floatFragmentTextures:b,floatVertexTextures:_&&b,maxSamples:s?t.getParameter(36183):0}}function Ume(t){let e=this,i=null,n=0,r=!1,o=!1,s=new Lc,a=new li,l={value:null,needsUpdate:!1};function h(){l.value!==i&&(l.value=i,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,i,n,r){let o=null!==t?t.length:0,u=null;if(0!==o){if(u=l.value,!0!==r||null===u){let e=n+4*o,r=i.matrixWorldInverse;a.getNormalMatrix(r),(null===u||u.length<e)&&(u=new Float32Array(e));for(let e=0,i=n;e!==o;++e,i+=4)s.copy(t[e]).applyMatrix4(r,a),s.normal.toArray(u,i),u[i+3]=s.constant}l.value=u,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){let i=0!==t.length||e||0!==n||r;return r=e,n=t.length,i},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){i=c(t,e,0)},this.setState=function(e,s,a){let u=e.clippingPlanes,p=e.clipIntersection,d=e.clipShadows,f=t.get(e);if(!r||null===u||0===u.length||o&&!d)o?c(null):h();else{let t=o?0:n,e=4*t,r=f.clippingState||null;l.value=r,r=c(u,s,e,a);for(let t=0;t!==e;++t)r[t]=i[t];f.clippingState=r,this.numIntersection=p?this.numPlanes:0,this.numPlanes+=t}},u(h,"resetGlobalState"),u(c,"projectPlanes")}function zme(t){let e=new WeakMap;function i(t,e){return e===V6?t.mapping=xg:e===H6&&(t.mapping=bg),t}function n(n){if(n&&n.isTexture&&!1===n.isRenderTargetTexture){let o=n.mapping;if(o===V6||o===H6){if(e.has(n)){return i(e.get(n).texture,n.mapping)}{let o=n.image;if(o&&o.height>0){let s=new Z6(o.height/2);return s.fromEquirectangularTexture(t,n),e.set(n,s),n.addEventListener("dispose",r),i(s.texture,n.mapping)}return null}}}return n}function r(t){let i=t.target;i.removeEventListener("dispose",r);let n=e.get(i);void 0!==n&&(e.delete(i),n.dispose())}function o(){e=new WeakMap}return u(i,"mapTextureMapping"),u(n,"get"),u(r,"onTextureDispose"),u(o,"dispose"),{get:n,dispose:o}}u(Bme,"WebGLBackground"),u(kme,"WebGLBindingStates"),u(qme,"WebGLBufferRenderer"),u(Fme,"WebGLCapabilities"),u(Ume,"WebGLClipping"),u(zme,"WebGLCubeMaps");var uL=class extends Tg{constructor(t=-1,e=1,i=1,n=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=n,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-t,o=i+t,s=n+e,a=n-e;if(null!==this.view&&this.view.enabled){let t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,o=r+t*this.view.width,s-=e*this.view.offsetY,a=s-e*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}};u(uL,"OrthographicCamera");var Sg=uL,hg=4,Qj=[.125,.215,.35,.446,.526,.582],Op=20,L6=new Sg,Kj=new at,D6=null,Ip=(1+Math.sqrt(5))/2,sg=1/Ip,Jj=[new K(1,1,1),new K(-1,1,1),new K(1,1,-1),new K(-1,1,-1),new K(0,Ip,sg),new K(0,Ip,-sg),new K(sg,0,Ip),new K(-sg,0,Ip),new K(Ip,sg,0),new K(-Ip,sg,0)],cL=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,n=100){D6=this._renderer.getRenderTarget(),this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(t,i,n,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=tW(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=eW(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(D6),t.scissorTest=!1,IE(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===xg||t.mapping===bg?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),D6=this._renderer.getRenderTarget();let i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:wi,minFilter:wi,generateMipmaps:!1,type:Np,format:Gs,encoding:rl,depthBuffer:!1},n=$j(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=$j(t,e,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Gme(n)),this._blurMaterial=Vme(n,t,e)}return n}_compileMaterial(t){let e=new Ft(this._lodPlanes[0],t);this._renderer.compile(e,L6)}_sceneToCubeUV(t,e,i,n){let r=new as(90,1,e,i),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,u=a.toneMapping;a.getClearColor(Kj),a.toneMapping=Nc,a.autoClear=!1;let h=new ls({name:"PMREM.Background",side:_s,depthWrite:!1,depthTest:!1}),c=new Ft(new Bc,h),p=!1,d=t.background;d?d.isColor&&(h.color.copy(d),t.background=null,p=!0):(h.color.copy(Kj),p=!0);for(let e=0;e<6;e++){let i=e%3;0===i?(r.up.set(0,o[e],0),r.lookAt(s[e],0,0)):1===i?(r.up.set(0,0,o[e]),r.lookAt(0,s[e],0)):(r.up.set(0,o[e],0),r.lookAt(0,0,s[e]));let l=this._cubeSize;IE(n,i*l,e>2?l:0,l,l),a.setRenderTarget(n),p&&a.render(c,r),a.render(t,r)}c.geometry.dispose(),c.material.dispose(),a.toneMapping=u,a.autoClear=l,t.background=d}_textureToCubeUV(t,e){let i=this._renderer,n=t.mapping===xg||t.mapping===bg;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=tW()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=eW());let r=n?this._cubemapMaterial:this._equirectMaterial,o=new Ft(this._lodPlanes[0],r);r.uniforms.envMap.value=t;let s=this._cubeSize;IE(e,0,0,3*s,2*s),i.setRenderTarget(e),i.render(o,L6)}_applyPMREM(t){let e=this._renderer,i=e.autoClear;e.autoClear=!1;for(let e=1;e<this._lodPlanes.length;e++){let i=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),n=Jj[(e-1)%Jj.length];this._blur(t,e-1,e,i,n)}e.autoClear=i}_blur(t,e,i,n,r){let o=this._pingPongRenderTarget;this._halfBlur(t,o,e,i,n,"latitudinal",r),this._halfBlur(o,t,i,i,n,"longitudinal",r)}_halfBlur(t,e,i,n,r,o,s){let a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");let u=new Ft(this._lodPlanes[n],l),h=l.uniforms,c=this._sizeLods[i]-1,p=isFinite(r)?Math.PI/(2*c):2*Math.PI/(2*Op-1),d=r/p,f=isFinite(r)?1+Math.floor(3*d):Op;f>Op&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(Op));let g=[],m=0;for(let t=0;t<Op;++t){let e=t/d,i=Math.exp(-e*e/2);g.push(i),0===t?m+=i:t<f&&(m+=2*i)}for(let t=0;t<g.length;t++)g[t]=g[t]/m;h.envMap.value=t.texture,h.samples.value=f,h.weights.value=g,h.latitudinal.value="latitudinal"===o,s&&(h.poleAxis.value=s);let{_lodMax:v}=this;h.dTheta.value=p,h.mipInt.value=v-i;let y=this._sizeLods[n];IE(e,3*y*(n>v-hg?n-v+hg:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(e),a.render(u,L6)}};u(cL,"PMREMGenerator");var ZE=cL;function Gme(t){let e=[],i=[],n=[],r=t,o=t-hg+1+Qj.length;for(let s=0;s<o;s++){let o=Math.pow(2,r);i.push(o);let a=1/o;s>t-hg?a=Qj[s-t+hg-1]:0===s&&(a=0),n.push(a);let l=1/(o-2),u=-l,h=1+l,c=[u,u,h,u,h,h,u,u,h,h,u,h],p=6,d=6,f=3,g=2,m=1,v=new Float32Array(f*d*p),y=new Float32Array(g*d*p),x=new Float32Array(m*d*p);for(let t=0;t<p;t++){let e=t%3*2/3-1,i=t>2?0:-1,n=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];v.set(n,f*d*t),y.set(c,g*d*t);let r=[t,t,t,t,t,t];x.set(r,m*d*t)}let _=new Ji;_.setAttribute("position",new rn(v,f)),_.setAttribute("uv",new rn(y,g)),_.setAttribute("faceIndex",new rn(x,m)),e.push(_),r>hg&&r--}return{lodPlanes:e,sizeLods:i,sigmas:n}}function $j(t,e,i){let n=new ti(t,e,i);return n.texture.mapping=OT,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function IE(t,e,i,n,r){t.viewport.set(e,i,n,r),t.scissor.set(e,i,n,r)}function Vme(t,e,i){let n=new Float32Array(Op),r=new K(0,1,0);return new Xt({name:"SphericalGaussianBlur",defines:{n:Op,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:IO(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Nr,depthTest:!1,depthWrite:!1})}function eW(){return new Xt({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:IO(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Nr,depthTest:!1,depthWrite:!1})}function tW(){return new Xt({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:IO(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Nr,depthTest:!1,depthWrite:!1})}function IO(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Hme(t){let e=new WeakMap,i=null;function n(n){if(n&&n.isTexture){let s=n.mapping,a=s===V6||s===H6,l=s===xg||s===bg;if(a||l){if(n.isRenderTargetTexture&&!0===n.needsPMREMUpdate){n.needsPMREMUpdate=!1;let r=e.get(n);return null===i&&(i=new ZE(t)),r=a?i.fromEquirectangular(n,r):i.fromCubemap(n,r),e.set(n,r),r.texture}if(e.has(n))return e.get(n).texture;{let s=n.image;if(a&&s&&s.height>0||l&&s&&r(s)){null===i&&(i=new ZE(t));let r=a?i.fromEquirectangular(n):i.fromCubemap(n);return e.set(n,r),n.addEventListener("dispose",o),r.texture}return null}}}return n}function r(t){let e=0;for(let i=0;i<6;i++)void 0!==t[i]&&e++;return 6===e}function o(t){let i=t.target;i.removeEventListener("dispose",o);let n=e.get(i);void 0!==n&&(e.delete(i),n.dispose())}function s(){e=new WeakMap,null!==i&&(i.dispose(),i=null)}return u(n,"get"),u(r,"isCubeTextureComplete"),u(o,"onTextureDispose"),u(s,"dispose"),{get:n,dispose:s}}function jme(t){let e={};function i(i){if(void 0!==e[i])return e[i];let n;switch(i){case"WEBGL_depth_texture":n=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=t.getExtension(i)}return e[i]=n,n}return u(i,"getExtension"),{has:function(t){return null!==i(t)},init:function(t){t.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(t){let e=i(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Wme(t,e,i,n){let r={},o=new WeakMap;function s(t){let a=t.target;null!==a.index&&e.remove(a.index);for(let t in a.attributes)e.remove(a.attributes[t]);a.removeEventListener("dispose",s),delete r[a.id];let l=o.get(a);l&&(e.remove(l),o.delete(a)),n.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,i.memory.geometries--}function a(t,e){return!0===r[e.id]||(e.addEventListener("dispose",s),r[e.id]=!0,i.memory.geometries++),e}function l(t){let i=t.attributes;for(let t in i)e.update(i[t],34962);let n=t.morphAttributes;for(let t in n){let i=n[t];for(let t=0,n=i.length;t<n;t++)e.update(i[t],34962)}}function h(t){let i=[],n=t.index,r=t.attributes.position,s=0;if(null!==n){let t=n.array;s=n.version;for(let e=0,n=t.length;e<n;e+=3){let n=t[e+0],r=t[e+1],o=t[e+2];i.push(n,r,r,o,o,n)}}else{let t=r.array;s=r.version;for(let e=0,n=t.length/3-1;e<n;e+=3){let t=e+0,n=e+1,r=e+2;i.push(t,n,n,r,r,t)}}let a=new(zW(i)?YE:WE)(i,1);a.version=s;let l=o.get(t);l&&e.remove(l),o.set(t,a)}function c(t){let e=o.get(t);if(e){let i=t.index;null!==i&&e.version<i.version&&h(t)}else h(t);return o.get(t)}return u(s,"onGeometryDispose"),u(a,"get"),u(l,"update"),u(h,"updateWireframeAttribute"),u(c,"getWireframeAttribute"),{get:a,update:l,getWireframeAttribute:c}}function Yme(t,e,i,n){let r,o,s,a=n.isWebGL2;function l(t){r=t}function h(t){o=t.type,s=t.bytesPerElement}function c(e,n){t.drawElements(r,n,o,e*s),i.update(n,r,1)}function p(n,l,u){if(0===u)return;let h,c;if(a)h=t,c="drawElementsInstanced";else if(h=e.get("ANGLE_instanced_arrays"),c="drawElementsInstancedANGLE",null===h)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[c](r,l,o,n*s,u),i.update(l,r,u)}u(l,"setMode"),u(h,"setIndex"),u(c,"render"),u(p,"renderInstances"),this.setMode=l,this.setIndex=h,this.render=c,this.renderInstances=p}function Xme(t){let e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(t,i,n){switch(e.calls++,i){case 4:e.triangles+=n*(t/3);break;case 1:e.lines+=n*(t/2);break;case 3:e.lines+=n*(t-1);break;case 2:e.lines+=n*t;break;case 0:e.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}function n(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0}return u(i,"update"),u(n,"reset"),{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:n,update:i}}function Zme(t,e){return t[0]-e[0]}function Qme(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Kme(t,e,i){let n={},r=new Float32Array(8),o=new WeakMap,s=new Fi,a=[];for(let t=0;t<8;t++)a[t]=[t,0];function l(l,h,c){let p=l.morphTargetInfluences;if(!0===e.isWebGL2){let n=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,r=void 0!==n?n.length:0,a=o.get(h);if(void 0===a||a.count!==r){let t=function(){y.dispose(),o.delete(h),h.removeEventListener("dispose",t)};u(t,"disposeTexture"),void 0!==a&&a.texture.dispose();let i=void 0!==h.morphAttributes.position,n=void 0!==h.morphAttributes.normal,l=void 0!==h.morphAttributes.color,c=h.morphAttributes.position||[],p=h.morphAttributes.normal||[],d=h.morphAttributes.color||[],f=0;!0===i&&(f=1),!0===n&&(f=2),!0===l&&(f=3);let g=h.attributes.position.count*f,m=1;g>e.maxTextureSize&&(m=Math.ceil(g/e.maxTextureSize),g=e.maxTextureSize);let v=new Float32Array(g*m*4*r),y=new VE(v,g,m,r);y.type=Au,y.needsUpdate=!0;let x=4*f;for(let t=0;t<r;t++){let e=c[t],r=p[t],o=d[t],a=g*m*4*t;for(let t=0;t<e.count;t++){let u=t*x;!0===i&&(s.fromBufferAttribute(e,t),v[a+u+0]=s.x,v[a+u+1]=s.y,v[a+u+2]=s.z,v[a+u+3]=0),!0===n&&(s.fromBufferAttribute(r,t),v[a+u+4]=s.x,v[a+u+5]=s.y,v[a+u+6]=s.z,v[a+u+7]=0),!0===l&&(s.fromBufferAttribute(o,t),v[a+u+8]=s.x,v[a+u+9]=s.y,v[a+u+10]=s.z,v[a+u+11]=4===o.itemSize?s.w:1)}}a={count:r,texture:y,size:new qe(g,m)},o.set(h,a),h.addEventListener("dispose",t)}let l=0;for(let t=0;t<p.length;t++)l+=p[t];let d=h.morphTargetsRelative?1:1-l;c.getUniforms().setValue(t,"morphTargetBaseInfluence",d),c.getUniforms().setValue(t,"morphTargetInfluences",p),c.getUniforms().setValue(t,"morphTargetsTexture",a.texture,i),c.getUniforms().setValue(t,"morphTargetsTextureSize",a.size)}else{let e=void 0===p?0:p.length,i=n[h.id];if(void 0===i||i.length!==e){i=[];for(let t=0;t<e;t++)i[t]=[t,0];n[h.id]=i}for(let t=0;t<e;t++){let e=i[t];e[0]=t,e[1]=p[t]}i.sort(Qme);for(let t=0;t<8;t++)t<e&&i[t][1]?(a[t][0]=i[t][0],a[t][1]=i[t][1]):(a[t][0]=Number.MAX_SAFE_INTEGER,a[t][1]=0);a.sort(Zme);let o=h.morphAttributes.position,s=h.morphAttributes.normal,l=0;for(let t=0;t<8;t++){let e=a[t],i=e[0],n=e[1];i!==Number.MAX_SAFE_INTEGER&&n?(o&&h.getAttribute("morphTarget"+t)!==o[i]&&h.setAttribute("morphTarget"+t,o[i]),s&&h.getAttribute("morphNormal"+t)!==s[i]&&h.setAttribute("morphNormal"+t,s[i]),r[t]=n,l+=n):(o&&!0===h.hasAttribute("morphTarget"+t)&&h.deleteAttribute("morphTarget"+t),s&&!0===h.hasAttribute("morphNormal"+t)&&h.deleteAttribute("morphNormal"+t),r[t]=0)}let u=h.morphTargetsRelative?1:1-l;c.getUniforms().setValue(t,"morphTargetBaseInfluence",u),c.getUniforms().setValue(t,"morphTargetInfluences",r)}}return u(l,"update"),{update:l}}function Jme(t,e,i,n){let r=new WeakMap;function o(t){let o=n.render.frame,s=t.geometry,l=e.get(t,s);return r.get(l)!==o&&(e.update(l),r.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",a)&&t.addEventListener("dispose",a),i.update(t.instanceMatrix,34962),null!==t.instanceColor&&i.update(t.instanceColor,34962)),l}function s(){r=new WeakMap}function a(t){let e=t.target;e.removeEventListener("dispose",a),i.remove(e.instanceMatrix),null!==e.instanceColor&&i.remove(e.instanceColor)}return u(o,"update"),u(s,"dispose"),u(a,"onInstancedMeshDispose"),{update:o,dispose:s}}u(Gme,"_createPlanes"),u($j,"_createRenderTarget"),u(IE,"_setViewport"),u(Vme,"_getBlurShader"),u(eW,"_getEquirectMaterial"),u(tW,"_getCubemapMaterial"),u(IO,"_getCommonVertexShader"),u(Hme,"WebGLCubeUVMaps"),u(jme,"WebGLExtensions"),u(Wme,"WebGLGeometries"),u(Yme,"WebGLIndexedBufferRenderer"),u(Xme,"WebGLInfo"),u(Zme,"numericalSort"),u(Qme,"absNumericalSort"),u(Kme,"WebGLMorphtargets"),u(Jme,"WebGLObjects");var jW=new Er,WW=new VE,YW=new HE,XW=new XE,nW=[],iW=[],rW=new Float32Array(16),sW=new Float32Array(9),oW=new Float32Array(4);function Lg(t,e,i){let n=t[0];if(n<=0||n>0)return t;let r=e*i,o=nW[r];if(void 0===o&&(o=new Float32Array(r),nW[r]=o),0!==e){n.toArray(o,0);for(let n=1,r=0;n!==e;++n)r+=i,t[n].toArray(o,r)}return o}function ws(t,e){if(t.length!==e.length)return!1;for(let i=0,n=t.length;i<n;i++)if(t[i]!==e[i])return!1;return!0}function Ms(t,e){for(let i=0,n=e.length;i<n;i++)t[i]=e[i]}function DT(t,e){let i=iW[e];void 0===i&&(i=new Int32Array(e),iW[e]=i);for(let n=0;n!==e;++n)i[n]=t.allocateTextureUnit();return i}function $me(t,e){let i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function ege(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(ws(i,e))return;t.uniform2fv(this.addr,e),Ms(i,e)}}function tge(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)(i[0]!==e.r||i[1]!==e.g||i[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(ws(i,e))return;t.uniform3fv(this.addr,e),Ms(i,e)}}function nge(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(ws(i,e))return;t.uniform4fv(this.addr,e),Ms(i,e)}}function ige(t,e){let i=this.cache,n=e.elements;if(void 0===n){if(ws(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ms(i,e)}else{if(ws(i,n))return;oW.set(n),t.uniformMatrix2fv(this.addr,!1,oW),Ms(i,n)}}function rge(t,e){let i=this.cache,n=e.elements;if(void 0===n){if(ws(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ms(i,e)}else{if(ws(i,n))return;sW.set(n),t.uniformMatrix3fv(this.addr,!1,sW),Ms(i,n)}}function sge(t,e){let i=this.cache,n=e.elements;if(void 0===n){if(ws(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ms(i,e)}else{if(ws(i,n))return;rW.set(n),t.uniformMatrix4fv(this.addr,!1,rW),Ms(i,n)}}function oge(t,e){let i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function age(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(ws(i,e))return;t.uniform2iv(this.addr,e),Ms(i,e)}}function lge(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(ws(i,e))return;t.uniform3iv(this.addr,e),Ms(i,e)}}function uge(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(ws(i,e))return;t.uniform4iv(this.addr,e),Ms(i,e)}}function cge(t,e){let i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function hge(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(ws(i,e))return;t.uniform2uiv(this.addr,e),Ms(i,e)}}function fge(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(ws(i,e))return;t.uniform3uiv(this.addr,e),Ms(i,e)}}function pge(t,e){let i=this.cache;if(void 0!==e.x)(i[0]!==e.x||i[1]!==e.y||i[2]!==e.z||i[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(ws(i,e))return;t.uniform4uiv(this.addr,e),Ms(i,e)}}function dge(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(e||jW,r)}function mge(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(e||YW,r)}function gge(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(e||XW,r)}function vge(t,e,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(t.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(e||WW,r)}function yge(t){switch(t){case 5126:return $me;case 35664:return ege;case 35665:return tge;case 35666:return nge;case 35674:return ige;case 35675:return rge;case 35676:return sge;case 5124:case 35670:return oge;case 35667:case 35671:return age;case 35668:case 35672:return lge;case 35669:case 35673:return uge;case 5125:return cge;case 36294:return hge;case 36295:return fge;case 36296:return pge;case 35678:case 36198:case 36298:case 36306:case 35682:return dge;case 35679:case 36299:case 36307:return mge;case 35680:case 36300:case 36308:case 36293:return gge;case 36289:case 36303:case 36311:case 36292:return vge}}function xge(t,e){t.uniform1fv(this.addr,e)}function bge(t,e){let i=Lg(e,this.size,2);t.uniform2fv(this.addr,i)}function _ge(t,e){let i=Lg(e,this.size,3);t.uniform3fv(this.addr,i)}function wge(t,e){let i=Lg(e,this.size,4);t.uniform4fv(this.addr,i)}function Mge(t,e){let i=Lg(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function Ege(t,e){let i=Lg(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function Tge(t,e){let i=Lg(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function Sge(t,e){t.uniform1iv(this.addr,e)}function Age(t,e){t.uniform2iv(this.addr,e)}function Cge(t,e){t.uniform3iv(this.addr,e)}function Pge(t,e){t.uniform4iv(this.addr,e)}function Ige(t,e){t.uniform1uiv(this.addr,e)}function Oge(t,e){t.uniform2uiv(this.addr,e)}function Lge(t,e){t.uniform3uiv(this.addr,e)}function Dge(t,e){t.uniform4uiv(this.addr,e)}function Nge(t,e,i){let n=this.cache,r=e.length,o=DT(i,r);ws(n,o)||(t.uniform1iv(this.addr,o),Ms(n,o));for(let t=0;t!==r;++t)i.setTexture2D(e[t]||jW,o[t])}function Rge(t,e,i){let n=this.cache,r=e.length,o=DT(i,r);ws(n,o)||(t.uniform1iv(this.addr,o),Ms(n,o));for(let t=0;t!==r;++t)i.setTexture3D(e[t]||YW,o[t])}function Bge(t,e,i){let n=this.cache,r=e.length,o=DT(i,r);ws(n,o)||(t.uniform1iv(this.addr,o),Ms(n,o));for(let t=0;t!==r;++t)i.setTextureCube(e[t]||XW,o[t])}function kge(t,e,i){let n=this.cache,r=e.length,o=DT(i,r);ws(n,o)||(t.uniform1iv(this.addr,o),Ms(n,o));for(let t=0;t!==r;++t)i.setTexture2DArray(e[t]||WW,o[t])}function qge(t){switch(t){case 5126:return xge;case 35664:return bge;case 35665:return _ge;case 35666:return wge;case 35674:return Mge;case 35675:return Ege;case 35676:return Tge;case 5124:case 35670:return Sge;case 35667:case 35671:return Age;case 35668:case 35672:return Cge;case 35669:case 35673:return Pge;case 5125:return Ige;case 36294:return Oge;case 36295:return Lge;case 36296:return Dge;case 35678:case 36198:case 36298:case 36306:case 35682:return Nge;case 35679:case 36299:case 36307:return Rge;case 35680:case 36300:case 36308:case 36293:return Bge;case 36289:case 36303:case 36311:case 36292:return kge}}u(Lg,"flatten"),u(ws,"arraysEqual"),u(Ms,"copyArray"),u(DT,"allocTexUnits"),u($me,"setValueV1f"),u(ege,"setValueV2f"),u(tge,"setValueV3f"),u(nge,"setValueV4f"),u(ige,"setValueM2"),u(rge,"setValueM3"),u(sge,"setValueM4"),u(oge,"setValueV1i"),u(age,"setValueV2i"),u(lge,"setValueV3i"),u(uge,"setValueV4i"),u(cge,"setValueV1ui"),u(hge,"setValueV2ui"),u(fge,"setValueV3ui"),u(pge,"setValueV4ui"),u(dge,"setValueT1"),u(mge,"setValueT3D1"),u(gge,"setValueT6"),u(vge,"setValueT2DArray1"),u(yge,"getSingularSetter"),u(xge,"setValueV1fArray"),u(bge,"setValueV2fArray"),u(_ge,"setValueV3fArray"),u(wge,"setValueV4fArray"),u(Mge,"setValueM2Array"),u(Ege,"setValueM3Array"),u(Tge,"setValueM4Array"),u(Sge,"setValueV1iArray"),u(Age,"setValueV2iArray"),u(Cge,"setValueV3iArray"),u(Pge,"setValueV4iArray"),u(Ige,"setValueV1uiArray"),u(Oge,"setValueV2uiArray"),u(Lge,"setValueV3uiArray"),u(Dge,"setValueV4uiArray"),u(Nge,"setValueT1Array"),u(Rge,"setValueT3DArray"),u(Bge,"setValueT6Array"),u(kge,"setValueT2DArrayArray"),u(qge,"getPureArraySetter");var hL=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.setValue=yge(e.type)}};u(hL,"SingleUniform");var Q6=hL,fL=class{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.size=e.size,this.setValue=qge(e.type)}};u(fL,"PureArrayUniform");var K6=fL,pL=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){let n=this.seq;for(let r=0,o=n.length;r!==o;++r){let o=n[r];o.setValue(t,e[o.id],i)}}};u(pL,"StructuredUniform");var J6=pL,N6=/(\w+)(\])?(\[|\.)?/g;function aW(t,e){t.seq.push(e),t.map[e.id]=e}function Fge(t,e,i){let n=t.name,r=n.length;for(N6.lastIndex=0;;){let o=N6.exec(n),s=N6.lastIndex,a=o[1],l="]"===o[2],u=o[3];if(l&&(a|=0),void 0===u||"["===u&&s+2===r){aW(i,void 0===u?new Q6(a,t,e):new K6(a,t,e));break}{let t=i.map[a];void 0===t&&(t=new J6(a),aW(i,t)),i=t}}}u(aW,"addUniform"),u(Fge,"parseUniform");var dL=class{constructor(t,e){this.seq=[],this.map={};let i=t.getProgramParameter(e,35718);for(let n=0;n<i;++n){let i=t.getActiveUniform(e,n);Fge(i,t.getUniformLocation(e,i.name),this)}}setValue(t,e,i,n){let r=this.map[e];void 0!==r&&r.setValue(t,i,n)}setOptional(t,e,i){let n=e[i];void 0!==n&&this.setValue(t,i,n)}static upload(t,e,i,n){for(let r=0,o=e.length;r!==o;++r){let o=e[r],s=i[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,n)}}static seqWithValue(t,e){let i=[];for(let n=0,r=t.length;n!==r;++n){let r=t[n];r.id in e&&i.push(r)}return i}};u(dL,"WebGLUniforms");var vg=dL;function lW(t,e,i){let n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),n}u(lW,"WebGLShader");var Uge=0;function zge(t,e){let i=t.split("\n"),n=[],r=Math.max(e-6,0),o=Math.min(e+6,i.length);for(let t=r;t<o;t++){let r=t+1;n.push("".concat(r===e?">":" "," ").concat(r,": ").concat(i[t]))}return n.join("\n")}function Gge(t){switch(t){case rl:return["Linear","( value )"];case ai:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function uW(t,e,i){let n=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(n&&""===r)return"";let o=/ERROR: 0:(\d+)/.exec(r);if(o){let n=parseInt(o[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+zge(t.getShaderSource(e),n)}return r}function Vge(t,e){let i=Gge(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Hge(t,e){let i;switch(e){case ife:i="Linear";break;case rfe:i="Reinhard";break;case sfe:i="OptimizedCineon";break;case ofe:i="ACESFilmic";break;case afe:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function jge(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ux).join("\n")}function Wge(t){let e=[];for(let i in t){let n=t[i];!1!==n&&e.push("#define "+i+" "+n)}return e.join("\n")}function Yge(t,e){let i={},n=t.getProgramParameter(e,35721);for(let r=0;r<n;r++){let n=t.getActiveAttrib(e,r),o=n.name,s=1;35674===n.type&&(s=2),35675===n.type&&(s=3),35676===n.type&&(s=4),i[o]={type:n.type,location:t.getAttribLocation(e,o),locationSize:s}}return i}function ux(t){return""!==t}function cW(t,e){let i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hW(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}u(zge,"handleSource"),u(Gge,"getEncodingComponents"),u(uW,"getShaderErrors"),u(Vge,"getTexelEncodingFunction"),u(Hge,"getToneMappingFunction"),u(jge,"generateExtensions"),u(Wge,"generateDefines"),u(Yge,"fetchAttributeLocations"),u(ux,"filterEmptyLine"),u(cW,"replaceLightNums"),u(hW,"replaceClippingPlaneNums");var Xge=/^[ \t]*#include +<([\w\d./]+)>/gm;function $6(t){return t.replace(Xge,Zge)}function Zge(t,e){let i=fn[e];if(void 0===i)throw new Error("Can not resolve #include <"+e+">");return $6(i)}u($6,"resolveIncludes"),u(Zge,"includeReplacer");var Qge=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fW(t){return t.replace(Qge,Kge)}function Kge(t,e,i,n){let r="";for(let t=parseInt(e);t<parseInt(i);t++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function pW(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Jge(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===NW?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Bhe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===lx&&(e="SHADOWMAP_TYPE_VSM"),e}function $ge(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case xg:case bg:e="ENVMAP_TYPE_CUBE";break;case OT:e="ENVMAP_TYPE_CUBE_UV"}return e}function e0e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap&&t.envMapMode===bg)e="ENVMAP_MODE_REFRACTION";return e}function t0e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case TO:e="ENVMAP_BLENDING_MULTIPLY";break;case tfe:e="ENVMAP_BLENDING_MIX";break;case nfe:e="ENVMAP_BLENDING_ADD"}return e}function n0e(t){let e=t.envMapCubeUVHeight;if(null===e)return null;let i=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}function i0e(t,e,i,n){let r,o,s=t.getContext(),a=i.defines,l=i.vertexShader,u=i.fragmentShader,h=Jge(i),c=$ge(i),p=e0e(i),d=t0e(i),f=n0e(i),g=i.isWebGL2?"":jge(i),m=Wge(a),v=s.createProgram(),y=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(r=[m].filter(ux).join("\n"),r.length>0&&(r+="\n"),o=[g,m].filter(ux).join("\n"),o.length>0&&(o+="\n")):(r=[pW(i),"#define SHADER_NAME "+i.shaderName,m,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs2?"#define USE_UV2":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ux).join("\n"),o=[g,pW(i),"#define SHADER_NAME "+i.shaderName,m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+p:"",i.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs2?"#define USE_UV2":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+h:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==Nc?"#define TONE_MAPPING":"",i.toneMapping!==Nc?fn.tonemapping_pars_fragment:"",i.toneMapping!==Nc?Hge("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",fn.encodings_pars_fragment,Vge("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ux).join("\n")),l=$6(l),l=cW(l,i),l=hW(l,i),u=$6(u),u=cW(u,i),u=hW(u,i),l=fW(l),u=fW(u),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(y="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,o=["#define varying in",i.glslVersion===Nj?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===Nj?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);let x,_,b=y+o+u,M=lW(s,35633,y+r+l),E=lW(s,35632,b);if(s.attachShader(v,M),s.attachShader(v,E),void 0!==i.index0AttributeName?s.bindAttribLocation(v,0,i.index0AttributeName):!0===i.morphTargets&&s.bindAttribLocation(v,0,"position"),s.linkProgram(v),t.debug.checkShaderErrors){let e=s.getProgramInfoLog(v).trim(),i=s.getShaderInfoLog(M).trim(),n=s.getShaderInfoLog(E).trim(),a=!0,l=!0;if(!1===s.getProgramParameter(v,35714))if(a=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(s,v,M,E);else{let t=uW(s,M,"vertex"),i=uW(s,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(v,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+i)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):(""===i||""===n)&&(l=!1);l&&(this.diagnostics={runnable:a,programLog:e,vertexShader:{log:i,prefix:r},fragmentShader:{log:n,prefix:o}})}return s.deleteShader(M),s.deleteShader(E),this.getUniforms=function(){return void 0===x&&(x=new vg(s,v)),x},this.getAttributes=function(){return void 0===_&&(_=Yge(s,v)),_},this.destroy=function(){n.releaseStatesOfProgram(this),s.deleteProgram(v),this.program=void 0},this.name=i.shaderName,this.id=Uge++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=M,this.fragmentShader=E,this}u(fW,"unrollLoops"),u(Kge,"loopReplacer"),u(pW,"generatePrecision"),u(Jge,"generateShadowMapTypeDefine"),u($ge,"generateEnvMapTypeDefine"),u(e0e,"generateEnvMapModeDefine"),u(t0e,"generateEnvMapBlendingDefine"),u(n0e,"generateCubeUVSize"),u(i0e,"WebGLProgram");var r0e=0,mL=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,i=t.fragmentShader,n=this._getShaderStage(e),r=this._getShaderStage(i),o=this._getShaderCacheForMaterial(t);return!1===o.has(n)&&(o.add(n),n.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,i=e.get(t);return void 0===i&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){let e=this.shaderCache,i=e.get(t);return void 0===i&&(i=new tO(t),e.set(t,i)),i}};u(mL,"WebGLShaderCache");var eO=mL,gL=class{constructor(t){this.id=r0e++,this.code=t,this.usedTimes=0}};u(gL,"WebGLShaderStage");var tO=gL;function s0e(t,e,i,n,r,o,s){let a=new wx,l=new eO,h=[],c=r.isWebGL2,p=r.logarithmicDepthBuffer,d=r.vertexTextures,f=r.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(t){return 1===t?"uv2":"uv"}function v(o,a,u,h,v){let y=h.fog,x=v.geometry,_=o.isMeshStandardMaterial?h.environment:null,b=(o.isMeshStandardMaterial?i:e).get(o.envMap||_),M=b&&b.mapping===OT?b.image.height:null,E=g[o.type];null!==o.precision&&(f=r.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));let w,A,S,T,C=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,P=void 0!==C?C.length:0,I=0;if(void 0!==x.morphAttributes.position&&(I=1),void 0!==x.morphAttributes.normal&&(I=2),void 0!==x.morphAttributes.color&&(I=3),E){let t=Su[E];w=t.vertexShader,A=t.fragmentShader}else w=o.vertexShader,A=o.fragmentShader,l.update(o),S=l.getVertexShaderID(o),T=l.getFragmentShaderID(o);let L=t.getRenderTarget(),O=!0===v.isInstancedMesh,N=!!o.map,D=!!o.matcap,R=!!b,q=!!o.aoMap,B=!!o.lightMap,k=!!o.bumpMap,F=!!o.normalMap,U=!!o.displacementMap,z=!!o.emissiveMap,V=!!o.metalnessMap,j=!!o.roughnessMap,G=o.clearcoat>0,W=o.iridescence>0,H=o.sheen>0,Y=o.transmission>0,X=G&&!!o.clearcoatMap,K=G&&!!o.clearcoatNormalMap,Z=G&&!!o.clearcoatRoughnessMap,Q=W&&!!o.iridescenceMap,J=W&&!!o.iridescenceThicknessMap,$=H&&!!o.sheenColorMap,tt=H&&!!o.sheenRoughnessMap,et=!!o.specularMap,it=!!o.specularColorMap,nt=!!o.specularIntensityMap,rt=Y&&!!o.transmissionMap,ot=Y&&!!o.thicknessMap,st=!!o.gradientMap,at=!!o.alphaMap,lt=o.alphaTest>0,ut=!!o.extensions,ht=!!x.attributes.uv2;return{isWebGL2:c,shaderID:E,shaderName:o.type,vertexShader:w,fragmentShader:A,defines:o.defines,customVertexShaderID:S,customFragmentShaderID:T,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,instancing:O,instancingColor:O&&null!==v.instanceColor,supportsVertexTextures:d,outputEncoding:null===L?t.outputEncoding:!0===L.isXRRenderTarget?L.texture.encoding:rl,map:N,matcap:D,envMap:R,envMapMode:R&&b.mapping,envMapCubeUVHeight:M,aoMap:q,lightMap:B,bumpMap:k,normalMap:F,displacementMap:d&&U,emissiveMap:z,normalMapObjectSpace:F&&o.normalMapType===wfe,normalMapTangentSpace:F&&o.normalMapType===CO,decodeVideoTexture:N&&!0===o.map.isVideoTexture&&o.map.encoding===ai,metalnessMap:V,roughnessMap:j,clearcoat:G,clearcoatMap:X,clearcoatNormalMap:K,clearcoatRoughnessMap:Z,iridescence:W,iridescenceMap:Q,iridescenceThicknessMap:J,sheen:H,sheenColorMap:$,sheenRoughnessMap:tt,specularMap:et,specularColorMap:it,specularIntensityMap:nt,transmission:Y,transmissionMap:rt,thicknessMap:ot,gradientMap:st,opaque:!1===o.transparent&&o.blending===mg,alphaMap:at,alphaTest:lt,combine:o.combine,mapUv:N&&m(o.map.channel),aoMapUv:q&&m(o.aoMap.channel),lightMapUv:B&&m(o.lightMap.channel),bumpMapUv:k&&m(o.bumpMap.channel),normalMapUv:F&&m(o.normalMap.channel),displacementMapUv:U&&m(o.displacementMap.channel),emissiveMapUv:z&&m(o.emissiveMap.channel),metalnessMapUv:V&&m(o.metalnessMap.channel),roughnessMapUv:j&&m(o.roughnessMap.channel),clearcoatMapUv:X&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:K&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Z&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:Q&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:J&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:$&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:tt&&m(o.sheenRoughnessMap.channel),specularMapUv:et&&m(o.specularMap.channel),specularColorMapUv:it&&m(o.specularColorMap.channel),specularIntensityMapUv:nt&&m(o.specularIntensityMap.channel),transmissionMapUv:rt&&m(o.transmissionMap.channel),thicknessMapUv:ot&&m(o.thicknessMap.channel),alphaMapUv:at&&m(o.alphaMap.channel),vertexTangents:F&&!!x.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,vertexUvs2:ht,pointsUvs:!0===v.isPoints&&!!x.attributes.uv&&(N||at),fog:!!y,useFog:!0===o.fog,fogExp2:y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:p,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:P,morphTextureStride:I,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:Nc,useLegacyLights:t.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===Dr,flipSided:o.side===_s,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:ut&&!0===o.extensions.derivatives,extensionFragDepth:ut&&!0===o.extensions.fragDepth,extensionDrawBuffers:ut&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:ut&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||n.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}}function y(e){let i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.customVertexShaderID),i.push(e.customFragmentShaderID)),void 0!==e.defines)for(let t in e.defines)i.push(t),i.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(x(i,e),_(i,e),i.push(t.outputEncoding)),i.push(e.customProgramCacheKey),i.join()}function x(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}function _(t,e){a.disableAll(),e.isWebGL2&&a.enable(0),e.supportsVertexTextures&&a.enable(1),e.instancing&&a.enable(2),e.instancingColor&&a.enable(3),e.matcap&&a.enable(4),e.envMap&&a.enable(5),e.normalMapObjectSpace&&a.enable(6),e.normalMapTangentSpace&&a.enable(7),e.clearcoat&&a.enable(8),e.iridescence&&a.enable(9),e.alphaTest&&a.enable(10),e.vertexColors&&a.enable(11),e.vertexAlphas&&a.enable(12),e.vertexUvs2&&a.enable(13),e.vertexTangents&&a.enable(14),t.push(a.mask),a.disableAll(),e.fog&&a.enable(0),e.useFog&&a.enable(1),e.flatShading&&a.enable(2),e.logarithmicDepthBuffer&&a.enable(3),e.skinning&&a.enable(4),e.morphTargets&&a.enable(5),e.morphNormals&&a.enable(6),e.morphColors&&a.enable(7),e.premultipliedAlpha&&a.enable(8),e.shadowMapEnabled&&a.enable(9),e.useLegacyLights&&a.enable(10),e.doubleSided&&a.enable(11),e.flipSided&&a.enable(12),e.useDepthPacking&&a.enable(13),e.dithering&&a.enable(14),e.transmission&&a.enable(15),e.sheen&&a.enable(16),e.decodeVideoTexture&&a.enable(17),e.opaque&&a.enable(18),e.pointsUvs&&a.enable(19),t.push(a.mask)}function b(t){let e,i=g[t.type];if(i){let t=Su[i];e=tpe.clone(t.uniforms)}else e=t.uniforms;return e}function M(e,i){let n;for(let t=0,e=h.length;t<e;t++){let e=h[t];if(e.cacheKey===i){n=e,++n.usedTimes;break}}return void 0===n&&(n=new i0e(t,i,e,o),h.push(n)),n}function E(t){if(0==--t.usedTimes){let e=h.indexOf(t);h[e]=h[h.length-1],h.pop(),t.destroy()}}function w(t){l.remove(t)}function A(){l.dispose()}return u(m,"getChannel"),u(v,"getParameters"),u(y,"getProgramCacheKey"),u(x,"getProgramCacheKeyParameters"),u(_,"getProgramCacheKeyBooleans"),u(b,"getUniforms"),u(M,"acquireProgram"),u(E,"releaseProgram"),u(w,"releaseShaderCache"),u(A,"dispose"),{getParameters:v,getProgramCacheKey:y,getUniforms:b,acquireProgram:M,releaseProgram:E,releaseShaderCache:w,programs:h,dispose:A}}function o0e(){let t=new WeakMap;function e(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i}function i(e){t.delete(e)}function n(e,i,n){t.get(e)[i]=n}function r(){t=new WeakMap}return u(e,"get"),u(i,"remove"),u(n,"update"),u(r,"dispose"),{get:e,remove:i,update:n,dispose:r}}function a0e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function dW(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function mW(){let t=[],e=0,i=[],n=[],r=[];function o(){e=0,i.length=0,n.length=0,r.length=0}function s(i,n,r,o,s,a){let l=t[e];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:o,renderOrder:i.renderOrder,z:s,group:a},t[e]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=o,l.renderOrder=i.renderOrder,l.z=s,l.group=a),e++,l}function a(t,e,o,a,l,u){let h=s(t,e,o,a,l,u);o.transmission>0?n.push(h):!0===o.transparent?r.push(h):i.push(h)}function l(t,e,o,a,l,u){let h=s(t,e,o,a,l,u);o.transmission>0?n.unshift(h):!0===o.transparent?r.unshift(h):i.unshift(h)}function h(t,e){i.length>1&&i.sort(t||a0e),n.length>1&&n.sort(e||dW),r.length>1&&r.sort(e||dW)}function c(){for(let i=e,n=t.length;i<n;i++){let e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}}return u(o,"init"),u(s,"getNextRenderItem"),u(a,"push"),u(l,"unshift"),u(h,"sort"),u(c,"finish"),{opaque:i,transmissive:n,transparent:r,init:o,push:a,unshift:l,finish:c,sort:h}}function l0e(){let t=new WeakMap;function e(e,i){let n,r=t.get(e);return void 0===r?(n=new mW,t.set(e,[n])):i>=r.length?(n=new mW,r.push(n)):n=r[i],n}function i(){t=new WeakMap}return u(e,"get"),u(i,"dispose"),{get:e,dispose:i}}function u0e(){let t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new K,color:new at};break;case"SpotLight":i={position:new K,direction:new K,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new K,color:new at,distance:0,decay:0};break;case"HemisphereLight":i={direction:new K,skyColor:new at,groundColor:new at};break;case"RectAreaLight":i={color:new at,position:new K,halfWidth:new K,halfHeight:new K}}return t[e.id]=i,i}}}function c0e(){let t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}u(s0e,"WebGLPrograms"),u(o0e,"WebGLProperties"),u(a0e,"painterSortStable"),u(dW,"reversePainterSortStable"),u(mW,"WebGLRenderList"),u(l0e,"WebGLRenderLists"),u(u0e,"UniformsCache"),u(c0e,"ShadowUniformsCache");var h0e=0;function f0e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function p0e(t,e){let i=new u0e,n=c0e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let t=0;t<9;t++)r.probe.push(new K);let o=new K,s=new Ot,a=new Ot;function l(o,s){let a=0,l=0,u=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let h=0,c=0,p=0,d=0,f=0,g=0,m=0,v=0,y=0,x=0;o.sort(f0e);let _=!0===s?Math.PI:1;for(let t=0,e=o.length;t<e;t++){let e=o[t],s=e.color,b=e.intensity,M=e.distance,E=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=s.r*b*_,l+=s.g*b*_,u+=s.b*b*_;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],b);else if(e.isDirectionalLight){let t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),e.castShadow){let t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,r.directionalShadow[h]=i,r.directionalShadowMap[h]=E,r.directionalShadowMatrix[h]=e.shadow.matrix,g++}r.directional[h]=t,h++}else if(e.isSpotLight){let t=i.get(e);t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(s).multiplyScalar(b*_),t.distance=M,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,r.spot[p]=t;let o=e.shadow;if(e.map&&(r.spotLightMap[y]=e.map,y++,o.updateMatrices(e),e.castShadow&&x++),r.spotLightMatrix[p]=o.matrix,e.castShadow){let t=n.get(e);t.shadowBias=o.bias,t.shadowNormalBias=o.normalBias,t.shadowRadius=o.radius,t.shadowMapSize=o.mapSize,r.spotShadow[p]=t,r.spotShadowMap[p]=E,v++}p++}else if(e.isRectAreaLight){let t=i.get(e);t.color.copy(s).multiplyScalar(b),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[d]=t,d++}else if(e.isPointLight){let t=i.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*_),t.distance=e.distance,t.decay=e.decay,e.castShadow){let t=e.shadow,i=n.get(e);i.shadowBias=t.bias,i.shadowNormalBias=t.normalBias,i.shadowRadius=t.radius,i.shadowMapSize=t.mapSize,i.shadowCameraNear=t.camera.near,i.shadowCameraFar=t.camera.far,r.pointShadow[c]=i,r.pointShadowMap[c]=E,r.pointShadowMatrix[c]=e.shadow.matrix,m++}r.point[c]=t,c++}else if(e.isHemisphereLight){let t=i.get(e);t.skyColor.copy(e.color).multiplyScalar(b*_),t.groundColor.copy(e.groundColor).multiplyScalar(b*_),r.hemi[f]=t,f++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=mt.LTC_FLOAT_1,r.rectAreaLTC2=mt.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=mt.LTC_HALF_1,r.rectAreaLTC2=mt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=l,r.ambient[2]=u;let b=r.hash;(b.directionalLength!==h||b.pointLength!==c||b.spotLength!==p||b.rectAreaLength!==d||b.hemiLength!==f||b.numDirectionalShadows!==g||b.numPointShadows!==m||b.numSpotShadows!==v||b.numSpotMaps!==y)&&(r.directional.length=h,r.spot.length=p,r.rectArea.length=d,r.point.length=c,r.hemi.length=f,r.directionalShadow.length=g,r.directionalShadowMap.length=g,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=g,r.pointShadowMatrix.length=m,r.spotLightMatrix.length=v+y-x,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=x,b.directionalLength=h,b.pointLength=c,b.spotLength=p,b.rectAreaLength=d,b.hemiLength=f,b.numDirectionalShadows=g,b.numPointShadows=m,b.numSpotShadows=v,b.numSpotMaps=y,r.version=h0e++)}function h(t,e){let i=0,n=0,l=0,u=0,h=0,c=e.matrixWorldInverse;for(let e=0,p=t.length;e<p;e++){let p=t[e];if(p.isDirectionalLight){let t=r.directional[i];t.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(c),i++}else if(p.isSpotLight){let t=r.spot[l];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(c),t.direction.setFromMatrixPosition(p.matrixWorld),o.setFromMatrixPosition(p.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(c),l++}else if(p.isRectAreaLight){let t=r.rectArea[u];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(c),a.identity(),s.copy(p.matrixWorld),s.premultiply(c),a.extractRotation(s),t.halfWidth.set(.5*p.width,0,0),t.halfHeight.set(0,.5*p.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),u++}else if(p.isPointLight){let t=r.point[n];t.position.setFromMatrixPosition(p.matrixWorld),t.position.applyMatrix4(c),n++}else if(p.isHemisphereLight){let t=r.hemi[h];t.direction.setFromMatrixPosition(p.matrixWorld),t.direction.transformDirection(c),h++}}}return u(l,"setup"),u(h,"setupView"),{setup:l,setupView:h,state:r}}function gW(t,e){let i=new p0e(t,e),n=[],r=[];function o(){n.length=0,r.length=0}function s(t){n.push(t)}function a(t){r.push(t)}function l(t){i.setup(n,t)}function h(t){i.setupView(n,t)}return u(o,"init"),u(s,"pushLight"),u(a,"pushShadow"),u(l,"setupLights"),u(h,"setupLightsView"),{init:o,state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:l,setupLightsView:h,pushLight:s,pushShadow:a}}function d0e(t,e){let i=new WeakMap;function n(n,r=0){let o,s=i.get(n);return void 0===s?(o=new gW(t,e),i.set(n,[o])):r>=s.length?(o=new gW(t,e),s.push(o)):o=s[r],o}function r(){i=new WeakMap}return u(n,"get"),u(r,"dispose"),{get:n,dispose:r}}u(f0e,"shadowCastingAndTexturingLightsFirst"),u(p0e,"WebGLLights"),u(gW,"WebGLRenderState"),u(d0e,"WebGLRenderStates");var vL=class extends ha{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=da,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}};u(vL,"MeshDepthMaterial");var Mx=vL,yL=class extends ha{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}};u(yL,"MeshDistanceMaterial");var nO=yL,m0e="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",g0e="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function v0e(t,e,i){let n=new kc,r=new qe,o=new qe,s=new Fi,a=new Mx({depthPacking:Ig}),l=new nO,h={},c=i.maxTextureSize,p={[Pa]:_s,[_s]:Pa,[Dr]:Dr},d=new Xt({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:m0e,fragmentShader:g0e}),f=d.clone();f.defines.HORIZONTAL_PASS=1;let g=new Ji;g.setAttribute("position",new rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new Ft(g,d),v=this;function y(i,n){let o=e.update(m);d.defines.VSM_SAMPLES!==i.blurSamples&&(d.defines.VSM_SAMPLES=i.blurSamples,f.defines.VSM_SAMPLES=i.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new ti(r.x,r.y)),d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(n,null,o,d,m,null),f.uniforms.shadow_pass.value=i.mapPass.texture,f.uniforms.resolution.value=i.mapSize,f.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(n,null,o,f,m,null)}function x(e,i,n,r){let o=null,s=!0===n.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===n.isPointLight?l:a,t.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){let t=o.uuid,e=i.uuid,n=h[t];void 0===n&&(n={},h[t]=n);let r=n[e];void 0===r&&(r=o.clone(),n[e]=r),o=r}if(o.visible=i.visible,o.wireframe=i.wireframe,o.side=r===lx?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:p[i.side],o.alphaMap=i.alphaMap,o.alphaTest=i.alphaTest,o.map=i.map,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.clipIntersection=i.clipIntersection,o.displacementMap=i.displacementMap,o.displacementScale=i.displacementScale,o.displacementBias=i.displacementBias,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,!0===n.isPointLight&&!0===o.isMeshDistanceMaterial){t.properties.get(o).light=n}return o}function _(i,r,o,s,a){if(!1===i.visible)return;if(i.layers.test(r.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&a===lx)&&(!i.frustumCulled||n.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);let n=e.update(i),r=i.material;if(Array.isArray(r)){let e=n.groups;for(let l=0,u=e.length;l<u;l++){let u=e[l],h=r[u.materialIndex];if(h&&h.visible){let e=x(i,h,s,a);t.renderBufferDirect(o,null,n,e,i,u)}}}else if(r.visible){let e=x(i,r,s,a);t.renderBufferDirect(o,null,n,e,i,null)}}let l=i.children;for(let t=0,e=l.length;t<e;t++)_(l[t],r,o,s,a)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=NW,this.render=function(e,i,a){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===e.length)return;let l=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),p=t.state;p.setBlending(Nr),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(let l=0,u=e.length;l<u;l++){let u=e[l],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;r.copy(h.mapSize);let d=h.getFrameExtents();if(r.multiply(d),o.copy(h.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(o.x=Math.floor(c/d.x),r.x=o.x*d.x,h.mapSize.x=o.x),r.y>c&&(o.y=Math.floor(c/d.y),r.y=o.y*d.y,h.mapSize.y=o.y)),null===h.map){let t=this.type!==lx?{minFilter:ui,magFilter:ui}:{};h.map=new ti(r.x,r.y,t),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}t.setRenderTarget(h.map),t.clear();let f=h.getViewportCount();for(let t=0;t<f;t++){let e=h.getViewport(t);s.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),p.viewport(s),h.updateMatrices(u,t),n=h.getFrustum(),_(i,a,h.camera,u,this.type)}!0!==h.isPointLightShadow&&this.type===lx&&y(h,a),h.needsUpdate=!1}v.needsUpdate=!1,t.setRenderTarget(l,u,h)},u(y,"VSMPass"),u(x,"getDepthMaterial"),u(_,"renderObject")}function y0e(t,e,i){let n=i.isWebGL2;function r(){let e=!1,i=new Fi,n=null,r=new Fi(0,0,0,0);return{setMask:function(i){n!==i&&!e&&(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,n,o,s,a){!0===a&&(e*=s,n*=s,o*=s),i.set(e,n,o,s),!1===r.equals(i)&&(t.clearColor(e,n,o,s),r.copy(i))},reset:function(){e=!1,n=null,r.set(-1,0,0,0)}}}function o(){let e=!1,i=null,n=null,r=null;return{setTest:function(t){t?G(2929):W(2929)},setMask:function(n){i!==n&&!e&&(t.depthMask(n),i=n)},setFunc:function(e){if(n!==e){switch(e){case Xhe:t.depthFunc(512);break;case Zhe:t.depthFunc(519);break;case Qhe:t.depthFunc(513);break;case G6:t.depthFunc(515);break;case Khe:t.depthFunc(514);break;case Jhe:t.depthFunc(518);break;case $he:t.depthFunc(516);break;case efe:t.depthFunc(517);break;default:t.depthFunc(515)}n=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,i=null,n=null,r=null}}}function s(){let e=!1,i=null,n=null,r=null,o=null,s=null,a=null,l=null,u=null;return{setTest:function(t){e||(t?G(2960):W(2960))},setMask:function(n){i!==n&&!e&&(t.stencilMask(n),i=n)},setFunc:function(e,i,s){(n!==e||r!==i||o!==s)&&(t.stencilFunc(e,i,s),n=e,r=i,o=s)},setOp:function(e,i,n){(s!==e||a!==i||l!==n)&&(t.stencilOp(e,i,n),s=e,a=i,l=n)},setLocked:function(t){e=t},setClear:function(e){u!==e&&(t.clearStencil(e),u=e)},reset:function(){e=!1,i=null,n=null,r=null,o=null,s=null,a=null,l=null,u=null}}}u(r,"ColorBuffer"),u(o,"DepthBuffer"),u(s,"StencilBuffer");let a=new r,l=new o,h=new s,c=new WeakMap,p=new WeakMap,d={},f={},g=new WeakMap,m=[],v=null,y=!1,x=null,_=null,b=null,M=null,E=null,w=null,A=null,S=!1,T=null,C=null,P=null,I=null,L=null,O=t.getParameter(35661),N=!1,D=0,R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(R)[1]),N=D>=1):-1!==R.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),N=D>=2);let q=null,B={},k=t.getParameter(3088),F=t.getParameter(2978),U=(new Fi).fromArray(k),z=(new Fi).fromArray(F);function V(e,i,n){let r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<n;e++)t.texImage2D(i+e,0,6408,1,1,0,6408,5121,r);return o}u(V,"createTexture");let j={};function G(e){!0!==d[e]&&(t.enable(e),d[e]=!0)}function W(e){!1!==d[e]&&(t.disable(e),d[e]=!1)}function H(e,i){return f[e]!==i&&(t.bindFramebuffer(e,i),f[e]=i,n&&(36009===e&&(f[36160]=i),36160===e&&(f[36009]=i)),!0)}function Y(n,r){let o=m,s=!1;if(n)if(o=g.get(r),void 0===o&&(o=[],g.set(r,o)),n.isWebGLMultipleRenderTargets){let t=n.texture;if(o.length!==t.length||36064!==o[0]){for(let e=0,i=t.length;e<i;e++)o[e]=36064+e;o.length=t.length,s=!0}}else 36064!==o[0]&&(o[0]=36064,s=!0);else 1029!==o[0]&&(o[0]=1029,s=!0);s&&(i.isWebGL2?t.drawBuffers(o):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))}function X(e){return v!==e&&(t.useProgram(e),v=e,!0)}j[3553]=V(3553,3553,1),j[34067]=V(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),h.setClear(0),G(2929),l.setFunc(G6),$(!1),tt(ij),G(2884),Q(Nr),u(G,"enable"),u(W,"disable"),u(H,"bindFramebuffer"),u(Y,"drawBuffers"),u(X,"useProgram");let K={[cg]:32774,[khe]:32778,[qhe]:32779};if(n)K[oj]=32775,K[aj]=32776;else{let t=e.get("EXT_blend_minmax");null!==t&&(K[oj]=t.MIN_EXT,K[aj]=t.MAX_EXT)}let Z={[Fhe]:0,[Uhe]:1,[zhe]:768,[RW]:770,[Yhe]:776,[jhe]:774,[Vhe]:772,[Ghe]:769,[BW]:771,[Whe]:775,[Hhe]:773};function Q(e,i,n,r,o,s,a,l){if(e!==Nr){if(!1===y&&(G(3042),y=!0),e===EO)o=o||i,s=s||n,a=a||r,(i!==_||o!==E)&&(t.blendEquationSeparate(K[i],K[o]),_=i,E=o),(n!==b||r!==M||s!==w||a!==A)&&(t.blendFuncSeparate(Z[n],Z[r],Z[s],Z[a]),b=n,M=r,w=s,A=a),x=e,S=!1;else if(e!==x||l!==S){if((_!==cg||E!==cg)&&(t.blendEquation(32774),_=cg,E=cg),l)switch(e){case mg:t.blendFuncSeparate(1,771,1,771);break;case rj:t.blendFunc(1,1);break;case sj:t.blendFuncSeparate(0,769,0,1);break;case UE:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case mg:t.blendFuncSeparate(770,771,1,771);break;case rj:t.blendFunc(770,1);break;case sj:t.blendFuncSeparate(0,769,0,1);break;case UE:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}b=null,M=null,w=null,A=null,x=e,S=l}}else!0===y&&(W(3042),y=!1)}function J(t,e){t.side===Dr?W(2884):G(2884);let i=t.side===_s;e&&(i=!i),$(i),t.blending===mg&&!1===t.transparent?Q(Nr):Q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),l.setFunc(t.depthFunc),l.setTest(t.depthTest),l.setMask(t.depthWrite),a.setMask(t.colorWrite);let n=t.stencilWrite;h.setTest(n),n&&(h.setMask(t.stencilWriteMask),h.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),h.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),it(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?G(32926):W(32926)}function $(e){T!==e&&(e?t.frontFace(2304):t.frontFace(2305),T=e)}function tt(e){e!==Nhe?(G(2884),e!==C&&(e===ij?t.cullFace(1029):e===Rhe?t.cullFace(1028):t.cullFace(1032))):W(2884),C=e}function et(e){e!==P&&(N&&t.lineWidth(e),P=e)}function it(e,i,n){e?(G(32823),(I!==i||L!==n)&&(t.polygonOffset(i,n),I=i,L=n)):W(32823)}function nt(t){t?G(3089):W(3089)}function rt(e){void 0===e&&(e=33984+O-1),q!==e&&(t.activeTexture(e),q=e)}function ot(e,i,n){void 0===n&&(n=null===q?33984+O-1:q);let r=B[n];void 0===r&&(r={type:void 0,texture:void 0},B[n]=r),(r.type!==e||r.texture!==i)&&(q!==n&&(t.activeTexture(n),q=n),t.bindTexture(e,i||j[e]),r.type=e,r.texture=i)}function st(){let e=B[q];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function at(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function lt(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ut(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ht(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ct(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function pt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function dt(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function ft(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function gt(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function mt(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function vt(e){!1===U.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),U.copy(e))}function yt(e){!1===z.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),z.copy(e))}function xt(e,i){let n=p.get(i);void 0===n&&(n=new WeakMap,p.set(i,n));let r=n.get(e);void 0===r&&(r=t.getUniformBlockIndex(i,e.name),n.set(e,r))}function _t(e,i){let n=p.get(i).get(e);c.get(i)!==n&&(t.uniformBlockBinding(i,n,e.__bindingPointIndex),c.set(i,n))}function bt(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===n&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),d={},q=null,B={},f={},g=new WeakMap,m=[],v=null,y=!1,x=null,_=null,b=null,M=null,E=null,w=null,A=null,S=!1,T=null,C=null,P=null,I=null,L=null,U.set(0,0,t.canvas.width,t.canvas.height),z.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),h.reset()}return u(Q,"setBlending"),u(J,"setMaterial"),u($,"setFlipSided"),u(tt,"setCullFace"),u(et,"setLineWidth"),u(it,"setPolygonOffset"),u(nt,"setScissorTest"),u(rt,"activeTexture"),u(ot,"bindTexture"),u(st,"unbindTexture"),u(at,"compressedTexImage2D"),u(lt,"compressedTexImage3D"),u(ut,"texSubImage2D"),u(ht,"texSubImage3D"),u(ct,"compressedTexSubImage2D"),u(pt,"compressedTexSubImage3D"),u(dt,"texStorage2D"),u(ft,"texStorage3D"),u(gt,"texImage2D"),u(mt,"texImage3D"),u(vt,"scissor"),u(yt,"viewport"),u(xt,"updateUBOMapping"),u(_t,"uniformBlockBinding"),u(bt,"reset"),{buffers:{color:a,depth:l,stencil:h},enable:G,disable:W,bindFramebuffer:H,drawBuffers:Y,useProgram:X,setBlending:Q,setMaterial:J,setFlipSided:$,setCullFace:tt,setLineWidth:et,setPolygonOffset:it,setScissorTest:nt,activeTexture:rt,bindTexture:ot,unbindTexture:st,compressedTexImage2D:at,compressedTexImage3D:lt,texImage2D:gt,texImage3D:mt,updateUBOMapping:xt,uniformBlockBinding:_t,texStorage2D:dt,texStorage3D:ft,texSubImage2D:ut,texSubImage3D:ht,compressedTexSubImage2D:ct,compressedTexSubImage3D:pt,scissor:vt,viewport:yt,reset:bt}}function x0e(t,e,i,n,r,o,s){let a,l=r.isWebGL2,h=r.maxTextures,c=r.maxCubemapSize,p=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap,v=new WeakMap,y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function x(t,e){return y?new OffscreenCanvas(t,e):bx("canvas")}function _(t,e,i,n){let r=1;if((t.width>n||t.height>n)&&(r=n/Math.max(t.width,t.height)),r<1||!0===e){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let n=e?UW:Math.floor,o=n(r*t.width),s=n(r*t.height);void 0===a&&(a=x(o,s));let l=i?x(o,s):a;return l.width=o,l.height=s,l.getContext("2d").drawImage(t,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+s+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function b(t){return Y6(t.width)&&Y6(t.height)}function M(t){return!l&&(t.wrapS!==ca||t.wrapT!==ca||t.minFilter!==ui&&t.minFilter!==wi)}function E(t,e){return t.generateMipmaps&&e&&t.minFilter!==ui&&t.minFilter!==wi}function w(e){t.generateMipmap(e)}function A(i,n,r,o,s=!1){if(!1===l)return n;if(null!==i){if(void 0!==t[i])return t[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let a=n;return 6403===n&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),33319===n&&(5126===r&&(a=33328),5131===r&&(a=33327),5121===r&&(a=33323)),6408===n&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=o===ai&&!1===s?35907:32856),32819===r&&(a=32854),32820===r&&(a=32855)),(33325===a||33326===a||33327===a||33328===a||34842===a||34836===a)&&e.get("EXT_color_buffer_float"),a}function S(t,e,i){return!0===E(t,i)||t.isFramebufferTexture&&t.minFilter!==ui&&t.minFilter!==wi?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function T(t){return t===ui||t===zE||t===cx?9728:9729}function C(t){let e=t.target;e.removeEventListener("dispose",C),I(e),e.isVideoTexture&&m.delete(e)}function P(t){let e=t.target;e.removeEventListener("dispose",P),O(e)}function I(t){let e=n.get(t);if(void 0===e.__webglInit)return;let i=t.source,r=v.get(i);if(r){let n=r[e.__cacheKey];n.usedTimes--,0===n.usedTimes&&L(t),0===Object.keys(r).length&&v.delete(i)}n.remove(t)}function L(e){let i=n.get(e);t.deleteTexture(i.__webglTexture);let r=e.source;delete v.get(r)[i.__cacheKey],s.memory.textures--}function O(e){let i=e.texture,r=n.get(e),o=n.get(i);if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),s.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else{if(t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let e=0;e<r.__webglColorRenderbuffer.length;e++)r.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(r.__webglColorRenderbuffer[e]);r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(e.isWebGLMultipleRenderTargets)for(let e=0,r=i.length;e<r;e++){let r=n.get(i[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),s.memory.textures--),n.remove(i[e])}n.remove(i),n.remove(e)}u(x,"createCanvas"),u(_,"resizeImage"),u(b,"isPowerOfTwo$1"),u(M,"textureNeedsPowerOfTwo"),u(E,"textureNeedsGenerateMipmaps"),u(w,"generateMipmap"),u(A,"getInternalFormat"),u(S,"getMipLevels"),u(T,"filterFallback"),u(C,"onTextureDispose"),u(P,"onRenderTargetDispose"),u(I,"deallocateTexture"),u(L,"deleteTexture"),u(O,"deallocateRenderTarget");let N=0;function D(){N=0}function R(){let t=N;return t>=h&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+h),N+=1,t}function q(t){let e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}function B(t,e){let r=n.get(t);if(t.isVideoTexture&&nt(t),!1===t.isRenderTargetTexture&&t.version>0&&r.__version!==t.version){let i=t.image;if(null===i)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==i.complete)return void W(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(3553,r.__webglTexture,33984+e)}function k(t,e){let r=n.get(t);t.version>0&&r.__version!==t.version?W(r,t,e):i.bindTexture(35866,r.__webglTexture,33984+e)}function F(t,e){let r=n.get(t);t.version>0&&r.__version!==t.version?W(r,t,e):i.bindTexture(32879,r.__webglTexture,33984+e)}function U(t,e){let r=n.get(t);t.version>0&&r.__version!==t.version?H(r,t,e):i.bindTexture(34067,r.__webglTexture,33984+e)}u(D,"resetTextureUnits"),u(R,"allocateTextureUnit"),u(q,"getTextureCacheKey"),u(B,"setTexture2D"),u(k,"setTexture2DArray"),u(F,"setTexture3D"),u(U,"setTextureCube");let z={[wr]:10497,[ca]:33071,[vx]:33648},V={[ui]:9728,[zE]:9984,[cx]:9986,[wi]:9729,[SO]:9985,[Dp]:9987};function j(i,o,s){if(s?(t.texParameteri(i,10242,z[o.wrapS]),t.texParameteri(i,10243,z[o.wrapT]),(32879===i||35866===i)&&t.texParameteri(i,32882,z[o.wrapR]),t.texParameteri(i,10240,V[o.magFilter]),t.texParameteri(i,10241,V[o.minFilter])):(t.texParameteri(i,10242,33071),t.texParameteri(i,10243,33071),(32879===i||35866===i)&&t.texParameteri(i,32882,33071),(o.wrapS!==ca||o.wrapT!==ca)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(i,10240,T(o.magFilter)),t.texParameteri(i,10241,T(o.minFilter)),o.minFilter!==ui&&o.minFilter!==wi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){let s=e.get("EXT_texture_filter_anisotropic");if(o.magFilter===ui||o.minFilter!==cx&&o.minFilter!==Dp||o.type===Au&&!1===e.has("OES_texture_float_linear")||!1===l&&o.type===Np&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(t.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function G(e,i){let n=!1;void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",C));let r=i.source,o=v.get(r);void 0===o&&(o={},v.set(r,o));let a=q(i);if(a!==e.__cacheKey){void 0===o[a]&&(o[a]={texture:t.createTexture(),usedTimes:0},s.memory.textures++,n=!0),o[a].usedTimes++;let r=o[e.__cacheKey];void 0!==r&&(o[e.__cacheKey].usedTimes--,0===r.usedTimes&&L(i)),e.__cacheKey=a,e.__webglTexture=o[a].texture}return n}function W(e,r,s){let a=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(a=35866),r.isData3DTexture&&(a=32879);let u=G(e,r),h=r.source;i.bindTexture(a,e.__webglTexture,33984+s);let c=n.get(h);if(h.version!==c.__version||!0===u){i.activeTexture(33984+s),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);let e=M(r)&&!1===b(r.image),n=_(r.image,e,!1,p);n=rt(r,n);let d=b(n)||l,f=o.convert(r.format,r.encoding),g=o.convert(r.type),m=A(r.internalFormat,f,g,r.encoding,r.isVideoTexture);j(a,r,d);let v,y=r.mipmaps,x=l&&!0!==r.isVideoTexture,T=void 0===c.__version||!0===u,C=S(r,n,d);if(r.isDepthTexture)m=6402,l?m=r.type===Au?36012:r.type===il?33190:r.type===Xh?35056:33189:r.type===Au&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Zh&&6402===m&&r.type!==kW&&r.type!==il&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=il,g=o.convert(r.type)),r.format===Qh&&6402===m&&(m=34041,r.type!==Xh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Xh,g=o.convert(r.type))),T&&(x?i.texStorage2D(3553,1,m,n.width,n.height):i.texImage2D(3553,0,m,n.width,n.height,0,f,g,null));else if(r.isDataTexture)if(y.length>0&&d){x&&T&&i.texStorage2D(3553,C,m,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)v=y[t],x?i.texSubImage2D(3553,t,0,0,v.width,v.height,f,g,v.data):i.texImage2D(3553,t,m,v.width,v.height,0,f,g,v.data);r.generateMipmaps=!1}else x?(T&&i.texStorage2D(3553,C,m,n.width,n.height),i.texSubImage2D(3553,0,0,0,n.width,n.height,f,g,n.data)):i.texImage2D(3553,0,m,n.width,n.height,0,f,g,n.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){x&&T&&i.texStorage3D(35866,C,m,y[0].width,y[0].height,n.depth);for(let t=0,e=y.length;t<e;t++)v=y[t],r.format!==Gs?null!==f?x?i.compressedTexSubImage3D(35866,t,0,0,0,v.width,v.height,n.depth,f,v.data,0,0):i.compressedTexImage3D(35866,t,m,v.width,v.height,n.depth,0,v.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?i.texSubImage3D(35866,t,0,0,0,v.width,v.height,n.depth,f,g,v.data):i.texImage3D(35866,t,m,v.width,v.height,n.depth,0,f,g,v.data)}else{x&&T&&i.texStorage2D(3553,C,m,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)v=y[t],r.format!==Gs?null!==f?x?i.compressedTexSubImage2D(3553,t,0,0,v.width,v.height,f,v.data):i.compressedTexImage2D(3553,t,m,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?i.texSubImage2D(3553,t,0,0,v.width,v.height,f,g,v.data):i.texImage2D(3553,t,m,v.width,v.height,0,f,g,v.data)}else if(r.isDataArrayTexture)x?(T&&i.texStorage3D(35866,C,m,n.width,n.height,n.depth),i.texSubImage3D(35866,0,0,0,0,n.width,n.height,n.depth,f,g,n.data)):i.texImage3D(35866,0,m,n.width,n.height,n.depth,0,f,g,n.data);else if(r.isData3DTexture)x?(T&&i.texStorage3D(32879,C,m,n.width,n.height,n.depth),i.texSubImage3D(32879,0,0,0,0,n.width,n.height,n.depth,f,g,n.data)):i.texImage3D(32879,0,m,n.width,n.height,n.depth,0,f,g,n.data);else if(r.isFramebufferTexture){if(T)if(x)i.texStorage2D(3553,C,m,n.width,n.height);else{let t=n.width,e=n.height;for(let n=0;n<C;n++)i.texImage2D(3553,n,m,t,e,0,f,g,null),t>>=1,e>>=1}}else if(y.length>0&&d){x&&T&&i.texStorage2D(3553,C,m,y[0].width,y[0].height);for(let t=0,e=y.length;t<e;t++)v=y[t],x?i.texSubImage2D(3553,t,0,0,f,g,v):i.texImage2D(3553,t,m,f,g,v);r.generateMipmaps=!1}else x?(T&&i.texStorage2D(3553,C,m,n.width,n.height),i.texSubImage2D(3553,0,0,0,f,g,n)):i.texImage2D(3553,0,m,f,g,n);E(r,d)&&w(a),c.__version=h.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function H(e,r,s){if(6!==r.image.length)return;let a=G(e,r),u=r.source;i.bindTexture(34067,e.__webglTexture,33984+s);let h=n.get(u);if(u.version!==h.__version||!0===a){i.activeTexture(33984+s),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);let e=r.isCompressedTexture||r.image[0].isCompressedTexture,n=r.image[0]&&r.image[0].isDataTexture,p=[];for(let t=0;t<6;t++)p[t]=e||n?n?r.image[t].image:r.image[t]:_(r.image[t],!1,!0,c),p[t]=rt(r,p[t]);let d,f=p[0],g=b(f)||l,m=o.convert(r.format,r.encoding),v=o.convert(r.type),y=A(r.internalFormat,m,v,r.encoding),x=l&&!0!==r.isVideoTexture,M=void 0===h.__version||!0===a,T=S(r,f,g);if(j(34067,r,g),e){x&&M&&i.texStorage2D(34067,T,y,f.width,f.height);for(let t=0;t<6;t++){d=p[t].mipmaps;for(let e=0;e<d.length;e++){let n=d[e];r.format!==Gs?null!==m?x?i.compressedTexSubImage2D(34069+t,e,0,0,n.width,n.height,m,n.data):i.compressedTexImage2D(34069+t,e,y,n.width,n.height,0,n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):x?i.texSubImage2D(34069+t,e,0,0,n.width,n.height,m,v,n.data):i.texImage2D(34069+t,e,y,n.width,n.height,0,m,v,n.data)}}}else{d=r.mipmaps,x&&M&&(d.length>0&&T++,i.texStorage2D(34067,T,y,p[0].width,p[0].height));for(let t=0;t<6;t++)if(n){x?i.texSubImage2D(34069+t,0,0,0,p[t].width,p[t].height,m,v,p[t].data):i.texImage2D(34069+t,0,y,p[t].width,p[t].height,0,m,v,p[t].data);for(let e=0;e<d.length;e++){let n=d[e].image[t].image;x?i.texSubImage2D(34069+t,e+1,0,0,n.width,n.height,m,v,n.data):i.texImage2D(34069+t,e+1,y,n.width,n.height,0,m,v,n.data)}}else{x?i.texSubImage2D(34069+t,0,0,0,m,v,p[t]):i.texImage2D(34069+t,0,y,m,v,p[t]);for(let e=0;e<d.length;e++){let n=d[e];x?i.texSubImage2D(34069+t,e+1,0,0,m,v,n.image[t]):i.texImage2D(34069+t,e+1,y,m,v,n.image[t])}}}E(r,g)&&w(34067),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function Y(e,r,s,a,l){let u=o.convert(s.format,s.encoding),h=o.convert(s.type),c=A(s.internalFormat,u,h,s.encoding);n.get(r).__hasExternalTextures||(32879===l||35866===l?i.texImage3D(l,0,c,r.width,r.height,r.depth,0,u,h,null):i.texImage2D(l,0,c,r.width,r.height,0,u,h,null)),i.bindFramebuffer(36160,e),it(r)?f.framebufferTexture2DMultisampleEXT(36160,a,l,n.get(s).__webglTexture,0,et(r)):(3553===l||l>=34069&&l<=34074)&&t.framebufferTexture2D(36160,a,l,n.get(s).__webglTexture,0),i.bindFramebuffer(36160,null)}function X(e,i,n){if(t.bindRenderbuffer(36161,e),i.depthBuffer&&!i.stencilBuffer){let r=33189;if(n||it(i)){let e=i.depthTexture;e&&e.isDepthTexture&&(e.type===Au?r=36012:e.type===il&&(r=33190));let n=et(i);it(i)?f.renderbufferStorageMultisampleEXT(36161,n,r,i.width,i.height):t.renderbufferStorageMultisample(36161,n,r,i.width,i.height)}else t.renderbufferStorage(36161,r,i.width,i.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(i.depthBuffer&&i.stencilBuffer){let r=et(i);n&&!1===it(i)?t.renderbufferStorageMultisample(36161,r,35056,i.width,i.height):it(i)?f.renderbufferStorageMultisampleEXT(36161,r,35056,i.width,i.height):t.renderbufferStorage(36161,34041,i.width,i.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{let e=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let r=0;r<e.length;r++){let s=e[r],a=o.convert(s.format,s.encoding),l=o.convert(s.type),u=A(s.internalFormat,a,l,s.encoding),h=et(i);n&&!1===it(i)?t.renderbufferStorageMultisample(36161,h,u,i.width,i.height):it(i)?f.renderbufferStorageMultisampleEXT(36161,h,u,i.width,i.height):t.renderbufferStorage(36161,u,i.width,i.height)}}t.bindRenderbuffer(36161,null)}function K(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(r.depthTexture).__webglTexture||r.depthTexture.image.width!==r.width||r.depthTexture.image.height!==r.height)&&(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),B(r.depthTexture,0);let o=n.get(r.depthTexture).__webglTexture,s=et(r);if(r.depthTexture.format===Zh)it(r)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,s):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(r.depthTexture.format!==Qh)throw new Error("Unknown depthTexture format");it(r)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,s):t.framebufferTexture2D(36160,33306,3553,o,0)}}function Z(e){let r=n.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");K(r.__webglFramebuffer,e)}else if(o){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(36160,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=t.createRenderbuffer(),X(r.__webglDepthbuffer[n],e,!1)}else i.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),X(r.__webglDepthbuffer,e,!1);i.bindFramebuffer(36160,null)}function Q(t,e,i){let r=n.get(t);void 0!==e&&Y(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==i&&Z(t)}function J(e){let a=e.texture,u=n.get(e),h=n.get(a);e.addEventListener("dispose",P),!0!==e.isWebGLMultipleRenderTargets&&(void 0===h.__webglTexture&&(h.__webglTexture=t.createTexture()),h.__version=a.version,s.memory.textures++);let c=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultipleRenderTargets,d=b(e)||l;if(c){u.__webglFramebuffer=[];for(let e=0;e<6;e++)u.__webglFramebuffer[e]=t.createFramebuffer()}else{if(u.__webglFramebuffer=t.createFramebuffer(),p)if(r.drawBuffers){let i=e.texture;for(let e=0,r=i.length;e<r;e++){let r=n.get(i[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&e.samples>0&&!1===it(e)){let n=p?a:[a];u.__webglMultisampledFramebuffer=t.createFramebuffer(),u.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,u.__webglMultisampledFramebuffer);for(let i=0;i<n.length;i++){let r=n[i];u.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(36161,u.__webglColorRenderbuffer[i]);let s=o.convert(r.format,r.encoding),a=o.convert(r.type),l=A(r.internalFormat,s,a,r.encoding,!0===e.isXRRenderTarget),h=et(e);t.renderbufferStorageMultisample(36161,h,l,e.width,e.height),t.framebufferRenderbuffer(36160,36064+i,36161,u.__webglColorRenderbuffer[i])}t.bindRenderbuffer(36161,null),e.depthBuffer&&(u.__webglDepthRenderbuffer=t.createRenderbuffer(),X(u.__webglDepthRenderbuffer,e,!0)),i.bindFramebuffer(36160,null)}}if(c){i.bindTexture(34067,h.__webglTexture),j(34067,a,d);for(let t=0;t<6;t++)Y(u.__webglFramebuffer[t],e,a,36064,34069+t);E(a,d)&&w(34067),i.unbindTexture()}else if(p){let t=e.texture;for(let r=0,o=t.length;r<o;r++){let o=t[r],s=n.get(o);i.bindTexture(3553,s.__webglTexture),j(3553,o,d),Y(u.__webglFramebuffer,e,o,36064+r,3553),E(o,d)&&w(3553)}i.unbindTexture()}else{let t=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(l?t=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(t,h.__webglTexture),j(t,a,d),Y(u.__webglFramebuffer,e,a,36064,t),E(a,d)&&w(t),i.unbindTexture()}e.depthBuffer&&Z(e)}function $(t){let e=b(t)||l,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,s=r.length;o<s;o++){let s=r[o];if(E(s,e)){let e=t.isWebGLCubeRenderTarget?34067:3553,r=n.get(s).__webglTexture;i.bindTexture(e,r),w(e),i.unbindTexture()}}}function tt(e){if(l&&e.samples>0&&!1===it(e)){let r=e.isWebGLMultipleRenderTargets?e.texture:[e.texture],o=e.width,s=e.height,a=16384,l=[],u=e.stencilBuffer?33306:36096,h=n.get(e),c=!0===e.isWebGLMultipleRenderTargets;if(c)for(let e=0;e<r.length;e++)i.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,null),i.bindFramebuffer(36160,h.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,null,0);i.bindFramebuffer(36008,h.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,h.__webglFramebuffer);for(let i=0;i<r.length;i++){l.push(36064+i),e.depthBuffer&&l.push(u);let p=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===p&&(e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024)),c&&t.framebufferRenderbuffer(36008,36064,36161,h.__webglColorRenderbuffer[i]),!0===p&&(t.invalidateFramebuffer(36008,[u]),t.invalidateFramebuffer(36009,[u])),c){let e=n.get(r[i]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,e,0)}t.blitFramebuffer(0,0,o,s,0,0,o,s,a,9728),g&&t.invalidateFramebuffer(36008,l)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),c)for(let e=0;e<r.length;e++){i.bindFramebuffer(36160,h.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+e,36161,h.__webglColorRenderbuffer[e]);let o=n.get(r[e]).__webglTexture;i.bindFramebuffer(36160,h.__webglFramebuffer),t.framebufferTexture2D(36009,36064+e,3553,o,0)}i.bindFramebuffer(36009,h.__webglMultisampledFramebuffer)}}function et(t){return Math.min(d,t.samples)}function it(t){let i=n.get(t);return l&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function nt(t){let e=s.render.frame;m.get(t)!==e&&(m.set(t,e),t.update())}function rt(t,i){let n=t.encoding,r=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===W6||n!==rl&&(n===ai?!1===l?!0===e.has("EXT_sRGB")&&r===Gs?(t.format=W6,t.minFilter=wi,t.generateMipmaps=!1):i=GE.sRGBToLinear(i):(r!==Gs||o!==Mr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),i}u(j,"setTextureParameters"),u(G,"initTexture"),u(W,"uploadTexture"),u(H,"uploadCubeTexture"),u(Y,"setupFrameBufferTexture"),u(X,"setupRenderBufferStorage"),u(K,"setupDepthTexture"),u(Z,"setupDepthRenderbuffer"),u(Q,"rebindTextures"),u(J,"setupRenderTarget"),u($,"updateRenderTargetMipmap"),u(tt,"updateMultisampleRenderTarget"),u(et,"getRenderTargetSamples"),u(it,"useMultisampledRTT"),u(nt,"updateVideoTexture"),u(rt,"verifyColorSpace"),this.allocateTextureUnit=R,this.resetTextureUnits=D,this.setTexture2D=B,this.setTexture2DArray=k,this.setTexture3D=F,this.setTextureCube=U,this.rebindTextures=Q,this.setupRenderTarget=J,this.updateRenderTargetMipmap=$,this.updateMultisampleRenderTarget=tt,this.setupDepthRenderbuffer=Z,this.setupFrameBufferTexture=Y,this.useMultisampledRTT=it}function b0e(t,e,i){let n=i.isWebGL2;function r(i,r=null){let o;if(i===Mr)return 5121;if(i===hfe)return 32819;if(i===ffe)return 32820;if(i===lfe)return 5120;if(i===ufe)return 5122;if(i===kW)return 5123;if(i===cfe)return 5124;if(i===il)return 5125;if(i===Au)return 5126;if(i===Np)return n?5131:(o=e.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(i===pfe)return 6406;if(i===Gs)return 6408;if(i===dfe)return 6409;if(i===mfe)return 6410;if(i===Zh)return 6402;if(i===Qh)return 34041;if(i===W6)return o=e.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(i===AO)return 6403;if(i===gfe)return 36244;if(i===vfe)return 33319;if(i===yfe)return 33320;if(i===xfe)return 36249;if(i===u6||i===c6||i===h6||i===f6)if(r===ai){if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(i===u6)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===c6)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===h6)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===f6)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=e.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(i===u6)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===c6)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===h6)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===f6)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===lj||i===uj||i===cj||i===hj){if(o=e.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(i===lj)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===uj)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===cj)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===hj)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===bfe)return o=e.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===fj||i===pj){if(o=e.get("WEBGL_compressed_texture_etc"),null===o)return null;if(i===fj)return r===ai?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===pj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(i===dj||i===mj||i===gj||i===vj||i===yj||i===xj||i===bj||i===_j||i===wj||i===Mj||i===Ej||i===Tj||i===Sj||i===Aj){if(o=e.get("WEBGL_compressed_texture_astc"),null===o)return null;if(i===dj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===mj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===gj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===vj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===yj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===xj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===bj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===_j)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===wj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Mj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Ej)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Tj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Sj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Aj)return r===ai?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===p6){if(o=e.get("EXT_texture_compression_bptc"),null===o)return null;if(i===p6)return r===ai?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(i===_fe||i===Cj||i===Pj||i===Ij){if(o=e.get("EXT_texture_compression_rgtc"),null===o)return null;if(i===p6)return o.COMPRESSED_RED_RGTC1_EXT;if(i===Cj)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Pj)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Ij)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===Xh?n?34042:(o=e.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==t[i]?t[i]:null}return u(r,"convert"),{convert:r}}u(v0e,"WebGLShadowMap"),u(y0e,"WebGLState"),u(x0e,"WebGLTextures"),u(b0e,"WebGLUtils");var xL=class extends as{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}};u(xL,"ArrayCamera");var iO=xL,bL=class extends ci{constructor(){super(),this.isGroup=!0,this.type="Group"}};u(bL,"Group");var lo=bL,_0e={type:"move"},_L=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new lo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new lo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new lo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let n=null,r=null,o=null,s=this._targetRay,a=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(l&&t.hand){o=!0;for(let n of t.hand.values()){let t=e.getJointPose(n,i),r=this._getHandJoint(l,n);null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}let n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=n.position.distanceTo(r.position),a=.02,u=.005;l.inputState.pinching&&s>a+u?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&s<=a-u&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(r=e.getPose(t.gripSpace,i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(n=e.getPose(t.targetRaySpace,i),null===n&&null!==r&&(n=r),null!==n&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(_0e)))}return null!==s&&(s.visible=null!==n),null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){let i=new lo;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}};u(_L,"WebXRController");var px=_L,wL=class extends Er{constructor(t,e,i,n,r,o,s,a,l,u){if((u=void 0!==u?u:Zh)!==Zh&&u!==Qh)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Zh&&(i=il),void 0===i&&u===Qh&&(i=Xh),super(null,n,r,o,s,a,u,i,l),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==s?s:ui,this.minFilter=void 0!==a?a:ui,this.flipY=!1,this.generateMipmaps=!1}};u(wL,"DepthTexture");var qc=wL,ML=class extends Eo{constructor(t,e){super();let i=this,n=null,r=1,o=null,s="local-floor",a=1,l=null,h=null,c=null,p=null,d=null,f=null,g=e.getContextAttributes(),m=null,v=null,y=[],x=[],_=new Set,b=new Map,M=new as;M.layers.enable(1),M.viewport=new Fi;let E=new as;E.layers.enable(2),E.viewport=new Fi;let w=[M,E],A=new iO;A.layers.enable(1),A.layers.enable(2);let S=null,T=null;function C(t){let e=x.indexOf(t.inputSource);if(-1===e)return;let i=y[e];void 0!==i&&i.dispatchEvent({type:t.type,data:t.inputSource})}function P(){n.removeEventListener("select",C),n.removeEventListener("selectstart",C),n.removeEventListener("selectend",C),n.removeEventListener("squeeze",C),n.removeEventListener("squeezestart",C),n.removeEventListener("squeezeend",C),n.removeEventListener("end",P),n.removeEventListener("inputsourceschange",I);for(let t=0;t<y.length;t++){let e=x[t];null!==e&&(x[t]=null,y[t].disconnect(e))}S=null,T=null,t.setRenderTarget(m),d=null,p=null,c=null,n=null,v=null,k.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function I(t){for(let e=0;e<t.removed.length;e++){let i=t.removed[e],n=x.indexOf(i);n>=0&&(x[n]=null,y[n].disconnect(i))}for(let e=0;e<t.added.length;e++){let i=t.added[e],n=x.indexOf(i);if(-1===n){for(let t=0;t<y.length;t++){if(t>=x.length){x.push(i),n=t;break}if(null===x[t]){x[t]=i,n=t;break}}if(-1===n)break}let r=y[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=y[t];return void 0===e&&(e=new px,y[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=y[t];return void 0===e&&(e=new px,y[t]=e),e.getGripSpace()},this.getHand=function(t){let e=y[t];return void 0===e&&(e=new px,y[t]=e),e.getHandSpace()},u(C,"onSessionEvent"),u(P,"onSessionEnd"),this.setFramebufferScaleFactor=function(t){r=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){s=t,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(t){l=t},this.getBaseLayer=function(){return null!==p?p:d},this.getBinding=function(){return c},this.getFrame=function(){return f},this.getSession=function(){return n},this.setSession=async function(u){if(n=u,null!==n){if(m=t.getRenderTarget(),n.addEventListener("select",C),n.addEventListener("selectstart",C),n.addEventListener("selectend",C),n.addEventListener("squeeze",C),n.addEventListener("squeezestart",C),n.addEventListener("squeezeend",C),n.addEventListener("end",P),n.addEventListener("inputsourceschange",I),!0!==g.xrCompatible&&await e.makeXRCompatible(),void 0===n.renderState.layers||!1===t.capabilities.isWebGL2){let i={antialias:void 0!==n.renderState.layers||g.antialias,alpha:g.alpha,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(n,e,i),n.updateRenderState({baseLayer:d}),v=new ti(d.framebufferWidth,d.framebufferHeight,{format:Gs,type:Mr,encoding:t.outputEncoding,stencilBuffer:g.stencil})}else{let i=null,o=null,s=null;g.depth&&(s=g.stencil?35056:33190,i=g.stencil?Qh:Zh,o=g.stencil?Xh:il);let a={colorFormat:32856,depthFormat:s,scaleFactor:r};c=new XRWebGLBinding(n,e),p=c.createProjectionLayer(a),n.updateRenderState({layers:[p]}),v=new ti(p.textureWidth,p.textureHeight,{format:Gs,type:Mr,depthTexture:new qc(p.textureWidth,p.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:g.stencil,encoding:t.outputEncoding,samples:g.antialias?4:0}),t.properties.get(v).__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await n.requestReferenceSpace(s),k.setContext(n),k.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},u(I,"onInputSourcesChange");let L=new K,O=new K;function N(t,e,i){L.setFromMatrixPosition(e.matrixWorld),O.setFromMatrixPosition(i.matrixWorld);let n=L.distanceTo(O),r=e.projectionMatrix.elements,o=i.projectionMatrix.elements,s=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],h=(r[8]-1)/r[0],c=(o[8]+1)/o[0],p=s*h,d=s*c,f=n/(-h+c),g=f*-h;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(g),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();let m=s+f,v=a+f,y=p-g,x=d+(n-g),_=l*a/v*m,b=u*a/v*m;t.projectionMatrix.makePerspective(y,x,_,b,m,v),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}function D(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}function R(t,e,i){null===i?t.matrix.copy(e.matrixWorld):(t.matrix.copy(i.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0);let n=t.children;for(let t=0,e=n.length;t<e;t++)n[t].updateMatrixWorld(!0);t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*xx*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}u(N,"setProjectionFromUnion"),u(D,"updateCamera"),this.updateCamera=function(t){if(null===n)return;A.near=E.near=M.near=t.near,A.far=E.far=M.far=t.far,(S!==A.near||T!==A.far)&&(n.updateRenderState({depthNear:A.near,depthFar:A.far}),S=A.near,T=A.far);let e=t.parent,i=A.cameras;D(A,e);for(let t=0;t<i.length;t++)D(i[t],e);2===i.length?N(A,M,E):A.projectionMatrix.copy(M.projectionMatrix),R(t,A,e)},u(R,"updateUserCamera"),this.getCamera=function(){return A},this.getFoveation=function(){if(null!==p||null!==d)return a},this.setFoveation=function(t){a=t,null!==p&&(p.fixedFoveation=t),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=t)},this.getPlanes=function(){return _};let q=null;function B(e,n){if(h=n.getViewerPose(l||o),f=n,null!==h){let e=h.views;null!==d&&(t.setRenderTargetFramebuffer(v,d.framebuffer),t.setRenderTarget(v));let i=!1;e.length!==A.cameras.length&&(A.cameras.length=0,i=!0);for(let n=0;n<e.length;n++){let r=e[n],o=null;if(null!==d)o=d.getViewport(r);else{let e=c.getViewSubImage(p,r);o=e.viewport,0===n&&(t.setRenderTargetTextures(v,e.colorTexture,p.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(v))}let s=w[n];void 0===s&&(s=new as,s.layers.enable(n),s.viewport=new Fi,w[n]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===n&&(A.matrix.copy(s.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===i&&A.cameras.push(s)}}for(let t=0;t<y.length;t++){let e=x[t],i=y[t];null!==e&&void 0!==i&&i.update(e,n,l||o)}if(q&&q(e,n),n.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});let t=null;for(let e of _)n.detectedPlanes.has(e)||(null===t&&(t=[]),t.push(e));if(null!==t)for(let e of t)_.delete(e),b.delete(e),i.dispatchEvent({type:"planeremoved",data:e});for(let t of n.detectedPlanes)if(_.has(t)){let e=b.get(t);t.lastChangedTime>e&&(b.set(t,t.lastChangedTime),i.dispatchEvent({type:"planechanged",data:t}))}else _.add(t),b.set(t,n.lastChangedTime),i.dispatchEvent({type:"planeadded",data:t})}f=null}u(B,"onAnimationFrame");let k=new HW;k.setAnimationLoop(B),this.setAnimationLoop=function(t){q=t},this.dispose=function(){}}};u(ML,"WebXRManager");var rO=ML;function w0e(t,e){function i(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function n(e,i){i.color.getRGB(e.fogColor.value,VW(t)),i.isFog?(e.fogNear.value=i.near,e.fogFar.value=i.far):i.isFogExp2&&(e.fogDensity.value=i.density)}function r(t,e,i,n,r){e.isMeshBasicMaterial||e.isMeshLambertMaterial?o(t,e):e.isMeshToonMaterial?(o(t,e),p(t,e)):e.isMeshPhongMaterial?(o(t,e),c(t,e)):e.isMeshStandardMaterial?(o(t,e),d(t,e),e.isMeshPhysicalMaterial&&f(t,e,r)):e.isMeshMatcapMaterial?(o(t,e),g(t,e)):e.isMeshDepthMaterial?o(t,e):e.isMeshDistanceMaterial?(o(t,e),m(t,e)):e.isMeshNormalMaterial?o(t,e):e.isLineBasicMaterial?(s(t,e),e.isLineDashedMaterial&&a(t,e)):e.isPointsMaterial?l(t,e,i,n):e.isSpriteMaterial?h(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function o(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map,i(r.map,n.mapTransform)),r.alphaMap&&(n.alphaMap.value=r.alphaMap,i(r.alphaMap,n.alphaMapTransform)),r.bumpMap&&(n.bumpMap.value=r.bumpMap,i(r.bumpMap,n.bumpMapTransform),n.bumpScale.value=r.bumpScale,r.side===_s&&(n.bumpScale.value*=-1)),r.normalMap&&(n.normalMap.value=r.normalMap,i(r.normalMap,n.normalMapTransform),n.normalScale.value.copy(r.normalScale),r.side===_s&&n.normalScale.value.negate()),r.displacementMap&&(n.displacementMap.value=r.displacementMap,i(r.displacementMap,n.displacementMapTransform),n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap,i(r.emissiveMap,n.emissiveMapTransform)),r.specularMap&&(n.specularMap.value=r.specularMap,i(r.specularMap,n.specularMapTransform)),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);let o=e.get(r).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;let e=!0===t.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*e,i(r.lightMap,n.lightMapTransform)}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity,i(r.aoMap,n.aoMapTransform))}function s(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform))}function a(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function l(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map,i(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function h(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}function c(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}function p(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function d(t,n){t.metalness.value=n.metalness,n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap,i(n.metalnessMap,t.metalnessMapTransform)),t.roughness.value=n.roughness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap,i(n.roughnessMap,t.roughnessMapTransform)),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}function f(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,i(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,i(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,i(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,i(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,i(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===_s&&t.clearcoatNormalScale.value.negate())),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,i(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,i(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,i(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,i(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,i(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,i(e.specularIntensityMap,t.specularIntensityMapTransform))}function g(t,e){e.matcap&&(t.matcap.value=e.matcap)}function m(t,i){let n=e.get(i).light;t.referencePosition.value.setFromMatrixPosition(n.matrixWorld),t.nearDistance.value=n.shadow.camera.near,t.farDistance.value=n.shadow.camera.far}return u(i,"refreshTransformUniform"),u(n,"refreshFogUniforms"),u(r,"refreshMaterialUniforms"),u(o,"refreshUniformsCommon"),u(s,"refreshUniformsLine"),u(a,"refreshUniformsDash"),u(l,"refreshUniformsPoints"),u(h,"refreshUniformsSprites"),u(c,"refreshUniformsPhong"),u(p,"refreshUniformsToon"),u(d,"refreshUniformsStandard"),u(f,"refreshUniformsPhysical"),u(g,"refreshUniformsMatcap"),u(m,"refreshUniformsDistance"),{refreshFogUniforms:n,refreshMaterialUniforms:r}}function M0e(t,e,i,n){let r={},o={},s=[],a=i.isWebGL2?t.getParameter(35375):0;function l(t,e){let i=e.program;n.uniformBlockBinding(t,i)}function h(t,i){let s=r[t.id];void 0===s&&(g(t),s=c(t),r[t.id]=s,t.addEventListener("dispose",v));let a=i.program;n.updateUBOMapping(t,a);let l=e.render.frame;o[t.id]!==l&&(d(t),o[t.id]=l)}function c(e){let i=p();e.__bindingPointIndex=i;let n=t.createBuffer(),r=e.__size,o=e.usage;return t.bindBuffer(35345,n),t.bufferData(35345,r,o),t.bindBuffer(35345,null),t.bindBufferBase(35345,i,n),n}function p(){for(let t=0;t<a;t++)if(-1===s.indexOf(t))return s.push(t),t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(e){let i=r[e.id],n=e.uniforms,o=e.__cache;t.bindBuffer(35345,i);for(let e=0,i=n.length;e<i;e++){let i=n[e];if(!0===f(i,e,o)){let e=i.__offset,n=Array.isArray(i.value)?i.value:[i.value],r=0;for(let o=0;o<n.length;o++){let s=n[o],a=m(s);"number"==typeof s?(i.__data[0]=s,t.bufferSubData(35345,e+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=s.elements[0],i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=s.elements[0],i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=s.elements[0]):(s.toArray(i.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,e,i.__data)}}t.bindBuffer(35345,null)}function f(t,e,i){let n=t.value;if(void 0===i[e]){if("number"==typeof n)i[e]=n;else{let t=Array.isArray(n)?n:[n],r=[];for(let e=0;e<t.length;e++)r.push(t[e].clone());i[e]=r}return!0}if("number"==typeof n){if(i[e]!==n)return i[e]=n,!0}else{let t=Array.isArray(i[e])?i[e]:[i[e]],r=Array.isArray(n)?n:[n];for(let e=0;e<t.length;e++){let i=t[e];if(!1===i.equals(r[e]))return i.copy(r[e]),!0}}return!1}function g(t){let e=t.uniforms,i=0,n=0;for(let t=0,r=e.length;t<r;t++){let r=e[t],o={boundary:0,storage:0},s=Array.isArray(r.value)?r.value:[r.value];for(let t=0,e=s.length;t<e;t++){let e=m(s[t]);o.boundary+=e.boundary,o.storage+=e.storage}if(r.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=i,t>0){n=i%16;let t=16-n;0!==n&&t-o.boundary<0&&(i+=16-n,r.__offset=i)}i+=o.storage}return n=i%16,n>0&&(i+=16-n),t.__size=i,t.__cache={},this}function m(t){let e={boundary:0,storage:0};return"number"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function v(e){let i=e.target;i.removeEventListener("dispose",v);let n=s.indexOf(i.__bindingPointIndex);s.splice(n,1),t.deleteBuffer(r[i.id]),delete r[i.id],delete o[i.id]}function y(){for(let e in r)t.deleteBuffer(r[e]);s=[],r={},o={}}return u(l,"bind"),u(h,"update"),u(c,"createBuffer"),u(p,"allocateBindingPointIndex"),u(d,"updateBufferData"),u(f,"hasUniformChanged"),u(g,"prepareUniformsGroup"),u(m,"getUniformSize"),u(v,"onUniformsGroupsDispose"),u(y,"dispose"),{bind:l,update:h,dispose:y}}function E0e(){let t=bx("canvas");return t.style.display="block",t}u(w0e,"WebGLMaterials"),u(M0e,"WebGLUniformsGroups"),u(E0e,"createCanvasElement");var EL=class{constructor(t={}){let e,{canvas:i=E0e(),context:n=null,depth:r=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:h=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:p=!1}=t;this.isWebGLRenderer=!0,e=null!==n?n.getContextAttributes().alpha:s;let d=null,f=null,g=[],m=[];this.domElement=i,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=rl,this.useLegacyLights=!0,this.toneMapping=Nc,this.toneMappingExposure=1;let v=this,y=!1,x=0,_=0,b=null,M=-1,E=null,w=new Fi,A=new Fi,S=null,T=i.width,C=i.height,P=1,I=null,L=null,O=new Fi(0,0,T,C),N=new Fi(0,0,T,C),D=!1,R=new kc,q=!1,B=!1,k=null,F=new Ot,U=new K,z={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function V(){return null===b?P:1}u(V,"getTargetPixelRatio");let j,G,W,H,Y,X,Z,Q,J,$,tt,et,it,nt,rt,ot,st,at,lt,ut,ht,ct,pt,dt,ft=n;function gt(t,e){for(let n=0;n<t.length;n++){let r=t[n],o=i.getContext(r,e);if(null!==o)return o}return null}u(gt,"getContext");try{let t={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:c,failIfMajorPerformanceCaveat:p};if("setAttribute"in i&&i.setAttribute("data-engine","three.js r".concat(zc)),i.addEventListener("webglcontextlost",yt,!1),i.addEventListener("webglcontextrestored",xt,!1),i.addEventListener("webglcontextcreationerror",_t,!1),null===ft){let e=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&e.shift(),ft=gt(e,t),null===ft)throw gt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ft.getShaderPrecisionFormat&&(ft.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function mt(){j=new jme(ft),G=new Fme(ft,j,t),j.init(G),ct=new b0e(ft,j,G),W=new y0e(ft,j,G),H=new Xme,Y=new o0e,X=new x0e(ft,j,W,Y,G,ct,H),Z=new zme(v),Q=new Hme(v),J=new ope(ft,G),pt=new kme(ft,j,J,G),$=new Wme(ft,J,H,pt),tt=new Jme(ft,$,J,H),lt=new Kme(ft,G,X),ot=new Ume(Y),et=new s0e(v,Z,Q,j,G,pt,ot),it=new w0e(v,Y),nt=new l0e,rt=new d0e(j,G),at=new Bme(v,Z,Q,W,tt,e,l),st=new v0e(v,tt,G),dt=new M0e(ft,H,G,W),ut=new qme(ft,j,H,G),ht=new Yme(ft,j,H,G),H.programs=et.programs,v.capabilities=G,v.extensions=j,v.properties=Y,v.renderLists=nt,v.shadowMap=st,v.state=W,v.info=H}u(mt,"initGLContext"),mt();let vt=new rO(v,ft);function yt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function xt(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;let t=H.autoReset,e=st.enabled,i=st.autoUpdate,n=st.needsUpdate,r=st.type;mt(),H.autoReset=t,st.enabled=e,st.autoUpdate=i,st.needsUpdate=n,st.type=r}function _t(t){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function bt(t){let e=t.target;e.removeEventListener("dispose",bt),Mt(e)}function Mt(t){Et(t),Y.remove(t)}function Et(t){let e=Y.get(t).programs;void 0!==e&&(e.forEach((function(t){et.releaseProgram(t)})),t.isShaderMaterial&&et.releaseShaderCache(t))}this.xr=vt,this.getContext=function(){return ft},this.getContextAttributes=function(){return ft.getContextAttributes()},this.forceContextLoss=function(){let t=j.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){let t=j.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(t){void 0!==t&&(P=t,this.setSize(T,C,!1))},this.getSize=function(t){return t.set(T,C)},this.setSize=function(t,e,n=!0){vt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=t,C=e,i.width=Math.floor(t*P),i.height=Math.floor(e*P),!0===n&&(i.style.width=t+"px",i.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return t.set(T*P,C*P).floor()},this.setDrawingBufferSize=function(t,e,n){T=t,C=e,P=n,i.width=Math.floor(t*n),i.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return t.copy(w)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,i,n){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,i,n),W.viewport(w.copy(O).multiplyScalar(P).floor())},this.getScissor=function(t){return t.copy(N)},this.setScissor=function(t,e,i,n){t.isVector4?N.set(t.x,t.y,t.z,t.w):N.set(t,e,i,n),W.scissor(A.copy(N).multiplyScalar(P).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(t){W.setScissorTest(D=t)},this.setOpaqueSort=function(t){I=t},this.setTransparentSort=function(t){L=t},this.getClearColor=function(t){return t.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(t=!0,e=!0,i=!0){let n=0;t&&(n|=16384),e&&(n|=256),i&&(n|=1024),ft.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",yt,!1),i.removeEventListener("webglcontextrestored",xt,!1),i.removeEventListener("webglcontextcreationerror",_t,!1),nt.dispose(),rt.dispose(),Y.dispose(),Z.dispose(),Q.dispose(),tt.dispose(),pt.dispose(),dt.dispose(),et.dispose(),vt.dispose(),vt.removeEventListener("sessionstart",St),vt.removeEventListener("sessionend",Tt),k&&(k.dispose(),k=null),Ct.stop()},u(yt,"onContextLost"),u(xt,"onContextRestore"),u(_t,"onContextCreationError"),u(bt,"onMaterialDispose"),u(Mt,"deallocateMaterial"),u(Et,"releaseMaterialProgramReferences"),this.renderBufferDirect=function(t,e,i,n,r,o){null===e&&(e=z);let s=r.isMesh&&r.matrixWorld.determinant()<0,a=Bt(t,e,i,n,r);W.setMaterial(n,s);let l=i.index,u=1;!0===n.wireframe&&(l=$.getWireframeAttribute(i),u=2);let h=i.drawRange,c=i.attributes.position,p=h.start*u,d=(h.start+h.count)*u;null!==o&&(p=Math.max(p,o.start*u),d=Math.min(d,(o.start+o.count)*u)),null!==l?(p=Math.max(p,0),d=Math.min(d,l.count)):null!=c&&(p=Math.max(p,0),d=Math.min(d,c.count));let f=d-p;if(f<0||f===1/0)return;pt.setup(r,n,a,i,l);let g,m=ut;if(null!==l&&(g=J.get(l),m=ht,m.setIndex(g)),r.isMesh)!0===n.wireframe?(W.setLineWidth(n.wireframeLinewidth*V()),m.setMode(1)):m.setMode(4);else if(r.isLine){let t=n.linewidth;void 0===t&&(t=1),W.setLineWidth(t*V()),r.isLineSegments?m.setMode(1):r.isLineLoop?m.setMode(2):m.setMode(3)}else r.isPoints?m.setMode(0):r.isSprite&&m.setMode(4);if(r.isInstancedMesh)m.renderInstances(p,f,r.count);else if(i.isInstancedBufferGeometry){let t=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,e=Math.min(i.instanceCount,t);m.renderInstances(p,f,e)}else m.render(p,f)},this.compile=function(t,e){function i(t,e,i){!0===t.transparent&&t.side===Dr&&!1===t.forceSinglePass?(t.side=_s,t.needsUpdate=!0,Rt(t,e,i),t.side=Pa,t.needsUpdate=!0,Rt(t,e,i),t.side=Dr):Rt(t,e,i)}u(i,"prepare"),f=rt.get(t),f.init(),m.push(f),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(v.useLegacyLights),t.traverse((function(e){let n=e.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){i(n[r],t,e)}else i(n,t,e)})),m.pop(),f=null};let wt=null;function At(t){wt&&wt(t)}function St(){Ct.stop()}function Tt(){Ct.start()}u(At,"onAnimationFrame"),u(St,"onXRSessionStart"),u(Tt,"onXRSessionEnd");let Ct=new HW;function Pt(t,e,i,n){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||R.intersectsSprite(t)){n&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);let e=tt.update(t),r=t.material;r.visible&&d.push(t,e,r,i,U.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==H.render.frame&&(t.skeleton.update(),t.skeleton.frame=H.render.frame),!t.frustumCulled||R.intersectsObject(t))){n&&U.setFromMatrixPosition(t.matrixWorld).applyMatrix4(F);let e=tt.update(t),r=t.material;if(Array.isArray(r)){let n=e.groups;for(let o=0,s=n.length;o<s;o++){let s=n[o],a=r[s.materialIndex];a&&a.visible&&d.push(t,e,a,i,U.z,s)}}else r.visible&&d.push(t,e,r,i,U.z,null)}let r=t.children;for(let t=0,o=r.length;t<o;t++)Pt(r[t],e,i,n)}function It(t,e,i,n){let r=t.opaque,o=t.transmissive,s=t.transparent;f.setupLightsView(i),!0===q&&ot.setGlobalState(v.clippingPlanes,i),o.length>0&&Lt(r,o,e,i),n&&W.viewport(w.copy(n)),r.length>0&&Nt(r,e,i),o.length>0&&Nt(o,e,i),s.length>0&&Nt(s,e,i),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function Lt(t,e,i,n){if(null===k){let t=G.isWebGL2;k=new ti(1024,1024,{generateMipmaps:!0,type:j.has("EXT_color_buffer_half_float")?Np:Mr,minFilter:Dp,samples:t&&!0===a?4:0})}let r=v.getRenderTarget();v.setRenderTarget(k),v.clear();let o=v.toneMapping;v.toneMapping=Nc,Nt(t,i,n),X.updateMultisampleRenderTarget(k),X.updateRenderTargetMipmap(k);let s=!1;for(let t=0,r=e.length;t<r;t++){let r=e[t],o=r.object,a=r.geometry,l=r.material,u=r.group;if(l.side===Dr&&o.layers.test(n.layers)){let t=l.side;l.side=_s,l.needsUpdate=!0,Dt(o,i,n,a,l,u),l.side=t,l.needsUpdate=!0,s=!0}}!0===s&&(X.updateMultisampleRenderTarget(k),X.updateRenderTargetMipmap(k)),v.setRenderTarget(r),v.toneMapping=o}function Nt(t,e,i){let n=!0===e.isScene?e.overrideMaterial:null;for(let r=0,o=t.length;r<o;r++){let o=t[r],s=o.object,a=o.geometry,l=null===n?o.material:n,u=o.group;s.layers.test(i.layers)&&Dt(s,e,i,a,l,u)}}function Dt(t,e,i,n,r,o){t.onBeforeRender(v,e,i,n,r,o),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(v,e,i,n,t,o),!0===r.transparent&&r.side===Dr&&!1===r.forceSinglePass?(r.side=_s,r.needsUpdate=!0,v.renderBufferDirect(i,e,n,r,t,o),r.side=Pa,r.needsUpdate=!0,v.renderBufferDirect(i,e,n,r,t,o),r.side=Dr):v.renderBufferDirect(i,e,n,r,t,o),t.onAfterRender(v,e,i,n,r,o)}function Rt(t,e,i){!0!==e.isScene&&(e=z);let n=Y.get(t),r=f.state.lights,o=f.state.shadowsArray,s=r.state.version,a=et.getParameters(t,r.state,o,e,i),l=et.getProgramCacheKey(a),u=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?Q:Z).get(t.envMap||n.environment),void 0===u&&(t.addEventListener("dispose",bt),u=new Map,n.programs=u);let h=u.get(l);if(void 0!==h){if(n.currentProgram===h&&n.lightsStateVersion===s)return qt(t,a),h}else a.uniforms=et.getUniforms(t),t.onBuild(i,a,v),t.onBeforeCompile(a,v),h=et.acquireProgram(a,l),u.set(l,h),n.uniforms=a.uniforms;let c=n.uniforms;(!t.isShaderMaterial&&!t.isRawShaderMaterial||!0===t.clipping)&&(c.clippingPlanes=ot.uniform),qt(t,a),n.needsLights=Ft(t),n.lightsStateVersion=s,n.needsLights&&(c.ambientLightColor.value=r.state.ambient,c.lightProbe.value=r.state.probe,c.directionalLights.value=r.state.directional,c.directionalLightShadows.value=r.state.directionalShadow,c.spotLights.value=r.state.spot,c.spotLightShadows.value=r.state.spotShadow,c.rectAreaLights.value=r.state.rectArea,c.ltc_1.value=r.state.rectAreaLTC1,c.ltc_2.value=r.state.rectAreaLTC2,c.pointLights.value=r.state.point,c.pointLightShadows.value=r.state.pointShadow,c.hemisphereLights.value=r.state.hemi,c.directionalShadowMap.value=r.state.directionalShadowMap,c.directionalShadowMatrix.value=r.state.directionalShadowMatrix,c.spotShadowMap.value=r.state.spotShadowMap,c.spotLightMatrix.value=r.state.spotLightMatrix,c.spotLightMap.value=r.state.spotLightMap,c.pointShadowMap.value=r.state.pointShadowMap,c.pointShadowMatrix.value=r.state.pointShadowMatrix);let p=h.getUniforms(),d=vg.seqWithValue(p.seq,c);return n.currentProgram=h,n.uniformsList=d,h}function qt(t,e){let i=Y.get(t);i.outputEncoding=e.outputEncoding,i.instancing=e.instancing,i.skinning=e.skinning,i.morphTargets=e.morphTargets,i.morphNormals=e.morphNormals,i.morphColors=e.morphColors,i.morphTargetsCount=e.morphTargetsCount,i.numClippingPlanes=e.numClippingPlanes,i.numIntersection=e.numClipIntersection,i.vertexAlphas=e.vertexAlphas,i.vertexTangents=e.vertexTangents,i.toneMapping=e.toneMapping}function Bt(t,e,i,n,r){!0!==e.isScene&&(e=z),X.resetTextureUnits();let o=e.fog,s=n.isMeshStandardMaterial?e.environment:null,a=null===b?v.outputEncoding:!0===b.isXRRenderTarget?b.texture.encoding:rl,l=(n.isMeshStandardMaterial?Q:Z).get(n.envMap||s),u=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,h=!!n.normalMap&&!!i.attributes.tangent,c=!!i.morphAttributes.position,p=!!i.morphAttributes.normal,d=!!i.morphAttributes.color,g=n.toneMapped?v.toneMapping:Nc,m=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,y=void 0!==m?m.length:0,x=Y.get(n),_=f.state.lights;if(!0===q&&(!0===B||t!==E)){let e=t===E&&n.id===M;ot.setState(n,t,e)}let w=!1;n.version===x.__version?(x.needsLights&&x.lightsStateVersion!==_.state.version||x.outputEncoding!==a||r.isInstancedMesh&&!1===x.instancing||!r.isInstancedMesh&&!0===x.instancing||r.isSkinnedMesh&&!1===x.skinning||!r.isSkinnedMesh&&!0===x.skinning||x.envMap!==l||!0===n.fog&&x.fog!==o||void 0!==x.numClippingPlanes&&(x.numClippingPlanes!==ot.numPlanes||x.numIntersection!==ot.numIntersection)||x.vertexAlphas!==u||x.vertexTangents!==h||x.morphTargets!==c||x.morphNormals!==p||x.morphColors!==d||x.toneMapping!==g||!0===G.isWebGL2&&x.morphTargetsCount!==y)&&(w=!0):(w=!0,x.__version=n.version);let A=x.currentProgram;!0===w&&(A=Rt(n,e,r));let S=!1,T=!1,I=!1,L=A.getUniforms(),O=x.uniforms;if(W.useProgram(A.program)&&(S=!0,T=!0,I=!0),n.id!==M&&(M=n.id,T=!0),S||E!==t){if(L.setValue(ft,"projectionMatrix",t.projectionMatrix),G.logarithmicDepthBuffer&&L.setValue(ft,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),E!==t&&(E=t,T=!0,I=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){let e=L.map.cameraPosition;void 0!==e&&e.setValue(ft,U.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&L.setValue(ft,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&L.setValue(ft,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){L.setOptional(ft,r,"bindMatrix"),L.setOptional(ft,r,"bindMatrixInverse");let t=r.skeleton;t&&(G.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),L.setValue(ft,"boneTexture",t.boneTexture,X),L.setValue(ft,"boneTextureSize",t.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let N=i.morphAttributes;if((void 0!==N.position||void 0!==N.normal||void 0!==N.color&&!0===G.isWebGL2)&&lt.update(r,i,A),(T||x.receiveShadow!==r.receiveShadow)&&(x.receiveShadow=r.receiveShadow,L.setValue(ft,"receiveShadow",r.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(O.envMap.value=l,O.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),T&&(L.setValue(ft,"toneMappingExposure",v.toneMappingExposure),x.needsLights&&kt(O,I),o&&!0===n.fog&&it.refreshFogUniforms(O,o),it.refreshMaterialUniforms(O,n,P,C,k),vg.upload(ft,x.uniformsList,O,X)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(vg.upload(ft,x.uniformsList,O,X),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&L.setValue(ft,"center",r.center),L.setValue(ft,"modelViewMatrix",r.modelViewMatrix),L.setValue(ft,"normalMatrix",r.normalMatrix),L.setValue(ft,"modelMatrix",r.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){let t=n.uniformsGroups;for(let e=0,i=t.length;e<i;e++)if(G.isWebGL2){let i=t[e];dt.update(i,A),dt.bind(i,A)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return A}function kt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Ft(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Ct.setAnimationLoop(At),typeof self<"u"&&Ct.setContext(self),this.setAnimationLoop=function(t){wt=t,vt.setAnimationLoop(t),null===t?Ct.stop():Ct.start()},vt.addEventListener("sessionstart",St),vt.addEventListener("sessionend",Tt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===vt.enabled&&!0===vt.isPresenting&&(!0===vt.cameraAutoUpdate&&vt.updateCamera(e),e=vt.getCamera()),!0===t.isScene&&t.onBeforeRender(v,t,e,b),f=rt.get(t,m.length),f.init(),m.push(f),F.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),R.setFromProjectionMatrix(F),B=this.localClippingEnabled,q=ot.init(this.clippingPlanes,B),d=nt.get(t,g.length),d.init(),g.push(d),Pt(t,e,0,v.sortObjects),d.finish(),!0===v.sortObjects&&d.sort(I,L),!0===q&&ot.beginShadows();let i=f.state.shadowsArray;if(st.render(i,t,e),!0===q&&ot.endShadows(),!0===this.info.autoReset&&this.info.reset(),at.render(d,t),f.setupLights(v.useLegacyLights),e.isArrayCamera){let i=e.cameras;for(let e=0,n=i.length;e<n;e++){let n=i[e];It(d,t,n,n.viewport)}}else It(d,t,e);null!==b&&(X.updateMultisampleRenderTarget(b),X.updateRenderTargetMipmap(b)),!0===t.isScene&&t.onAfterRender(v,t,e),pt.resetDefaultState(),M=-1,E=null,m.pop(),f=m.length>0?m[m.length-1]:null,g.pop(),d=g.length>0?g[g.length-1]:null},u(Pt,"projectObject"),u(It,"renderScene"),u(Lt,"renderTransmissionPass"),u(Nt,"renderObjects"),u(Dt,"renderObject"),u(Rt,"getProgram"),u(qt,"updateCommonMaterialProperties"),u(Bt,"setProgram"),u(kt,"markUniformsLightsNeedsUpdate"),u(Ft,"materialNeedsLights"),this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return b},this.setRenderTargetTextures=function(t,e,i){Y.get(t.texture).__webglTexture=e,Y.get(t.depthTexture).__webglTexture=i;let n=Y.get(t);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===j.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){let i=Y.get(t);i.__webglFramebuffer=e,i.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,i=0){b=t,x=e,_=i;let n=!0,r=null,o=!1,s=!1;if(t){let i=Y.get(t);void 0!==i.__useDefaultFramebuffer?(W.bindFramebuffer(36160,null),n=!1):void 0===i.__webglFramebuffer?X.setupRenderTarget(t):i.__hasExternalTextures&&X.rebindTextures(t,Y.get(t.texture).__webglTexture,Y.get(t.depthTexture).__webglTexture);let a=t.texture;(a.isData3DTexture||a.isDataArrayTexture||a.isCompressedArrayTexture)&&(s=!0);let l=Y.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=l[e],o=!0):r=G.isWebGL2&&t.samples>0&&!1===X.useMultisampledRTT(t)?Y.get(t).__webglMultisampledFramebuffer:l,w.copy(t.viewport),A.copy(t.scissor),S=t.scissorTest}else w.copy(O).multiplyScalar(P).floor(),A.copy(N).multiplyScalar(P).floor(),S=D;if(W.bindFramebuffer(36160,r)&&G.drawBuffers&&n&&W.drawBuffers(t,r),W.viewport(w),W.scissor(A),W.setScissorTest(S),o){let n=Y.get(t.texture);ft.framebufferTexture2D(36160,36064,34069+e,n.__webglTexture,i)}else if(s){let n=Y.get(t.texture),r=e||0;ft.framebufferTextureLayer(36160,36064,n.__webglTexture,i||0,r)}M=-1},this.readRenderTargetPixels=function(t,e,i,n,r,o,s){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=Y.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){W.bindFramebuffer(36160,a);try{let s=t.texture,a=s.format,l=s.type;if(a!==Gs&&ct.convert(a)!==ft.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");let u=l===Np&&(j.has("EXT_color_buffer_half_float")||G.isWebGL2&&j.has("EXT_color_buffer_float"));if(!(l===Mr||ct.convert(l)===ft.getParameter(35738)||l===Au&&(G.isWebGL2||j.has("OES_texture_float")||j.has("WEBGL_color_buffer_float"))||u))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-n&&i>=0&&i<=t.height-r&&ft.readPixels(e,i,n,r,ct.convert(a),ct.convert(l),o)}finally{let t=null!==b?Y.get(b).__webglFramebuffer:null;W.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,i=0){let n=Math.pow(2,-i),r=Math.floor(e.image.width*n),o=Math.floor(e.image.height*n);X.setTexture2D(e,0),ft.copyTexSubImage2D(3553,i,0,0,t.x,t.y,r,o),W.unbindTexture()},this.copyTextureToTexture=function(t,e,i,n=0){let r=e.image.width,o=e.image.height,s=ct.convert(i.format),a=ct.convert(i.type);X.setTexture2D(i,0),ft.pixelStorei(37440,i.flipY),ft.pixelStorei(37441,i.premultiplyAlpha),ft.pixelStorei(3317,i.unpackAlignment),e.isDataTexture?ft.texSubImage2D(3553,n,t.x,t.y,r,o,s,a,e.image.data):e.isCompressedTexture?ft.compressedTexSubImage2D(3553,n,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,s,e.mipmaps[0].data):ft.texSubImage2D(3553,n,t.x,t.y,s,a,e.image),0===n&&i.generateMipmaps&&ft.generateMipmap(3553),W.unbindTexture()},this.copyTextureToTexture3D=function(t,e,i,n,r=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");let o,s=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,l=t.max.z-t.min.z+1,u=ct.convert(n.format),h=ct.convert(n.type);if(n.isData3DTexture)X.setTexture3D(n,0),o=32879;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");X.setTexture2DArray(n,0),o=35866}ft.pixelStorei(37440,n.flipY),ft.pixelStorei(37441,n.premultiplyAlpha),ft.pixelStorei(3317,n.unpackAlignment);let c=ft.getParameter(3314),p=ft.getParameter(32878),d=ft.getParameter(3316),f=ft.getParameter(3315),g=ft.getParameter(32877),m=i.isCompressedTexture?i.mipmaps[0]:i.image;ft.pixelStorei(3314,m.width),ft.pixelStorei(32878,m.height),ft.pixelStorei(3316,t.min.x),ft.pixelStorei(3315,t.min.y),ft.pixelStorei(32877,t.min.z),i.isDataTexture||i.isData3DTexture?ft.texSubImage3D(o,r,e.x,e.y,e.z,s,a,l,u,h,m.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ft.compressedTexSubImage3D(o,r,e.x,e.y,e.z,s,a,l,u,m.data)):ft.texSubImage3D(o,r,e.x,e.y,e.z,s,a,l,u,h,m),ft.pixelStorei(3314,c),ft.pixelStorei(32878,p),ft.pixelStorei(3316,d),ft.pixelStorei(3315,f),ft.pixelStorei(32877,g),0===r&&n.generateMipmaps&&ft.generateMipmap(o),W.unbindTexture()},this.initTexture=function(t){t.isCubeTexture?X.setTextureCube(t,0):t.isData3DTexture?X.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?X.setTexture2DArray(t,0):X.setTexture2D(t,0),W.unbindTexture()},this.resetState=function(){x=0,_=0,b=null,W.reset(),pt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(t){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!t}};u(EL,"WebGLRenderer");var Ag=EL,TL=class extends Ag{};u(TL,"WebGL1Renderer");var Cg=TL;Cg.prototype.isWebGL1Renderer=!0;var SL=class extends ci{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}};u(SL,"Scene");var Oa=SL,AL=class{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=j6,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Cu()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let n=0,r=this.stride;n<r;n++)this.array[t+n]=e.array[i+n];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cu()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Cu()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}};u(AL,"InterleavedBuffer");var QE=AL,Wo=new K,ET=class t{constructor(t,e,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)Wo.fromBufferAttribute(this,e),Wo.applyMatrix4(t),this.setXYZ(e,Wo.x,Wo.y,Wo.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)Wo.fromBufferAttribute(this,e),Wo.applyNormalMatrix(t),this.setXYZ(e,Wo.x,Wo.y,Wo.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)Wo.fromBufferAttribute(this,e),Wo.transformDirection(t),this.setXYZ(e,Wo.x,Wo.y,Wo.z);return this}setX(t,e){return this.normalized&&(e=qi(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=qi(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=qi(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=qi(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=Dc(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=Dc(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=Dc(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=Dc(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=qi(e,this.array),i=qi(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=qi(e,this.array),i=qi(i,this.array),n=qi(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this}setXYZW(t,e,i,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=qi(e,this.array),i=qi(i,this.array),n=qi(n,this.array),r=qi(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=n,this.data.array[t+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let e=0;e<this.count;e++){let i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return new rn(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let t=[];for(let e=0;e<this.count;e++){let i=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[i+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}};u(ET,"InterleavedBufferAttribute");var Ex=ET,CL=class extends ha{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}};u(CL,"SpriteMaterial");var og,Tx=CL,rx=new K,ag=new K,lg=new K,ug=new qe,sx=new qe,ZW=new Ot,OE=new K,ox=new K,LE=new K,vW=new qe,R6=new qe,yW=new qe,PL=class extends ci{constructor(t){if(super(),this.isSprite=!0,this.type="Sprite",void 0===og){og=new Ji;let t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new QE(t,5);og.setIndex([0,1,2,0,2,3]),og.setAttribute("position",new Ex(e,3,0,!1)),og.setAttribute("uv",new Ex(e,2,3,!1))}this.geometry=og,this.material=void 0!==t?t:new Tx,this.center=new qe(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ag.setFromMatrixScale(this.matrixWorld),ZW.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),lg.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ag.multiplyScalar(-lg.z);let i,n,r=this.material.rotation;0!==r&&(n=Math.cos(r),i=Math.sin(r));let o=this.center;DE(OE.set(-.5,-.5,0),lg,o,ag,i,n),DE(ox.set(.5,-.5,0),lg,o,ag,i,n),DE(LE.set(.5,.5,0),lg,o,ag,i,n),vW.set(0,0),R6.set(1,0),yW.set(1,1);let s=t.ray.intersectTriangle(OE,ox,LE,!1,rx);if(null===s&&(DE(ox.set(-.5,.5,0),lg,o,ag,i,n),R6.set(0,1),s=t.ray.intersectTriangle(OE,LE,ox,!1,rx),null===s))return;let a=t.ray.origin.distanceTo(rx);a<t.near||a>t.far||e.push({distance:a,point:rx.clone(),uv:Lp.getInterpolation(rx,OE,ox,LE,vW,R6,yW,new qe),face:null,object:this})}copy(t,e){return super.copy(t,e),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}};u(PL,"Sprite");var KE=PL;function DE(t,e,i,n,r,o){ug.subVectors(t,i).addScalar(.5).multiply(n),void 0!==r?(sx.x=o*ug.x-r*ug.y,sx.y=r*ug.x+o*ug.y):sx.copy(ug),t.copy(e),t.x+=sx.x,t.y+=sx.y,t.applyMatrix4(ZW)}u(DE,"transformVertex");var IL=class extends Er{constructor(t=null,e=1,i=1,n,r,o,s,a,l=ui,u=ui,h,c){super(null,o,s,a,l,u,n,r,h,c),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};u(IL,"DataTexture");var Sx=IL,OL=class extends rn{constructor(t,e,i,n=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}};u(OL,"InstancedBufferAttribute");var Fc=OL,LL=class extends ha{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new at(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}};u(LL,"LineBasicMaterial");var Ax=LL,xW=new K,bW=new K,_W=new Ot,B6=new _x,NE=new Kh,DL=class extends ci{constructor(t=new Ji,e=new Ax){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(null===t.index){let e=t.attributes.position,i=[0];for(let t=1,n=e.count;t<n;t++)xW.fromBufferAttribute(e,t-1),bW.fromBufferAttribute(e,t),i[t]=i[t-1],i[t]+=xW.distanceTo(bW);t.setAttribute("lineDistance",new Rr(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let i=this.geometry,n=this.matrixWorld,r=t.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),NE.copy(i.boundingSphere),NE.applyMatrix4(n),NE.radius+=r,!1===t.ray.intersectsSphere(NE))return;_W.copy(n).invert(),B6.copy(t.ray).applyMatrix4(_W);let s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new K,u=new K,h=new K,c=new K,p=this.isLineSegments?2:1,d=i.index,f=i.attributes.position;if(null!==d){for(let i=Math.max(0,o.start),n=Math.min(d.count,o.start+o.count)-1;i<n;i+=p){let n=d.getX(i),r=d.getX(i+1);if(l.fromBufferAttribute(f,n),u.fromBufferAttribute(f,r),B6.distanceSqToSegment(l,u,c,h)>a)continue;c.applyMatrix4(this.matrixWorld);let o=t.ray.origin.distanceTo(c);o<t.near||o>t.far||e.push({distance:o,point:h.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else{for(let i=Math.max(0,o.start),n=Math.min(f.count,o.start+o.count)-1;i<n;i+=p){if(l.fromBufferAttribute(f,i),u.fromBufferAttribute(f,i+1),B6.distanceSqToSegment(l,u,c,h)>a)continue;c.applyMatrix4(this.matrixWorld);let n=t.ray.origin.distanceTo(c);n<t.near||n>t.far||e.push({distance:n,point:h.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){let i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){let e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}};u(DL,"Line");var sO=DL,wW=new K,MW=new K,NL=class extends sO{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(null===t.index){let e=t.attributes.position,i=[];for(let t=0,n=e.count;t<n;t+=2)wW.fromBufferAttribute(e,t),MW.fromBufferAttribute(e,t+1),i[t]=0===t?0:i[t-1],i[t+1]=i[t]+wW.distanceTo(MW);t.setAttribute("lineDistance",new Rr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};u(NL,"LineSegments");var JE=NL,RL=class extends Er{constructor(t,e,i,n,r,o,s,a,l){super(t,e,i,n,r,o,s,a,l),this.isCanvasTexture=!0,this.needsUpdate=!0}};u(RL,"CanvasTexture");var Rp=RL,BL=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){let i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){let e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){let e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let e,i=[],n=this.getPoint(0),r=0;i.push(0);for(let o=1;o<=t;o++)e=this.getPoint(o/t),r+=e.distanceTo(n),i.push(r),n=e;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){let i,n=this.getLengths(),r=0,o=n.length;i=e||t*n[o-1];let s,a=0,l=o-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),s=n[r]-i,s<0)a=r+1;else{if(!(s>0)){l=r;break}l=r-1}if(r=l,n[r]===i)return r/(o-1);let u=n[r];return(r+(i-u)/(n[r+1]-u))/(o-1)}getTangent(t,e){let i=t-1e-4,n=t+1e-4;i<0&&(i=0),n>1&&(n=1);let r=this.getPoint(i),o=this.getPoint(n),s=e||(r.isVector2?new qe:new K);return s.copy(o).sub(r).normalize(),s}getTangentAt(t,e){let i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e){let i=new K,n=[],r=[],o=[],s=new K,a=new Ot;for(let e=0;e<=t;e++){let i=e/t;n[e]=this.getTangentAt(i,new K)}r[0]=new K,o[0]=new K;let l=Number.MAX_VALUE,u=Math.abs(n[0].x),h=Math.abs(n[0].y),c=Math.abs(n[0].z);u<=l&&(l=u,i.set(1,0,0)),h<=l&&(l=h,i.set(0,1,0)),c<=l&&i.set(0,0,1),s.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],s),o[0].crossVectors(n[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),o[e]=o[e-1].clone(),s.crossVectors(n[e-1],n[e]),s.length()>Number.EPSILON){s.normalize();let t=Math.acos(ao(n[e-1].dot(n[e]),-1,1));r[e].applyMatrix4(a.makeRotationAxis(s,t))}o[e].crossVectors(n[e],r[e])}if(!0===e){let e=Math.acos(ao(r[0].dot(r[t]),-1,1));e/=t,n[0].dot(s.crossVectors(r[0],r[t]))>0&&(e=-e);for(let i=1;i<=t;i++)r[i].applyMatrix4(a.makeRotationAxis(n[i],e*i)),o[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}};u(BL,"Curve");var sl=BL,kL=class extends sl{constructor(t=0,e=0,i=1,n=1,r=0,o=2*Math.PI,s=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=s,this.aRotation=a}getPoint(t,e){let i=e||new qe,n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),!0===this.aClockwise&&!o&&(r===n?r=-n:r-=n);let s=this.aStartAngle+t*r,a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){let t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),i=a-this.aX,n=l-this.aY;a=i*t-n*e+this.aX,l=i*e+n*t+this.aY}return i.set(a,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}};u(kL,"EllipseCurve");var Cx=kL,qL=class extends Cx{constructor(t,e,i,n,r,o){super(t,e,i,i,n,r,o),this.isArcCurve=!0,this.type="ArcCurve"}};u(qL,"ArcCurve");var oO=qL;function OO(){let t=0,e=0,i=0,n=0;function r(r,o,s,a){t=r,e=s,i=-3*r+3*o-2*s-a,n=2*r-2*o+s+a}return u(r,"init"),{initCatmullRom:function(t,e,i,n,o){r(e,i,o*(i-t),o*(n-e))},initNonuniformCatmullRom:function(t,e,i,n,o,s,a){let l=(e-t)/o-(i-t)/(o+s)+(i-e)/s,u=(i-e)/s-(n-e)/(s+a)+(n-i)/a;l*=s,u*=s,r(e,i,l,u)},calc:function(r){let o=r*r;return t+e*r+i*o+n*(o*r)}}}u(OO,"CubicPoly");var RE=new K,k6=new OO,q6=new OO,F6=new OO,FL=class extends sl{constructor(t=[],e=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=n}getPoint(t,e=new K){let i,n,r=e,o=this.points,s=o.length,a=(s-(this.closed?0:1))*t,l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?i=o[(l-1)%s]:(RE.subVectors(o[0],o[1]).add(o[0]),i=RE);let h=o[l%s],c=o[(l+1)%s];if(this.closed||l+2<s?n=o[(l+2)%s]:(RE.subVectors(o[s-1],o[s-2]).add(o[s-1]),n=RE),"centripetal"===this.curveType||"chordal"===this.curveType){let t="chordal"===this.curveType?.5:.25,e=Math.pow(i.distanceToSquared(h),t),r=Math.pow(h.distanceToSquared(c),t),o=Math.pow(c.distanceToSquared(n),t);r<1e-4&&(r=1),e<1e-4&&(e=r),o<1e-4&&(o=r),k6.initNonuniformCatmullRom(i.x,h.x,c.x,n.x,e,r,o),q6.initNonuniformCatmullRom(i.y,h.y,c.y,n.y,e,r,o),F6.initNonuniformCatmullRom(i.z,h.z,c.z,n.z,e,r,o)}else"catmullrom"===this.curveType&&(k6.initCatmullRom(i.x,h.x,c.x,n.x,this.tension),q6.initCatmullRom(i.y,h.y,c.y,n.y,this.tension),F6.initCatmullRom(i.z,h.z,c.z,n.z,this.tension));return r.set(k6.calc(u),q6.calc(u),F6.calc(u)),r}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){let i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push((new K).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};u(FL,"CatmullRomCurve3");var Px=FL;function EW(t,e,i,n,r){let o=.5*(n-e),s=.5*(r-i),a=t*t;return(2*i-2*n+o+s)*(t*a)+(-3*i+3*n-2*o-s)*a+o*t+i}function T0e(t,e){let i=1-t;return i*i*e}function S0e(t,e){return 2*(1-t)*t*e}function A0e(t,e){return t*t*e}function dx(t,e,i,n){return T0e(t,e)+S0e(t,i)+A0e(t,n)}function C0e(t,e){let i=1-t;return i*i*i*e}function P0e(t,e){let i=1-t;return 3*i*i*t*e}function I0e(t,e){return 3*(1-t)*t*t*e}function O0e(t,e){return t*t*t*e}function mx(t,e,i,n,r){return C0e(t,e)+P0e(t,i)+I0e(t,n)+O0e(t,r)}u(EW,"CatmullRom"),u(T0e,"QuadraticBezierP0"),u(S0e,"QuadraticBezierP1"),u(A0e,"QuadraticBezierP2"),u(dx,"QuadraticBezier"),u(C0e,"CubicBezierP0"),u(P0e,"CubicBezierP1"),u(I0e,"CubicBezierP2"),u(O0e,"CubicBezierP3"),u(mx,"CubicBezier");var UL=class extends sl{constructor(t=new qe,e=new qe,i=new qe,n=new qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new qe){let i=e,n=this.v0,r=this.v1,o=this.v2,s=this.v3;return i.set(mx(t,n.x,r.x,o.x,s.x),mx(t,n.y,r.y,o.y,s.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}};u(UL,"CubicBezierCurve");var $E=UL,zL=class extends sl{constructor(t=new K,e=new K,i=new K,n=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=n}getPoint(t,e=new K){let i=e,n=this.v0,r=this.v1,o=this.v2,s=this.v3;return i.set(mx(t,n.x,r.x,o.x,s.x),mx(t,n.y,r.y,o.y,s.y),mx(t,n.z,r.z,o.z,s.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}};u(zL,"CubicBezierCurve3");var aO=zL,GL=class extends sl{constructor(t=new qe,e=new qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new qe){let i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new qe){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};u(GL,"LineCurve");var Ix=GL,VL=class extends sl{constructor(t=new K,e=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new K){let i=e;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new K){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};u(VL,"LineCurve3");var lO=VL,HL=class extends sl{constructor(t=new qe,e=new qe,i=new qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new qe){let i=e,n=this.v0,r=this.v1,o=this.v2;return i.set(dx(t,n.x,r.x,o.x),dx(t,n.y,r.y,o.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};u(HL,"QuadraticBezierCurve");var eT=HL,jL=class extends sl{constructor(t=new K,e=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new K){let i=e,n=this.v0,r=this.v1,o=this.v2;return i.set(dx(t,n.x,r.x,o.x),dx(t,n.y,r.y,o.y),dx(t,n.z,r.z,o.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}};u(jL,"QuadraticBezierCurve3");var tT=jL,WL=class extends sl{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new qe){let i=e,n=this.points,r=(n.length-1)*t,o=Math.floor(r),s=r-o,a=n[0===o?o:o-1],l=n[o],u=n[o>n.length-2?n.length-1:o+1],h=n[o>n.length-3?n.length-1:o+2];return i.set(EW(s,a.x,l.x,u.x,h.x),EW(s,a.y,l.y,u.y,h.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){let i=this.points[e];t.points.push(i.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){let i=t.points[e];this.points.push((new qe).fromArray(i))}return this}};u(WL,"SplineCurve");var nT=WL,LO=Object.freeze({__proto__:null,ArcCurve:oO,CatmullRomCurve3:Px,CubicBezierCurve:$E,CubicBezierCurve3:aO,EllipseCurve:Cx,LineCurve:Ix,LineCurve3:lO,QuadraticBezierCurve:eT,QuadraticBezierCurve3:tT,SplineCurve:nT}),YL=class extends sl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ix(e,t))}getPoint(t,e){let i=t*this.getLength(),n=this.getCurveLengths(),r=0;for(;r<n.length;){if(n[r]>=i){let t=n[r]-i,o=this.curves[r],s=o.getLength(),a=0===s?0:1-t/s;return o.getPointAt(a,e)}r++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],e=0;for(let i=0,n=this.curves.length;i<n;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){let e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){let e,i=[];for(let n=0,r=this.curves;n<r.length;n++){let o=r[n],s=o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t,a=o.getPoints(s);for(let t=0;t<a.length;t++){let n=a[t];e&&e.equals(n)||(i.push(n),e=n)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){let i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){let i=this.curves[e];t.curves.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){let i=t.curves[e];this.curves.push((new LO[i.type]).fromJSON(i))}return this}};u(YL,"CurvePath");var uO=YL,XL=class extends uO{constructor(t){super(),this.type="Path",this.currentPoint=new qe,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){let i=new Ix(this.currentPoint.clone(),new qe(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,n){let r=new eT(this.currentPoint.clone(),new qe(t,e),new qe(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(t,e,i,n,r,o){let s=new $E(this.currentPoint.clone(),new qe(t,e),new qe(i,n),new qe(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this}splineThru(t){let e=[this.currentPoint.clone()].concat(t),i=new nT(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,n,r,o){let s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(t+s,e+a,i,n,r,o),this}absarc(t,e,i,n,r,o){return this.absellipse(t,e,i,i,n,r,o),this}ellipse(t,e,i,n,r,o,s,a){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(t+l,e+u,i,n,r,o,s,a),this}absellipse(t,e,i,n,r,o,s,a){let l=new Cx(t,e,i,n,r,o,s,a);if(this.curves.length>0){let t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}};u(XL,"Path");var Bp=XL,TT=class t extends Ji{constructor(t=1,e=1,i=1,n=32,r=1,o=!1,s=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:s,thetaLength:a};let l=this;n=Math.floor(n),r=Math.floor(r);let h=[],c=[],p=[],d=[],f=0,g=[],m=i/2,v=0;function y(){let o=new K,u=new K,y=0,x=(e-t)/i;for(let l=0;l<=r;l++){let h=[],v=l/r,y=v*(e-t)+t;for(let t=0;t<=n;t++){let e=t/n,r=e*a+s,l=Math.sin(r),g=Math.cos(r);u.x=y*l,u.y=-v*i+m,u.z=y*g,c.push(u.x,u.y,u.z),o.set(l,x,g).normalize(),p.push(o.x,o.y,o.z),d.push(e,1-v),h.push(f++)}g.push(h)}for(let t=0;t<n;t++)for(let e=0;e<r;e++){let i=g[e][t],n=g[e+1][t],r=g[e+1][t+1],o=g[e][t+1];h.push(i,n,o),h.push(n,r,o),y+=6}l.addGroup(v,y,0),v+=y}function x(i){let r=f,o=new qe,u=new K,g=0,y=!0===i?t:e,x=!0===i?1:-1;for(let t=1;t<=n;t++)c.push(0,m*x,0),p.push(0,x,0),d.push(.5,.5),f++;let _=f;for(let t=0;t<=n;t++){let e=t/n*a+s,i=Math.cos(e),r=Math.sin(e);u.x=y*r,u.y=m*x,u.z=y*i,c.push(u.x,u.y,u.z),p.push(0,x,0),o.x=.5*i+.5,o.y=.5*r*x+.5,d.push(o.x,o.y),f++}for(let t=0;t<n;t++){let e=r+t,n=_+t;!0===i?h.push(n,n+1,e):h.push(n+1,n,e),g+=3}l.addGroup(v,g,!0===i?1:2),v+=g}y(),!1===o&&(t>0&&x(!0),e>0&&x(!1)),this.setIndex(h),this.setAttribute("position",new Rr(c,3)),this.setAttribute("normal",new Rr(p,3)),this.setAttribute("uv",new Rr(d,2)),u(y,"generateTorso"),u(x,"generateCap")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(e){return new t(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};u(TT,"CylinderGeometry");var iT=TT,ZL=class extends Bp{constructor(t){super(t),this.uuid=Cu(),this.type="Shape",this.holes=[]}getPointsHoles(t){let e=[];for(let i=0,n=this.holes.length;i<n;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){let i=t.holes[e];this.holes.push(i.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){let i=this.holes[e];t.holes.push(i.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){let i=t.holes[e];this.holes.push((new Bp).fromJSON(i))}return this}};u(ZL,"Shape");var Ul=ZL,L0e={triangulate:function(t,e,i=2){let n,r,o,s,a,l,u,h=e&&e.length,c=h?e[0]*i:t.length,p=QW(t,0,c,i,!0),d=[];if(!p||p.next===p.prev)return d;if(h&&(p=k0e(t,e,p,i)),t.length>80*i){n=o=t[0],r=s=t[1];for(let e=i;e<c;e+=i)a=t[e],l=t[e+1],a<n&&(n=a),l<r&&(r=l),a>o&&(o=a),l>s&&(s=l);u=Math.max(o-n,s-r),u=0!==u?32767/u:0}return Ox(p,d,i,n,r,u,0),d}};function QW(t,e,i,n,r){let o,s;if(r===X0e(t,e,i,n)>0)for(o=e;o<i;o+=n)s=TW(o,t[o],t[o+1],s);else for(o=i-n;o>=e;o-=n)s=TW(o,t[o],t[o+1],s);return s&&NT(s,s.next)&&(Dx(s),s=s.next),s}function kp(t,e){if(!t)return t;e||(e=t);let i,n=t;do{if(i=!1,n.steiner||!NT(n,n.next)&&0!==_r(n.prev,n,n.next))n=n.next;else{if(Dx(n),n=e=n.prev,n===n.next)break;i=!0}}while(i||n!==e);return e}function Ox(t,e,i,n,r,o,s){if(!t)return;!s&&o&&G0e(t,n,r,o);let a,l,u=t;for(;t.prev!==t.next;)if(a=t.prev,l=t.next,o?N0e(t,n,r,o):D0e(t))e.push(a.i/i|0),e.push(t.i/i|0),e.push(l.i/i|0),Dx(t),t=l.next,u=l.next;else if((t=l)===u){s?1===s?Ox(t=R0e(kp(t),e,i),e,i,n,r,o,2):2===s&&B0e(t,e,i,n,r,o):Ox(kp(t),e,i,n,r,o,1);break}}function D0e(t){let e=t.prev,i=t,n=t.next;if(_r(e,i,n)>=0)return!1;let r=e.x,o=i.x,s=n.x,a=e.y,l=i.y,u=n.y,h=r<o?r<s?r:s:o<s?o:s,c=a<l?a<u?a:u:l<u?l:u,p=r>o?r>s?r:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u,f=n.next;for(;f!==e;){if(f.x>=h&&f.x<=p&&f.y>=c&&f.y<=d&&fg(r,a,o,l,s,u,f.x,f.y)&&_r(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function N0e(t,e,i,n){let r=t.prev,o=t,s=t.next;if(_r(r,o,s)>=0)return!1;let a=r.x,l=o.x,u=s.x,h=r.y,c=o.y,p=s.y,d=a<l?a<u?a:u:l<u?l:u,f=h<c?h<p?h:p:c<p?c:p,g=a>l?a>u?a:u:l>u?l:u,m=h>c?h>p?h:p:c>p?c:p,v=cO(d,f,e,i,n),y=cO(g,m,e,i,n),x=t.prevZ,_=t.nextZ;for(;x&&x.z>=v&&_&&_.z<=y;){if(x.x>=d&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==s&&fg(a,h,l,c,u,p,x.x,x.y)&&_r(x.prev,x,x.next)>=0||(x=x.prevZ,_.x>=d&&_.x<=g&&_.y>=f&&_.y<=m&&_!==r&&_!==s&&fg(a,h,l,c,u,p,_.x,_.y)&&_r(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;x&&x.z>=v;){if(x.x>=d&&x.x<=g&&x.y>=f&&x.y<=m&&x!==r&&x!==s&&fg(a,h,l,c,u,p,x.x,x.y)&&_r(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=y;){if(_.x>=d&&_.x<=g&&_.y>=f&&_.y<=m&&_!==r&&_!==s&&fg(a,h,l,c,u,p,_.x,_.y)&&_r(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function R0e(t,e,i){let n=t;do{let r=n.prev,o=n.next.next;!NT(r,o)&&KW(r,n,n.next,o)&&Lx(r,o)&&Lx(o,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),Dx(n),Dx(n.next),n=t=o),n=n.next}while(n!==t);return kp(n)}function B0e(t,e,i,n,r,o){let s=t;do{let t=s.next.next;for(;t!==s.prev;){if(s.i!==t.i&&j0e(s,t)){let a=JW(s,t);return s=kp(s,s.next),a=kp(a,a.next),Ox(s,e,i,n,r,o,0),void Ox(a,e,i,n,r,o,0)}t=t.next}s=s.next}while(s!==t)}function k0e(t,e,i,n){let r,o,s,a,l,u=[];for(r=0,o=e.length;r<o;r++)s=e[r]*n,a=r<o-1?e[r+1]*n:t.length,l=QW(t,s,a,n,!1),l===l.next&&(l.steiner=!0),u.push(H0e(l));for(u.sort(q0e),r=0;r<u.length;r++)i=F0e(u[r],i);return i}function q0e(t,e){return t.x-e.x}function F0e(t,e){let i=U0e(t,e);if(!i)return e;let n=JW(i,t);return kp(n,n.next),kp(i,i.next)}function U0e(t,e){let i,n=e,r=-1/0,o=t.x,s=t.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){let t=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=o&&t>r&&(r=t,i=n.x<n.next.x?n:n.next,t===o))return i}n=n.next}while(n!==e);if(!i)return null;let a,l=i,u=i.x,h=i.y,c=1/0;n=i;do{o>=n.x&&n.x>=u&&o!==n.x&&fg(s<h?o:r,s,u,h,s<h?r:o,s,n.x,n.y)&&(a=Math.abs(s-n.y)/(o-n.x),Lx(n,t)&&(a<c||a===c&&(n.x>i.x||n.x===i.x&&z0e(i,n)))&&(i=n,c=a)),n=n.next}while(n!==l);return i}function z0e(t,e){return _r(t.prev,t,e.prev)<0&&_r(e.next,t,t.next)<0}function G0e(t,e,i,n){let r=t;do{0===r.z&&(r.z=cO(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,V0e(r)}function V0e(t){let e,i,n,r,o,s,a,l,u=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,n=i,a=0,e=0;e<u&&(a++,n=n.nextZ,n);e++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;i=n}o.nextZ=null,u*=2}while(s>1);return t}function cO(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function H0e(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function fg(t,e,i,n,r,o,s,a){return(r-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(i-s)*(e-a)&&(i-s)*(o-a)>=(r-s)*(n-a)}function j0e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!W0e(t,e)&&(Lx(t,e)&&Lx(e,t)&&Y0e(t,e)&&(_r(t.prev,t,e.prev)||_r(t,e.prev,e))||NT(t,e)&&_r(t.prev,t,t.next)>0&&_r(e.prev,e,e.next)>0)}function _r(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function NT(t,e){return t.x===e.x&&t.y===e.y}function KW(t,e,i,n){let r=kE(_r(t,e,i)),o=kE(_r(t,e,n)),s=kE(_r(i,n,t)),a=kE(_r(i,n,e));return!!(r!==o&&s!==a||0===r&&BE(t,i,e)||0===o&&BE(t,n,e)||0===s&&BE(i,t,n)||0===a&&BE(i,e,n))}function BE(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function kE(t){return t>0?1:t<0?-1:0}function W0e(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&KW(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function Lx(t,e){return _r(t.prev,t,t.next)<0?_r(t,e,t.next)>=0&&_r(t,t.prev,e)>=0:_r(t,e,t.prev)<0||_r(t,t.next,e)<0}function Y0e(t,e){let i=t,n=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}function JW(t,e){let i=new hO(t.i,t.x,t.y),n=new hO(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function TW(t,e,i,n){let r=new hO(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Dx(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function hO(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function X0e(t,e,i,n){let r=0;for(let o=e,s=i-n;o<i;o+=n)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}u(QW,"linkedList"),u(kp,"filterPoints"),u(Ox,"earcutLinked"),u(D0e,"isEar"),u(N0e,"isEarHashed"),u(R0e,"cureLocalIntersections"),u(B0e,"splitEarcut"),u(k0e,"eliminateHoles"),u(q0e,"compareX"),u(F0e,"eliminateHole"),u(U0e,"findHoleBridge"),u(z0e,"sectorContainsSector"),u(G0e,"indexCurve"),u(V0e,"sortLinked"),u(cO,"zOrder"),u(H0e,"getLeftmost"),u(fg,"pointInTriangle"),u(j0e,"isValidDiagonal"),u(_r,"area"),u(NT,"equals"),u(KW,"intersects"),u(BE,"onSegment"),u(kE,"sign"),u(W0e,"intersectsPolygon"),u(Lx,"locallyInside"),u(Y0e,"middleInside"),u(JW,"splitPolygon"),u(TW,"insertNode"),u(Dx,"removeNode"),u(hO,"Node"),u(X0e,"signedArea");var ST=class t{static area(t){let e=t.length,i=0;for(let n=e-1,r=0;r<e;n=r++)i+=t[n].x*t[r].y-t[r].x*t[n].y;return.5*i}static isClockWise(e){return t.area(e)<0}static triangulateShape(t,e){let i=[],n=[],r=[];SW(t),AW(i,t);let o=t.length;e.forEach(SW);for(let t=0;t<e.length;t++)n.push(o),o+=e[t].length,AW(i,e[t]);let s=L0e.triangulate(i,n);for(let t=0;t<s.length;t+=3)r.push(s.slice(t,t+3));return r}};u(ST,"ShapeUtils");var yg=ST;function SW(t){let e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function AW(t,e){for(let i=0;i<e.length;i++)t.push(e[i].x),t.push(e[i].y)}u(SW,"removeDupEndPts"),u(AW,"addContour");var AT=class t extends Ji{constructor(t=new Ul([new qe(.5,.5),new qe(-.5,.5),new qe(-.5,-.5),new qe(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];let i=this,n=[],r=[];for(let e=0,i=t.length;e<i;e++){o(t[e])}function o(t){let o,s,a,l,h,c=[],p=void 0!==e.curveSegments?e.curveSegments:12,d=void 0!==e.steps?e.steps:1,f=void 0!==e.depth?e.depth:1,g=void 0===e.bevelEnabled||e.bevelEnabled,m=void 0!==e.bevelThickness?e.bevelThickness:.2,v=void 0!==e.bevelSize?e.bevelSize:m-.1,y=void 0!==e.bevelOffset?e.bevelOffset:0,x=void 0!==e.bevelSegments?e.bevelSegments:3,_=e.extrudePath,b=void 0!==e.UVGenerator?e.UVGenerator:Z0e,M=!1;_&&(o=_.getSpacedPoints(d),M=!0,g=!1,s=_.computeFrenetFrames(d,!1),a=new K,l=new K,h=new K),g||(x=0,m=0,v=0,y=0);let E=t.extractPoints(p),w=E.shape,A=E.holes;if(!yg.isClockWise(w)){w=w.reverse();for(let t=0,e=A.length;t<e;t++){let e=A[t];yg.isClockWise(e)&&(A[t]=e.reverse())}}let S=yg.triangulateShape(w,A),T=w;for(let t=0,e=A.length;t<e;t++){let e=A[t];w=w.concat(e)}function C(t,e,i){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().addScaledVector(e,i)}u(C,"scalePt2");let P=w.length,I=S.length;function L(t,e,i){let n,r,o,s=t.x-e.x,a=t.y-e.y,l=i.x-t.x,u=i.y-t.y,h=s*s+a*a,c=s*u-a*l;if(Math.abs(c)>Number.EPSILON){let c=Math.sqrt(h),p=Math.sqrt(l*l+u*u),d=e.x-a/c,f=e.y+s/c,g=((i.x-u/p-d)*u-(i.y+l/p-f)*l)/(s*u-a*l);n=d+s*g-t.x,r=f+a*g-t.y;let m=n*n+r*r;if(m<=2)return new qe(n,r);o=Math.sqrt(m/2)}else{let t=!1;s>Number.EPSILON?l>Number.EPSILON&&(t=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(a)===Math.sign(u)&&(t=!0),t?(n=-a,r=s,o=Math.sqrt(h)):(n=s,r=a,o=Math.sqrt(h/2))}return new qe(n/o,r/o)}u(L,"getBevelVec");let O=[];for(let t=0,e=T.length,i=e-1,n=t+1;t<e;t++,i++,n++)i===e&&(i=0),n===e&&(n=0),O[t]=L(T[t],T[i],T[n]);let N,D=[],R=O.concat();for(let t=0,e=A.length;t<e;t++){let e=A[t];N=[];for(let t=0,i=e.length,n=i-1,r=t+1;t<i;t++,n++,r++)n===i&&(n=0),r===i&&(r=0),N[t]=L(e[t],e[n],e[r]);D.push(N),R=R.concat(N)}for(let t=0;t<x;t++){let e=t/x,i=m*Math.cos(e*Math.PI/2),n=v*Math.sin(e*Math.PI/2)+y;for(let t=0,e=T.length;t<e;t++){let e=C(T[t],O[t],n);U(e.x,e.y,-i)}for(let t=0,e=A.length;t<e;t++){let e=A[t];N=D[t];for(let t=0,r=e.length;t<r;t++){let r=C(e[t],N[t],n);U(r.x,r.y,-i)}}}let q=v+y;for(let t=0;t<P;t++){let e=g?C(w[t],R[t],q):w[t];M?(l.copy(s.normals[0]).multiplyScalar(e.x),a.copy(s.binormals[0]).multiplyScalar(e.y),h.copy(o[0]).add(l).add(a),U(h.x,h.y,h.z)):U(e.x,e.y,0)}for(let t=1;t<=d;t++)for(let e=0;e<P;e++){let i=g?C(w[e],R[e],q):w[e];M?(l.copy(s.normals[t]).multiplyScalar(i.x),a.copy(s.binormals[t]).multiplyScalar(i.y),h.copy(o[t]).add(l).add(a),U(h.x,h.y,h.z)):U(i.x,i.y,f/d*t)}for(let t=x-1;t>=0;t--){let e=t/x,i=m*Math.cos(e*Math.PI/2),n=v*Math.sin(e*Math.PI/2)+y;for(let t=0,e=T.length;t<e;t++){let e=C(T[t],O[t],n);U(e.x,e.y,f+i)}for(let t=0,e=A.length;t<e;t++){let e=A[t];N=D[t];for(let t=0,r=e.length;t<r;t++){let r=C(e[t],N[t],n);M?U(r.x,r.y+o[d-1].y,o[d-1].x+i):U(r.x,r.y,f+i)}}}function B(){let t=n.length/3;if(g){let t=0,e=P*t;for(let t=0;t<I;t++){let i=S[t];z(i[2]+e,i[1]+e,i[0]+e)}t=d+2*x,e=P*t;for(let t=0;t<I;t++){let i=S[t];z(i[0]+e,i[1]+e,i[2]+e)}}else{for(let t=0;t<I;t++){let e=S[t];z(e[2],e[1],e[0])}for(let t=0;t<I;t++){let e=S[t];z(e[0]+P*d,e[1]+P*d,e[2]+P*d)}}i.addGroup(t,n.length/3-t,0)}function k(){let t=n.length/3,e=0;F(T,e),e+=T.length;for(let t=0,i=A.length;t<i;t++){let i=A[t];F(i,e),e+=i.length}i.addGroup(t,n.length/3-t,1)}function F(t,e){let i=t.length;for(;--i>=0;){let n=i,r=i-1;r<0&&(r=t.length-1);for(let t=0,i=d+2*x;t<i;t++){let i=P*t,o=P*(t+1);V(e+n+i,e+r+i,e+r+o,e+n+o)}}}function U(t,e,i){c.push(t),c.push(e),c.push(i)}function z(t,e,r){j(t),j(e),j(r);let o=n.length/3,s=b.generateTopUV(i,n,o-3,o-2,o-1);G(s[0]),G(s[1]),G(s[2])}function V(t,e,r,o){j(t),j(e),j(o),j(e),j(r),j(o);let s=n.length/3,a=b.generateSideWallUV(i,n,s-6,s-3,s-2,s-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function j(t){n.push(c[3*t+0]),n.push(c[3*t+1]),n.push(c[3*t+2])}function G(t){r.push(t.x),r.push(t.y)}B(),k(),u(B,"buildLidFaces"),u(k,"buildSideFaces"),u(F,"sidewalls"),u(U,"v"),u(z,"f3"),u(V,"f4"),u(j,"addVertex"),u(G,"addUV")}this.setAttribute("position",new Rr(n,3)),this.setAttribute("uv",new Rr(r,2)),this.computeVertexNormals(),u(o,"addShape")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return Q0e(this.parameters.shapes,this.parameters.options,t)}static fromJSON(e,i){let n=[];for(let t=0,r=e.shapes.length;t<r;t++){let r=i[e.shapes[t]];n.push(r)}let r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new LO[r.type]).fromJSON(r)),new t(n,e.options)}};u(AT,"ExtrudeGeometry");var Uc=AT,Z0e={generateTopUV:function(t,e,i,n,r){let o=e[3*i],s=e[3*i+1],a=e[3*n],l=e[3*n+1],u=e[3*r],h=e[3*r+1];return[new qe(o,s),new qe(a,l),new qe(u,h)]},generateSideWallUV:function(t,e,i,n,r,o){let s=e[3*i],a=e[3*i+1],l=e[3*i+2],u=e[3*n],h=e[3*n+1],c=e[3*n+2],p=e[3*r],d=e[3*r+1],f=e[3*r+2],g=e[3*o],m=e[3*o+1],v=e[3*o+2];return Math.abs(a-h)<Math.abs(s-u)?[new qe(s,1-l),new qe(u,1-c),new qe(p,1-f),new qe(g,1-v)]:[new qe(a,1-l),new qe(h,1-c),new qe(d,1-f),new qe(m,1-v)]}};function Q0e(t,e,i){if(i.shapes=[],Array.isArray(t))for(let e=0,n=t.length;e<n;e++){let n=t[e];i.shapes.push(n.uuid)}else i.shapes.push(t.uuid);return i.options=Object.assign({},e),void 0!==e.extrudePath&&(i.options.extrudePath=e.extrudePath.toJSON()),i}u(Q0e,"toJSON$1");var CT=class t extends Ji{constructor(t=new tT(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),e=64,i=1,n=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:n,closed:r};let o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;let s=new K,a=new K,l=new qe,h=new K,c=[],p=[],d=[],f=[];function g(){for(let t=0;t<e;t++)m(t);m(!1===r?e:0),y(),v()}function m(r){h=t.getPointAt(r/e,h);let l=o.normals[r],u=o.binormals[r];for(let t=0;t<=n;t++){let e=t/n*Math.PI*2,r=Math.sin(e),o=-Math.cos(e);a.x=o*l.x+r*u.x,a.y=o*l.y+r*u.y,a.z=o*l.z+r*u.z,a.normalize(),p.push(a.x,a.y,a.z),s.x=h.x+i*a.x,s.y=h.y+i*a.y,s.z=h.z+i*a.z,c.push(s.x,s.y,s.z)}}function v(){for(let t=1;t<=e;t++)for(let e=1;e<=n;e++){let i=(n+1)*(t-1)+(e-1),r=(n+1)*t+(e-1),o=(n+1)*t+e,s=(n+1)*(t-1)+e;f.push(i,r,s),f.push(r,o,s)}}function y(){for(let t=0;t<=e;t++)for(let i=0;i<=n;i++)l.x=t/e,l.y=i/n,d.push(l.x,l.y)}g(),this.setIndex(f),this.setAttribute("position",new Rr(c,3)),this.setAttribute("normal",new Rr(p,3)),this.setAttribute("uv",new Rr(d,2)),u(g,"generateBufferData"),u(m,"generateSegment"),u(v,"generateIndices"),u(y,"generateUVs")}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){let t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(e){return new t((new LO[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}};u(CT,"TubeGeometry");var rT=CT,QL=class extends Xt{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}};u(QL,"RawShaderMaterial");var sT=QL,KL=class extends ha{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new at(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=CO,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}};u(KL,"MeshStandardMaterial");var Nx=KL,JL=class extends ha{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=CO,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=TO,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}};u(JL,"MeshLambertMaterial");var ol=JL;function Wh(t,e,i){return $W(t)?new t.constructor(t.subarray(e,void 0!==i?i:t.length)):t.slice(e,i)}function qE(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}function $W(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}u(Wh,"arraySlice"),u(qE,"convertArray"),u($W,"isTypedArray");var $L=class{constructor(t,e,i,n){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,i=this._cachedIndex,n=e[i],r=e[i-1];t:{e:{let o;i:{n:if(!(t<n)){for(let o=i+2;;){if(void 0===n){if(t<r)break n;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(r=n,n=e[++i],t<n)break e}o=e.length;break i}if(t>=r)break t;{let s=e[1];t<s&&(i=2,r=s);for(let o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===o)break;if(n=r,r=e[--i-1],t>=r)break e}o=i,i=0}}for(;i<o;){let n=i+o>>>1;t<e[n]?o=n:i=n+1}if(n=e[i],r=e[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,t,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=t*n;for(let t=0;t!==n;++t)e[t]=i[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}};u($L,"Interpolant");var Pg=$L,eD=class extends Pg{constructor(t,e,i,n){super(t,e,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Oj,endingEnd:Oj}}intervalChanged_(t,e,i){let n=this.parameterPositions,r=t-2,o=t+1,s=n[r],a=n[o];if(void 0===s)switch(this.getSettings_().endingStart){case Lj:r=t,s=2*e-i;break;case Dj:r=n.length-2,s=e+n[r]-n[r+1];break;default:r=t,s=i}if(void 0===a)switch(this.getSettings_().endingEnd){case Lj:o=t,a=2*i-e;break;case Dj:o=1,a=i+n[1]-n[0];break;default:o=t-1,a=e}let l=.5*(i-e),u=this.valueSize;this._weightPrev=l/(e-s),this._weightNext=l/(a-i),this._offsetPrev=r*u,this._offsetNext=o*u}interpolate_(t,e,i,n){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,u=this._offsetPrev,h=this._offsetNext,c=this._weightPrev,p=this._weightNext,d=(i-e)/(n-e),f=d*d,g=f*d,m=-c*g+2*c*f-c*d,v=(1+c)*g+(-1.5-2*c)*f+(-.5+c)*d+1,y=(-1-p)*g+(1.5+p)*f+.5*d,x=p*g-p*f;for(let t=0;t!==s;++t)r[t]=m*o[u+t]+v*o[l+t]+y*o[a+t]+x*o[h+t];return r}};u(eD,"CubicInterpolant");var fO=eD,tD=class extends Pg{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=t*s,l=a-s,u=(i-e)/(n-e),h=1-u;for(let t=0;t!==s;++t)r[t]=o[l+t]*h+o[a+t]*u;return r}};u(tD,"LinearInterpolant");var pO=tD,nD=class extends Pg{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t){return this.copySampleValue_(t-1)}};u(nD,"DiscreteInterpolant");var dO=nD,iD=class{constructor(t,e,i,n){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=qE(e,this.TimeBufferType),this.values=qE(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(t){let e,i=t.constructor;if(i.toJSON!==this.toJSON)e=i.toJSON(t);else{e={name:t.name,times:qE(t.times,Array),values:qE(t.values,Array)};let i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}InterpolantFactoryMethodDiscrete(t){return new dO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new pO(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new fO(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case _g:e=this.InterpolantFactoryMethodDiscrete;break;case wg:e=this.InterpolantFactoryMethodLinear;break;case d6:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){let e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return _g;case this.InterpolantFactoryMethodLinear:return wg;case this.InterpolantFactoryMethodSmooth:return d6}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){let e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]+=t}return this}scale(t){if(1!==t){let e=this.times;for(let i=0,n=e.length;i!==n;++i)e[i]*=t}return this}trim(t,e){let i=this.times,n=i.length,r=0,o=n-1;for(;r!==n&&i[r]<t;)++r;for(;-1!==o&&i[o]>e;)--o;if(++o,0!==r||o!==n){r>=o&&(o=Math.max(o,1),r=o-1);let t=this.getValueSize();this.times=Wh(i,r,o),this.values=Wh(this.values,r*t,o*t)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==r;e++){let n=i[e];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,n),t=!1;break}if(null!==o&&o>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,n,o),t=!1;break}o=n}if(void 0!==n&&$W(n))for(let e=0,i=n.length;e!==i;++e){let i=n[e];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,i),t=!1;break}}return t}optimize(){let t=Wh(this.times),e=Wh(this.values),i=this.getValueSize(),n=this.getInterpolation()===d6,r=t.length-1,o=1;for(let s=1;s<r;++s){let r=!1,a=t[s];if(a!==t[s+1]&&(1!==s||a!==t[0]))if(n)r=!0;else{let t=s*i,n=t-i,o=t+i;for(let s=0;s!==i;++s){let i=e[t+s];if(i!==e[n+s]||i!==e[o+s]){r=!0;break}}}if(r){if(s!==o){t[o]=t[s];let n=s*i,r=o*i;for(let t=0;t!==i;++t)e[r+t]=e[n+t]}++o}}if(r>0){t[o]=t[r];for(let t=r*i,n=o*i,s=0;s!==i;++s)e[n+s]=e[t+s];++o}return o!==t.length?(this.times=Wh(t,0,o),this.values=Wh(e,0,o*i)):(this.times=t,this.values=e),this}clone(){let t=Wh(this.times,0),e=Wh(this.values,0),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}};u(iD,"KeyframeTrack");var zl=iD;zl.prototype.TimeBufferType=Float32Array,zl.prototype.ValueBufferType=Float32Array,zl.prototype.DefaultInterpolation=wg;var rD=class extends zl{};u(rD,"BooleanKeyframeTrack");var qp=rD;qp.prototype.ValueTypeName="bool",qp.prototype.ValueBufferType=Array,qp.prototype.DefaultInterpolation=_g,qp.prototype.InterpolantFactoryMethodLinear=void 0,qp.prototype.InterpolantFactoryMethodSmooth=void 0;var sD=class extends zl{};u(sD,"ColorKeyframeTrack");var mO=sD;mO.prototype.ValueTypeName="color";var oD=class extends zl{};u(oD,"NumberKeyframeTrack");var gO=oD;gO.prototype.ValueTypeName="number";var aD=class extends Pg{constructor(t,e,i,n){super(t,e,i,n)}interpolate_(t,e,i,n){let r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(i-e)/(n-e),l=t*s;for(let t=l+s;l!==t;l+=4)Ia.slerpFlat(r,0,o,l-s,o,l,a);return r}};u(aD,"QuaternionLinearInterpolant");var vO=aD,lD=class extends zl{InterpolantFactoryMethodLinear(t){return new vO(this.times,this.values,this.getValueSize(),t)}};u(lD,"QuaternionKeyframeTrack");var Rx=lD;Rx.prototype.ValueTypeName="quaternion",Rx.prototype.DefaultInterpolation=wg,Rx.prototype.InterpolantFactoryMethodSmooth=void 0;var uD=class extends zl{};u(uD,"StringKeyframeTrack");var Fp=uD;Fp.prototype.ValueTypeName="string",Fp.prototype.ValueBufferType=Array,Fp.prototype.DefaultInterpolation=_g,Fp.prototype.InterpolantFactoryMethodLinear=void 0,Fp.prototype.InterpolantFactoryMethodSmooth=void 0;var cD=class extends zl{};u(cD,"VectorKeyframeTrack");var yO=cD;yO.prototype.ValueTypeName="vector";var CW={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},hD=class{constructor(t,e,i){let n,r=this,o=!1,s=0,a=0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){a++,!1===o&&void 0!==r.onStart&&r.onStart(t,s,a),o=!0},this.itemEnd=function(t){s++,void 0!==r.onProgress&&r.onProgress(t,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return n?n(t):t},this.setURLModifier=function(t){return n=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){let e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=l.length;e<i;e+=2){let i=l[e],n=l[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return n}return null}}};u(hD,"LoadingManager");var Bx=hD,K0e=new Bx,fD=class{constructor(t){this.manager=void 0!==t?t:K0e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){let i=this;return new Promise((function(n,r){i.load(t,n,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}};u(fD,"Loader");var kx=fD,pD=class extends kx{constructor(t){super(t)}load(t,e,i,n){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);let r=this,o=CW.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;let s=bx("img");function a(){h(),CW.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){h(),n&&n(e),r.manager.itemError(t),r.manager.itemEnd(t)}function h(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1)}return u(a,"onImageLoad"),u(l,"onImageError"),u(h,"removeEventListeners"),s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(t),s.src=t,s}};u(pD,"ImageLoader");var xO=pD,dD=class extends kx{constructor(t){super(t)}load(t,e,i,n){let r=new Er,o=new xO(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),i,n),r}};u(dD,"TextureLoader");var fa=dD,mD=class extends ci{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new at(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}};u(mD,"Light");var qx=mD,U6=new Ot,PW=new K,IW=new K,gD=class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.map=null,this.mapPass=null,this.matrix=new Ot,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new kc,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new Fi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,i=this.matrix;PW.setFromMatrixPosition(t.matrixWorld),e.position.copy(PW),IW.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(IW),e.updateMatrixWorld(),U6.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(U6),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(U6)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){let t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}};u(gD,"LightShadow");var oT=gD,OW=new Ot,ax=new K,z6=new K,vD=class extends oT{constructor(){super(new as(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qe(4,2),this._viewportCount=6,this._viewports=[new Fi(2,1,1,1),new Fi(0,1,1,1),new Fi(3,1,1,1),new Fi(1,1,1,1),new Fi(3,0,1,1),new Fi(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(t,e=0){let i=this.camera,n=this.matrix,r=t.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),ax.setFromMatrixPosition(t.matrixWorld),i.position.copy(ax),z6.copy(i.position),z6.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(z6),i.updateMatrixWorld(),n.makeTranslation(-ax.x,-ax.y,-ax.z),OW.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(OW)}};u(vD,"PointLightShadow");var bO=vD,yD=class extends qx{constructor(t,e,i=0,n=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new bO}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}};u(yD,"PointLight");var aT=yD,xD=class extends oT{constructor(){super(new Sg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}};u(xD,"DirectionalLightShadow");var _O=xD,bD=class extends qx{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ci.DEFAULT_UP),this.updateMatrix(),this.target=new ci,this.shadow=new _O}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}};u(bD,"DirectionalLight");var lT=bD,_D=class extends qx{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};u(_D,"AmbientLight");var uT=_D,wD=class extends Ji{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}};u(wD,"InstancedBufferGeometry");var cT=wD,MD=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=LW(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let e=LW();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}};u(MD,"Clock");var hT=MD;function LW(){return(typeof performance>"u"?Date:performance).now()}u(LW,"now");var DO="\\[\\]\\.:\\/",J0e=new RegExp("["+DO+"]","g"),NO="[^"+DO+"]",$0e="[^"+DO.replace("\\.","")+"]",eve=/((?:WC+[\/:])*)/.source.replace("WC",NO),tve=/(WCOD+)?/.source.replace("WCOD",$0e),nve=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",NO),ive=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",NO),rve=new RegExp("^"+eve+tve+nve+ive+"$"),sve=["material","materials","bones","map"],ED=class{constructor(t,e,i){let n=i||Ai.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,n)}getValue(t,e){this.bind();let i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(t,e)}setValue(t,e){let i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}};u(ED,"Composite");var wO=ED,Yh=class t{constructor(e,i,n){this.path=i,this.parsedPath=n||t.parseTrackName(i),this.node=t.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,i,n){return e&&e.isAnimationObjectGroup?new t.Composite(e,i,n):new t(e,i,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(J0e,"")}static parseTrackName(t){let e=rve.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){let t=i.nodeName.substring(n+1);-1!==sve.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){let i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){let i=u((function(t){for(let n=0;n<t.length;n++){let r=t[n];if(r.name===e||r.uuid===e)return r;let o=i(r.children);if(o)return o}return null}),"searchNodeSubtree"),n=i(t.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)t[e++]=i[n]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++]}_setValue_array_setNeedsUpdate(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let e=this.node,i=this.parsedPath,n=i.objectName,r=i.propertyName,o=i.propertyIndex;if(e||(e=t.findNode(this.rootNode,i.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let t=i.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let i=0;i<e.length;i++)if(e[i].name===t){t=i;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==t){if(void 0===e[t])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[t]}}let s=e[r];if(void 0===s){let t=i.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+t+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};u(Yh,"PropertyBinding");var Ai=Yh;Ai.Composite=wO,Ai.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ai.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ai.prototype.GetterByBindingType=[Ai.prototype._getValue_direct,Ai.prototype._getValue_array,Ai.prototype._getValue_arrayElement,Ai.prototype._getValue_toArray],Ai.prototype.SetterByBindingTypeAndVersioning=[[Ai.prototype._setValue_direct,Ai.prototype._setValue_direct_setNeedsUpdate,Ai.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ai.prototype._setValue_array,Ai.prototype._setValue_array_setNeedsUpdate,Ai.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ai.prototype._setValue_arrayElement,Ai.prototype._setValue_arrayElement_setNeedsUpdate,Ai.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ai.prototype._setValue_fromArray,Ai.prototype._setValue_fromArray_setNeedsUpdate,Ai.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var uct=new Float32Array(1),PT=class t{constructor(t){this.value=t}clone(){return new t(void 0===this.value.clone?this.value:this.value.clone())}};u(PT,"Uniform");var St=PT,TD=class{constructor(t,e,i=0,n=1/0){this.ray=new _x(t,e),this.near=i,this.far=n,this.camera=null,this.layers=new wx,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,i=[]){return MO(t,this,i,e),i.sort(DW),i}intersectObjects(t,e=!0,i=[]){for(let n=0,r=t.length;n<r;n++)MO(t[n],this,i,e);return i.sort(DW),i}};u(TD,"Raycaster");var pa=TD;function DW(t,e){return t.distance-e.distance}function MO(t,e,i,n){if(t.layers.test(e.layers)&&t.raycast(e,i),!0===n){let n=t.children;for(let t=0,r=n.length;t<r;t++)MO(n[t],e,i,!0)}}u(DW,"ascSort"),u(MO,"intersectObject");var SD=class extends JE{constructor(t=10,e=10,i=4473924,n=8947848){i=new at(i),n=new at(n);let r=e/2,o=t/e,s=t/2,a=[],l=[];for(let t=0,u=0,h=-s;t<=e;t++,h+=o){a.push(-s,0,h,s,0,h),a.push(h,0,-s,h,0,s);let e=t===r?i:n;e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3,e.toArray(l,u),u+=3}let u=new Ji;u.setAttribute("position",new Rr(a,3)),u.setAttribute("color",new Rr(l,3)),super(u,new Ax({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};u(SD,"GridHelper");var fT=SD,FE=new Yt,AD=class extends JE{constructor(t,e=16776960){let i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new Ji;r.setIndex(new rn(i,1)),r.setAttribute("position",new rn(n,3)),super(r,new Ax({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&FE.setFromObject(this.object),FE.isEmpty())return;let e=FE.min,i=FE.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=e.x,r[4]=i.y,r[5]=i.z,r[6]=e.x,r[7]=e.y,r[8]=i.z,r[9]=i.x,r[10]=e.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=e.z,r[15]=e.x,r[16]=i.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=i.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}};u(AD,"BoxHelper");var pT=AD,CD=class{constructor(){this.type="ShapePath",this.color=new at,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new Bp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,n){return this.currentPath.quadraticCurveTo(t,e,i,n),this}bezierCurveTo(t,e,i,n,r,o){return this.currentPath.bezierCurveTo(t,e,i,n,r,o),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(t){let e=[];for(let i=0,n=t.length;i<n;i++){let n=t[i],r=new Ul;r.curves=n.curves,e.push(r)}return e}function i(t,e){let i=e.length,n=!1;for(let r=i-1,o=0;o<i;r=o++){let i=e[r],s=e[o],a=s.x-i.x,l=s.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=e[o],a=-a,s=e[r],l=-l),t.y<i.y||t.y>s.y)continue;if(t.y===i.y){if(t.x===i.x)return!0}else{let e=l*(t.x-i.x)-a*(t.y-i.y);if(0===e)return!0;if(e<0)continue;n=!n}}else{if(t.y!==i.y)continue;if(s.x<=t.x&&t.x<=i.x||i.x<=t.x&&t.x<=s.x)return!0}}return n}u(e,"toShapesNoHoles"),u(i,"isPointInsidePolygon");let n=yg.isClockWise,r=this.subPaths;if(0===r.length)return[];let o,s,a,l=[];if(1===r.length)return s=r[0],a=new Ul,a.curves=s.curves,l.push(a),l;let h=!n(r[0].getPoints());h=t?!h:h;let c,p,d=[],f=[],g=[],m=0;f[m]=void 0,g[m]=[];for(let e=0,i=r.length;e<i;e++)s=r[e],c=s.getPoints(),o=n(c),o=t?!o:o,o?(!h&&f[m]&&m++,f[m]={s:new Ul,p:c},f[m].s.curves=s.curves,h&&m++,g[m]=[]):g[m].push({h:s,p:c[0]});if(!f[0])return e(r);if(f.length>1){let t=!1,e=0;for(let t=0,e=f.length;t<e;t++)d[t]=[];for(let n=0,r=f.length;n<r;n++){let r=g[n];for(let o=0;o<r.length;o++){let s=r[o],a=!0;for(let r=0;r<f.length;r++)i(s.p,f[r].p)&&(n!==r&&e++,a?(a=!1,d[r].push(s)):t=!0);a&&d[n].push(s)}}e>0&&!1===t&&(g=d)}for(let t=0,e=f.length;t<e;t++){a=f[t].s,l.push(a),p=g[t];for(let t=0,e=p.length;t<e;t++)a.holes.push(p[t].h)}return l}};u(CD,"ShapePath");var dT=CD,PD=class extends To{constructor(t,e,i,n){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(t,e,i,n)}};u(PD,"PlaneBufferGeometry");var mT=PD;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zc}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zc),E();var eY=!1,ID=class{constructor(){A(this,"textureLoader",new fa)}async loadMapPolygons(t){return eY&&Le.log("loading map: ",t.scene.polygons),(await _o()(t.scene.polygons)).json()}loadImage(t){return new Promise(((e,i)=>{eY&&Le.log("loading image: ",t),this.textureLoader.load(t,(t=>{t.colorSpace=Lr,e(t)}),(()=>{}),i)}))}};u(ID,"DefaultAssetManager");var Gc=ID,LD=class{constructor(){A(this,"defaultExtrudeSettings",{amount:10,bevelEnabled:!1}),A(this,"materials",{}),A(this,"scale",100),A(this,"assetManager",new Gc),A(this,"overlayHeight",.15)}setAssetManager(t){this.assetManager=t}load(t,e,i){if("string"==typeof t)return this.assetManager.loadMapPolygons(e).then((t=>null==t||0===t.length?Promise.reject("No polygons found for venue"):this._build(t,e,i))).catch((t=>Promise.reject(t)));try{return this._build(t,e,i)}catch(t){return Promise.reject(t)}}_build(t,e,i){let n=new Set;e.layers.forEach((t=>{!1!==t.visible&&n.add(t.id)}));let r=new lo,o=t.map((t=>{let o=t.layer||"Polygon",s=/__.*__/.exec(o);return n.has(o)||s?new Up(t,e,r,this.assetManager,i):null})).filter((t=>t));return Promise.resolve({container:r,elements:o,visibleLayers:n})}};u(LD,"JSONSceneLoader");var OD=LD,Dg=new OD;E();var tY=(t=>(t.ANIMATED="animated",t.ALWAYS_ON_TOP="always_on_top",t.ALL="all",t.TWEEN="tween",t.COMPOSITE="composite",t))(tY||{}),un=tY;E();var nY=0,ove=!1,RD=class{constructor(t,e){A(this,"core"),A(this,"currentScene"),A(this,"processedMapObjects",new Set),this.core=t,ove&&this.renderGrid(),this.transitionTo(e).then((()=>{this.core.publish(0)})).catch((t=>{Le.error(t)}))}get currentMap(){return this.currentScene.currentMap}renderGrid(){var t=new fT(1e4,10);t.setColors(233696766,14606046),t.position.z=-10,t.rotation.x=Math.PI/2,this.core.scene.add(t)}async transitionTo(t,e){this.core.publish(6);let i=this.currentScene;t.transitionOptions=e||{},t.currentMap=(null==e?void 0:e.activeMap)||t.maps[0],this.currentScene=t;let n=await t.preRender(e);t.mapObjectsArray=await Promise.all(n);let r=[],o=[],s=!1;if(i){s=i.currentMap.mapGroup!==t.currentMap.mapGroup;for(let t of i.mapObjects.values())r.push(t.fadeOut(void 0,{onComplete:()=>{t.onInvisible(),i.object.remove(t.object)},duration:nY}))}for(let e of t.mapObjects.values())t.object.add(null==e?void 0:e.object),e.object.position.z=0,o.push(e.fadeIn(void 0,{onComplete:()=>{e.onVisible()},duration:nY}));this.core.tryRendering(),await Promise.all(r.map((t=>t.start()))),this.core.scene.add(t.object),await Promise.all([...o.map((t=>t.start())),t.focusOnCurrentMap(s?{...e,autoFocusOnActiveMap:!0}:void 0,null==i)]),null!=i&&this.core.scene.remove(i.object),t.postRender(),this.core.publish(7),null==i&&this.core.publish(0)}};u(RD,"SceneManager");var DD=RD,ND=DD;E();var kD=class{constructor(t,e){A(this,"dynamicFocusScene"),A(this,"core"),A(this,"panBounds"),A(this,"mapShouldSetOnUserInteraction",!0),this.core=t,this.dynamicFocusScene=new qD(t,e),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.CHANGE_EVENT.type,(()=>{this.update()})),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,(()=>{this.determineTargetMap()})),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,(()=>{this.determineTargetMap()})),this.core.controls.dispatcher.addEventListener(this.core.controls.CAMERA_EVENTS.PAN_END_EVENT.type,(()=>{this.determineTargetMap()})),this.transitionTo().then((()=>{this.core.publish(0)}))}get currentScene(){return{resize:this.dynamicFocusScene.resize,currentMap:this.dynamicFocusScene.currentMap,mapObjects:this.core.mapObjects}}get currentMap(){return this.dynamicFocusScene.currentMap}setDefaultMapForMapGroup(t,e){let i=this.dynamicFocusScene.buildings.find((e=>e.mapGroup.id===t.id));null!=i&&i.mapGroup.maps.includes(e)&&(i.activeMap=void 0,i.defaultMap=e)}resetDefaultMapForMapGroup(t){let e=this.dynamicFocusScene.buildings.find((e=>e.mapGroup.id===t.id));null!=e&&(e.defaultMap=e.startingMap)}determineTargetMap(){let t=this.dynamicFocusScene.determineCurrentMap();this.mapShouldSetOnUserInteraction&&null!=t&&this.dynamicFocusScene.setMap(t,!0),this.update()}update(){this.core.taskScheduler.scheduleTask(new Hi({name:"setDynamicFocusOpacities",callback:()=>{let t=this.dynamicFocusScene.determineBuildingsInView();this.dynamicFocusScene.setOpacities(t,this.dynamicFocusScene.currentMap)}}))}async transitionTo(t){if(this.dynamicFocusScene.loaded||(await this.dynamicFocusScene.load(),this.core.scene.add(this.dynamicFocusScene.object)),null!=t){let e=t.maps[0],i=this.dynamicFocusScene.buildings.find((t=>t.mapGroup.id===e.mapGroup.id));null!=i&&await i.setMap(e),this.dynamicFocusScene.setMap(e),this.update()}}};u(kD,"DynamicFocusSceneManager");var BD=kD,zx=BD;function RT(t,e=!1){let i=null!==t[0].index,n=new Set(Object.keys(t[0].attributes)),r=new Set(Object.keys(t[0].morphAttributes)),o={},s={},a=t[0].morphTargetsRelative,l=new Ji,u=0;for(let h=0;h<t.length;++h){let c=t[h],p=0;if(i!==(null!==c.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let t in c.attributes){if(!n.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+t+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[t]&&(o[t]=[]),o[t].push(c.attributes[t]),p++}if(p!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(a!==c.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let t in c.morphAttributes){if(!r.has(t))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[t]&&(s[t]=[]),s[t].push(c.morphAttributes[t])}if(e){let t;if(i)t=c.index.count;else{if(void 0===c.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;t=c.attributes.position.count}l.addGroup(u,t,h),u+=t}}if(i){let e=0,i=[];for(let n=0;n<t.length;++n){let r=t[n].index;for(let t=0;t<r.count;++t)i.push(r.getX(t)+e);e+=t[n].attributes.position.count}l.setIndex(i)}for(let t in o){let e=iY(o[t]);if(!e)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+t+" attribute."),null;l.setAttribute(t,e)}for(let t in s){let e=s[t][0].length;if(0===e)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[t]=[];for(let i=0;i<e;++i){let e=[];for(let n=0;n<s[t].length;++n)e.push(s[t][n][i]);let n=iY(e);if(!n)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+t+" morphAttribute."),null;l.morphAttributes[t].push(n)}}return l}function iY(t){let e,i,n,r=0;for(let o=0;o<t.length;++o){let s=t[o];if(s.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=s.array.constructor),e!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===i&&(i=s.itemSize),i!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===n&&(n=s.normalized),n!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=s.array.length}let o=new e(r),s=0;for(let e=0;e<t.length;++e)o.set(t[e].array,s),s+=t[e].array.length;return new rn(o,i,n)}E(),E(),u(RT,"mergeGeometries"),u(iY,"mergeAttributes"),E();var FD=class{constructor(){A(this,"_subscribers",{})}publish(t,e){!this._subscribers||!this._subscribers[t]||this._subscribers[t].forEach((function(t){"function"==typeof t&&t(e)}))}on(t,e){this._subscribers||(this._subscribers={}),this._subscribers[t]=this._subscribers[t]||[],this._subscribers[t].push(e)}off(t,e){if(!this._subscribers||null==this._subscribers[t])return;let i=this._subscribers[t].indexOf(e);-1!==i&&this._subscribers[t].splice(i,1)}destroy(){this._subscribers={}}};u(FD,"PubSub");var al=FD;function $h(t){let e=new al;Object.assign(e,t);for(let i in t)if(null!=i){let n=t[i];if("function"==typeof n)continue;e["_".concat(i)]=n,Object.defineProperty(e,i,{get:()=>e["_".concat(i)],set(t){let n=e["_".concat(i)];e["_".concat(i)]=t,e.publish("".concat(i,"Changed"),{oldValue:n,newValue:e[i]})}})}return e}u($h,"tinyObservable"),E();var UD=Bt(Eu());function ef(t){t&&(t.map&&(t.map.dispose(),t.map=void 0),t.dispose())}function Oi(t){return"string"==typeof t?t:t.id}function La(t,e){if(void 0!==e)return"string"==typeof t?e.find((function(e){return e.id===t})):t}function Vc(t,e){for(let i=0;i<e.length;i++)t.push(e[i])}function BT(t){if(t.scale||t.x_scale)return 1/(t.scale||t.x_scale);let e;try{let i=t.georeference[0],n=t.georeference[2],r=new mi(i.target.x,i.target.y),o=new mi(n.target.x,n.target.y),s=r.distanceTo(o),a=i.control.x-n.control.x,l=i.control.y-n.control.y;e=Math.sqrt(a*a+l*l)/s}catch(i){e=1,Le.warn(i),Le.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e}function sY(t){let e;try{let i=t.georeference[0],n=t.georeference[2],r=new mi(i.target.x,i.target.y),o=new mi(n.target.x,n.target.y);e=-((r.finalBearingTo(o)+0)*Math.PI/180-Math.atan2(n.control.y-i.control.y,n.control.x-i.control.x)-Math.PI/2)}catch(i){e=0,Le.warn(i),Le.warn("Couldn't georeference "+(t.name||t.shortName||t.id)+". Probably not enough geocoordinates.")}return e}function oY(t,e,i){let n,r,o,s=null,a=0;i||(i={});let l=u((function(){a=!1===i.leading?0:Date.now(),s=null,o=t.apply(n,r),s||(n=r=null)}),"later");return function(...r){let u=Date.now();!a&&!1===i.leading&&(a=u);let h=e-(u-a);return h<=0||h>e?(s&&(clearTimeout(s),s=null),a=u,o=t.apply(this,r),s||(n=r=null)):!s&&!1!==i.trailing&&(s=setTimeout(l,h)),o}}function Da(t,e,i=!1){let n=null,r=0;return function(...o){r++,1===r&&!0===i&&t.apply(this,o);let s=u((()=>{(!i||r>1)&&t.apply(this,o),n=null,r=0}),"later");clearTimeout(n),n=setTimeout(s,e)}}function zD(t){return t.reduce(((t,e)=>t.includes(e)?t:[...t,e]),[])}function GD(t,e,i){let n=t*(Math.PI/180)/2,r=e/2;return i*Math.tan(n)/r}function aY(t,e,i){let n=[t],r=(e.x-t.x)/i,o=(e.y-t.y)/i,s=(e.z-t.z)/i;for(let e=1;e<i;e++){let i=t.clone(),a=new K(e*r,e*o,e*s);i.add(a),n.push(i)}return n.push(e),n}u(ef,"scrubMaterial"),u(Oi,"getObjectId"),u(La,"getObject"),u(Vc,"appendItems"),u(BT,"getMapScale"),u(sY,"getNorth"),u(oY,"throttle"),u(Da,"debounce"),u(zD,"uniq"),u(GD,"getProjectionScaleFactor"),u(aY,"splitLine");var Gx=u(((t,e)=>{let i,n=t.venue.defaultMap;if(e&&e.firstMap){let t=Oi(e.firstMap);null==t?Le.warn("Invalid map id provided to 'firstMap' option. Ignoring."):n=t}if(n)for(let e=0,r=t.maps.length;e<r;++e)if(t.maps[e].id===n){i=t.maps[e];break}if(!i){let e=t.maps[0];for(let i of t.maps.slice(1))e=Math.abs(i.elevation)===Math.abs(e.elevation)?i.elevation>e.elevation?i:e:Math.abs(i.elevation)<Math.abs(e.elevation)?i:e;i=e}return i}),"determineStartingMap");function VD(t,e=0){let i=3735928559^e,n=1103547991^e;for(let e,r=0;r<t.length;r++)e=t.charCodeAt(r),i=Math.imul(i^e,2654435761),n=Math.imul(n^e,1597334677);return i=Math.imul(i^i>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(i^i>>>13,3266489909),4294967296*(2097151&n)+(i>>>0)}function lY(t,e){let i=t.getCenter(new K),n=t.getSize(new K),{x:r,y:o,z:s}=n,a=r*e,l=o*e,u=s*e,h=i.x-a/2,c=i.x+a/2,p=i.y-l/2,d=i.y+l/2,f=i.z-u/2,g=i.z+u/2;return new Yt({x:h,y:p,z:f},{x:c,y:d,z:g})}function ll({from:t,to:e,duration:i=300,easing:n=UD.default.Easing.Quadratic.Out,delay:r=0,onUpdate:o=u((t=>{}),"onUpdate"),onStart:s=u((()=>{}),"onStart"),onComplete:a=u((()=>{}),"onComplete")}){let l=new UD.default.Tween(t).to(e,i).easing(n).delay(r).onStart(s).onUpdate((t=>{o(t)}));return{start:t=>new Promise((e=>{l.onComplete((()=>{a(),e()})).start(),t.tryRendering()}))}}u(VD,"cyrb53"),u(lY,"addMarginMultiplierToBoundingBox"),u(ll,"tweenPromise");var ave=u((t=>t),"linearEase"),Vx=u((t=>t*t),"quadEaseIn");function tf(t,e,i,n,r,o=ave){return n+o(((t=Math.max(e,Math.min(t,i)))-Math.min(e,i))/Math.abs(i-e))*(r-n)}function uY(t,e,i,n=Vx){if(e.length!==i.length)throw new Error("Input and output ranges must have the same number of values.");t=Math.max(e[0],Math.min(t,e[e.length-1]));let r=0;for(;r<e.length-1&&t>e[r+1];)r++;let o=n((t-e[r])/(e[r+1]-e[r]));return i[r]+o*(i[r+1]-i[r])}u(tf,"interpolate"),u(uY,"interpolateMulti");var Gl={VISIBLE_MAP_HIGH:5,VISIBLE_MAP_LOW:4,VISIBLE_MAP_MARKER:3,ASYNC_MAP_HIGH:2,ASYNC_MAP_LOW:1,ASYNC_MAP_MARKER:0,MAP_LOADED:-1},Ng={MAP_ELEMENT:0,BUILDING_OUTLINE:1,MAP_HOVER:2,POLYGON_IMAGE:3};function lve(t){let e=[],i=[];for(let n=0;n<t.length;n++){let{zoomLevel:r,opacity:o}=t[n];e.push(r),i.push(o)}return{inputZoomLevel:e,outputOpacity:i}}function dY(t,e){var i,n,r,o;null!=(r=null==(n=null==(i=t.map)?void 0:i.image)?void 0:n.src)&&r.includes(".png")||null!=(o=t.userData)&&o.isPolygonImage||(t.transparent=1!==e)}u(lve,"convertToShortHandInterpolation"),u(dY,"setTransparency");var pY,cY=new ci,uve=1,cve=!1,hY={Floor:1,Wall:2,"Outer Wall":2.2,Anchors:4,Anchor:4,"Anchor Store":4,Polygon:5,Kiosks:6,"Inner Wall":7,"Non Public":7.5},fY=u((t=>{if(hY[t.layer])return hY[t.layer];let e=t.geometry.scale,i=t.geometry.position;return 100+(e?e.z:1)+(i?i.z:0)}),"calculateScore"),jD=class{constructor(t,e,i,n){A(this,"mergedObjectsGroup",new lo),A(this,"hoverObjectsGroup",new lo),A(this,"objectsByMaterials",new Map),A(this,"hoverableMeshChildren",[]),A(this,"_isVisible",!1),A(this,"needsUpdate",!1),A(this,"userData",{}),A(this,"opacity",1),A(this,"core"),A(this,"mapObject"),A(this,"name"),A(this,"layers"),A(this,"interpolationFn",null),A(this,"opacityInterpolation"),this.mapObject=t,this.core=t.core,this.name=e,this.layers=i,this._isVisible=n}set isVisible(t){t!==this._isVisible&&(this._isVisible=t,this.core.publish(32,this.mapObject.mapClass))}get isVisible(){return this._isVisible}dispose(){this.hoverObjectsGroup.clear(),this.mergedObjectsGroup.children.forEach((t=>{t.userData.merged&&t.destroy()})),this.objectsByMaterials.clear()}setOpacity(t){var e,i;this.opacity=t;for(let{material:n}of[...this.mergedObjectsGroup.children,...this.hoverableMeshChildren]){let r=tf(t,0,1,0,null!=(i=null==(e=n.userData)?void 0:e.originalOpacity)?i:1);dY(n,r),n.opacity=r,n.needsUpdate=!0}0===t?(this.hoverObjectsGroup.visible=!1,this.mergedObjectsGroup.visible=!1):(this.hoverObjectsGroup.visible=!0,this.mergedObjectsGroup.visible=!0)}};u(jD,"LayerGroup");var Hx=jD,WD=class extends al{constructor(t,e,i,n,r){var o;super(),A(this,"_flippableImagedById",{}),A(this,"_started",!1),A(this,"_loaderPromise"),A(this,"_promiseResolve",u((()=>{}),"_promiseResolve")),A(this,"_showCount"),A(this,"_taskScheduler"),A(this,"_highPriorityTasks"),A(this,"_lowPriorityTasks"),A(this,"_markerTasks"),A(this,"_mapLoadedTasks"),A(this,"_visibilityLatch"),A(this,"_objLoadedComplete"),A(this,"_hoverableMeshChildren",[]),A(this,"imageMeshesById",{}),A(this,"visible",!1),A(this,"objectsDictionary",{}),A(this,"north",0),A(this,"mapScale",null),A(this,"object",new ci),A(this,"labels",new Set),A(this,"tooltips",new Set),A(this,"markers",new Set),A(this,"box",new Yt),A(this,"textObjects",[]),A(this,"labelBatchCreator",null),A(this,"imagesToFlip",[]),A(this,"seenByCamera",!1),A(this,"threeJSMarkers",new Map),A(this,"core"),A(this,"mapClass"),A(this,"polygonMeshesById"),A(this,"loadMethod"),A(this,"loadAsync"),A(this,"id"),A(this,"mapRenderingStrategy"),A(this,"needsUpdate",!1),A(this,"layerGroups",new Map),A(this,"loadedLayerNames",[]),A(this,"loadedElements",[]),A(this,"boundingBox"),A(this,"elements",[]),A(this,"loadMethodUsed",""),A(this,"mapLoaded",null),this.core=n,this.mapClass=t,this.polygonMeshesById=e,this._showCount=i,this.loadMethod="json",this.loadAsync=null!=(o=r.async)&&o,this._taskScheduler=r.taskScheduler,this.id=this.mapClass.id,this.mapRenderingStrategy=(null==r?void 0:r.mapRenderStrategy)||"SINGLE_GEOMETRY",this._highPriorityTasks=new dc({name:"_highPriorityTasks",onComplete:this._checkIfLoaded.bind(this),priority:!this.visible&&this.loadAsync?Gl.ASYNC_MAP_HIGH:Gl.VISIBLE_MAP_HIGH,postponeOnAdd:!this.visible&&!this.loadAsync,userdata:{}}),this._lowPriorityTasks=new dc({name:"_lowPriorityTasks",onComplete:this._checkIfLoaded.bind(this),priority:!this.visible&&this.loadAsync?Gl.ASYNC_MAP_LOW:Gl.VISIBLE_MAP_LOW,postponeOnAdd:!this.visible&&!this.loadAsync,userdata:{}}),this._markerTasks=new dc({name:"_markerTasks",priority:!this.visible&&this.loadAsync?Gl.ASYNC_MAP_MARKER:Gl.VISIBLE_MAP_MARKER,postponeOnAdd:!this.visible,userdata:{}}),this._mapLoadedTasks=new dc({name:"_mapLoadedTasks",priority:Gl.MAP_LOADED,postponeOnAdd:!this.isReady(),userdata:{}}),this._visibilityLatch=null,this._objLoadedComplete=!1,this._loaderPromise=new Promise(((t,e)=>{this._promiseResolve=t,pY=e})),this._objLoaded=this._objLoaded.bind(this),this._objLoadedMerged=this._objLoadedMerged.bind(this),this.enableImageFlipping=this.enableImageFlipping.bind(this),this.destroy=this.destroy.bind(this),this.core.on(32,(()=>{this.needsUpdate=!0}))}fade(t,{direction:e="in",onComplete:i=u((()=>{}),"onComplete"),duration:n=300}){let r="string"==typeof t?[this.layerGroups.get(t)]:this.layerGroups,o={};return r.forEach((t=>{o[t.name]=t.opacity})),{start:()=>new Promise((t=>{ll({from:{opacity:"in"===e?0:1},to:{opacity:"in"===e?1:0},duration:n,onStart:()=>{"out"===e&&r.forEach((t=>{t.isVisible=!1}))},onComplete:()=>{"in"===e&&r.forEach((t=>{t.isVisible=!0})),i(),t()},onUpdate:({opacity:t})=>{r.forEach((i=>{let n,r=o[i.name];n="in"===e?tf(t,0,1,r,1):tf(t,0,1,0,r),i.setOpacity(n)})),this.core.tryRendering()}}).start(this.core),this.core.tryRendering()}))}}fadeIn(t=Array.from(this.layerGroups.keys()),e={onComplete:()=>{},duration:300}){return this.fade(t,{direction:"in",onComplete:null==e?void 0:e.onComplete,duration:null==e?void 0:e.duration})}fadeOut(t=Array.from(this.layerGroups.keys()),e={onComplete:()=>{},duration:300}){return this.fade(t,{direction:"out",onComplete:null==e?void 0:e.onComplete,duration:null==e?void 0:e.duration})}renderLayerGroup(t=[],e=[]){let i=Cr();Array.from(this.layerGroups.values()).forEach((t=>{t.isVisible=!1,this.object.remove(t.mergedObjectsGroup),this.object.remove(t.hoverObjectsGroup),t.dispose()}));let n=this.processLayerGroup(i,t,e);this.layerGroups.clear(),this.layerGroups.set(i,n),n.isVisible=!0,this.object.add(n.mergedObjectsGroup),this.object.add(n.hoverObjectsGroup),this.needsUpdate=!0}processLayers(t,e=[],i=[]){let n=[];return n=0===e.length&&0===i.length?[]:e.length>0?t.filter((t=>e.includes(t))):[...t],i.length>0&&(n=n.filter((t=>!i.includes(t)))),n}processLayerGroup(t=Cr(),e=[],i=[],n=!0,r=this.loadedElements,o=Ng.MAP_ELEMENT){var s,a;let l=new Hx(this,t,[],n),u=this.processLayers([...this.loadedLayerNames,...e],e,i);if(0===u.length&&0===r.length)return l;for(let e of r){if(this.layerGroups.has(t)?l=this.layerGroups.get(t):(l=new Hx(this,t,zD(u),n),l.isVisible=n,l.mergedObjectsGroup.name=this.mapClass.id,this.layerGroups.set(t,l)),e&&e.visible&&e.polygon.layer&&u.includes(e.polygon.layer)){l.objectsByMaterials.has(e.material)?null==(s=l.objectsByMaterials.get(e.material))||s.push(e):l.objectsByMaterials.set(e.material,[e]);let i=e.material.clone();i.userData={layer:t},e.mesh.material=i,e.mesh.visible=!1,e.mesh.material.transparent=!0,e.mesh.renderOrder=Ng.MAP_HOVER,l.hoverObjectsGroup.add(e.mesh),l.hoverableMeshChildren.push(e.mesh)}e&&e.imageMesh&&e.polygon.layer&&u.includes(e.polygon.layer)&&(e.imageMesh.material.userData={...e.imageMesh.material.userData,layer:t},e.imageMesh.renderOrder=Ng.POLYGON_IMAGE,l.mergedObjectsGroup.add(e.imageMesh))}for(let[t,e]of l.objectsByMaterials){let i=RT(e.map((t=>t.geometry)),!1),n=t.clone();n.userData={...n.userData,layer:l.name,originalOpacity:null!=(a=n.opacity)?a:1},n.alphaTest=.01,dY(n,n.userData.originalOpacity);let r=new Ft(i,n);r.renderOrder=o,l.mergedObjectsGroup.add(r)}return!1===n&&l.setOpacity(0),this.loadedLayerNames=zD([...this.loadedLayerNames,...e]),l}get hoverableMeshChildren(){if(this.needsUpdate){this._hoverableMeshChildren=[];for(let t of this.layerGroups.values())t.isVisible&&this._hoverableMeshChildren.push(...t.hoverableMeshChildren);this.needsUpdate=!1}return this._hoverableMeshChildren}async _objLoadedMerged(t){if(t.elements){this.elements=t.elements;let e=Object.values(this.elements),i=new K(1/0,1/0,0),n=new K(-1/0,-1/0,0);this.boundingBox={min:i,max:n},t=t.container,this.object=t,this.object.userData.type="mappedin_map",this.object.userData.mapId=this.mapClass.id,await Promise.all(e.map((t=>{let e=t.getBoundingBox();return i.min(e.min),n.max(e.max),t.polygon.layer&&!this.loadedLayerNames.includes(t.polygon.layer)&&this.loadedLayerNames.push(t.polygon.layer),t.load()}))).then((t=>{var e,i,n,r,o,s,a,l,u,h,c,p,d,f,g,m,v;let y;if(t.forEach((t=>{if(t.imageVisible){let e=t.imageMesh;if(this.imageMeshesById[e.name]=e,this.polygonMeshesById[e.name]=e,t.on("texture-loaded",(t=>{this.core.publish(1,t)})),t.polygon.image){let e=null!=t.polygon.image.rotation?t.polygon.image.rotation.z:0;this.core.imageFlippingEnabled&&this.enableImageFlipping(t.polygon.id,e*(Math.PI/180))}}t.mesh&&(this.objectsDictionary[t.polygon.id]=t.mesh,this.polygonMeshesById[t.polygon.id]=t.mesh)})),this.loadedElements=t,null!=(null==(i=null==(e=this.core.options)?void 0:e.dynamicFocus)?void 0:i.baseMap))if((null==(r=null==(n=this.core.options)?void 0:n.dynamicFocus)?void 0:r.baseMap)===this.mapClass){let t=[];for(let e of this.loadedElements){let i=this.core.venue.getCollectionItemById("polygons",e.polygon.id),n=null==(o=null==i?void 0:i.locations)?void 0:o.find((t=>null!=t.toMap)),r=n?this.core.venue.mapGroups.find((t=>t.maps.map((t=>t.id)).includes(n.toMap))):null;if(r){let t="building-outline-".concat(r.id),i=this.processLayerGroup(t,this.loadedLayerNames,[],!0,[e],Ng.BUILDING_OUTLINE);i.userData={location:(null!=(a=null==(s=this.core.options.dynamicFocus)?void 0:s.keepLayersActiveOnBaseMap)?a:[]).length?n:void 0,toMapId:null==n?void 0:n.toMap,mapGroupId:r.id},this.layerGroups.set(t,i),this.object.add(i.mergedObjectsGroup),this.object.add(i.hoverObjectsGroup)}else t.push(e)}t.length>0?y=this.processLayerGroup("default",this.loadedLayerNames,[],!0,t):(y=new Hx(this,"default",this.loadedLayerNames,!0),y.isVisible=!0)}else y=this.processLayerGroup("default",this.loadedLayerNames,[],!1,this.loadedElements);else if(Array.isArray(null==(l=this.core.options)?void 0:l.layerGroups)){let t=null==(u=this.core.options)?void 0:u.layerGroups.flatMap((t=>t.layers));y=this.processLayerGroup("default",void 0,t,!0);for(let t of null==(h=this.core.options)?void 0:h.layerGroups){let e=Cr(),i=this.processLayerGroup(e,t.layers,void 0,null==(c=t.isVisible)||c,this.loadedElements);if(null!=(null==t?void 0:t.opacityInterpolation)&&i.isVisible){let e=t.opacityInterpolation;Array.isArray(t.opacityInterpolation)&&(e=lve(t.opacityInterpolation)),e instanceof Object&&"inputZoomLevel"in e&&"outputOpacity"in e&&(null==(null==e?void 0:e.inputZoomLevel)||null==(null==e?void 0:e.outputOpacity)?Le.error("Invalid opacity interpolation"):i.interpolationFn=t=>{if(e instanceof Object&&"inputZoomLevel"in e&&"outputOpacity"in e)return uY(t,e.inputZoomLevel,e.outputOpacity)})}i.isVisible&&(this.layerGroups.set(e,i),this.object.add(i.mergedObjectsGroup),this.object.add(i.hoverObjectsGroup))}}else if(null!=(d=null==(p=this.core.options)?void 0:p.loadOptions)&&d.outdoorGeometryLayers&&Array.isArray(null==(g=null==(f=this.core.options)?void 0:f.loadOptions)?void 0:g.outdoorGeometryLayers)&&(null==(v=null==(m=this.core.options)?void 0:m.loadOptions)?void 0:v.outdoorGeometryLayers.length)>0){y=this.processLayerGroup("default",this.loadedLayerNames,this.core.options.loadOptions.outdoorGeometryLayers,!0,this.loadedElements);let t=this.processLayerGroup("outdoor-geometry",this.core.options.loadOptions.outdoorGeometryLayers,[],!0,this.loadedElements);this.layerGroups.set("outdoor-geometry",t),this.object.add(t.mergedObjectsGroup),this.object.add(t.hoverObjectsGroup)}else y=this.processLayerGroup("default",this.loadedLayerNames,[],!0,this.loadedElements);this.layerGroups.set("default",y),this.object.add(y.mergedObjectsGroup),this.object.add(y.hoverObjectsGroup),this.needsUpdate=!0,this._promiseResolve(this)})).catch((t=>{throw Le.error(t),new Error("Error loading map using SINGLE_GEOMETRY strategy")})),this._objLoadedComplete=!0,this._onRootObjectCreated(),this._checkIfLoaded()}return this._promiseResolve(this)}_objLoaded(t){if(t.elements){this.elements=t.elements;let e=Object.values(this.elements);this.loadAsync&&e.sort(((t,e)=>(null===t.sortScore&&(t.sortScore=fY(t.polygon)),null===e.sortScore&&(e.sortScore=fY(e.polygon)),e.sortScore-t.sortScore)));let i=new K(1/0,1/0,0),n=new K(-1/0,-1/0,0);for(let t of e){let e=t.getBoundingBox();i.min(e.min),n.max(e.max),this.loadAsync?this._addPendingHighPriorityTask("addPolygon",(()=>this._addElementToScene(t))):this._addElementToScene(t)}this.boundingBox={min:i,max:n},t=t.container}let e=t.children;for(let t=0,i=e.length;t<i;++t){let i=e[t];this.objectsDictionary[i.name]=i,this.polygonMeshesById[i.name]=i}return this.object=t,this.object.userData.type="mappedin_map",this.object.userData.mapId=this.mapClass.id,this._objLoadedComplete=!0,this._onRootObjectCreated(),this._checkIfLoaded(),this._promiseResolve(this)}loadPolygonNow(t){if(!this.elements)return;let e=this.elements[t];e&&this._addElementToScene(e)}_addElementToScene(t){if(!this.objectsDictionary[t.polygon.id]){if(t.imageVisible&&t.on("texture-loaded",(t=>{this.core.publish(1,t)})),t.mesh){let e=t.mesh;this.objectsDictionary[e.name]=e,this.polygonMeshesById[e.name]=e}if(t.imageMesh){let e=t.imageMesh;this.imageMeshesById[e.name]=e,this.objectsDictionary[e.name]=e,this.polygonMeshesById[e.name]=e}if(t.polygon.image){let e=null!=t.polygon.image.rotation?t.polygon.image.rotation.z:0;this.core.imageFlippingEnabled&&this.enableImageFlipping(t.polygon.id,e*(Math.PI/180))}}}load(){if(!this._started){this._started=!0;try{let t=cve&&this.core.venue.polygons.filter((t=>t.map.id===this.mapClass.id)),e=this.mapClass.scene.polygons;if("json"!==this.loadMethod&&void 0!==this.loadMethod||!e&&!t)throw new Error("Error parsing JSON scene");{let i=e||t;this.loadMethodUsed="JSON - "+(e?"published":"live"),Dg.load(i,this.mapClass,this.mapRenderingStrategy).then("MULTI_GEOMETRY"===this.mapRenderingStrategy?this._objLoaded:this._objLoadedMerged)}}catch{pY("ERROR: No 3D files for map "+(this.mapClass.name||this.mapClass.shortName||this.mapClass.id||this.mapClass))}}return this._loaderPromise}_dispose(t){let e=t;for(let t=e.children.length-1;t>=0;t--)this._dispose(e.children[t]);e.destroy(),delete this.objectsDictionary[e.name],delete this.polygonMeshesById[e.name]}destroy(){for(let t of this.hoverableMeshChildren)t.destroy();this.removeLabels(),this._removeThreeJSMarkers(),this.disableAllImageFlipping(),this.elements=[],this._dispose(this.object),this.objectsDictionary={},this.polygonMeshesById={}}add(t){var e;cY.add(t),null==(e=this.load())||e.then((()=>{1===cY.children.filter((e=>e.uuid===t.uuid)).length&&this.object.add(t)}))}getPositionLatLon(t,e){let i=this.mapClass.createCoordinate(t,e);return this.core.convertTo3DMapPosition(i)}addToObject(t){t.applyMatrix4((new Ot).copy(this.object.matrix).invert());let e=1/this.object.scale.x;t.scale.set(e,e,e),this.object.add(t)}translateChild(t,e){t.position.set(e.x,e.y,e.z),t.applyMatrix4((new Ot).copy(this.object.matrix).invert());let i=1/this.object.scale.x;t.scale.set(i,i,i)}getMapScale(){return null==this.mapScale&&(this.mapScale=BT(this.mapClass)),this.mapScale}getNorth(){return null==this.north&&(this.north=sY(this.mapClass)),this.north}enableImageFlipping(t,e){if(e=e||0,!this._flippableImagedById[t]&&this.object&&Object.keys(this.object).length>0){let i=this.object.getObjectByName(t+"_image");if(i){let n=new XD({image:i,rotation:e});this.imagesToFlip.push(n),this.core.publish(4),this.core.publish(2),this._flippableImagedById[t]=!0}}}disableAllImageFlipping(){for(let t=0,e=this.imagesToFlip.length;t<e;t++)this.imagesToFlip[t].reset();this.imagesToFlip=[],this._flippableImagedById={}}isReady(){return(this.loadAsync?this._highPriorityTasks.isComplete():this.isFullyLoaded())&&this._objLoadedComplete}isFullyLoaded(){return this._highPriorityTasks.isComplete()&&this._lowPriorityTasks.isComplete()}onVisible(){!0!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,Gl.VISIBLE_MAP_HIGH),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,Gl.VISIBLE_MAP_LOW),this._taskScheduler.resumeTask(this._markerTasks)):(this._taskScheduler.resumeTask(this._highPriorityTasks),this._taskScheduler.resumeTask(this._lowPriorityTasks),this._taskScheduler.resumeTask(this._markerTasks)),this._visibilityLatch=!0);for(let t in this.imageMeshesById)this.imageMeshesById[t].visible=!0;for(let t of this.object.children)"path"===t.name&&(t.visible=!0);this.visible=!0,this.core.publish(8)}onInvisible(){!1!==this._visibilityLatch&&(this.loadAsync?(this._taskScheduler.setTaskPriority(this._highPriorityTasks,Gl.ASYNC_MAP_HIGH),this._taskScheduler.setTaskPriority(this._lowPriorityTasks,Gl.ASYNC_MAP_LOW),this._taskScheduler.postponeTask(this._markerTasks)):(this._taskScheduler.postponeTask(this._highPriorityTasks),this._taskScheduler.postponeTask(this._lowPriorityTasks),this._taskScheduler.postponeTask(this._markerTasks)),this._visibilityLatch=!1);for(let t in this.imageMeshesById)this.imageMeshesById[t].visible=!1;for(let t of this.object.children)"path"===t.name&&(t.visible=!1);this.visible=!1,this.core.publish(8)}addPendingMarkerTask(t,e){this._taskScheduler.scheduleTask(new Hi({name:"addMarker",group:this._markerTasks,callback:e,userdata:{marker:t}}))}addPendingLowPriorityTask(t,e){this._taskScheduler.scheduleTask(new Hi({name:t,group:this._lowPriorityTasks,callback:e}))}addPendingMapLoadedTask(t,e){this._taskScheduler.scheduleTask(new Hi({name:t,group:this._mapLoadedTasks,callback:e})),this._checkIfLoaded()}_addPendingHighPriorityTask(t,e){this._taskScheduler.scheduleTask(new Hi({name:t,group:this._highPriorityTasks,callback:e}))}addThreeJSMarker(t){if(!(t.object instanceof ci))throw new Error("threeJSMarker `object` must be an instance of `Object3D`");let e=new kT({mapId:this.id,object:t.object}),i={object:t.object};return t.object.layers.set($i.ANIMATED),null!=t.position&&t.object.position.copy(t.position),null!=t.rotation&&t.object.rotation.copy(t.rotation),null!=t.scale&&t.object.scale.copy(t.scale),this.threeJSMarkers.set(e,i),this._objLoadedComplete?this.addToObject(i.object):this.load().then((()=>{e._deleted||this.addToObject(i.object)})),e}removeThreeJSMarker(t){let e=this.threeJSMarkers.get(t);return null!=e&&(t._deleted=!0,this.threeJSMarkers.delete(t),this._objLoadedComplete&&this.object.remove(e.object),t._destroy(),!0)}_removeThreeJSMarkers(){if(this._objLoadedComplete)for(let[t,e]of this.threeJSMarkers.entries())this.object.remove(e.object),t._destroy();this.threeJSMarkers.clear()}removeLabels(){if(this.labels.forEach((t=>{t.disable(),t.removeSelf()})),this.labels=new Set,Array.isArray(this.textObjects)){for(let t=0,e=this.textObjects.length;t<e;++t){let e=this.textObjects[t];e.removeSelf(!0),e=void 0}this.textObjects=[]}}_checkIfLoaded(){this.isReady()&&this._taskScheduler.scheduleTask(new Hi({name:"onMapLoaded",callback:()=>{this._taskScheduler.resumeTask(this._mapLoadedTasks),this.mapLoaded&&typeof this.mapLoaded==typeof Function&&(this.mapLoaded(),this.mapLoaded=null)}}))}_onRootObjectCreated(){for(let t of this.threeJSMarkers.values()){let e=t;this.object.add(e.object)}}_popinChildObjects(){this.loadAsync||"SINGLE_GEOMETRY"===this.mapRenderingStrategy||this.object.traverse((t=>{0===t.children.length&&"Mesh"===t.type&&t.material.map&&(t.visible=!1,this._addPendingHighPriorityTask("addPolygon",(()=>{t.visible=!0,this._showCount>=uve&&(this._showCount=0,this.core.publish(3)),this._showCount++})))}))}};u(WD,"MapObject");var HD=WD,YD=class{constructor(t){A(this,"_deleted",!1),A(this,"_mapId"),A(this,"_object"),this._mapId=t.mapId,this._object=t.object}get object(){return this._object}_destroy(){this._mapId=null,this._object=null}};u(YD,"ThreeJSMarkerHandle");var kT=YD,qT=HD;E();var hve={STATIC:0,ANIMATED:1,ALWAYS_ON_TOP:2},$i=hve;E();var fve=!1,ZD=class extends Gc{constructor(t){super(),A(this,"venueData"),this.venueData=t}async loadMapPolygons(t){return fve&&Le.log("loading map: ",t.id),Promise.resolve(this.venueData.scenes[t.id])}async loadImage(t){return new Promise(((e,i)=>{let n=t.split("/"),r=n[n.length-1],o="data:image/png;base64,"+this.venueData.images[r];this.textureLoader.load(o,(t=>{t.colorSpace=Lr,e(t)}),(()=>{}),i)}))}};u(ZD,"BundleAssetManager");var FT=ZD;E();var mY="precision mediump float;\n\nuniform sampler2D textureLabel;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tgl_FragColor = texture2D(textureLabel, vUV);\n\tgl_FragColor.rgb = vColor;\n}",gY="attribute vec2 position;\nattribute vec3 origin;\nattribute vec2 size;\nattribute float rotation;\nattribute vec4 uv;\nattribute vec3 color;\n\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelMatrix;\n\nvarying vec2 vUV;\nvarying vec3 vColor;\n\nvoid main() {\n\tvec4 mapDirectionVector = vec4(0, 1, 0, 0) * viewMatrix * modelMatrix;\n\tfloat mapDirection = atan(mapDirectionVector.y, mapDirectionVector.x);\n\n\tfloat cosRotation = cos(rotation);\n\tfloat sinRotation = sin(rotation);\n\n\tmat4 rotationMatrix = mat4(\n\t\tvec4(cosRotation, -sinRotation, 0.0, 0.0),\n\t\tvec4(sinRotation, cosRotation, 0.0, 0.0),\n\t\tvec4(0.0, 0.0, 1.0, 0.0),\n\t\tvec4(0.0, 0.0, 0.0, 1.0)\n\t);\n\n\tmat4 translate = mat4(\n\t\tvec4(1, 0, 0, 0),\n\t\tvec4(0, 1, 0, 0),\n\t\tvec4(0, 0, 1, 0),\n\t\tvec4(origin, 1)\n\t);\n\n\tgl_Position = projectionMatrix *\n\t              viewMatrix *\n\t              modelMatrix *\n\t              translate *\n\t              rotationMatrix *\n\t              (vec4(position * size - vec2(0, size.y / 2.0), 0, 1));\n\n\n\tvec2 uvStart = uv.xy;\n\tvec2 uvSize = uv.zw;\n\n\tif (sin(mapDirection + rotation) > 0.0) {\n\t\tvUV = position * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\n\t} else {\n\t\tvUV = (vec2(1, 1) - position) * uvSize + vec2(uvStart.x, uvStart.y - uvSize.y);\t\t\n\t}\n\n\tvColor = color;\n} ",QD={MARGIN:2,HEIGHT_MARGIN:.5,SIZE:1.2},$D=56,mve=$D/QD.SIZE,xY=$D/2,gve=1/xY,vve=64,vY=16,UT=4,eN=class{constructor(){this.x=0,this.y=0,this.width=0,this.height=0,this.layer=null,this.index=null}layout(t,e,i,n,r,o){let s,a=this.canvasBounds.rotation*Math.PI/180,l=this.width*this.pixelsPerMu,u=this.height*this.pixelsPerMu;"left"==this.canvasBounds.align?s=this.margin:"right"==this.canvasBounds.align?s=this.canvasBounds.maxWidth-l-this.margin:"center"==this.canvasBounds.align&&(s=(this.canvasBounds.maxWidth-l-this.margin)/2);let h=s*Math.cos(a),c=-s*Math.sin(a),p=this.index;e.setXYZ(p,this.canvasBounds.x-t.width/2+h,-this.canvasBounds.y+t.height/2+c,this.z+.1),i.setXY(p,l,u),n.setX(p,a);let d=this.layer.canvas;r.setXYZW(p,this.x/d.width,1-this.y/d.height,this.width/d.width,this.height/d.height),o.setXYZ(p,this.color.r,this.color.g,this.color.b),e.needsUpdate=!0,i.needsUpdate=!0,n.needsUpdate=!0,r.needsUpdate=!0,o.needsUpdate=!0}};u(eN,"Label");var KD=eN,zp=class t{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}leftOverSpace(t){return this.width<t.width||this.height<t.height?null:this.height*(this.width-t.width)+this.width*(this.height-t.height)}split(e,i,n){e.x=this.x,e.y=this.y,this.width-e.height<vY&&this.height-e.height<vY?i.splice(n,1):this.width===e.width?i.splice(n,1,new t(this.x,this.y+e.height,this.width,this.height-e.height)):this.height===e.height?i.splice(n,1,new t(this.x+e.width,this.y,this.width-e.width,this.height)):i.splice(n,1,new t(this.x+e.width,this.y,this.width-e.width,e.height),new t(this.x,this.y+e.height,this.width,this.height-e.height))}};u(zp,"Slot");var zT=zp,tN=class{constructor(t,e,i,n){let r=5;for(;Math.pow(2,r)<n;)r+=1;for(n=Math.pow(2,r),r=10;Math.pow(2,r)<i;)r+=1;i=Math.pow(2,r),this.atlas=t,this.map=e,this.canvasWidth=i,this.canvasHeight=n,this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.spaces=[new zT(0,0,this.canvas.width,this.canvas.height)],this.free=[],this.labels=[],this.count=vve;let o=new Float32Array(3*this.count),s=new Float32Array(2*this.count),a=new Float32Array(this.count),l=new Float32Array(4*this.count),u=new Float32Array(3*this.count);this.uv=new Fc(l,4,!1,1),this.uv.set(l),this.uv.needsUpdate=!0,this.origin=new Fc(o,3,!1,1),this.origin.set(o),this.origin.needsUpdate=!0,this.size=new Fc(s,2,!1,1),this.size.set(s),this.size.needsUpdate=!0,this.rotation=new Fc(a,1,!1,1),this.rotation.set(a),this.rotation.needsUpdate=!0,this.color=new Fc(u,3,!0,1),this.color.set(u),this.color.needsUpdate=!0;for(let t=0;t<this.count;t++)this.zero(t);let h=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]);this.geometry=new cT,this.geometry.setIndex([0,3,1,3,2,1]),this.geometry.setAttribute("position",new rn(h,3)),this.geometry.setAttribute("size",this.size),this.geometry.setAttribute("origin",this.origin),this.geometry.setAttribute("rotation",this.rotation),this.geometry.setAttribute("uv",this.uv),this.geometry.setAttribute("color",this.color),this.texture=new Rp(this.canvas),this.texture.anisotropy=16,this.material=new sT,this.material.vertexShader=gY,this.material.fragmentShader=mY,this.material.uniforms={textureLabel:{value:this.texture}},this.material.transparent=!0,this.mesh=new Ft(this.geometry,this.material),this.obj=new ci,this.obj.add(this.mesh),this.obj.frustumCulled=!1,this.mesh.frustumCulled=!1,this.map.add(this.obj)}space(){return this.spaces.map((t=>t.width*t.height)).reduce(((t,e)=>t+e))}zero(t){this.origin.array[3*t+0]=0,this.origin.array[3*t+1]=0,this.origin.array[3*t+2]=0,this.size.array[2*t+0]=0,this.size.array[2*t+1]=0,this.rotation.array[t]=0,this.uv.array[4*t+0]=0,this.uv.array[4*t+1]=0,this.uv.array[4*t+2]=0,this.uv.array[4*t+3]=0,this.color.array[3*t+0]=0,this.color.array[3*t+1]=0,this.color.array[3*t+2]=0,this.origin.needsUpdate=!0,this.size.needsUpdate=!0,this.rotation.needsUpdate=!0,this.uv.needsUpdate=!0,this.color.needsUpdate=!0}findSpace(t){if(0!=this.free.length&&this.labels.length==this.count)return!1;let e=-1;for(let i=0;i<this.spaces.length;i++){let n=this.spaces[i].leftOverSpace(t);null!==n&&(-1===e||this.spaces[i].leftOverSpace(t)<n)&&(e=i)}return-1!==e&&(this.spaces[e].split(t,this.spaces,e),t.layer=this,0===this.free.length?(t.index=this.labels.length,this.labels.push(t)):(t.index=this.free.pop(),this.labels[t.index]=t)),-1!=e}remove(t){if(void 0===t.index)return;this.zero(t.index),this.context.clearRect(t.x,t.y,t.width,t.height),this.spaces.push(new zT(t.x,t.y,t.width,t.height)),this.free.push(t.index),this.labels[t.index]=null;let e=!0;for(let t of this.labels)if(e=e&&null!=t,!e)break;e&&this.atlas.removeLayer(this)}render(t){this.context.save(),this.context.rect(t.x+1,t.y+1,t.width-2,t.height-2),this.context.clip(),this.context.font=t.size+"px "+t.font;for(let e of t.lines)this.context.fillText(e.text,e.x+t.x+UT,e.y+t.y+e.height+UT);this.texture.needsUpdate=!0,this.context.restore()}onWebGLContextRestored(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.context=this.canvas.getContext("2d"),this.context.textBaseline="bottom",this.texture=new Rp(this.canvas),this.texture.anisotropy=16,this.material.uniforms.textureLabel.value=this.texture;for(let t of this.labels)null!=t&&this.render(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.texture.dispose()}};u(tN,"AtlasLayer");var JD=tN,nN=class{constructor(){this.layers=[],this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d")}addLabel(t,e,i,n,r,o){let s=0,a=0;for(let t of e)a=Math.max(Math.ceil(t.width+t.x),a),s=Math.max(Math.ceil(t.height+t.y),s);let l,u=new KD;u.map=t,u.width=a+2*UT,u.height=s+2*UT,u.lines=e,u.font=i,u.size=n,u.canvasBounds=r.canvasBounds,u.margin=r.margin,u.heightMargin=r.heightMargin,u.pixelsPerMu=o,u.z=r.height,u.view=r,u.color=r.color;for(let e of this.layers)if(l=e,l.map===t){if(l.findSpace(u))break;l=null}else l=null;if(null==l){if(l=new JD(this,t,u.width,u.height),this.layers.push(l),!l.findSpace(u))return;this.layers.sort(((t,e)=>e.space()-t.space()))}return l.render(u),u.layout(t.mapClass,l.origin,l.size,l.rotation,l.uv,l.color),u.layer=l,u}removeLayer(t){let e=this.layers.indexOf(t);-1!=e&&this.layers.splice(e,1)}measure(t,e,i){return this.context.font=i+"px "+e,this.context.measureText(t)}onWebGLContextRestored(){for(let t of this.layers)t.onWebGLContextRestored()}dispose(){for(let t of this.layers)t.dispose()}};u(nN,"Atlas");var Gp=nN,iN=class{constructor(t,e,i,n,r,o,s,a,l){A(this,"setHoverColor",u((t=>{this.hoverColor=new at(t)}),"setHoverColor"));let h=La(t.polygon,e.polygons);this.id=h.id,this.text=(t.shortText||t.text).trim(),this.stateText=t.stateText?" ("+t.stateText+")":"",this.fullText=this.stateText?this.text+this.stateText:this.text,this.font=t.font||n,this.atlas=l,this.canvasBounds=t.canvasBounds||h.canvasBounds,this.mapScale=i.getMapScale()||1,this.margin=(t.margin||QD.MARGIN)*this.mapScale,this.heightMargin=(t.heightMargin||QD.HEIGHT_MARGIN)*this.mapScale,this.scaleMin=t.scaleMin||.25,this.scaleStep=t.scaleStep>0?t.scaleStep:.25,this.multiline=null==t.multiline||t.multiline,this.height=Number(t.height)||null,this.polygonMeshesById=r,this.polyId=t.polygonId||Oi(t.polygon,e.polygons),this.map=i,this.color=new at(t.color||a.colors.text||"#000000"),this.hoverColor=new at(t.hoverColor||this.color),this.baseColor=this.color,this.hideOnCreate=!1,this.hoverLabelText=t.text.trim(),this.fontSize=t.fontSize*this.mapScale||t.size*mve||$D,this.hoverLabelMode=t.hoverLabelMode3D||Pu.MODES.ALL,this.hoverLabelClass=t.hoverLabelClass||"mMapviewHoverLabel",this.showHoverLabel=this.hoverLabelMode==Pu.MODES.ALL||this.hoverLabelMode==Pu.MODES.NO_TEXT_LABEL_ONLY,this.hoverIfLabelFails=this.hoverLabelMode==Pu.MODES.ALL||this.hoverLabelMode==Pu.MODES.NO_TEXT_LABEL_ONLY,this.textLabelsByPolygonId=o,this.map.textObjects.push(this)}create(){let t=this;if(this.doNotCreate)return;if(null==t.canvasBounds)return t.invalid=!0,t.message="No Canvas Bounds. Can't draw text '"+t.text+"'",void(t.showHoverLabel=t.hoverIfLabelFails);t.showHoverLabel=this.hoverLabelMode==Pu.MODES.ALL;let e=gve*this.mapScale,i=xY/this.mapScale,n=[this.text];this.stateText.length&&n.unshift(this.fullText);for(let e of n){let n=e.split(" ").map((function(e){return{width:t.atlas.measure(e,t.font,t.fontSize).width,word:e}})),a=(this.canvasBounds.maxWidth-2*this.margin)*i,l=(this.canvasBounds.maxHeight-2*this.heightMargin)*i,u=(1-this.scaleMin)/this.scaleStep,h=0,c=this.atlas.measure(" ",this.font,this.fontSize).width,p=yve(this.fontSize+"px "+this.font);for(let t=0,e=n.length;t<e;t++){let e=n[t].width,i=Math.ceil((e-a)/(e*this.scaleStep));h=Math.max(i,h)}if(null==this.height)if(this.polygonMeshesById[this.polyId]){let t=this.polygonMeshesById[this.polyId];t.geometry.boundingBox||t.geometry.computeBoundingBox(),this.height=t.geometry.boundingBox.max.z+t.position.z}else this.height=0;var r,o,s;let d=this.scaleStep;t:for(o=h;o<=u;o++){s=1-o*d;let t=n[0].width*s;r=[{text:n[0].word,width:t,height:p*s,x:0,y:0}];for(let e=1;e<n.length;e++){let i=n[e],o=(i.width+c)*s;if(t+o<a)r[r.length-1].text+=" "+i.word,r[r.length-1].width+=o,t+=o;else{if(!this.multiline)continue t;r[r.length-1].width=t,t=i.width*s,r.push({text:i.word,width:t,height:p*s,x:0,y:r[r.length-1].height+r[r.length-1].y})}}if(r.length*p*s<=l){this.invalid=!1;break}}if(0==this.invalid)break}if(0==this.invalid){let t=r.map((t=>Math.ceil(t.width))).reduce(((t,e)=>Math.max(t,e)));for(let e of r)e.x=(t-e.width)/2;this.label=this.atlas.addLabel(this.map,r,this.font,this.fontSize*s,this,e)}this.created=!0}flipIfNeeded(t){}removeSelf(t){this.created?(null!=this.label&&(this.label.layer.remove(this.label),this.label=null),t||(this.map.textObjects=this.map.textObjects.filter((t=>t!=this)),Object.keys(this.textLabelsByPolygonId).forEach((t=>{this.textLabelsByPolygonId[t]==this&&delete this.textLabelsByPolygonId[t]})))):this.doNotCreate=!0}setColor(t){var e;let i=new at(t),n=this.color.equals(i),r=!(null==(e=this.label)||!e.layer);this.color=i,!n&&r&&(this.label.color=this.color,this.label.layout(this.map.mapClass,this.label.layer.origin,this.label.layer.size,this.label.layer.rotation,this.label.layer.uv,this.label.layer.color))}clearColor(){this.setColor(this.baseColor)}hide(){this.label?this.label.layer.zero(this.label.index):this.hideOnCreate=!0}show(){if(this.label){let t=this.label.layer,e=this.map;this.label.layout(e.mapClass,t.origin,t.size,t.rotation,t.uv,t.color)}else this.hideOnCreate=!1}toString(){return this.hoverLabelText}};u(iN,"FlatLabel");var jx=iN,yY=new Map,yve=u((function(t){let e=yY[t];if(null!=e)return e;let i=document.createElement("span");i.textContent="Hg",i.style.font=t;let n=document.createElement("div");n.style.cssText="display: inline-block; width: 1px; height: 0px;";let r=document.createElement("div");r.appendChild(i),r.appendChild(n),document.body.appendChild(r);try{var o=i.getBoundingClientRect()}finally{r.remove()}return null!=o.height&&(yY[t]=o.height,e=o.height),e}),"getTextHeight");E();var bY=u((function(t){let e,i,n=this,r=document.createElement("div");r.style.display="none!important",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.pointerEvents="none",this.hovering=!1,t.appendChild(r),this.show=function(t){n.hovering||n.setPosition(e,i),n.hovering=!0,r.style.removeProperty("display"),r.textContent=t.toString(),r.className=t.hoverLabelClass},this.hide=function(){n.hovering&&(n.hovering=!1,r.style.setProperty("display","none","important"),r.textContent="")},this.setZIndex=function(t){r.style.zIndex=t},this.setPosition=function(o,s){e=o,i=s,n.hovering&&(s-r.clientHeight>0?(s-=r.clientHeight,o+r.clientWidth>t.clientWidth&&(o-=r.clientWidth)):o=o-r.clientWidth-10,r.style.transform="translate("+o+"px, "+s+"px)")},this.destroy=function(){t.removeChild(r)}}),"HoverLabel");bY.MODES={NONE:1,NO_TEXT_LABEL_ONLY:2,ALL:3};var Pu=bY;E();var sN=class{constructor(t){A(this,"__engine"),A(this,"_initialRank",0),A(this,"screenPosition",[0,0]),A(this,"enabled",!1),A(this,"options",{}),A(this,"mapId",""),A(this,"id","0"),A(this,"action",0),A(this,"getBoundingBoxForCurrentStrategy"),A(this,"rank",0),A(this,"visible",!1),A(this,"offscreen",!1),A(this,"position",null),A(this,"dimensions",{width:0,height:0}),A(this,"layer",""),A(this,"_bboxes");let{rank:e,layer:i}=t;i&&(this.layer=i),!i&&null!=t.polygon&&(this.layer=t.polygon.layer),this._initialRank=e,this.rank=e}flipIfNeeded(){}setPosition(t,e=!0){var i;let n={nodeOrCoordinate:t,height:null==(i=this.position)?void 0:i.height};this.mapId=t.map.id,this.position=n,null!=this.__engine&&e&&this.__engine.debouncedUpdate()}setPriority(t){this.rank=t,null!=this.__engine&&this.__engine.debouncedUpdate()}setAction(t){this.action=t}resetPriority(){this.rank!==this._initialRank&&this.setPriority(this._initialRank)}promote(){}demote(){}get strategies(){return[]}removeSelf(){this.__engine=void 0}enable(){this.enabled=!0}disable(){this.enabled=!1}colliderDidUpdatePosition(t){this.screenPosition=t}colliderDidNotFindAHome(){this.visible=!1}colliderDidMount(){this.dimensions={width:0,height:0}}colliderDidUpdateVisiblity(){}};u(sN,"BaseCollider");var rN=sN,Vp=rN;E(),E();var xve=u((function(){let t,e;return()=>{if((!e||!e)&&(t=document.createElement("canvas"),t.width=500*devicePixelRatio,t.height=500*devicePixelRatio,t.style.width="500px",t.style.height="500px",e=t.getContext("2d")),!e)throw new Error("Could not get 2D context");return{measureCanvas:t,measureCanvasContext:e}}}),"createMeasureCanvasContext")(),_Y=u(((t,e,i,n=2,r=1.2,o={strokeText:!0})=>{let s="bold ".concat(e*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif"),{measureCanvasContext:a}=xve();a.font=s;let l=[],u=t.split(" "),h=0,c=0,p=0;for(;c<u.length;){let t=u[c];if(h===n&&h>0){l[h-1]+="...";break}if(null==l[h]&&(l[h]=t,c++),1===u.length){l[h]=t;break}if(null==u[c])break;let{width:e}=a.measureText(l[h]+" "+u[c]);e<=i?(l[h]+=" "+u[c],c++):h++}l.forEach((t=>{let{width:e}=a.measureText(t);p=Math.max(e,p)}));let d=e*devicePixelRatio*r,f=l.length*d;return{maxWidth:p,maxHeight:f,lines:l.length,draw:(t,e,i)=>{1===l.length?(o.strokeText&&t.strokeText(l[0],e,i),t.fillText(l[0],e,i)):(o.strokeText&&(t.strokeText(l[0],e,i-d/2),t.strokeText(l[1],e,i+d/2)),t.fillText(l[0],e,i-d/2),t.fillText(l[1],e,i+d/2))}}}),"shaveText"),yN=Bt(wY()),xN=Bt(Kx());E();var Jx,$x,_N,qg,e2,t2,Yc,n2,KT,nX,i2,wN,r2,Xc,nf,tr=u((t=>t*devicePixelRatio),"dp"),Vl=2.5,vN=4,hye=6,fye=10,pye=4,$Y=.5,dye=6.5,mye=4.5,eX=2.5,gye=2,vye=5,tX={heightAbovePolygon:0,scale:devicePixelRatio,appearance:cE.darkOnLight},yye="Smart Labels do not support setting and clearing colors. Re-label the polygon with desired colors instead",uo=class t extends Vp{constructor(e,i){var n;if(super(e),te(this,$x),te(this,KT),te(this,i2),A(this,"lines",0),A(this,"contextConfigured",!1),A(this,"fillText"),A(this,"newStyle",{pinVisibility:1}),A(this,"style",{top:0,left:0,textLabelVisible:!0,pinVisibility:1,textAlign:"left"}),A(this,"setColor",u((()=>{Le.warn(yye)}),"setColor")),A(this,"clearColor",u((()=>{}),"clearColor")),A(this,"zoomProportion",0),A(this,"_cache",{}),A(this,"appearance"),A(this,"mapView"),A(this,"position"),A(this,"options"),te(this,Jx,!1),te(this,qg,!0),te(this,e2,void 0),te(this,t2,void 0),te(this,n2,void 0),te(this,r2,void 0),te(this,Xc,void 0),te(this,nf,!1),null==M(t,Yc)&&ce(t,Yc,{}),this.id=null!=(n=e.id)?n:Cr(),this.mapView=i,this.options=(0,xN.default)({},{text:e.shortText||e.text||""},e,tX),null!=e.rank&&e.rank>0)this.rank=e.rank,this._initialRank=e.rank;else{let e="test"===B.env.NODE_ENV?t.testId:Math.random();t.testId++,this.rank=e,this._initialRank=e}let{mapId:r,position:o}=this.options;this.position=o,e.stateText&&(this.options.text+=" (".concat(e.stateText,")")),this.mapId=r;let s=(0,xN.default)({},this.options.appearance,tX.appearance);this.appearance={margin:s.margin,text:{lineHeight:s.text.lineHeight,numLines:s.text.numLines,size:s.text.size,maxWidth:s.text.maxWidth,foregroundColor:s.text.foregroundColor,backgroundColor:s.text.backgroundColor},marker:{size:s.marker.size,foregroundColor:{active:s.marker.foregroundColor.active,inactive:s.marker.foregroundColor.inactive||(0,yN.default)(s.marker.foregroundColor.active).setAlpha(.5).toRgbString()},backgroundColor:{active:s.marker.backgroundColor.active,inactive:s.marker.backgroundColor.inactive||(0,yN.default)(s.marker.backgroundColor.active).setAlpha(.5).toRgbString()},icon:s.marker.icon,iconSize:s.marker.iconSize||fye,iconVisibilityThreshold:null==s.marker.iconVisibilityThreshold?$Y:s.marker.iconVisibilityThreshold}},this.appearance.marker.icon&&(ce(this,Jx,!0),tt(this,KT,nX).call(this))}enable(t=!0){super.enable(),t&&null!=this.__engine&&this.__engine.debouncedUpdate()}get totalTextBoxHeight(){let{height:t}=this.dimensions;return t+2*Vl}get totalTextBoxWidth(){let{width:t}=this.dimensions;return t+2*Vl}get totalMarkerSize(){return M(this,qg)&&(ce(this,e2,M(this,Xc)/devicePixelRatio+eX),ce(this,qg,!1)),M(this,e2)}get strategies(){let{width:t,height:e}=this.dimensions,{margin:i}=this.appearance;tt(this,$x,_N).call(this);let n=Math.max(hye,i),r=M(this,nf)?n/2:0,o=[{name:"RIGHT",getBoundingBox:({x:i,y:r})=>{let o=Math.max(this.totalMarkerSize,e);return[r-o/2-n,r+o/2+n,i-this.totalMarkerSize/2-n,i+this.totalMarkerSize+t+n]},onStrategySelected:t=>{this.newStyle=Object.assign({},t.style,{textAlign:"right",pinVisibility:1,top:-this.totalTextBoxHeight/2,left:this.totalMarkerSize/2+vN/2,textLabelVisible:!0,cachedSymbol:this.getCachedSymbol("RIGHT","left",0)})}},{name:"LEFT",getBoundingBox:({x:i,y:r})=>{let o=Math.max(this.totalMarkerSize,e);return[r-o/2-n,r+o/2+n,i-this.totalMarkerSize-t-n,i+this.totalMarkerSize/2+n]},onStrategySelected:e=>{this.newStyle=Object.assign({},e.style,{textAlign:"right",pinVisibility:1,top:-this.totalTextBoxHeight/2,left:-this.totalTextBoxWidth-this.totalMarkerSize/2-vN/2,textLabelVisible:!0,cachedSymbol:this.getCachedSymbol("LEFT","right",tr(t))})}},{name:"TOP",getBoundingBox:({x:i,y:r})=>[r-(e+this.totalMarkerSize)-n,r+this.totalMarkerSize/2+n,i-t/2-n,i+t/2+n],onStrategySelected:e=>{this.newStyle=Object.assign({},e.style,{pinVisibility:1,textAlign:"center",textLabelVisible:!0,top:-this.totalTextBoxHeight-this.totalMarkerSize/2-vN/2,left:-this.totalTextBoxWidth/2,cachedSymbol:this.getCachedSymbol("TOP","center",tr(t/2))})}},{name:MN,getBoundingBox:({x:t,y:e})=>[e-this.totalMarkerSize/2-r,e+this.totalMarkerSize/2+r,t-this.totalMarkerSize/2-r,t+this.totalMarkerSize/2+r],onStrategySelected:t=>{this.newStyle=Object.assign({},t.style,{pinVisibility:.5,textLabelVisible:!1})}}];return""===this.options.text?[{name:"ICON_ONLY",getBoundingBox:({x:t,y:e})=>[e-this.totalMarkerSize/2-n/2,e+this.totalMarkerSize/2+n/2,t-this.totalMarkerSize/2-n/2,t+this.totalMarkerSize/2+n/2],onStrategySelected:t=>{this.newStyle=Object.assign({},t.style,{pinVisibility:1,textLabelVisible:!1})}}]:o}getCachedSymbol(t,e,i){let{width:n,height:r}=this.dimensions;if(null==this._cache[t]){let o,s=n+2*Vl,a=r+2*Vl;null!=window.OffscreenCanvas?o=new OffscreenCanvas(tr(s+Vl),tr(a+Vl)):(o=document.createElement("canvas"),o.width=tr(s+Vl),o.height=tr(a+Vl),o.style.width=s+"px",o.style.height=a+"px");let l=o.getContext("2d"),{size:u}=this.appearance.text;l.textAlign=e,l.font="bold ".concat(u*devicePixelRatio,"px 'InterUI-Regular', Helvetica Neue, Arial, sans-serif"),l.textBaseline="middle",l.lineJoin="miter",l.miterLimit=2,l.strokeStyle="white",l.lineWidth=tr(Vl),l.fillStyle=this.appearance.text.foregroundColor,l.strokeStyle=this.appearance.text.backgroundColor,this.fillText&&"function"==typeof this.fillText&&this.fillText(l,i+tr(Vl),tr(a+Vl/2)/2),this._cache[t]=o}return this._cache[t]}invalidate(){this._cache={},this.colliderDidMount()}colliderDidMount(){let{size:t,maxWidth:e,numLines:i,lineHeight:n}=this.appearance.text,r=this.options.text||"",{draw:o,lines:s,maxWidth:a,maxHeight:l}=_Y(r,t,tr(e),i,n);this.fillText=o,this.lines=s,this.dimensions={width:a/devicePixelRatio,height:l/devicePixelRatio}}colliderDidUpdatePosition(t){this.screenPosition=t}colliderDidUpdateVisiblity(){tt(this,$x,_N).call(this),1===this.action?this.visible=!0:this.visible=!1,this.action=0,this.style=this.newStyle}colliderDidGoOutsideGrid(){}colliderDidNotFindAHome(){this.action=2}disable(t=!0){super.disable(),this.visible=!1,t&&null!=this.__engine&&this.__engine.debouncedUpdate()}get pinCanvasSize(){return 2*this.totalMarkerSize}draw(e){var i;if(!this.visible)return;let[n,r]=this.screenPosition,{pinVisibility:o,textLabelVisible:s,top:a,left:l,textAlign:u,cachedSymbol:h}=this.style,c=tr(n),p=tr(r),{marker:d}=this.appearance,{foregroundColor:f,backgroundColor:g}=d,m=VD("".concat(f.active,"-").concat(f.inactive,"-").concat(g.active,"-").concat(g.inactive,"-").concat(M(this,Xc)));if(M(t,Yc)[m]){let i=1===o?M(t,Yc)[m][0]:M(t,Yc)[m][1];e.drawImage(i,c-tr(this.pinCanvasSize/2),p-tr(this.pinCanvasSize/2))}else{e.lineWidth=tr(4);let i=tt(this,i2,wN).call(this,M(this,Xc),this.appearance.marker.backgroundColor.active,this.appearance.marker.foregroundColor.active),n=tt(this,i2,wN).call(this,M(this,nf)?M(this,Xc):tr(mye),this.appearance.marker.backgroundColor.inactive,this.appearance.marker.foregroundColor.inactive);M(t,Yc)[m]=[i,n]}if(M(this,nf)){let n=tr(this.appearance.marker.iconSize);null==(i=t.imagePromiseCache[M(this,n2)])||i.then((t=>{e.drawImage(t,c-n/2,p-n/2,n,n)}))}M(this,t2)!==u&&(e.textAlign=u,ce(this,t2,u)),s&&null!=h&&(e.shadowColor="transparent",e.drawImage(h,c+tr(l),p+tr(a)))}};Jx=new WeakMap,$x=new WeakSet,_N=u((function(){if(M(this,r2)!==this.mapView.currentScale){let{iconVisibilityThreshold:t=$Y}=this.appearance.marker;this.mapView.currentScale<=t&&typeof this.appearance.marker.iconSize<"u"&&M(this,Jx)?(ce(this,Xc,tr(this.appearance.marker.iconSize+pye)),ce(this,nf,!0)):(ce(this,nf,!1),ce(this,Xc,tr(dye))),ce(this,r2,this.mapView.currentScale)}ce(this,qg,!0)}),"#calculateMarkerSize"),qg=new WeakMap,e2=new WeakMap,t2=new WeakMap,Yc=new WeakMap,n2=new WeakMap,KT=new WeakSet,nX=u((function(){if(!this.appearance.marker.icon)return;let t=VD(this.appearance.marker.icon);ce(this,n2,t),uo.imagePromiseCache[t]||(uo.imagePromiseCache[t]=fetch("data:image/svg+xml;base64, ".concat(btoa(this.appearance.marker.icon))).then((t=>t.blob())).then((t=>new Promise((e=>{let i=new Image;i.onload=function(){e(i)},i.src=URL.createObjectURL(t)})))))}),"#cacheImage"),i2=new WeakSet,wN=u((function(t,e,i){let n,r=tr(this.pinCanvasSize);null!=window.OffscreenCanvas?n=new OffscreenCanvas(r,r):(n=document.createElement("canvas"),n.width=r,n.height=r,n.style.width=r/devicePixelRatio+"px",n.style.height=r/devicePixelRatio+"px");let o=n.getContext("2d");return o.shadowColor="rgba(0,0,0,0.3)",o.shadowOffsetY=tr(gye),o.shadowBlur=tr(vye),o.beginPath(),o.arc(r/2,r/2,t/2+tr(eX)/2,0,2*Math.PI),o.fillStyle=e,o.fill(),o.beginPath(),o.arc(r/2,r/2,t/2,0,2*Math.PI),o.shadowColor="transparent",o.fillStyle=i,o.fill(),n}),"#createPinCanvas"),r2=new WeakMap,Xc=new WeakMap,nf=new WeakMap,u(uo,"InternalFloatingLabel"),A(uo,"testId",0),te(uo,Yc,void 0),A(uo,"imagePromiseCache",{});var bN=uo,Xo=bN;E();var Fg,rf,TN=class extends Vp{constructor(){super(...arguments),A(this,"contentEl",document.createElement("div")),A(this,"containerEl",document.createElement("div")),A(this,"ready",!1),te(this,Fg,[0,0]),te(this,rf,!1)}removeSelf(){var t,e;if(null!=this.__engine&&null!=(null==(t=this.containerEl)?void 0:t.parentElement)&&(null==(e=this.containerEl)?void 0:e.parentElement)===this.__engine.collisionEngineContainerEl)try{this.containerEl.parentElement.removeChild(this.containerEl)}catch(t){Le.warn("error removing collider from dom",t)}this.__engine=void 0,this.containerEl=null,this.contentEl=null}enable(){!this.__engine||!this.containerEl||(this.enabled=!0,this.containerEl.style.opacity="0",this.__engine.collisionEngineContainerEl.appendChild(this.containerEl),this.updateDimensionsImmediately())}disable(){if(this.__engine&&this.containerEl&&(this.enabled=!1,this.ready=!1,this.containerEl.style.opacity="0",null!=this.containerEl.parentElement&&this.containerEl.parentElement===this.__engine.collisionEngineContainerEl))try{this.containerEl.parentElement.removeChild(this.containerEl)}catch(t){Le.warn("error removing collider from dom",t)}}colliderDidGoOffscreen(){this.visible=!1,this.containerEl&&(this.containerEl.style.opacity="0")}colliderDidNotFindAHome(){this.visible=!1}colliderDidUpdatePosition(t){this.containerEl&&(this.enabled&&!this.ready&&(this.containerEl.style.opacity="1",this.ready=!0),(M(this,Fg)[0]!==t[0]||M(this,Fg)[1]!==t[1])&&this.visible&&(this.containerEl.style.transform="translate3D(".concat(t[0],"px, ").concat(t[1],"px, ").concat(t[1],"px)"),ce(this,Fg,t)))}updateDimensions(){ce(this,rf,!0),this.visible&&(this.updateDimensionsImmediately(),ce(this,rf,!1))}updateDimensionsImmediately(){if(M(this,rf)&&this.containerEl){let{width:t,height:e}=this.containerEl.getBoundingClientRect();this.dimensions={width:t,height:e},Object.assign(this.containerEl,{width:t+"px",height:e+"px"}),ce(this,rf,!1),null!=this.__engine&&this.__engine.debouncedUpdate()}}colliderDidMount(){this.updateDimensions()}colliderDidUpdateVisiblity(){this.containerEl&&(this.containerEl.style.opacity=this.visible?"1":"0"),this.visible&&M(this,rf)&&this.updateDimensionsImmediately()}};Fg=new WeakMap,rf=new WeakMap,u(TN,"HTMLCollider");var EN=TN,s2=EN;E();var SN=Bt(Eu()),Ug={};function xye(t,e){var i;return null!=(null==(i=Ug[t.id])?void 0:i[e])||(null==Ug[t.id]&&(Ug[t.id]={}),t.polygons.forEach((e=>{e.entrances.forEach((i=>{Ug[t.id][i.id]=e}))}))),Ug[t.id][e]}u(xye,"getPolygonByNodeId");var sf,PN=class{constructor(t){te(this,sf,void 0),ce(this,sf,t)}get id(){return M(this,sf).id}get containerEl(){return M(this,sf).containerEl}get contentEl(){return M(this,sf).contentEl}update(){M(this,sf).updateDimensions()}};sf=new WeakMap,u(PN,"Marker");var Li,o2=PN,IN=class{constructor(t){te(this,Li,void 0),A(this,"markersMap"),A(this,"animations"),ce(this,Li,t),this.markersMap=new Map,this.animations=new Map}create(t,e,i){if(null==M(this,Li).currentMap)throw new Error("Unable to retrieve the current map");let n=M(this,Li).mapObjects.get(t.map.id||M(this,Li).currentMap),r=0;if(t instanceof Fs){let e=xye(n.mapClass,t.id);null!=e&&(r=e.geometry.scale.z*Math.max(n.mapClass.width,n.mapClass.height)/1e3)}return new of({...i,collisionRank:null==i?void 0:i.rank,contentHtml:e,mapId:n.id,position:{nodeOrCoordinate:t,height:r}})}addInternal(t,e,i){if(null==M(this,Li).currentMap)throw new Error("Unable to retrieve the current map");let n=this.create(t,e,i);return M(this,Li).smartCollisionEngine.add(n.id,n),n}add(t,e,i){if(null==M(this,Li).currentMap)throw new Error("Unable to retrieve the current map");let n=M(this,Li).mapObjects.get(t.map.id||M(this,Li).currentMap),r=this.create(t,e,i);M(this,Li).smartCollisionEngine.add(r.id,r),n.markers.add(r),M(this,Li).taskScheduler.scheduleTask(new Hi({name:"addMarker",callback:()=>{r.enable(),M(this,Li).smartCollisionEngine.debouncedUpdate()}})),M(this,Li).tryRendering();let o=new o2(r);return this.markersMap.set(r.id,{marker:o,internalMarker:r}),o}updateMap(t,e,i){var n,r;null==(n=M(this,Li).mapObjects.get(e))||n.markers.delete(t),null==(r=M(this,Li).mapObjects.get(i))||r.markers.add(t),M(this,Li).smartCollisionEngine.updateMap(t.id,e,i),t.enable()}setPosition(t,e,i){var n,r;let o;if("string"==typeof t?o=null==(n=this.markersMap.get(t))?void 0:n.internalMarker:t instanceof o2?o=null==(r=this.markersMap.get(t.id))?void 0:r.internalMarker:t instanceof of&&(o=t),!o)return;let s=o.position.nodeOrCoordinate;s.map.id!==e.map.id&&this.updateMap(o,s.map.id,e.map.id),o.setPosition(e,i),M(this,Li).tryRendering(un.ALL)}animate(t,e,i){var n;let r="string"==typeof t?t:t.id,o=null==(n=this.markersMap.get(r))?void 0:n.internalMarker;if(!o)return Promise.resolve();let s=this.animations.get(r);s&&(s.tween.stop(),s.resolver(),this.animations.delete(r));let a,l=o.position.nodeOrCoordinate,u={lat:l.lat,lon:l.lon},h={lat:e.lat,lon:e.lon},c=(null==i?void 0:i.easing)&&ua[i.easing]||SN.default.Easing.Cubic.InOut,p=new SN.default.Tween(u).to(h,(null==i?void 0:i.duration)||1e3).easing(c).onUpdate((t=>{let i=e.map.createCoordinate(t.lat,t.lon);this.setPosition(o,i)})).onComplete((()=>{this.animations.delete(r),a()})).start();l.map.id!==e.map.id&&this.updateMap(o,l.map.id,e.map.id);let d=new Promise((t=>{a=t,this.animations.set(r,{tween:p,resolver:a})}));return M(this,Li).tryRendering(),d}remove(t){let e="string"==typeof t?t:t.id;M(this,Li).smartCollisionEngine.remove(e),M(this,Li).smartCollisionEngine.debouncedUpdate(),M(this,Li).tryRendering(),this.markersMap.delete(e)}removeAll(){Array.from(M(this,Li).mapObjects.values()).forEach((t=>{t.markers.forEach((t=>{M(this,Li).smartCollisionEngine.remove(t.id)}))})),M(this,Li).smartCollisionEngine.update(),M(this,Li).tryRendering(),this.markersMap=new Map}};Li=new WeakMap,u(IN,"MarkersController");var AN=IN,CN=AN;E();var a2,zg,bye={top:!0,left:!0,topLeft:!0,right:!0,topRight:!0,bottom:!0,bottomLeft:!0,bottomRight:!0},$T=class t extends s2{constructor(e){super(e),A(this,"className",""),A(this,"_el",null),A(this,"style",{}),A(this,"position"),A(this,"containerClassesLength"),A(this,"updateClassName",u((t=>{if(!this.containerEl)return;let e=this.containerEl.classList.item(this.containerClassesLength);e&&this.containerEl.classList.remove(e),this.containerEl.classList.add("tooltip--anchor-".concat(t)),ce(this,zg,t)}),"updateClassName")),te(this,a2,"-1"),te(this,zg,"");let{html:i,contentHtml:n,text:r,position:o,selector:s,map:a,padding:l=0,collisionRank:h=3,defaultAnchorType:c="top",enabledAnchorTypes:p,interactive:d=!1}=e,f=t.getContainerElClasses(d);if(this.containerClassesLength=f.split(" ").length,this.position=o,!this.containerEl)return;this.containerEl.innerHTML=i||'<div class="'.concat(f,'"><div class="mappedin-tooltip__content" style="padding: ').concat(l,'px">').concat(r||n,"</div></div>"),this.rank=h,this.mapId=a,this.id=Cr();let g=i?s:".mappedin-tooltip";this.containerEl=g?this.containerEl.querySelector(g):null,this.containerEl&&(this.contentEl=this.containerEl.firstElementChild),this._el=this.contentEl,this.options={collisionRank:h,padding:l/Math.SQRT2,defaultAnchorType:c,enabledAnchorTypes:{...bye,...p},interactive:d}}get strategies(){let{width:t,height:e}=this.dimensions,{padding:i}=this.options,n=i/2;return[{name:"top",getBoundingBox:({x:n,y:r})=>[r-e-i,r-i,n-t/2,n+t/2+i/2],onStrategySelected:()=>{this.style.top=-e-i+"px",this.style.left=-t/2+"px",this.className="top"}},{name:"right",getBoundingBox:({x:n,y:r})=>[r-e/2-i/2,r+e/2+i/2,n+i,n+i+t],onStrategySelected:()=>{this.style.top=-e/2+"px",this.style.left=i+"px",this.className="right"}},{name:"left",getBoundingBox:({x:n,y:r})=>[r-e/2,r+e/2,n-t-i,n],onStrategySelected:()=>{this.style.top=-e/2+"px",this.style.left=-t-i+"px",this.className="left"}},{name:"bottom",getBoundingBox:({x:n,y:r})=>[r+i,r+i+e,n-t/2,n+t/2],onStrategySelected:()=>{this.style.top=i+"px",this.style.left=-t/2+"px",this.className="bottom"}},{name:"bottomLeft",getBoundingBox:({x:r,y:o})=>[o+n+i,o+n+e+i,r-t-n,r-n],onStrategySelected:()=>{this.style.top=i+"px",this.style.left=-t-i+"px",this.className="bottom-left"}},{name:"bottomRight",getBoundingBox:({x:r,y:o})=>[o+n,o+n+e+i,r+n,r+n+t+i],onStrategySelected:()=>{this.style.top=i+"px",this.style.left=i+"px",this.className="bottom-right"}},{name:"topLeft",getBoundingBox:({x:i,y:r})=>[r-e-n,r-n,i-t-n,i-n],onStrategySelected:()=>{this.style.top=-e-i+"px",this.style.left=-t-i+"px",this.className="top-left"}},{name:"topRight",getBoundingBox:({x:r,y:o})=>[o-e-n,o-n,r+n+i,r+n+t+i],onStrategySelected:()=>{this.style.top=-e-i+"px",this.style.left=i+"px",this.className="top-right"}}].filter((t=>!0===this.options.enabledAnchorTypes[t.name]))}colliderDidMount(){this.updateDimensions()}updateDimensionsImmediately(){super.updateDimensionsImmediately(),ce(this,zg,""),ce(this,a2,"-1")}setAction(t){super.setAction(t),this.visible=1===t}colliderDidNotFindAHome(){4===this.options.collisionRank?this.visible=!0:this.setAction(2)}colliderDidGoOffscreen(){}colliderDidUpdateVisiblity(){let t=1===this.action?"1":"0";this.containerEl&&(M(this,a2)!=t&&(this.containerEl.style.opacity=t),"0"===t?this.updateInteractive(!1):this.updateInteractive(!this.options.interactive),M(this,zg)!==this.className&&(this.updateClassName(this.className),!0===this.visible&&(this.updateDimensionsImmediately(),Object.assign(this.containerEl.style,this.style))))}updateInteractive(t){if(!this.containerEl)return;let e=this.containerEl.classList.item(1);if(!e)return;let i=t?"pointer-events-auto":"pointer-events-none";e!==i&&this.containerEl.classList.replace(e,i)}static getContainerElClasses(t){return"mappedin-tooltip ".concat(t?"pointer-events-none":"pointer-events-auto")}};a2=new WeakMap,zg=new WeakMap,u($T,"SmartTooltip");var ON=$T,Wp=ON;E();var _ye={anchor:0},DN=class extends s2{constructor(t){super(t),A(this,"_el",null),A(this,"style",{}),A(this,"polygon"),A(this,"position");let{contentHtml:e,position:i,mapId:n,id:r,collisionRank:o=3}=t;this.position=i,this.containerEl&&(this.containerEl.innerHTML='<div class="mappedin-marker__wrapper"><div class="mappedin-marker">'.concat(e,"</div></div>"),this.rank=o,this.mapId=n,this.id="string"==typeof r?r:Cr(),this.containerEl=this.containerEl.querySelector(".mappedin-marker"),this.contentEl=this.containerEl?this.containerEl.firstElementChild:null,this._el=this.contentEl,this.options={..._ye,...t})}get strategies(){let{width:t,height:e}=this.dimensions;return[{name:"center",getBoundingBox:({x:i,y:n})=>{let r=n-e/2,o=n+e/2,s=i-t/2,a=i+t/2;switch(this.options.anchor){case 1:r=n-e,o=n;break;case 3:r=n,o=n+e;break;case 2:s=i-t,a=i;break;case 4:s=i,a=i+t}return[r,o,s,a]},onStrategySelected:()=>{let i=-e/2+"px",n=-t/2+"px";switch(this.style.top=i,this.style.left=n,this.options.anchor){case 1:this.style.top=-e+"px";break;case 3:this.style.top="0px";break;case 2:this.style.left=-t+"px";break;case 4:this.style.left="0px";break;default:this.style.top=i,this.style.left=n}}}]}colliderDidMount(){this.updateDimensions()}setAction(t){super.setAction(t),this.visible=1===t}colliderDidNotFindAHome(){this.setAction(2)}colliderDidUpdatePosition(t){super.colliderDidUpdatePosition(t)}colliderDidGoOffscreen(){}colliderDidUpdateVisiblity(){this.containerEl&&(this.containerEl.style.opacity=1===this.action?"1":"0"),super.colliderDidUpdateVisiblity(),!0===this.visible&&this.containerEl&&Object.assign(this.containerEl.style,this.style)}};u(DN,"InternalMarker");var LN=DN,of=LN;E(),E();var e3=500,t3="ease-out",n3=.6,Yp=void 0,i3=7.9,NN=1;function wye(t,e){let i=t.getCenter(new K),n=t.getSize(new K),{x:r,y:o,z:s}=n,a=r*e,l=o*e,u=s*e,h=i.x-a/2,c=i.x+a/2,p=i.y-l/2,d=i.y+l/2,f=i.z-u/2,g=i.z+u/2;return new Yt({x:h,y:p,z:f},{x:c,y:d,z:g})}function r3(t,e){let{margin:i,radius:n}=e,r=t.boundingBox,o=wye(new Yt(r.min,r.max).clone().applyMatrix4(t.object.matrix),null!=i?i:1),s={min:o.min,max:o.max,margin:i,radius:n,center:o.getCenter(new K)};s.min.z=(s.max.z+s.min.z)/2,s.max.z=s.min.z;let a=(s.max.x+s.min.x)/2,l=(s.max.y+s.min.y)/2,u=(s.max.z,s.min.z,Math.sqrt((s.max.x-a)**2+(s.max.y-l)**2));return s.radius=u,s.center=o.getCenter(new K),s}u(wye,"addMarginMultiplierToBoundingBox"),u(r3,"getPanBoundsForObject");var Di,BN=class{constructor(t,e){A(this,"maps"),te(this,Di,void 0),A(this,"mapObjectsArray",[]),A(this,"transitionOptions"),A(this,"object",new ci),A(this,"currentMap"),A(this,"mapObjects",new Map),ce(this,Di,e),this.object.userData.name="mappedin-scene",this.maps=t.sort(((t,e)=>t.elevation-e.elevation)),t.forEach((t=>{let e=M(this,Di).mapObjects.get(t.id);this.mapObjects.set(t.id,e)})),this.object.position.set(0,0,0)}get mapObjectsByMapGroup(){let t=Array.from(this.mapObjects.values());return 0===t.filter((t=>{var e;return null==(e=t.mapClass.mapGroup)?void 0:e.id})).length?{_:t}:Array.from(this.mapObjects.values()).reduce(((t,e)=>(e.mapClass.mapGroup&&(t[e.mapClass.mapGroup.id]?t[e.mapClass.mapGroup.id].push(e):t[e.mapClass.mapGroup.id]=[e]),t)),{})}determineMapPositionAndRotation(t){var e,i;let n=(null==(e=M(this,Di).referenceMap)?void 0:e.scale)||1,r=t.scale||1,o=(null==(i=M(this,Di).referenceMap)?void 0:i.getNorth())||0,s=t.getNorth()||0,{x:a,y:l}=t.georeference[0].target,{x:u,y:h}=t.georeference[2].target,c=new mi(a,l),p=new mi(u,h),{lat:d,lon:f}=c.midpointTo(p),g=M(this,Di).referenceMap.createCoordinate(d,f),{x:m,y:v}=M(this,Di).convertTo3DMapPosition(g),y=r/n;return{position:[m,v,0],scale:[y,y,y],rotation:[0,0,s-o]}}async prepare(t,e){this.transitionOptions=e||{},this.currentMap=(null==e?void 0:e.activeMap)||this.maps[0],t.currentScene=this;let i=await this.preRender(e);this.mapObjectsArray=await Promise.all(i)}resize(){}focusOnCurrentMap(t,e){return new Promise((i=>{var n,r,o,s,a,l;let u=this.mapObjects.get(this.currentMap.id);u.object.updateMatrixWorld();let h=M(this,Di).loadOptions&&M(this,Di).loadOptions.zoomOverrides&&M(this,Di).loadOptions.zoomOverrides.zoomMultiplier||i3,c=u.getMapScale()*u.object.scale.x;M(this,Di).controls.zoomFactor=c/h;let p=r3(u,M(this,Di).controls.panBounds);M(this,Di).controls.panBounds=p;let d=null==(n=null==t?void 0:t.focusOn)?void 0:n.targets,f=(null==(r=null==t?void 0:t.focusOn)?void 0:r.options)||{},g={boundingBox:p},m=null!=(o=null==f?void 0:f.rotation)?o:Yp,v=null==f?void 0:f.tilt,y=null!=(s=null==f?void 0:f.easing)?s:t3,x=null!=(a=null==f?void 0:f.duration)?a:e3,{min:_,max:b}=p,E=[new K(_.x,_.y,_.z),new K(_.x,b.y,_.z),new K(b.x,_.y,_.z),new K(b.x,b.y,_.z),new K(_.x,_.y,b.z),new K(_.x,b.y,b.z),new K(b.x,_.y,b.z),new K(b.x,b.y,b.z)],{zoom:w}=M(this,Di).getCameraFrameForPoints(E,1,1,M(this,Di).cachedPadding,!1);M(this,Di).controls.restrictZoomLimits(w),M(this,Di).controls.expandZoomLimits(w),e?(M(this,Di).controls.setMulti(p.center,w,Yp,n3),i(void 0)):null!=t&&t.autoFocusOnActiveMap?(null!=d&&(g={...d,points:(null==(l=null==d?void 0:d.coordinates)?void 0:l.map((t=>M(this,Di).convertTo3DMapPosition({x:t.x,y:t.y}))))||[]}),M(this,Di).focusOn({...g,...f,duration:x,rotation:m,doNotEmitFocusOnEvent:!0,focusZoomFactor:1,minZoom:null==f?void 0:f.minZoom,padding:f.safeAreaInsets,tilt:v,curve:ua[y],callback:()=>{i(void 0)},cancelledCallback:()=>{i(void 0)}})):(M(this,Di).tryRendering(),i(void 0))}))}async preRender(t){this.currentMap=(null==t?void 0:t.activeMap)||this.maps[0],this.transitionOptions=t;let e=[];for(let t in this.mapObjectsByMapGroup)this.mapObjectsByMapGroup[t].forEach((t=>{e.push(t.load().then((()=>{if(!M(this,Di).sceneManager.processedMapObjects.has(t)){let{position:e,rotation:i,scale:n}=this.determineMapPositionAndRotation(t.mapClass);t.object.position.set(...e),t.object.rotation.set(...i),t.object.scale.set(...n),t.box=(new Yt).setFromObject(t.object),t.object.name=t.mapClass.id,M(this,Di).sceneManager.processedMapObjects.add(t)}return t})).catch((t=>{Le.error(t)})))}));return e}unmount(){}postRender(){M(this,Di).imageFlippingEnabled&&(this.mapObjectsArray.forEach((t=>{var e;null==(e=M(this,Di).imageFlippingCache[t.id])||e.forEach((([e,i])=>{t.enableImageFlipping(e,i)}))})),M(this,Di).publish(4,!0))}};Di=new WeakMap,u(BN,"MapViewScene");var RN=BN,Zc=RN;E();var wt,FN=Bt(Eu()),kN=!1,Mye=2e3,Eye=2e3,Tye=u((([t,e],[i,n])=>{let r={x:t,y:e},o=i,s=n;function a(t,e){let i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}return u(a,"distanceBetweenPoints"),a({x:(r.x+o)/2,y:(r.y+s)/2},r)}),"getRadiusOfSquare"),qN=u((t=>{let e=new K,i=new K;for(let n of t)e.min(n),i.max(n);let n=new Ji,r=new rn(new Float32Array(24),3);for(let e=0;e<8;e++){let i=t[e].clone();r.setXYZ(e,i.x,i.y,i.z)}n.setAttribute("position",r);let o=new rn(new Uint16Array([0,2,1,0,3,2,1,6,5,1,2,6,5,7,4,5,6,7,4,3,0,4,7,3,3,6,2,3,7,6,0,5,4,0,1,5]),1);return n.setIndex(o),n}),"createBoxFromPoints"),iX=50,zN=class extends Zc{constructor(t,e){var i,n;super(t,e),te(this,wt,void 0),A(this,"containerBoxHelper"),A(this,"viewportBox"),A(this,"currentMapWrapperMesh"),A(this,"currentMapWrapperBoxHelper"),A(this,"viewportMesh"),A(this,"stackContainerMesh"),A(this,"currentMinTilt"),A(this,"hasOutdoorGeometry",!1),A(this,"scrollToMap",u((async(t,e=500)=>new Promise((i=>{let n=this.mapObjects.get(t.id);new FN.default.Tween({z:M(this,wt).controls.getPedestal()}).to({z:n.object.position.z},e).easing(FN.default.Easing.Quadratic.InOut).onUpdate((({z:t})=>{M(this,wt).controls.setPedestal(t)})).onComplete((()=>{M(this,wt).controls.setPedestal(M(this,wt).controls.getPedestal(),!0),M(this,wt).tryRendering(),i(void 0)})).start()}))),"scrollToMap")),A(this,"updateFrame",u((t=>{let e=this.containerBoxHelper.max.z,i=this.containerBoxHelper.min.z;t.pedestal<e&&t.pedestal>i&&(this.currentMapWrapperMesh.position.z=t.pedestal,this.viewportMesh.position.z=t.pedestal,this.currentMapWrapperBoxHelper.setFromObject(this.currentMapWrapperMesh),this.viewportBox.setFromObject(this.viewportMesh),this.mapObjects.forEach((t=>{t.box.setFromObject(t.object),(this.currentMapWrapperBoxHelper.containsBox(t.box)||this.currentMapWrapperBoxHelper.intersectsBox(t.box))&&this.currentMap!==t.mapClass&&(this.currentMap=t.mapClass,M(this,wt).publish(5,t.mapClass))})),M(this,wt).controls.orbit.position.z=t.pedestal,M(this,wt).tryRendering())}),"updateFrame")),A(this,"labels",new Map),A(this,"createMapLabels",u((()=>{for(let t of this.mapObjects.values()){let e=t.object.position.clone(),i=Tye([this.containerBoxHelper.min.x,this.containerBoxHelper.min.y],[this.containerBoxHelper.max.x,this.containerBoxHelper.max.y]),n=Math.PI/4,r=new K(Math.cos(n)*i,Math.sin(n)*i,0),o=M(this,wt).cameraObject,s=new K;o.getWorldDirection(s);let a=(new Ia).setFromUnitVectors(r.clone().normalize(),s.clone().cross(new K(0,0,-1)).normalize()),l=e.clone().add(r.clone().applyQuaternion(a));l.z=t.object.position.z;let u=new Bc(100,100,100),h=new ls({color:"red"});new Ft(u,h).position.copy(l);let c=M(this,wt).markers.addInternal(M(this,wt).convert3DMapPositionToCoordinate(l,t.mapClass),"<div style=\"color: #333333; text-shadow: 0px 0px #efefef;font-family: 'Lato', sans-serif; font-size: 24px; font-weight: 300; line-height: 58px;\">".concat(t.mapClass.shortName,"</div>"),{rank:4});c.enable(),this.labels.set(t,[r,e,c])}M(this,wt).controls.dispatcher.addEventListener(M(this,wt).controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.updateLabels)}),"createMapLabels")),A(this,"updateLabels",u((()=>{let t=M(this,wt).cameraObject;t.updateMatrixWorld(!0),t.updateProjectionMatrix();for(let[e,[i,n,r]]of this.labels){let o=new K;t.getWorldDirection(o);let s=(new Ia).setFromUnitVectors(i.clone().normalize(),o.clone().cross(new K(0,0,-1)).normalize()),a=n.clone().add(i.clone().applyQuaternion(s));M(this,wt).markers.setPosition(r,M(this,wt).convert3DMapPositionToCoordinate(a,e.mapClass),!1)}}),"updateLabels")),A(this,"destroyLabels",u((()=>{M(this,wt).controls.dispatcher.removeEventListener(M(this,wt).controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.updateLabels);for(let[t,e,i]of this.labels.values())M(this,wt).smartCollisionEngine.remove(i.id);M(this,wt).smartCollisionEngine.update(),this.labels=new Map,M(this,wt).tryRendering()}),"destroyLabels")),ce(this,wt,e),this.object.position.set(0,0,0);let r=null==(n=null==(i=M(this,wt).options)?void 0:i.loadOptions)?void 0:n.outdoorGeometryLayers;this.hasOutdoorGeometry=Array.isArray(r)&&r.length>0}lockControls(){M(this,wt).controls.enablePedestal=!0,M(this,wt).controls.enableRotate=!0,M(this,wt).controls.enablePan=!1,M(this,wt).controls.enableZoom=!1;let{minTilt:t}=M(this,wt).controls;this.currentMinTilt=t,M(this,wt).controls.minTilt=NN}unlockControls(){var t;M(this,wt).controls.enablePedestal=!1,M(this,wt).controls.enableRotate=!0,M(this,wt).controls.enablePan=!0,M(this,wt).controls.enableZoom=!0,M(this,wt).controls.minTilt=null!=(t=this.currentMinTilt)?t:M(this,wt).controls.minTilt}createStackBoundingBox(){var t,e;let i=new pT(this.object,"rgba(160, 160, 160)");kN&&M(this,wt).scene.add(i);let n=(new Yt).setFromObject(i),r=(null!=(e=null==(t=this.transitionOptions)?void 0:t.verticalDistanceBetweenMaps)?e:iX)/M(this,wt).venue.maps[0].scale,o=this.computeMapZ(this.mapObjectsArray[0],0,this.transitionOptions),s=this.computeMapZ(this.mapObjectsArray[this.mapObjectsArray.length-1],this.mapObjectsArray.length-1,this.transitionOptions),a=[new K(n.min.x,n.min.y,o),new K(n.min.x,n.max.y,o),new K(n.max.x,n.min.y,o),new K(n.max.x,n.max.y,o),new K(n.min.x,n.min.y,s),new K(n.min.x,n.max.y,s),new K(n.max.x,n.min.y,s),new K(n.max.x,n.max.y,s)],l=new Ft(qN(a),new ls({color:"blue",wireframe:!0}));kN&&M(this,wt).scene.add(l);let u=[new K(n.min.x,n.min.y,-r/2),new K(n.min.x,n.max.y,-r/2),new K(n.max.x,n.min.y,-r/2),new K(n.max.x,n.max.y,-r/2),new K(n.min.x,n.min.y,r/2),new K(n.min.x,n.max.y,r/2),new K(n.max.x,n.min.y,r/2),new K(n.max.x,n.max.y,r/2)],h=new Ft(qN(u),new ls({color:"red",wireframe:!0}));h.visible=!1,h.applyMatrix4(this.object.matrixWorld);let c=[new K(n.min.x,n.min.y,-550),new K(n.min.x,n.max.y,-550),new K(n.max.x,n.min.y,-550),new K(n.max.x,n.max.y,-550),new K(n.min.x,n.min.y,550),new K(n.min.x,n.max.y,550),new K(n.max.x,n.min.y,550),new K(n.max.x,n.max.y,550)],p=new Ft(qN(c),new ls({color:"blue",wireframe:!0}));p.visible=!1,p.applyMatrix4(this.object.matrixWorld),this.viewportBox=(new Yt).setFromObject(p),M(this,wt).scene.add(p);let d=(new Yt).setFromObject(h);M(this,wt).scene.add(h),this.stackContainerMesh=l,this.containerBoxHelper=(new Yt).setFromObject(l),this.currentMapWrapperMesh=h,kN&&(this.currentMapWrapperMesh.visible=!0),this.currentMapWrapperBoxHelper=d,this.viewportMesh=p;let f=M(this,wt).controls.getPedestal();this.currentMapWrapperMesh.position.z=f,this.viewportMesh.position.z=f,this.currentMapWrapperBoxHelper.setFromObject(this.currentMapWrapperMesh),this.viewportBox.setFromObject(this.viewportMesh)}focusOnStackBox(t){return new Promise((e=>{var i,n,r,o,s;let a=(null==(i=null==t?void 0:t.focusOn)?void 0:i.options)||{},l=null!=(n=null==a?void 0:a.rotation)?n:Yp,u=null!=(r=null==a?void 0:a.tilt)?r:NN,h=null!=(o=null==a?void 0:a.easing)?o:t3,c=null!=(s=null==a?void 0:a.duration)?s:e3;M(this,wt).focusOn({...a,boundingBox:this.currentMapWrapperBoxHelper,duration:c,rotation:l,padding:a.safeAreaInsets,tilt:u,focusZoomFactor:1,curve:ua[h],callback:()=>{e(void 0)}})}))}unmount(){this.unlockControls(),M(this,wt).controls.dispatcher.removeEventListener(M(this,wt).controls.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT.type,this.updateFrame),M(this,wt).scene.remove(this.currentMapWrapperMesh),M(this,wt).scene.remove(this.viewportMesh),M(this,wt).scene.remove(this.currentMapWrapperBoxHelper),M(this,wt).scene.remove(this.viewportBox),M(this,wt).scene.remove(this.stackContainerMesh),this.destroyLabels()}computeMapZ(t,e,i){var n;return(null!=e?e:t.mapClass.elevation)*((null!=(n=null==i?void 0:i.verticalDistanceBetweenMaps)?n:iX)/M(this,wt).referenceMap.scale)}async prepare(t,e){await super.prepare(t,e)}postRender(){super.postRender(),this.createMapLabels(),M(this,wt).cameraObject.updateProjectionMatrix(),M(this,wt).controls.dispatcher.addEventListener(M(this,wt).controls.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT.type,this.updateFrame)}expandMaps(t,e){var i,n;let r=this.mapObjects.get(this.currentMap.id),o=(null==(n=null==(i=null==e?void 0:e.focusOn)?void 0:i.options)?void 0:n.duration)||Eye,s=t.flatMap(((t,i)=>{if(t===r&&this.hasOutdoorGeometry)return[t.fadeOut("outdoor-geometry")];let n=this.computeMapZ(t,i,e);this.object.add(t.object);let s=[ll({from:{z:r.object.position.z},to:{z:n},duration:o,onUpdate:({z:e})=>{t.object.position.z=e,M(this,wt).tryRendering()}}),t.fadeIn("default")];return this.hasOutdoorGeometry&&s.push(t.fadeOut("outdoor-geometry")),s}));return{start:()=>Promise.all(s.map((t=>t.start(M(this,wt)))))}}contractMaps(t=this.mapObjects.get(this.currentMap.id)){var e,i;let n=this.mapObjectsArray,r=this.transitionOptions,o=(null==(i=null==(e=null==r?void 0:r.focusOn)?void 0:e.options)?void 0:i.duration)||Mye,s=n.flatMap((e=>t===e?{start:()=>Promise.resolve()}:[ll({from:{z:e.object.position.z},to:{z:t.object.position.z},duration:o,onUpdate:({z:t})=>{e.object.position.z=t,M(this,wt).tryRendering()}}),e.fadeOut()]));return{start:()=>Promise.all(s.map((t=>t.start(M(this,wt)))))}}resize(){this.focusOnStackBox({focusOn:{options:{tilt:M(this,wt).controls.getTilt(),rotation:M(this,wt).controls.getRotation()}}})}};wt=new WeakMap,u(zN,"MapViewStackScene");var UN=zN,l2=UN;E(),E();var GN=class extends Uc{constructor(t,e={}){let i=e.font;if(void 0===i)super();else{let n=i.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(n,e)}this.type="TextGeometry"}};u(GN,"TextGeometry");var s3=GN,Kc=Bt(hX());E();var XN=Bt(_X());function wX(t){this.name="JSClipperError",this.message=t,this.stack=(new Error).stack}u(wX,"JSClipperError"),wX.prototype=Error.prototype,XN.default.Error=function(t){throw new wX(t)};var p2=XN.default;E(),E();var ZN=class{constructor(t){this.isFont=!0,this.type="Font",this.data=t}generateShapes(t,e=100){let i=[],n=G2e(t,e,this.data);for(let t=0,e=n.length;t<e;t++)i.push(...n[t].toShapes());return i}};u(ZN,"Font");var c3=ZN;function G2e(t,e,i){let n=Array.from(t),r=e/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,s=[],a=0,l=0;for(let t=0;t<n.length;t++){let e=n[t];if("\n"===e)a=0,l-=o;else{let t=V2e(e,r,a,l,i);a+=t.offsetX,s.push(t.path)}}return s}function V2e(t,e,i,n,r){let o=r.glyphs[t]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");let s,a,l,u,h,c,p,d,f=new dT;if(o.o){let t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=t.length;r<o;)switch(t[r++]){case"m":s=t[r++]*e+i,a=t[r++]*e+n,f.moveTo(s,a);break;case"l":s=t[r++]*e+i,a=t[r++]*e+n,f.lineTo(s,a);break;case"q":l=t[r++]*e+i,u=t[r++]*e+n,h=t[r++]*e+i,c=t[r++]*e+n,f.quadraticCurveTo(h,c,l,u);break;case"b":l=t[r++]*e+i,u=t[r++]*e+n,h=t[r++]*e+i,c=t[r++]*e+n,p=t[r++]*e+i,d=t[r++]*e+n,f.bezierCurveTo(h,c,p,d,l,u)}}return{offsetX:o.ha*e,path:f}}u(G2e,"createPaths"),u(V2e,"createPath");var Hg={glyphs:{0:{ha:765,x_min:66,x_max:700,o:"m 700 497 q 683 282 700 377 q 627 121 665 187 q 528 21 589 56 q 382 -14 468 -14 q 242 21 302 -14 q 144 121 183 56 q 86 282 105 187 q 66 497 66 377 q 84 712 66 617 q 139 872 101 807 q 236 972 176 938 q 382 1007 296 1007 q 522 973 463 1007 q 621 873 582 939 q 680 713 661 808 q 700 497 700 618 m 192 497 q 202 319 192 395 q 235 193 212 243 q 293 117 257 142 q 382 92 330 92 q 471 117 434 92 q 531 192 507 142 q 565 318 554 242 q 575 497 575 395 q 565 675 575 599 q 531 801 554 751 q 471 876 507 851 q 382 901 434 901 q 293 876 330 901 q 235 801 257 851 q 202 675 212 751 q 192 497 192 599 z "},1:{ha:765,x_min:121,x_max:482,o:"m 482 0 l 363 0 l 363 619 q 363 682 363 648 q 365 748 363 715 q 367 811 366 781 q 368 864 368 841 q 348 843 357 852 q 330 826 339 834 q 311 809 321 818 q 286 787 300 800 l 186 705 l 121 789 l 380 991 l 482 991 l 482 0 z "},2:{ha:765,x_min:65,x_max:684,o:"m 684 0 l 65 0 l 65 106 l 302 364 q 393 465 353 419 q 461 553 433 510 q 505 641 490 597 q 519 736 519 684 q 508 806 519 776 q 475 858 496 837 q 425 890 454 880 q 359 901 395 901 q 243 875 295 901 q 144 808 191 849 l 75 889 q 134 935 102 913 q 201 972 165 956 q 277 997 237 987 q 361 1006 317 1006 q 478 987 426 1006 q 568 935 531 969 q 624 851 604 901 q 644 741 644 802 q 626 631 644 683 q 577 528 608 578 q 502 427 545 477 q 407 321 458 376 l 216 118 l 216 113 l 684 113 l 684 0 z "},3:{ha:765,x_min:56,x_max:682,o:"m 652 760 q 636 669 652 710 q 592 599 621 629 q 525 550 564 569 q 437 522 486 530 l 437 518 q 620 442 557 503 q 682 282 682 380 q 660 163 682 217 q 593 69 638 109 q 480 8 549 30 q 318 -14 412 -14 q 179 -2 244 -14 q 56 40 113 9 l 56 155 q 183 107 115 124 q 315 90 252 90 q 423 104 378 90 q 498 142 469 117 q 542 204 528 168 q 555 286 555 241 q 537 365 555 332 q 486 419 519 398 q 405 451 453 441 q 297 461 357 461 l 207 461 l 207 564 l 297 564 q 395 577 352 564 q 466 616 437 591 q 510 675 495 641 q 525 751 525 710 q 513 814 525 787 q 478 862 500 842 q 425 891 456 881 q 355 901 393 901 q 228 879 283 901 q 122 819 172 856 l 60 904 q 117 943 85 925 q 186 976 149 962 q 266 998 223 989 q 355 1006 308 1006 q 484 987 429 1006 q 576 936 539 969 q 633 858 614 903 q 652 760 652 813 z "},4:{ha:765,x_min:16,x_max:737,o:"m 737 222 l 593 222 l 593 0 l 473 0 l 473 222 l 16 222 l 16 330 l 465 997 l 593 997 l 593 335 l 737 335 l 737 222 m 473 335 l 473 576 q 474 656 473 614 q 477 738 475 698 q 480 812 478 777 q 482 869 481 846 l 476 869 q 464 839 471 856 q 449 806 457 823 q 431 774 440 789 q 415 747 422 758 l 136 335 l 473 335 z "},5:{ha:765,x_min:89,x_max:688,o:"m 370 608 q 495 590 437 608 q 596 534 553 571 q 663 444 639 498 q 688 318 688 389 q 665 179 688 241 q 596 75 642 117 q 484 9 551 32 q 330 -14 417 -14 q 262 -10 296 -14 q 198 0 229 -7 q 139 16 167 6 q 89 40 111 26 l 89 157 q 141 129 111 141 q 205 109 172 117 q 272 96 238 100 q 334 92 305 92 q 429 104 387 92 q 500 143 471 117 q 545 210 530 170 q 561 304 561 250 q 501 453 561 401 q 328 504 441 504 q 288 502 309 504 q 245 498 267 500 q 204 492 224 495 q 171 486 185 489 l 110 525 l 147 991 l 615 991 l 615 879 l 254 879 l 228 595 q 285 604 250 599 q 370 608 321 608 z "},6:{ha:765,x_min:77,x_max:701,o:"m 77 424 q 84 566 77 495 q 109 701 91 636 q 158 821 127 766 q 237 918 189 877 q 353 982 286 959 q 510 1006 420 1006 q 538 1005 523 1006 q 570 1003 554 1004 q 601 999 586 1001 q 627 993 615 996 l 627 888 q 573 900 603 896 q 514 904 543 904 q 407 889 453 904 q 326 848 360 875 q 270 785 292 822 q 233 704 247 749 q 212 610 218 660 q 203 505 205 559 l 211 505 q 244 551 224 530 q 289 588 263 572 q 347 612 315 603 q 419 621 379 621 q 536 601 484 621 q 625 542 588 581 q 681 447 661 503 q 701 319 701 391 q 680 180 701 242 q 620 76 659 119 q 525 9 581 33 q 400 -14 469 -14 q 273 13 332 -14 q 170 94 214 39 q 102 230 127 148 q 77 424 77 312 m 399 90 q 473 104 439 90 q 531 146 507 118 q 569 217 555 174 q 582 319 582 260 q 571 405 582 367 q 537 469 559 442 q 481 509 515 495 q 403 524 448 524 q 320 508 357 524 q 256 466 282 492 q 215 408 229 441 q 200 343 200 376 q 213 253 200 298 q 250 172 225 208 q 312 113 275 136 q 399 90 349 90 z "},7:{ha:765,x_min:61,x_max:699,o:"m 191 0 l 572 879 l 61 879 l 61 991 l 699 991 l 699 893 l 322 0 l 191 0 z "},8:{ha:765,x_min:72,x_max:694,o:"m 383 1007 q 491 992 440 1007 q 579 947 541 977 q 640 873 618 918 q 663 768 663 828 q 649 686 663 723 q 612 620 635 650 q 555 567 588 591 q 485 525 523 544 q 562 478 524 504 q 629 420 600 452 q 676 348 659 388 q 694 258 694 308 q 672 145 694 196 q 608 60 649 95 q 510 5 567 24 q 383 -14 452 -14 q 251 5 309 -14 q 153 57 193 23 q 93 141 113 92 q 72 253 72 191 q 87 345 72 304 q 128 418 102 385 q 189 475 154 450 q 264 519 224 500 q 201 565 231 541 q 151 621 172 590 q 117 688 130 651 q 104 770 104 725 q 127 873 104 829 q 189 947 150 918 q 278 992 227 977 q 383 1007 328 1007 m 193 252 q 204 185 193 216 q 238 134 215 155 q 296 101 261 113 q 380 89 332 89 q 464 101 428 89 q 525 135 500 113 q 562 188 549 157 q 574 257 574 219 q 561 321 574 292 q 523 374 547 349 q 463 420 498 398 q 386 463 429 441 l 366 472 q 237 379 280 431 q 193 252 193 326 m 382 904 q 268 868 310 904 q 225 764 225 832 q 237 697 225 725 q 270 648 249 669 q 320 609 291 626 q 385 575 350 591 q 446 608 417 590 q 496 648 475 625 q 530 699 517 670 q 542 764 542 727 q 499 868 542 832 q 382 904 456 904 z "},9:{ha:765,x_min:72,x_max:697,o:"m 697 568 q 690 426 697 497 q 665 291 683 355 q 616 171 647 227 q 536 74 585 115 q 421 10 488 33 q 264 -14 354 -14 q 235 -13 251 -14 q 204 -11 220 -12 q 174 -7 189 -9 q 147 -1 159 -5 l 147 104 q 201 92 171 96 q 260 87 231 87 q 410 119 351 87 q 504 206 469 151 q 553 333 538 260 q 571 486 568 406 l 562 486 q 530 441 549 462 q 485 404 511 420 q 427 380 459 389 q 354 371 394 371 q 237 391 290 371 q 149 450 185 411 q 92 544 112 488 q 72 672 72 600 q 93 811 72 749 q 154 917 115 873 q 249 983 193 960 q 374 1006 304 1006 q 501 979 442 1006 q 604 899 560 953 q 672 762 647 844 q 697 568 697 680 m 375 901 q 301 888 334 901 q 243 846 267 874 q 205 774 218 817 q 192 672 192 731 q 203 587 192 625 q 237 523 214 549 q 293 482 259 496 q 371 468 326 468 q 454 484 417 468 q 518 525 492 500 q 559 583 545 551 q 574 648 574 616 q 561 739 574 694 q 524 820 549 784 q 462 879 499 857 q 375 901 425 901 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"!":{ha:374,x_min:100,x_max:272,o:"m 228 281 l 146 281 l 111 991 l 262 991 l 228 281 m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},'"':{ha:558,x_min:90,x_max:468,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 m 468 991 l 440 633 l 363 633 l 335 991 l 468 991 z "},"#":{ha:897,x_min:35,x_max:863,o:"m 667 606 l 624 383 l 814 383 l 814 290 l 606 290 l 550 0 l 450 0 l 507 290 l 310 290 l 254 0 l 157 0 l 210 290 l 35 290 l 35 383 l 228 383 l 272 606 l 86 606 l 86 699 l 289 699 l 345 991 l 444 991 l 389 699 l 587 699 l 644 991 l 742 991 l 685 699 l 863 699 l 863 606 l 667 606 m 328 383 l 525 383 l 568 606 l 371 606 l 328 383 z "},$:{ha:765,x_min:83,x_max:668,o:"m 668 302 q 651 216 668 255 q 603 149 634 178 q 526 102 571 121 q 424 75 481 83 l 424 -81 l 330 -81 l 330 69 q 262 72 296 69 q 195 81 227 75 q 134 96 162 87 q 83 117 105 105 l 83 233 q 135 211 106 222 q 197 191 165 200 q 264 177 230 182 q 330 171 298 171 l 330 465 q 225 508 270 486 q 152 559 181 530 q 109 625 123 588 q 94 713 94 663 q 111 796 94 758 q 158 862 127 833 q 233 908 189 890 q 330 932 277 926 l 330 1054 l 424 1054 l 424 935 q 549 917 492 931 q 652 882 606 903 l 607 783 q 522 814 569 800 q 424 832 474 828 l 424 546 q 529 503 484 525 q 606 452 575 480 q 652 388 637 424 q 668 302 668 351 m 549 302 q 542 343 549 325 q 520 377 535 362 q 482 406 506 393 q 424 431 458 418 l 424 178 q 518 220 487 187 q 549 302 549 254 m 214 711 q 219 668 214 687 q 239 632 225 648 q 275 604 252 616 q 330 579 297 591 l 330 829 q 242 788 270 819 q 214 711 214 758 z "},"%":{ha:1146,x_min:69,x_max:1076,o:"m 170 696 q 194 528 170 584 q 272 472 218 472 q 378 696 378 472 q 272 918 378 918 q 194 863 218 918 q 170 696 170 808 m 478 696 q 466 564 478 623 q 429 466 454 506 q 365 405 404 426 q 272 383 326 383 q 184 405 222 383 q 121 466 146 426 q 82 564 95 506 q 69 696 69 623 q 81 827 69 769 q 118 924 93 884 q 181 985 142 964 q 272 1006 219 1006 q 361 985 323 1006 q 426 924 399 964 q 465 827 452 884 q 478 696 478 769 m 768 298 q 792 131 768 186 q 871 75 817 75 q 977 298 977 75 q 871 521 977 521 q 792 466 817 521 q 768 298 768 410 m 1076 298 q 1064 167 1076 225 q 1027 69 1053 109 q 963 8 1002 29 q 871 -14 924 -14 q 783 8 821 -14 q 719 69 745 29 q 681 167 694 109 q 668 298 668 225 q 680 429 668 372 q 716 527 692 487 q 780 587 741 566 q 871 608 818 608 q 960 587 922 608 q 1024 527 998 566 q 1063 429 1050 487 q 1076 298 1076 372 m 903 991 l 353 0 l 245 0 l 796 991 l 903 991 z "},"&":{ha:975,x_min:74,x_max:953,o:"m 286 790 q 292 745 286 767 q 308 701 297 723 q 337 656 319 679 q 379 608 355 633 q 448 653 419 632 q 496 696 477 674 q 525 741 515 718 q 534 793 534 765 q 526 838 534 817 q 502 873 517 859 q 463 897 486 888 q 412 905 441 905 q 320 875 354 905 q 286 790 286 845 m 378 96 q 450 103 417 96 q 512 125 484 111 q 565 157 541 138 q 611 196 589 175 l 349 472 q 286 428 313 450 q 240 382 259 407 q 212 329 222 358 q 203 262 203 300 q 215 195 203 226 q 249 142 227 164 q 304 108 271 120 q 378 96 336 96 m 74 258 q 87 353 74 311 q 127 428 101 394 q 191 491 153 462 q 277 549 229 520 q 235 599 256 573 q 200 655 215 625 q 175 718 184 684 q 165 790 165 751 q 182 881 165 841 q 231 950 199 922 q 310 992 263 978 q 416 1007 357 1007 q 517 992 473 1007 q 592 950 562 978 q 640 881 623 922 q 656 790 656 841 q 639 710 656 747 q 593 641 622 673 q 528 583 565 610 q 450 532 491 556 l 689 279 q 722 319 707 299 q 748 363 736 340 q 769 412 760 386 q 785 471 778 439 l 909 471 q 885 388 899 426 q 853 317 871 351 q 813 255 836 284 q 765 199 791 227 l 953 0 l 800 0 l 686 117 q 621 62 653 86 q 551 21 588 38 q 473 -4 515 5 q 378 -14 431 -14 q 250 4 307 -14 q 154 57 193 22 q 95 143 115 92 q 74 258 74 193 z "},"'":{ha:314,x_min:90,x_max:224,o:"m 224 991 l 196 633 l 118 633 l 90 991 l 224 991 z "},"(":{ha:418,x_min:56,x_max:376,o:"m 56 380 q 68 548 56 465 q 105 708 80 630 q 169 857 130 785 q 260 991 207 928 l 376 991 q 232 704 281 861 q 183 382 183 547 q 196 221 183 301 q 232 64 208 141 q 292 -84 256 -12 q 375 -220 328 -156 l 260 -220 q 169 -89 207 -159 q 105 57 130 -19 q 68 215 80 134 q 56 380 56 296 z "},")":{ha:418,x_min:41,x_max:363,o:"m 363 380 q 351 215 363 296 q 313 57 338 134 q 249 -89 288 -19 q 158 -220 211 -159 l 43 -220 q 125 -84 90 -156 q 186 64 161 -12 q 222 221 210 141 q 235 382 235 301 q 186 704 235 547 q 41 991 137 861 l 158 991 q 249 857 211 928 q 313 708 288 785 q 351 548 338 630 q 363 380 363 465 z "},"*":{ha:765,x_min:56,x_max:708,o:"m 450 1055 l 421 789 l 690 864 l 708 733 l 452 714 l 618 493 l 497 428 l 378 671 l 271 428 l 146 493 l 310 714 l 56 733 l 75 864 l 340 789 l 311 1055 l 450 1055 z "},"+":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 z "},",":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"-":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},".":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 z "},"/":{ha:518,x_min:14,x_max:504,o:"m 504 991 l 135 0 l 14 0 l 383 991 l 504 991 z "},":":{ha:372,x_min:100,x_max:272,o:"m 100 75 q 106 119 100 101 q 125 148 113 137 q 152 164 136 159 q 186 170 168 170 q 219 164 203 170 q 247 148 235 159 q 265 119 258 137 q 272 75 272 101 q 265 32 272 50 q 247 3 258 14 q 219 -14 235 -9 q 186 -20 203 -20 q 152 -14 168 -20 q 125 3 136 -9 q 106 32 113 14 q 100 75 100 50 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},";":{ha:372,x_min:43,x_max:272,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 100 669 q 106 714 100 696 q 125 743 113 732 q 152 759 136 754 q 186 764 168 764 q 219 759 203 764 q 247 743 235 754 q 265 714 258 732 q 272 669 272 696 q 265 627 272 644 q 247 597 258 609 q 219 581 235 586 q 186 575 203 575 q 152 581 168 575 q 125 597 136 586 q 106 627 113 609 q 100 669 100 644 z "},"<":{ha:765,x_min:69,x_max:696,o:"m 696 161 l 69 449 l 69 518 l 696 844 l 696 736 l 197 489 l 696 271 l 696 161 z "},"=":{ha:765,x_min:69,x_max:696,o:"m 69 578 l 69 679 l 696 679 l 696 578 l 69 578 m 69 300 l 69 401 l 696 401 l 696 300 l 69 300 z "},">":{ha:765,x_min:69,x_max:696,o:"m 69 271 l 568 489 l 69 736 l 69 844 l 696 518 l 696 449 l 69 161 l 69 271 z "},"?":{ha:591,x_min:25,x_max:546,o:"m 191 281 l 191 306 q 196 376 191 345 q 214 434 201 407 q 250 487 227 461 q 306 542 272 513 q 361 592 338 570 q 399 638 385 615 q 421 689 414 662 q 428 751 428 715 q 418 811 428 784 q 388 857 408 838 q 340 887 369 876 q 273 897 311 897 q 166 880 217 897 q 68 839 115 862 l 25 937 q 144 986 80 966 q 273 1006 208 1006 q 387 988 336 1006 q 473 939 437 971 q 527 859 508 906 q 546 753 546 812 q 537 672 546 707 q 509 606 528 636 q 464 547 491 575 q 400 486 437 518 q 342 433 365 456 q 307 389 320 410 q 290 345 294 368 q 285 293 285 323 l 285 281 l 191 281 m 158 75 q 165 119 158 101 q 183 148 172 137 q 210 164 195 159 q 244 170 226 170 q 278 164 262 170 q 305 148 294 159 q 323 119 317 137 q 330 75 330 101 q 323 32 330 50 q 305 3 317 14 q 278 -14 294 -9 q 244 -20 262 -20 q 210 -14 226 -20 q 183 3 195 -9 q 165 32 172 14 q 158 75 158 50 z "},"@":{ha:1203,x_min:74,x_max:1129,o:"m 1129 496 q 1123 411 1129 454 q 1104 331 1116 369 q 1072 259 1091 292 q 1027 202 1053 227 q 968 164 1001 178 q 896 150 935 150 q 841 160 865 150 q 798 187 816 170 q 769 226 781 204 q 754 272 758 248 l 751 272 q 721 224 739 247 q 679 185 703 202 q 624 159 654 169 q 558 150 594 150 q 466 169 506 150 q 397 222 425 188 q 355 304 370 256 q 340 411 340 353 q 360 536 340 479 q 418 635 380 593 q 509 699 456 676 q 629 722 563 722 q 690 720 660 722 q 749 712 721 717 q 800 702 777 707 q 839 690 823 696 l 823 408 q 822 384 823 393 q 822 370 822 375 q 822 361 822 364 q 822 357 822 359 q 829 298 822 321 q 848 261 836 275 q 874 242 859 248 q 904 237 888 237 q 959 258 935 237 q 999 314 983 279 q 1023 397 1015 349 q 1031 497 1031 444 q 1002 668 1031 593 q 921 795 972 743 q 799 873 869 846 q 644 900 728 900 q 442 862 530 900 q 295 757 355 825 q 205 597 236 690 q 175 395 175 505 q 202 213 175 292 q 280 79 229 134 q 409 -3 332 25 q 586 -31 486 -31 q 668 -26 627 -31 q 746 -13 708 -21 q 817 6 783 -5 q 880 28 851 16 l 880 -68 q 749 -109 822 -94 q 587 -123 675 -123 q 371 -89 466 -123 q 209 12 275 -54 q 109 173 143 78 q 74 390 74 269 q 114 628 74 517 q 228 819 154 738 q 408 945 302 899 q 644 991 513 991 q 839 957 750 991 q 992 859 928 923 q 1093 703 1057 795 q 1129 496 1129 611 m 449 408 q 483 278 449 318 q 575 237 517 237 q 639 253 612 237 q 682 296 665 268 q 708 363 699 324 q 720 449 717 402 l 729 621 q 684 630 710 626 q 629 635 658 635 q 545 615 579 635 q 489 564 511 595 q 458 491 468 532 q 449 408 449 450 z "},A:{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 z "},B:{ha:863,x_min:135,x_max:786,o:"m 135 991 l 406 991 q 558 978 492 991 q 669 936 625 965 q 736 858 713 906 q 758 741 758 810 q 745 662 758 699 q 707 597 732 625 q 645 551 682 570 q 561 526 608 532 l 561 519 q 649 496 608 511 q 720 454 690 481 q 768 387 751 427 q 786 288 786 346 q 764 166 786 220 q 700 76 742 113 q 599 20 659 39 q 464 0 539 0 l 135 0 l 135 991 m 261 571 l 427 571 q 522 581 484 571 q 585 611 561 591 q 619 662 608 631 q 629 732 629 692 q 577 848 629 813 q 412 884 525 884 l 261 884 l 261 571 m 261 465 l 261 107 l 441 107 q 542 121 501 107 q 607 159 582 134 q 642 217 631 183 q 653 293 653 252 q 642 363 653 331 q 605 417 631 395 q 538 453 580 440 q 433 465 496 465 l 261 465 z "},C:{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 z "},D:{ha:950,x_min:135,x_max:865,o:"m 865 505 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},E:{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 z "},F:{ha:682,x_min:135,x_max:650,o:"m 261 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 530 l 624 530 l 624 419 l 261 419 l 261 0 z "},G:{ha:958,x_min:85,x_max:859,o:"m 530 524 l 859 524 l 859 37 q 783 16 821 25 q 705 0 745 6 q 621 -10 665 -7 q 526 -14 577 -14 q 338 22 420 -14 q 199 124 256 58 q 114 284 143 190 q 85 497 85 379 q 117 708 85 614 q 211 868 149 802 q 363 970 273 935 q 570 1006 454 1006 q 714 991 645 1006 q 843 947 783 976 l 794 838 q 742 859 770 849 q 684 877 713 869 q 622 890 654 885 q 559 895 591 895 q 413 867 477 895 q 306 788 349 840 q 241 663 263 736 q 218 496 218 589 q 237 334 218 408 q 296 208 256 261 q 401 126 337 155 q 557 97 466 97 q 611 99 587 97 q 657 103 636 100 q 697 110 678 106 q 733 117 715 113 l 733 412 l 530 412 l 530 524 z "},H:{ha:974,x_min:135,x_max:839,o:"m 839 0 l 713 0 l 713 463 l 261 463 l 261 0 l 135 0 l 135 991 l 261 991 l 261 574 l 713 574 l 713 991 l 839 991 l 839 0 z "},I:{ha:471,x_min:56,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 z "},J:{ha:376,x_min:-125,x_max:252,o:"m -20 -264 q -80 -259 -54 -264 q -125 -248 -106 -255 l -125 -139 q -75 -149 -102 -145 q -18 -153 -49 -153 q 32 -146 7 -153 q 78 -123 58 -140 q 112 -76 99 -106 q 125 0 125 -46 l 125 991 l 252 991 l 252 14 q 232 -110 252 -58 q 176 -196 212 -162 q 91 -247 140 -231 q -20 -264 41 -264 z "},K:{ha:804,x_min:135,x_max:804,o:"m 804 0 l 661 0 l 355 473 l 261 396 l 261 0 l 135 0 l 135 991 l 261 991 l 261 496 l 343 610 l 650 991 l 791 991 l 439 559 l 804 0 z "},L:{ha:682,x_min:135,x_max:650,o:"m 135 0 l 135 991 l 261 991 l 261 113 l 650 113 l 650 0 l 135 0 z "},M:{ha:1208,x_min:135,x_max:1074,o:"m 545 0 l 244 868 l 239 868 q 245 768 243 818 q 250 679 248 726 q 252 593 252 631 l 252 0 l 135 0 l 135 991 l 322 991 l 602 183 l 606 183 l 886 991 l 1074 991 l 1074 0 l 947 0 l 947 602 q 949 682 947 637 q 952 769 950 728 q 957 867 955 817 l 951 867 l 648 0 l 545 0 z "},N:{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 z "},O:{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},P:{ha:800,x_min:135,x_max:729,o:"m 729 701 q 710 583 729 640 q 649 482 692 526 q 536 412 606 438 q 363 386 466 386 l 261 386 l 261 0 l 135 0 l 135 991 l 380 991 q 537 972 471 991 q 646 916 603 953 q 709 825 688 879 q 729 701 729 770 m 261 493 l 349 493 q 459 504 412 493 q 537 539 506 515 q 583 601 568 563 q 599 694 599 640 q 543 837 599 791 q 370 884 488 884 l 261 884 l 261 493 z "},Q:{ha:1029,x_min:85,x_max:945,o:"m 945 497 q 928 332 945 408 q 879 194 911 255 q 799 87 847 132 q 688 17 751 43 q 763 -95 717 -47 q 871 -184 810 -144 l 789 -281 q 660 -164 719 -231 q 567 -11 602 -97 q 542 -13 555 -12 q 515 -14 528 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 z "},R:{ha:819,x_min:135,x_max:803,o:"m 261 410 l 261 0 l 135 0 l 135 991 l 376 991 q 643 922 557 991 q 729 710 729 852 q 712 607 729 651 q 668 531 696 563 q 606 479 641 500 q 533 444 570 458 l 803 0 l 654 0 l 416 410 l 261 410 m 261 517 l 372 517 q 476 529 433 517 q 546 564 519 541 q 586 622 574 587 q 599 704 599 657 q 585 787 599 753 q 543 842 571 821 q 472 874 515 864 q 370 884 429 884 l 261 884 l 261 517 z "},S:{ha:721,x_min:71,x_max:657,o:"m 657 265 q 634 148 657 199 q 567 60 610 96 q 461 5 524 24 q 321 -14 399 -14 q 180 -2 245 -14 q 71 33 115 10 l 71 154 q 123 133 94 143 q 185 114 153 122 q 252 101 218 106 q 321 96 287 96 q 481 136 429 96 q 533 253 533 177 q 523 317 533 290 q 489 367 513 344 q 422 411 464 389 q 318 457 381 432 q 213 509 258 481 q 140 572 169 537 q 97 652 111 608 q 83 754 83 697 q 105 861 83 814 q 166 940 127 907 q 260 989 205 972 q 380 1006 315 1006 q 526 990 461 1006 q 640 951 590 975 l 595 846 q 495 880 551 865 q 379 895 439 895 q 251 856 296 895 q 205 753 205 818 q 216 686 205 714 q 250 635 226 658 q 312 592 273 612 q 408 550 351 572 q 516 500 470 526 q 594 441 563 474 q 641 366 625 409 q 657 265 657 323 z "},T:{ha:721,x_min:14,x_max:707,o:"m 424 0 l 297 0 l 297 880 l 14 880 l 14 991 l 707 991 l 707 880 l 424 880 l 424 0 z "},U:{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 z "},V:{ha:789,x_min:0,x_max:789,o:"m 654 991 l 789 991 l 457 0 l 330 0 l 0 991 l 134 991 l 334 363 q 368 244 353 301 q 393 136 382 186 q 419 244 404 186 q 456 367 435 301 l 654 991 z "},W:{ha:1227,x_min:14,x_max:1214,o:"m 549 991 l 682 991 l 838 411 q 858 335 848 373 q 876 261 867 297 q 891 194 884 226 q 901 136 897 162 q 908 193 904 162 q 918 257 912 223 q 929 325 923 290 q 943 393 936 360 l 1079 991 l 1214 991 l 965 0 l 838 0 l 665 636 q 647 707 656 671 q 631 776 638 744 q 615 848 623 813 q 600 777 608 814 q 585 707 593 745 q 567 632 576 669 l 403 0 l 275 0 l 14 991 l 147 991 l 298 389 q 313 324 307 357 q 326 257 320 290 q 336 193 332 224 q 345 136 341 162 q 353 195 348 161 q 365 264 358 228 q 379 339 372 301 q 396 410 387 376 l 549 991 z "},X:{ha:760,x_min:0,x_max:760,o:"m 760 0 l 616 0 l 376 431 l 127 0 l 0 0 l 307 518 l 21 991 l 155 991 l 380 612 l 607 991 l 736 991 l 450 522 l 760 0 z "},Y:{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 z "},Z:{ha:749,x_min:56,x_max:693,o:"m 693 0 l 56 0 l 56 98 l 538 879 l 69 879 l 69 991 l 679 991 l 679 893 l 197 113 l 693 113 l 693 0 z "},"[":{ha:421,x_min:111,x_max:386,o:"m 386 -220 l 111 -220 l 111 991 l 386 991 l 386 890 l 235 890 l 235 -118 l 386 -118 l 386 -220 z "},"\\":{ha:518,x_min:16,x_max:505,o:"m 136 991 l 505 0 l 385 0 l 16 991 l 136 991 z "},"]":{ha:421,x_min:35,x_max:310,o:"m 35 -118 l 186 -118 l 186 890 l 35 890 l 35 991 l 310 991 l 310 -220 l 35 -220 l 35 -118 z "},"^":{ha:739,x_min:28,x_max:711,o:"m 28 372 l 339 999 l 408 999 l 711 372 l 602 372 l 374 871 l 137 372 l 28 372 z "},_:{ha:571,x_min:-3,x_max:574,o:"m 574 -220 l -3 -220 l -3 -125 l 574 -125 l 574 -220 z "},"`":{ha:802,x_min:267,x_max:533,o:"m 533 842 l 452 842 q 400 889 428 861 q 346 947 372 917 q 299 1004 320 977 q 267 1050 277 1031 l 267 1064 l 415 1064 q 440 1014 426 1041 q 471 959 455 986 q 503 905 486 931 q 533 860 519 880 l 533 842 z "},a:{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 z "},b:{ha:814,x_min:118,x_max:737,o:"m 454 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 l 208 0 l 118 0 l 118 1055 l 241 1055 l 241 800 q 241 750 241 777 q 239 700 240 723 q 236 647 237 673 l 241 647 q 277 691 257 671 q 322 726 296 711 q 381 750 349 741 q 454 758 414 758 m 431 656 q 340 638 376 656 q 282 586 304 621 q 251 498 260 551 q 241 374 241 445 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},c:{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 z "},d:{ha:814,x_min:77,x_max:696,o:"m 578 100 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 491 726 465 741 q 537 691 517 711 q 572 650 557 671 l 581 650 q 576 694 578 673 q 574 730 575 711 q 572 760 572 749 l 572 1055 l 696 1055 l 696 0 l 596 0 l 578 100 m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 z "},e:{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 z "},f:{ha:457,x_min:20,x_max:510,o:"m 441 652 l 275 652 l 275 0 l 151 0 l 151 652 l 20 652 l 20 703 l 151 749 l 151 814 q 166 934 151 886 q 211 1010 182 982 q 281 1051 239 1039 q 376 1063 323 1063 q 450 1055 416 1063 q 510 1038 484 1047 l 478 942 q 432 955 457 949 q 380 961 408 961 q 334 955 353 961 q 301 932 314 948 q 282 887 288 916 q 275 815 275 859 l 275 745 l 441 745 l 441 652 z "},g:{ha:720,x_min:25,x_max:692,o:"m 692 745 l 692 668 l 558 650 q 590 589 577 626 q 603 505 603 552 q 587 410 603 454 q 539 334 571 366 q 459 284 507 302 q 349 267 412 267 q 319 267 334 267 q 294 269 304 267 q 272 254 283 262 q 251 235 260 245 q 236 210 242 224 q 231 180 231 197 q 239 151 231 162 q 261 134 247 140 q 294 125 275 127 q 334 123 313 123 l 453 123 q 559 107 516 123 q 630 64 603 92 q 670 0 658 37 q 682 -78 682 -37 q 660 -185 682 -138 q 593 -266 638 -233 q 478 -316 547 -298 q 314 -334 408 -334 q 187 -319 241 -334 q 97 -278 133 -305 q 43 -213 61 -251 q 25 -126 25 -174 q 38 -55 25 -85 q 74 -1 52 -24 q 126 35 96 21 q 187 57 155 50 q 140 98 159 70 q 122 161 122 125 q 144 233 122 203 q 212 292 165 263 q 159 325 183 304 q 118 374 135 347 q 93 434 102 401 q 83 501 83 467 q 100 609 83 562 q 151 690 117 656 q 233 741 184 723 q 349 758 283 758 q 400 754 374 758 q 446 745 427 751 l 692 745 m 142 -122 q 151 -169 142 -147 q 179 -206 159 -191 q 232 -231 199 -222 q 314 -240 265 -240 q 503 -201 440 -240 q 566 -89 566 -162 q 557 -38 566 -58 q 531 -7 549 -18 q 481 8 512 4 q 407 12 451 12 l 288 12 q 238 7 264 12 q 191 -14 212 1 q 156 -55 170 -28 q 142 -122 142 -81 m 204 505 q 241 389 204 427 q 345 351 277 351 q 447 389 412 351 q 482 507 482 427 q 447 630 482 591 q 343 669 411 669 q 240 629 276 669 q 204 505 204 588 z "},h:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 1055 l 241 1055 l 241 742 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},i:{ha:359,x_min:109,x_max:253,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},j:{ha:359,x_min:-46,x_max:253,o:"m 45 -334 q -9 -329 12 -334 q -46 -317 -31 -324 l -46 -216 q -10 -227 -28 -223 q 32 -231 8 -231 q 66 -225 50 -231 q 93 -207 81 -220 q 112 -172 105 -194 q 118 -115 118 -150 l 118 745 l 241 745 l 241 -107 q 230 -201 241 -159 q 194 -272 218 -243 q 133 -318 170 -302 q 45 -334 96 -334 m 109 946 q 129 1005 109 987 q 180 1023 150 1023 q 209 1019 195 1023 q 232 1005 222 1015 q 247 981 241 996 q 253 946 253 966 q 232 887 253 907 q 180 868 210 868 q 129 887 150 868 q 109 946 109 906 z "},k:{ha:689,x_min:118,x_max:684,o:"m 232 385 l 323 500 l 522 745 l 665 745 l 393 422 l 684 0 l 542 0 l 314 342 l 240 286 l 240 0 l 118 0 l 118 1055 l 240 1055 l 240 571 l 229 385 l 232 385 z "},l:{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 1055 l 241 1055 l 241 0 z "},m:{ha:1244,x_min:118,x_max:1133,o:"m 1010 0 l 1010 479 q 976 612 1010 568 q 871 656 942 656 q 787 640 821 656 q 730 593 752 624 q 698 516 708 562 q 688 411 688 471 l 688 0 l 564 0 l 564 479 q 530 612 564 568 q 425 656 496 656 q 338 638 373 656 q 281 586 302 621 q 251 501 260 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 281 695 259 673 q 331 730 304 716 q 388 751 357 745 q 449 758 418 758 q 584 728 530 758 q 664 635 638 699 l 669 635 q 712 690 687 667 q 766 728 736 713 q 828 751 795 743 q 895 758 861 758 q 1073 693 1013 758 q 1133 486 1133 629 l 1133 0 l 1010 0 z "},n:{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 z "},o:{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 z "},p:{ha:814,x_min:118,x_max:737,o:"m 454 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 745 l 218 745 l 236 644 l 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},q:{ha:814,x_min:77,x_max:696,o:"m 383 89 q 470 104 435 89 q 528 152 506 120 q 561 232 550 184 q 572 343 571 279 l 572 371 q 563 493 572 439 q 532 582 554 546 q 473 637 510 618 q 382 656 437 656 q 247 582 290 656 q 204 370 204 508 q 247 158 204 228 q 383 89 290 89 m 359 -14 q 244 11 296 -14 q 155 84 192 35 q 97 204 117 132 q 77 371 77 276 q 97 539 77 467 q 155 660 117 611 q 244 733 192 709 q 359 758 296 758 q 432 749 399 758 q 490 725 465 740 q 536 689 516 709 q 572 644 557 668 l 578 644 l 596 745 l 696 745 l 696 -334 l 572 -334 l 572 -16 q 574 17 572 -3 q 576 55 575 37 q 581 100 578 77 l 572 100 q 537 56 557 77 q 491 20 517 35 q 433 -5 465 4 q 359 -14 400 -14 z "},r:{ha:554,x_min:118,x_max:526,o:"m 440 758 q 484 756 460 758 q 526 751 509 755 l 510 637 q 471 643 491 641 q 433 646 451 646 q 355 628 391 646 q 295 579 320 611 q 255 502 269 547 q 241 401 241 456 l 241 0 l 118 0 l 118 745 l 218 745 l 233 608 l 239 608 q 275 665 256 637 q 318 712 294 692 q 372 746 342 733 q 440 758 402 758 z "},s:{ha:627,x_min:61,x_max:564,o:"m 564 204 q 544 109 564 150 q 487 41 524 68 q 398 0 450 14 q 281 -14 346 -14 q 154 -2 207 -14 q 61 33 101 10 l 61 146 q 108 124 82 135 q 162 106 134 114 q 221 93 191 98 q 281 87 251 87 q 356 95 325 87 q 406 116 387 102 q 434 150 425 130 q 443 195 443 170 q 436 233 443 216 q 411 266 429 250 q 362 300 393 283 q 282 338 331 317 q 194 379 233 359 q 128 425 155 399 q 86 483 101 450 q 72 561 72 515 q 91 645 72 608 q 143 707 109 682 q 224 745 177 732 q 330 758 272 758 q 451 744 396 758 q 554 707 505 730 l 511 607 q 421 641 467 627 q 326 656 374 656 q 224 633 257 656 q 191 568 191 610 q 198 527 191 545 q 225 494 206 509 q 276 462 244 478 q 355 427 308 446 q 443 386 404 406 q 508 340 481 366 q 549 282 535 315 q 564 204 564 250 z "},t:{ha:471,x_min:22,x_max:444,o:"m 343 87 q 371 89 355 87 q 400 92 386 90 q 426 97 414 94 q 444 102 438 100 l 444 8 q 422 0 435 4 q 392 -7 408 -4 q 358 -12 376 -10 q 323 -14 340 -14 q 245 -3 281 -14 q 183 35 210 8 q 142 106 157 61 q 127 220 127 151 l 127 652 l 22 652 l 22 707 l 127 760 l 180 916 l 252 916 l 252 745 l 439 745 l 439 652 l 252 652 l 252 220 q 273 121 252 154 q 343 87 294 87 z "},u:{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 z "},v:{ha:665,x_min:0,x_max:665,o:"m 254 0 l 0 745 l 127 745 l 262 330 q 280 273 270 308 q 300 201 290 237 q 319 132 311 164 q 330 82 328 99 l 335 82 q 347 132 338 99 q 365 201 355 164 q 385 273 375 237 q 403 330 395 308 l 538 745 l 665 745 l 411 0 l 254 0 z "},w:{ha:1036,x_min:14,x_max:1022,o:"m 684 0 l 570 418 q 563 445 567 430 q 555 477 559 460 q 546 512 551 494 q 538 547 542 530 q 518 628 528 586 l 514 628 q 496 546 505 585 q 480 476 488 512 q 464 415 471 440 l 347 0 l 204 0 l 14 745 l 143 745 l 232 349 q 245 282 239 318 q 258 212 252 247 q 269 146 264 177 q 277 96 274 115 l 281 96 q 290 143 284 113 q 303 205 296 172 q 317 270 310 238 q 332 325 325 302 l 453 745 l 586 745 l 703 325 q 716 271 709 302 q 732 207 724 239 q 745 145 739 175 q 754 96 751 115 l 758 96 q 765 143 760 113 q 775 208 769 172 q 788 280 781 243 q 803 349 795 317 l 896 745 l 1022 745 l 829 0 l 684 0 z "},x:{ha:694,x_min:24,x_max:669,o:"m 277 382 l 37 745 l 178 745 l 347 467 l 517 745 l 657 745 l 416 382 l 669 0 l 529 0 l 347 296 l 164 0 l 24 0 l 277 382 z "},y:{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 z "},z:{ha:612,x_min:56,x_max:557,o:"m 557 0 l 56 0 l 56 85 l 419 652 l 78 652 l 78 745 l 545 745 l 545 646 l 189 93 l 557 93 l 557 0 z "},"{":{ha:492,x_min:41,x_max:457,o:"m 339 -11 q 347 -64 339 -43 q 371 -97 355 -85 q 408 -113 386 -109 q 457 -118 430 -117 l 457 -220 q 360 -208 405 -219 q 284 -173 316 -197 q 233 -111 252 -149 q 215 -21 215 -74 l 215 205 q 171 304 215 275 q 41 334 126 334 l 41 439 q 171 468 126 439 q 215 567 215 497 l 215 793 q 233 883 215 846 q 284 944 252 920 q 360 980 316 968 q 457 991 405 991 l 457 890 q 408 885 430 890 q 371 869 386 881 q 347 837 355 857 q 339 783 339 816 l 339 558 q 299 445 339 487 q 180 390 258 404 l 180 382 q 299 327 258 368 q 339 214 339 286 l 339 -11 z "},"|":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 -334 l 332 -334 l 332 1055 z "},"}":{ha:492,x_min:35,x_max:450,o:"m 153 214 q 193 327 153 286 q 311 382 233 368 l 311 390 q 193 445 233 404 q 153 558 153 487 l 153 783 q 144 837 153 816 q 121 869 136 857 q 84 885 106 881 q 35 890 62 890 l 35 991 q 131 980 87 991 q 208 944 176 968 q 258 883 240 920 q 277 793 277 846 l 277 567 q 288 507 277 532 q 321 468 299 483 q 376 446 343 452 q 450 439 408 439 l 450 334 q 321 304 366 334 q 277 205 277 275 l 277 -21 q 258 -111 277 -74 q 208 -173 240 -149 q 131 -208 176 -197 q 35 -220 87 -219 l 35 -118 q 84 -113 62 -117 q 121 -97 106 -109 q 144 -64 136 -85 q 153 -11 153 -43 l 153 214 z "},"~":{ha:765,x_min:69,x_max:696,o:"m 359 441 q 316 460 334 452 q 282 472 297 467 q 253 478 267 476 q 224 479 239 479 q 184 473 205 479 q 144 455 164 467 q 105 429 124 444 q 69 397 86 414 l 69 507 q 237 581 137 581 q 274 579 257 581 q 310 573 291 577 q 351 560 328 568 q 406 538 374 551 q 449 519 431 527 q 484 508 468 512 q 513 502 500 503 q 542 500 527 500 q 581 506 561 500 q 622 524 602 513 q 661 550 642 535 q 696 582 680 565 l 696 472 q 528 399 629 399 q 491 400 508 399 q 455 407 474 402 q 414 419 437 411 q 359 441 391 428 z "}," ":{ha:361,x_min:0,x_max:0,o:""},"¡":{ha:374,x_min:100,x_max:272,o:"m 144 458 l 227 458 l 261 -253 l 110 -253 l 144 458 m 272 664 q 266 620 272 638 q 247 591 259 602 q 220 575 235 580 q 186 570 204 570 q 153 575 168 570 q 125 591 137 580 q 106 620 113 602 q 100 664 100 638 q 106 707 100 689 q 125 736 113 724 q 153 753 137 747 q 186 758 168 758 q 220 753 204 758 q 247 736 235 747 q 266 707 259 724 q 272 664 272 689 z "},"¢":{ha:765,x_min:127,x_max:647,o:"m 635 163 q 564 134 601 144 q 475 122 526 123 l 475 -14 l 382 -14 l 382 126 q 276 160 323 135 q 196 231 229 186 q 145 343 163 276 q 127 504 127 411 q 145 668 127 600 q 196 783 163 737 q 276 855 229 829 q 382 889 323 880 l 382 1006 l 475 1006 l 475 895 q 570 881 524 892 q 647 854 616 870 l 611 750 q 576 763 595 757 q 537 775 557 770 q 497 783 517 780 q 460 786 477 786 q 304 718 353 786 q 256 505 256 649 q 305 297 256 363 q 454 231 354 231 q 554 243 509 231 q 635 272 598 256 l 635 163 z "},"£":{ha:765,x_min:46,x_max:718,o:"m 452 1004 q 583 989 524 1004 q 686 950 642 974 l 642 852 q 556 887 604 872 q 457 901 508 901 q 397 892 425 901 q 349 863 369 883 q 317 811 328 843 q 306 734 306 779 l 306 534 l 561 534 l 561 441 l 306 441 l 306 298 q 298 226 306 256 q 277 174 290 196 q 247 138 264 153 q 211 113 229 123 l 718 113 l 718 0 l 46 0 l 46 104 q 101 126 76 112 q 143 163 125 140 q 172 219 161 186 q 182 297 182 252 l 182 441 l 47 441 l 47 534 l 182 534 l 182 754 q 202 860 182 813 q 257 938 222 906 q 342 987 293 970 q 452 1004 392 1004 z "},"¤":{ha:765,x_min:83,x_max:681,o:"m 126 490 q 138 567 126 530 q 171 635 150 603 l 83 722 l 150 789 l 236 701 q 304 735 268 723 q 382 747 341 747 q 459 735 422 747 q 526 701 495 723 l 614 789 l 681 724 l 593 636 q 626 568 614 605 q 639 490 639 531 q 627 412 639 450 q 593 345 615 375 l 679 258 l 614 193 l 526 279 q 459 247 495 258 q 382 235 422 235 q 304 247 341 235 q 236 281 267 259 l 150 195 l 85 260 l 171 346 q 138 413 150 376 q 126 490 126 450 m 220 490 q 232 427 220 456 q 267 375 245 397 q 318 340 289 353 q 382 328 348 328 q 447 340 416 328 q 499 375 477 353 q 534 427 522 397 q 547 490 547 456 q 534 555 547 525 q 499 608 522 585 q 447 643 477 630 q 382 656 416 656 q 318 643 348 656 q 267 608 289 630 q 232 555 245 585 q 220 490 220 525 z "},"¥":{ha:765,x_min:20,x_max:746,o:"m 382 490 l 616 991 l 746 991 l 485 471 l 647 471 l 647 378 l 443 378 l 443 271 l 647 271 l 647 178 l 443 178 l 443 0 l 322 0 l 322 178 l 118 178 l 118 271 l 322 271 l 322 378 l 118 378 l 118 471 l 277 471 l 20 991 l 150 991 l 382 490 z "},"¦":{ha:765,x_min:332,x_max:433,o:"m 332 1055 l 433 1055 l 433 526 l 332 526 l 332 1055 m 332 196 l 433 196 l 433 -334 l 332 -334 l 332 196 z "},"§":{ha:675,x_min:82,x_max:585,o:"m 93 549 q 102 611 93 583 q 126 661 111 640 q 161 698 141 683 q 201 724 180 713 q 122 788 151 749 q 93 884 93 827 q 112 958 93 925 q 164 1015 130 991 q 245 1050 198 1038 q 351 1063 293 1063 q 470 1049 417 1063 q 572 1014 524 1036 l 534 920 q 443 952 490 939 q 347 965 395 965 q 245 945 280 965 q 211 886 211 925 q 219 852 211 868 q 247 822 227 837 q 298 791 266 807 q 378 755 330 775 q 465 714 427 736 q 530 666 503 692 q 570 607 556 640 q 585 532 585 574 q 576 468 585 496 q 554 416 568 439 q 523 376 541 393 q 486 349 505 359 q 559 286 533 323 q 585 196 585 249 q 565 110 585 148 q 508 46 545 73 q 419 7 471 20 q 301 -7 366 -7 q 175 4 228 -7 q 82 37 122 16 l 82 144 q 129 124 103 134 q 183 106 155 114 q 242 94 212 98 q 301 89 272 89 q 379 97 348 89 q 430 118 411 105 q 456 149 448 132 q 464 184 464 166 q 458 219 464 204 q 435 250 452 235 q 386 282 418 265 q 302 319 354 298 q 214 361 253 340 q 148 409 175 382 q 107 469 121 435 q 93 549 93 503 m 197 564 q 207 517 197 538 q 238 476 216 496 q 293 438 259 456 q 376 399 328 419 l 400 389 q 428 410 414 397 q 453 437 441 422 q 471 472 464 453 q 478 514 478 491 q 469 562 478 540 q 438 603 460 583 q 380 643 416 623 q 288 682 343 662 q 255 666 271 677 q 226 641 239 656 q 205 606 213 625 q 197 564 197 586 z "},"¨":{ha:802,x_min:208,x_max:593,o:"m 208 946 q 227 999 208 983 q 273 1015 246 1015 q 319 999 300 1015 q 339 946 339 982 q 319 893 339 910 q 273 876 300 876 q 227 893 246 876 q 208 946 208 910 m 463 946 q 481 999 463 983 q 528 1015 500 1015 q 552 1011 541 1015 q 573 999 564 1007 q 587 977 582 990 q 593 946 593 964 q 573 893 593 910 q 528 876 553 876 q 481 893 500 876 q 463 946 463 910 z "},"©":{ha:1156,x_min:68,x_max:1088,o:"m 604 714 q 531 699 563 714 q 477 656 499 684 q 445 587 456 628 q 433 496 433 547 q 443 402 433 443 q 474 334 453 361 q 527 291 494 306 q 604 277 559 277 q 638 279 620 277 q 676 286 656 281 q 714 295 695 290 q 750 307 733 301 l 750 218 q 717 205 734 211 q 683 194 701 199 q 644 187 665 189 q 600 184 624 184 q 479 207 531 184 q 394 271 428 229 q 342 370 359 312 q 325 497 325 427 q 343 622 325 566 q 397 720 361 679 q 485 783 433 760 q 604 806 536 806 q 692 794 647 806 q 777 764 736 783 l 734 677 q 666 705 699 695 q 604 714 633 714 m 68 496 q 86 631 68 566 q 137 753 104 696 q 217 857 170 810 q 320 936 264 903 q 442 987 377 969 q 578 1006 507 1006 q 713 987 648 1006 q 835 936 779 969 q 939 857 892 903 q 1018 753 985 810 q 1069 631 1051 696 q 1088 496 1088 566 q 1069 360 1088 425 q 1018 238 1051 295 q 939 135 985 182 q 835 56 892 89 q 713 4 779 22 q 578 -14 648 -14 q 442 4 507 -14 q 320 56 377 22 q 217 135 264 89 q 137 238 170 182 q 86 360 104 295 q 68 496 68 425 m 142 496 q 176 326 142 406 q 270 188 210 247 q 408 94 329 128 q 578 60 488 60 q 747 94 668 60 q 886 188 827 128 q 980 326 945 247 q 1014 496 1014 406 q 980 665 1014 586 q 886 804 945 745 q 747 898 827 863 q 578 932 668 932 q 408 898 488 932 q 270 804 329 863 q 176 665 210 745 q 142 496 142 586 z "},"ª":{ha:460,x_min:46,x_max:392,o:"m 330 541 l 311 596 q 286 569 299 581 q 257 549 273 557 q 222 536 241 541 q 179 532 203 532 q 125 541 150 532 q 83 567 101 549 q 56 610 66 584 q 46 671 46 636 q 94 777 46 740 q 239 817 142 813 l 306 819 l 306 840 q 285 908 306 889 q 227 928 264 928 q 163 918 194 928 q 104 893 133 908 l 72 961 q 146 991 106 979 q 227 1003 186 1003 q 352 967 311 1003 q 392 848 392 931 l 392 541 l 330 541 m 256 753 q 198 745 221 751 q 161 728 175 739 q 141 704 147 718 q 135 669 135 689 q 152 620 135 635 q 197 604 169 604 q 240 611 220 604 q 274 633 260 618 q 297 670 289 648 q 306 722 306 692 l 306 755 l 256 753 z "},"«":{ha:676,x_min:56,x_max:621,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 m 332 375 l 542 656 l 621 603 l 460 367 l 621 131 l 542 78 l 332 357 l 332 375 z "},"¬":{ha:765,x_min:69,x_max:696,o:"m 696 541 l 696 178 l 595 178 l 595 439 l 69 439 l 69 541 l 696 541 z "},"­":{ha:447,x_min:56,x_max:392,o:"m 56 315 l 56 429 l 392 429 l 392 315 l 56 315 z "},"®":{ha:1092,x_min:61,x_max:1023,o:"m 61 494 q 124 749 61 631 q 300 933 188 866 q 543 1001 412 1001 q 785 933 673 1001 q 960 749 897 866 q 1023 494 1023 631 q 962 244 1023 361 q 789 57 901 127 q 543 -14 677 -14 q 297 56 409 -14 q 123 243 184 126 q 61 494 61 359 m 139 494 q 193 278 139 378 q 341 123 248 179 q 543 66 434 66 q 745 124 652 66 q 892 279 839 181 q 945 494 945 378 q 892 708 945 610 q 745 863 839 806 q 543 920 652 920 q 340 864 434 920 q 193 709 247 808 q 139 494 139 610 m 443 444 l 443 214 l 347 214 l 347 790 l 534 790 q 695 746 638 790 q 753 616 753 701 q 666 489 753 533 q 749 351 749 455 l 749 309 q 761 225 749 251 l 761 214 l 663 214 q 653 301 653 239 q 651 376 653 364 q 562 444 640 441 l 443 444 m 443 530 l 549 530 q 627 554 597 532 q 657 613 657 576 q 631 683 657 663 q 536 704 604 704 l 443 704 l 443 530 z "},"¯":{ha:694,x_min:-4,x_max:699,o:"m 699 1055 l -4 1055 l -4 1150 l 699 1150 l 699 1055 z "},"°":{ha:595,x_min:83,x_max:511,o:"m 83 791 q 100 874 83 836 q 146 943 117 913 q 214 989 175 972 q 297 1006 253 1006 q 380 989 341 1006 q 448 943 419 972 q 494 874 477 913 q 511 791 511 836 q 494 709 511 747 q 448 641 477 670 q 380 596 419 612 q 297 579 341 579 q 214 596 253 579 q 146 641 175 612 q 100 709 117 670 q 83 791 83 747 m 167 791 q 177 742 167 765 q 205 701 187 718 q 246 673 222 683 q 297 663 270 663 q 348 673 324 663 q 390 701 372 683 q 418 742 408 718 q 428 791 428 765 q 418 843 428 819 q 390 885 408 867 q 348 913 372 903 q 297 924 324 924 q 246 913 270 924 q 205 885 222 903 q 177 843 187 867 q 167 791 167 819 z "},"±":{ha:765,x_min:69,x_max:696,o:"m 332 439 l 69 439 l 69 541 l 332 541 l 332 804 l 433 804 l 433 541 l 696 541 l 696 439 l 433 439 l 433 178 l 332 178 l 332 439 m 69 0 l 69 102 l 696 102 l 696 0 l 69 0 z "},"²":{ha:460,x_min:33,x_max:421,o:"m 421 397 l 33 397 l 33 473 l 175 628 q 238 699 214 670 q 276 750 262 728 q 295 793 290 773 q 300 836 300 813 q 277 902 300 880 q 218 924 255 924 q 152 907 184 924 q 90 864 121 890 l 37 928 q 119 982 74 960 q 220 1004 164 1004 q 293 993 260 1004 q 349 961 326 982 q 385 908 372 939 q 397 839 397 878 q 388 776 397 805 q 359 718 378 747 q 314 658 341 689 q 253 590 288 627 l 153 484 l 421 484 l 421 397 z "},"³":{ha:460,x_min:21,x_max:418,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 z "},"´":{ha:802,x_min:267,x_max:533,o:"m 267 860 q 297 905 281 880 q 329 959 313 931 q 359 1014 345 986 q 385 1064 374 1041 l 533 1064 l 533 1050 q 501 1004 522 1031 q 453 947 479 977 q 400 889 427 917 q 349 842 372 861 l 267 842 l 267 860 z "},"µ":{ha:825,x_min:118,x_max:707,o:"m 241 265 q 277 133 241 177 q 389 89 313 89 q 481 106 444 89 q 542 158 519 124 q 574 243 564 193 q 583 358 583 293 l 583 745 l 707 745 l 707 0 l 607 0 l 589 100 l 582 100 q 500 15 549 43 q 382 -14 452 -14 q 297 2 333 -14 q 237 46 261 18 q 239 -7 238 20 q 241 -59 241 -31 q 241 -117 241 -88 l 241 -334 l 118 -334 l 118 745 l 241 745 l 241 265 z "},"¶":{ha:909,x_min:77,x_max:764,o:"m 764 -176 l 682 -176 l 682 947 l 542 947 l 542 -176 l 460 -176 l 460 379 q 361 367 418 367 q 244 384 296 367 q 154 441 191 401 q 97 547 117 481 q 77 707 77 612 q 99 873 77 806 q 161 981 121 940 q 258 1038 201 1021 q 382 1055 314 1055 l 764 1055 l 764 -176 z "},"·":{ha:372,x_min:100,x_max:272,o:"m 100 490 q 106 534 100 516 q 125 563 113 552 q 152 579 136 574 q 186 585 168 585 q 219 579 203 585 q 247 563 235 574 q 265 534 258 552 q 272 490 272 516 q 265 448 272 465 q 247 418 258 430 q 219 401 235 407 q 186 396 203 396 q 152 401 168 396 q 125 418 136 407 q 106 448 113 430 q 100 490 100 465 z "},"¸":{ha:285,x_min:24,x_max:277,o:"m 277 -195 q 229 -297 277 -260 q 79 -334 181 -334 q 49 -332 64 -334 q 24 -328 34 -330 l 24 -254 q 51 -257 34 -256 q 78 -258 67 -258 q 153 -244 126 -258 q 180 -196 180 -229 q 172 -168 180 -180 q 147 -147 163 -156 q 110 -132 132 -138 q 64 -119 89 -125 l 125 0 l 207 0 l 168 -78 q 211 -92 191 -83 q 245 -115 231 -101 q 268 -149 260 -129 q 277 -195 277 -168 z "},"¹":{ha:460,x_min:43,x_max:300,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 z "},"º":{ha:486,x_min:45,x_max:441,o:"m 441 768 q 428 668 441 712 q 388 594 414 624 q 325 548 361 564 q 241 532 288 532 q 163 548 199 532 q 100 594 127 564 q 59 668 74 624 q 45 768 45 712 q 59 868 45 825 q 98 942 73 912 q 161 987 124 972 q 244 1003 198 1003 q 322 987 286 1003 q 385 942 359 972 q 427 868 412 912 q 441 768 441 825 m 134 768 q 159 647 134 688 q 243 606 184 606 q 326 647 300 606 q 351 768 351 688 q 326 889 351 850 q 243 928 300 928 q 159 889 184 928 q 134 768 134 850 z "},"»":{ha:676,x_min:57,x_max:623,o:"m 623 357 l 412 78 l 334 131 l 494 367 l 334 603 l 412 656 l 623 375 l 623 357 m 346 357 l 136 78 l 57 131 l 218 367 l 57 603 l 136 656 l 346 375 l 346 357 z "},"¼":{ha:1023,x_min:43,x_max:962,o:"m 208 991 l 300 991 l 300 397 l 201 397 l 201 747 q 202 785 201 764 q 203 825 202 805 q 205 865 204 846 q 207 899 206 884 q 184 873 197 887 q 157 848 172 860 l 93 799 l 43 864 l 208 991 m 815 991 l 265 0 l 159 0 l 709 991 l 815 991 m 962 131 l 878 131 l 878 1 l 781 1 l 781 131 l 526 131 l 526 206 l 782 599 l 878 599 l 878 217 l 962 217 l 962 131 m 781 217 l 781 349 q 782 411 781 378 q 785 478 783 445 q 774 458 781 471 q 760 431 768 446 q 745 404 753 417 q 730 380 736 390 l 625 217 l 781 217 z "},"½":{ha:1023,x_min:30,x_max:977,o:"m 195 991 l 287 991 l 287 397 l 189 397 l 189 747 q 189 785 189 764 q 190 825 189 805 q 192 865 191 846 q 194 899 193 884 q 172 873 184 887 q 144 848 159 860 l 80 799 l 30 864 l 195 991 m 801 991 l 251 0 l 144 0 l 694 991 l 801 991 m 977 1 l 589 1 l 589 77 l 730 231 q 793 302 769 273 q 831 354 818 331 q 850 396 845 376 q 855 439 855 416 q 833 505 855 484 q 774 527 810 527 q 708 510 739 527 q 646 467 676 493 l 593 531 q 674 586 629 564 q 775 608 720 608 q 849 596 816 608 q 905 564 882 585 q 940 512 928 543 q 953 442 953 481 q 943 379 953 408 q 915 321 933 350 q 870 261 897 292 q 808 193 843 231 l 708 87 l 977 87 l 977 1 z "},"¾":{ha:1023,x_min:21,x_max:1008,o:"m 400 851 q 373 762 400 798 q 298 710 345 726 q 388 659 358 694 q 418 570 418 623 q 404 495 418 529 q 362 437 391 461 q 292 399 334 413 q 191 386 249 386 q 101 394 143 386 q 21 424 60 403 l 21 514 q 109 478 64 491 q 189 465 153 465 q 286 493 256 465 q 315 571 315 522 q 279 644 315 621 q 178 667 243 667 l 111 667 l 111 743 l 178 743 q 269 770 240 743 q 297 840 297 797 q 290 878 297 862 q 272 904 283 894 q 244 919 260 914 q 210 924 228 924 q 137 910 170 924 q 69 871 104 896 l 22 936 q 63 964 42 951 q 106 985 83 977 q 155 999 130 994 q 211 1004 181 1004 q 293 993 258 1004 q 353 961 329 981 q 388 912 376 941 q 400 851 400 884 m 879 991 l 329 0 l 222 0 l 772 991 l 879 991 m 1008 131 l 923 131 l 923 1 l 826 1 l 826 131 l 572 131 l 572 206 l 827 599 l 923 599 l 923 217 l 1008 217 l 1008 131 m 826 217 l 826 349 q 827 411 826 378 q 830 478 828 445 q 820 458 827 471 q 806 431 813 446 q 790 404 798 417 q 776 380 782 390 l 671 217 l 826 217 z "},"¿":{ha:591,x_min:46,x_max:567,o:"m 401 458 l 401 433 q 396 363 401 394 q 377 305 391 332 q 342 252 364 277 q 286 197 320 226 q 231 147 254 170 q 193 101 208 124 q 171 51 178 77 q 164 -12 164 24 q 174 -72 164 -45 q 204 -118 184 -98 q 252 -148 223 -137 q 318 -158 281 -158 q 426 -141 375 -158 q 524 -100 477 -123 l 567 -199 q 448 -247 511 -227 q 318 -267 384 -267 q 204 -249 255 -267 q 119 -199 154 -232 q 65 -120 84 -167 q 46 -14 46 -73 q 55 68 46 33 q 82 134 64 103 q 128 193 100 164 q 192 253 155 221 q 250 306 227 283 q 285 350 272 329 q 302 394 298 371 q 307 446 307 416 l 307 458 l 401 458 m 433 664 q 427 620 433 638 q 409 591 420 602 q 381 575 397 580 q 347 570 366 570 q 314 575 330 570 q 287 591 298 580 q 268 620 275 602 q 261 664 261 638 q 268 707 261 689 q 287 736 275 724 q 314 753 298 747 q 347 758 330 758 q 381 753 366 758 q 409 736 397 747 q 427 707 420 724 q 433 664 433 689 z "},"À":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 488 1071 l 406 1071 q 355 1118 382 1090 q 301 1176 327 1146 q 253 1233 275 1206 q 221 1279 232 1261 l 221 1293 l 370 1293 q 395 1243 380 1270 q 425 1188 410 1215 q 457 1135 441 1160 q 488 1089 473 1109 l 488 1071 z "},"Á":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 362 1089 q 393 1135 377 1109 q 425 1188 409 1160 q 455 1243 441 1215 q 480 1293 469 1270 l 629 1293 l 629 1279 q 596 1233 618 1261 q 549 1176 575 1206 q 495 1118 523 1146 q 444 1071 468 1090 l 362 1071 l 362 1089 z "},"Â":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 646 1071 l 564 1071 q 493 1127 530 1094 q 421 1197 456 1160 q 349 1127 385 1160 q 278 1071 313 1094 l 196 1071 l 196 1089 q 237 1135 214 1109 q 282 1188 260 1160 q 325 1243 305 1215 q 356 1293 345 1270 l 486 1293 q 517 1243 497 1270 q 560 1188 537 1215 q 606 1135 583 1160 q 646 1089 629 1109 l 646 1071 z "},"Ã":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 524 1072 q 470 1084 496 1072 q 417 1111 443 1096 q 368 1137 391 1125 q 322 1149 344 1149 q 275 1131 292 1149 q 250 1071 259 1113 l 179 1071 q 194 1145 182 1112 q 223 1201 205 1178 q 266 1237 241 1225 q 322 1250 291 1250 q 378 1238 351 1250 q 431 1212 406 1226 q 480 1186 457 1198 q 524 1174 504 1174 q 570 1192 554 1174 q 595 1251 585 1209 l 667 1251 q 652 1178 663 1211 q 623 1121 641 1145 q 580 1085 605 1098 q 524 1072 555 1072 z "},"Ä":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 231 1175 q 250 1228 231 1212 q 296 1244 269 1244 q 342 1228 322 1244 q 361 1175 361 1211 q 342 1122 361 1139 q 296 1105 322 1105 q 250 1122 269 1105 q 231 1175 231 1139 m 485 1175 q 504 1228 485 1212 q 550 1244 523 1244 q 575 1240 563 1244 q 595 1228 587 1236 q 610 1206 604 1219 q 615 1175 615 1194 q 595 1122 615 1139 q 550 1105 576 1105 q 504 1122 523 1105 q 485 1175 485 1139 z "},"Å":{ha:844,x_min:0,x_max:844,o:"m 715 0 l 607 307 l 237 307 l 127 0 l 0 0 l 364 996 l 479 996 l 844 0 l 715 0 m 567 419 l 467 707 q 457 736 463 719 q 445 774 451 754 q 433 817 439 795 q 421 860 427 839 q 410 817 416 839 q 398 773 404 794 q 386 735 392 753 q 376 707 380 718 l 278 419 l 567 419 m 575 1074 q 563 1011 575 1039 q 531 965 551 984 q 481 936 510 946 q 420 926 453 926 q 358 936 386 926 q 310 965 330 946 q 279 1011 290 984 q 269 1072 269 1038 q 279 1134 269 1107 q 310 1179 290 1160 q 358 1208 330 1198 q 420 1218 386 1218 q 481 1208 452 1218 q 530 1180 509 1198 q 563 1134 551 1161 q 575 1074 575 1107 m 496 1072 q 474 1128 496 1108 q 420 1149 453 1149 q 365 1128 386 1149 q 343 1072 343 1108 q 362 1016 343 1036 q 420 996 382 996 q 474 1016 453 996 q 496 1072 496 1036 z "},"Æ":{ha:1183,x_min:-1,x_max:1100,o:"m 1100 0 l 585 0 l 585 307 l 262 307 l 125 0 l -1 0 l 443 991 l 1100 991 l 1100 880 l 711 880 l 711 574 l 1074 574 l 1074 464 l 711 464 l 711 111 l 1100 111 l 1100 0 m 311 419 l 585 419 l 585 880 l 511 880 l 311 419 z "},"Ç":{ha:838,x_min:85,x_max:798,o:"m 538 895 q 406 867 465 895 q 306 788 347 840 q 241 663 264 736 q 218 496 218 589 q 238 326 218 400 q 298 201 258 252 q 398 123 338 150 q 538 97 458 97 q 652 109 598 97 q 760 136 707 121 l 760 26 q 707 8 733 16 q 651 -4 680 1 q 590 -11 623 -9 q 517 -14 557 -14 q 324 23 406 -14 q 190 127 243 60 q 111 288 136 194 q 85 497 85 382 q 114 703 85 610 q 201 864 144 797 q 343 968 258 931 q 538 1006 428 1006 q 677 991 611 1006 q 798 947 744 976 l 745 842 q 652 879 702 863 q 538 895 602 895 m 621 -195 q 573 -297 621 -260 q 424 -334 526 -334 q 394 -332 409 -334 q 368 -328 378 -330 l 368 -254 q 395 -257 378 -256 q 422 -258 412 -258 q 498 -244 471 -258 q 525 -196 525 -229 q 516 -168 525 -180 q 492 -147 507 -156 q 455 -132 476 -138 q 408 -119 433 -125 l 469 0 l 551 0 l 513 -78 q 555 -92 536 -83 q 590 -115 575 -101 q 613 -149 604 -129 q 621 -195 621 -168 z "},"È":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 484 1071 l 402 1071 q 351 1118 378 1090 q 297 1176 323 1146 q 249 1233 271 1206 q 217 1279 228 1261 l 217 1293 l 366 1293 q 391 1243 376 1270 q 421 1188 406 1215 q 453 1135 437 1160 q 484 1089 469 1109 l 484 1071 z "},"É":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 309 1089 q 340 1135 324 1109 q 372 1188 356 1160 q 402 1243 388 1215 q 427 1293 416 1270 l 576 1293 l 576 1279 q 544 1233 565 1261 q 496 1176 522 1206 q 443 1118 470 1146 q 391 1071 415 1090 l 309 1071 l 309 1089 z "},"Ê":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 615 1071 l 533 1071 q 462 1127 498 1094 q 390 1197 425 1160 q 317 1127 353 1160 q 247 1071 281 1094 l 165 1071 l 165 1089 q 205 1135 182 1109 q 251 1188 229 1160 q 294 1243 274 1215 q 325 1293 314 1270 l 455 1293 q 486 1243 466 1270 q 529 1188 506 1215 q 575 1135 551 1160 q 615 1089 598 1109 l 615 1071 z "},"Ë":{ha:733,x_min:135,x_max:650,o:"m 650 0 l 135 0 l 135 991 l 650 991 l 650 880 l 261 880 l 261 574 l 624 574 l 624 464 l 261 464 l 261 111 l 650 111 l 650 0 m 201 1175 q 220 1228 201 1212 q 266 1244 239 1244 q 312 1228 292 1244 q 332 1175 332 1211 q 312 1122 332 1139 q 266 1105 292 1105 q 220 1122 239 1105 q 201 1175 201 1139 m 455 1175 q 474 1228 455 1212 q 520 1244 493 1244 q 545 1240 533 1244 q 566 1228 557 1236 q 580 1206 574 1219 q 585 1175 585 1194 q 566 1122 585 1139 q 520 1105 546 1105 q 474 1122 493 1105 q 455 1175 455 1139 z "},"Ì":{ha:471,x_min:42,x_max:415,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 309 1071 l 227 1071 q 176 1118 203 1090 q 122 1176 148 1146 q 74 1233 96 1206 q 42 1279 53 1261 l 42 1293 l 191 1293 q 216 1243 201 1270 q 246 1188 231 1215 q 278 1135 262 1160 q 309 1089 294 1109 l 309 1071 z "},"Í":{ha:471,x_min:56,x_max:441,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 174 1089 q 205 1135 189 1109 q 237 1188 221 1160 q 267 1243 253 1215 q 292 1293 281 1270 l 441 1293 l 441 1279 q 409 1233 430 1261 q 361 1176 387 1206 q 308 1118 335 1146 q 256 1071 280 1090 l 174 1071 l 174 1089 z "},"Î":{ha:471,x_min:12,x_max:462,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 462 1071 l 380 1071 q 309 1127 345 1094 q 237 1197 272 1160 q 164 1127 200 1160 q 94 1071 128 1094 l 12 1071 l 12 1089 q 52 1135 29 1109 q 98 1188 75 1160 q 141 1243 121 1215 q 172 1293 161 1270 l 302 1293 q 333 1243 313 1270 q 375 1188 353 1215 q 421 1135 398 1160 q 462 1089 445 1109 l 462 1071 z "},"Ï":{ha:471,x_min:43,x_max:428,o:"m 415 0 l 56 0 l 56 69 l 172 97 l 172 895 l 56 922 l 56 991 l 415 991 l 415 922 l 298 895 l 298 97 l 415 69 l 415 0 m 43 1175 q 62 1228 43 1212 q 109 1244 81 1244 q 155 1228 135 1244 q 174 1175 174 1211 q 155 1122 174 1139 q 109 1105 135 1105 q 62 1122 81 1105 q 43 1175 43 1139 m 298 1175 q 317 1228 298 1212 q 363 1244 336 1244 q 388 1240 376 1244 q 408 1228 399 1236 q 422 1206 417 1219 q 428 1175 428 1194 q 408 1122 428 1139 q 363 1105 389 1105 q 317 1122 336 1105 q 298 1175 298 1139 z "},"Ð":{ha:950,x_min:32,x_max:865,o:"m 32 546 l 135 546 l 135 991 l 411 991 q 599 960 515 991 q 742 868 683 929 q 833 715 801 806 q 865 505 865 625 q 833 285 865 380 q 739 127 800 191 q 587 32 677 64 q 383 0 497 0 l 135 0 l 135 436 l 32 436 l 32 546 m 732 501 q 709 672 732 600 q 644 791 687 745 q 539 861 602 838 q 397 884 477 884 l 261 884 l 261 546 l 489 546 l 489 436 l 261 436 l 261 109 l 371 109 q 641 208 550 109 q 732 501 732 307 z "},"Ñ":{ha:1013,x_min:135,x_max:878,o:"m 878 0 l 732 0 l 244 821 l 239 821 q 245 717 243 768 q 250 625 248 673 q 252 538 252 576 l 252 0 l 135 0 l 135 991 l 279 991 l 765 175 l 770 175 q 765 277 768 227 q 763 321 764 298 q 761 367 762 344 q 760 410 760 389 q 760 449 760 431 l 760 991 l 878 991 l 878 0 m 614 1072 q 560 1084 587 1072 q 507 1111 533 1096 q 458 1137 481 1125 q 412 1149 434 1149 q 366 1131 382 1149 q 340 1071 349 1113 l 269 1071 q 284 1145 273 1112 q 313 1201 295 1178 q 356 1237 331 1225 q 412 1250 381 1250 q 468 1238 441 1250 q 522 1212 496 1226 q 571 1186 547 1198 q 614 1174 594 1174 q 660 1192 644 1174 q 686 1251 675 1209 l 757 1251 q 742 1178 753 1211 q 713 1121 731 1145 q 670 1085 695 1098 q 614 1072 645 1072 z "},"Ò":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 590 1071 l 509 1071 q 457 1118 485 1090 q 403 1176 429 1146 q 356 1233 377 1206 q 323 1279 334 1261 l 323 1293 l 472 1293 q 497 1243 483 1270 q 528 1188 512 1215 q 559 1135 543 1160 q 590 1089 576 1109 l 590 1071 z "},"Ó":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 441 1089 q 472 1135 456 1109 q 504 1188 488 1160 q 534 1243 520 1215 q 559 1293 549 1270 l 708 1293 l 708 1279 q 676 1233 697 1261 q 628 1176 654 1206 q 575 1118 602 1146 q 524 1071 547 1090 l 441 1071 l 441 1089 z "},"Ô":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 743 1071 l 661 1071 q 590 1127 627 1094 q 518 1197 553 1160 q 446 1127 481 1160 q 375 1071 410 1094 l 293 1071 l 293 1089 q 334 1135 311 1109 q 379 1188 357 1160 q 422 1243 402 1215 q 453 1293 442 1270 l 583 1293 q 614 1243 594 1270 q 657 1188 634 1215 q 703 1135 680 1160 q 743 1089 726 1109 l 743 1071 z "},"Õ":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 604 1072 q 550 1084 577 1072 q 498 1111 524 1096 q 448 1137 472 1125 q 403 1149 425 1149 q 356 1131 372 1149 q 330 1071 340 1113 l 260 1071 q 274 1145 263 1112 q 303 1201 286 1178 q 347 1237 321 1225 q 403 1250 372 1250 q 459 1238 431 1250 q 512 1212 486 1226 q 561 1186 538 1198 q 604 1174 585 1174 q 650 1192 635 1174 q 676 1251 666 1209 l 747 1251 q 733 1178 744 1211 q 704 1121 722 1145 q 661 1085 686 1098 q 604 1072 635 1072 z "},"Ö":{ha:1031,x_min:85,x_max:945,o:"m 945 497 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 324 23 405 -14 q 190 127 243 60 q 111 289 136 194 q 85 498 85 383 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 702 971 622 1007 q 836 868 781 935 q 917 707 890 801 q 945 497 945 613 m 218 497 q 236 330 218 404 q 290 204 254 256 q 382 124 326 152 q 515 97 438 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 q 794 665 811 591 q 741 790 777 739 q 650 868 705 841 q 517 896 594 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 323 1175 q 342 1228 323 1212 q 389 1244 361 1244 q 435 1228 415 1244 q 454 1175 454 1211 q 435 1122 454 1139 q 389 1105 415 1105 q 342 1122 361 1105 q 323 1175 323 1139 m 578 1175 q 597 1228 578 1212 q 643 1244 616 1244 q 668 1240 656 1244 q 688 1228 680 1236 q 703 1206 697 1219 q 708 1175 708 1194 q 688 1122 708 1139 q 643 1105 669 1105 q 597 1122 616 1105 q 578 1175 578 1139 z "},"×":{ha:765,x_min:96,x_max:671,o:"m 311 490 l 96 707 l 167 778 l 382 562 l 600 778 l 671 708 l 453 490 l 669 273 l 600 204 l 382 419 l 167 205 l 97 275 l 311 490 z "},"Ø":{ha:1031,x_min:85,x_max:945,o:"m 882 986 l 819 885 q 913 720 881 818 q 945 497 945 621 q 917 288 945 382 q 836 127 890 194 q 701 23 781 60 q 515 -14 621 -14 q 297 35 387 -14 l 244 -52 l 151 1 l 212 100 q 116 269 146 168 q 85 498 85 370 q 111 708 85 614 q 190 868 136 802 q 325 971 243 935 q 517 1007 406 1007 q 635 993 581 1007 q 734 953 690 979 l 789 1039 l 882 986 m 218 497 q 234 337 218 408 q 282 214 250 267 l 675 854 q 604 885 642 874 q 517 896 565 896 q 383 868 439 896 q 290 790 327 841 q 236 665 254 739 q 218 497 218 591 m 811 497 q 751 774 811 671 l 359 136 q 430 107 391 117 q 515 97 469 97 q 649 124 593 97 q 741 204 705 152 q 794 330 777 256 q 811 497 811 404 z "},"Ù":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 574 1071 l 493 1071 q 441 1118 469 1090 q 388 1176 414 1146 q 340 1233 361 1206 q 308 1279 319 1261 l 308 1293 l 456 1293 q 482 1243 467 1270 q 512 1188 496 1215 q 544 1135 528 1160 q 574 1089 560 1109 l 574 1071 z "},"Ú":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 400 1089 q 431 1135 415 1109 q 463 1188 447 1160 q 493 1243 479 1215 q 518 1293 507 1270 l 667 1293 l 667 1279 q 634 1233 656 1261 q 587 1176 613 1206 q 533 1118 561 1146 q 482 1071 506 1090 l 400 1071 l 400 1089 z "},"Û":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 707 1071 l 625 1071 q 554 1127 591 1094 q 482 1197 517 1160 q 410 1127 446 1160 q 339 1071 374 1094 l 257 1071 l 257 1089 q 298 1135 275 1109 q 343 1188 321 1160 q 386 1243 366 1215 q 417 1293 406 1270 l 547 1293 q 578 1243 558 1270 q 621 1188 598 1215 q 667 1135 644 1160 q 707 1089 690 1109 l 707 1071 z "},"Ü":{ha:970,x_min:125,x_max:844,o:"m 844 993 l 844 350 q 822 206 844 273 q 754 91 800 140 q 641 14 709 42 q 481 -14 573 -14 q 328 13 394 -14 q 216 87 261 39 q 148 202 171 135 q 125 353 125 270 l 125 991 l 252 991 l 252 346 q 310 162 252 227 q 488 97 369 97 q 591 115 548 97 q 663 167 635 134 q 704 246 690 200 q 718 347 718 292 l 718 993 l 844 993 m 293 1175 q 312 1228 293 1212 q 358 1244 331 1244 q 404 1228 385 1244 q 424 1175 424 1211 q 404 1122 424 1139 q 358 1105 385 1105 q 312 1122 331 1105 q 293 1175 293 1139 m 547 1175 q 566 1228 547 1212 q 612 1244 585 1244 q 637 1240 625 1244 q 658 1228 649 1236 q 672 1206 667 1219 q 677 1175 677 1194 q 658 1122 677 1139 q 612 1105 638 1105 q 566 1122 585 1105 q 547 1175 547 1139 z "},"Ý":{ha:732,x_min:0,x_max:732,o:"m 366 490 l 596 991 l 732 991 l 429 386 l 429 0 l 302 0 l 302 379 l 0 991 l 138 991 l 366 490 m 300 1089 q 331 1135 315 1109 q 362 1188 347 1160 q 393 1243 378 1215 q 418 1293 407 1270 l 566 1293 l 566 1279 q 534 1233 555 1261 q 487 1176 513 1206 q 433 1118 460 1146 q 382 1071 406 1090 l 300 1071 l 300 1089 z "},"Þ":{ha:800,x_min:135,x_max:729,o:"m 729 530 q 710 412 729 469 q 649 311 692 355 q 536 241 606 267 q 363 215 466 215 l 261 215 l 261 0 l 135 0 l 135 991 l 261 991 l 261 821 l 380 821 q 537 801 471 821 q 646 745 603 782 q 709 654 688 708 q 729 530 729 600 m 261 322 l 349 322 q 459 333 412 322 q 537 368 506 344 q 583 430 568 392 q 599 524 599 469 q 543 667 599 621 q 370 713 488 713 l 261 713 l 261 322 z "},"ß":{ha:836,x_min:118,x_max:774,o:"m 685 854 q 670 786 685 816 q 634 731 656 755 q 588 686 613 706 q 541 647 562 665 q 505 610 519 628 q 490 571 490 591 q 495 546 490 557 q 513 521 500 534 q 550 491 526 508 q 612 449 574 475 q 680 399 650 424 q 731 347 710 375 q 763 287 751 319 q 774 212 774 254 q 755 111 774 153 q 702 40 736 68 q 620 0 667 13 q 514 -14 572 -14 q 401 -2 448 -14 q 318 33 354 10 l 318 146 q 358 124 336 135 q 404 106 380 114 q 454 93 429 98 q 505 87 480 87 q 571 96 543 87 q 616 120 598 104 q 642 157 633 135 q 650 205 650 178 q 644 250 650 230 q 624 289 638 270 q 585 328 609 308 q 522 371 560 347 q 451 421 479 398 q 404 467 422 444 q 378 513 386 490 q 371 566 371 537 q 385 629 371 602 q 420 677 399 656 q 465 717 441 699 q 511 755 490 735 q 546 797 532 774 q 559 850 559 820 q 548 899 559 878 q 517 934 537 920 q 468 955 496 948 q 406 961 440 961 q 342 955 372 961 q 290 932 313 948 q 255 887 268 916 q 241 815 241 859 l 241 0 l 118 0 l 118 814 q 139 932 118 884 q 199 1009 161 980 q 290 1050 237 1038 q 406 1063 343 1063 q 519 1050 468 1063 q 608 1011 571 1037 q 665 946 644 985 q 685 854 685 907 z "},"à":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"á":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 302 860 q 333 905 317 880 q 365 959 349 931 q 395 1014 381 986 q 420 1064 410 1041 l 569 1064 l 569 1050 q 537 1004 558 1031 q 489 947 515 977 q 436 889 463 917 q 385 842 408 861 l 302 842 l 302 860 z "},"â":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 605 842 l 523 842 q 452 898 488 865 q 380 968 415 930 q 307 898 343 930 q 237 842 271 865 l 155 842 l 155 860 q 195 905 172 880 q 241 959 218 931 q 284 1014 264 986 q 315 1064 304 1041 l 445 1064 q 476 1014 456 1041 q 518 959 496 986 q 565 905 541 931 q 605 860 588 880 l 605 842 z "},"ã":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 474 843 q 420 855 447 843 q 368 881 393 867 q 318 908 342 896 q 273 920 294 920 q 226 902 242 920 q 200 842 210 884 l 130 842 q 144 916 133 882 q 173 972 155 949 q 216 1008 191 996 q 273 1021 241 1021 q 329 1009 301 1021 q 382 983 356 997 q 431 957 408 968 q 474 945 454 945 q 520 962 505 945 q 546 1022 536 980 l 617 1022 q 603 948 614 981 q 573 892 591 916 q 530 856 555 869 q 474 843 505 843 z "},"ä":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 185 946 q 204 999 185 983 q 250 1015 223 1015 q 296 999 277 1015 q 316 946 316 982 q 296 893 316 910 q 250 876 277 876 q 204 893 223 876 q 185 946 185 910 m 439 946 q 458 999 439 983 q 505 1015 477 1015 q 529 1011 517 1015 q 550 999 541 1007 q 564 977 559 990 q 570 946 570 964 q 550 893 570 910 q 505 876 530 876 q 458 893 477 876 q 439 946 439 910 z "},"å":{ha:737,x_min:64,x_max:627,o:"m 538 0 l 513 103 l 507 103 q 463 51 485 73 q 414 14 440 28 q 355 -7 387 0 q 279 -14 322 -14 q 193 0 233 -14 q 125 40 154 13 q 80 110 96 68 q 64 208 64 151 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 478 744 427 758 q 561 700 528 730 q 610 623 594 670 q 627 510 627 576 l 627 0 l 538 0 m 311 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 q 225 115 192 144 q 311 86 258 86 m 531 989 q 519 927 531 954 q 487 880 507 899 q 437 851 466 861 q 376 842 409 842 q 314 851 342 842 q 266 880 286 861 q 235 926 246 899 q 224 987 224 953 q 235 1049 224 1022 q 266 1095 246 1076 q 314 1123 286 1114 q 376 1133 342 1133 q 437 1123 408 1133 q 486 1095 465 1114 q 519 1049 507 1076 q 531 989 531 1023 m 452 987 q 430 1044 452 1023 q 376 1064 409 1064 q 320 1044 342 1064 q 299 987 299 1023 q 318 931 299 951 q 376 911 338 911 q 430 931 409 911 q 452 987 452 951 z "},"æ":{ha:1157,x_min:64,x_max:1088,o:"m 64 208 q 142 379 64 319 q 380 444 220 439 l 505 449 l 505 496 q 495 572 505 541 q 467 621 486 602 q 421 648 448 640 q 358 656 393 656 q 253 640 302 656 q 160 600 205 623 l 117 693 q 229 739 167 720 q 358 758 290 758 q 503 729 447 758 q 589 637 559 701 q 680 727 623 695 q 806 758 736 758 q 924 734 871 758 q 1013 666 976 710 q 1068 561 1049 623 q 1088 425 1088 500 l 1088 349 l 632 349 q 685 156 635 218 q 835 94 735 94 q 897 98 868 94 q 952 107 926 101 q 1004 124 979 114 q 1054 146 1029 134 l 1054 36 q 1002 14 1027 23 q 950 -2 977 4 q 894 -11 923 -8 q 832 -14 865 -14 q 670 25 739 -14 q 559 142 602 64 q 511 76 536 105 q 453 27 485 47 q 381 -3 420 7 q 292 -14 342 -14 q 202 0 243 -14 q 130 40 160 13 q 81 110 99 68 q 64 208 64 151 m 192 207 q 225 115 192 144 q 311 86 258 86 q 388 99 353 86 q 449 138 423 112 q 489 204 475 164 q 504 297 504 243 l 504 364 l 407 359 q 304 346 346 357 q 238 316 263 335 q 203 269 214 296 q 192 207 192 241 m 803 656 q 685 603 728 656 q 635 449 642 550 l 954 449 q 945 533 954 495 q 918 599 937 572 q 871 641 899 626 q 803 656 842 656 z "},"ç":{ha:643,x_min:77,x_max:596,o:"m 403 -14 q 275 8 334 -14 q 171 76 215 29 q 102 194 127 122 q 77 368 77 267 q 102 549 77 475 q 173 670 128 623 q 279 737 218 716 q 408 758 339 758 q 512 747 461 758 q 596 718 562 735 l 559 614 q 525 627 544 621 q 486 638 506 633 q 446 647 465 644 q 408 650 426 650 q 253 582 302 650 q 204 370 204 513 q 253 160 204 227 q 403 94 302 94 q 502 107 458 94 q 583 136 547 119 l 583 26 q 505 -3 547 7 q 403 -14 463 -14 m 495 -195 q 447 -297 495 -260 q 298 -334 399 -334 q 268 -332 283 -334 q 242 -328 252 -330 l 242 -254 q 269 -257 252 -256 q 296 -258 286 -258 q 372 -244 345 -258 q 399 -196 399 -229 q 390 -168 399 -180 q 366 -147 381 -156 q 329 -132 350 -138 q 282 -119 307 -125 l 343 0 l 425 0 l 387 -78 q 429 -92 410 -83 q 464 -115 449 -101 q 487 -149 478 -129 q 495 -195 495 -168 z "},"è":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 460 842 l 378 842 q 327 889 355 861 q 273 947 299 917 q 225 1004 247 977 q 193 1050 204 1031 l 193 1064 l 342 1064 q 367 1014 353 1041 q 397 959 382 986 q 429 905 413 931 q 460 860 446 880 l 460 842 z "},"é":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 322 860 q 353 905 337 880 q 385 959 369 931 q 415 1014 401 986 q 440 1064 429 1041 l 589 1064 l 589 1050 q 556 1004 578 1031 q 509 947 535 977 q 455 889 483 917 q 404 842 428 861 l 322 842 l 322 860 z "},"ê":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 602 842 l 520 842 q 449 898 486 865 q 377 968 412 930 q 304 898 340 930 q 234 842 269 865 l 152 842 l 152 860 q 193 905 170 880 q 238 959 216 931 q 281 1014 261 986 q 312 1064 301 1041 l 442 1064 q 473 1014 453 1041 q 516 959 493 986 q 562 905 538 931 q 602 860 585 880 l 602 842 z "},"ë":{ha:743,x_min:77,x_max:673,o:"m 412 -14 q 276 12 338 -14 q 170 85 214 37 q 101 204 125 133 q 77 367 77 275 q 99 532 77 459 q 162 655 121 604 q 259 732 203 705 q 385 758 316 758 q 505 734 452 758 q 596 666 559 710 q 653 561 633 623 q 673 425 673 500 l 673 349 l 204 349 q 259 156 208 218 q 414 94 311 94 q 478 98 448 94 q 535 107 507 101 q 588 124 562 114 q 640 146 614 134 l 640 36 q 587 14 613 23 q 533 -2 561 4 q 476 -11 506 -8 q 412 -14 447 -14 m 382 656 q 259 603 304 656 q 207 449 214 550 l 541 449 q 531 533 541 495 q 503 599 522 572 q 454 641 484 626 q 382 656 424 656 m 182 946 q 201 999 182 983 q 248 1015 220 1015 q 294 999 274 1015 q 313 946 313 982 q 294 893 313 910 q 248 876 274 876 q 201 893 220 876 q 182 946 182 910 m 437 946 q 456 999 437 983 q 502 1015 475 1015 q 527 1011 515 1015 q 547 999 538 1007 q 562 977 556 990 q 567 946 567 964 q 547 893 567 910 q 502 876 528 876 q 456 893 475 876 q 437 946 437 910 z "},"ì":{ha:359,x_min:-23,x_max:243,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 243 842 l 162 842 q 111 889 138 861 q 57 947 83 917 q 9 1004 31 977 q -23 1050 -12 1031 l -23 1064 l 125 1064 q 151 1014 136 1041 q 181 959 165 986 q 213 905 197 931 q 243 860 229 880 l 243 842 z "},"í":{ha:359,x_min:118,x_max:392,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 125 860 q 156 905 140 880 q 188 959 172 931 q 218 1014 204 986 q 243 1064 233 1041 l 392 1064 l 392 1050 q 360 1004 381 1031 q 312 947 338 977 q 259 889 286 917 q 208 842 231 861 l 125 842 l 125 860 z "},"î":{ha:359,x_min:-45,x_max:405,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m 405 842 l 323 842 q 252 898 288 865 q 180 968 215 930 q 107 898 143 930 q 37 842 71 865 l -45 842 l -45 860 q -5 905 -28 880 q 41 959 18 931 q 84 1014 64 986 q 115 1064 104 1041 l 245 1064 q 276 1014 256 1041 q 318 959 296 986 q 365 905 341 931 q 405 860 388 880 l 405 842 z "},"ï":{ha:359,x_min:-12,x_max:372,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 m -12 946 q 7 999 -12 983 q 53 1015 26 1015 q 99 999 79 1015 q 119 946 119 982 q 99 893 119 910 q 53 876 79 876 q 7 893 26 876 q -12 946 -12 910 m 242 946 q 261 999 242 983 q 307 1015 280 1015 q 332 1011 320 1015 q 353 999 344 1007 q 367 977 361 990 q 372 946 372 964 q 353 893 372 910 q 307 876 333 876 q 261 893 280 876 q 242 946 242 910 z "},"ð":{ha:802,x_min:75,x_max:725,o:"m 725 389 q 702 218 725 292 q 637 92 680 143 q 534 13 595 40 q 399 -14 474 -14 q 269 9 328 -14 q 166 74 210 31 q 99 180 123 117 q 75 323 75 243 q 97 467 75 404 q 158 572 118 529 q 255 636 198 614 q 383 659 312 659 q 505 638 452 659 q 586 578 557 618 l 591 581 q 530 726 570 661 q 428 846 489 791 l 254 742 l 204 819 l 351 908 q 295 946 324 927 q 235 982 267 964 l 282 1065 q 368 1019 326 1044 q 449 965 409 995 l 603 1059 l 653 982 l 521 903 q 604 806 566 859 q 668 689 642 753 q 710 551 695 626 q 725 389 725 476 m 597 357 q 586 431 597 395 q 551 495 574 467 q 490 540 527 523 q 401 557 452 557 q 312 541 349 557 q 252 496 275 526 q 217 421 228 466 q 205 319 205 377 q 217 225 205 268 q 252 153 228 183 q 313 105 276 122 q 401 89 350 89 q 552 156 506 89 q 597 357 597 224 z "},"ñ":{ha:818,x_min:118,x_max:707,o:"m 583 0 l 583 479 q 548 612 583 568 q 436 656 512 656 q 344 638 381 656 q 284 586 307 621 q 251 501 261 551 q 241 386 241 451 l 241 0 l 118 0 l 118 745 l 218 745 l 236 644 l 243 644 q 283 695 260 673 q 334 730 307 716 q 393 751 362 745 q 457 758 425 758 q 644 693 581 758 q 707 486 707 629 l 707 0 l 583 0 m 515 843 q 461 855 488 843 q 408 881 434 867 q 359 908 382 896 q 313 920 335 920 q 267 902 283 920 q 241 842 250 884 l 170 842 q 185 916 174 882 q 214 972 196 949 q 257 1008 232 996 q 313 1021 282 1021 q 369 1009 342 1021 q 422 983 397 997 q 472 957 448 968 q 515 945 495 945 q 561 962 545 945 q 587 1022 576 980 l 658 1022 q 643 948 654 981 q 614 892 632 916 q 571 856 596 869 q 515 843 546 843 z "},"ò":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 506 842 l 425 842 q 373 889 401 861 q 319 947 345 917 q 272 1004 293 977 q 239 1050 250 1031 l 239 1064 l 388 1064 q 413 1014 399 1041 q 444 959 428 986 q 475 905 459 931 q 506 860 492 880 l 506 842 z "},"ó":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 321 860 q 352 905 336 880 q 384 959 368 931 q 414 1014 399 986 q 439 1064 428 1041 l 587 1064 l 587 1050 q 555 1004 576 1031 q 508 947 534 977 q 454 889 481 917 q 403 842 427 861 l 321 842 l 321 860 z "},"ô":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 622 842 l 540 842 q 469 898 505 865 q 397 968 432 930 q 324 898 360 930 q 254 842 288 865 l 172 842 l 172 860 q 212 905 189 880 q 258 959 235 931 q 301 1014 281 986 q 332 1064 321 1041 l 462 1064 q 493 1014 473 1041 q 535 959 513 986 q 582 905 558 931 q 622 860 605 880 l 622 842 z "},"õ":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 499 843 q 445 855 472 843 q 393 881 418 867 q 343 908 367 896 q 298 920 319 920 q 251 902 267 920 q 225 842 235 884 l 155 842 q 169 916 158 882 q 198 972 180 949 q 241 1008 216 996 q 298 1021 267 1021 q 354 1009 326 1021 q 407 983 381 997 q 456 957 433 968 q 499 945 479 945 q 545 962 530 945 q 571 1022 561 980 l 642 1022 q 628 948 639 981 q 598 892 616 916 q 555 856 581 869 q 499 843 530 843 z "},"ö":{ha:802,x_min:77,x_max:725,o:"m 725 374 q 702 209 725 281 q 637 87 680 136 q 534 12 595 38 q 399 -14 474 -14 q 270 12 329 -14 q 168 87 211 38 q 101 209 125 136 q 77 374 77 281 q 99 537 77 466 q 164 658 122 609 q 267 733 206 707 q 403 758 328 758 q 532 733 473 758 q 634 658 591 707 q 701 537 677 609 q 725 374 725 466 m 204 374 q 251 160 204 232 q 401 89 297 89 q 552 160 506 89 q 597 374 597 232 q 551 586 597 515 q 400 656 505 656 q 250 586 296 656 q 204 374 204 515 m 203 946 q 222 999 203 983 q 269 1015 241 1015 q 315 999 295 1015 q 334 946 334 982 q 315 893 334 910 q 269 876 295 876 q 222 893 241 876 q 203 946 203 910 m 458 946 q 477 999 458 983 q 523 1015 496 1015 q 548 1011 536 1015 q 568 999 559 1007 q 583 977 577 990 q 588 946 588 964 q 568 893 588 910 q 523 876 549 876 q 477 893 496 876 q 458 946 458 910 z "},"÷":{ha:765,x_min:69,x_max:696,o:"m 69 439 l 69 541 l 696 541 l 696 439 l 69 439 m 304 253 q 311 293 304 277 q 327 319 317 309 q 352 333 338 329 q 382 338 366 338 q 412 333 397 338 q 437 319 426 329 q 454 293 448 309 q 460 253 460 277 q 454 215 460 231 q 437 188 448 199 q 412 173 426 178 q 382 168 397 168 q 352 173 366 168 q 327 188 338 178 q 311 215 317 199 q 304 253 304 231 m 304 726 q 311 766 304 750 q 327 792 317 782 q 352 807 338 802 q 382 811 366 811 q 412 807 397 811 q 437 792 426 802 q 454 766 448 782 q 460 726 460 750 q 454 688 460 704 q 437 662 448 672 q 412 646 426 651 q 382 642 397 642 q 352 646 366 642 q 327 662 338 651 q 311 688 317 672 q 304 726 304 704 z "},"ø":{ha:802,x_min:78,x_max:726,o:"m 726 374 q 704 209 726 281 q 638 87 681 136 q 536 12 596 38 q 400 -14 475 -14 q 249 22 315 -14 l 203 -52 l 114 -1 l 168 87 q 102 209 125 136 q 78 374 78 281 q 101 537 78 466 q 165 658 123 609 q 268 733 208 707 q 404 758 329 758 q 485 748 447 758 q 557 720 524 739 l 603 793 l 692 743 l 637 656 q 703 535 680 606 q 726 374 726 465 m 205 374 q 212 272 205 317 q 233 193 218 228 l 503 632 q 457 650 483 644 q 401 656 432 656 q 251 586 297 656 q 205 374 205 515 m 599 374 q 572 549 599 481 l 302 111 q 348 94 323 100 q 403 89 372 89 q 553 160 507 89 q 599 374 599 232 z "},"ù":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 470 842 l 389 842 q 337 889 365 861 q 283 947 309 917 q 236 1004 257 977 q 203 1050 214 1031 l 203 1064 l 352 1064 q 377 1014 363 1041 q 408 959 392 986 q 439 905 423 931 q 470 860 456 880 l 470 842 z "},"ú":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 332 860 q 362 905 347 880 q 394 959 378 931 q 425 1014 410 986 q 450 1064 439 1041 l 598 1064 l 598 1050 q 566 1004 587 1031 q 518 947 545 977 q 465 889 492 917 q 414 842 437 861 l 332 842 l 332 860 z "},"û":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 631 842 l 549 842 q 477 898 514 865 q 406 968 441 930 q 333 898 369 930 q 262 842 297 865 l 180 842 l 180 860 q 221 905 198 880 q 267 959 244 931 q 310 1014 290 986 q 340 1064 330 1041 l 471 1064 q 502 1014 481 1041 q 544 959 522 986 q 590 905 567 931 q 631 860 614 880 l 631 842 z "},"ü":{ha:818,x_min:111,x_max:700,o:"m 600 0 l 582 100 l 575 100 q 535 49 558 71 q 484 14 511 28 q 425 -7 456 0 q 361 -14 393 -14 q 252 2 299 -14 q 174 51 205 18 q 127 136 143 84 q 111 258 111 187 l 111 745 l 235 745 l 235 265 q 271 133 235 177 q 382 89 307 89 q 474 106 437 89 q 534 158 511 124 q 567 243 557 193 q 576 358 576 293 l 576 745 l 700 745 l 700 0 l 600 0 m 210 946 q 229 999 210 983 q 275 1015 248 1015 q 321 999 301 1015 q 340 946 340 982 q 321 893 340 910 q 275 876 301 876 q 229 893 248 876 q 210 946 210 910 m 464 946 q 483 999 464 983 q 529 1015 502 1015 q 554 1011 542 1015 q 574 999 566 1007 q 589 977 583 990 q 594 946 594 964 q 574 893 594 910 q 529 876 555 876 q 483 893 502 876 q 464 946 464 910 z "},"ý":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 276 860 q 307 905 291 880 q 339 959 323 931 q 369 1014 355 986 q 394 1064 383 1041 l 543 1064 l 543 1050 q 510 1004 532 1031 q 463 947 489 977 q 409 889 437 917 q 358 842 382 861 l 276 842 l 276 860 z "},"þ":{ha:814,x_min:118,x_max:737,o:"m 241 644 q 277 689 257 668 q 322 725 296 709 q 381 749 349 740 q 454 758 414 758 q 570 734 518 758 q 660 661 623 709 q 717 541 696 612 q 737 374 737 469 q 717 206 737 278 q 660 85 696 134 q 570 11 623 36 q 454 -14 518 -14 q 382 -5 414 -14 q 323 19 349 4 q 277 53 297 33 q 241 94 257 73 l 233 94 q 237 50 235 71 q 240 14 239 33 q 241 -16 241 -5 l 241 -334 l 118 -334 l 118 1055 l 241 1055 l 241 745 l 236 644 l 241 644 m 431 656 q 343 640 379 656 q 286 593 308 625 q 253 513 264 561 q 241 401 243 466 l 241 374 q 251 252 241 305 q 282 162 260 199 q 340 107 304 126 q 432 89 377 89 q 567 163 524 89 q 610 375 610 237 q 567 586 610 516 q 431 656 524 656 z "},"ÿ":{ha:679,x_min:7,x_max:672,o:"m 7 745 l 135 745 l 281 329 q 300 272 290 302 q 318 212 310 242 q 333 155 327 182 q 342 103 339 127 l 346 103 q 357 149 349 120 q 373 211 364 178 q 392 276 382 244 q 410 330 402 308 l 545 745 l 672 745 l 378 -97 q 337 -196 359 -152 q 286 -270 315 -239 q 217 -317 256 -300 q 123 -334 178 -334 q 62 -330 88 -334 q 18 -322 37 -326 l 18 -224 q 54 -230 33 -227 q 100 -232 76 -232 q 156 -224 132 -232 q 197 -201 180 -216 q 228 -165 215 -186 q 250 -115 240 -143 l 289 -7 l 7 745 m 155 946 q 174 999 155 983 q 220 1015 193 1015 q 266 999 246 1015 q 286 946 286 982 q 266 893 286 910 q 220 876 246 876 q 174 893 193 876 q 155 946 155 910 m 409 946 q 428 999 409 983 q 474 1015 447 1015 q 499 1011 487 1015 q 519 999 511 1007 q 534 977 528 990 q 539 946 539 964 q 519 893 539 910 q 474 876 500 876 q 428 893 447 876 q 409 946 409 910 z "},"ı":{ha:359,x_min:118,x_max:241,o:"m 241 0 l 118 0 l 118 745 l 241 745 l 241 0 z "},"ˆ":{ha:802,x_min:175,x_max:625,o:"m 625 842 l 543 842 q 472 898 509 865 q 400 968 435 930 q 328 898 363 930 q 257 842 292 865 l 175 842 l 175 860 q 216 905 193 880 q 261 959 239 931 q 304 1014 284 986 q 335 1064 324 1041 l 465 1064 q 496 1014 476 1041 q 539 959 516 986 q 585 905 562 931 q 625 860 608 880 l 625 842 z "},"˚":{ha:802,x_min:248,x_max:554,o:"m 554 989 q 542 927 554 954 q 510 880 530 899 q 460 851 489 861 q 399 842 432 842 q 337 851 365 842 q 289 880 309 861 q 258 926 269 899 q 248 987 248 953 q 258 1049 248 1022 q 289 1095 269 1076 q 337 1123 309 1114 q 399 1133 365 1133 q 460 1123 431 1133 q 509 1095 488 1114 q 542 1049 530 1076 q 554 989 554 1023 m 475 987 q 453 1044 475 1023 q 399 1064 432 1064 q 343 1044 365 1064 q 322 987 322 1023 q 341 931 322 951 q 399 911 361 911 q 453 931 432 911 q 475 987 475 951 z "},"˜":{ha:802,x_min:175,x_max:663,o:"m 519 843 q 466 855 492 843 q 413 881 439 867 q 363 908 387 896 q 318 920 340 920 q 271 902 288 920 q 245 842 255 884 l 175 842 q 190 916 178 882 q 219 972 201 949 q 262 1008 237 996 q 318 1021 287 1021 q 374 1009 347 1021 q 427 983 401 997 q 476 957 453 968 q 519 945 500 945 q 566 962 550 945 q 591 1022 581 980 l 663 1022 q 648 948 659 981 q 619 892 637 916 q 576 856 601 869 q 519 843 551 843 z "},"–":{ha:694,x_min:56,x_max:639,o:"m 56 315 l 56 429 l 639 429 l 639 315 l 56 315 z "},"—":{ha:1389,x_min:56,x_max:1333,o:"m 56 315 l 56 429 l 1333 429 l 1333 315 l 56 315 z "},"‘":{ha:243,x_min:16,x_max:228,o:"m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"’":{ha:243,x_min:16,x_max:228,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 z "},"‚":{ha:347,x_min:43,x_max:256,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 z "},"“":{ha:504,x_min:16,x_max:489,o:"m 286 652 l 277 667 q 299 745 286 703 q 328 828 313 786 q 361 912 344 870 q 396 991 379 954 l 489 991 q 469 905 479 950 q 450 816 459 861 q 434 730 441 772 q 421 652 427 688 l 286 652 m 25 652 l 16 667 q 38 745 25 703 q 67 828 52 786 q 100 912 83 870 q 135 991 118 954 l 228 991 q 208 905 218 950 q 189 816 198 861 q 173 730 180 772 q 160 652 165 688 l 25 652 z "},"”":{ha:504,x_min:16,x_max:489,o:"m 218 991 l 228 977 q 205 898 218 939 q 176 815 192 857 q 143 731 160 772 q 109 652 125 690 l 16 652 q 35 737 25 692 q 54 827 45 782 q 71 913 63 871 q 83 991 78 956 l 218 991 m 479 991 l 489 977 q 466 898 479 939 q 437 815 453 857 q 404 731 421 772 q 370 652 387 690 l 277 652 q 296 737 286 692 q 315 827 306 782 q 332 913 324 871 q 345 991 339 956 l 479 991 z "},"„":{ha:608,x_min:43,x_max:517,o:"m 245 161 l 256 146 q 233 68 246 109 q 204 -16 220 26 q 171 -99 188 -58 q 136 -179 153 -141 l 43 -179 q 63 -93 53 -138 q 82 -4 73 -48 q 98 83 91 41 q 111 161 106 125 l 245 161 m 507 161 l 517 146 q 494 68 507 109 q 465 -16 481 26 q 432 -99 449 -58 q 397 -179 414 -141 l 304 -179 q 324 -93 314 -138 q 343 -4 334 -48 q 359 83 352 41 q 372 161 367 125 l 507 161 z "},"•":{ha:522,x_min:102,x_max:421,o:"m 102 507 q 114 589 102 555 q 148 645 126 623 q 198 675 169 666 q 261 685 227 685 q 323 675 294 685 q 374 645 353 666 q 409 589 396 623 q 421 507 421 555 q 409 426 421 460 q 374 371 396 392 q 323 339 353 349 q 261 329 294 329 q 198 339 227 329 q 148 371 169 349 q 114 426 126 392 q 102 507 102 460 z "},"‹":{ha:400,x_min:56,x_max:345,o:"m 56 375 l 265 656 l 345 603 l 183 367 l 345 131 l 265 78 l 56 357 l 56 375 z "},"›":{ha:400,x_min:56,x_max:345,o:"m 345 357 l 135 78 l 56 131 l 216 367 l 56 603 l 135 656 l 345 375 l 345 357 z "},"⁄":{ha:180,x_min:-239,x_max:418,o:"m 418 991 l -132 0 l -239 0 l 311 991 l 418 991 z "}},familyName:"Droid Sans",ascender:1293,descender:-334,underlinePosition:-154,underlineThickness:102,boundingBox:{yMin:-492,xMin:-352,yMax:1907,xMax:1966},resolution:1e3,original_font_information:{format:0,copyright:"Digitized data copyright © 2007, Google Corporation.",fontFamily:"Droid Sans",fontSubfamily:"Regular",uniqueID:"Ascender - Droid Sans",fullName:"Droid Sans",version:"Version 1.00 build 113",postScriptName:"DroidSans",trademark:"Droid is a trademark of Google and may be registered in certain jurisdictions.",manufacturer:"Ascender Corporation",description:"Droid Sans is a humanist sans serif typeface designed for user interfaces and electronic communication.",manufacturerURL:"http://www.ascendercorp.com/",designerURL:"http://www.ascendercorp.com/typedesigners.html",licence:"Licensed under the Apache License, Version 2.0",licenceURL:"http://®www.apache.org/licenses/LICENSE-2.0",compatibleFullName:"Droid Sans"},cssFontWeight:"normal",cssFontStyle:"normal"},KN=class{constructor(){this.fonts={},this.getFont=this.getFont.bind(this)}getFont(t){if(this.fonts[t])return this.fonts[t];if(!t)return Promise.resolve(MX);switch(t){case"arrival":return this.fonts[t]=import("./Arrival-4TTHZQOF.js").then((t=>Qc(t))),this.fonts[t];case"chalet-parisnineteensixty":return this.fonts[t]=import("./Chalet-LUA2Z236.js").then((t=>Qc(t))),this.fonts[t];case"helvetica neue":return this.fonts[t]=import("./HelveticaNeue-U3XEZDB5.js").then((t=>Qc(t))),this.fonts[t];case"helvetiker":return this.fonts[t]=import("./Helvetiker-WFBA7C7H.js").then((t=>Qc(t))),this.fonts[t];case"lato":return this.fonts[t]=import("./Lato-ZI244CQU.js").then((t=>Qc(t))),this.fonts[t];case"myriad pro":return this.fonts[t]=import("./MyriadPro-XF3IH7EM.js").then((t=>Qc(t))),this.fonts[t];case"proxima nova medium":return this.fonts[t]=import("./ProximaNova-YIIK4S37.js").then((t=>Qc(t))),this.fonts[t];case"simon circular book":return this.fonts[t]=import("./SimonCircular-NQ53YBIJ.js").then((t=>Qc(t))),this.fonts[t];default:return Promise.resolve(MX)}}};u(KN,"FontLib");var QN=KN,EX=new QN,Qc=u((function(t){let e={},i={};Object.keys(Hg.glyphs).forEach((function(t){i[t]=Hg.glyphs[t]})),Object.keys(t.glyphs).forEach((function(e){i[e]=t.glyphs[e]})),Object.keys(Hg).forEach((function(t){e[t]=Hg[t]})),e.glyphs=i;let n=new c3(e);n._mSupportedCharacters=Object.keys(e.glyphs).join("");let r=n._mSupportedCharacters.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");return n._mInvalidCharacters=new RegExp("[^"+r+"]","g"),n}),"createFont"),MX=Qc(Hg);E();var d2="x",m2="y",Kp="z";function JN(t,e,i){t.computeBoundingBox();let n=t.boundingBox,r=Math.max(i.width,i.height)/1e3,o=Math.max(i.width*r,i.height*r),s={min:new K(0,0,0),max:new K(1,1,1).multiplyScalar(o)},a={};e.forEach((t=>{a[t.name]=t}));let l,h,c=t.getAttribute("position"),p=t.getAttribute("normal"),d=t.getAttribute("uv");Le.assert(c.count==p.count),Le.assert(c.count==d.count),t.index?(Le.assert(t.index.count%3==0),l=t.index.count/3,h=u((function(e,i){return t.index.getX(3*e+i)}),"meshIndex")):(Le.assert(c.count%3==0),l=c.count/3,h=u((function(t,e){return 3*t+e}),"meshIndex"));let f=a.side||{},g=a.front||{},m=null!=f.repeat?f.repeat.u:1,v=null!=f.repeat?f.repeat.v:1,y=null!=f.offset?f.offset.u:1,x=null!=f.offset?f.offset.v:1,_=null!=f.rotation?f.rotation:0,b=f.useLocalScaling||!1,M=null!=g.repeat?g.repeat.u:1,E=null!=g.repeat?g.repeat.v:1,w=null!=g.offset?g.offset.u:1,A=null!=g.offset?g.offset.v:1,S=null!=g.rotation?g.rotation:0,T=g.useLocalScaling||!1;for(let t=0;t<l;++t){let e=p.getX(h(t,0))+p.getX(h(t,1))+p.getX(h(t,2)),i=p.getY(h(t,0))+p.getY(h(t,1))+p.getY(h(t,2)),r=p.getZ(h(t,0))+p.getZ(h(t,1))+p.getZ(h(t,2)),o=Math.abs(e),a=Math.abs(i),l=Math.abs(r);var C,P,I,L,O,N,D,R;o<=a&&o<=l?(C=d2,P=a<=l?m2:Kp):a<=o&&a<=l?(C=m2,P=o<=l?d2:Kp):(C=Kp,P=o<=a?d2:m2),C===Kp&&(C=P,P=Kp),P===Kp||C===Kp?(I=m,L=v,O=y,N=x,D=_,R=b?n:s):(I=M,L=E,O=w,N=A,D=S,R=T?n:s);let u=R.min,f=R.max,g=Math.abs(f[C]-u[C]),k=Math.abs(f[P]-u[P]),F=D*Math.PI/180||0,U=Math.cos(F),z=Math.sin(F);for(let e=0;e<3;e++){let i=c.getX(h(t,e)),n=c.getY(h(t,e)),r=c.getZ(h(t,e));var q,B;q=C===d2?I*(i-u[C])/g+O:C===m2?I*(n-u[C])/g+O:I*(r-u[C])/g+O,B=P===d2?L*(i-u[P])/k+N:P===m2?L*(n-u[P])/k+N:L*(r-u[P])/k+N;let o=(q-=.5)*U-(B-=.5)*z+.5,s=q*z+B*U+.5;d.setX(h(t,e),o),d.setY(h(t,e),s)}}t.uvsNeedUpdate=!0}u(JN,"updateUVs");var pn=class t extends al{constructor(e,i,n,r,o="SINGLE_GEOMETRY"){var s,a;super(),A(this,"polygon"),A(this,"mapClass"),A(this,"container"),A(this,"visible"),A(this,"mode"),A(this,"assetManager"),A(this,"imageVisible"),A(this,"labelVisible"),A(this,"boundingBox"),A(this,"polygonHeight"),A(this,"geometry"),A(this,"mesh"),A(this,"material"),A(this,"labelMesh"),A(this,"imageMesh"),A(this,"sortScore",null),this.mode=o,this.polygon=e,this.mapClass=i,this.container=n,this.assetManager=r;let l=!1!==e.geometry.visible,u=!0===(null==(s=e.image)?void 0:s.visible)&&(null!=e.image.url||null!=e.image.original),h=!0===(null==(a=e.label)?void 0:a.visible)&&null!=e.label.text;(l||u||h)&&t._setPolygonDefaults(e),this.visible=l,this.imageVisible=u,this.labelVisible=h,this.load=this.load.bind(this),u&&(this.imageMesh=new Ft(new To(1,1)))}static getDefaultMaterial(){return t.defaultMaterial||(t.defaultMaterial=new ol({color:0})),t.defaultMaterial}static getWeightedCenter(t){let e=t.reduce(((t,e)=>({x:t.x+e.x,y:t.y+e.y})),{x:0,y:0});return e.x/=t.length,e.y/=t.length,e}static getBoundingCentre(t){let e=1/0,i=1/0,n=-1/0,r=-1/0;return t.forEach((t=>{t.x>n&&(n=t.x),t.x<e&&(e=t.x),t.y>r&&(r=t.y),t.y<i&&(i=t.y)})),{x:(e+n)/2,y:(i+r)/2}}static _makeFromCoords(t,e,i){let n=new t;return n.moveTo(e[0].x-i.width/2,-e[0].y+i.height/2),e.slice(1).forEach((t=>n.lineTo(t.x-i.width/2,-t.y+i.height/2))),n.lineTo(e[0].x-i.width/2,-e[0].y+i.height/2),n}static _setPolygonDefaults(t){let e={visible:!0,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:5},bevel:{size:0,thickness:0,segments:1},offset:0};return t.layer||(t.layer="Polygon"),t.geometry=(0,Kc.default)(t.geometry,e),t.geometry.bevel=(0,Kc.default)(t.geometry.bevel,e.bevel),t.image&&(t.image.position=(0,Kc.default)(t.image.position,e.position),t.image.rotation=(0,Kc.default)(t.image.rotation,e.rotation),t.image.scale=(0,Kc.default)(t.image.scale,e.scale)),t.label&&(t.label.position=(0,Kc.default)(t.label.position,e.position),t.label.rotation=(0,Kc.default)(t.label.rotation,e.rotation),t.label.scale=(0,Kc.default)(t.label.scale,e.scale),t.label.color=t.label.color||"#000000",t.label.fontSize=t.label.fontSize||20),t}getBoundingBox(){if(this.boundingBox)return this.boundingBox;let t=1/0,e=1/0,i=-1/0,n=-1/0,r=-this.mapClass.width/2,o=this.mapClass.height/2;return this.polygon.vertexes.forEach((s=>{s.x+r>i&&(i=s.x+r),s.x+r<t&&(t=s.x+r),-s.y+o>n&&(n=-s.y+o),-s.y+o<e&&(e=-s.y+o)})),this.boundingBox={min:{x:t,y:e,z:0},max:{x:i,y:n,z:0}},this.boundingBox}async load(){var e;let i=this.polygon,n=this.mapClass;if(this.visible){let r=i.vertexes,o=Math.max(n.width,n.height)/1e3;(this.imageVisible||i.geometry.offset)&&(r=t._clip(r,0),r=t._clip(r,i.geometry.offset),i.vertexes=r);let s,a=t._makeFromCoords(Ul,r,n);i.holes&&(a.holes=i.holes.map((e=>t._makeFromCoords(Bp,e,n)))),s=i.geometry.bevel?{bevelEnabled:!0,depth:i.geometry.scale.z*o,bevelThickness:i.geometry.bevel.thickness*i.geometry.scale.z*o,bevelSize:i.geometry.bevel.size*o,bevelSegments:i.geometry.bevel.segments||1}:{bevelEnabled:!1,depth:i.geometry.scale.z*o},this.polygonHeight=i.geometry.scale.z*Math.max(this.mapClass.width,this.mapClass.height)/1e3;let l=Array.isArray(i.textures)&&i.textures.filter((t=>t.image&&Object.keys(t.image).length)).length,u=t._normalizeColor(i.material.color),h=null!=(e=i.material.opacity)?e:1;if(this.geometry=new Uc(a,s),l&&Array.isArray(i.textures)){let t,e,r=i.textures.find((t=>"front"===t.name)),o=i.textures.find((t=>"side"===t.name)),s=o&&o.useFrontFaceImage,a=r&&r.image&&(r.image.url||r.image.original),l=o&&o.image&&(o.image.url||o.image.original);JN(this.geometry,i.textures,n);try{a&&(t=await this.assetManager.loadImage(a),t.mapping=Fx,t.wrapS=wr,t.wrapT=wr,t.anisotropy=16),!s&&l?(e=await this.assetManager.loadImage(l),e.mapping=Fx,e.wrapS=wr,e.wrapT=wr,e.anisotropy=16):t&&(e=t)}catch{Le.error("Error loading texture",a||l,"for polygon",null==i?void 0:i.id)}let c={color:u,transparent:!0,opacity:h,side:h<1?Dr:Pa};this.material=e===t?new ol({...c,map:t}):[new ol({...c,map:t}),new ol({...c,map:e})]}else this.material=t._getMaterial(i.material.color,h,i.map);this.mesh=new Ft(this.geometry,"MULTI_GEOMETRY"===this.mode?this.material:t.hoverMeshMaterial),this.mesh.name=i.id,Array.isArray(this.mesh.material)||(this.mesh.material.needsUpdate=!0),"MULTI_GEOMETRY"===this.mode?(this.mesh.translateZ(i.geometry.position.z*o),this.container.add(this.mesh)):(this.geometry.translate(0,0,i.geometry.position.z*o),this.mesh.renderOrder=1)}return this.imageVisible||this.labelVisible?(this.imageVisible&&this._addImage(i,n),this.labelVisible&&this._addLabel(i,n),this):this}_addLabel(e,i){var n;if(null==(null==(n=null==e?void 0:e.label)?void 0:n.text))return;let r=Math.max(i.width,i.height)/1e3,o=t.getWeightedCenter(e.vertexes),s=e.label.position,a=e.label.rotation.z,l=e.label.text.split("\n");EX.getFont(e.label.fontFamily).then((n=>{if(!e.label)return;let u={font:n,size:e.label.fontSize*r,height:t.overlayHeight,bevelEnabled:!1,curveSegments:4,align:e.label.align||"left"},h=0,c=l.reverse().map(((t,e)=>(t.length>l[h].length&&(h=e),new s3(t,u)))),p=c[h],d=new Ft(p),f=(new Yt).setFromObject(d).getSize(new K).x,g=t._getMaterial(e.label.color,void 0,e.map),m=0,v=RT(l.map(((t,e)=>{let i,n=c[e],r=new Ft(n,g),o=(new Yt).setFromObject(r).getSize(new K);return i="left"===u.align?0:"right"===u.align?f-o.x:(f-o.x)/2,r.position.set(i,m,0),r.geometry.translate(i,m,0),m+=1.25*u.size,r.geometry}))),y=new Ft(v,g);v.computeBoundingBox();let x=v.boundingBox,_=x.max.x-x.min.x,b=x.max.y-x.min.y,M=e.geometry.position.z+e.geometry.scale.z;y.translateX(o.x-i.width/2+s.x-_/2),y.translateY(-o.y+i.height/2+s.y-b/2),y.rotation.set(0,0,a*Math.PI/180),y.translateZ((t.overlayHeight+M)*r),this.labelMesh=y,this.container.add(y)}))}_addImage(e,i){var n,r;if(null==(null==e?void 0:e.image))return;let o=e.image.url||e.image.original;o instanceof Blob&&(o=URL.createObjectURL(o));let s,a=new ol({transparent:!0,depthWrite:!1,alphaTest:.1,side:Dr});a.userData={isPolygonImage:!0,originalOpacity:null!=(n=a.opacity)?n:1,originalTransparency:null!=(r=a.transparent)&&r},this.imageMesh.material=a,this.imageMesh.renderOrder=Ng.POLYGON_IMAGE,this.imageMesh.name=e.id+"_image",this.container.add(this.imageMesh),this.imageMesh.visible=!1,t.imagesLoadingInProgress.has(o)?s=t.imagesLoadingInProgress.get(o):(s=this.assetManager.loadImage(o).then((t=>(t.anisotropy=16,[t]))),t.imagesLoadingInProgress.set(o,s)),s.then((([n])=>{if(null==e.image)return;a.map=n,a.needsUpdate=!0;let r,s=this.getBoundingBox(),l=Math.max(i.width,i.height)/1e3,u=e.vertexes;r=e.image._isAbsolutelyPositioned?{x:e.image.position.x,y:e.image.position.y}:e.image.fitToBounds?t.getBoundingCentre(u):t.getWeightedCenter(u);let h=e.image.fitToBounds||e.image._isAbsolutelyPositioned?0:e.image.position.x,c=e.image.fitToBounds||e.image._isAbsolutelyPositioned?0:e.image.position.y,p=e.geometry.position.z+e.geometry.scale.z;e.image.position&&(this.imageMesh.position.x=r.x-i.width/2+h,this.imageMesh.position.y=-r.y+i.height/2+c,this.imageMesh.translateZ((p+e.image.position.z)*l)),e.image.rotation&&this.imageMesh.rotation.set(e.image.rotation.x*Math.PI/180,e.image.rotation.y*Math.PI/180,e.image.rotation.z*Math.PI/180);let d=n.image.width,f=n.image.height;"string"==typeof o&&null!=URL&&"function"==typeof URL.revokeObjectURL&&URL.revokeObjectURL(o);let g,m={x:e.image.viewBox.width,y:e.image.viewBox.height};g=!1===e.image.useLocalScaling?l:Math.min(s.max.x-s.min.x,s.max.y-s.min.y)/Math.max(m.x,m.y),e.image.fitToBounds?this.imageMesh.scale.set(s.max.x-s.min.x,s.max.y-s.min.y,1):e.image.scale&&this.imageMesh.scale.set(e.image.scale.x*g*e.image.viewBox.width,e.image.scale.y*g*e.image.viewBox.height,1),this.imageMesh.translateZ(t.overlayHeight*l),n.repeat=new qe(e.image.viewBox.width/d,e.image.viewBox.height/f),n.offset=new qe(0,(n.image.height-e.image.viewBox.height)/n.image.height),a.blending=EO,this.publish("texture-loaded",n)})).catch((()=>{Le.error("Error loading image",o,"for polygon",null==e?void 0:e.id)}))}static _normalizeColor(t){let e=t.replace(/#/,"");return 3===e.length&&(e="".concat(e[0]).concat(e[0]).concat(e[1]).concat(e[1]).concat(e[2]).concat(e[2])),parseInt(e,16)}static _getMaterial(e,i,n){let r,o=t._normalizeColor(e),s=i<1?o+"_"+i:o;if(t.materials[n]=t.materials[n]||{},t.materials[n][s])r=t.materials[n][s];else{let e={color:o,side:i<1?Dr:Pa};i<1&&(e.transparent=!0,e.opacity=i),t.materials[n][s]=new ol(e),r=t.materials[n][s]}return r}static _clip(e,i){i/=2;let n=t.scale,r=e.map((t=>({X:t.x*n,Y:t.y*n})));for(let t=8;0!==t;t--){let t=new p2.ClipperOffset;t.AddPath(r,p2.JoinType.jtMiter,p2.EndType.etClosedPolygon);let e=new p2.Paths;try{if(t.Execute(e,i*n),e.length)return e[0].map((t=>({x:t.X/n,y:t.Y/n})));i/=2}catch{i/=2}}return r}};u(pn,"Element"),A(pn,"defaultMaterial"),A(pn,"hoverMeshMaterial",new ol({color:"#333"})),A(pn,"materials",{}),A(pn,"defaultExtrudeSettings",{depth:10,bevelEnabled:!1}),A(pn,"scale",100),A(pn,"overlayHeight",.15),A(pn,"imagesLoadingInProgress",new Map);var $N=pn,Up=$N;E(),E();var h3=2*Math.PI,g2=Math.PI/2,eR=1.5*Math.PI,j2e=u((function(t){let e=t.image,i=t.rotation||0,n=e.position.clone(),r=e.rotation.z,o=i,s=u((function(){let t=e.geometry;t.boundingBox||t.computeBoundingBox(),i=(i+Math.PI)%h3,e.rotation.z=e.rotation.z+Math.PI,e.translateX(-2*(t.boundingBox.min.x+(t.boundingBox.max.x-t.boundingBox.min.x)/2)),e.translateY(-2*(t.boundingBox.min.y+(t.boundingBox.max.y-t.boundingBox.min.y)/2))}),"flip");this.flipIfNeeded=function(t){let e=(i-t+h3)%h3;(e>g2&&e<eR||e<-g2&&e>-eR)&&s()},this.reset=function(){e.position.x=n.x,e.position.y=n.y,e.rotation.z=r,i=o}}),"FlippableImage"),XD=j2e;function f3(t,e){var i,n;let r=(null==(i=e.referenceMap)?void 0:i.scale)||1,o=t.scale||1,s=(null==(n=e.referenceMap)?void 0:n.getNorth())||0,a=t.getNorth()||0,{x:l,y:u}=t.georeference[0].target,{x:h,y:c}=t.georeference[2].target,p=new mi(l,u),d=new mi(h,c),{lat:f,lon:g}=p.midpointTo(d),m=e.referenceMap.createCoordinate(f,g),{x:v,y:y}=e.convertTo3DMapPosition(m),x=o/r;return{position:[v,y,0],scale:[x,x,x],rotation:[0,0,a-s]}}E(),E(),u(f3,"determineMapPositionAndRotation");var iR=class{constructor(t,e,i,n,r){A(this,"core"),A(this,"layerGroup"),A(this,"mapGroup"),A(this,"defaultMap"),A(this,"activeMap"),A(this,"visibleMap"),A(this,"startingMap"),A(this,"baseMap"),A(this,"object",new ci),A(this,"mapObjects",[]),A(this,"loading",!1),A(this,"activeMapOpacity",-1),A(this,"buildingOpacity",-1),A(this,"animating",!1),A(this,"processedMapObjects",new Set),A(this,"state","out-of-view"),this.core=t,this.mapGroup=e,this.layerGroup=i,this.startingMap=n,this.defaultMap=n,this.activeMap=n,this.baseMap=r,this.mapObjects=e.maps.map((e=>t.mapObjects.get(e.id))),i.mergedObjectsGroup.children.forEach((t=>{t.userData.building=this})),this.core.on(7,(()=>{this.determineMapVisibility()}))}determineMapVisibility(){for(let t of this.mapObjects)this.core.currentMap===t.mapClass.id?t.visible||t.onVisible():t.visible&&t.onInvisible()}setActiveMapOpacity(t,e){var i,n;if(this.activeMapOpacity!==t){if("number"==typeof e)return void this.tweenActiveMapOpacity(t,e);this.animating||(this.activeMapOpacity=t,null!=this.visibleMap&&(null==(n=null==(i=this.visibleMapObject)?void 0:i.layerGroups.get("default"))||n.setOpacity(t)))}}tweenActiveMapOpacity(t,e=300){this.animating=!0,ll({from:{opacity:this.activeMapOpacity},to:{opacity:t},duration:e,onUpdate:({opacity:t})=>{var e,i;this.activeMapOpacity=t,null!=this.visibleMap&&(null==(i=null==(e=this.visibleMapObject)?void 0:e.layerGroups.get("default"))||i.setOpacity(t)),this.core.tryRendering()},onComplete:()=>{this.animating=!1}}).start(this.core)}setBuildingOutlineOpacity(t){this.buildingOpacity!==t&&(this.buildingOpacity=t,this.layerGroup.setOpacity(t))}get activeMapObject(){return this.activeMap?this.core.mapObjects.get(this.activeMap.id):void 0}get visibleMapObject(){return this.visibleMap?this.core.mapObjects.get(this.visibleMap.id):void 0}get defaultMapObject(){return this.core.mapObjects.get(this.defaultMap.id)}get baseMapObject(){return this.core.mapObjects.get(this.baseMap.id)}onInView(){"in-view"!==this.state&&(this.visibleMap!==this.activeMap&&(null==this.activeMap?this.setMap(this.defaultMap):this.setMap(this.activeMap)),this.state="in-view")}onOutOfView(){"out-of-view"!==this.state&&(this.visibleMap!==this.defaultMap&&(this.activeMap=this.defaultMap),this.state="out-of-view")}async setMap(t){var e;this.loading=!0,this.visibleMap=void 0;let i=this.core.mapObjects.get(t.id);try{if(await i.load(),!this.processedMapObjects.has(i)){let{position:e,rotation:n,scale:r}=f3(t,this.core);i.object.position.set(...e),i.object.rotation.set(...n),i.object.scale.set(...r),i.box=(new Yt).setFromObject(i.object),i.object.name=t.id,this.processedMapObjects.add(i)}}catch(t){Le.error(t)}this.object.children.length>0&&this.object.children.forEach((t=>{this.object.remove(t)})),-1!==this.activeMapOpacity&&(null==(e=i.layerGroups.get("default"))||e.setOpacity(this.activeMapOpacity)),i.layerGroups.get("default").isVisible=!0,this.object.add(i.object),this.visibleMap=t,this.activeMap=t,this.determineMapVisibility(),this.loading=!1,this.core.tryRendering()}};u(iR,"Building");var tR=iR,nR=tR;E();var TX=15.8,W2e=17,SX=new kc,Y2e=!1,sR=class{constructor(t,e){var i;A(this,"core"),A(this,"buildings",[]),A(this,"object"),A(this,"panBounds"),A(this,"loaded",!1),A(this,"baseMapObject"),A(this,"raycasters"),A(this,"baseMap"),A(this,"options"),A(this,"resize",u((()=>{this.buildRaycasters()}),"resize")),A(this,"currentMap"),A(this,"buildingVisiblityMap",new Map),A(this,"buildingsByPolygonId",new Map),this.core=t,this.baseMap=e,this.baseMapObject=this.core.mapObjects.get(this.baseMap.id),this.currentMap=this.baseMap,this.options={indoorsFullyVisibleZoomLevel:W2e,buildingFullyVisibleZoomLevel:TX,setMapAtZoomLevel:TX,preloadDefaultMaps:!1,baseMap:this.baseMap,keepLayersActiveOnBaseMap:[],...null==(i=this.core.options)?void 0:i.dynamicFocus},this.core.on(7,(()=>{this.core.currentMap===this.baseMap.id?this.baseMapObject.onVisible():this.baseMapObject.onInvisible()})),this.buildRaycasters()}buildRaycasters(){let t=new qe(this.core.canvasWidth/2,this.core.canvasHeight/2),e=new qe(t.x/1.2,t.y/1.2),i=new qe(t.x+(t.x-e.x),e.y),n=new qe(e.x,t.y+(t.y-e.y)),r=new qe(i.x,n.y);this.raycasters=[t,e,i,n,r].map(((t,e)=>{if(Y2e){let e=document.createElement("div");e.style.position="absolute",e.style.top=t.y+"px",e.style.left=t.x+"px",e.style.width="10px",e.style.height="10px",e.style.backgroundColor="red",document.body.append(e)}let i=t.x/this.core.canvasWidth*2-1,n=-t.y/this.core.canvasHeight*2+1,r=new K(i,n,0),o=new pa;return o.setFromCamera(r,this.core.cameraObject),[o,r,0===e?10:1]}))}updateRaycasters(){for(let[t,e]of this.raycasters)t.setFromCamera(e,this.core.cameraObject)}expandToBaseMapBounds(){this.baseMapObject.object.updateMatrixWorld();let t=this.baseMapObject.getMapScale()*this.baseMapObject.object.scale.x,e=r3(this.baseMapObject,this.core.controls.panBounds),i=this.core.loadOptions&&this.core.loadOptions.zoomOverrides&&this.core.loadOptions.zoomOverrides.zoomMultiplier||i3;this.core.controls.zoomFactor=t/i,e.center=new K,this.panBounds=e,this.core.controls.panBounds=e;let{min:n,max:r}=e,o=[new K(n.x,n.y,n.z),new K(n.x,r.y,n.z),new K(r.x,n.y,n.z),new K(r.x,r.y,n.z),new K(n.x,n.y,r.z),new K(n.x,r.y,r.z),new K(r.x,n.y,r.z),new K(r.x,r.y,r.z)],{zoom:s}=this.core.getCameraFrameForPoints(o,1,1,this.core.cachedPadding,!1);this.core.controls.setMulti(e.center,s,Yp,n3)}async load(){this.core.publish(6),await this.baseMapObject.load(),this.object=this.baseMapObject.object;let{position:t,rotation:e,scale:i}=f3(this.baseMap,this.core);this.baseMapObject.object.position.set(...t),this.baseMapObject.object.rotation.set(...e),this.baseMapObject.object.scale.set(...i),this.baseMapObject.box=(new Yt).setFromObject(this.baseMapObject.object),this.baseMapObject.object.name=this.baseMap.id;let n=Array.from(this.baseMapObject.layerGroups).filter((([t])=>t.includes("building")));this.buildings=await this.createBuildings(n),this.buildings.forEach((t=>{this.object.add(t.object)})),this.expandToBaseMapBounds(),this.baseMapObject.onVisible(),this.core.publish(7),this.loaded=!0}setMap(t,e=!1){if(this.currentMap===t)return Promise.resolve();if(this.core.publish(6),t===this.baseMap)return this.currentMap=this.baseMap,e&&(this.core.setMapReason="dynamic-focus-user-interaction"),this.core.publish(7),Promise.resolve();let i=t.mapGroup;return this.buildings.find((t=>t.mapGroup.id===i.id)).setMap(t).then((()=>{this.currentMap=t,e&&(this.core.setMapReason="dynamic-focus-user-interaction"),this.core.publish(7)}))}get buildingsInView(){return Array.from(this.buildingVisiblityMap.entries()).filter((([t,e])=>e)).map((([t,e])=>t))}determineBuildingsInView(){if(this.core.controls.getZoomLevel()<this.options.buildingFullyVisibleZoomLevel)for(let t of this.buildings)this.buildingVisiblityMap.set(t,!1);let t=this.core.cameraObject;SX.setFromProjectionMatrix((new Ot).multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse));for(let t of this.buildings)for(let e of t.layerGroup.mergedObjectsGroup.children)SX.intersectsObject(e)?this.buildingVisiblityMap.set(t,!0):this.buildingVisiblityMap.set(t,!1);return this.buildingsInView}determineCurrentMap(){if(this.core.controls.getZoomLevel()<this.options.setMapAtZoomLevel)return this.baseMap;this.updateRaycasters();let t=new Map,e=Array.from(this.buildingVisiblityMap.keys()).flatMap((t=>t.layerGroup.mergedObjectsGroup.children)),i=-1/0,n=null;for(let[r,o,s]of this.raycasters)r.intersectObjects(e).forEach((e=>{let r=e.object.userData.building;t.has(r)||t.set(r,0);let o=t.get(r)+s;t.set(r,o),o>i&&(n=r,i=o)}));return null!=n?n.activeMap:this.currentMap}setOpacities(t=[],e){let i=this.core.controls.getZoomLevel();if(i<this.options.buildingFullyVisibleZoomLevel)return void this.buildings.forEach((t=>{t.onOutOfView(),t.setActiveMapOpacity(0),t.setBuildingOutlineOpacity(1)}));let n=tf(i,this.options.buildingFullyVisibleZoomLevel,this.options.indoorsFullyVisibleZoomLevel,0,1,Vx),r=tf(n,0,1,0,.6,Vx),o=tf(n,0,1,1,0,Vx);this.buildings.forEach((i=>{t.includes(i)?(i.onInView(),i.setBuildingOutlineOpacity(o),i.visibleMap===e&&n>0?i.setActiveMapOpacity(n,300):i.setActiveMapOpacity(r,300)):(i.onOutOfView(),i.setActiveMapOpacity(0),i.setBuildingOutlineOpacity(1))}))}async createBuildings(t){let e=[];return t.forEach((([t,i])=>{let n=this.core.venue.getCollectionItemById("maps",i.userData.toMapId),r=this.core.venue.getCollectionItemById("mapGroups",i.userData.mapGroupId),o=new nR(this.core,r,i,n,this.baseMap);e.push(o),this.buildingVisiblityMap.set(o,!1)})),this.options.preloadDefaultMaps&&await Promise.all(e.map((t=>t.setMap(t.startingMap)))),e}};u(sR,"DynamicFocusScene");var rR=sR,qD=rR;E();var Iu=Bt(Eu()),AX="attribute float pathDistance;\nattribute vec3 pathNormal;\nattribute vec3 pathTangent;\n\nuniform vec2 uvScale;\nuniform float vertexes;\nuniform float complete;\nuniform float nearRadius;\nuniform float farRadius;\nuniform float nearZoom;\nuniform float farZoom;\nuniform float pulse;\nuniform float pulseLength;\nuniform bool pathIsVertical;\nuniform bool displayArrowsOnPath;\nuniform vec2 cameraParameters;\nuniform float flattenFactor;\n\nvarying float zoomLevel;\nvarying float radius;\nvarying vec2 fragTexcoord;\nvarying float fragTopTextureU;\nvarying float fragPathDistance;\n\n// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using\n// linear interpolation/extrapolation.\n//\n// This performs a pure linear mapping `y = mx + b` where\n// `m = (yMax - yMin) / (xMax - xMin)`,\n// `b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin`.\nfloat remap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;\n}\n\n// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear\n// interpolation, clamping result values outside [yMin, yMax].\nfloat clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);\n}\n\nvoid main() {\n\tfragPathDistance = pathDistance;\n\n\t// We can get an origin point for the cross-section of the path by\n\t// subtracting the surface normal times the radius, since the surface normal\n\t// points strictly away from the centre.\n\tvec3 origin = position - nearRadius * normal;\n\n\t// Inflate the path along its surface normal to increase its radius from\n\t// `nearRadius` to `farRadius` when the camera is at `farZoom`.\n\tvec3 adjustedPosition = position;\n\tzoomLevel = clampRemap(cameraParameters.x, nearZoom, farZoom, 0.0, 1.0);\n\tadjustedPosition += normal * (farRadius - nearRadius) * zoomLevel;\n\n\t// Determine how far the path extends \"up\" or \"down\" in the direction of the\n\t// path normal.\n\tfloat height = dot(adjustedPosition - origin, pathNormal);\n\n\t// Flatten the bottom half of the path entirely so that it's flat\n\t// against the floor. This makes the path look nicer when it's\n\t// semitransparent behind opaque geometry, so you don't see it\n\t// peeking through.\n\tfloat desiredHeight = max(height, 0.0);\n\n\tdesiredHeight = desiredHeight * flattenFactor;\n\n\tfloat flattenMagnitude = height - desiredHeight;\n\tadjustedPosition = adjustedPosition - pathNormal * flattenMagnitude;\n\n\t// Transform the vertices into NDC.\n\tvec4 mvPosition = modelViewMatrix * vec4(adjustedPosition, 1.0);\n\tgl_Position = projectionMatrix * mvPosition;\n\n\tfragTexcoord = uv;\n\n\t// Compute a texture coordinate for mapping the arrow texture to the path.\n\t// We don't want to use the u-value that Three.js provides, because the\n\t// path may end up twisting arbitrarily -- but we want the arrow texture to\n\t// always be on the top of the path.\n\tvec3 bitangent = cross(normal, pathTangent);\n\tfragTopTextureU = -dot(bitangent, pathNormal) * 0.5 + 0.5;\n\n\tradius = mix(nearRadius, farRadius, zoomLevel);\n}\n",CX='#define ARROW_FADING_POINT 0.15\n\nuniform float complete;\nuniform float nearRadius;\nuniform float farRadius;\nuniform vec2 resolution;\nuniform vec2 cameraParameters;\nuniform vec3 color;\nuniform float pathLength;\nuniform bool showPulse;\nuniform vec3 pulseColor;\nuniform float pulse;\nuniform float pulseLength;\nuniform bool pathIsVertical;\nuniform bool displayArrowsOnPath;\nuniform float arrowAnimationTimer;\nuniform sampler2D arrowTexture;\n\nvarying float zoomLevel;\nvarying float radius;\nvarying vec2 fragTexcoord;\nvarying float fragTopTextureU;\nvarying float fragPathDistance;\n\n// How long the arrow should be, as a factor of `pathRadius`. Since we\'ve\n// mostly flattened the top of the path, values near 2.0 (the diameter)\n// will probably look best.\nconst float arrowLength = 2.0;\n\n// How much of a relative margin the arrow texture should have inside the\n// area laid out for it. Useful to pull the arrow away from the edges of the\n// path, which slope down.\nconst float arrowMargin = 0.1;\n\n// How many arrow-lengths of space should be between arrows on a short path.\nconst float arrowSpacingOnShortPath = 6.0;\n\n// How many arrow-lengths of space should be between arrows on a long path.\nconst float arrowSpacingOnLongPath = 7.5;\n\n// How long a path must be to be considered "long", as a factor of\n// the path radius.\nconst float longPathLength = 200.;\n\n// How long a path must be to be considered "short", as a factor of the\n// path radius.\nconst float shortPathLength = 75.;\n\n// How much of the path\'s length the fade-in should comprise when going from\n// zero opacity to full opacity.\nconst float completeLength = 0.1;\n\n// Map the x value from the range [xMin, xMax] to the range [yMin, yMax] using\n// linear interpolation/extrapolation.\n//\n// This performs a pure linear mapping `y = mx + b` where\n// `m = (yMax - yMin) / (xMax - xMin)`,\n// `b = -xMin * (yMax - yMin) / (xMax - xMin) + yMin`.\nfloat remap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn (x - xMin) / (xMax - xMin) * (yMax - yMin) + yMin;\n}\n\n// Map the x value from [xMin, xMax] to the range [yMin, yMax] using linear\n// interpolation, clamping result values outside [yMin, yMax].\nfloat clampRemap(float x, float xMin, float xMax, float yMin, float yMax) {\n\treturn clamp(remap(x, xMin, xMax, yMin, yMax), yMin, yMax);\n}\n\nvoid main(void) {\n\t// Compute the opacity of the path based on the distance from the current\n\t// fragment to the `complete` value as it varies from 0.0 to 1.0.\n\t// Fragments that are at the `complete` value or past it will be fully\n\t// transparent, while fragments that are at `complete - completeLength`\n\t// or before it will be fully opaque. However, we adjust the `complete`\n\t// value here so that it overshoots by one full `completeLength`, so that\n\t// the entire path will be opaque when the `complete` value is at 1.0.\n\tfloat completeLocation = complete * (1.0 + completeLength);\n\tfloat completeAmount = clampRemap(\n\t\tfragPathDistance,\n\t\tcompleteLocation - completeLength,\n\t\tcompleteLocation,\n\t\t0.0,\n\t\t1.0\n\t);\n\tfloat opacity = 1.0 - smoothstep(0.0, 1.0, completeAmount);\n\n\t// 2020/01/09 Terence Dickson\n\t// When we render the background and overlay for the mapbox outdoor context\n\t// behind everything else in single-buffer rendering, the fact that the path\n\t// writes to the depth buffer means that the background and overlay will not\n\t// be drawn behind the path even when the path is still fading in. The effect\n\t// is subtle and is only visible in single-buffer rendering so this quick fix\n\t// prevents writes to the depth buffer for zero opacity fragments, which gets\n\t// rid of the most visually-offensive ghosting.\n\tif (opacity <= 0.0) {\n\t\tdiscard;\n\t}\n\n\t// Push in the texture coordinates so that they ramp up\n\t// at `arrowMargin` instead of at zero; this remapping looks somewhat\n\t// like this:\n\t// 1 ^        ___\n\t//   |       /\n\t//   |      /\n\t//   |     /\n\t//   |    /\n\t//   |___/\n\t// 0 +----------\x3e\n\t//   0   ^      1\n\t//       arrowMargin\n\t// Making the arrows narrower on the path.\n\tfloat u = fragTopTextureU;\n\tu = clamp(\n\t\tu * (1. / (1. - arrowMargin * 2.)) - (1. / (1. - arrowMargin * 2.) - 1.) / 2.,\n\t\t0.0,\n\t\t1.0\n\t);\n\n\tfloat arrowSpacing = clampRemap(\n\t\tpathLength,\n\t\tshortPathLength * radius,\n\t\tlongPathLength * radius,\n\t\tarrowSpacingOnShortPath,\n\t\tarrowSpacingOnLongPath\n\t);\n\n\t// Reduce the spacing between arrows when the camera zooms out, as increasing\n\t// the path radius will increase the arrow size and thus be able to fit\n\t// fewer arrows on in total, and this secondary movement of the arrows\n\t// "zooming off" the end of the path is unpleasant\n\tfloat expandAmount = mix(1.0, farRadius / nearRadius, zoomLevel);\n\tfloat effectiveArrowSpacing =\n\t\tarrowSpacing * 1.0 / expandAmount +\n\t\tarrowMargin * 2.0;\n\n\tfloat effectiveArrowLength = arrowLength * radius * (1. - arrowMargin * 2.0);\n\n\t// Adjust the slope of the vertical texture coordinate so that it goes\n\t// from 0 to 1 along the length of the arrow plus the spacing between\n\t// arrows, and adjust its x-intercept so that one arrow moves to the\n\t// exact position of the next arrow as `arrowAnimationTimer` goes\n\t// from 0 to 1\n\tfloat v = (\n\t\tfragTexcoord.x * (pathLength / effectiveArrowLength)\n\t\t- arrowAnimationTimer * (1. + effectiveArrowSpacing)\n\t);\n\n\t// Compute a "looping sawtooth" wave for determining the vertical texture\n\t// coordinates of the arrow texture, roughly as follows:\n\t// 3 ^              /\n\t//   |          ___/\n\t// 2 |         /\n\t//   |     ___/\n\t// 1 |    /\n\t//   |___/\n\t// 0 +---------------\x3e\n\t//   0   ^ ^\n\t//   ^   |_|\n\t//   |   effectiveArrowLength\n\t//   |___|\n\t//   effectiveArrowSpacing\n\t//\n\t// This is effectively equivalent to this sort of sawtooth wave:\n\t//   ^\n\t// 1 |    /    /    /\n\t//   |___/ ___/ ___/\n\t// 0 +---------------\x3e\n\t//\n\t// Causing the image of the arrow to repeat, with dead space (the bottom\n\t// edge of the texture stretched out) between the arrows at the provided\n\t// spacing. The reason why the "looping" design is preferred is because\n\t// it takes advantage of WebGL\'s `GL_REPEAT` texture wrapping behaviour\n\t// to avoid the discontinuity that can end up causing visual artifacts.\n\tif (mod(v, (1. + effectiveArrowSpacing)) < 1.) {\n\t\tv = v - effectiveArrowSpacing * floor(v / (1. + effectiveArrowSpacing));\n\t} else {\n\t\tv = ceil(v / (1. + effectiveArrowSpacing));\n\t}\n\n\t// Use the r-component of the texture to determine whether the arrow covers\n\t// this fragment or not\n\tvec2 sampleTexcoord = vec2(u, v);\n\tfloat arrowAmount = 0.0;\n\tvec3 secondColor = pulseColor;\n\n\tif (displayArrowsOnPath) {\n\t\tarrowAmount = texture2D(arrowTexture, sampleTexcoord).r;\n\t\tfloat delta = 1.0 - abs(fragPathDistance * 2.0 - 1.0);\n\t\tsecondColor = mix(color, pulseColor, 1.0 - smoothstep(ARROW_FADING_POINT, 0.0, delta));\n\t}\n\n\tif (showPulse) {\n\t\t// Add the pulse color to the path by determining how far the current fragment\n\t\t// is from `pulse`\n\t\tfloat pulseLocation = remap(\n\t\tpulse,\n\t\t0.0,\n\t\t1.0,\n\t\t-pulseLength,\n\t\t1.0 + pulseLength\n\t\t);\n\t\tfloat pulseDistance = smoothstep(\n\t\t0.0,\n\t\tpulseLength,\n\t\tabs(fragPathDistance - pulseLocation)\n\t\t);\n\n\t\t// Blend the pulse color to the path based on how close this fragment is to\n\t\t// the `pulse` value and whether it\'s covered by an arrow -- but if it\'s\n\t\t// covered by *both*, then we go back to using the regular path color\n\t\t// (making arrows look like "holes" when they\'re overlapping the pulse.)\n\t\tfloat pulseLevel = abs(1.0 - pulseDistance - arrowAmount);\n\n\t\tgl_FragColor = vec4(mix(color, secondColor, pulseLevel), opacity);\n\t} else if (displayArrowsOnPath) {\n\t\tgl_FragColor = vec4(mix(color, pulseColor, arrowAmount), opacity);\n\t} else {\n\t\tgl_FragColor = vec4(color, opacity);\n\t}\n\t#include <encodings_fragment>\n}';E();var Jp,PX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M25.86,2.59A10.12,10.12,0,0,0,22.4.65a14,14,0,0,0-8.85.14A10.33,10.33,0,0,0,10,3.1,9.78,9.78,0,0,0,7.72,6.68,10,10,0,0,0,7,11h6a6.3,6.3,0,0,1,.18-2.33,5.57,5.57,0,0,1,1-1.77,4.05,4.05,0,0,1,1.5-1.13,6.87,6.87,0,0,1,4.5-.08,4.4,4.4,0,0,1,1.6.88,3.37,3.37,0,0,1,.93,1.22A3.84,3.84,0,0,1,23,9.29a3.15,3.15,0,0,1-.38,1.5,10.54,10.54,0,0,1-1.26,1.72,18.9,18.9,0,0,1-1.78,1.8c-.71.66-1.4,1.34-2,2C16.31,17.55,14,19,14,21v6h6V23c0-.63,0-1,1-2s1.24-1.3,2-2,1.69-1.66,2.5-2.52a14,14,0,0,0,2.28-2.81,7.51,7.51,0,0,0,1.08-4.05,9.68,9.68,0,0,0-.78-3.91A8.34,8.34,0,0,0,25.86,2.59Z"/><circle cx="17" cy="33" r="3"/></svg>',IX="data:image/png;base64,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",OX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="36 14.99 28 7.99 28 12.99 17 12.99 17 16.99 28 16.99 28 21.99 36 14.99"/><path d="M24,29H15V7L6,2H24v9h2V0H0V29l14.94,7L15,31H26V19H24Z"/></svg>',LX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="27 4 26 3 24 5 24 0 22 0 22 5 20 3 19 4 23 8 27 4"/><polygon points="17 4 16 5 14 3 14 8 12 8 12 3 10 5 9 4 13 0 17 4"/></svg>',DX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 5 19 3 19 8 17 8 17 3 15 5 14 4 18 0 22 4"/></svg>',NX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M12.85,18.24H9.25a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.26,1.26,0,0,0,12.85,18.24Z"/><circle cx="11.05" cy="15.85" r="1.5"/><path d="M26.82,18.24h-3.6a1.26,1.26,0,0,0-1.2,1.2v4.8c0,.43.65,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42c.43-.11,1.08-.75,1.08-1.18v-4.8A1.27,1.27,0,0,0,26.82,18.24Z"/><circle cx="25.02" cy="15.85" r="1.5"/><path d="M19.79,18.24h-3.6a1.27,1.27,0,0,0-1.2,1.2v4.8c0,.43.66,1.07,1.08,1.18v5.52c0,1.09,1.2,1.09,1.2,0v-5.5h1.44v5.5c0,1.09,1.2,1.09,1.2,0V25.42A1.68,1.68,0,0,0,21,24.24v-4.8A1.26,1.26,0,0,0,19.79,18.24Z"/><path d="M18,17.35a1.5,1.5,0,1,0-1.5-1.5A1.51,1.51,0,0,0,18,17.35Z"/><path d="M28.79,10H7.27c-2.82,0-5.11,2-5.11,4.51V31.6c0,2.49,2.29,4.51,5.11,4.51H28.79c2.82,0,5.12-2,5.12-4.51V14.51C33.91,12,31.61,10,28.79,10Zm2.85,21.6a2.7,2.7,0,0,1-2.85,2.51H7.27A2.7,2.7,0,0,1,4.42,31.6V14.51A2.7,2.7,0,0,1,7.27,12H28.79a2.7,2.7,0,0,1,2.85,2.51Z"/><polygon points="22 4 21 3 19 5 19 0 17 0 17 5 15 3 14 4 18 8 22 4"/></svg>',RX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="4 16 18 0 31.99 16 4 16"/><polygon points="31.99 20 18 36 4 20 31.99 20"/></svg>',BX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="30.18 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.69 27.59 30.18 26.18"/></svg>',kX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,8a3,3,0,1,0-3-3A3,3,0,0,0,18,8Z"/><path d="M33,10H27a3.65,3.65,0,0,0-3,1l-2.76,2.75V12.39a2.48,2.48,0,0,0-2.46-2.47H17.22a2.48,2.48,0,0,0-2.47,2.47v7.87L9,26a3.26,3.26,0,0,1-2,1H3c-2.28,0-3,1.79-3,3.93A2.76,2.76,0,0,0,3,34H9a3.77,3.77,0,0,0,3-1L27,18a3.29,3.29,0,0,1,2.49-1h3.26A3.43,3.43,0,0,0,36,13.44C36,12.08,35,10,33,10Zm0,5H29c-1.47,0-1.92-.08-3,1L11,31a3.15,3.15,0,0,1-2,1H3c-.82,0-1-.29-1-1.16S2.12,28.9,3,29H7a3.87,3.87,0,0,0,3-1L25,13a2.72,2.72,0,0,1,2-1h6c.68,0,1,1.05,1,1.44S34,15,33,15Z"/><polygon points="25.67 34 29.84 29.18 29.84 32.18 31.84 32.18 31.84 26.18 24.84 26.18 24.84 28.18 27.84 28.18 24.16 32.58 25.67 34"/></svg>',qX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/></svg>',FX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="18.18 4.18 14 9 14 6 12 6 12 12 19 12 19 10 16 10 19.69 5.59 18.18 4.18"/></svg>',UX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M36,34H0L36,2ZM12,30H32V12Z"/><polygon points="13.82 13.82 18 9 18 12 20 12 20 6 13 6 13 8 16 8 12.31 12.41 13.82 13.82"/></svg>',zX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M10,0,26,2s-5.59,5.68-5.56,5.71C23.32,10.88,23.94,15.27,24,18V36H20V18c-.05-2.09-.54-5.32-2.47-7.53L12,16Z"/></svg>',GX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M26,0,10,2s5.59,5.68,5.57,5.71C12.68,10.88,12.06,15.27,12,18V36h4V18c.06-2.09.54-5.32,2.47-7.53L24,16Z"/></svg>',VX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="35.99 2 30 2 25.99 2 25.99 6.59 25.99 8.84 24 8.84 19.99 8.84 19.99 13.43 19.99 15.67 13.99 15.67 13.99 15.69 13.99 20.27 13.99 22.52 12 22.52 7.99 22.52 7.99 27.12 7.99 29.36 0 29.36 0 33.95 7.99 33.95 11.99 33.95 12 33.95 12 27.12 13.99 27.12 18 27.12 18 22.52 18 20.27 19.99 20.27 24 20.27 24 15.67 24 13.43 25.99 13.43 30 13.43 30 8.84 30 6.59 35.99 6.59 35.99 2"/></svg>',HX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="30.17 26.18 26 31 26 28 24 28 24 34 31 34 31 32 28 32 31.68 27.59 30.17 26.18"/></svg>',jX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><polygon points="30 2.03 25.99 2.03 25.99 6.63 25.99 8.87 24 8.87 19.99 8.87 19.99 13.47 19.99 15.71 13.99 15.71 13.99 15.73 13.99 20.31 13.99 22.57 12 22.57 7.99 22.57 7.99 27.16 7.99 29.4 0 29.4 0 34 7.99 34 11.99 34 12 34 12 27.16 13.99 27.16 18 27.16 18 22.57 18 20.31 19.99 20.31 24 20.31 24 15.71 24 13.47 25.99 13.47 30 13.47 30 8.87 30 6.63 35.99 6.63 35.99 2.03 30 2.03"/><polygon points="24.83 33.82 29 29 29 32 31 32 31 26 24 26 24 28 27 28 23.32 32.41 24.83 33.82"/></svg>',WX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M5,10,17,0V8a11,11,0,0,1,8.44,3.5c2.88,3.2,3.5,7.8,3.56,10.5V36H25V22c-.05-2.11-.54-5.61-2.53-7.82A7.1,7.1,0,0,0,17,12v8Z"/></svg>',YX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M29,10,17,0V8a11,11,0,0,0-8.44,3.5C5.68,14.7,5.06,19.3,5,22V36H9V22c.06-2.11.54-5.61,2.53-7.82A7.1,7.1,0,0,1,17,12v8Z"/></svg>',XX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M20,0c-5.38,0-9.79,5.34-10,12H2L12,24,22,12H14c.19-4.39,2.86-8,6-8s6,4.58,6,10V36h4V14C30,6.13,25.6,0,20,0Z"/></svg>',ZX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M21,3c-.44-.92-1-3-3-3s-2.63,2.16-3,3C15,3,2,29,2,33a2.65,2.65,0,0,0,3,3c2,0,6.1-2.2,9-4,2-1,3-2,4-2s2,1,4,2c0,0,7,4,9,4a2.65,2.65,0,0,0,3-3C34,29,21,3,21,3Z"/></svg>',QX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,4A14,14,0,1,1,4,18,14,14,0,0,1,18,4m0-4A18,18,0,1,0,36,18,18,18,0,0,0,18,0Z"/><circle cx="18" cy="18" r="6"/></svg>',KX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Zm0,19a5,5,0,1,1,5-5A5,5,0,0,1,18,19Z"/></svg>',JX='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><title>mappedin-icon</title><path d="M18,0A13.83,13.83,0,0,0,4,14c0,4,1,9,7,12,2,1,6.15,8.67,7,10,3.38-5.44,5-9,7-10,6-3,7-8,7-12A13.83,13.83,0,0,0,18,0Z"/></svg>',$X='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="25px" height="30px" viewBox="0 0 25 30" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Marker Pin</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-104.5%" y="-63.3%" width="309.1%" height="259.8%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="2" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-204.000000, -523.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <path stroke="#FFFFFF" stroke-width="1.5" d="M4.95868222,15.5191099 C4.09118889,14.6145045 3.08708286,13.4178617 1.94340415,11.9271041 C0.219570966,9.68012899 -0.75,7.4435468 -0.75,5.73529412 C-0.75,2.16043095 2.04102866,-0.75 5.5,-0.75 C8.95897134,-0.75 11.75,2.16043095 11.75,5.73529412 C11.75,7.44173178 10.7794284,9.68143336 9.05659585,11.9271041 C7.91291714,13.4178617 6.90881111,14.6145045 6.04131778,15.5191099 L5.5,16.0835856 L4.95868222,15.5191099 Z" fill="#FFFFFF" fill-rule="evenodd"></path>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n',eZ='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="23px" height="27px" viewBox="0 0 23 27" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <title>Oval Copy 25</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <path d="M5.5,15 C6.34615385,14.1176471 7.33333333,12.9411765 8.46153846,11.4705882 C10.1538462,9.26470588 11,7.18962511 11,5.73529412 C11,2.56777864 8.53756612,0 5.5,0 C2.46243388,0 0,2.56777864 0,5.73529412 C0,7.1924534 0.846153846,9.26470588 2.53846154,11.4705882 C3.66666667,12.9411765 4.65384615,14.1176471 5.5,15 Z" id="path-1"></path>\n        <filter x="-90.9%" y="-53.3%" width="281.8%" height="236.1%" filterUnits="objectBoundingBox" id="filter-2">\n            <feMorphology radius="0.5" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n            <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n            <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.2 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n        </filter>\n    </defs>\n    <g id="CE-1261" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Final-MVP-Markers" transform="translate(-205.000000, -524.000000)">\n            <g id="Marker-Pin" transform="translate(211.000000, 528.000000)">\n                <g id="Oval-Copy-25">\n                    <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>\n                    <use fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use>\n                </g>\n            </g>\n        </g>\n    </g>\n</svg>\n',tZ='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <defs>\n      <filter id="f3" x="-50%" y="-50%" width="200%" height="200%">\n        <feMorphology radius="3" operator="dilate" in="SourceAlpha" result="shadowSpreadOuter1"></feMorphology>\n        <feOffset dx="0" dy="2" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>\n        <feGaussianBlur stdDeviation="2.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>\n        <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>\n        <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.4 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>\n      </filter>\n    </defs>\n    <circle cx="50" cy="50" r="40" fill="white" filter="url(#f3)"/>\n    <circle cx="50" cy="50" r="40" fill="white"/>\n</svg>\n',nZ='<?xml version="1.0" encoding="UTF-8"?>\n<svg width="36px" height="36px" viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    \x3c!-- Generator: Sketch 57.1 (83088) - https://sketch.com --\x3e\n    <circle cx="50" cy="50" r="30" />\n</svg>\n',iZ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 468.614 468.614">\n    <g>\n        <path d="M291.299 116.517h-3.501c10.635-12.36 17.102-28.378 17.102-45.915C304.899 31.666 273.219 0 234.305 0c-38.93 0-70.584 31.666-70.584 70.602 0 17.537 6.477 33.555 17.093 45.915h-3.51c-19.645 0-35.626 15.997-35.626 35.645v117.105c0 19.648 15.982 35.633 35.626 35.633h1.372v128.07c0 20.332 10.697 35.645 24.884 35.645h61.468c14.208 0 24.908-15.312 24.908-35.645V304.9h1.363c19.642 0 35.639-15.984 35.639-35.633V152.161c-.006-19.647-15.998-35.644-35.639-35.644z" fill="#386460" />\n        <path d="M291.299 116.517h-3.501c10.635-12.36 17.102-28.378 17.102-45.915C304.899 31.666 273.219 0 234.305 0c-38.93 0-70.584 31.666-70.584 70.602 0 17.537 6.477 33.555 17.093 45.915h-3.51c-19.645 0-35.626 15.997-35.626 35.645v117.105c0 19.648 15.982 35.633 35.626 35.633h1.372v128.07c0 20.332 10.697 35.645 24.884 35.645h61.468c14.208 0 24.908-15.312 24.908-35.645V304.9h1.363c19.642 0 35.639-15.984 35.639-35.633V152.161c-.006-19.647-15.998-35.644-35.639-35.644z" style="fill:none;stroke-width:8px;stroke:white" />\n    </g>\n</svg>',rZ='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\n    <g>\n        <path d="M12 0a8 8 0 00-8 8c0 1.421.382 2.75 1.031 3.906.108.192.221.381.344.563L12 24l6.625-11.531c.102-.151.19-.311.281-.469l.063-.094A7.954 7.954 0 0020 8a8 8 0 00-8-8zm0 4a4 4 0 110 8 4 4 0 010-8z" fill="#e74c3c"/>\n        <path d="M12 0a8 8 0 00-8 8c0 1.421.382 2.75 1.031 3.906.108.192.221.381.344.563L12 24l6.625-11.531c.102-.151.19-.311.281-.469l.063-.094A7.954 7.954 0 0020 8a8 8 0 00-8-8zm0 4a4 4 0 110 8 4 4 0 010-8z" style="fill:none;stroke-width:1px;stroke-linecap:round;stroke:white"/>\n        <path d="M12 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6z" fill="#c0392b"/>\n    </g>\n</svg>',sZ="data:image/png;base64,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",Jc=new Map([["journey-departure",iZ],["journey-destination",rZ],["question-mark",PX],["arrow",IX],["door",OX],["elevator",LX],["elevator-up",DX],["elevator-down",NX],["elevator-alt",RX],["escalator-down",BX],["escalator-up",kX],["ramp",qX],["ramp-down",FX],["ramp-up",UX],["sligntTurnLeft",zX],["sightTurnRight",GX],["stairs",VX],["stairs-down",HX],["stairs-up",jX],["turnLeft",WX],["turnRight",YX],["uTurn",XX],["blue-arrow",ZX],["start",QX],["destination-marker-back",KX],["destination-marker-front",JX],["smart-label-pin-back",$X],["smart-label-pin-front",eZ],["smart-label-circle-back",tZ],["smart-label-circle-front",nZ],["logo",sZ]]),Abe=10,Cbe=new fa,p3={adjustedAltitude:!1,color:"#4b90e2",pulseColor:"#ffffff",pulseIterations:1,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1200,maxAdjustedAltitude:1/0,minAdjustedAltitude:-1/0,curve:Iu.default.Easing.Cubic.InOut,displayArrowsOnPath:!1},Pbe={color:"#7ed321",pulseColor:"#ffffff",nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:800,curve:Iu.default.Easing.Cubic.InOut,displayArrowsOnPath:!1},oZ=2.3,Ibe=600,dR=class{constructor(t){te(this,Jp,void 0),ce(this,Jp,t)}get id(){return M(this,Jp).id}get nodes(){return M(this,Jp).nodes}get coordinates(){return M(this,Jp).coordinates}};Jp=new WeakMap,u(dR,"Path");var d3=dR,mR=class{constructor(t,e,i){A(this,"id"),A(this,"nodes",[]),A(this,"coordinates",[]),A(this,"pathSegments"),A(this,"options"),this.id=Cr(),t.forEach((t=>{t instanceof Fs?this.nodes.push(t):t instanceof aa&&this.coordinates.push(t)})),this.pathSegments=e,this.options=i}};u(mR,"InternalPath");var v2,lR,y2,uR,x2,cR,b2,hR,m3,aZ,g3,lZ,_2,fR,oR=mR,gR=class{constructor(t){te(this,v2),te(this,y2),te(this,x2),te(this,b2),te(this,m3),te(this,g3),te(this,_2),A(this,"core"),A(this,"altitudeAdjustmentMap"),A(this,"maxAdjustedAltitude"),A(this,"minAdjustedAltitude"),A(this,"adjustedAltitude"),A(this,"pathSegments",new Map),A(this,"pathsById",new Map),A(this,"pathsByMeshId",new Map),A(this,"connectionsPathMeshes",new lo),this.core=t,this.core.scene.add(this.connectionsPathMeshes),this.altitudeAdjustmentMap=new Map,this.adjustedAltitude=!!p3.adjustedAltitude,this.maxAdjustedAltitude=p3.maxAdjustedAltitude,this.minAdjustedAltitude=p3.minAdjustedAltitude}get altitudeAdjustment(){var t;let e=this.core.currentMap,{mapClass:i}=this.core.mapObjects.get(e),n=i.scale,r=Math.max(i.width,i.height)/1e3;if(!this.adjustedAltitude)return 0;if(this.altitudeAdjustmentMap.has(e))return this.altitudeAdjustmentMap.get(e);let o=this.maxAdjustedAltitude/n,s=this.minAdjustedAltitude/n,a=null==(t=i.polygons)?void 0:t.reduce(((t,{geometry:e,image:i,label:n})=>{var a;if(void 0!==(null==(a=null==e?void 0:e.scale)?void 0:a.z)){let a=e.scale.z*r,l=!1!==e.visible,u=!0===(null==i?void 0:i.visible)&&(null!=i.url||null!=i.original),h=!0===(null==n?void 0:n.visible)&&null!=n.text;l&&!u&&!h&&a<=o&&a>=s&&(t=Math.max(t,a))}return t}),0);return this.altitudeAdjustmentMap.set(e,a||0),a}getPathLength(t){let e=0;for(let i=0,n=t.length-1;i<n;++i){let n=t[i],r=t[i+1];n.path.includes(r)&&(e+=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)))}return e}drawPath(t,e={}){let i=tt(this,x2,cR).call(this,t,e),n=new oR(t,i,e),r=new d3(n);return tt(this,v2,lR).call(this,r,n),r}redrawPath(t,e={}){var i;let n=null==(i=this.pathsById.get(t.id))?void 0:i.internalPath;if(null==n)return void Le.warn("A path that does not exist cannot be redrawn.");(null==e||Object.keys(e).length<1)&&(e=n.options),n.pathSegments.forEach((t=>{tt(this,_2,fR).call(this,t)}));let r=tt(this,x2,cR).call(this,n.nodes,e);n.pathSegments=r,tt(this,y2,uR).call(this,t),tt(this,v2,lR).call(this,t,n)}removePath(t){let e;e="string"==typeof t?t:t.id;let i=this.pathsById.get(e);if(null==i)return;let n=i.internalPath.pathSegments;if(n)for(let t of n){let e=this.pathSegments.get(t.id);tt(this,_2,fR).call(this,e)}tt(this,y2,uR).call(this,i.path)}hideConnectionSegments(){this.connectionsPathMeshes.children.forEach((t=>{t.visible=!1})),this.core.tryRendering()}showConnectionSegments(){this.connectionsPathMeshes.children.forEach((t=>{t.visible=!0})),this.core.tryRendering()}removeAllPaths(){for(let{path:t}of this.pathsById.values())this.removePath(t);this.pathSegments.clear(),this.core.renderer.disposeOfRenderLists(),this.core.tryRendering()}};v2=new WeakSet,lR=u((function(t,e){for(let i of e.pathSegments)this.pathSegments.set(i.id,i),this.pathsByMeshId.set(i.object.uuid,{path:t,internalPath:e});this.pathsById.set(e.id,{path:t,internalPath:e})}),"#addPathToCache"),y2=new WeakSet,uR=u((function(t){let e=this.pathsById.get(t.id);if(null==e)return;let i=e.internalPath;for(let t of i.pathSegments)this.pathSegments.delete(t.id),this.pathsByMeshId.delete(t.object.uuid);this.pathsById.delete(i.id)}),"#removePathFromCache"),x2=new WeakSet,cR=u((function(t,e={}){let i={...p3,...e,connectionPathOptions:{...Pbe,...e.connectionPathOptions}};this.maxAdjustedAltitude=i.maxAdjustedAltitude,this.minAdjustedAltitude=i.minAdjustedAltitude,this.adjustedAltitude=!!i.adjustedAltitude;let n=e.pulsePauseDuration||Ibe;null==i.connectionPathOptions.farRadius&&null!=i.connectionPathOptions.nearRadius&&(i.connectionPathOptions.farRadius=i.connectionPathOptions.nearRadius*oZ),null==i.farRadius&&null!=i.nearRadius&&(i.farRadius=i.nearRadius*oZ);let r,o,s,a=0,l=t.reduce(((e,n,l)=>{let u=t[l+1],h=t[l-1];if(0===l)r=n.map.id;else if(n.map.id!=r||null==u){let c=null==u&&n.map.id===r?l:l-1;s=tt(this,m3,aZ).call(this,t.slice(a,c+1),r,{...i,animateDrawing:r===this.core.currentMap&&i.animateDrawing,drawDuration:r===this.core.currentMap?i.drawDuration:0}),a=l,e.push(s),null!=o&&(o.tween.chain(s.tween),o.pulseTween.chain(s.pulseTween),o.pulseTween.onComplete(o.resetPulse)),o=s,null!=h&&h.map.id!=n.map.id&&!0===i.drawConnectionSegments&&this.core.visibleMapsInCurrentScene.length>1&&this.core.stackedMaps.enabled&&(s=tt(this,g3,lZ).call(this,[h,n],i.connectionPathOptions),e.push(s),null!=o&&(o.tween.chain(s.tween),o.pulseTween.chain(s.pulseTween),o.pulseTween.onComplete(o.resetPulse)),o=s),r=n.map.id}return e}),[]),u=1,h=i.pulseIterations||1/0;if(l.length>0){let t=l[0],e=l[l.length-1];t.tween.start(),t.tween.onComplete((()=>{t.pulseTween.start()})),e.endPauseTween=new Iu.default.Tween({}).to({value:1},n).chain(t.pulseTween).onUpdate((()=>this.core.tryRendering(un.TWEEN))),h>1&&e.pulseTween.chain(e.endPauseTween),e.pulseTween.onComplete((()=>{u+1>=h?l.forEach((t=>{t.pulseTween.onComplete((()=>{})),t.pulseTween.stop(),t.endPauseTween&&t.endPauseTween.stop(),t.resetPulse(),this.core.tryRendering(un.ANIMATED)})):(e.resetPulse(),t.resetPulse()),u++}))}return this.core.tryRendering(un.ANIMATED),l}),"#drawAllPathSegments"),b2=new WeakSet,hR=u((function(t,e,i){let n=(i=i||{}).color||"#ff834c",r=i.pulseColor||"#000000",o=void 0!==i.nearRadius?i.nearRadius:1.8,s=void 0!==i.farRadius?i.farRadius:o,a=void 0!==i.nearZoom?i.nearZoom:375,l=void 0!==i.farZoom?i.farZoom:1e4,h=void 0!==i.drawDuration?i.drawDuration:1500,c=i.curve||Iu.default.Easing.Cubic.InOut,p=i.displayArrowsOnPath||!1,d=i.isConnectionPathSegment||!1,f=i.displayArrowsOnPath||i.flattenPath||!1,g=void 0===i.showPulse||i.showPulse,m=void 0===i.animateDrawing||i.animateDrawing,v=0;if(d)for(let e=1;e<t.length;++e){let i=t[e].x-t[e-1].x,n=t[e].z-t[e-1].z;v+=Math.sqrt(i*i+n*n)}else{t[0].z+=this.altitudeAdjustment;for(let e=1;e<t.length;++e){t[e].z+=this.altitudeAdjustment;let i=t[e].x-t[e-1].x,n=t[e].y-t[e-1].y,r=t[e].z-t[e-1].z;v+=Math.sqrt(i*i+n*n+r*r)}}let y=Cbe.load(Jc.get("arrow"));y.colorSpace=Lr;let x={vertexes:{type:"f",value:1},resolution:{type:"v2",value:this.core.resolution},cameraParameters:{type:"v2",value:this.core.cameraParameters},complete:{type:"f",value:m?0:1},color:{type:"c",value:new at(n)},pathLength:{type:"f",value:v},nearRadius:{type:"f",value:o},farRadius:{type:"f",value:s},nearZoom:{type:"f",value:a},farZoom:{type:"f",value:l},pulseColor:{type:"c",value:new at(r)},pulse:{type:"f",value:0},pulseLength:{type:"f",value:.075},pathIsVertical:{type:"b",value:d},arrowAnimationTimer:{type:"f",value:0},arrowTexture:{type:"t",value:y},displayArrowsOnPath:{type:"b",value:p},flattenFactor:{type:"f",value:f?.05:1},showPulse:{type:"b",value:g}},_=new Px(t);_.curveType="catmullrom",_.tension=0;let b=30*e.length,M=new rT(_,b,o,8,!1),E=new Float32Array(M.attributes.position.count);for(let t=e.length;t<E.length;t++)E[t]=t;M.setAttribute("vertexIndex",new rn(E,1));let w=new Float32Array(M.attributes.position.count),A=new rn(w,1);for(let t=0;t<=b;t++)for(let e=0;e<=8;++e)A.setX(9*t+e,t/b);M.setAttribute("pathDistance",A);let S=new Float32Array(3*M.attributes.normal.count),T=new rn(S,3);for(let t=0;t<b;t++){let e=M.tangents[t];for(let i=0;i<=8;++i)T.setXYZ(9*t+i,e.x,e.y,e.z)}M.setAttribute("pathTangent",T);let C=new Float32Array(3*M.attributes.normal.count),P=new rn(C,3);for(let t=0;t<b;t++){let e=M.tangents[t];var I,L,O;d?(I=e.x*e.y,L=e.y*e.y-1,O=e.z*e.y):(I=-e.x*e.z,L=-e.y*e.z,O=1-e.z*e.z);let i=Math.sqrt(I*I+L*L+O*O);0===i&&(i=1);let n=I/i,r=L/i,o=O/i;for(let e=0;e<=8;++e)P.setXYZ(9*t+e,n,r,o)}M.setAttribute("pathNormal",P);let N=new Xt({uniforms:x,vertexShader:AX,fragmentShader:CX});N.transparent=!0,N.alphaTest=.5,x.resolution.value.x=this.core.renderer.getBufferSize().width,x.resolution.value.y=this.core.renderer.getBufferSize().height,x.vertexes.value=E.length,x.arrowTexture.value.wrapS=wr,x.arrowTexture.value.wrapT=wr,x.arrowTexture.value.anisotropy=this.core.renderer.getMaxAnisotropy();let D=new Ft(M,N),R=u((()=>{this.core.tryRendering(un.ANIMATED)}),"tryRenderingAnimated"),q=new Iu.default.Tween(x.pulse).to({value:1},h).easing(c).onUpdate(R),B=new Iu.default.Tween(x.complete).to({value:1},h).easing(c).onUpdate(R),k=new Iu.default.Tween(x.arrowAnimationTimer).to({value:1},3e3).easing(Iu.default.Easing.Linear.None).repeat(1/0).onUpdate(R);p&&k.start();let F={id:D.id,nodes:e,mapId:i.mapId,object:D,tween:B,pulseTween:q,arrowAnimationTween:k,reset:function(){x.complete.value=0},resetPulse:function(){x.pulse.value=0}};return N.userData={layer:d?"vertical-path":"path"},F}),"#drawSegment"),m3=new WeakSet,aZ=u((function(t,e,i={color:"#ff834c",pulseColor:"white",pulseIterations:1/0,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1500,displayArrowsOnPath:!1}){let n=i.nearRadius||2,r=i.farRadius||i.nearRadius||2,o=e?this.core.venue.maps.find((t=>t.id===e)):this.core.venue.maps.find((t=>t.id===this.core.currentMap)),s=(null==o?void 0:o.scale)||1;if(n/=s,r/=s,null==this.core.currentMap)throw new Error("Unable to retrieve the current map");let a=e?Oi(e):this.core.currentMap,l=[],u=n/2;for(let e=0;e<t.length;e++){let i=t[e],n=new K(i.x-o.width/2,-i.y+o.height/2,u);l.push(n)}let h=u-.1;l.push(l[l.length-1].clone().setZ(h)),l.unshift(l[0].clone().setZ(h));let c=tt(this,b2,hR).call(this,l,t,{...i,nearRadius:n,farRadius:r,mapId:a});c.object.name="path",c.object.layers.set($i.ANIMATED);let p=this.core.mapObjects.get(a);return this.core.visibleMapObjectsInCurrentScene.includes(p)||(c.object.visible=!1),p.add(c.object),c}),"#drawPathSegment"),g3=new WeakSet,lZ=u((function(t,e={color:"#7dd322",pulseColor:"#ffffff",pulseIterations:1/0,nearRadius:1.8,nearZoom:375,farZoom:1e4,drawDuration:1500,curve:Iu.default.Easing.Cubic.InOut,displayArrowsOnPath:!1}){let i=e.nearRadius||2,n=e.farRadius||e.nearRadius||2,r=this.core.referenceMap,o=(null==r?void 0:r.scale)||1;i/=o,n/=o;let s=aY(this.core.convertTo3DMapPosition(t[0]),this.core.convertTo3DMapPosition(t[1]),Abe),a=tt(this,b2,hR).call(this,s,t,{...e,nearRadius:i,farRadius:n,mapId:this.core.referenceMap.id,isConnectionPathSegment:!0}),l=(new Yt).setFromObject(a.object),u=new K;return l.getCenter(u),a.object.layers.set($i.ANIMATED),a.object.geometry.center(),a.object.position.copy(u),this.core.billboardManager.add(a.object),this.connectionsPathMeshes.add(a.object),a}),"#drawConnectionPathSegment"),_2=new WeakSet,fR=u((function(t){t&&(this.core.scene.remove(t.object),"function"==typeof t.object.destroy&&t.object.destroy(),t.pulseTween.stop(),t.endPauseTween&&t.endPauseTween.stop(),t.tween.stop(),t.arrowAnimationTween.stop(),t.pulseTween=void 0,t.tween=void 0,t.arrowAnimationTween=void 0,this.pathSegments.delete(t.id),this.connectionsPathMeshes.remove(t.object),this.core.billboardManager.remove(t.object))}),"#removePathSegment"),u(gR,"PathsController");var aR=gR,pR=aR;E(),E(),E();var Obe=u((({image:t})=>!(null==t||!t.visible)&&!(!t.url&&!t.original)),"imageVisible"),v3=u(((t,e)=>Obe(t)&&e[t.id+"_image"]),"imageVisibleAndRendered");function uZ(t,e,i,n){let r=[],o=(null==i?void 0:i.locations)||t.locations;for(let s of t.polygons){let a,[l]=s.entrances;if(l&&(null==n||!n.id||n.id===l.map.id)&&s.geometry.visible&&(a=Bh(s,t))){let t=(null==i?void 0:i.createDespiteImage)||a.showLabelWhenImagePresent||a.showSmartLabelWhenImagePresent;if(v3(s,e)&&!t||!o.includes(a))continue;let n=(null==i?void 0:i.excludeTypes)||[];if(n.length>0&&n.includes(a.type))continue;let u=Lbe(s,l,a,i||{});null!=u&&r.push(u)}}return r}function Lbe(t,e,i,n){var r,o,s,a,l;let u="test"===B.env.NODE_ENV?Xo.testId:Math.random();Xo.testId++;let h,c,p=i.name,d=i.shortName;return i.states&&i.states.length>0&&(h=(null==(r=i.state)?void 0:r.id)&&(null==(s=null==n?void 0:n.translationMap)?void 0:s[null==(o=i.state)?void 0:o.id])||(null==(a=i.state)?void 0:a.name)||null),n.groupRankingByCategory&&(c=null==t?void 0:t.categoryRank),{interactive:n.interactive,polygon:t,rank:c||(null==(l=t.rank)?void 0:l.score)||u,text:null==h?d||p:(d||p)+" (".concat(h,")"),appearance:n.appearance,createDespiteImage:n.createDespiteImage,mapId:e.map.id,position:{nodeOrCoordinate:e}}}u(uZ,"createLabelObjects"),u(Lbe,"createLabelOptionsObject");var xR=Bt(Kx());E();var yR=class extends Go{constructor(){var t;super(),A(this,"_recalculateDebounced"),A(this,"totalZoomLevel",0),A(this,"fontZoomLevel",0),A(this,"pageZoomLevel",0),this._recalculateDebounced=Da(this.recalculate,100),window.addEventListener("resize",(()=>{this._recalculateDebounced()})),null==(t=window.visualViewport)||t.addEventListener("resize",(()=>{this._recalculateDebounced()})),this.recalculate()}detectSafari(){let{userAgent:t}=navigator;return t.indexOf("Safari")>-1&&-1===t.indexOf("Chrome")}recalculate(){var t;let e=1;this.detectSafari()&&(e=Math.max(1,window.outerWidth/window.innerWidth)),this.fontZoomLevel=window.devicePixelRatio*e,this.pageZoomLevel=(null==(t=window.visualViewport)?void 0:t.scale)||1,this.totalZoomLevel=this.fontZoomLevel*this.pageZoomLevel,this.publish("FONT_ZOOM_CHANGED",this.fontZoomLevel),this.publish("PAGE_ZOOM_CHANGED",this.pageZoomLevel),this.publish("TOTAL_ZOOM_CHANGED",this.totalZoomLevel)}};u(yR,"ZoomListener");var Ou,vR=yR,cZ=new vR,w2=u((t=>{let e=t.toJSON();return 5===Object.keys(e).length&&"lat"in e&&"lon"in e&&"map"in e&&"x"in e&&"y"in e}),"isMappedinCoordinate"),y3="Adding or removing individual labels after calling labelAllLocations() may cause unexpected behaviour. We recommend adding all labels individually if more specific control is desired. https://developer.mappedin.com/web-sdk-api/v5/latest/classes/floatinglabels#add",CR=class{constructor(t){te(this,Ou,void 0),ce(this,Ou,t)}get id(){return M(this,Ou).id}get text(){return M(this,Ou).options.text}get appearance(){return M(this,Ou).appearance}get nodeOrCoordinate(){return M(this,Ou).options.position.nodeOrCoordinate}get rank(){return M(this,Ou).rank}__updateInstance(t){ce(this,Ou,t)}toJSON(){return{id:this.id,text:this.text,appearance:this.appearance,nodeOrCoordinate:this.nodeOrCoordinate.toJSON(),rank:this.rank}}};Ou=new WeakMap,u(CR,"FloatingLabel");var Hl,uf,M2,E2,_R,T2,wR,jg,x3,E3,hZ,T3,fZ,Wg,b3,S2,MR,Yg,_3,S3,pZ,A3,dZ,A2,ER,C3,mZ,P3,gZ,C2,TR,I3,vZ,Xg,w3,O3,yZ,P2,SR,L3,xZ,M3=CR,PR=class{constructor(t){te(this,E2),te(this,T2),te(this,jg),te(this,E3),te(this,T3),te(this,Wg),te(this,S2),te(this,Yg),te(this,S3),te(this,A3),te(this,A2),te(this,C3),te(this,P3),te(this,C2),te(this,I3),te(this,Xg),te(this,O3),te(this,P2),te(this,L3),A(this,"core"),te(this,Hl,!1),A(this,"internalFloatingLabels",{}),A(this,"internalFloatingLabelsByNodeOrCoordinate",new WeakMap),A(this,"floatingLabels",{}),te(this,uf,{}),te(this,M2,{}),this.core=t,t.on(8,(()=>{t.visibleMapsInCurrentScene.forEach((t=>{!M(this,uf)[t.id]&&M(this,Hl)&&tt(this,E2,_R).call(this,t)}))})),cZ.on("FONT_ZOOM_CHANGED",(()=>{tt(this,T3,fZ).call(this)}))}addLabel(t,e,i){if(w2(t)){let{label:n}=tt(this,T2,wR).call(this,t,e,i);return n}if(null!=this.core.venue.getCollectionItemById("nodes",t.id)){let{label:n}=tt(this,jg,x3).call(this,t,e,i);return n}return tt(this,E3,hZ).call(this,t,e,i).map((t=>t.label))}removeLabel(t,e=!1){if(w2(t))return tt(this,S2,MR).call(this,t,e);null!=this.core.venue.getCollectionItemById("nodes",t.id)?tt(this,Yg,_3).call(this,t,e):tt(this,S3,pZ).call(this,t,e),delete M(this,uf)[t.map.id]}setPriority(t,e){if(w2(t))return tt(this,A3,dZ).call(this,t,e);null!=this.core.venue.getCollectionItemById("nodes",t.id)?tt(this,A2,ER).call(this,t,e):tt(this,C3,mZ).call(this,t,e)}resetPriority(t){if(w2(t))return tt(this,P3,gZ).call(this,t);null!=this.core.venue.getCollectionItemById("nodes",t.id)?tt(this,C2,TR).call(this,t):tt(this,I3,vZ).call(this,t)}removeAllLabels(){ce(this,Hl,!1);for(let t in this.internalFloatingLabels){let e=this.internalFloatingLabels[t].options.position.nodeOrCoordinate;e instanceof Fs?tt(this,Yg,_3).call(this,e,!0):tt(this,S2,MR).call(this,e,!0)}Array.from(this.core.mapObjects.values()).forEach((t=>{t.labels.clear()})),this.internalFloatingLabels={},this.floatingLabels={},this.internalFloatingLabelsByNodeOrCoordinate=new WeakMap,ce(this,uf,{}),this.core.smartCollisionEngine.debouncedUpdate(),this.core.renderer.disposeOfRenderLists(),this.core.tryRendering()}setAppearance(t,e){if(w2(t))return tt(this,O3,yZ).call(this,t,e);let i=null!=this.core.venue.getCollectionItemById("nodes",t.id);i&&tt(this,P2,SR).call(this,t,e);let n=null!=this.core.venue.getCollectionItemById("polygons",t.id);n&&tt(this,L3,xZ).call(this,t,e),!i&&!n&&Le.warn("No label found for target",t),this.core.tryRendering()}labelAllLocations(t){ce(this,Hl,!0),null!=t&&ce(this,M2,t);let e=[];return this.core.visibleMapsInCurrentScene.forEach((t=>{!M(this,uf)[t.id]&&M(this,Hl)&&e.push(...tt(this,E2,_R).call(this,t))})),e.map((t=>new M3(t)))}};Hl=new WeakMap,uf=new WeakMap,M2=new WeakMap,E2=new WeakSet,_R=u((function(t){let e=uZ(this.core.venue,this.core.polygonMeshesById,M(this,M2),t);if(null==e)return[];let i=e.reduce(((t,e)=>{let{internalLabel:i}=tt(this,Xg,w3).call(this,e,!0);return i&&t.push(i),t}),[]);return this.core.taskScheduler.scheduleTask(new Hi({name:"addFloatingLabel",callback:()=>{i.forEach((t=>{t.enable(!1)})),M(this,uf)[t.id]=!0,this.core.determineNewLabelSize(),this.core.smartCollisionEngine.debouncedUpdate()}})),i}),"#processLabelsForMap"),T2=new WeakSet,wR=u((function(t,e,i){M(this,Hl)&&Le.warn(y3);let n="test"===B.env.NODE_ENV?Xo.testId:Math.random();Xo.testId++;let r={polygon:void 0,rank:n,text:e,appearance:null==i?void 0:i.appearance,createDespiteImage:!0,position:{nodeOrCoordinate:t},mapId:t.map.id,...i||{}};return tt(this,Xg,w3).call(this,r)}),"#labelCoordinate"),jg=new WeakSet,x3=u((function(t,e,i){var n,r,o;M(this,Hl)&&Le.warn(y3);let s,a="test"===B.env.NODE_ENV?Xo.testId:Math.random();Xo.testId++,null!=i&&i.groupRankingByCategory&&(s=null==(n=t.polygon)?void 0:n.categoryRank);let l={polygon:t.polygon,rank:s||(null==(o=null==(r=t.polygon)?void 0:r.rank)?void 0:o.score)||a,position:{nodeOrCoordinate:t},text:e,appearance:null==i?void 0:i.appearance,createDespiteImage:!0,mapId:t.map.id,...i||{}};return tt(this,Xg,w3).call(this,l)}),"#labelNode"),E3=new WeakSet,hZ=u((function(t,e,i){var n,r;let o=[];for(let s of t.entrances){if(null!=(null==(n=t.rank)?void 0:n.node)&&(null==(r=t.rank)?void 0:r.node)!=s.id)continue;let a=tt(this,jg,x3).call(this,s,e,i);a&&o.push(a)}return 0===o.length?(Le.warn("No entrances found on this polygon. Skipping."),[]):o}),"#labelPolygon"),T3=new WeakSet,fZ=u((function(){Object.values(this.internalFloatingLabels).forEach((t=>{t.invalidate()})),this.core.smartCollisionEngine.debouncedUpdate()}),"#invalidateAll"),Wg=new WeakSet,b3=u((function(t,e=!0){this.core.smartCollisionEngine.remove(t.id),delete this.internalFloatingLabels[t.id],this.internalFloatingLabelsByNodeOrCoordinate.delete(t.options.position.nodeOrCoordinate),e&&delete this.floatingLabels[t.id]}),"#removeLabelInstance"),S2=new WeakSet,MR=u((function(t,e=!1){M(this,Hl)&&Le.warn(y3);let i=this.internalFloatingLabelsByNodeOrCoordinate.get(t);i?(tt(this,Wg,b3).call(this,i),e||this.core.smartCollisionEngine.debouncedUpdate()):Le.warn("No label found for coordinate",t)}),"#removeLabelCoordinate"),Yg=new WeakSet,_3=u((function(t,e=!1){M(this,Hl)&&Le.warn(y3);let i=this.internalFloatingLabelsByNodeOrCoordinate.get(t);i?(tt(this,Wg,b3).call(this,i),e||this.core.smartCollisionEngine.debouncedUpdate()):Le.warn("No label found for node",t)}),"#removeLabelNode"),S3=new WeakSet,pZ=u((function(t,e=!1){t.entrances.forEach((t=>tt(this,Yg,_3).call(this,t,e)))}),"#removeLabelPolygon"),A3=new WeakSet,dZ=u((function(t,e){let i=this.internalFloatingLabelsByNodeOrCoordinate.get(t);null!=i&&i.setPriority(e)}),"#setPriorityCoordinate"),A2=new WeakSet,ER=u((function(t,e){let i=this.internalFloatingLabelsByNodeOrCoordinate.get(t);null!=i&&i.setPriority(e)}),"#setPriorityNode"),C3=new WeakSet,mZ=u((function(t,e){t.entrances.forEach((t=>tt(this,A2,ER).call(this,t,e)))}),"#setPriorityPolygon"),P3=new WeakSet,gZ=u((function(t){let e=this.internalFloatingLabelsByNodeOrCoordinate.get(t);null!=e&&e.resetPriority()}),"#resetPriorityCoordinate"),C2=new WeakSet,TR=u((function(t){let e=this.internalFloatingLabelsByNodeOrCoordinate.get(t);null!=e&&e.resetPriority()}),"#resetPriorityNode"),I3=new WeakSet,vZ=u((function(t){t.entrances.forEach((t=>tt(this,C2,TR).call(this,t)))}),"#resetPriorityPolygon"),Xg=new WeakSet,w3=u((function(t,e=!1){var i,n;let r=this.internalFloatingLabelsByNodeOrCoordinate.get(t.position.nodeOrCoordinate);if(null!=r){let e=null!=t.id&&r.id===t.id;tt(this,Wg,b3).call(this,r,!e)}let{polygon:o,mapId:s}=t,a=this.core.mapObjects.get(s),l=null!=(i=t.polygonHeight)?i:0;null!=o&&null!=t.polygonHeight&&(l=o.geometry.scale.z*Math.max(a.mapClass.width,a.mapClass.height)/1e3);let u=new Xo({...t,polygonHeight:l,position:{nodeOrCoordinate:t.position.nodeOrCoordinate,height:l}},this.core);this.internalFloatingLabels[u.id]=u,this.internalFloatingLabelsByNodeOrCoordinate.set(t.position.nodeOrCoordinate,u),a.labels.add(u),this.core.smartCollisionEngine.add(u.id,u);let h=this.floatingLabels[null!=(n=t.id)?n:""];return null==h?h=new M3(u):h.__updateInstance(u),this.floatingLabels[h.id]=h,this.core.taskScheduler.scheduleUpdate(new xs({name:"addFloatingLabel",ordering:Na.BEFORE_CAMERA,callback:()=>{e||(u.enable(!1),this.core.determineNewLabelSize(),this.core.smartCollisionEngine.debouncedUpdate())}})),e||this.core.tryRendering(),{internalLabel:u,label:h}}),"#renderLabel"),O3=new WeakSet,yZ=u((function(t,e){var i;let n=this.internalFloatingLabelsByNodeOrCoordinate.get(t);if(!n)return void Le.warn("No label found for coordinate",t);let r={id:n.id,appearance:(0,xR.default)(e,n.appearance),interactive:n.options.interactive};tt(this,T2,wR).call(this,t,null!=(i=n.options.text)?i:"",r)}),"#setCoordinateAppearance"),P2=new WeakSet,SR=u((function(t,e){var i;let n=this.internalFloatingLabelsByNodeOrCoordinate.get(t);if(!n)return void Le.warn("No label found for this node. Skipping...");let r={id:n.id,appearance:(0,xR.default)(e,n.appearance),interactive:n.options.interactive};tt(this,jg,x3).call(this,t,null!=(i=n.options.text)?i:"",r)}),"#setNodeAppearance"),L3=new WeakSet,xZ=u((function(t,e){for(let i of t.entrances)tt(this,P2,SR).call(this,i,e)}),"#setPolygonAppearance"),u(PR,"FloatingLabelsController");var bR=PR,AR=bR;function bZ(t,e,i,n){let r=(null==n?void 0:n.excludeTypes)||[],o=null==n?void 0:n.sortFunction,s=((null==n?void 0:n.locations)||[]).filter((t=>-1===r.indexOf(t.type))),a=s;null!=o&&(a=s.sort(o));let l={};for(let r=0,o=a.length;r<o;++r){let o=a[r],s=o.polygons;for(let r=0,a=s.length;r<a;++r){let a=s[r];if(v3(a,t.polygonMeshesById)||!a.geometry.visible)continue;let u=Dbe(s[r],o,i,t.venue,e,n);null!=u&&(l[a.id]=u)}}return Object.values(l)}function Dbe(t,e,i,n,r,o){var s,a,l;let u=null==o?void 0:o.sortFunction,h=(null==o?void 0:o.translationMap)||{},c=i[t.id];if(!0===c)return null;{let p=t.canvasBounds;i[t.id]=!0;let d=r,f=0;if(p){let t=p.x-d.width/2,e=-p.y+d.height/2;f=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))}let g=e;if(u?i[t.id]=!0:!1===c?(g=Bh(t,n),i[t.id]=!0):i[t.id]=!1,null==g)return null;let m=g.name,v=g.shortName,y=t.rank,x="";return g.states&&g.states.length>0&&(x=(null==(s=g.state)?void 0:s.id)&&h[null==(a=g.state)?void 0:a.id]||(null==(l=g.state)?void 0:l.name)||""),{...null==o?void 0:o.appearance,polygon:t,text:m,shortText:v,stateText:x,distance:f,rank:y,createDispiteImage:g.showLabelWhenImagePresent}}}E(),E(),u(bZ,"createLabelObjects"),u(Dbe,"createLabelOptionsObject");var cf,hf,$c,I2,OR,O2,LR,wZ=Bt(Kx()),Nbe="Sans-Serif",Rbe=new Gp,Bbe={},_Z="Adding or removing individual labels after calling labelAllLocations() may cause unexpected behaviour. We recommend adding all labels individually if more specific control is desired. https://developer.mappedin.com/web-sdk-api/v5/latest/classes/flatlabels#add",NR=class{constructor(t){te(this,I2),te(this,O2),A(this,"core"),te(this,cf,!1),te(this,hf,{}),te(this,$c,{}),A(this,"flatLabels",{}),A(this,"labeledPolygons",{}),this.core=t,t.on(8,(()=>{t.visibleMapsInCurrentScene.forEach((t=>{!M(this,hf)[t.id]&&M(this,cf)&&tt(this,I2,OR).call(this,t)}))}))}labelAllLocations(t){this.removeAllLabels(),ce(this,cf,!0),null!=t&&ce(this,$c,{...t,...null==t?void 0:t.appearance});let e=[];return this.core.visibleMapsInCurrentScene.forEach((t=>{M(this,hf)[t.id]||e.push(...tt(this,I2,OR).call(this,t))})),e}labelPolygon(t,e,i){M(this,cf)&&Le.warn(_Z);let n={polygon:"string"==typeof t?this.core.venue.getCollectionItemById("polygons",t):t,showLabelWhenImagePresent:!0,text:e,...i,...null==i?void 0:i.appearance};return tt(this,O2,LR).call(this,n)}removeLabel(t){M(this,cf)&&Le.warn(_Z);let e="string"==typeof t?this.core.venue.getCollectionItemById("polygons",t):t;if(!this.core.textLabelsByPolygonId[e.id])return;let i=this.core.textLabelsByPolygonId[e.id];i.removeSelf();let{textObjects:n}=this.core.mapObjects.get(i.map.mapClass.id);n.splice(n.indexOf(i),1),delete this.core.textLabelsByPolygonId[e.id],delete this.flatLabels[e.id],delete M(this,hf)[e.map.id],this.core.tryRendering()}setAppearance(t,e){let i=this.flatLabels[t.id];if(i){if(1===Object.keys(e).length&&null!=e.color)i.baseColor=e.color,i.setColor(e.color);else{let n=i.fullText;this.removeLabel(t),this.labelPolygon(t,n,{appearance:(0,wZ.default)(e,{height:i.height,margin:i.margin/i.mapScale,color:i.color,hoverColor:i.hoverColor,fontSize:i.fontSize/i.mapScale,font:i.font,scaleMin:i.scaleMin,scaleStep:i.scaleStep})})}this.core.tryRendering()}}setHoverColorForAll(t){M(this,$c).appearance||(M(this,$c).appearance={}),M(this,$c).appearance.hoverColor=t;for(let e in this.flatLabels)this.flatLabels.hasOwnProperty(e)&&this.flatLabels[e].setHoverColor(t)}removeAllLabels(){ce(this,cf,!1),Array.from(this.core.mapObjects.values()).forEach((t=>{t.textObjects.forEach((t=>t.removeSelf())),t.labels.clear(),t.textObjects=[]})),this.core.textLabelsByPolygonId={},this.flatLabels={},this.labeledPolygons={},ce(this,hf,{}),this.core.tryRendering()}};cf=new WeakMap,hf=new WeakMap,$c=new WeakMap,I2=new WeakSet,OR=u((function(t){var e;let i=[],n=bZ(this.core,t,this.labeledPolygons,{...M(this,$c),locations:(null==(e=M(this,$c))?void 0:e.locations)||this.core.venue.getCollectionItemById("maps",t.id).locations});for(let t=0,e=n.length;t<e;++t){let e=n[t];i.push(tt(this,O2,LR).call(this,e))}return M(this,hf)[t.id]=!0,i}),"#processLabelsForMap"),O2=new WeakSet,LR=u((function(t){let e=this.core.mapObjects.get(t.polygon.map.id),i=new jx(t,this.core.venue,e,Nbe,this.core.polygonMeshesById,this.core.textLabelsByPolygonId,Bbe,this.core,Rbe);return t.polygon&&this.core.textLabelsByPolygonId[t.polygon.id]&&this.removeLabel(t.polygon),this.flatLabels[t.polygon.id]=i,e.addPendingLowPriorityTask("addFlatLabel",(()=>{i.create(),this.core.tryRendering()})),this.core.textLabelsByPolygonId[t.polygon.id]=i,i}),"#renderLabel"),u(NR,"FlatLabelsController");var IR=NR,DR=IR;function kbe(t){return"string"!=typeof t}function MZ(t,e){return t.polygonMeshesById[Oi(e)]}E(),u(kbe,"isMIPolygon"),u(MZ,"getPolygonMesh");var sn,D3,EZ,L2,BR,N3,TZ,D2,kR,FR=class{constructor(t){te(this,D3),te(this,L2),te(this,N3),te(this,D2),te(this,sn,void 0),ce(this,sn,t)}async setPolygonColor(...t){var e;let[i]=t;if(void 0===MZ(M(this,sn),i)){let n=La(i,M(this,sn).venue.polygons);return void 0!==n&&null!==n.map.id&&null!=(e=M(this,sn).mapObjects.get(n.map.id))&&e.object?void await tt(this,D3,EZ).call(this,...t):void Le.error("Cannot set color of polygon "+(null==n?void 0:n.id)+", could be bad polygon or data mismatch.")}tt(this,L2,BR).call(this,...t)}clearPolygonColor(t){var e;let i=t;"string"==typeof t&&(i=M(this,sn).venue.getCollectionItemById("polygons",t));let n=M(this,sn).polygonMeshesById[i.id];n&&(n._MIOriginalMaterial&&((n.material.length?n.material:[n.material]).forEach((t=>ef(t))),n.material=n._MIOriginalMaterial,delete n._MIOriginalMaterial),delete M(this,sn).highlightedPolygons[i.id],"SINGLE_GEOMETRY"===(null==(e=M(this,sn).loadOptions)?void 0:e.mapRenderStrategy)&&(n.visible=!1),M(this,sn).tryRendering())}clearAllPolygonColors(){let t=Object.keys(M(this,sn).highlightedPolygons);for(let e=0,i=t.length;e<i;++e){let i=t[e];this.clearPolygonColor(M(this,sn).highlightedPolygons[i])}M(this,sn).highlightedPolygons={},M(this,sn).tryRendering(),M(this,sn).renderer.disposeOfRenderLists()}setPolygonOutlineColor(t){M(this,sn).renderer.implementation.effectComposer.setPolygonOutlineColor(t),M(this,sn).tryRendering()}addPolygonOutline(t){if(void 0===M(this,sn).polygonMeshesById[t.id]){let e=La(t,M(this,sn).venue.polygons);return void 0!==e&&null!==e.map.id&&null!==M(this,sn).mapObjects.get(e.map.id).object?void tt(this,N3,TZ).call(this,e):void Le.error("Cannot outline the polygon "+(null==e?void 0:e.id)+", could be bad polygon or data mismatch.")}tt(this,D2,kR).call(this,t)}removePolygonOutline(t){let e=M(this,sn).polygonMeshesById[t.id];M(this,sn).outlinedPolygons.delete(t.id),M(this,sn).renderer.implementation.effectComposer.removeSelectionForOutline(e),M(this,sn).tryRendering()}removeAllPolygonOutlines(){for(let t of M(this,sn).outlinedPolygons.values())this.removePolygonOutline(t)}};sn=new WeakMap,D3=new WeakSet,EZ=u((async function(...t){var e;let[i]=t,n=kbe(i)?i.map.id:null==(e=La(i,M(this,sn).venue.polygons))?void 0:e.map.id;if(!n)return void Le.error("Cannot set color of polygon ".concat(Oi(i)," due to missing mapId for polygon"));let r=M(this,sn).mapObjects.get(n);r?(await r.load(),tt(this,L2,BR).call(this,...t)):Le.error("Cannot set color of polygon ".concat(Oi(i)," due to map object is missing ").concat(n))}),"#setPolygonColorLater"),L2=new WeakSet,BR=u((function(...t){var e;let[i,n,{highlighted:r=!0,visible:o=!0}={}]=t,s=MZ(M(this,sn),i);if(null!=s){if(r){let t=Oi(i);M(this,sn).highlightedPolygons[t]=t}s._MIOriginalMaterial||(s._MIOriginalMaterial=s.material.length?[...s.material]:s.material);let t=(s.material.length?s.material:[s.material]).map((t=>{let e=t.clone();return e.color.set(n||"#4ca1fc"),e}));1===t.length?s.material=t[0]:s.material=t,"SINGLE_GEOMETRY"===(null==(e=M(this,sn).loadOptions)?void 0:e.mapRenderStrategy)&&(s.visible=o),M(this,sn).tryRendering()}else Le.error("Cannot set color of polygon "+Oi(i)+", could be bad polygon or data mismatch.")}),"#setPolygonColorNow"),N3=new WeakSet,TZ=u((function(t){M(this,sn).mapObjects.get(t.map.id).load().then((()=>{M(this,sn).mapObjects.get(t.map.id).elements&&M(this,sn).mapObjects.get(t.map.id).loadPolygonNow(t.id),tt(this,D2,kR).call(this,t)}))}),"#addPolygonOutlineLater"),D2=new WeakSet,kR=u((function(t){var e;let i=M(this,sn).polygonMeshesById[t.id];null!=i?(M(this,sn).outlinedPolygons.set(t.id,t),M(this,sn).renderer.implementation.effectComposer.addSelectionForOutline(i),"SINGLE_GEOMETRY"===(null==(e=M(this,sn).loadOptions)?void 0:e.mapRenderStrategy)&&(i.visible=!0),M(this,sn).tryRendering()):Le.error("Cannot outline the polygon "+t.id+", could be bad polygon or data mismatch.")}),"#addPolygonOutlineNow"),u(FR,"PolygonColorsController");var RR=FR,qR=RR;E();var Lu,GR=class{constructor(t){te(this,Lu,void 0),ce(this,Lu,t)}setPolygonHoverColor(t,e){let i=Oi(t);i&&(M(this,Lu).polygonHoverColorsById[i]=new at(e))}clearPolygonHoverColor(t){let e=Oi(t);e&&(delete M(this,Lu).polygonHoverColorsById[e],M(this,Lu).eventSystem.currentHover===e&&M(this,Lu).eventSystem.onPolygonHoverOver(e))}clearAllPolygonHoverColors(){for(let t in M(this,Lu).polygonHoverColorsById)this.clearPolygonHoverColor(t);M(this,Lu).polygonHoverColorsById={}}};Lu=new WeakMap,u(GR,"PolygonHoverColorsController");var UR=GR,zR=UR;E();var ff,jR=class{constructor(t){te(this,ff,void 0),ce(this,ff,t)}addInteractivePolygon(t){let e=Oi(t);M(this,ff).interactivePolygons[e]=!0}addInteractivePolygonsForAllLocations(t){t||(t={});let e=t.excludeTypes||[],i=(t.locations||M(this,ff).venue.locations.slice()).filter((t=>!e.includes(t.type))),n={};for(let t=0,e=i.length;t<e;++t){let e=i[t].polygons;for(let t=0,i=e.length;t<i;++t){let i=e[t];n[i.id]||(n[i.id]=!0,this.addInteractivePolygon(i))}}}removeInteractivePolygon(t){let e=Oi(t);delete M(this,ff).interactivePolygons[e]}removeAllInteractivePolygons(){for(let t in M(this,ff).interactivePolygons)this.removeInteractivePolygon(t)}};ff=new WeakMap,u(jR,"PolygonInteractionController");var VR=jR,HR=VR;E();var ma,XR=class{constructor(t){te(this,ma,void 0),ce(this,ma,t)}createTooltip(t,e,i){return this.createTooltipInternal({nodeOrCoordinate:t,contentHtml:e,options:i})}createCustomTooltip(t,e,i,n){return this.createTooltipInternal({nodeOrCoordinate:t,html:e,selector:i,options:n})}createTooltipInternal({nodeOrCoordinate:t,html:e,contentHtml:i,selector:n,options:r}){let o=t.map.id,s=M(this,ma).mapObjects.get(o),a=0;if(t instanceof Fs){let e=t.polygon;null!=e&&(a=e.geometry.scale.z*Math.max(s.mapClass.width,s.mapClass.height)/1e3)}let l=new Wp({...r,map:o,position:{nodeOrCoordinate:t,height:a},html:e,contentHtml:i,selector:n});return M(this,ma).smartCollisionEngine.add(l.id,l),s.tooltips.add(l),M(this,ma).taskScheduler.scheduleTask(new Hi({name:"addTooltip",callback:()=>{l.enable(),M(this,ma).smartCollisionEngine.debouncedUpdate()}})),M(this,ma).tryRendering(),l}removeTooltip(t){M(this,ma).smartCollisionEngine.remove("string"==typeof t?t:t.id),M(this,ma).tryRendering()}removeAllTooltips(){Array.from(M(this,ma).mapObjects.values()).forEach((t=>{t.tooltips.forEach((t=>{M(this,ma).smartCollisionEngine.remove(t.id)}))})),M(this,ma).tryRendering()}};ma=new WeakMap,u(XR,"TooltipsController");var WR=XR,YR=WR;E();var cl,pf,KR=class{constructor(t){te(this,cl,void 0),te(this,pf,void 0),ce(this,cl,t),ce(this,pf,new JR({scene:M(this,cl).scene,tryRendering:()=>M(this,cl).tryRendering(),getPolygonMeshFromId:t=>M(this,cl).polygonMeshesById[t]}))}updateClosedStateForPolygon(t){if(null==t||null==t.polygon)return;let e,i=Oi(t.polygon);if("string"!=typeof i)return void Le.error("Invalid or no polygon provided. Expecting a MappedinPolygon or a string id. Received: ".concat(t.polygon," of type ").concat(typeof t.polygon));if(null!=t.closed)e=!!t.closed;else{if(null==t.open)return;e=!t.open}let n=La(i,M(this,cl).venue.polygons),r=(null==n?void 0:n.map.id)||M(this,cl).currentMap;r?M(this,cl).mapObjects.get(r).addPendingMapLoadedTask("Set closed status of polygon ".concat(i," to ").concat(e),(()=>{e?M(this,pf).markPolygonAsClosed(i):M(this,pf).markPolygonAsOpen(i)})):Le.error("Update closed state for polygon failed due to missing active map")}openAllPolygons(){[...M(this,cl).mapObjects.values()].reduce(((t,e)=>(t.set(e,M(this,cl).venue.polygons.filter((t=>t.map===e.mapClass))),t)),new Map).forEach(((t,e)=>{e.addPendingMapLoadedTask("Open all polygons belonging to map ".concat(e.id),(()=>t.forEach((t=>M(this,pf).markPolygonAsOpen(t.id)))))}))}destroy(){M(this,pf).dispose()}};cl=new WeakMap,pf=new WeakMap,u(KR,"PolygonStatesController");var ZR=KR,QR=ZR;E();var Qo,t8=class{constructor(t){te(this,Qo,void 0),ce(this,Qo,t)}enableImageFlippingForAllLocations(t){M(this,Qo).imageFlippingEnabled=!0,t||(t={});let e=t.excludeTypes||[],i=(t.locations||M(this,Qo).venue.locations.slice()).filter((function(t){return-1===e.indexOf(t.type)})),n={};for(let t=0,e=i.length;t<e;++t){let e=i[t].polygons;for(let t=0,i=e.length;t<i;++t){let i=e[t];n[i.id]||(n[i.id]=!0,this.enableImageFlippingForPolygon(i))}}}enableImageFlippingForPolygon(t){let e=M(this,Qo).mapObjects.get(t.map.id),i=0,n=M(this,Qo).venue.maps.find((t=>t.id===M(this,Qo).currentMap)).perspectiveId;n&&t&&t.perspectives&&t.perspectives[n]&&t.perspectives[n].image&&t.perspectives[n].image.rotation&&!isNaN(t.perspectives[n].image.rotation.z)?i=t.perspectives[n].image.rotation.z*(Math.PI/180):t&&t.image&&t.image.rotation&&!isNaN(t.image.rotation.z)&&(i=t.image.rotation.z*(Math.PI/180)),M(this,Qo).imageFlippingCache[t.map.id]=M(this,Qo).imageFlippingCache[t.map.id]||[],M(this,Qo).imageFlippingCache[t.map.id].push([t.id,i]),e.mapClass.id===M(this,Qo).currentMap&&e.load().then((()=>{e.enableImageFlipping(t.id,i)}))}disableImageFlippingForAllPolygons(){let t=Object.keys(M(this,Qo).mapObjects);for(let e=0,i=t.length;e<i;e++){let i=t[e];M(this,Qo).mapObjects.get(i).disableAllImageFlipping()}}};Qo=new WeakMap,u(t8,"PolygonImagesController");var $R=t8,e8=$R;E();var eh,N2,i8=class{constructor(t){te(this,eh,void 0),te(this,N2,new Set),ce(this,eh,t)}createThreeJSMarker(t){let e=M(this,eh).currentMap;null!=t.mapOrMapId&&(e="string"==typeof t.mapOrMapId?t.mapOrMapId:t.mapOrMapId.id);let i=M(this,eh).mapObjects.get(e).addThreeJSMarker(t);return M(this,N2).add(i),M(this,eh).tryRendering(un.ANIMATED),i}removeThreeJSMarker(t){if(null==t._mapId)return!1;let e=!1,i=M(this,eh).mapObjects.get(t._mapId);return i&&(e=i.removeThreeJSMarker(t)),M(this,eh).tryRendering(un.ANIMATED),e}removeAllThreeJSMarkers(){M(this,N2).forEach((t=>{this.removeThreeJSMarker(t)}))}};eh=new WeakMap,N2=new WeakMap,u(i8,"ThreeDMarkersController");var n8=i8,R2=n8;E();var hl,B2,R3,SZ,o8=class extends Go{constructor(t){super(),te(this,R3),A(this,"core"),A(this,"blueDotCore"),te(this,hl,void 0),te(this,B2,void 0),this.core=t,ce(this,B2,Gx(this.core.venue,this.core.options));let e=new R2(this.core);ce(this,hl,new l8({threeDMarkerLayer:e,core:this.core})),this.core.eventSystem.setBlueDotManager(M(this,hl)),this.blueDotCore=a8({data:this.core.venue,core:this.core,manager:M(this,hl)});let i=u8({core:this.core,blueDotManager:M(this,hl),controller:this.blueDotCore,data:this.core.venue});i.on("isFollowingChanged",(({newValue:t})=>{!1===t&&"follow"===this.core.state&&(this.core.state="explore",this.core.publish(12,{state:"explore"}))})),this.core.on(14,(t=>{i.isFollowing=t,this.blueDotCore.enabled&&i.isFollowing&&i.centerBlueDot()})),this.core.on(13,(({x:t,y:e})=>{M(this,hl).publish("update-position",{x:t,y:e})}));let n=Da(tt(this,R3,SZ).bind(this),300);this.core.on(11,n),this.core.on(10,(t=>{M(this,hl).setBlueDotSizeFromZoom(t)}))}enable(t){this.blueDotCore.enableBlueDot(t)}disable(){this.blueDotCore.disableBlueDot()}};hl=new WeakMap,B2=new WeakMap,R3=new WeakSet,SZ=u((function(){if(!M(this,hl).blueDots)return;let t=M(this,hl).blueDots.filter((t=>t.handle._mapId===this.core.currentMap))[0];if(null==t)return;let e=t.handle.object.position.clone(),i=this.core.mapObjects.get(M(this,B2).id||this.core.venue.venue.defaultMap);if(!i)throw new Error("Unable to retrieve the target map");let n=e.applyMatrix4(i.object.matrix).project(this.core.cameraObject),r=(n.x+1)/2*this.core.canvasWidth,o=(1-n.y)/2*this.core.canvasHeight;M(this,hl).publish("update-position",{x:r,y:o})}),"#publishBlueDot"),u(o8,"BlueDotController");var r8=o8,s8=r8;E(),E();var AZ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAkklEQVRoge3awQ3AIAxD0VAMYf+F0yUixbL8JshXuLSwIqJCwDc9QBeZEOy9p2doAQDTM7TQ2cg5Z3qGFjpHS2YjDiGDe+/0DC0cwkYpJKdnaIFMkY1kymzEIVQcwsYhbPDem56hhc5GHELGIWwcwsYhbJS+2R1CxSFsdH5iO4SMr97Y6FxPqxytVVV+HcTEIWx+9mcIqHSOm9QAAAAASUVORK5CYII=";E(),E();var h8=class{constructor(t){this.active=!1,this.positions=[],this.positionIndex=0,this.timerList=[],this.timeElapsed=0,this.startTime=void 0,this.startPos=0,this.endPos=0,this.smoothingType=void 0,this.isActive=this.isActive.bind(this),this.setCallbacks=this.setCallbacks.bind(this),this.watchPosition=this.watchPosition.bind(this),this.sendPositionResponse=this.sendPositionResponse.bind(this),this.start=this.start.bind(this),this.pause=this.pause.bind(this),this.speed=t.speed||10,window.positions&&this.setPositions(window.positions)}isActive(){return this.active}setPositions(t){this.reset(),this.positions=t,this.endPos=t.length-1}setCallbacks(t,e,i){this.successCallback=t,this.errorCallback=e,this.options=i}clearWatch(){this.reset()}watchPosition(t,e,i){this.setCallbacks(t,e,i),this.start()}sendPositionResponse(t){switch(this.timeElapsed=Date.now()-this.startTime,t.type){case"ERROR":this.errorCallback({code:t.code,message:t.message,timestamp:Date.now()});break;case"ANNOTATION":Le.log("Annotation Update: ".concat(t.annotation));break;default:this.successCallback({coords:t.coords,timestamp:t.timestamp,positionIndex:this.positionIndex})}this.positionIndex===this.endPos?this.reset():this.positionIndex+=1}start(){let t=0;this.positions[this.positionIndex-1]?t=this.positions[this.positionIndex-1].timestamp:this.positions[0].timestamp>1e6&&(t=this.positions[0].timestamp),this.startTime=Date.now(),this.positions.slice(this.positionIndex,this.endPos+1).forEach((e=>{let{timestamp:i}=e;this.timerList.push(setTimeout((()=>this.sendPositionResponse(e)),(i-t)/this.speed))})),this.active=!0}pause(){this.timerList.forEach((t=>{clearTimeout(t)})),this.timerList=[],this.active=!1}reset(){this.pause(),this.positionIndex=this.startPos}};u(h8,"FakeGeolocation");var c8=h8,CZ=c8;E();var f8={0:{actions:{5:1}},1:{actions:{0:2,1:3,3:4,4:0},markerState:0},2:{actions:{1:3,3:4,2:1,4:0},markerState:1},3:{actions:{0:2,3:4,2:1,4:0},markerState:2},4:{actions:{0:2,1:3,3:4,2:1,4:0},markerState:3}},Fbe=u((()=>{let t=$h({state:0,markerState:0,transition:e=>{if(null==f8[t.state])return;let i=f8[t.state].actions[e];null!=i&&t.state!==i&&(t.state=i,t.markerState=f8[t.state].markerState)},reset:()=>{t.state=0}});return t}),"StateMachine"),PZ=Fbe;E();var p8=u(((t,e,i,n=1.5)=>{let r=!1;return(i?[i]:e).forEach((e=>{Math.abs(t.x)<e.width*n&&Math.abs(t.y)<e.height*n&&(r=!0)})),!r}),"isOutsideMap");E();var y8=Bt(LZ());function d8(t){return null===t||"number"==typeof t}E(),u(d8,"isValidLevel");var g8=class{constructor(t=2){this.nextLevel=void 0,this.inertia=t,this.levelConfirmations=0}_resetConfirmations(){this.levelConfirmations=0,this.nextLevel=void 0}_resetFilter(){this._resetConfirmations(),this.previousLevel=void 0}filter(t){let e=null,i=void 0===t?null:t;if(!d8(i))throw new TypeError("The argument given to filter() must be null, undefined, or a number");return null===i?this._resetFilter():(d8(this.previousLevel)&&i!==this.previousLevel?d8(this.nextLevel)&&i===this.nextLevel?this.levelConfirmations>=this.inertia?(this._resetConfirmations(),e=i):(this.levelConfirmations++,e=this.previousLevel):(this.levelConfirmations++,this.nextLevel=i,e=this.previousLevel):e=i,this.previousLevel=e),e}};u(g8,"LevelFilter");var m8=g8,B3=m8,Vbe=1.4,v8={NONE:"none",KALMAN:"kalman"},Hbe=u((t=>({floorLevel:t.coords.floorLevel,timestamp:t.timestamp,latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,speed:-1,type:t.type})),"parseLocation"),b8=class{constructor(t){this.smooth=this.smooth.bind(this),this.smoothingType=window.mappedin&&window.mappedin.smoothingType||v8.KALMAN,this.lastLocation=null,this.levelFilter=t}formatLocation(t){return{type:"SUCCESS",timestamp:t.timestamp,coords:{latitude:t.latitude,longitude:t.longitude,accuracy:t.accuracy,floorLevel:this.levelFilter.filter(t.floorLevel)}}}kalman(t,e){if(e){let i=t.timestamp-e.timestamp,n=Vbe*i/1e3;this.latitudeKF.setProcessNoise(n),this.longitudeKF.setProcessNoise(n),this.latitudeKF.setMeasurementNoise(t.accuracy),this.longitudeKF.setMeasurementNoise(t.accuracy)}else this.latitudeKF=new y8.default({R:1,Q:t.accuracy}),this.longitudeKF=new y8.default({R:1,Q:t.accuracy});return{...t,latitude:this.latitudeKF.filter(t.latitude),longitude:this.longitudeKF.filter(t.longitude)}}setSmoothingType(t){this.smoothingType=t}smooth(t){let e;switch(this.smoothingType){case v8.KALMAN:return e=this.kalman(Hbe(t),this.lastLocation),this.lastLocation=e,this.formatLocation(e);case v8.NONE:default:return t}}reset(){this.lastLocation=null,this.levelFilter=new B3(this.levelFilter.inertia)}};u(b8,"PositionSmoothing");var x8=b8,DZ=x8;E();var k3=u((t=>t*Math.PI/180),"toRadians"),jbe=u((t=>180*t/Math.PI),"toDegrees"),Wbe=u((function(){let t,e=$h({bearingExpired:!1,previousLat:null,previousLong:null,calculateHeading(t,i,n){e.previousLat||(e.previousLat=t),e.previousLong||(e.previousLong=i);let r=((e.previousLat-t)**2+(e.previousLong-i)**2)**.5,o=n&&n.coords.accuracy<20,s=parseFloat(r.toFixed(5))>0;if(o&&s){e.resetBearingExpirationTimer();let n=e.getBearing([e.previousLat,e.previousLong],[t,i]);return e.previousLat=t,e.previousLong=i,n}return!1},getBearing([t,e],[i,n]){let r=k3(t),o=k3(e),s=k3(i),a=k3(n),l=Math.sin(a-o)*Math.cos(s),u=Math.cos(r)*Math.sin(s)-Math.sin(r)*Math.cos(s)*Math.cos(a-o),h=Math.atan2(l,u);return h=jbe(h),(h+360)%360},resetBearingExpirationTimer(){null!==t&&e.clearBearingExpirationTimer(),t=setTimeout((()=>{e.bearingExpired=!0,e.clearBearingExpirationTimer()}),5e3)},clearBearingExpirationTimer(){null!==t&&(clearTimeout(t),t=null)}});return e}),"BlueDotBearing"),NZ=Wbe,F3="#2266ff",w8=class extends al{constructor(){super(...arguments),A(this,"update",u((t=>{this.publish(0,t)}),"update")),A(this,"throwError",u((t=>{this.publish(1,t)}),"throwError"))}};u(w8,"PositionUpdater");var k2,q3=w8,RZ={showBearing:!1,allowImplicitFloorLevel:!1,smoothing:!0,positionUpdater:void 0,baseColor:F3,useRotationMode:!1},M8=class extends q3{constructor(){super(...arguments),te(this,k2,-1)}start(t){ce(this,k2,globalThis.navigator.geolocation.watchPosition(this.update,this.throwError,t))}stop(){globalThis.navigator.geolocation.clearWatch(M(this,k2))}};k2=new WeakMap,u(M8,"GeolocationUpdater");var _8=M8,Ybe=3e4,Xbe=1e4,BZ=u((({data:t,core:e,manager:i})=>{let n,r,o,{maps:s,venue:a}=t,l={enableHighAccuracy:!0},h=PZ(),c=u((()=>{null!=n&&(clearTimeout(n),n=null)}),"clearFallbackToGPSTimer"),p=s.length>1,d=!1,f=NZ();f.on("bearingExpiredChanged",(t=>{t.newValue&&(b.bearing=null,m(b.userPosition,null))}));let g=u(((t,e,i)=>{"string"==typeof t&&(y(e,i),b.stateMachine.transition(2),m(null,null))}),"setError"),m=u(((t,i,n)=>{if(b.userPosition=t,null!=i){b.userMap=i;let r=(b.userMap||e.venue.maps.find((t=>t.id===e.currentMap))).createCoordinate(t.coords.latitude,t.coords.longitude);b.nearestNode=n||r.nearestNode}b.userData={state:h.state,position:b.userPosition,map:b.userMap,bearing:b.bearing,nearestNode:b.nearestNode,forceBlueDot:b.forceBlueDot},e.blueDot.publish("POSITION_UPDATE",{nearestNode:b.nearestNode,bearing:b.bearing,map:b.userMap,position:b.userPosition})}),"updateInternalState"),v=u((t=>{g("position-error",t.code,t.message),Le.warn("ERROR(".concat(t.code,"): ").concat(t.message))}),"onPositionError");function y(t,i){b.state={reason:t,message:i,markerVisibility:h.markerState,name:h.state},e.blueDot.publish("STATE_CHANGE",b.state)}u(y,"setReason");let x=u(((t,e)=>{let i=s,n=t.coords.latitude,r=t.coords.longitude;null!=e&&(i=s.filter((t=>t.elevation===e)));let o=i.reduce(((t,e)=>{let i=e.createCoordinate(n,r),o=i.nearestNode,s=e.createCoordinateByXY(o.x,o.y).absoluteDistanceTo(i);return s<t[1]?[e,s,o]:t}),[i[0],1/0,null]);return{targetMap:o[0],nearestNode:o[2]}}),"determineCurrentMapFromCoordinates"),_=u((t=>{var i,l;{let u=t.coords.floorLevel;void 0!==window.floorLevel&&(u=window.floorLevel);let g={timestamp:t.timestamp,type:t.type,coords:{accuracy:t.coords.accuracy,latitude:t.coords.latitude,longitude:t.coords.longitude,floorLevel:u},bearing:t.bearing};null!=u&&(d=!0),window.mappedin&&(Array.isArray(window.mappedin.bluedotCaptureData)?window.mappedin.bluedotCaptureData.push(g):window.mappedin.bluedotCaptureData=[g]),o&&clearTimeout(o),o=setTimeout((()=>{h.transition(3),y(),b.positionSmoothing.reset(),m(b.userPosition,null)}),b.locationUncertainTimeoutPeriod);let v=e.getPositionLatLon(g.coords.latitude,g.coords.longitude),_=p8(v,s);if(null==g.coords.latitude||null==g.coords.longitude)return b.positionSmoothing.reset(),void y(1);if(_)return b.positionSmoothing.reset(),b.stateMachine.transition(2),y(0),void(b.userData={state:h.state,position:null,map:null,bearing:null,nearestNode:null,forceBlueDot:!1});let M,E=null==(i=b.enableBlueDotOptions)?void 0:i.smoothing;M=!0===E||void 0===E&&null==g.coords.floorLevel?b.positionSmoothing.smooth(g):g,u=M.coords.floorLevel;let w=M.coords.latitude,A=M.coords.longitude;if(null!=(l=b.enableBlueDotOptions)&&l.showBearing){let e=t.bearing;if("number"==typeof e)b.bearing=e;else{let t=f.calculateHeading(w,A,M);!1!==t&&(b.bearing=t)}}let S=null,T=null,C=a.isMultiBuilding;if(C&&"hudson-yards"!==a.slug&&null!=u){let t=x(M,u);S=t.targetMap,T=t.nearestNode}if("hudson-yards"===a.slug){let t=b.userMap;if(null==u&&p8(v,s,t,.55)&&(S=s.filter((t=>"5b5f5becadd5444692000001"===t.id))[0]),null!=u){let t=s.filter((t=>t.elevation===u));t.length>1&&(t=t.filter((t=>"5b5f20e3f3ea231068000000"===t.group))),S=t[0]}}if(!S&&null!=u){let t=s.filter((t=>t.elevation===u));1===t.length&&(S=t[0])}if(b.forceBlueDot&&b.userMap&&!d?S=b.userMap:p||(S=s[0]),S||b.forceBlueDot&&3!==h.state)h.transition(1),c();else{if(3===h.state)return r={...M},void(null==n&&(n=setTimeout((()=>{if(h.transition(0),C){let t=x(r);S=t.targetMap,T=t.nearestNode}m(r,S,T),n=null}),b.fallbackToGPSTimeoutPeriod)));h.transition(0)}y(),m(M,S)}}),"onPositionReceived"),b=$h({bearing:null,state:{reason:void 0,message:void 0,markerVisibility:h.markerState,name:h.state},positionUpdater:null,positionSmoothing:new DZ(new B3),locationUncertainTimeoutPeriod:Ybe,fallbackToGPSTimeoutPeriod:Xbe,userMap:s.find((t=>t.id===a.defaultMap)),userPosition:null,nearestNode:null,forceBlueDot:!1,userData:null,enabled:!1,stateMachine:h,enableBlueDotOptions:RZ,enableBlueDot:t=>{var e,i,n,r,o;b.enableBlueDotOptions={...RZ,...t},b.enabled=!0,b.enableBlueDotOptions&&b.enableBlueDotOptions.allowImplicitFloorLevel&&(b.forceBlueDot=b.enableBlueDotOptions.allowImplicitFloorLevel),null!=(null==(e=b.enableBlueDotOptions)?void 0:e.positionUpdater)?(b.positionUpdater=b.enableBlueDotOptions.positionUpdater,"function"==typeof(null==(i=null==b?void 0:b.positionUpdater)?void 0:i.start)&&(null==(n=null==b?void 0:b.positionUpdater)||n.start())):(b.positionUpdater=new _8,null==(o=null==(r=b.positionUpdater)?void 0:r.start)||o.call(r,l)),b.positionUpdater.on(0,_),b.positionUpdater.on(1,v),h.transition(5)},disableBlueDot(){var t,e,n,r;b.enabled=!1,"function"==typeof(null==(t=null==b?void 0:b.positionUpdater)?void 0:t.stop)&&(null==(e=null==b?void 0:b.positionUpdater)||e.stop()),null==(n=b.positionUpdater)||n.off(0,_),null==(r=b.positionUpdater)||r.off(1,v),h.transition(4),i.cleanup()}});return b}),"BlueDot");BZ.FakeGeolocation=CZ;var a8=BZ,$p={GHOST:"ghost",GREY:"grey",BLUE:"blue"},th=u(((t,e)=>new ls({color:t,transparent:!0,depthTest:!1,opacity:e})),"makeMeshBasicMaterial"),kZ=u((t=>{let e=new Ul,i=0;for(e.moveTo(t,0);i<=2*Math.PI;)e.lineTo(Math.cos(i)*t,Math.sin(i)*t),i+=Math.PI/16;return e}),"drawCircle"),Zbe=u((({baseColor:t=F3})=>({outer:{blue:th(16777215,1),ghost:th(16777215,.5)},inner:{blue:th(t,1),grey:th(14540253,1),ghost:th(t,.5)},aura:{inner:th(t,.2),outer:th(t,.3)},bearing:{blue:th(t,.7),ghost:th(t,.4)}})),"makeMaterials"),qZ=u(((t,e)=>{let i=kZ(t);if(e&&e<t){let t=kZ(e);i.holes=[t]}return new Uc(i,{depth:0,bevelEnabled:!1,steps:2})}),"createAnnularGeometry"),E8=u(((t,e,i)=>{let n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2))/i;return n>1?n=1:n<0&&(n=0),new qe(0,n)}),"generateRadialUV"),Qbe=u((t=>({generateTopUV:(e,i,n,r,o)=>{let s=i[3*n],a=i[3*n+1],l=i[3*r],u=i[3*r+1],h=i[3*o],c=i[3*o+1];return[E8(s,a,t),E8(l,u,t),E8(h,c,t)]},generateSideWallUV:()=>[new qe(0,1),new qe(0,1),new qe(0,1),new qe(0,1)]})),"radialUVGenerator"),Kbe=u(((t,e,i=0)=>{if(Math.abs(t)>=Math.PI)throw new Error("Sector angle too wide!");let n=i/Math.tan(t/2),r=i/Math.sin(t/2),o=r+e,s=10,a=new Ul;a.moveTo(r*Math.cos(t/2)-n,r*Math.sin(t/2));for(let e=0;e<s;e++)a.lineTo(o*Math.cos(t/2-t/s*e)-n,o*Math.sin(t/2-t/s*e));for(let t=0;t<s;t++)a.lineTo(i*Math.cos(Math.PI/-2+Math.PI/s*t),i*Math.sin(Math.PI/-2+Math.PI/s*t));return new Uc(a,{depth:1,bevelEnabled:!1,UVGenerator:Qbe(e)})}),"createSectorGeometry"),FZ=u((function(t,e=0,i=0,{baseColor:n=F3}){let r,o,s=new ci,a=new ci,l=Zbe({baseColor:new at(n)});if(l.outer.grey=l.outer.blue,e>=0){let t=new iT(1,1,10,32),i=l.aura.inner;r=new Ft(t,i),r.position.set(0,0,0),r.rotation.set(Math.PI/2,0,0),r.scale.set(e,1,e),a.add(r)}let u=Kbe(Math.PI/6,120,30),h=l.bearing[t];h&&(new fa).load(AZ,(t=>{h.colorSpace=Lr,h.alphaMap=t,h.needsUpdate=!0})),o=new Ft(u,h),o.rotation.set(0,0,i),a.add(o);let c=qZ(30,22.5),p=qZ(22.5),d=new Ft(c,l.outer[t]),f=new Ft(p,l.inner[t]);return s.add(d),s.add(f),a.add(s),[a,s,d,f,o,r].forEach((t=>{t.renderOrder=999,t.layers.set($i.ALWAYS_ON_TOP)})),{outerObject:a,radiusObject:r,dotObject:s,bearingObject:o}}),"makeBlueDot"),Jbe=u(((t,e,i)=>{let n=(e.x-i.x)**2+(e.y-i.y)**2,r=0;n&&(r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n),r>1&&(r=1),r<0&&(r=0);let o=e.x+r*(i.x-e.x),s=e.y+r*(i.y-e.y);return{proportion:r,distance:Math.sqrt((t.x-o)**2+(t.y-s)**2)}}),"distanceToSegment"),T8=u(((t,e)=>null!=t?U3(-t)-e+Math.PI/2:null),"getBearing"),U3=u((t=>t*Math.PI/180),"degToRadians"),UZ=u(((t,e)=>{let i,n,r,o=Number.MAX_SAFE_INTEGER;for(let s=0;s<t.length-1;s++){let a=t[s],l=t[s+1],u=Jbe(e,a,l);u.distance<=o&&(o=u.distance,n=u.proportion,r=s,i=u.proportion>.5?l:a)}return{nearestNode:i,proportion:n,index:r}}),"getNearestPathSegment"),zZ=u(((t,e,i)=>{let n=[],r=[];for(let e=0;e<t.length-1;e++){let i=t[e],o=t[e+1],s=o.x-i.x,a=o.y-i.y,l=Math.atan2(s,a);n.push(l);let u=Math.sqrt(s**2+a**2);r.push(u)}let o,s=[];for(let e=0;e<n.length;e++){let i=n[e],a=r[e];null==o||Math.abs(o-i)>.2?(o=i,s.push({angle:i,distance:a,nodes:[t[e]]})):(s[s.length-1].distance+=a,s[s.length-1].nodes.push(t[e]))}s[s.length-1].nodes.push(t[t.length-1]);let a=i||100,l=u((()=>s.filter((t=>t.distance>=a)).length),"validGroups");for(;!l();)a/=2;let h=s.find((t=>t.nodes.indexOf(e)>-1)),c=s.indexOf(h);for(;c>0&&s[c].distance<a;)c-=1;return s[c].angle}),"getHeadingOnPath"),GZ=u(((t,e,i,n,r=.8)=>{let o=i*(n?.05:0),s=null!=e?Math.cos(e-Math.PI/2)*o:0,a=null!=e?Math.sin(e-Math.PI/2)*o:0;return{position:{x:t.x-s,y:t.y-a},rotation:e||void 0,zoom:i,tilt:r}}),"getCameraLookahead"),ed=Bt(Eu()),$be=2e3,e_e=8,t_e=65,n_e=3,i_e={duration:2e3,easing:ed.default.Easing.Cubic.Out};function z3(t){return"number"==typeof t&&!isNaN(t)&&t>=0}u(z3,"isNonNegativeNumber");var r_e=u(((t,e,i)=>t<e?t:t<i?e:t*e/i),"ledge"),A8=class extends al{constructor({threeDMarkerLayer:t,core:e,minRadius:i=e_e,maxRadius:n=t_e,radiusUpdateInterval:r=n_e,radiusTweenOptions:o=i_e}){if(super(),this.threeDMarkerLayer=t,this.core=e,!z3(i))throw new Error("Expecting minRadius parameter to be a valid number >= 0. Provided: ".concat(i));if(this.minRadius=i,!z3(n))throw new Error("Expecting maxRadius parameter to be a valid number >= 0. Provided: ".concat(n));if(n<this.minRadius)throw new Error("Expecting maxRadius parameter to be >= minRadius parameter. Provided: ".concat(n,"; minRadius = ").concat(this.minRadius));if(this.maxRadius=n,!z3(r))throw new Error("Expecting radiusUpdateInterval parameter to be a valid number >= 0. Provided: ".concat(r));this.radiusUpdateInterval=r,this.radiusTweenOptions=o,this.state=null,this.prevRadius=null,this.radiusTween=null,this.prevBearing=null,this.bearingTween=null,this.currentX=null}computeNewRadius(t){if(!z3(t)||t<this.minRadius)return 0;if(t>=this.maxRadius)return this.maxRadius;if(0===this.radiusUpdateInterval)return t;{let e=t-this.minRadius;return e-e%this.radiusUpdateInterval+this.minRadius}}updateBlueDotSize(){this.blueDots&&this.blueDots.forEach((t=>{let e=this.core.controls.getZoomScaledMin(),i=3*e,n=5*e,r=r_e(this.currentX,i,n)/2e3;t.dotObject.scale.set(r,r,r),t.bearing&&t.bearing.scale.set(r,r,r)}))}setBlueDotSizeFromZoom(t){this.currentX=t,this.updateBlueDotSize()}update(t){var e,i,n,r,o,s,a;let l=t.mode||this.state.mode,u=t.mapId||t.map&&t.map.id||this.core.currentMap;null==t.bearing&&(this.prevBearing=null),this.positionTween&&this.positionTween.stop();let h="OVERVIEW"===this.core.stackedMaps.currentState,c=this.core.currentMap===(null!=(null==(i=null==(e=this.core.options)?void 0:e.dynamicFocus)?void 0:i.baseMap)?null==(o=null==(r=null==(n=this.core.options)?void 0:n.dynamicFocus)?void 0:r.baseMap)?void 0:o.id:null);this.state&&(l!==this.state.mode||u!==this.state.targetMap||h!==this.state.isStackedMapsOverview||c!==this.state.isDynamicFocusBaseMap)&&this.cleanup();let p=this.computeNewRadius(t.radius),d=this.core.mapObjects.get(u);if(!this.blueDots){let e=[];for(let i of this.core.mapObjects.values()){let n=null!=d&&i===d,r=null!=d&&d.mapClass.mapGroup.maps.includes(i.mapClass);if(n||!h&&r){let n=i.getPositionLatLon(t.coordinates.latitude,t.coordinates.longitude),r=i.id===d.id||c||l!==$p.BLUE?l:$p.GHOST,o=FZ(r,0,T8(t.bearing,this.core.venue.maps.find((t=>t.id===this.core.currentMap)).getNorth()),{baseColor:t.baseColor});this.prevRadius=0;let s=this.threeDMarkerLayer.createThreeJSMarker({object:o.outerObject,mapOrMapId:i,position:n});e.push({handle:s,radius:o.radiusObject,dotObject:o.dotObject,bearing:o.bearingObject})}this.blueDots=e,this.currentX&&this.updateBlueDotSize()}}this.currentPositionLatLon?(this.positionTween=new ed.default.Tween(this.currentPositionLatLon).to({lat:t.coordinates.latitude,lon:t.coordinates.longitude},$be).easing(ed.default.Easing.Cubic.Out).onUpdate((t=>{this.currentPositionLatLon=t,this.blueDots.forEach((e=>{let i=e.handle._mapId,n=this.core.mapObjects.get(i),r=n.getPositionLatLon(t.lat,t.lon);n.translateChild(e.handle.object,r)})),this.core.tryRendering(un.ALWAYS_ON_TOP)})),this.positionTween.start()):(this.currentPositionLatLon={lat:t.coordinates.latitude,lon:t.coordinates.longitude},null==(s=this.blueDots)||s.forEach((e=>{let i=e.handle._mapId,n=this.core.mapObjects.get(i),r=n.getPositionLatLon(t.coordinates.latitude,t.coordinates.longitude);n.translateChild(e.handle.object,r)}))),Math.abs(p-this.prevRadius)>=Number.EPSILON&&(null!=this.radiusTween&&this.radiusTween.stop(),this.radiusTween=new ed.default.Tween({value:this.prevRadius}).to({value:p},this.radiusTweenOptions.duration).easing(this.radiusTweenOptions.easing).onUpdate((({value:t})=>{this.prevRadius=t,null!=this.blueDots&&this.blueDots.forEach((e=>{if(e.radius){let i=e.handle._mapId,n=this.core.mapObjects.get(i),r=t*n.getMapScale();e.radius.scale.set(r,1,r)}})),this.core.tryRendering(un.ALWAYS_ON_TOP)})).start());let f=t.bearing;if(null!=t.bearing){if(null==this.prevBearing)this.prevBearing=t.bearing,this.setBearing(t.bearing);else if(Math.abs(f-this.prevBearing)>=Number.EPSILON){let t=(null!=(a=this.prevBearing)?a:f)%360,e=f%360;Math.abs(t-e)>180&&(t>e?e+=360:t+=360),this.animateBearing(t,e)}}else null!=this.blueDots&&this.blueDots.forEach((t=>{t.bearing&&(t.bearing.visible=!1)}));this.state={mode:l,targetMap:u,isStackedMapsOverview:h,isDynamicFocusBaseMap:c},this.core.tryRendering(un.ALWAYS_ON_TOP)}animateBearing(t,e){this.bearingTween=new ed.default.Tween({value:t}).to({value:e},1e3).easing(ed.default.Easing.Cubic.Out).onUpdate((({value:t})=>{this.prevBearing=t,this.setBearing(t),this.core.tryRendering(un.ALWAYS_ON_TOP)})).start()}setBearing(t){null!=this.blueDots&&this.blueDots.forEach((e=>{e.bearing&&(e.bearing.visible=!0,e.bearing.rotation.set(0,0,T8(t,this.core.venue.maps.find((t=>t.id===this.core.currentMap)).getNorth())))}))}getBlueDotForMap(t){if(!Array.isArray(this.blueDots))return;let e=("string"==typeof t&&t.length>0?t:"object"==typeof t?t.id:void 0)||this.core.currentMap,i=this.blueDots.filter((t=>t.handle._mapId===e));if(i.length>0){let t=new K,e=new K;return i[0].dotObject.updateMatrixWorld(),i[0].dotObject.getWorldPosition(t),i[0].dotObject.getWorldScale(e),e.divideScalar(2),e.setZ(0),t.sub(e),i[0].dotObject}}cleanup(){this.blueDots&&(this.blueDots.forEach((t=>{t.handle._object.children.forEach((t=>{t.geometry?t.geometry.dispose():t.children.forEach((t=>{t.geometry.dispose()}))})),this.threeDMarkerLayer.removeThreeJSMarker(t.handle)})),delete this.blueDots),this.state=null,null!=this.positionTween&&this.positionTween.stop(),null!=this.radiusTween&&this.radiusTween.stop()}};u(A8,"BlueDotManager");var S8=A8,l8=S8;E();var Du,nh,td,I8=class extends Go{constructor(t){super(),A(this,"core"),A(this,"currentAnimation"),te(this,Du,void 0),te(this,nh,void 0),te(this,td,void 0),A(this,"interactions",{set:t=>{null!=(null==t?void 0:t.pan)&&(this.core.controls.enablePan=t.pan),null!=(null==t?void 0:t.zoom)&&(this.core.controls.enableZoom=t.zoom),null!=(null==t?void 0:t.rotationAndTilt)&&(this.core.controls.enableRotate=t.rotationAndTilt)},enable:()=>{this.core.controls.enablePan=!0,this.core.controls.enableZoom=!0,this.core.controls.enableRotate=!0},disable:()=>{this.core.controls.enablePan=!1,this.core.controls.enableZoom=!1,this.core.controls.enableRotate=!1}}),this.core=t,ce(this,td,!1);let e=Da((()=>{this._subscribers.CHANGED&&this.publish("CHANGED",{tilt:this.tilt,zoom:this.zoom,rotation:this.rotation,position:this.position})}),0,!0);this.core.controls.dispatcher.addEventListener("positionUpdated",(()=>{this._subscribers.POSITION_CHANGED&&this.publish("POSITION_CHANGED",this.position),e()})),this.core.controls.dispatcher.addEventListener("zoomUpdated",(()=>{this._subscribers.ZOOM_CHANGED&&this.publish("ZOOM_CHANGED",this.zoom),e()})),this.core.controls.dispatcher.addEventListener("rotationUpdated",(()=>{this._subscribers.ROTATION_CHANGED&&this.publish("ROTATION_CHANGED",this.rotation),e()})),this.core.controls.dispatcher.addEventListener("tiltUpdated",(()=>{this._subscribers.TILT_CHANGED&&this.publish("TILT_CHANGED",this.tilt),e()}));let i=u((()=>{M(this,td)||(this.publish("USER_INTERACTION_START",void 0),ce(this,td,!0))}),"publishVoidEventStart"),n=u((()=>{this.publish("USER_INTERACTION_END",void 0),ce(this,td,!1)}),"publishVoidEventEnd");this.core.controls.dispatcher.addEventListener("userPanStart",i),this.core.controls.dispatcher.addEventListener("userZoomStart",i),this.core.controls.dispatcher.addEventListener("userRotateStart",i),this.core.controls.dispatcher.addEventListener("userTiltStart",i),this.core.controls.dispatcher.addEventListener("userPedestalStart",i),this.core.controls.dispatcher.addEventListener("userDollyStart",i),this.core.controls.dispatcher.addEventListener("userPanEnd",n),this.core.controls.dispatcher.addEventListener("userPedestalEnd",n),this.core.controls.dispatcher.addEventListener("userZoomEnd",n),this.core.controls.dispatcher.addEventListener("userRotateEnd",n),this.core.controls.dispatcher.addEventListener("userDollyEnd",n),this.core.controls.dispatcher.addEventListener("userTiltEnd",n)}get zoom(){return this.core.controls.getZoom()}get rotation(){return this.core.controls.getRotation()}get tilt(){return this.core.controls.getTilt()}get minZoom(){return this.core.controls.minZoom}set minZoom(t){this.core.controls.minZoom=t}get maxZoom(){return this.core.controls.maxZoom}set maxZoom(t){this.core.controls.maxZoom=t}get maxTilt(){return this.core.controls.maxTilt}set maxTilt(t){this.core.controls.maxTilt=Math.max(0,Math.min(t,g2))}get position(){let t=this.core.controls.getPosition();return this.core.convert3DMapPositionToCoordinate(t)}setSafeAreaInsets(t){this.core.setPadding(t)}convertZoomLevelToAltitude(t){return this.core.controls.convertZoomToAltitude(t)}convertAltitudeToZoomLevel(t){return this.core.controls.convertAltitudeToZoomLevel(t)}getSafeAreaInsets(){return this.core.cachedPadding}focusOn(t,e){var i,n;if("OVERVIEW"===this.core.stackedMaps.currentState)return Promise.reject(new Error("Cannot focus on a map when in overview mode"));let r=this.core.currentMap,o=null==(n=null==(i=t.coordinates)?void 0:i.filter((t=>t.map.id===r)))?void 0:n.map((t=>this.core.convertTo3DMapPosition({x:t.x,y:t.y}))),s=new Promise(((t,e)=>{ce(this,Du,t),ce(this,nh,e)}));return this.core.focusOn({changeZoom:null==e?void 0:e.changeZoom,duration:null==e?void 0:e.duration,focusZoomFactor:1,curve:(null==e?void 0:e.easing)&&ua[e.easing],minZoom:null==e?void 0:e.minZoom,maxZoom:null==e?void 0:e.maxZoom,updateZoomLimits:null==e?void 0:e.updateZoomLimits,nodes:t.nodes,points:o,polygons:t.polygons,padding:null==e?void 0:e.safeAreaInsets,tilt:null==e?void 0:e.tilt,rotation:null==e?void 0:e.rotation,callback:()=>{this.currentAnimation=void 0,M(this,Du).call(this),ce(this,Du,void 0),ce(this,nh,void 0)}}),this.currentAnimation=s,s}set(t){if(!t)return;if("OVERVIEW"===this.core.stackedMaps.currentState)throw new Error("Cannot set camera on a map when in overview mode");let e,{zoom:i,rotation:n,tilt:r,position:o}=t;o&&(e=this.core.convertTo3DMapPosition(o)),this.core.controls.setMulti(e||this.core.controls.getPosition(),i,n,r)}animate(t,e){if("OVERVIEW"===this.core.stackedMaps.currentState)return Promise.reject(new Error("Cannot animate on a map when in overview mode"));let i;t.position&&(i=this.core.convertTo3DMapPosition(t.position));let n={position:i,zoom:t.zoom,tilt:t.tilt,rotation:t.rotation},r=new Promise(((t,e)=>{ce(this,Du,t),ce(this,nh,e)}));return this.core.controls.animateCamera(n,null==e?void 0:e.duration,(null==e?void 0:e.easing)&&ua[e.easing],(()=>{this.currentAnimation=void 0,M(this,Du).call(this),ce(this,Du,void 0),ce(this,nh,void 0)})),this.currentAnimation=r,r}async translate(t,e,i){if("OVERVIEW"===this.core.stackedMaps.currentState)return Promise.reject(new Error("Cannot translate a map when in overview mode"));if(!t||!e||null==this.core.currentMap)return;let n=this.core.mapObjects.get(this.core.currentMap).mapClass,r=this.rotation,o=r+U3(90),s=r-U3(90),a=r+Math.PI,l=r,u=this.position,{x:h,y:c}=this.position,p=BT(n);if(1===p){h+=e*Math.cos(o),c-=e*Math.sin(o);let t=this.core.convertTo3DMapPosition(n.createCoordinateByXY(h,c)),i=this.core.convert3DMapPositionToCoordinate(t);p=e/u.absoluteDistanceTo(i)}let d=e*p;switch(t){case"up":h+=d*Math.cos(o),c-=d*Math.sin(o);break;case"down":h+=d*Math.cos(s),c-=d*Math.sin(s);break;case"left":h+=d*Math.cos(a),c-=d*Math.sin(a);break;case"right":h+=d*Math.cos(l),c-=d*Math.sin(l)}return 0!==this.tilt&&e&&await this.animate({tilt:0},i),this.animate({position:n.createCoordinateByXY(h,c)},i)}cancelAnimation(){this.currentAnimation&&(this.core.controls.cancelAnimation(),M(this,nh).call(this),this.currentAnimation=void 0,ce(this,Du,void 0),ce(this,nh,void 0))}};Du=new WeakMap,nh=new WeakMap,td=new WeakMap,u(I8,"CameraController");var C8=I8,P8=C8;E();var D8=Bt(VZ());E();var Ei,Wl,nd,df,V3,q2,H3,j3,W3,Y3,X3,Zg,s_e=!1,jl=class t{constructor(e){te(this,Ei,void 0),te(this,Wl,void 0),te(this,nd,void 0),te(this,df,void 0),A(this,"object"),te(this,V3,u(((t,e)=>{if(null==M(this,Wl))return;M(this,Ei).cameraObject.updateMatrixWorld(),M(this,Ei).cameraObject.updateMatrix(),ce(this,nd,new pa),M(this,nd).layers.set($i.ALWAYS_ON_TOP);let i={x:0,y:0};i.x=t/M(this,Ei).canvasWidth*2-1,i.y=-e/M(this,Ei).canvasHeight*2+1;let n=new K(i.x,i.y,0);M(this,nd).setFromCamera(n,M(this,Ei).cameraObject.clone());let r=M(this,nd).intersectObject(M(this,Wl),!0);return r.length<1?void 0:M(this,Ei).cameraObject.worldToLocal(r[0].point)}),"#getPlanePositionAtScreenCoordinates")),te(this,q2,u(((t,e)=>{let i=e.position.z;t<i?t-=i:t+=i;let n=e.fov*Math.PI/180;return 2*Math.tan(n/2)*Math.abs(t)}),"#visibleHeightAtZDepth")),te(this,H3,u(((t,e)=>M(this,q2).call(this,t,e)*e.aspect),"#visibleWidthAtZDepth")),te(this,j3,u((()=>({"top-left":{x:0,y:1},"top-right":{x:1,y:1},"bottom-left":{x:0,y:0},"bottom-right":{x:1,y:0},center:{x:.5,y:.5},top:{x:.5,y:1},bottom:{x:.5,y:0},left:{x:0,y:.5},right:{x:1,y:.5}}[t.OPTIONS.position])),"#getPositionAlignedAnchor")),te(this,W3,u((()=>{let e=t.OPTIONS.padding;return{"top-left":{x:e,y:e},"top-right":{x:-e,y:e},"bottom-left":{x:e,y:-e},"bottom-right":{x:-e,y:-e},center:{x:0,y:0},top:{x:0,y:e},bottom:{x:0,y:-e},left:{x:e,y:0},right:{x:-e,y:0}}[t.OPTIONS.position]}),"#getPositionAlignedPadding")),te(this,Y3,u((()=>({"top-left":{x:0,y:0},"top-right":{x:M(this,Ei).canvasWidth,y:0},"bottom-left":{x:0,y:M(this,Ei).canvasHeight},"bottom-right":{x:M(this,Ei).canvasWidth,y:M(this,Ei).canvasHeight},center:{x:M(this,Ei).canvasWidth/2,y:M(this,Ei).canvasHeight/2},top:{x:M(this,Ei).canvasWidth/2,y:0},bottom:{x:M(this,Ei).canvasWidth/2,y:M(this,Ei).canvasHeight},left:{x:0,y:M(this,Ei).canvasHeight/2},right:{x:M(this,Ei).canvasWidth,y:M(this,Ei).canvasHeight/2}}[t.OPTIONS.position])),"#getPositionAlignedCanvasCoordinates")),te(this,X3,u((()=>{(new fa).load(Jc.get("logo"),(t=>{ce(this,df,t);let e=M(this,Ei).cameraObject.near+.1*(M(this,Ei).cameraObject.far-M(this,Ei).cameraObject.near),i=M(this,q2).call(this,e,M(this,Ei).cameraObject),n=M(this,H3).call(this,e,M(this,Ei).cameraObject),r=Math.max(i,n),o=new To(10*r,10*r,100,100),s=new ol({visible:s_e,wireframe:!0});ce(this,Wl,new Ft(o,s)),M(this,Wl).position.set(0,0,-1*e);let a=new Tx({map:M(this,df),color:"#000000"});a.opacity=.5,a.depthTest=!1,a.sizeAttenuation=!1,this.object=new KE(a),this.object.layers.set($i.ALWAYS_ON_TOP),M(this,Wl).layers.set($i.ALWAYS_ON_TOP),this.object.renderOrder=999,this.object.position.set(0,0,0),M(this,Wl).add(this.object),M(this,Ei).cameraObject.add(M(this,Wl)),M(this,Zg).call(this)}))}),"#renderWatermark")),te(this,Zg,u((()=>{if(null==this.object||null==M(this,df))return;let e=M(this,j3).call(this);this.object.center.x=e.x,this.object.center.y=e.y;let i=M(this,W3).call(this),n=M(this,Y3).call(this),r=M(this,V3).call(this,n.x+i.x,n.y+i.y);if(null==r)return;this.object.position.set(r.x,r.y,0);let o=15e-5*t.OPTIONS.scale,s=M(this,df).image.width*o,a=M(this,df).image.height*o;this.object.scale.set(s,a,1),M(this,Ei).tryRendering(un.ALWAYS_ON_TOP)}),"#updateWatermark")),A(this,"show",u((()=>{null==this.object||null==M(this,Wl)?M(this,X3).call(this):(this.object.material.visible=!0,M(this,Zg).call(this))}),"show")),A(this,"hide",u((()=>{this.object.material.visible=!1,M(this,Ei).tryRendering(un.ALWAYS_ON_TOP)}),"hide")),A(this,"resize",u((()=>{M(this,Zg).call(this)}),"resize")),ce(this,Ei,e),t.ENABLED&&this.show()}};Ei=new WeakMap,Wl=new WeakMap,nd=new WeakMap,df=new WeakMap,V3=new WeakMap,q2=new WeakMap,H3=new WeakMap,j3=new WeakMap,W3=new WeakMap,Y3=new WeakMap,X3=new WeakMap,Zg=new WeakMap,u(jl,"WatermarkController"),A(jl,"ENABLED",!1),A(jl,"OPTIONS",{padding:16,scale:1,position:"bottom-left",onClick:()=>{null!=window&&window.open("https://www.mappedin.com")}});var Qg,O8=jl,Yl=O8,o_e=300,a_e=30,l_e=1.5,HZ=250,jZ=300,u_e=50,Vs=[];function L8(){Vs=[],Qg&&(clearTimeout(Qg),Qg=null)}u(L8,"flushTapEvents");var q8=class{constructor(t){A(this,"type","SINGLE"),A(this,"event"),A(this,"timestamp"),this.event=t,this.timestamp=performance.now()}};u(q8,"Tap");var N8=q8;function R8(t){let{position:{nodeOrCoordinate:e}}=t,i={id:t.id};return e instanceof Fs?i.node=e:e instanceof aa&&(i.coordinate=e),i}function c_e(t){let e=R8(t);return delete e.coordinate,{text:t.options.text,...e}}function h_e(t){return t.reduce(((t,e)=>(e instanceof Xo?t.labels.push(c_e(e)):e instanceof of?t.markers.push(R8(e)):e instanceof Wp&&t.tooltips.push(R8(e)),t)),{labels:[],markers:[],tooltips:[]})}u(R8,"getClickEventPayloadFromCollider"),u(c_e,"getClickEventPayloadFromFloatingLabels"),u(h_e,"categorizeColliders");var F8=class{constructor(t){A(this,"core"),A(this,"blueDotManager"),A(this,"rendererDomElement"),A(this,"currentHover",null),A(this,"hoverLabel"),A(this,"hoverColor",new at("#cccccc")),A(this,"options",{disableHover:!1}),A(this,"setBlueDotManager",u((t=>{this.blueDotManager=t}),"setBlueDotManager")),A(this,"touchCount",0),A(this,"onPointerMove",u((t=>{t.preventDefault(),!this.core.controls.isUserInteracting()&&(this.calculateMouseCoordinates(t),("touch"!==t.pointerType||null==t.pointerType&&this.hasTouched)&&(this.doHoverEffect(),this.hoverLabel.setPosition(this.cursorPos.x,this.cursorPos.y)))}),"onPointerMove")),A(this,"onPointerUp",u((t=>{if("touch"===t.pointerType&&(Vs=Vs.filter((t=>performance.now()-t.timestamp<jZ))),"grabbing"===this.rendererDomElement.style.cursor&&(this.rendererDomElement.style.cursor="grab"),this.touchCount&&this.decrementTouches(t),t.target.parentNode!=this.core.container)return;let e=Math.sqrt(Math.pow(t.clientX-this.mouseDownStart.clientX,2)+Math.pow(t.clientY-this.mouseDownStart.clientY,2));Date.now()<this.mouseDownStart.time+o_e&&e<=a_e?"touch"===t.pointerType?1===Vs.length&&"TWO_FINGER"===Vs[0].type&&this.core.controls.enableZoom?(this.zoomOut(),L8()):1===Vs.length&&"SINGLE"===Vs[0].type?(null!=Qg&&clearTimeout(Qg),Qg=setTimeout((()=>{this.handleMapClick(Vs[0].event),L8()}),jZ)):2===Vs.length&&"SINGLE"===Vs[0].type&&"SINGLE"===Vs[1].type&&this.core.controls.enableZoom&&(this.zoomIn(Vs[1].event),L8()):this.handleMapClick(t):this.touchCount||(this.core.publish(this.core.currentInteractionEvent),this.core.currentInteractionEvent=void 0)}),"onPointerUp")),A(this,"onPointerDown",u((t=>{if("pointer"!==this.rendererDomElement.style.cursor&&(this.rendererDomElement.style.cursor="grabbing"),this.mouseDownStart={time:Date.now(),clientX:t.clientX,clientY:t.clientY},this.incrementTouches(t),"touch"===t.pointerType){let e=new N8(t);Vs.length>=1&&e.timestamp-Vs[Vs.length-1].timestamp<u_e?Vs[Vs.length-1].type="TWO_FINGER":Vs.push(e)}}),"onPointerDown")),A(this,"incrementTouches",u((t=>{window.PointerEvent&&"touch"===t.pointerType&&(this.touchCount=(this.touchCount||0)+1,1===this.touchCount&&this.core.publish(27))}),"incrementTouches")),A(this,"decrementTouches",u((t=>{window.PointerEvent&&"touch"===t.pointerType&&(this.touchCount--,this.touchCount||this.core.publish(28))}),"decrementTouches")),A(this,"clearMouse",u((()=>{this.mouse.x=1/0,this.mouse.y=1/0}),"clearMouse")),A(this,"getMousePos",u((t=>({x:t.offsetX,y:t.offsetY})),"getMousePos")),A(this,"getScaledMousePos",u((t=>({x:t.offsetX*devicePixelRatio,y:t.offsetY*devicePixelRatio})),"getScaledMousePos")),A(this,"cursorPos",{x:0,y:0}),A(this,"mouse",{x:0,y:0}),A(this,"mouseDownStart",{time:0,clientX:0,clientY:0}),A(this,"scaledCursorPos",{x:0,y:0}),A(this,"hasTouched",!1),A(this,"calculateMouseCoordinates",u((t=>{this.cursorPos=this.getMousePos(t),this.scaledCursorPos=this.getScaledMousePos(t),this.mouse.x=this.cursorPos.x/this.core.canvasWidth*2-1,this.mouse.y=-this.cursorPos.y/this.core.canvasHeight*2+1}),"calculateMouseCoordinates")),A(this,"getMouseRayIntersects",u((t=>(jr.setFromCamera(this.mouse,this.core.cameraObject),Array.isArray(t)?jr.intersectObjects(t,!0):jr.intersectObject(t,!0))),"getMouseRayIntersects")),A(this,"detectCollidersUnderMouse",u((()=>{let{interactiveCollidersQTree:t}=this.core.smartCollisionEngine;if(null!=t){let{x:e,y:i}=this.scaledCursorPos,n=[e,i];return t.queryPoint(n).filter((t=>t.intersectsPoint(n))).map((t=>t.userData.collider))}return[]}),"detectCollidersUnderMouse")),A(this,"detectPolygonsUnderMouse",u((()=>{let t=this.core.visibleMapObjectsInCurrentScene.flatMap((t=>t.hoverableMeshChildren)),e=this.getMouseRayIntersects(t).map((function(t){return t.object.name}));(0,D8.default)(e);let i=[];for(let t=0,n=e.length;t<n;++t){let n=e[t];n&&this.core.interactivePolygons[n]&&i.push(n)}return i}),"detectPolygonsUnderMouse")),A(this,"detectPathsUnderMouse",u((()=>{var t;jr.setFromCamera(this.mouse,this.core.cameraObject),jr.layers.set($i.ANIMATED);let e=[];this.core.paths.pathsById.forEach((({internalPath:t})=>{t.options.interactive&&t.pathSegments.forEach((t=>{let i=t.object;e.push(i)}))}));let i=null!=(t=jr.intersectObjects(e))?t:[];jr.layers.set($i.STATIC);let n=new Map;return i.reduce(((t,e)=>{var i;return n.has(e.object.uuid)||t.push(null==(i=this.core.paths.pathsByMeshId.get(e.object.uuid))?void 0:i.path),n.set(e.object.uuid,!0),t}),[])}),"detectPathsUnderMouse")),A(this,"detectWatermarkUnderMouse",u((()=>{var t;if(!Yl.ENABLED||null==this.core.watermark.object)return!1;jr.setFromCamera(this.mouse,this.core.cameraObject),jr.layers.set($i.ALWAYS_ON_TOP);let e=null!=(t=jr.intersectObject(this.core.watermark.object))?t:[];return jr.layers.set($i.STATIC),e.length>0}),"detectWatermarkUnderMouse")),A(this,"detectMapsUnderMouse",u((()=>{jr.setFromCamera(this.mouse,this.core.cameraObject);let t=Array.from(this.core.mapObjects.values()).filter((t=>{var e,i;return(null==(i=null==(e=this.core.options)?void 0:e.dynamicFocus)?void 0:i.baseMap)===t.mapClass||t.visible})).map((t=>t.object)),e=jr.intersectObjects(t,!0).map((function(t){var e;return null==(e=t.object)?void 0:e.parent.name})).filter((t=>t));return(0,D8.default)(e),e.map((t=>this.core.venue.getCollectionItemById("maps",t)))}),"detectMapsUnderMouse")),A(this,"getMouseMapPosition",u((()=>{let t=this.getMouseRayIntersects(this.core.cameraPlane);if(t.length>0){let e=t[t.length-1],i=this.core.mapObjects.get(this.core.currentMap),n=e.point.applyMatrix4((new Ot).copy(i.object.matrix).invert());return{x:n.x+i.mapClass.width/2,y:-n.y+i.mapClass.height/2}}return{x:NaN,y:NaN}}),"getMouseMapPosition")),A(this,"checkMouseIntersectsBlueDot",u((()=>{if(!this.blueDotManager)return!1;let t=this.blueDotManager.getBlueDotForMap(this.core.venue.maps.find((t=>t.id===this.core.currentMap)));if(t){let e=new K,i=new K;t.updateMatrixWorld(),t.getWorldPosition(e),t.getWorldScale(i),i.divideScalar(2),i.setZ(0),e.sub(i);let n=this.core.canvasWidth/2,r=this.core.canvasHeight/2;this.core.cameraObject.updateProjectionMatrix(),this.core.cameraObject.updateMatrixWorld(!0),e.project(this.core.cameraObject);let o={x:e.x*n+n,y:-e.y*r+r},s=Math.pow(this.cursorPos.x-o.x,2),a=Math.pow(this.cursorPos.y-o.y,2);return Math.sqrt(s+a)<=23}return!1}),"checkMouseIntersectsBlueDot")),A(this,"doHoverEffect",u((()=>{if(this.options.disableHover)return;let t=this.detectPolygonsUnderMouse(),e=this.detectCollidersUnderMouse(),i=this.detectPathsUnderMouse(),n=this.detectWatermarkUnderMouse(),r=!1;for(let e=0,i=t.length;e<i;++e){let i=t[e];if(this.core.interactivePolygons[i]){if(i!=this.currentHover){this.currentHover&&(this.onPolygonHoverOut(this.currentHover),this.currentHover=null),this.core.highlightedPolygons[i]||(this.currentHover=i,this.onPolygonHoverOver(i));let t=this.core.textLabelsByPolygonId[Oi(i)];t&&t.showHoverLabel?this.hoverLabel.show(t):this.hoverLabel.hide()}r=!0;break}}r||(this.currentHover&&(this.onPolygonHoverOut(this.currentHover),this.currentHover=null),this.hoverLabel.hide()),r||e.length>0||i.length>0||n?this.rendererDomElement.style.cursor="pointer":this.rendererDomElement.style.cursor="grab"}),"doHoverEffect")),A(this,"onPolygonHoverOut",u((t=>{var e;let i=this.core.polygonMeshesById[t],n=this.core.venue.getCollectionItemById("polygons",t);if(!i)return;let r=this.core.textLabelsByPolygonId[t];r&&r.setColor(r.baseColor);let o=!1;if(i._MIOriginalMaterial){let n=null!=(e=this.core.polygonHoverColorsById[t])?e:this.hoverColor,r=(i.material.length&&i.material[0]||i.material).color.getHex();n.getHex()===r&&!this.core.highlightedPolygons[t]&&(o=!0)}if(o)return this.core.polygonColors.setPolygonColor(n,n.material.color,{highlighted:!1,visible:!1}),!1;r&&this.core.tryRendering()}),"onPolygonHoverOut")),A(this,"onPolygonHoverOver",u((t=>{var e;let i=Oi(t),n=this.core.polygonMeshesById[i],r=this.core.textLabelsByPolygonId[i];if(!n)return;let o=null!=(e=this.core.polygonHoverColorsById[i])?e:this.hoverColor;return this.core.polygonColors.setPolygonColor(t,"#".concat(o.getHexString()),{highlighted:!1}),r&&(r.setColor(r.hoverColor),this.core.tryRendering()),!1}),"onPolygonHoverOver")),A(this,"setHoverColor",u((t=>{this.hoverColor=new at(t)}),"setHoverColor")),this.core=t;let e=this.core.renderer.domElement();this.core.container.style.touchAction="auto",this.rendererDomElement=e,this.hoverLabel=new Pu(this.core.container),this.core.on(15,this.clearMouse),this.core.on(9,(()=>{this.currentHover&&(this.onPolygonHoverOut(this.currentHover),this.currentHover=null),this.hoverLabel.hovering&&this.hoverLabel.hide()})),e.addEventListener("pointerdown",this.onPointerDown,!1),e.addEventListener("pointermove",this.onPointerMove,!1),e.addEventListener("pointerup",this.onPointerUp,!1),e.addEventListener("pointercancel",this.onPointerUp,!1)}zoomOut(){this.core.controls.zoomOut(HZ,ua["ease-out"])}zoomIn(t){let e=this.core.convertScreenCoordinateToMapCoordinate(t.clientX,t.clientY,this.core.venue.maps.find((t=>t.id===this.core.currentMap))),i=this.core.convertTo3DMapPosition(e),n=this.core.controls.getZoom();this.core.controls.animateCamera({position:i,zoom:n/l_e},HZ,ua["ease-in"])}handleMapClick(t){this.calculateMouseCoordinates(t);let e=this.detectPolygonsUnderMouse(),i=this.detectMapsUnderMouse(),n=this.detectCollidersUnderMouse(),r=this.detectPathsUnderMouse(),o=this.detectWatermarkUnderMouse(),{labels:s,markers:a,tooltips:l}=h_e(n),u=this.getMouseMapPosition(),h={lat:NaN,lon:NaN};!isNaN(u.x)&&!isNaN(u.y)&&(h=this.core.venue.maps.find((t=>t.id===this.core.currentMap)).createCoordinateByXY(u.x,u.y)),this.core.publish(16,{position:{latitude:h.lat,longitude:h.lon},polygons:e.filter((t=>this.core.interactivePolygons[t])).map((t=>this.core.venue.getCollectionItemById("polygons",t))),floatingLabels:s,markers:a,tooltips:l,maps:i||[],nearBlueDot:this.checkMouseIntersectsBlueDot(),paths:r}),o&&"function"==typeof Yl.OPTIONS.onClick&&Yl.OPTIONS.onClick();for(let t=0,i=e.length;t<i;++t){let i=e[t];if(this.core.interactivePolygons[i]&&"function"==typeof this.core.onPolygonClicked&&!this.core.onPolygonClicked(i))return}"function"==typeof this.core.onNothingClicked&&this.core.onNothingClicked()}destroy(){this.rendererDomElement.removeEventListener("pointerdown",this.onPointerDown,!1),this.rendererDomElement.removeEventListener("pointermove",this.onPointerMove,!1),this.rendererDomElement.removeEventListener("pointerup",this.onPointerUp,!1),this.rendererDomElement.removeEventListener("pointercancel",this.onPointerUp,!1)}};u(F8,"EventSystem");var B8=F8,k8=B8;E();var WZ="varying vec2 vUV;\n\nvoid main() {\n   vUV = uv;\n\n   gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n}",YZ='precision mediump float;\n\n// The following uniforms are documented in Mappedin.ClosedPolygonManager.js\nuniform vec3 stripe1_color;\nuniform vec3 stripe2_color;\nuniform vec2 surface_dimensions;\nuniform float stripe1_width;\nuniform float stripe1_proportion;\nuniform float stripes_direction; \n\nvarying vec2 vUV;\n\nvec4 stripes(vec2 coord) {\n   vec4 color1 = vec4(stripe1_color, 1.0);\n   vec4 color2 = vec4(stripe2_color, 1.0);\n\n   // Transform the uv to surface coordinates in world space units\n   vec2 coord_absolute = coord * surface_dimensions;\n   \n   // Compute the width of a single texture "tile"\n   // For example, if the first stripe is 10 units and it forms 25% of the tile, we know that the tile itself is 40 units wide\n   float tile_width = stripe1_width / stripe1_proportion;\n\n   // Lerp the x and y coordinates of the component using the "direction" parameter; clever way of "rotating" the stripe without using trig functions, courtesy of https://andreashackel.de/tech-art/stripes-shader-1/\n   float stripe_coord = mix(coord_absolute.x, coord_absolute.y, stripes_direction);\n\n   // Normalize the above "coordinate" to obtain its position within a single texture "tile"\n   float stripe_coord_normalized = mod(stripe_coord, tile_width) / tile_width;\n\n   // Decide which of the two stripes this coordinate belongs to!\n   return mix(color1, color2, step(1. - stripe1_proportion, stripe_coord_normalized));\n}\n\nvoid main() {   \n   gl_FragColor = vec4(stripes(vUV).rgb, 1);\n}\n';function d_e(t){let e=new mT(1,1,1,1),i=500,n=500,r=new K(0,0,0),o=0;if(null!=t&&null!=t.boundingBox&&null!=t.boundingBox.min&&null!=t.boundingBox.max){let e=new Yt(t.boundingBox.min,t.boundingBox.max),s=e.getSize(new K);i=s.x,n=s.y,e.getCenter(r),o=(isNaN(e.max.z)?0:e.max.z)+10}let s=new Xt({vertexShader:WZ,fragmentShader:YZ,uniforms:{stripe1_color:{type:"c",value:new at(.91372549019,.91372549019,.91372549019)},stripe2_color:{type:"c",value:new at(.80784313725,.80784313725,.80784313725)},stripe1_width:{type:"f",value:7},stripe1_proportion:{type:"f",value:.3},stripes_direction:{type:"f",value:2/3},surface_dimensions:{type:"v2",value:new qe(i,n)}}});s.transparent=!0,s.blending=UE,s.depthTest=!1,s.stencilWrite=!0,s.stencilFunc=LT,s.stencilFuncMask=255,s.stencilRef=1,s.stencilFail=Rc,s.stencilZFail=Rc,s.stencilZPass=Rc;let a=new Ft(e,s);return a.position.set(r.x,r.y,o),a.rotation.set(0,0,0),a.scale.set(i,n,1),a}function XZ(t){null!=t&&ef(t.material)}function ZZ(t){return t.stencilWrite=!0,t.stencilFunc=Ux,t.stencilRef=1,t.stencilFuncMask=255,t.stencilFail=Rc,t.stencilZFail=Rc,t.stencilZPass=Og,t}function m_e(t,e,i){null==e||null==i||(null!=t&&i.remove(t),i.add(e))}function g_e(t,e){return Math.abs(t-e)<Number.EPSILON}u(d_e,"makeStencilSheet"),u(XZ,"destroyStencilSheet"),u(ZZ,"enableStencilTestingAndConfigure"),u(m_e,"replaceObjectInScene"),u(g_e,"almostEqual");var z8=class{constructor({scene:t,getPolygonMeshFromId:e,tryRendering:i}){this.scene=t,this.getPolygonMeshFromId=e,this.tryRendering=i,this.stencilSheet=null,this.polygonsMarkedAsClosed={}}onMapChanged(t){t.load().then((()=>{this.currentMap=t,XZ(this.stencilSheet);let e=d_e(t);m_e(this.stencilSheet,e,this.scene),this.stencilSheet=e,this.tryRendering()}))}dispose(){this.markAllPolygonsAsOpen(),XZ(this.stencilSheet)}markPolygonAsClosed(t){if("string"!=typeof t||null!=this.polygonsMarkedAsClosed[t])return;let e=this.getPolygonMeshFromId(t);if(null==e||null==e.material)return;let i=e.geometry;if(Le.assert(i instanceof Ji),Le.assert(null==i.index),e.material.length)return;let n={};n.geometryGroups=[...i.groups],i.clearGroups();let r=e.material,o=ZZ(e.material.clone());e.material=[r,o],e._MIOriginalMaterial&&(e._MIOriginalMaterial.length||(e._MIOriginalMaterial=[e._MIOriginalMaterial,ZZ(e._MIOriginalMaterial.clone())]));let s=i.getAttribute("normal");Le.assert(3===s.itemSize),Le.assert(s.array.length/3===s.count),Le.assert(s.count%3==0);let a=new K(0,0,1);for(let t=0;t<s.count;t+=3){let e=(s.getX(t)+s.getX(t+1)+s.getX(t+2))/3,n=(s.getY(t)+s.getY(t+1)+s.getY(t+2))/3,r=(s.getZ(t)+s.getZ(t+1)+s.getZ(t+2))/3;g_e(new K(e,n,r).normalize().dot(a),1)?i.addGroup(t,3,1):i.addGroup(t,3,0)}this.tryRendering(),this.polygonsMarkedAsClosed[t]=n}markPolygonAsOpen(t){if("string"!=typeof t||null==this.polygonsMarkedAsClosed[t])return;let e=this.polygonsMarkedAsClosed[t],i=this.getPolygonMeshFromId(t),n=i.geometry;n.clearGroups(),e.geometryGroups.forEach((({start:t,count:e,materialIndex:i})=>n.addGroup(t,e,i))),ef(i.material[1]),i.material=i.material[0],i._MIOriginalMaterial&&i._MIOriginalMaterial.length&&(i._MIOriginalMaterial=i._MIOriginalMaterial[0]),delete this.polygonsMarkedAsClosed[t],this.tryRendering()}markAllPolygonsAsOpen(){for(let t in this.polygonsMarkedAsClosed)this.markPolygonAsOpen(t)}};u(z8,"ClosedPolygonManager");var U8=z8,JR=U8;E();var v_e=!1,G8=class{constructor(t){A(this,"textureLoader",new fa),A(this,"data"),this.data=t}async loadMapPolygons(){}loadImage(t){let e=this.data.get(t.split(/[\/\.]/)[1]);return new Promise(((i,n)=>{v_e&&Le.log("loading image: ",t);let r=new Blob([e]),o=URL.createObjectURL(r);this.textureLoader.load(o,(t=>{t.colorSpace=Lr,i(t)}),(()=>{}),n)}))}};u(G8,"BinaryAssetManager");var Kg=G8;E(),E();var Z3=1*devicePixelRatio;function y_e(t,e){return e.x+e.w<t.x+t.w&&e.x>t.x&&e.y>t.y&&e.y+e.h<t.y+t.h}function V8(t,e){let i=e.x,n=e.y,r=e.x+e.w,o=e.y+e.h,s=t.x,a=t.y,l=t.x+t.w,u=t.y+t.h;return i<l&&s<r&&n<u&&a<o}function x_e(t,e){let[i,n]=e;return i>=t.x&&i<=t.x+t.w&&n>=t.y&&n<=t.y+t.h}u(y_e,"contains"),u(V8,"intersects"),u(x_e,"intersectPoint");var H8=class{constructor(t,e,i,n,r){A(this,"x"),A(this,"y"),A(this,"w"),A(this,"h"),A(this,"userData"),this.userData=typeof r>"u"?null:r,this.x=t-Z3,this.y=e-Z3,this.w=i+2*Z3,this.h=n+2*Z3}contains(t){return t!==this&&y_e(this,t)}intersects(t){return V8(this,t)}intersectsPoint(t){return x_e(this,t)}draw(t){t.fillStyle="rgba(123,222,26, 0.5)",t.fillRect(this.x,this.y,this.w,this.h)}};u(H8,"Rectangle");var Ra=H8,id=class t{constructor(t,e){A(this,"boundary"),A(this,"capacity",4),A(this,"objects",[]),A(this,"topLeft"),A(this,"topRight"),A(this,"bottomLeft"),A(this,"bottomRight"),A(this,"divided",!1),A(this,"parent"),this.parent=e,this.boundary=t}getSize(){return this.divided?this.objects.length+this.topLeft.getSize()+this.topRight.getSize()+this.bottomLeft.getSize()+this.bottomRight.getSize():this.objects.length}subdivide(){let{x:e,y:i,w:n,h:r}=this.boundary;this.topLeft=new t(new Ra(e,i,n/2,r/2),this),this.topRight=new t(new Ra(e+n/2,i,n/2,r/2),this),this.bottomLeft=new t(new Ra(e,i+r/2,n/2,r/2),this),this.bottomRight=new t(new Ra(e+n/2,i+r/2,n/2,r/2),this),this.divided=!0}queryRect(t){let e=[];return this.boundary.intersects(t)?(e.push(...this.objects),this.divided&&(Vc(e,this.topLeft.queryRect(t)),Vc(e,this.topRight.queryRect(t)),Vc(e,this.bottomLeft.queryRect(t)),Vc(e,this.bottomRight.queryRect(t))),e):[]}queryPoint(t){let e=[];return this.boundary.intersectsPoint(t)?(e.push(...this.objects),this.divided&&(Vc(e,this.topLeft.queryPoint(t)),Vc(e,this.topRight.queryPoint(t)),Vc(e,this.bottomLeft.queryPoint(t)),Vc(e,this.bottomRight.queryPoint(t))),e):[]}insert(t){return!!this.boundary.contains(t)&&(this.objects.length<this.capacity?(this.objects.push(t),!0):(this.divided||this.subdivide(),!1===(this.topLeft.insert(t)||this.topRight.insert(t)||this.bottomLeft.insert(t)||this.bottomRight.insert(t))&&this.objects.push(t),!0))}drawObjects(t){this.objects.forEach((e=>e.draw(t))),this.divided&&(this.topLeft.drawObjects(t),this.topRight.drawObjects(t),this.bottomLeft.drawObjects(t),this.bottomRight.drawObjects(t))}draw(t){t.rect(this.boundary.x,this.boundary.y,this.boundary.w,this.boundary.h),this.divided&&(this.topLeft.draw(t),this.topRight.draw(t),this.bottomLeft.draw(t),this.bottomRight.draw(t)),t.strokeStyle="black",t.lineWidth=4,t.stroke()}};u(id,"QuadTree");var F2=id,j8=!1,b_e=!1,__e=!1,Q3=10*devicePixelRatio,K3=100,MN="LOW_PRIORITY",Q8=class extends Vp{get strategies(){let t=u((()=>{}),"noop");return[{name:"left",getBoundingBox:u((t=>[0,t.totalHeight,-Q3,5]),"leftBoundingBox"),onStrategySelected:t},{name:"top",getBoundingBox:u((t=>[-Q3,5,0,t.totalWidth]),"topBoundingBox"),onStrategySelected:t},{name:"right",getBoundingBox:u((t=>[0,t.totalHeight,t.totalWidth-5,t.totalWidth+Q3]),"rightBoundingBox"),onStrategySelected:t},{name:"bottom",getBoundingBox:u((t=>[t.totalHeight-5,t.totalHeight+Q3,0,t.totalWidth]),"bottomBoundingBox"),onStrategySelected:t}]}};u(Q8,"OffscreenCollider");var ji,rd,J3,$3,Jg,sd,W8=Q8,QZ=u(((t,e)=>e.length?(e.splice(Y8(t,e),0,t),e):(e.push(t),e)),"insertOne"),KZ=u(((t,e)=>(e.length&&e.splice(e.indexOf(t),1),e)),"removeOne"),Y8=u(((t,e,i,n)=>{let r=i||0,o=n||e.length,s=Math.floor(r+(o-r)/2);return e[s].rank===t.rank?s:o-r<=1?e[s].rank<t.rank?s:s+1:e[s].rank>t.rank?Y8(t,e,s,n):Y8(t,e,i,s)}),"locationOf"),K8=class{constructor(t){A(this,"colliderCanvas"),A(this,"debugCanvas"),A(this,"colliderCanvasContext"),A(this,"debugCanvasContext"),A(this,"collisionEngineContainerEl"),A(this,"stepsX"),A(this,"stepsY"),A(this,"totalWidth"),A(this,"totalHeight"),A(this,"project"),A(this,"colliders",new Map),A(this,"offscreenRanges",[]),te(this,ji,{}),te(this,rd,!1),A(this,"initialized",!1),A(this,"core"),A(this,"screen"),A(this,"debouncedUpdate"),A(this,"updateStartEvents"),A(this,"updateEndEvents"),A(this,"init",u(((t,e)=>{this.project=e,t.appendChild(this.collisionEngineContainerEl),t.appendChild(this.colliderCanvas),this.totalWidth=t.clientWidth,this.totalHeight=t.clientHeight,this.screen=new Ra(0,0,this.totalWidth,this.totalHeight),this.colliderCanvas.width=this.totalWidth*devicePixelRatio,this.colliderCanvas.height=this.totalHeight*devicePixelRatio,this.colliderCanvas.style.width=this.totalWidth+"px",this.colliderCanvas.style.height=this.totalHeight+"px",j8&&(this.debugCanvasContext=this.debugCanvas.getContext("2d"),t.appendChild(this.debugCanvas),this.debugCanvas.width=this.totalWidth,this.debugCanvas.height=this.totalHeight,this.debugCanvas.style.width=this.totalWidth+"px",this.debugCanvas.style.height=this.totalHeight+"px",this.debugCanvas.style.opacity="0.4");let i=new W8({rank:999});this.offscreenRanges=i.strategies.map((({getBoundingBox:t})=>t({x:0,y:0,totalHeight:this.totalHeight,totalWidth:this.totalWidth}).map((t=>Math.round(t))))),this.initialized=!0,M(this,rd)||(M(this,J3).call(this),ce(this,rd,!0)),M(this,sd).call(this)}),"init")),A(this,"handleBeginUpdate",u((t=>{if(!1===this.updateStartEvents[t.type])this.beginUpdate();else if(null!=t.message){let{zooming:e,rotating:i,tilting:n}=t.message;(e||i||n)&&this.beginUpdate()}}),"handleBeginUpdate")),A(this,"handleEndUpdate",u((t=>{if(!1===this.updateEndEvents[t.type])this.update();else if(null!=t.message){let{zooming:e,rotating:i,tilting:n}=t.message;(e||i||n)&&this.update()}}),"handleEndUpdate")),te(this,J3,u((()=>{ce(this,rd,!0);for(let t in this.updateStartEvents)this.core.controls.dispatcher.addEventListener(t,this.handleBeginUpdate);for(let t in this.updateEndEvents)this.core.controls.dispatcher.addEventListener(t,this.handleEndUpdate);this.core.on(6,M(this,Jg)),this.core.on(7,M(this,sd)),this.core.on(8,M(this,Jg)),this.core.on(32,M(this,sd))}),"#addListeners")),te(this,$3,u((()=>{for(let t in this.updateStartEvents)this.core.controls.dispatcher.removeEventListener(t,this.handleBeginUpdate);for(let t in this.updateEndEvents)this.core.controls.dispatcher.removeEventListener(t,this.handleEndUpdate);this.core.off(6,M(this,Jg)),this.core.off(7,M(this,sd)),ce(this,rd,!1)}),"#removeListeners")),te(this,Jg,u((()=>{let t=this.core.visibleMapsInCurrentScene.map((t=>t.id))||[];this.colliders.forEach((t=>{t.disable(!1)})),t.forEach((t=>{null!=M(this,ji)[t]&&(M(this,ji)[t].needsSort=!0)})),this.update()}),"#onSetSceneStart")),te(this,sd,u((()=>{let t=this.core.visibleMapsInCurrentScene.map((t=>t.id))||[];this.colliders.forEach((e=>{var i;(t.includes(e.mapId)||JZ(e,null==(i=this.core.options)?void 0:i.dynamicFocus))&&e.enable(!1)})),t.forEach((t=>{null!=M(this,ji)[t]&&(M(this,ji)[t].needsSort=!0)})),this.update()}),"#onSetSceneEnd")),A(this,"qtree"),A(this,"interactiveCollidersQTree"),A(this,"recompute",u((()=>{if(!this.initialized)return;let t,e,i,[n,r,o,s]=[1/0,1/0,-1/0,-1/0],a=this.offscreenRanges.map((t=>{let e=t[3]-t[2],i=t[1]-t[0];return n=Math.min(n,t[2]),o=Math.max(o,t[3]),r=Math.min(r,t[0]),s=Math.max(s,t[1]),new Ra(Math.round(t[2]*devicePixelRatio),Math.round(t[0]*devicePixelRatio),Math.round(e*devicePixelRatio),Math.round(i*devicePixelRatio))})),l=this.sortedColliders;for(let a of l)t=a.position,e=a.mapId,a.getBoundingBoxForCurrentStrategy=void 0,a.enabled&&(i=this.project(t,e),"function"==typeof a.colliderDidUpdatePosition&&a.colliderDidUpdatePosition([i.x,i.y]),a._bboxes=a.strategies.map((({name:t,getBoundingBox:e,onStrategySelected:l})=>{let u=e({x:i.x,y:i.y}),h=u[3]-u[2],c=u[1]-u[0];return n=Math.min(n,u[2]),o=Math.max(o,u[3]),r=Math.min(r,u[0]),s=Math.max(s,u[1]),null==a._bboxes&&(a._bboxes=[]),[t,new Ra(Math.round(u[2]*devicePixelRatio),Math.round(u[0]*devicePixelRatio),Math.round(h*devicePixelRatio),Math.round(c*devicePixelRatio),{collider:a}),l,e]})));let u,h=new Ra(Math.round(n*devicePixelRatio)-K3,Math.round(r*devicePixelRatio)-K3,Math.round(o*devicePixelRatio-n*devicePixelRatio)+2*K3,Math.round(s*devicePixelRatio-r*devicePixelRatio)+2*K3);this.qtree=new F2(h),a.forEach((t=>{this.qtree.insert(t)}));for(let t=0;t<l.length;t++){let e=!1;if(u=l[t],null==u._bboxes||!u.enabled)continue;let i,[n,r]=[1/0,null];for(let[,t,o,s]of u._bboxes){let l=this.qtree.queryRect(t).filter((e=>t.intersects(e)));if(i=l.every((t=>a.includes(t))),(l.length<=n||i)&&(r=[t,o,s]),0===l.length){this.qtree.insert(t),u.getBoundingBoxForCurrentStrategy=s,e=!0,u.setAction(1),o(u);break}}if(4===u.rank&&null!=r){let[t,i,n]=r;this.qtree.insert(t),u.getBoundingBoxForCurrentStrategy=n,e=!0,u.setAction(1),i(u)}if(!e&&null!=r&&i){let[t,e,i]=r;this.qtree.insert(t),u.setAction(1),e(u)}else!e&&"function"==typeof u.colliderDidNotFindAHome&&u.colliderDidNotFindAHome();"function"==typeof u.colliderDidUpdateVisiblity&&u.colliderDidUpdateVisiblity()}this.draw(),this.colliderCanvas.classList.remove("interacting")}),"recompute")),A(this,"draw",u((()=>{let t=this.sortedColliders;this.colliderCanvasContext.clearRect(0,0,this.totalWidth*devicePixelRatio,this.totalHeight*devicePixelRatio);for(let e of t)e.offscreen||e instanceof Xo&&e.draw(this.colliderCanvasContext);j8&&this.qtree&&(this.colliderCanvasContext.beginPath(),__e&&this.qtree.draw(this.colliderCanvasContext),this.qtree.drawObjects(this.colliderCanvasContext)),b_e&&null!=this.interactiveCollidersQTree&&this.interactiveCollidersQTree.drawObjects(this.colliderCanvasContext)}),"draw")),A(this,"reposition",u((()=>{var t;if(!this.initialized)return;this.interactiveCollidersQTree=new F2(new Ra(0,0,this.totalWidth*devicePixelRatio,this.totalHeight*devicePixelRatio));let e,i,n,r=this.sortedColliders;for(let o of r)if(e=o.position,i=o.mapId,n=this.project(e,i),o.enabled){if("function"==typeof o.getBoundingBoxForCurrentStrategy){let[e,i,r,s]=o.getBoundingBoxForCurrentStrategy({x:n.x,y:n.y});w_e(o)&&null!=(t=o.options)&&t.interactive&&this.interactiveCollidersQTree.insert(new Ra(r*devicePixelRatio,e*devicePixelRatio,(s-r)*devicePixelRatio,(i-e)*devicePixelRatio,{collider:o})),V8(this.screen,{x:r,y:e,w:s-r,h:i-e})?o.offscreen=!1:o.offscreen=!0}"function"==typeof o.colliderDidUpdatePosition&&o.colliderDidUpdatePosition([n.x,n.y])}this.draw()}),"reposition")),A(this,"add",u(((t,e)=>{e.__engine=this,"function"==typeof e.colliderDidMount&&e.colliderDidMount(),this.colliders.set(t,e),null==M(this,ji)[e.mapId]&&(M(this,ji)[e.mapId]={needsSort:!1,colliders:[]}),QZ(e,M(this,ji)[e.mapId].colliders)}),"add")),A(this,"remove",u((t=>{let e=this.colliders.get(t);null!=e&&(e.disable(),e.__engine=void 0,this.colliders.delete(t),KZ(e,M(this,ji)[e.mapId].colliders))}),"remove")),A(this,"updateMap",u(((t,e,i)=>{let n=this.colliders.get(t);if(null==n)return;n.mapId=i,KZ(n,M(this,ji)[e].colliders),null==M(this,ji)[i]&&(M(this,ji)[i]={needsSort:!1,colliders:[]}),QZ(n,M(this,ji)[i].colliders);let r=this.core.visibleMapsInCurrentScene.map((t=>t.id))||[];r.includes(e)&&n.disable(),r.includes(i)&&n.enable()}),"updateMap")),A(this,"update",u((()=>{this.initialized&&((this.core.visibleMapsInCurrentScene.map((t=>t.id))||[]).forEach((t=>{M(this,ji)[t]&&(M(this,ji)[t].needsSort=!0)})),this.recompute(),this.reposition())}),"update")),A(this,"resize",u((t=>{this.initialized&&(M(this,$3).call(this),this.init(t,this.project),this.update())}),"resize")),A(this,"destroy",u((()=>{for(let t of Array.from(this.colliders.values()))this.remove(t.id)}),"destroy")),this.core=t,this.colliderCanvas=document.createElement("canvas"),this.collisionEngineContainerEl=document.createElement("div"),j8&&(this.debugCanvas=document.createElement("canvas"),this.debugCanvas.classList.add("mappedin__smart-collision-engine-debug__container")),this.colliderCanvas.classList.add("mappedin__smart-collision-engine-debug__container"),this.collisionEngineContainerEl.classList.add("mappedin__smart-collision-engine__container"),this.colliderCanvasContext=this.colliderCanvas.getContext("2d");let{INTERACTION_EVENTS:e,CAMERA_EVENTS:i}=this.core.controls;this.updateStartEvents={[e.USER_DOLLY_START_EVENT.type]:!1,[i.ROTATE_START_EVENT.type]:!1,[i.ZOOM_START_EVENT.type]:!1,[e.USER_TILT_START_EVENT.type]:!1,[i.MULTI_START_EVENT.type]:!0,[i.PEDESTAL_START_EVENT.type]:!1},this.updateEndEvents={[e.USER_DOLLY_END_EVENT.type]:!1,[i.ROTATE_END_EVENT.type]:!1,[i.ZOOM_END_EVENT.type]:!1,[e.USER_TILT_END_EVENT.type]:!1,[i.MULTI_END_EVENT.type]:!0,[i.MULTI_CANCEL_EVENT.type]:!0,[i.PEDESTAL_END_EVENT.type]:!1},this.debouncedUpdate=Da((()=>{this.update()}),10,!0)}get sortedColliders(){return this.initialized?this.core.visibleMapsInCurrentScene.flatMap((t=>{var e;return M(this,ji)[t.id]&&(null==(e=M(this,ji)[t.id].colliders)?void 0:e.length)>0&&!1===M(this,ji)[t.id].needsSort||(null==M(this,ji)[t.id]&&(M(this,ji)[t.id]={needsSort:!0,colliders:[]}),M(this,ji)[t.id].colliders=Array.from(this.colliders.values()).filter((e=>{var i;return M_e(e,t.id,null==(i=this.core.options)?void 0:i.dynamicFocus,this.core.visibleLayersInCurrentScene)})).sort(((t,e)=>e.rank-t.rank)),M(this,ji)[t.id].needsSort=!1),M(this,ji)[t.id].colliders})):[]}beginUpdate(){this.colliderCanvas.classList.add("interacting")}};ji=new WeakMap,rd=new WeakMap,J3=new WeakMap,$3=new WeakMap,Jg=new WeakMap,sd=new WeakMap,u(K8,"SmartCollisionEngine");var X8=K8;function w_e(t){return t instanceof Xo||t instanceof of||t instanceof Wp}function M_e(t,e,i,n){var r;return!!(JZ(t,i)||""!==t.layer&&null!=(r=n[t.mapId])&&r.includes(t.layer)&&t.mapId===e)||t.mapId===e}function JZ(t,e){var i,n;let r=null!=(i=null==e?void 0:e.keepLayersActiveOnBaseMap)?i:[];return(null==(n=null==e?void 0:e.baseMap)?void 0:n.id)===t.mapId&&r.length>0&&r.includes(t.layer)}u(w_e,"isCollider"),u(M_e,"isColliderVisible"),u(JZ,"shouldKeepActiveOnBaseMap");var Z8=X8;E();var e7=class{constructor(t){A(this,"orbit"),A(this,"billboards",new Map),this.orbit=t}add(t,e="Z"){this.billboards.set(t.uuid,[t,e])}remove(t){this.billboards.delete(t.uuid)}update(){for(let[t,e]of this.billboards.values())e.includes("Z")&&(t.rotation.z=this.orbit.rotation.z)}destroy(){this.billboards.clear()}};u(e7,"BillboardManager");var J8=e7,$8=J8;E();var nQ=Bt(Kx());E();var Xl,E_e="white",$Z=u(((t=1)=>'<div style="width: '.concat(32*t,"px; height: ").concat(32*t,'px;">').concat(Jc.get("journey-departure"),"<div>")),"generateDepartureMarker"),eQ=u(((t=1)=>'<div style="width: '.concat(32*t,"px; height: ").concat(32*t,'px;">').concat(Jc.get("journey-destination"),"</div>")),"generateDestinationMarker"),T_e=u((t=>{let e=null==t.direction?t.type:"".concat(t.type,"-").concat(t.direction);return'<div style="width: 40px;\n            height: 40px;\n\t\t\tcursor: pointer;\n            border-radius: 50%;\n\t\t\tbackground: green;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;">\n          <svg\n            height="16"\n            viewBox="0 0 36 36"\n            width="16"\n          >\n            <g fill="'.concat(E_e,'">\n              ').concat(Jc.get(e),"\n            </g>\n          </svg><div>")}),"defaultConnectionFn"),n7=class{constructor(t,e=T_e,i){var n,r;A(this,"tooltip"),A(this,"mapId"),A(this,"toMapId"),te(this,Xl,void 0),A(this,"handleClick",u((t=>{0!==t.tooltips.length&&t.tooltips.find((t=>{var e;return t.id===(null==(e=this.tooltip)?void 0:e.id)}))&&("OVERVIEW"===M(this,Xl).stackedMaps.currentState?M(this,Xl).setMapWithReason(this.mapId,"journey-connection-click"):M(this,Xl).setMapWithReason(this.toMapId,"journey-connection-click"))}),"handleClick")),A(this,"determineDirection",u((()=>{var t,e,i,n;let{mapObjects:r}=M(this,Xl),o=null!=(e=null==(t=r.get(this.mapId))?void 0:t.mapClass.elevation)?e:0,s=null!=(n=null==(i=r.get(this.toMapId))?void 0:i.mapClass.elevation)?n:0;if(o!==s)return o<s?"up":"down"}),"determineDirection")),this.mapId=t.node.map.id,this.toMapId="TakeVortex"===(null==(n=t.action)?void 0:n.type)?t.action.toMap.id:t.action.fromMap.id,ce(this,Xl,i);let o=t.atLocation.type,s=this.determineDirection(),a=e({type:o,direction:s,toMapName:t.action.toMap.name,icon:Jc.get(null==s?o:"".concat(o,"-").concat(s)),isEntering:"TakeVortex"===(null==(r=t.action)?void 0:r.type)});this.tooltip=i.tooltips.createTooltip(t.node,a,{collisionRank:4,padding:0,defaultAnchorType:"top",interactive:!0}),M(this,Xl).on(16,this.handleClick),this.tooltip.updateDimensions()}destroy(){M(this,Xl).off(16,this.handleClick),M(this,Xl).tooltips.removeTooltip(this.tooltip),this.tooltip=null}};Xl=new WeakMap,u(n7,"Connection");var eS,Ni,Ba,$g,nr,mf,od,ih,gf,U2,tS,ad,z2,G2,t7=n7,S_e={displayArrowsOnPath:!0,nearRadius:1.8,farRadius:5.4,color:"#ff834c",flattenPath:!0},A_e={color:"#f5c7b3",displayArrowsOnPath:!1,flattenPath:!0,nearRadius:1.6,farRadius:4.8,showPulse:!1,animateDrawing:!1},C_e={displayArrowsOnPath:!0,nearRadius:1.8,farRadius:5.4,color:"#ff834c",flattenPath:!0},tQ=3,Nu=class t{constructor(t,e={},i){var n,r;A(this,"distance",0),A(this,"accessible",!1),te(this,eS,{}),te(this,Ni,void 0),A(this,"activeDirections"),te(this,Ba,void 0),te(this,$g,void 0),te(this,nr,{}),te(this,mf,[]),te(this,od,void 0),te(this,ih,[]),te(this,gf,new Map),A(this,"setStep",u((t=>{t!==M(this,$g)&&(M(this,Ba).length<2||t<0||t>M(this,Ba).length||(M(this,G2).call(this),M(this,z2).call(this),ce(this,$g,t),this.activeDirections=M(this,Ba)[t],M(this,Ni).currentPath=this.activeDirections.path,M(this,ad).call(this),M(this,U2).call(this)))}),"setStep")),A(this,"setStepByPath",u((t=>{let e=M(this,gf).get(t);if(null==e)return void Le.warn("Cannot set step. Path is not part of journey.");let i=M(this,Ba).indexOf(e);i<0?Le.warn("There was a problem setting this step of the journey."):this.setStep(i)}),"setStepByPath")),te(this,U2,u((()=>{let t=this.activeDirections.path[this.activeDirections.path.length-1],e=this.activeDirections.path[0];"string"==typeof M(this,nr).polygonHighlightColor&&(e.locations.forEach((t=>{t.polygons.forEach((t=>{M(this,Ni).polygonColors.setPolygonColor(t,M(this,nr).polygonHighlightColor)}))})),t.locations.forEach((t=>{t.polygons.forEach((t=>{M(this,Ni).polygonColors.setPolygonColor(t,M(this,nr).polygonHighlightColor)}))})));let i=(M(this,Ba)||[this.activeDirections]).map((t=>t.path[t.path.length-1]));null==i||i.forEach((t=>{let e=eQ(M(this,nr).scale);"function"==typeof M(this,nr).destinationMarkerTemplate&&(M(this,ih)||ce(this,ih,[]),M(this,ih).push(M(this,Ni).markers.add(t,M(this,nr).destinationMarkerTemplate({icon:e,location:t.locations[0]}),{rank:4,anchor:1})))}));let n=$Z(M(this,nr).scale);"function"==typeof M(this,nr).departureMarkerTemplate&&ce(this,od,M(this,Ni).markers.add(e,M(this,nr).departureMarkerTemplate({icon:n}),{rank:4,anchor:1})),M(this,Ni).tryRendering()}),"#updateForJourneyStartOrStepChange")),te(this,tS,u((()=>{if(0===M(this,gf).size){M(this,Ba).forEach((t=>{if(t!==this.activeDirections){let e=M(this,Ni).paths.drawPath(t.path,{...M(this,nr).inactivePathOptions});M(this,gf).set(e,t)}}));let t=M(this,Ni).paths.drawPath(this.activeDirections.path,{...M(this,nr).pathOptions});M(this,gf).set(t,this.activeDirections)}else{let t=this.isMultiFloor;M(this,gf).forEach(((e,i)=>{M(this,Ni).paths.redrawPath(i,e===this.activeDirections?{...M(this,nr).pathOptions,drawConnectionSegments:t,connectionPathOptions:M(this,nr).connectionPathOptions}:{...M(this,nr).inactivePathOptions,drawConnectionSegments:t,connectionPathOptions:M(this,nr).connectionPathOptions})}))}}),"#redrawAllPaths")),te(this,ad,u((()=>{this.isMultiFloor&&(M(this,mf).forEach((t=>t.destroy())),ce(this,mf,[]),ce(this,mf,this.activeDirections.instructions.filter((t=>{var e,i;return"TakeVortex"===(null==(e=t.action)?void 0:e.type)||"ExitVortex"===(null==(i=t.action)?void 0:i.type)})).map((t=>new t7(t,M(this,nr).connectionTemplate,M(this,Ni)))).filter((t=>t)))),M(this,tS).call(this),M(this,Ni).tryRendering()}),"#updateForMapChange")),te(this,z2,u((()=>{if(!1!==M(this,nr).polygonHighlightColor){let t=this.activeDirections.path[this.activeDirections.path.length-1];this.activeDirections.path[0].locations.forEach((t=>{t.polygons.forEach((t=>{M(this,Ni).polygonColors.clearPolygonColor(t.id)}))})),t.locations.forEach((t=>{t.polygons.forEach((t=>{M(this,Ni).polygonColors.clearPolygonColor(t.id)}))}))}}),"#unhighlightPolygons")),te(this,G2,u((()=>{M(this,ih).length&&M(this,ih).forEach((t=>{M(this,Ni).markers.remove(t)})),ce(this,ih,[]),null!=M(this,od)&&M(this,Ni).markers.remove(M(this,od)),ce(this,od,void 0),M(this,mf).forEach((t=>t.destroy())),ce(this,mf,[])}),"#removeAllMarkers")),ce(this,Ni,i),ce(this,nr,{scale:1,polygonHighlightColor:"#7babc8",destinationMarkerTemplate:()=>eQ(),departureMarkerTemplate:()=>$Z(),...e,pathOptions:{...S_e,...null==e?void 0:e.pathOptions},inactivePathOptions:{...A_e,...null==e?void 0:e.inactivePathOptions},connectionPathOptions:{...C_e,...null==e?void 0:e.connectionPathOptions}}),null!=(n=null==e?void 0:e.pathOptions)&&n.farRadius||(M(this,nr).pathOptions.farRadius=M(this,nr).pathOptions.nearRadius*tQ),null!=(r=null==e?void 0:e.inactivePathOptions)&&r.farRadius||(M(this,nr).inactivePathOptions.farRadius=M(this,nr).inactivePathOptions.nearRadius*tQ),Array.isArray(t)?(ce(this,Ba,t),this.activeDirections=M(this,Ba)[0],ce(this,$g,0),M(this,Ni).currentPath=t[0].path):(ce(this,Ba,[t]),this.activeDirections=t,M(this,Ni).currentPath=t.path),ce(this,Ni,i),M(this,Ni).on(7,M(this,ad)),M(this,ad).call(this),M(this,U2).call(this)}get isMultiFloor(){return this.mapIdsInvolvedInJourney.length>1}get mapsInJourney(){return this.mapIdsInvolvedInJourney.map((t=>{var e;return null==(e=M(this,Ni).mapObjects.get(t))?void 0:e.mapClass}))}get buildingsInJourney(){return this.mapsInJourney.reduce(((t,e)=>(e&&null!==e.mapGroup&&(t[e.mapGroup.id]||(t[e.mapGroup.id]=[]),t[e.mapGroup.id].push(e)),t)),{})}get mapIdsInvolvedInJourney(){let t={};M(this,Ba).forEach((e=>{e.path.forEach((e=>t[e.map.id]=!0))}));let e=Object.keys(t);return M(this,eS).mapsInvolvedInJourney=e,e}static create(e,i,n){return null!=t.instance&&t.instance.destroy(),t.instance=new t(e,i,n),n.publish(29),t.instance}destroy(){M(this,z2).call(this),M(this,G2).call(this),M(this,Ni).paths.removeAllPaths(),M(this,Ni).currentPath=void 0,M(this,Ni).off(7,M(this,ad)),M(this,Ni).publish(30),t.instance=null}};eS=new WeakMap,Ni=new WeakMap,Ba=new WeakMap,$g=new WeakMap,nr=new WeakMap,mf=new WeakMap,od=new WeakMap,ih=new WeakMap,gf=new WeakMap,U2=new WeakMap,tS=new WeakMap,ad=new WeakMap,z2=new WeakMap,G2=new WeakMap,u(Nu,"JourneyController"),A(Nu,"instance",null);var Wt,Ko=Nu,s7=class{constructor(t){var e,i;te(this,Wt,void 0),A(this,"options",{}),A(this,"enabled",!1),A(this,"stackScene"),A(this,"directions"),A(this,"hasOutdoorGeometry",!1),A(this,"needsUpdate",!1),A(this,"currentState","INACTIVE"),A(this,"mapsInJourney",[]),A(this,"getZoomIntoMapOptions",u((t=>{if("map"in t&&"nodes"in t&&"rotation"in t){let{map:e,nodes:i,rotation:n}=t;return[new Zc([e],M(this,Wt)),{activeMap:e,focusOn:{targets:{nodes:i},options:{tilt:.7,rotation:n,easing:"ease-in-out",...t.cameraTransform}}}]}}),"getZoomIntoMapOptions")),A(this,"getDisableOptions",u((t=>{if("map"in t)return[new Zc([t.map],M(this,Wt)),{activeMap:t.map}]}),"getDisableOptions")),A(this,"getShowOverviewOptions",u((t=>{var e;if("stackScene"in t)return[t.stackScene,{activeMap:t.stackScene.currentMap,focusOn:{options:{tilt:1.2,duration:500}},verticalDistanceBetweenMaps:null==(e=this.options)?void 0:e.verticalDistanceBetweenMaps}]}),"getShowOverviewOptions")),A(this,"getScrollToMapOptions",u((t=>{if("stackScene"in t&&"map"in t&&"nodes"in t){let{stackScene:e,map:i,nodes:n}=t;return[e,{focusOn:{targets:{nodes:n},options:{tilt:.7,easing:"ease-in-out"}},activeMap:i}]}}),"getScrollToMapOptions")),A(this,"getEnableOptions",u((t=>{"directions"in t&&(this.directions=t.directions,this.stackScene=new l2(this.mapsInJourney,M(this,Wt)))}),"getEnableOptions")),A(this,"getShowOverviewTransition",u(((t,e=!1)=>{var i;let[n,r]=t,o=null==(i=M(this,Wt).sceneManager)?void 0:i.currentScene,s=n;return async()=>{M(this,Wt).publish(6),await M(this,Wt).tileManager.fadeOut(),await s.prepare(M(this,Wt).sceneManager,r);let t=s.mapObjects.get(s.currentMap.id);t.object.position.z=s.computeMapZ(t,s.mapObjectsArray.indexOf(t),r),o&&(null==o||o.mapObjectsArray.forEach((t=>{t.onInvisible()}))),s.mapObjectsArray.forEach((t=>{t.onInvisible()})),M(this,Wt).controls.setPedestal(t.object.position.z),M(this,Wt).scene.add(s.object),s.object.add(t.object),this.hasOutdoorGeometry&&await Promise.all(s.mapObjectsArray.map((t=>t.fadeOut("outdoor-geometry")))),r.animate?await Promise.all([M(this,Wt).tileManager.fadeOut()]):s.mapObjectsArray.forEach(((t,e)=>{t.object.position.z=s.computeMapZ(t,e,r),s.object.add(t.object)})),s.createStackBoundingBox(),s.resize(),r.animate?(await s.focusOnStackBox({...r,autoFocusOnActiveMap:!0}),await s.expandMaps(s.mapObjectsArray,r).start()):await Promise.all([s.focusOnStackBox({...r,autoFocusOnActiveMap:!0}),...s.mapObjectsArray.map((t=>t.fadeIn("default").start())),...this.hasOutdoorGeometry?s.mapObjectsArray.map((t=>t.fadeOut("outdoor-geometry").start())):[]]),e||s.mapObjectsArray.forEach((t=>{t.onVisible()})),s.postRender(),s.lockControls(),M(this,Wt).scene.remove(o.object),e||M(this,Wt).publish(7)}}),"getShowOverviewTransition")),A(this,"getZoomInToMapTransition",u((t=>{var e;let[i,n]=t,r=null==(e=M(this,Wt).sceneManager)?void 0:e.currentScene;return async()=>{var t,e;M(this,Wt).publish(6);let o=i.mapObjects.get(n.activeMap.id),s=o.object.position.z;await i.prepare(M(this,Wt).sceneManager,n),o.object.position.z=s,M(this,Wt).paths.hideConnectionSegments(),r.destroyLabels(),i.mapObjects.forEach((t=>{i.object.add(null==t?void 0:t.object),t.onInvisible()})),r&&(null==r||r.mapObjectsArray.forEach((t=>{t.onInvisible()}))),M(this,Wt).scene.add(i.object),await Promise.all([o.fadeIn().start(),i.focusOnCurrentMap({...n,autoFocusOnActiveMap:!0}),...r.mapObjectsArray.filter((t=>t!==o)).map((t=>t.fadeOut().start()))]),i.mapObjectsArray.forEach((t=>{t.onVisible()})),null!=(t=M(this,Wt).outdoorViewController)&&t.enabled&&(null==(e=M(this,Wt).outdoorViewController)||e.show()),r.unmount(),i.postRender(),M(this,Wt).scene.remove(r.object),M(this,Wt).publish(7)}}),"getZoomInToMapTransition")),A(this,"getScrollToMapTransition",u(((t,e=!1)=>{var i;let[n,r]=t,o=null==(i=M(this,Wt).sceneManager)?void 0:i.currentScene;return async()=>{o.currentMap=r.activeMap,await o.scrollToMap(r.activeMap),e||M(this,Wt).publish(7)}}),"getScrollToMapTransition")),A(this,"getDisableTransition",u((t=>{let[e,i]=t,n=M(this,Wt).sceneManager.currentScene;return async()=>{var t,r,o;let s=n.mapObjects.get(n.currentMap.id);M(this,Wt).publish(6);let a=e.mapObjects.get(i.activeMap.id);n instanceof l2&&n.destroyLabels(),await e.prepare(M(this,Wt).sceneManager,i),n&&(null==n||n.mapObjectsArray.forEach((t=>{t.onInvisible()}))),e.mapObjectsArray.forEach((t=>{t.onInvisible()})),M(this,Wt).scene.add(e.object),e.mapObjects.forEach((t=>{e.object.add(null==t?void 0:t.object)})),M(this,Wt).paths.hideConnectionSegments(),await Promise.all([n instanceof l2&&n.contractMaps(s).start(),n.focusOnCurrentMap({...i,autoFocusOnActiveMap:!0})].filter((t=>t))),M(this,Wt).scene.remove(n.object),M(this,Wt).tryRendering(),a.object.position.z=0,M(this,Wt).controls.setPedestal(0),e.focusOnCurrentMap({...i,focusOn:{...i.focusOn,options:{...null==(t=i.focusOn)?void 0:t.options,duration:150}},autoFocusOnActiveMap:!0}),n.unmount(),await Promise.all([M(this,Wt).tileManager.fadeIn(),...e.mapObjectsArray.map((t=>t.fadeIn().start()))]),null!=(r=M(this,Wt).outdoorViewController)&&r.enabled&&(null==(o=M(this,Wt).outdoorViewController)||o.show()),e.mapObjectsArray.forEach((t=>{t.onVisible()})),e.postRender(),M(this,Wt).publish(7)}}),"getDisableTransition")),A(this,"getEnableTransition",u((()=>()=>{}),"getEnableTransition")),A(this,"states",{INACTIVE:{actions:{enable:["ACTIVE",[t=>this.getEnableOptions(t)]]}},ACTIVE:{actions:{disable:["INACTIVE",[t=>this.getDisableTransition(this.getDisableOptions(t))]],showOverview:["OVERVIEW",[t=>{let e=this.getShowOverviewOptions(t);if(null!=e&&"directions"in t&&"map"in t){let[i,n]=e;return this.getShowOverviewTransition([i,(0,nQ.default)({},n,e,{activeMap:t.map,animate:!0,focusOn:{options:{tilt:1.2,duration:500}}})])}return Promise.reject()}]]}},OVERVIEW:{actions:{disable:["INACTIVE",[t=>this.getDisableTransition(this.getDisableOptions(t))]],zoomInToMap:["ZOOMED_IN",[t=>this.getScrollToMapTransition(this.getScrollToMapOptions(t),!0),t=>this.getZoomInToMapTransition(this.getZoomIntoMapOptions(t))]],scrollToMap:["OVERVIEW",[t=>this.getScrollToMapTransition(this.getScrollToMapOptions(t))]]}},ZOOMED_IN:{actions:{disable:["INACTIVE",[t=>this.getDisableTransition(this.getDisableOptions(t))]],showOverview:["OVERVIEW",[t=>this.getShowOverviewTransition(this.getShowOverviewOptions(t))]],zoomInToMap:["ZOOMED_IN",[t=>this.getShowOverviewTransition(this.getShowOverviewOptions(t),!0),t=>this.getScrollToMapTransition(this.getScrollToMapOptions(t),!0),t=>this.getZoomInToMapTransition(this.getZoomIntoMapOptions(t))]]}}}),A(this,"disable",u((()=>{M(this,Wt).setState("explore"),this.options={};let t=this.transition(this.currentState,"disable");return null!=t?(this.enabled=!1,this.mapsInJourney=[],this.exec(t,{map:this.currentMap})):Promise.reject()}),"disable")),A(this,"enable",u((t=>{if(null==Ko.instance)return Promise.reject("Can't enable stacked maps without a journey enabled");let e=this.transition(this.currentState,"enable");if(null!=e){this.options=t||{},M(this,Wt).setState("STACKED"),this.enabled=!0;let i=Ko.instance.activeDirections;return this.mapsInJourney=Ko.instance.mapsInJourney,this.exec(e,{directions:i})}return Promise.reject()}),"enable")),A(this,"showOverview",u((async()=>{let t=this.transition(this.currentState,"showOverview");return this.exec(t,{map:this.mapsInJourney.includes(this.currentMap)?this.currentMap:this.mapsInJourney[0],stackScene:this.stackScene,directions:this.directions})}),"showOverview")),A(this,"scrollToMap",u((t=>{let e=this.transition(this.currentState,"scrollToMap");return this.exec(e,{stackScene:this.stackScene,map:t,rotation:void 0,nodes:this.nodesInJourney.filter((e=>e.map===t))})}),"scrollToMap")),A(this,"zoomInToMap",u(((t,e)=>{let i=t||this.currentMap,n=this.nodesInJourney.filter((t=>t.map===i)),r=this.transition(this.currentState,"zoomInToMap");return this.exec(r,{map:t,nodes:n,stackScene:this.stackScene,rotation:M(this,Wt).controls.getRotation(),cameraTransform:e})}),"zoomInToMap")),ce(this,Wt,t);let n=null==(i=null==(e=M(this,Wt).options)?void 0:e.loadOptions)?void 0:i.outdoorGeometryLayers;this.hasOutdoorGeometry=Array.isArray(n)&&n.length>0}transition(t,e){var i,n;let r=null==(i=this.states[t])?void 0:i.actions[e],o=null!=(n=null==r?void 0:r[0])?n:t;if(null!=o&&null!=r)return this.currentState=o,this.needsUpdate=!0,r[1];this.needsUpdate=!1}async exec(t,e){if(this.needsUpdate&&null!=t&&Array.isArray(t)&&t.filter((t=>t)).length>0){for(let i of t){let t=i(e);"function"==typeof t&&await t()}return Promise.resolve()}}get nodesInJourney(){return Array.isArray(this.directions)?this.directions.map((t=>t.path)).flat():this.directions.path}get currentMap(){return M(this,Wt).venue.getCollectionItemById("maps",M(this,Wt).currentMap)}};Wt=new WeakMap,u(s7,"StackedMapsController");var i7=s7,r7=i7;E();var zQ=Bt(iQ());E(),E(),E();var P_e="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",uQ="",ga="srgb",iS="srgb-linear",I_e=Number(zc.replace(/\D+/g,"")),cQ=I_e>=152,O_e=new Map([[rl,iS],[ai,ga]]),L_e=new Map([[iS,rl],[ga,ai]]);function nS(t){return null===t?null:cQ?t.outputColorSpace:O_e.get(t.outputEncoding)}function e0(t,e){null!==t&&(cQ?t.colorSpace=e:t.encoding=L_e.get(e))}u(nS,"getOutputColorSpace"),u(e0,"setTextureColorSpace");var V2,H2,j2,W2,Y2,X2,Z2,on={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},hQ={DEPTH:0,LUMA:1,COLOR:2},sh={NONE:0,DEPTH:1,CONVOLUTION:2},xi={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},h7={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},D_e={DISABLED:0,DEPTH:1,CUSTOM:2},Ru={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},N_e="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n}",R_e="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",B_e=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],k_e=(u(V2=class extends Xt{constructor(t=new Fi){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new St(null),texelSize:new St(new Fi),scale:new St(1),kernel:new St(0)},blending:Nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:N_e,vertexShader:R_e}),this.setTexelSize(t.x,t.y),this.kernelSize=h7.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return B_e[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,.5*t,.5*e)}setSize(t,e){let i=1/t,n=1/e;this.uniforms.texelSize.value.set(i,n,.5*i,.5*n)}},"KawaseBlurMaterial"),V2),q_e="#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",fQ=(u(H2=class extends Xt{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new St(null),opacity:new St(1)},blending:Nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:q_e,vertexShader:P_e})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},"CopyMaterial"),H2),F_e="#include <packing>\n#include <clipping_planes_pars_fragment>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <clipping_planes_fragment>\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);\n#if DEPTH_PACKING == 3201\nfloat fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\n#else\nfloat fragCoordZ=texture2D(depthBuffer,projTexCoord).r;\n#endif\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#else\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#endif\nfloat depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}",U_e="#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <skinbase_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\n#include <clipping_planes_vertex>\n}",z_e=(u(j2=class extends Xt{constructor(t=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new St(null),cameraNear:new St(.3),cameraFar:new St(1e3)},blending:Nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:F_e,vertexShader:U_e}),this.depthBuffer=t,this.depthPacking=Ig,this.copyCameraSettings(e)}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Ig){this.depthBuffer=t,this.depthPacking=e}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof as?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},"DepthComparisonMaterial"),j2),G_e="varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",V_e="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}",H_e=(u(W2=class extends Xt{constructor(t=new qe,e=hQ.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:zc.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new St(null),depthBuffer:new St(null),predicationBuffer:new St(null),texelSize:new St(t)},blending:Nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:G_e,vertexShader:V_e}),this.edgeDetectionMode=e}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=da){this.depthBuffer=t,this.depthPacking=e}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(t){this.defines.EDGE_DETECTION_MODE=t.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(t){this.edgeDetectionMode=t}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(t){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=t.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(t){this.localContrastAdaptationFactor=t}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(t){this.defines.EDGE_THRESHOLD=t.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*t).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(t){this.edgeDetectionThreshold=t}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(t){this.defines.PREDICATION_MODE=t.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(t){this.predicationMode=t}set predicationBuffer(t){this.uniforms.predicationBuffer.value=t}setPredicationBuffer(t){this.uniforms.predicationBuffer.value=t}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(t){this.defines.PREDICATION_THRESHOLD=t.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(t){this.predicationThreshold=t}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(t){this.defines.PREDICATION_SCALE=t.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(t){this.predicationScale=t}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(t){this.defines.PREDICATION_STRENGTH=t.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(t){this.predicationStrength=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},"EdgeDetectionMaterial"),W2),j_e="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}",W_e="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Y_e=(u(Y2=class extends Xt{constructor(t,e,i,n,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:zc.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new St(null),depthBuffer:new St(null),resolution:new St(new qe),texelSize:new St(new qe),cameraNear:new St(.3),cameraFar:new St(1e3),aspect:new St(1),time:new St(0)},blending:Nr,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),t&&this.setShaderParts(t),e&&this.setDefines(e),i&&this.setUniforms(i),this.copyCameraSettings(n)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=da){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=j_e.replace(xi.FRAGMENT_HEAD,t.get(xi.FRAGMENT_HEAD)||"").replace(xi.FRAGMENT_MAIN_UV,t.get(xi.FRAGMENT_MAIN_UV)||"").replace(xi.FRAGMENT_MAIN_IMAGE,t.get(xi.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=W_e.replace(xi.VERTEX_HEAD,t.get(xi.VERTEX_HEAD)||"").replace(xi.VERTEX_MAIN_SUPPORT,t.get(xi.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(let e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(let e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(let e of t)this.extensions[e]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof as?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){let i=this.uniforms;i.resolution.value.set(t,e),i.texelSize.value.set(1/t,1/e),i.aspect.value=t/e}static get Section(){return xi}},"EffectMaterial"),Y2),X_e="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",Z_e="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",Q_e=(u(X2=class extends Xt{constructor(t=new qe){super({name:"OutlineMaterial",uniforms:{inputBuffer:new St(null),texelSize:new St(new qe)},blending:Nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:X_e,vertexShader:Z_e}),this.uniforms.texelSize.value.set(t.x,t.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},"OutlineMaterial"),X2),K_e="#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",J_e="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",$_e=(u(Z2=class extends Xt{constructor(t=new qe,e=new qe){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new St(null),searchTexture:new St(null),areaTexture:new St(null),resolution:new St(e),texelSize:new St(t)},blending:Nr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:K_e,vertexShader:J_e})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(t){this.uniforms.searchTexture.value=t}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(t){this.uniforms.areaTexture.value=t}setLookupTextures(t,e){this.searchTexture=t,this.areaTexture=e}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(t){let e=Math.min(Math.max(t,0),112);this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(t){this.orthogonalSearchSteps=t}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(t){let e=Math.min(Math.max(t,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(t){this.diagonalSearchSteps=t}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(t){t?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(t){this.diagonalDetection=t}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(t){let e=Math.min(Math.max(t,0),100);this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(t){this.cornerRounding=t}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(t){t?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(t){this.cornerDetection=t}setSize(t,e){let i=this.uniforms;i.texelSize.value.set(1/t,1/e),i.resolution.value.set(t,e)}},"SMAAWeightsMaterial"),Z2),ewe=new Tg,vf=null;function twe(){if(null===vf){let t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);void 0!==(vf=new Ji).setAttribute?(vf.setAttribute("position",new rn(t,3)),vf.setAttribute("uv",new rn(e,2))):(vf.addAttribute("position",new rn(t,3)),vf.addAttribute("uv",new rn(e,2)))}return vf}u(twe,"getFullscreenTriangle");var Q2,K2,J2,$2,eb,tb,nb,ib,Jo=(u(Q2=class{constructor(t="Pass",e=new Oa,i=ewe){this.name=t,this.renderer=null,this.scene=e,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){let e=this.fullscreenMaterial;null!==e&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;null!==e?e.material=t:(e=new Ft(twe(),t),e.frustumCulled=!1,null===this.scene&&(this.scene=new Oa),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=da){}render(t,e,i,n,r){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,i){}dispose(){for(let t of Object.keys(this)){let e=this[t];(e instanceof ti||e instanceof ha||e instanceof Er||e instanceof Jo)&&this[t].dispose()}}},"Pass"),Q2),nwe=(u(K2=class extends Jo{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new fQ,this.needsSwap=!1,this.renderTarget=t,void 0===t&&(this.renderTarget=new ti(1,1,{minFilter:wi,magFilter:wi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,i,n,r){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,i){void 0!==i&&(this.renderTarget.texture.type=i,i!==Mr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":nS(t)===ga&&e0(this.renderTarget.texture,ga))}},"CopyPass"),K2),iwe=(u(J2=class extends Jo{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,i,n,r){let o=t.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},"ClearMaskPass"),J2),rQ=new at,t0=(u($2=class extends Jo{constructor(t=!0,e=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,i){this.color=t,this.depth=e,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,i,n,r){let o=this.overrideClearColor,s=this.overrideClearAlpha,a=t.getClearAlpha(),l=null!==o,u=s>=0;l?(t.getClearColor(rQ),t.setClearColor(o,u?s:a)):u&&t.setClearAlpha(s),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(rQ,a):u&&t.setClearAlpha(a)}},"ClearPass"),$2),yf=-1,rh=(u(eb=class extends Eo{constructor(t,e=yf,i=yf,n=1){super(),this.resizable=t,this.baseSize=new qe(1,1),this.preferredSize=new qe(e,i),this.target=this.preferredSize,this.s=n,this.effectiveSize=new qe,this.addEventListener("change",(()=>this.updateEffectiveSize())),this.updateEffectiveSize()}updateEffectiveSize(){let t=this.baseSize,e=this.preferredSize,i=this.effectiveSize,n=this.scale;e.width!==yf?i.width=e.width:e.height!==yf?i.width=Math.round(e.height*(t.width/Math.max(t.height,1))):i.width=Math.round(t.width*n),e.height!==yf?i.height=e.height:e.width!==yf?i.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):i.height=Math.round(t.height*n)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(yf),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return yf}},"Resolution"),eb),l7=!1,sQ=(u(tb=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=t=>{if(t.isMesh){let e;if(t.material.flatShading)switch(t.material.side){case Dr:e=this.materialsFlatShadedDoubleSide;break;case _s:e=this.materialsFlatShadedBackSide;break;default:e=this.materialsFlatShaded}else switch(t.material.side){case Dr:e=this.materialsDoubleSide;break;case _s:e=this.materialsBackSide;break;default:e=this.materials}this.originalMaterials.set(t,t.material),t.isSkinnedMesh?t.material=e[2]:t.isInstancedMesh?t.material=e[1]:t.material=e[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof Xt))return t.clone();let e=t.uniforms,i=new Map;for(let t in e){let n=e[t].value;n.isRenderTargetTexture&&(e[t].value=null,i.set(t,n))}let n=t.clone();for(let t of i)e[t[0]].value=t[1],n.uniforms[t[0]].value=t[1];return n}setMaterial(t){if(this.disposeMaterials(),this.material=t,null!==t){let e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(let i of e)i.uniforms=Object.assign({},t.uniforms),i.side=Pa;e[2].skinning=!0,this.materialsBackSide=e.map((e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.side=_s,i})),this.materialsDoubleSide=e.map((e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.side=Dr,i})),this.materialsFlatShaded=e.map((e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i})),this.materialsFlatShadedBackSide=e.map((e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=_s,i})),this.materialsFlatShadedDoubleSide=e.map((e=>{let i=this.cloneMaterial(e);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=Dr,i}))}}render(t,e,i){let n=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,l7){let n=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,i);for(let t of n)t[0].material=t[1];this.meshCount!==n.size&&n.clear()}else{let n=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,i),e.overrideMaterial=n}t.shadowMap.enabled=n}disposeMaterials(){if(null!==this.material){let t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return l7}static set workaroundEnabled(t){l7=t}},"OverrideMaterialManager"),tb),rS=(u(nb=class extends Jo{constructor(t,e,i=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new t0,this.overrideMaterialManager=null===i?null:new sQ(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){let t=this.overrideMaterialManager;return null!==t?t.material:null}set overrideMaterial(t){let e=this.overrideMaterialManager;null!==t?null!==e?e.setMaterial(t):this.overrideMaterialManager=new sQ(t):null!==e&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,i,n,r){let o=this.scene,s=this.camera,a=this.selection,l=s.layers.mask,u=o.background,h=t.shadowMap.autoUpdate,c=this.renderToScreen?null:e;null!==a&&s.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(c),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(t,o,s):t.render(o,s),s.layers.mask=l,o.background=u,t.shadowMap.autoUpdate=h}},"RenderPass"),nb),rwe=(u(ib=class extends Jo{constructor(t,e,{renderTarget:i,resolutionScale:n=1,width:r=rh.AUTO_SIZE,height:o=rh.AUTO_SIZE,resolutionX:s=r,resolutionY:a=o}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new rS(t,e,new Mx({depthPacking:Ig}));let l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;let u=l.clearPass;u.overrideClearColor=new at(16777215),u.overrideClearAlpha=1,this.renderTarget=i,void 0===this.renderTarget&&(this.renderTarget=new ti(1,1,{minFilter:ui,magFilter:ui}),this.renderTarget.texture.name="DepthPass.Target");let h=this.resolution=new rh(this,s,a,n);h.addEventListener("change",(t=>this.setSize(h.baseWidth,h.baseHeight)))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,i,n,r){let o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,o)}setSize(t,e){let i=this.resolution;i.setBaseSize(t,e),this.renderTarget.setSize(i.width,i.height)}},"DepthPass"),ib),Zyt=new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]);function oQ(t,e,i){for(let n of e){let e="$1"+t+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(let t of i.entries())null!==t[1]&&i.set(t[0],t[1].replace(r,e))}}function swe(t,e,i){let n=e.getFragmentShader(),r=e.getVertexShader(),o=void 0!==n&&/mainImage/.test(n),s=void 0!==n&&/mainUv/.test(n);if(i.attributes|=e.getAttributes(),void 0===n)throw new Error("Missing fragment shader (".concat(e.name,")"));if(s&&i.attributes&sh.CONVOLUTION)throw new Error("Effects that transform UVs are incompatible with convolution effects (".concat(e.name,")"));if(!o&&!s)throw new Error("Could not find mainImage or mainUv function (".concat(e.name,")"));{let a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=i.shaderParts,u=l.get(xi.FRAGMENT_HEAD)||"",h=l.get(xi.FRAGMENT_MAIN_UV)||"",c=l.get(xi.FRAGMENT_MAIN_IMAGE)||"",p=l.get(xi.VERTEX_HEAD)||"",d=l.get(xi.VERTEX_MAIN_SUPPORT)||"",f=new Set,g=new Set;if(s&&(h+="\t".concat(t,"MainUv(UV);\n"),i.uvTransformation=!0),null!==r&&/mainSupport/.test(r)){let e=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);d+="\t".concat(t,"MainSupport("),d+=e?"vUv);\n":");\n";for(let t of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(let e of t[1].split(/\s*,\s*/))i.varyings.add(e),f.add(e),g.add(e);for(let t of r.matchAll(a))g.add(t[1])}for(let t of n.matchAll(a))g.add(t[1]);for(let t of e.defines.keys())g.add(t.replace(/\([\w\s,]*\)/g,""));for(let t of e.uniforms.keys())g.add(t);g.delete("while"),g.delete("for"),g.delete("if"),e.uniforms.forEach(((e,n)=>i.uniforms.set(t+n.charAt(0).toUpperCase()+n.slice(1),e))),e.defines.forEach(((e,n)=>i.defines.set(t+n.charAt(0).toUpperCase()+n.slice(1),e)));let m=new Map([["fragment",n],["vertex",r]]);oQ(t,g,i.defines),oQ(t,g,m),n=m.get("fragment"),r=m.get("vertex");let v=e.blendMode;if(i.blendModes.set(v.blendFunction,v),o){null!==e.inputColorSpace&&e.inputColorSpace!==i.colorSpace&&(c+=e.inputColorSpace===ga?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),e.outputColorSpace!==uQ?i.colorSpace=e.outputColorSpace:null!==e.inputColorSpace&&(i.colorSpace=e.inputColorSpace);let r=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;c+="".concat(t,"MainImage(color0, UV, "),i.attributes&sh.DEPTH&&r.test(n)&&(c+="depth, ",i.readDepth=!0),c+="color1);\n\t";let o=t+"BlendOpacity";i.uniforms.set(o,v.opacity),c+="color0 = blend".concat(v.blendFunction,"(color0, color1, ").concat(o,");\n\n\t"),u+="uniform float ".concat(o,";\n\n")}if(u+=n+"\n",null!==r&&(p+=r+"\n"),l.set(xi.FRAGMENT_HEAD,u),l.set(xi.FRAGMENT_MAIN_UV,h),l.set(xi.FRAGMENT_MAIN_IMAGE,c),l.set(xi.VERTEX_HEAD,p),l.set(xi.VERTEX_MAIN_SUPPORT,d),null!==e.extensions)for(let t of e.extensions)i.extensions.add(t)}}u(oQ,"prefixSubstrings"),u(swe,"integrateEffect");var rb,sb,ob,ab,lb,ub,cb,hb,fb,pb,pQ=(u(rb=class extends Jo{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new Y_e(null,null,null,t),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(let e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(let e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){let e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(let t of this.effects)t.removeEventListener("change",this.listener);this.effects=t.sort(((t,e)=>e.attributes-t.attributes));for(let t of this.effects)t.addEventListener("change",this.listener)}updateMaterial(){let t=new cwe,e=0;for(let i of this.effects)if(i.blendMode.blendFunction===on.DST)t.attributes|=i.getAttributes()&sh.DEPTH;else{if(t.attributes&i.getAttributes()&sh.CONVOLUTION)throw new Error("Convolution effects cannot be merged (".concat(i.name,")"));swe("e"+e++,i,t)}let i=t.shaderParts.get(xi.FRAGMENT_HEAD),n=t.shaderParts.get(xi.FRAGMENT_MAIN_IMAGE),r=t.shaderParts.get(xi.FRAGMENT_MAIN_UV),o=/\bblend\b/g;for(let e of t.blendModes.values())i+=e.getShaderCode().replace(o,"blend".concat(e.blendFunction))+"\n";t.attributes&sh.DEPTH?(t.readDepth&&(n="float depth = readDepth(UV);\n\n\t"+n),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,t.colorSpace===ga&&(n+="color0 = sRGBToLinear(color0);\n\t"),t.uvTransformation?(r="vec2 transformedUv = vUv;\n"+r,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(xi.FRAGMENT_HEAD,i),t.shaderParts.set(xi.FRAGMENT_MAIN_IMAGE,n),t.shaderParts.set(xi.FRAGMENT_MAIN_UV,r);for(let[e,i]of t.shaderParts)null!==i&&t.shaderParts.set(e,i.trim().replace(/^#/,"\n#"));this.skipRendering=0===e,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=da){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(let i of this.effects)i.setDepthTexture(t,e)}render(t,e,i,n,r){for(let i of this.effects)i.update(t,e,n);if(!this.skipRendering||this.renderToScreen){let r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=n*this.timeScale,t.setRenderTarget(this.renderToScreen?null:i),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(let i of this.effects)i.setSize(t,e)}initialize(t,e,i){this.renderer=t;for(let n of this.effects)n.initialize(t,e,i);this.updateMaterial(),void 0!==i&&i!==Mr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){if("change"===t.type)this.recompile()}},"EffectPass"),rb),owe=(u(sb=class extends Jo{constructor({kernelSize:t=h7.MEDIUM,resolutionScale:e=.5,width:i=rh.AUTO_SIZE,height:n=rh.AUTO_SIZE,resolutionX:r=i,resolutionY:o=n}={}){super("KawaseBlurPass"),this.renderTargetA=new ti(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let s=this.resolution=new rh(this,r,o,e);s.addEventListener("change",(t=>this.setSize(s.baseWidth,s.baseHeight))),this._blurMaterial=new k_e,this._blurMaterial.kernelSize=t,this.copyMaterial=new fQ}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,i,n,r){let o=this.scene,s=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,h=u.kernelSequence,c=e;this.fullscreenMaterial=u;for(let e=0,i=h.length;e<i;++e){let i=1&e?l:a;u.kernel=h[e],u.inputBuffer=c.texture,t.setRenderTarget(i),t.render(o,s),c=i}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=c.texture,t.setRenderTarget(this.renderToScreen?null:i),t.render(o,s)}setSize(t,e){let i=this.resolution;i.setBaseSize(t,e);let n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(t,e)}initialize(t,e,i){void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==Mr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):nS(t)===ga&&(e0(this.renderTargetA.texture,ga),e0(this.renderTargetB.texture,ga)))}static get AUTO_SIZE(){return rh.AUTO_SIZE}},"KawaseBlurPass"),sb),awe=(u(ob=class extends Jo{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new t0(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,i,n,r){let o=t.getContext(),s=t.state.buffers,a=this.scene,l=this.camera,u=this.clearPass,h=this.inverted?0:1,c=1-h;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),s.stencil.setFunc(o.ALWAYS,h,4294967295),s.stencil.setClear(c),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(t,null):(u.render(t,e),u.render(t,i))),this.renderToScreen?(t.setRenderTarget(null),t.render(a,l)):(t.setRenderTarget(e),t.render(a,l),t.setRenderTarget(i),t.render(a,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(o.EQUAL,1,4294967295),s.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),s.stencil.setLocked(!0)}},"MaskPass"),ob),ld=(u(ab=class extends Jo{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.input=e}setInput(t){this.input=t}render(t,e,i,n,r){let o=this.fullscreenMaterial.uniforms;null!==e&&void 0!==o&&void 0!==o[this.input]&&(o[this.input].value=e.texture),t.setRenderTarget(this.renderToScreen?null:i),t.render(this.scene,this.camera)}initialize(t,e,i){void 0!==i&&i!==Mr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},"ShaderPass"),ab),u7=.001,lwe=1e3,uwe=(u(lb=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&void 0!==document.hidden&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*u7}get fixedDelta(){return this._fixedDelta*u7}set fixedDelta(t){this._fixedDelta=t*lwe}get elapsed(){return this._elapsed*u7}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==t?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},"Timer"),lb),dQ=(ub=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:i=!1,multisampling:n=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,i,r,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new nwe,this.depthTexture=null,this.passes=[],this.timer=new uwe,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){let e=this.inputBuffer,i=this.multisampling;i>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,null!==t){let e=t.getSize(new qe),i=t.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===Mr&&nS(t)===ga&&(e0(this.inputBuffer.texture,ga),e0(this.outputBuffer.texture,ga),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(let e of this.passes)e.initialize(t,i,n)}}replaceRenderer(t,e=!0){let i=this.renderer,n=i.domElement.parentNode;return this.setRenderer(t),e&&null!==n&&(n.removeChild(i.domElement),n.appendChild(t.domElement)),i}createDepthTexture(){let t=this.depthTexture=new qc;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=Qh,t.type=Xh):t.type=il,t}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,i,n){let r=this.renderer,o=null===r?new qe:r.getDrawingBufferSize(new qe),s={minFilter:wi,magFilter:wi,stencilBuffer:e,depthBuffer:t,type:i},a=new ti(o.width,o.height,s);return n>0&&(a.ignoreDepthForMultisampleCopy=!1,a.samples=n),i===Mr&&nS(r)===ga&&e0(a.texture,ga),a.texture.name="EffectComposer.Buffer",a.texture.generateMipmaps=!1,a}setMainScene(t){for(let e of this.passes)e.mainScene=t}setMainCamera(t){for(let e of this.passes)e.mainCamera=t}addPass(t,e){let i=this.passes,n=this.renderer,r=n.getDrawingBufferSize(new qe),o=n.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(t.setRenderer(n),t.setSize(r.width,r.height),t.initialize(n,o,s),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==e?i.splice(e,0,t):i.push(t),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),t.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){let e=this.createDepthTexture();for(t of i)t.setDepthTexture(e)}else t.setDepthTexture(this.depthTexture)}removePass(t){let e=this.passes,i=e.indexOf(t);if(-1!==i&&e.splice(i,1).length>0){if(null!==this.depthTexture){let i=u(((t,e)=>t||e.needsDepthTexture),"reducer");e.reduce(i,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){let t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){let e,i,n,r=this.renderer,o=this.copyPass,s=this.inputBuffer,a=this.outputBuffer,l=!1;void 0===t&&(this.timer.update(),t=this.timer.delta);for(let u of this.passes)u.enabled&&(u.render(r,s,a,t,l),u.needsSwap&&(l&&(o.renderToScreen=u.renderToScreen,e=r.getContext(),i=r.state.buffers.stencil,i.setFunc(e.NOTEQUAL,1,4294967295),o.render(r,s,a,t,l),i.setFunc(e.EQUAL,1,4294967295)),n=s,s=a,a=n),u instanceof awe?l=!0:u instanceof iwe&&(l=!1))}setSize(t,e,i){let n=this.renderer,r=n.getSize(new qe);(void 0===t||void 0===e)&&(t=r.width,e=r.height),(r.width!==t||r.height!==e)&&n.setSize(t,e,i);let o=n.getDrawingBufferSize(new qe);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(let t of this.passes)t.setSize(o.width,o.height)}reset(){let t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(let t of this.passes)t.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},u(ub,"EffectComposer"),ub),cwe=(u(cb=class{constructor(){this.shaderParts=new Map([[xi.FRAGMENT_HEAD,null],[xi.FRAGMENT_MAIN_UV,null],[xi.FRAGMENT_MAIN_IMAGE,null],[xi.VERTEX_HEAD,null],[xi.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=sh.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=iS}},"EffectShaderData"),cb),hwe=(hb=class extends Set{constructor(t,e=10){super(),this.l=e,this.exclusive=!1,void 0!==t&&this.set(t)}get layer(){return this.l}set layer(t){let e=this.l;for(let i of this)i.layers.disable(e),i.layers.enable(t);this.l=t}getLayer(){return this.layer}setLayer(t){this.layer=t}isExclusive(){return this.exclusive}setExclusive(t){this.exclusive=t}clear(){let t=this.layer;for(let e of this)e.layers.disable(t);return super.clear()}set(t){this.clear();for(let e of t)this.add(e);return this}indexOf(t){return this.has(t)?0:-1}add(t){return this.exclusive?t.layers.set(this.layer):t.layers.enable(this.layer),super.add(t)}delete(t){return this.has(t)&&t.layers.disable(this.layer),super.delete(t)}toggle(t){let e;return this.has(t)?(this.delete(t),e=!1):(this.add(t),e=!0),e}setVisible(t){for(let e of this)t?e.layers.enable(0):e.layers.disable(0);return this}},u(hb,"Selection"),hb),fwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",pwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",dwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",mwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",gwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",vwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",ywe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",xwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",bwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",_we="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",wwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Mwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Ewe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Twe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Swe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Awe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Cwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Pwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Iwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Owe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Lwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Dwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Nwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Rwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Bwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",kwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",qwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Fwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",Uwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",zwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Gwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Vwe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Hwe=new Map([[on.ADD,fwe],[on.ALPHA,pwe],[on.AVERAGE,dwe],[on.COLOR,mwe],[on.COLOR_BURN,gwe],[on.COLOR_DODGE,vwe],[on.DARKEN,ywe],[on.DIFFERENCE,xwe],[on.DIVIDE,bwe],[on.DST,null],[on.EXCLUSION,_we],[on.HARD_LIGHT,wwe],[on.HARD_MIX,Mwe],[on.HUE,Ewe],[on.INVERT,Twe],[on.INVERT_RGB,Swe],[on.LIGHTEN,Awe],[on.LINEAR_BURN,Cwe],[on.LINEAR_DODGE,Pwe],[on.LINEAR_LIGHT,Iwe],[on.LUMINOSITY,Owe],[on.MULTIPLY,Lwe],[on.NEGATION,Dwe],[on.NORMAL,Nwe],[on.OVERLAY,Rwe],[on.PIN_LIGHT,Bwe],[on.REFLECT,kwe],[on.SATURATION,qwe],[on.SCREEN,Fwe],[on.SOFT_LIGHT,Uwe],[on.SRC,zwe],[on.SUBTRACT,Gwe],[on.VIVID_LIGHT,Vwe]]),jwe=(u(fb=class extends Eo{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new St(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Hwe.get(this.blendFunction)}},"BlendMode"),fb),mQ=(u(pb=class extends Eo{constructor(t,e,{attributes:i=sh.NONE,blendFunction:n=on.NORMAL,defines:r=new Map,uniforms:o=new Map,extensions:s=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=i,this.fragmentShader=e,this.vertexShader=a,this.defines=r,this.uniforms=o,this.extensions=s,this.blendMode=new jwe(n),this.blendMode.addEventListener("change",(t=>this.setChanged())),this._inputColorSpace=iS,this._outputColorSpace=uQ}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=da){}update(t,e,i){}setSize(t,e){}initialize(t,e,i){}dispose(){for(let t of Object.keys(this)){let e=this[t];(e instanceof ti||e instanceof ha||e instanceof Er||e instanceof Jo)&&this[t].dispose()}}},"Effect"),pb),nxt=new K,ixt=new Ot,sxt=new at,oxt=[new Float32Array(3),new Float32Array(3)],axt=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],lxt=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]],uxt=[new Float32Array(2),new Float32Array(2)],cxt=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),hxt=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],fxt=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],pxt=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])],dxt=new Map([[So(0,0,0,0),new Float32Array([0,0,0,0])],[So(0,0,0,1),new Float32Array([0,0,0,1])],[So(0,0,1,0),new Float32Array([0,0,1,0])],[So(0,0,1,1),new Float32Array([0,0,1,1])],[So(0,1,0,0),new Float32Array([0,1,0,0])],[So(0,1,0,1),new Float32Array([0,1,0,1])],[So(0,1,1,0),new Float32Array([0,1,1,0])],[So(0,1,1,1),new Float32Array([0,1,1,1])],[So(1,0,0,0),new Float32Array([1,0,0,0])],[So(1,0,0,1),new Float32Array([1,0,0,1])],[So(1,0,1,0),new Float32Array([1,0,1,0])],[So(1,0,1,1),new Float32Array([1,0,1,1])],[So(1,1,0,0),new Float32Array([1,1,0,0])],[So(1,1,0,1),new Float32Array([1,1,0,1])],[So(1,1,1,0),new Float32Array([1,1,1,0])],[So(1,1,1,1),new Float32Array([1,1,1,1])]]);function c7(t,e,i){return t+(e-t)*i}function So(t,e,i,n){let r=c7(t,e,.75),o=c7(i,n,.75);return c7(r,o,.875)}u(c7,"lerp2"),u(So,"bilinear");var db,mb,Wwe="uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\n#ifdef USE_PATTERN\nuniform lowp sampler2D patternTexture;varying vec2 vUvPattern;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\n#ifndef X_RAY\nedge.y=0.0;\n#endif\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\n#ifdef USE_PATTERN\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\n#ifdef X_RAY\nfloat hiddenFactor=0.5;\n#else\nfloat hiddenFactor=0.0;\n#endif\nvisibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\n#endif\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\n#ifdef ALPHA\noutputColor=vec4(color,alpha);\n#else\noutputColor=vec4(color,max(alpha,inputColor.a));\n#endif\n}",Ywe="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",gQ=(u(db=class extends mQ{constructor(t,e,{blendFunction:i=on.SCREEN,patternTexture:n=null,patternScale:r=1,edgeStrength:o=1,pulseSpeed:s=0,visibleEdgeColor:a=16777215,hiddenEdgeColor:l=2230538,kernelSize:u=h7.VERY_SMALL,blur:h=!1,xRay:c=!0,multisampling:p=0,resolutionScale:d=.5,width:f=rh.AUTO_SIZE,height:g=rh.AUTO_SIZE,resolutionX:m=f,resolutionY:v=g}={}){super("OutlineEffect",Wwe,{uniforms:new Map([["maskTexture",new St(null)],["edgeTexture",new St(null)],["edgeStrength",new St(o)],["visibleEdgeColor",new St(new at(a))],["hiddenEdgeColor",new St(new at(l))],["pulse",new St(1)],["patternScale",new St(r)],["patternTexture",new St(null)]])}),this.blendMode.addEventListener("change",(t=>{this.blendMode.blendFunction===on.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()})),this.blendMode.blendFunction=i,this.patternTexture=n,this.xRay=c,this.scene=t,this.camera=e,this.renderTargetMask=new ti(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new ti(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new t0,this.clearPass.overrideClearColor=new at(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new rwe(t,e),this.maskPass=new rS(t,e,new z_e(this.depthPass.texture,e));let y=this.maskPass.clearPass;y.overrideClearColor=new at(16777215),y.overrideClearAlpha=1,this.blurPass=new owe({resolutionScale:d,resolutionX:m,resolutionY:v,kernelSize:u}),this.blurPass.enabled=h;let x=this.blurPass.resolution;x.addEventListener("change",(t=>this.setSize(x.baseWidth,x.baseHeight))),this.outlinePass=new ld(new Q_e),this.outlinePass.fullscreenMaterial.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new hwe,this.selection.layer=10,this.pulseSpeed=s}set mainScene(t){this.scene=t,this.depthPass.mainScene=t,this.maskPass.mainScene=t}set mainCamera(t){this.camera=t,this.depthPass.mainCamera=t,this.maskPass.mainCamera=t,this.maskPass.overrideMaterial.copyCameraSettings(t)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(t){this.renderTargetMask.samples=t,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(t){this.uniforms.get("patternScale").value=t}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(t){this.uniforms.get("edgeStrength").value=t}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(t){this.uniforms.get("visibleEdgeColor").value=t}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(t){this.uniforms.get("hiddenEdgeColor").value=t}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(t){this.pulseSpeed=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get selectionLayer(){return this.selection.layer}set selectionLayer(t){this.selection.layer=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get blur(){return this.blurPass.enabled}set blur(t){this.blurPass.enabled=t}get xRay(){return this.defines.has("X_RAY")}set xRay(t){this.xRay!==t&&(t?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(t){this.xRay=t}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(t){null!==t?(t.wrapS=t.wrapT=wr,this.defines.set("USE_PATTERN","1"),this.setVertexShader(Ywe)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=t,this.setChanged()}setPatternTexture(t){this.patternTexture=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}setSelection(t){return this.selection.set(t),this}clearSelection(){return this.selection.clear(),this}selectObject(t){return this.selection.add(t),this}deselectObject(t){return this.selection.delete(t),this}update(t,e,i){let n=this.scene,r=this.camera,o=this.selection,s=this.uniforms.get("pulse"),a=n.background,l=r.layers.mask;o.size>0?(n.background=null,s.value=1,this.pulseSpeed>0&&(s.value=.375*Math.cos(this.time*this.pulseSpeed*10)+.625),this.active=!0,this.time+=i,o.setVisible(!1),this.depthPass.render(t),o.setVisible(!0),r.layers.set(o.layer),this.maskPass.render(t,this.renderTargetMask),r.layers.mask=l,n.background=a,this.outlinePass.render(t,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(t,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(t,this.renderTargetOutline),this.active=!1)}setSize(t,e){this.blurPass.setSize(t,e),this.renderTargetMask.setSize(t,e);let i=this.resolution;i.setBaseSize(t,e);let n=i.width,r=i.height;this.depthPass.setSize(n,r),this.renderTargetOutline.setSize(n,r),this.outlinePass.fullscreenMaterial.setSize(n,r)}initialize(t,e,i){this.blurPass.initialize(t,e,Mr),void 0!==i&&(this.depthPass.initialize(t,e,i),this.maskPass.initialize(t,e,i),this.outlinePass.initialize(t,e,i))}},"OutlineEffect"),db),vxt=.5*Math.PI,yxt=new K,xxt=new K,aQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",lQ="data:image/png;base64,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",Xwe="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",Zwe="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",vQ=(u(mb=class extends mQ{constructor({blendFunction:t=on.SRC,preset:e=Ru.MEDIUM,edgeDetectionMode:i=hQ.COLOR,predicationMode:n=D_e.DISABLED}={}){let r,o;super("SMAAEffect",Xwe,{vertexShader:Zwe,blendFunction:t,attributes:sh.CONVOLUTION|sh.DEPTH,uniforms:new Map([["weightMap",new St(null)]])}),arguments.length>1&&(r=arguments[0],o=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(i=arguments[3])),this.renderTargetEdges=new ti(1,1,{depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new t0(!0,!1,!1),this.clearPass.overrideClearColor=new at(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new ld(new H_e),this.edgeDetectionMaterial.edgeDetectionMode=i,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new ld(new $_e);let s=new Bx;s.onLoad=()=>{let t=new Er(r);t.name="SMAA.Search",t.magFilter=ui,t.minFilter=ui,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!0,this.weightsMaterial.searchTexture=t;let e=new Er(o);e.name="SMAA.Area",e.magFilter=wi,e.minFilter=wi,e.generateMipmaps=!1,e.needsUpdate=!0,e.flipY=!1,this.weightsMaterial.areaTexture=e,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),void 0!==r&&void 0!==o?(s.itemEnd("search"),s.itemEnd("area")):typeof Image<"u"&&(r=new Image,o=new Image,r.addEventListener("load",(()=>s.itemEnd("search"))),o.addEventListener("load",(()=>s.itemEnd("area"))),r.src=aQ,o.src=lQ),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(t){this.edgeDetectionMaterial.edgeDetectionThreshold=t}setOrthogonalSearchSteps(t){this.weightsMaterial.orthogonalSearchSteps=t}applyPreset(t){let e=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(t){case Ru.LOW:e.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Ru.MEDIUM:e.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case Ru.HIGH:e.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case Ru.ULTRA:e.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0}}setDepthTexture(t,e=da){this.edgeDetectionMaterial.depthBuffer=t,this.edgeDetectionMaterial.depthPacking=e}update(t,e,i){this.clearPass.render(t,this.renderTargetEdges),this.edgeDetectionPass.render(t,e,this.renderTargetEdges),this.weightsPass.render(t,this.renderTargetEdges,this.renderTargetWeights)}setSize(t,e){this.edgeDetectionMaterial.setSize(t,e),this.weightsMaterial.setSize(t,e),this.renderTargetEdges.setSize(t,e),this.renderTargetWeights.setSize(t,e)}dispose(){let{searchTexture:t,areaTexture:e}=this.weightsMaterial;null!==t&&null!==e&&(t.dispose(),e.dispose()),super.dispose()}static get searchImageDataURL(){return aQ}static get areaImageDataURL(){return lQ}},"SMAAEffect"),mb),gb=new Ji;gb.setAttribute("position",new rn(new Float32Array([-1,-1,3,-1,-1,3]),2)),gb.setAttribute("uv",new rn(new Float32Array([0,0,2,0,0,2]),2)),gb.boundingSphere=new Kh,gb.computeBoundingSphere=function(){};var Qwe=new Sg,f7=class{constructor(t){this._mesh=new Ft(gb,t),this._mesh.frustumCulled=!1}render(t){t.render(this._mesh,Qwe)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}};u(f7,"$e4ca8dcb0218f846$export$dcd670d73db751f5");var ud=f7,Kwe={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new Ot},viewMat:{value:new Ot},projViewMat:{value:new Ot},projectionMatrixInv:{value:new Ot},viewMatrixInv:{value:new Ot},cameraPos:{value:new K},resolution:{value:new qe},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:"\nvarying vec2 vUv;\nvoid main() {\n  vUv = uv;\n  gl_Position = vec4(position, 1);\n}",fragmentShader:"\n    #define SAMPLES 16\n    #define FSAMPLES 16.0\nuniform sampler2D sceneDiffuse;\nuniform sampler2D sceneNormal;\nuniform highp sampler2D sceneDepth;\nuniform mat4 projectionMatrixInv;\nuniform mat4 viewMatrixInv;\nuniform mat4 projMat;\nuniform mat4 viewMat;\nuniform mat4 projViewMat;\nuniform vec3 cameraPos;\nuniform vec2 resolution;\nuniform float time;\nuniform vec3[SAMPLES] samples;\nuniform float[SAMPLES] samplesR;\nuniform float radius;\nuniform float distanceFalloff;\nuniform float near;\nuniform float far;\nuniform bool logDepth;\nuniform bool ortho;\nuniform bool screenSpaceRadius;\nuniform sampler2D bluenoise;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n\n    vec3 getWorldPosLog(vec3 posS) {\n      vec2 uv = posS.xy;\n      float z = posS.z;\n      float nearZ =near;\n      float farZ = far;\n      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n      vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n      return wpos.xyz / wpos.w;\n    }\n    vec3 getWorldPos(float depth, vec2 coord) {\n      #ifdef LOGDEPTH\n        return getWorldPosLog(vec3(coord, depth));\n      #endif\n      float z = depth * 2.0 - 1.0;\n      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n      // Perspective division\n     vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n     worldSpacePosition.xyz /= worldSpacePosition.w;\n      return worldSpacePosition.xyz;\n  }\n\n  vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n    ivec2 p = ivec2(vUv * resolution);\n    float c0 = texelFetch(sceneDepth, p, 0).x;\n    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n\n    float dl = abs((2.0 * l1 - l2) - c0);\n    float dr = abs((2.0 * r1 - r2) - c0);\n    float db = abs((2.0 * b1 - b2) - c0);\n    float dt = abs((2.0 * t1 - t2) - c0);\n\n    vec3 ce = getWorldPos(c0, vUv).xyz;\n\n    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n\n    return normalize(cross(dpdx, dpdy));\n}\n\nvoid main() {\n      vec4 diffuse = texture2D(sceneDiffuse, vUv);\n      float depth = texture2D(sceneDepth, vUv).x;\n      if (depth == 1.0) {\n        gl_FragColor = vec4(vec3(1.0), 1.0);\n        return;\n      }\n      vec3 worldPos = getWorldPos(depth, vUv);\n    //  vec3 normal = texture2D(sceneNormal, vUv).rgb;//computeNormal(worldPos, vUv);\n      #ifdef HALFRES\n        vec3 normal = texture2D(sceneNormal, vUv).rgb;\n      #else\n        vec3 normal = computeNormal(worldPos, vUv);\n      #endif\n      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);\n      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);\n      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));\n      vec3 bitangent = cross(normal, tangent);\n      mat3 tbn = mat3(tangent, bitangent, normal);\n      float occluded = 0.0;\n      float totalWeight = 0.0;\n     /* float radiusScreen = distance(\n        worldPos,\n        getWorldPos(depth, vUv + \n          vec2(48.0, 0.0) / resolution)\n      );/*vUv.x < 0.5 ? radius : min(distance(\n        worldPos,\n        getWorldPos(depth, vUv + \n          vec2(100.0, 0.0) / resolution)\n      ), radius);\n      float distanceFalloffScreen = radiusScreen * 0.2;*/\n      float radiusToUse = screenSpaceRadius ? distance(\n        worldPos,\n        getWorldPos(depth, vUv +\n          vec2(radius, 0.0) / resolution)\n      ) : radius;\n      float distanceFalloffToUse =screenSpaceRadius ?\n          radiusToUse * distanceFalloff\n      : distanceFalloff;\n      float bias = (0.1 / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;\n      for(float i = 0.0; i < FSAMPLES; i++) {\n        vec3 sampleDirection = \n        tbn * \n        samples[int(i)];\n        ;\n        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];\n        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;\n        vec4 offset = projViewMat * vec4(samplePos, 1.0);\n        offset.xyz /= offset.w;\n        offset.xyz = offset.xyz * 0.5 + 0.5;\n        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;\n        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) \n         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/\n        #ifdef LOGDEPTH\n        float distSample = linearize_depth_log(sampleDepth, near, far);\n        #else\n        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);\n        #endif\n        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);\n        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));\n        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);\n        float weight = dot(sampleDirection, normal);\n          occluded += rangeCheck * weight * \n            (distSample + bias\n               < distWorld ? 1.0 : 0.0) * (\n          (dot(\n            diff,\n            diff\n             \n            ) < 1.0 || (sampleDepth == depth) || (\n              offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0\n            ) ? 0.0 : 1.0)\n          );\n          totalWeight += weight;\n      }\n      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);\n      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);\n}"},Jwe={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Ot},viewMat:{value:new Ot},projectionMatrixInv:{value:new Ot},viewMatrixInv:{value:new Ot},cameraPos:{value:new K},resolution:{value:new qe},color:{value:new K(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = vec4(position, 1);\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform sampler2D sceneDepth;\n    uniform sampler2D downsampledDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform vec2 resolution;\n    uniform vec3 color;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform float intensity;\n    uniform float renderMode;\n    uniform float near;\n    uniform float far;\n    uniform bool gammaCorrection;\n    uniform bool logDepth;\n    uniform bool ortho;\n    uniform bool screenSpaceRadius;\n    uniform bool fog;\n    uniform bool fogExp;\n    uniform float fogDensity;\n    uniform float fogNear;\n    uniform float fogFar;\n    uniform float radius;\n    uniform float distanceFalloff;\n    uniform vec3 cameraPos;\n    varying vec2 vUv;\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        return (zFar * zNear) / (zFar - d * (zFar - zNear));\n    }\n    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n      return nearZ + (farZ - nearZ) * d;\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n      float a = farZ / (farZ - nearZ);\n      float b = farZ * nearZ / (nearZ - farZ);\n      float linDepth = a + b / depth;\n      return ortho ? linearize_depth_ortho(\n        linDepth,\n        nearZ,\n        farZ\n      ) :linearize_depth(linDepth, nearZ, farZ);\n    }\n    vec3 getWorldPosLog(vec3 posS) {\n        vec2 uv = posS.xy;\n        float z = posS.z;\n        float nearZ =near;\n        float farZ = far;\n        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n        float a = farZ / (farZ - nearZ);\n        float b = farZ * nearZ / (nearZ - farZ);\n        float linDepth = a + b / depth;\n        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n        vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n        return wpos.xyz / wpos.w;\n      }\n      vec3 getWorldPos(float depth, vec2 coord) {\n       // if (logDepth) {\n        #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n        #endif\n      //  }\n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n  \n    vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n      ivec2 p = ivec2(vUv * resolution);\n      float c0 = texelFetch(sceneDepth, p, 0).x;\n      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n  \n      float dl = abs((2.0 * l1 - l2) - c0);\n      float dr = abs((2.0 * r1 - r2) - c0);\n      float db = abs((2.0 * b1 - b2) - c0);\n      float dt = abs((2.0 * t1 - t2) - c0);\n  \n      vec3 ce = getWorldPos(c0, vUv).xyz;\n  \n      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n  \n      return normalize(cross(dpdx, dpdy));\n  }\n\n    #include <common>\n    #include <dithering_pars_fragment>\n    void main() {\n        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);\n        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);\n        float depth = texture2D(\n            sceneDepth,\n            vUv\n        ).x;\n        #ifdef HALFRES \n        vec4 texel;\n        if (depth == 1.0) {\n            texel = vec4(0.0, 0.0, 0.0, 1.0);\n        } else {\n        vec3 worldPos = getWorldPos(depth, vUv);\n        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);\n       // vec4 texel = texture2D(tDiffuse, vUv);\n       // Find closest depth;\n       float totalWeight = 0.0;\n       float radiusToUse = screenSpaceRadius ? distance(\n        worldPos,\n        getWorldPos(depth, vUv +\n          vec2(radius, 0.0) / resolution)\n      ) : radius;\n      float distanceFalloffToUse =screenSpaceRadius ?\n          radiusToUse * distanceFalloff\n      : distanceFalloff;\n        for(float x = -1.0; x <= 1.0; x++) {\n            for(float y = -1.0; y <= 1.0; y++) {\n                vec2 offset = vec2(x, y);\n                ivec2 p = ivec2(\n                    (vUv * resolution * 0.5) + offset\n                );\n                vec2 pUv = vec2(p) / (resolution * 0.5);\n                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;\n                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);\n                vec3 normalSample = sampleInfo.xyz * 2.0 - 1.0;\n                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);\n                float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));\n                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);\n                float weight = rangeCheck;\n                totalWeight += weight;\n                texel += sampleInfo * weight;\n            }\n        }\n        if (totalWeight == 0.0) {\n            texel = texture2D(tDiffuse, vUv);\n        } else {\n            texel /= totalWeight;\n        }\n    }\n        #else\n        vec4 texel = texture2D(tDiffuse, vUv);\n        #endif\n\n     \n        float finalAo = pow(texel.a, intensity);\n        float fogFactor;\n        float fogDepth = distance(\n            cameraPos,\n            getWorldPos(depth, vUv)\n        );\n        if (fog) {\n            if (fogExp) {\n                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n            } else {\n                fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n            }\n        }\n        finalAo = mix(finalAo, 1.0, fogFactor);\n        if (renderMode == 0.0) {\n            gl_FragColor = vec4( mix(sceneTexel.rgb, color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 1.0) {\n            gl_FragColor = vec4( mix(vec3(1.0), color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n        } else if (renderMode == 2.0) {\n            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n        } else if (renderMode == 3.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(sceneTexel.rgb, color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n            }\n        } else if (renderMode == 4.0) {\n            if (vUv.x < 0.5) {\n                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);\n            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {\n                gl_FragColor = vec4(1.0);\n            } else {\n                gl_FragColor = vec4( mix(vec3(1.0), color * sceneTexel.rgb, 1.0 - finalAo), sceneTexel.a);\n            }\n        }\n        #include <dithering_fragment>\n        if (gammaCorrection) {\n            gl_FragColor = LinearTosRGB(gl_FragColor);\n        }\n    }\n    "},$we={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new Ot},viewMat:{value:new Ot},projectionMatrixInv:{value:new Ot},viewMatrixInv:{value:new Ot},cameraPos:{value:new K},resolution:{value:new qe},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:"\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = vec4(position, 1.0);\n\t\t}",fragmentShader:"\n\t\tuniform sampler2D sceneDiffuse;\n    uniform highp sampler2D sceneDepth;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D blueNoise;\n    uniform mat4 projectionMatrixInv;\n    uniform mat4 viewMatrixInv;\n    uniform vec2 resolution;\n    uniform float r;\n    uniform float radius;\n     uniform float worldRadius;\n    uniform float index;\n     uniform float near;\n     uniform float far;\n     uniform float distanceFalloff;\n     uniform bool logDepth;\n     uniform bool screenSpaceRadius;\n    varying vec2 vUv;\n\n    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)\n    {\n        highp float z_n = 2.0 * d - 1.0;\n        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n    }\n    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {\n     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     return linearize_depth(linDepth, nearZ, farZ);\n   }\n   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {\n     return nearZ + (farZ - nearZ) * d;\n   }\n   vec3 getWorldPosLog(vec3 posS) {\n     vec2 uv = posS.xy;\n     float z = posS.z;\n     float nearZ =near;\n     float farZ = far;\n     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n     float a = farZ / (farZ - nearZ);\n     float b = farZ * nearZ / (nearZ - farZ);\n     float linDepth = a + b / depth;\n     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n     vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n     return wpos.xyz / wpos.w;\n   }\n    vec3 getWorldPos(float depth, vec2 coord) {\n     #ifdef LOGDEPTH\n          return getWorldPosLog(vec3(coord, depth));\n     #endif\n        \n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n    #include <common>\n    #define NUM_SAMPLES 16\n    uniform vec2 poissonDisk[NUM_SAMPLES];\n    void main() {\n        const float pi = 3.14159;\n        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n        vec2 uv = vUv;\n        vec4 data = texture2D(tDiffuse, vUv);\n        float occlusion = data.a;\n        float baseOcc = data.a;\n        vec3 normal = data.rgb * 2.0 - 1.0;\n        float count = 1.0;\n        float d = texture2D(sceneDepth, vUv).x;\n        vec3 worldPos = getWorldPos(d, vUv);\n        float size = radius;\n        float angle;\n        if (index == 0.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;\n        } else if (index == 1.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;\n        } else if (index == 2.0) {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;\n        } else {\n             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;\n        }\n\n        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));\n        float radiusToUse = screenSpaceRadius ? distance(\n          worldPos,\n          getWorldPos(d, vUv +\n            vec2(worldRadius, 0.0) / resolution)\n        ) : worldRadius;\n        float distanceFalloffToUse =screenSpaceRadius ?\n            radiusToUse * distanceFalloff\n        : distanceFalloff;\n\n\n        for(int i = 0; i < NUM_SAMPLES; i++) {\n            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;\n            vec4 dataSample = texture2D(tDiffuse, uv + offset);\n            float occSample = dataSample.a;\n            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;\n            float dSample = texture2D(sceneDepth, uv + offset).x;\n            vec3 worldPosSample = getWorldPos(dSample, uv + offset);\n            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));\n            float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));\n            occlusion += occSample * rangeCheck;\n            count += rangeCheck;\n        }\n        occlusion /= count;\n        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);\n    }\n    "},eMe={uniforms:{sceneDepth:{value:null},resolution:{value:new qe},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new Ot},projectionMatrixInv:{value:new Ot},logDepth:{value:!1}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n        vUv = uv;\n        gl_Position = vec4(position, 1);\n    }",fragmentShader:"\n    uniform sampler2D sceneDepth;\n    uniform vec2 resolution;\n    uniform float near;\n    uniform float far;\n    uniform bool logDepth;\n    uniform mat4 viewMatrixInv;\n    uniform mat4 projectionMatrixInv;\n    varying vec2 vUv;\n    layout(location = 1) out vec4 gNormal;\n    vec3 getWorldPosLog(vec3 posS) {\n        vec2 uv = posS.xy;\n        float z = posS.z;\n        float nearZ =near;\n        float farZ = far;\n        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;\n        float a = farZ / (farZ - nearZ);\n        float b = farZ * nearZ / (nearZ - farZ);\n        float linDepth = a + b / depth;\n        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;\n        vec4 wpos = viewMatrixInv * projectionMatrixInv * clipVec;\n        return wpos.xyz / wpos.w;\n      }\n      vec3 getWorldPos(float depth, vec2 coord) {\n        if (logDepth) {\n          return getWorldPosLog(vec3(coord, depth));\n        }\n        float z = depth * 2.0 - 1.0;\n        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;\n        // Perspective division\n       vec4 worldSpacePosition = viewMatrixInv * viewSpacePosition;\n       worldSpacePosition.xyz /= worldSpacePosition.w;\n        return worldSpacePosition.xyz;\n    }\n  \n    vec3 computeNormal(vec3 worldPos, vec2 vUv) {\n      ivec2 p = ivec2(vUv * resolution);\n      float c0 = texelFetch(sceneDepth, p, 0).x;\n      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;\n      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;\n      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;\n      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;\n      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;\n      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;\n      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;\n      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;\n  \n      float dl = abs((2.0 * l1 - l2) - c0);\n      float dr = abs((2.0 * r1 - r2) - c0);\n      float db = abs((2.0 * b1 - b2) - c0);\n      float dt = abs((2.0 * t1 - t2) - c0);\n  \n      vec3 ce = getWorldPos(c0, vUv).xyz;\n  \n      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz\n                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;\n      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz\n                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;\n  \n      return normalize(cross(dpdx, dpdy));\n  }\n    void main() {\n        vec2 uv = vUv - vec2(0.5) / resolution;\n        vec2 pixelSize = vec2(1.0) / resolution;\n        vec2[] uvSamples = vec2[4](\n            uv,\n            uv + vec2(pixelSize.x, 0.0),\n            uv + vec2(0.0, pixelSize.y),\n            uv + pixelSize\n        );\n        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;\n        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;\n        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;\n        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;\n        float minDepth = min(min(depth00, depth10), min(depth01, depth11));\n        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));\n        float targetDepth = minDepth;\n        // Checkerboard pattern to avoid artifacts\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { \n            targetDepth = maxDepth;\n        }\n        int chosenIndex = 0;\n        float[] samples = float[4](depth00, depth10, depth01, depth11);\n        for(int i = 0; i < 4; ++i) {\n            if (samples[i] == targetDepth) {\n                chosenIndex = i;\n                break;\n            }\n        }\n        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);\n        gNormal = vec4(computeNormal(\n            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]\n        ), 0.0);\n       /* float[] samples = float[4](depth00, depth10, depth01, depth11);\n        float c = 0.25 * (depth00 + depth10 + depth01 + depth11);\n        float[] distances = float[4](depth00, depth10, depth01, depth11);\n        float maxDistance = max(max(distances[0], distances[1]), max(distances[2], distances[3]));\n\n        int remaining[3];\n        int rejected[3];\n        int i, j, k;\n\n        for(i = 0, j = 0, k = 0; i < 4; ++i) {\n            if (distances[i] < maxDistance) {\n                remaining[j++] = i;\n            } else {\n                rejected[k++] = i;\n            }\n        }\n        for(;j < 3;++j) {\n            remaining[j] = rejected[--k];\n        }\n        vec3 s = vec3(\n            samples[remaining[0]],\n            samples[remaining[1]],\n            samples[remaining[2]]\n        );\n        c = (s.x + s.y + s.z) / 3.0;\n\n        distances[0] = abs(c - s.x);\n        distances[1] = abs(c - s.y);\n        distances[2] = abs(c - s.z);\n\n        float minDistance = min(min(distances[0], distances[1]), distances[2]);\n\n        for(i = 0; i < 3; ++i) {\n            if (distances[i] == minDistance) {\n                break;\n            }\n        }*/\n      /*  gl_FragColor = vec4(samples[remaining[i]], 0.0, 0.0, 0.0);\n        gNormal = vec4(computeNormal(\n            getWorldPos(samples[remaining[i]], uvSamples[remaining[i]]), uvSamples[remaining[i]]\n        ), 0.0);*/\n    }"},yQ="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",tMe=Uint8Array.from(atob(yQ),(t=>t.charCodeAt(0)));function xQ(t,e,i){if(e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE)){let n=e.getQueryParameter(t,e.QUERY_RESULT)/1e6;i.lastTime=n}else setTimeout((()=>{xQ(t,e,i)}),1)}u(xQ,"$87431ee93b037844$var$checkTimerQuery");var p7=class extends Jo{constructor(t,e,i=512,n=512){super(),this.width=i,this.height=n,this.clear=!0,this.camera=e,this.scene=t,this.autosetGamma=!0,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new at(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0},{set:(t,e,i)=>{let n=t[e];return t[e]=i,"aoSamples"===e&&n!==i&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),"denoiseSamples"===e&&n!==i&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),"halfRes"===e&&n!==i&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),"depthAwareUpsampling"===e&&n!==i&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),"gammaCorrection"===e&&(this.autosetGamma=!1),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.copyQuad=new ud(new Xt({uniforms:{tDiffuse:{value:null}},depthWrite:!1,vertexShader:"\n            varying vec2 vUv;\n            void main() {\n                vUv = uv;\n                gl_Position = vec4(position, 1);\n            }\n            ",fragmentShader:"\n            uniform sampler2D tDiffuse;\n            varying vec2 vUv;\n            void main() {\n                gl_FragColor = texture2D(tDiffuse, vUv);\n            }\n            "})),this.writeTargetInternal=new ti(this.width,this.height,{minFilter:wi,magFilter:wi,depthBuffer:!1}),this.readTargetInternal=new ti(this.width,this.height,{minFilter:wi,magFilter:wi,depthBuffer:!1}),this.outputTargetInternal=new ti(this.width,this.height,{minFilter:wi,magFilter:wi,depthBuffer:!1}),this.bluenoise=new Sx(tMe,128,128),this.bluenoise.colorSpace=qW,this.bluenoise.wrapS=wr,this.bluenoise.wrapT=wr,this.bluenoise.minFilter=ui,this.bluenoise.magFilter=ui,this.bluenoise.needsUpdate=!0,this.lastTime=0,this.needsDepthTexture=!0,this.needsSwap=!0,this._r=new qe,this._c=new at}configureHalfResTargets(){this.configuration.halfRes?(this.depthDownsampleTarget=new jE(this.width/2,this.height/2,2),this.depthDownsampleTarget.texture[0].format=AO,this.depthDownsampleTarget.texture[0].type=Au,this.depthDownsampleTarget.texture[0].minFilter=ui,this.depthDownsampleTarget.texture[0].magFilter=ui,this.depthDownsampleTarget.texture[0].depthBuffer=!1,this.depthDownsampleTarget.texture[1].format=Gs,this.depthDownsampleTarget.texture[1].type=Np,this.depthDownsampleTarget.texture[1].minFilter=ui,this.depthDownsampleTarget.texture[1].magFilter=ui,this.depthDownsampleTarget.texture[1].depthBuffer=!1,this.depthDownsampleQuad=new ud(new Xt(eMe))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(t=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);let e={...Kwe};e.fragmentShader=e.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),t&&(e.fragmentShader="#define LOGDEPTH\n"+e.fragmentShader),this.configuration.halfRes&&(e.fragmentShader="#define HALFRES\n"+e.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new Xt(e)):this.effectShaderQuad=new ud(new Xt(e))}configureDenoisePass(t=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);let e={...$we};e.fragmentShader=e.fragmentShader.replace("16",this.configuration.denoiseSamples),t&&(e.fragmentShader="#define LOGDEPTH\n"+e.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new Xt(e)):this.poissonBlurQuad=new ud(new Xt(e))}configureEffectCompositer(t=!1){let e={...Jwe};t&&(e.fragmentShader="#define LOGDEPTH\n"+e.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(e.fragmentShader="#define HALFRES\n"+e.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new Xt(e)):this.effectCompositerQuad=new ud(new Xt(e))}generateHemisphereSamples(t){let e=[];for(let i=0;i<t;i++){let n=2.399963*i,r=Math.sqrt(i+.5)/Math.sqrt(t),o=r*Math.cos(n),s=r*Math.sin(n),a=Math.sqrt(1-(o*o+s*s));e.push(new K(o,s,a))}return e}generateHemisphereSamplesR(t){let e=[];for(let i=0;i<t;i++)e.push((i+1)/t);return e}generateDenoiseSamples(t,e){let i=2*Math.PI*e/t,n=1/t,r=n,o=[],s=n,a=0;for(let e=0;e<t;e++)o.push(new qe(Math.cos(a),Math.sin(a)).multiplyScalar(Math.pow(s,.75))),s+=r,a+=i;return o}setSize(t,e){this.width=t,this.height=e;let i=this.configuration.halfRes?.5:1;this.writeTargetInternal.setSize(t*i,e*i),this.readTargetInternal.setSize(t*i,e*i),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(t*i,e*i),this.outputTargetInternal.setSize(t,e)}setDepthTexture(t){this.depthTexture=t}render(t,e,i){let n,r,o,s=t.xr.enabled;t.xr.enabled=!1,t.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=t.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer)),this.debugMode&&(n=t.getContext(),r=n.getExtension("EXT_disjoint_timer_query_webgl2"),null===r&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.debugMode&&(o=n.createQuery(),n.beginQuery(r.TIME_ELAPSED_EXT,o)),this.camera.updateMatrixWorld(),this._r.set(this.width,this.height);let a=this.configuration.aoRadius;this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(a*=.5),this.configuration.halfRes&&(t.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(t)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=e.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new K),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=a,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=t.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,t.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(t);for(let e=0;e<this.configuration.denoiseIterations;e++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new K),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=a,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=e,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=t.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,t.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(t);this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=e.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=t.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=a,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new K),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error("Unsupported fog type ".concat(this.scene.fog.constructor.name," in SSAOPass."))),t.setRenderTarget(this.outputTargetInternal),this.effectCompositerQuad.render(t),t.setRenderTarget(this.renderToScreen?null:i),this.copyQuad.material.uniforms.tDiffuse.value=this.outputTargetInternal.texture,this.copyQuad.render(t),this.debugMode&&(n.endQuery(r.TIME_ELAPSED_EXT),xQ(o,n,this)),t.xr.enabled=s}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(t){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(t)}setQualityMode(t){"Performance"===t?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Low"===t?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):"Medium"===t?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):"High"===t?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):"Ultra"===t&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}};u(p7,"$87431ee93b037844$export$2489f9981ab0fa82");var sS=p7,Sxt=Uint8Array.from(atob(yQ),(t=>t.charCodeAt(0))),FQ=Bt(O4()),vb="varying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n\n",bQ="varying vec2 vUv;\nuniform sampler2D colorTexture;\n\nvoid main() {\n\tvec4 outputColor = texture2D(colorTexture, vUv).rgba;\n\n\tgl_FragColor = outputColor;\n}\n",_Q="varying vec2 vUv;\nuniform float animatedColorOpacity;\nuniform sampler2D inputBuffer;\nuniform sampler2D staticSceneDepthTexture;\nuniform sampler2D animatedSceneColorTexture;\nuniform sampler2D animatedSceneDepthTexture;\nuniform sampler2D alwaysOnBottomSceneColorTexture;\n\n// Perform alpha blending between two colors with non-premultiplied\n// alpha, and return their non-premultiplied composite.\n//\n// This corresponds to the OVER porter-duff operation, aka, standard alpha\n// blending as implemented in most image editors.\nvec4 alphaBlend(vec4 background, vec4 foreground) {\n\tvec3 resultColor = (\n\t\tforeground.rgb * foreground.a +\n\t\tbackground.rgb * background.a * (1.0 - foreground.a)\n\t);\n\tfloat resultAlpha = foreground.a + background.a * (1.0 - foreground.a);\n\treturn vec4(resultColor / resultAlpha, resultAlpha);\n}\n\nvoid main() {\n\tfloat staticDepth = texture2D(staticSceneDepthTexture, vUv).r;\n\tfloat animatedDepth = texture2D(animatedSceneDepthTexture, vUv).r;\n\n\tvec4 inputColor = texture2D(inputBuffer, vUv).rgba;\n\tvec4 animatedColor = texture2D(animatedSceneColorTexture, vUv).rgba;\n\n\tif (staticDepth < animatedDepth) {\n\t\tanimatedColor.a *= animatedColorOpacity;\n\t}\n\n\tvec4 mixedColor = alphaBlend(inputColor, animatedColor);\n\n\tgl_FragColor = mixedColor;\n}\n",wQ="varying vec2 vUv;\nuniform sampler2D inputBuffer;\nuniform sampler2D alwaysOnBottomSceneColorTexture;\nuniform sampler2D alwaysOnTopSceneColorTexture;\n\n// Assumes that the foreground (src) color is premultiplied with its alpha.\n// This corresponds to GL_ONE source factor and GL_ONE_MINUS_SRC_ALPHA for destination factor.\nvec4 alphaBlendPremultipliedAlpha(vec4 background, vec4 foreground) {\n\treturn foreground + (background * (1.0 - foreground.a));\n}\n\nvoid main() {\n\tvec4 staticSceneColor = linearToOutputTexel(texture2D(inputBuffer, vUv).rgba);\n\tvec4 outdoorViewColor = texture2D(alwaysOnBottomSceneColorTexture, vUv).rgba;\n\tvec4 alwaysOnTopColor = linearToOutputTexel(texture2D(alwaysOnTopSceneColorTexture, vUv).rgba);\n\tvec4 staticPlusOutdoor = mix(outdoorViewColor, staticSceneColor, staticSceneColor.a);\n\t\n\tgl_FragColor = alphaBlendPremultipliedAlpha(staticPlusOutdoor, alwaysOnTopColor);\n}\n",MQ="varying vec2 vUv;\nuniform sampler2D staticSceneColorTexture;\n\nvoid main() {\n\tvec4 inputColor = texture2D(staticSceneColorTexture, vUv).rgba;\n\n\tgl_FragColor = inputColor;\n}\n";E(),E();var aMe=u((function(t,e,i){this.touch=t,this.camera=e,this.cameraPlane=i,this.viewCoordinate={x:t.x,y:t.y},this.camera.updateMatrixWorld(),this.camera.updateMatrix(),this.snapHolderMatrix=this.camera.matrixWorld.clone(),this.snapCamera=this.camera.clone(),this.snapshotCameraState=function(){this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraPosition=this.camera.position;let t=new K(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster=this.raycaster||new pa,this.raycaster.setFromCamera(t,this.snapCamera);let e=this.raycaster.intersectObject(this.cameraPlane,!1);this.worldCoordinate=e&&e[0]&&e[0].point,this.snapshotted=!0},this.updateAnchorState=function(t,e){this.camera=t,this.snapCamera=t.clone(),this.snapHolderMatrix=t.matrixWorld.clone(),this.updateViewCoordinate(e),this.snapshotCameraState()},this.updateViewCoordinate=function(t){this.viewCoordinate={x:t.x,y:t.y}},this.reUnproject=function(){let t=new K(this.viewCoordinate.x,this.viewCoordinate.y,1);this.raycaster.setFromCamera(t,this.snapCamera);let e=this.raycaster.intersectObject(this.cameraPlane,!1)[0];if(e)return e.point},this.snapshotCameraState()}),"TouchAnchor"),d7=aMe;function EQ(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function oS(t,e){return Math.sqrt((e.y-t.y)**2+(e.x-t.x)**2)}function TQ(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}E(),u(EQ,"angle"),u(oS,"distance"),u(TQ,"average");var lMe=u((function(t,e){this.input1=t,this.input2=e,this.lastAngle=EQ(t,e),this.lastDistance=oS(t,e),this.totalDistance=0,this.first=t,this.second=e,this.update=function(t,e){let i=oS(t,e);this.input1=t,this.input2=e;let n=EQ(t,e);this.lastAngle=n,this.lastDistance=i,this.totalDistance+=(oS(this.first,t)+oS(this.second,e))/2,this.first=TQ(this.first,t),this.second=TQ(this.second,e)}}),"InputSet"),SQ=lMe;E();var AQ=Bt(Eu()),aS={SINGLE_FLOOR:"single_floor",MULTI_FLOOR:"multi_floor"},Yxt=Math.PI/2,Xxt=AQ.default.Easing.Quadratic.InOut;function n0(t,e,i){null==e&&(e=t.g,i=t.b,t=t.r);let n=0,r=t;e>t&&(n=1,r=e),i>e&&i>t&&(n=2,r=i);let o=t;e<t&&(o=e),i<e&&i<t&&(o=i);let s=0,a=0,l=0;return r!==o&&(s=0===n?60/360*(e-i)/(r-o):1===n?60/360*(2+(i-t)/(r-o)):60/360*(4+(t-e)/(r-o)),a=0===r?0:(r-o)/r),l=r,[s,a,l]}function oh(t,e,i){let n=360*t%360/60,r=0|n,o=n-r,s=i*(1-e),a=i*(1-e*o),l=i*(1-e*(1-o)),u=0,h=0,c=0;switch(r){case 0:u=i,h=l,c=s;break;case 1:u=a,h=i,c=s;break;case 2:u=s,h=i,c=l;break;case 3:u=s,h=a,c=i;break;case 4:u=l,h=s,c=i;break;case 5:u=i,h=s,c=a}return new at(u,h,c)}E(),E(),u(n0,"rgb2hsv"),u(oh,"hsv2rgb");var CQ=16,x7=class{constructor({minimum:t,maximum:e,step:i,current:n,onValueChanged:r}){this._minimum=t,this._maximum=e,this._step=i,this._onValueChanged=r,this._element=document.createElement("input"),this._element.type="range",this._element.min=this._minimum,this._element.max=this._maximum,null!=this._step&&(this._element.step=this._step),this._element.value=null!=n?n:this._minimum,null!=r&&(this._element.addEventListener("input",(t=>{r(this._element.value)})),r(this._element.value)),Object.assign(this._element.style,{height:CQ+"px"})}destroy(){this._element=null,Object.setPrototypeOf(this,null)}addValueChangedListener(t){this._element.addEventListener("input",(e=>t(this._element.value)))}setValue(t){this._element.value=t}get element(){return this._element}get value(){return this._element.value}get displayedValue(){return""+this._element.value}get height(){return CQ}};u(x7,"DebugUIScalarSlider");var yb=x7,m7=16,b7=class{constructor({current:t,onValueChanged:e}){this._onValueChanged=e,this._element=document.createElement("div"),this._titleElement=document.createElement("input"),this._titleElement.type="checkbox",this._titleElement.checked=t||!1,Object.assign(this._titleElement.style,{width:m7+"px",height:m7+"px",margin:"0px"}),null!=e&&(this._titleElement.addEventListener("click",(t=>{e(this._titleElement.checked)})),e(this._titleElement.checked))}destroy(){this._element=null,this._titleElement=null,Object.setPrototypeOf(this,null)}addValueChangedListener(t){this._titleElement.addEventListener("click",(e=>t(this._titleElement.checked)))}get element(){return this._element}get titleElement(){return this._titleElement}get value(){return this._titleElement.checked}get displayedValue(){return this._titleElement.checked?"true":"false"}get height(){return 0}get titleElementWidth(){return m7}};u(b7,"DebugUICheckbox");var hS=b7,g7=12,lS=2,i0=64,uS=16,v7=24,PQ=48,_7=class{constructor({current:t,onValueChanged:e}){this._onValueChanged=e,this._element=document.createElement("div"),this._titleElement=document.createElement("div"),this._color=t||new at,this._listeners=[],Object.assign(this._element.style,{width:"100%",height:this.height+"px"}),Object.assign(this._titleElement.style,{width:g7-2+"px",height:g7-2+"px","border-radius":"2px"}),this._colorPickerMain=document.createElement("canvas"),this._colorPickerMain.height=i0-2,Object.assign(this._colorPickerMain.style,{position:"absolute",left:"0px",right:"0px",top:"0px",height:i0-2+"px"}),this._element.appendChild(this._colorPickerMain),this._colorPickerBottomSlider=document.createElement("canvas"),this._colorPickerBottomSlider.height=uS-2,Object.assign(this._colorPickerBottomSlider.style,{position:"absolute",left:"0px",right:"0px",top:i0+lS+"px",height:uS-2+"px"}),this._element.appendChild(this._colorPickerBottomSlider),this._requestAnimationFrameHandle=null,this._requestAnimationFrameUpdate=this._requestAnimationFrameUpdate.bind(this),this._pickingMain=!1,this._pickingX=0,this._pickingY=0,this._colorPickerMain.addEventListener("pointerdown",(t=>{this._pickingMain=!0,this._updateMain(t.offsetX,t.offsetY),this._notify(),this._moveListener=t=>{let e=t.clientX-this._colorPickerMain.getBoundingClientRect().x,i=t.clientY-this._colorPickerMain.getBoundingClientRect().y;this._pickingX=Math.min(Math.max(e,0),this._colorPickerMain.clientWidth),this._pickingY=Math.min(Math.max(i,0),this._colorPickerMain.clientHeight),this._requestAnimationFrame()},document.body.addEventListener("pointermove",this._moveListener),this._upListener=t=>{this._pickingMain=!1,this.redraw(),document.body.removeEventListener("pointermove",this._moveListener),document.body.removeEventListener("pointerup",this._upListener),delete this._moveListener,delete this._upListener},document.body.addEventListener("pointerup",this._upListener)})),this._pickingBottomSlider=!1,this._colorPickerBottomSlider.addEventListener("pointerdown",(t=>{this._pickingBottomSlider=!0,this._updateBottomSlider(t.offsetX),this._notify(),this._bottomMoveListener=t=>{let e=t.clientX-this._colorPickerBottomSlider.getBoundingClientRect().x;this._pickingX=Math.min(Math.max(e,0),this._colorPickerMain.clientWidth),this._requestAnimationFrame()},document.body.addEventListener("pointermove",this._bottomMoveListener),this._bottomUpListener=t=>{this._pickingBottomSlider=!1,this.redraw(),document.body.removeEventListener("pointermove",this._bottomMoveListener),document.body.removeEventListener("pointerup",this._bottomUpListener),delete this._bottomMoveListener,delete this._bottomUpListener},document.body.addEventListener("pointerup",this._bottomUpListener)}));let i=0,n=u(((t,e)=>{let n=document.createElement("button");return Object.assign(n.style,{position:"absolute",top:this.height-v7+"px",left:i+"px",height:v7+"px",width:PQ+"px",color:"grey"}),n.innerHTML=e,i+=PQ+lS,n.addEventListener("click",(()=>{this._modeButtons[this._mode].style.color="grey",this._mode=t,n.style.color="black",this.redraw()})),this._element.appendChild(n),n}),"createModeButton");this._modeButtons={},this._modeButtons.hsv=n("hsv","HSV"),this._modeButtons.svh=n("svh","SVH"),this._modeButtons.rgb=n("rgb","RGB"),this._mode="hsv",this._modeButtons.hsv.style.color="black",this._requestAnimationFrame(),this._notify()}destroy(){document.body.removeEventListener("pointermove",this._moveListener),document.body.removeEventListener("pointerup",this._upListener),document.body.removeEventListener("pointermove",this._bottomMoveListener),document.body.removeEventListener("pointerup",this._bottomUpListener),this._element=null,this._titleElement=null,this._destroyed=!0,Object.setPrototypeOf(this,null)}addValueChangedListener(t){this._listeners.push(t)}setValue(t){this._color.copy(t),this.redraw(),this._notify()}_requestAnimationFrame(){null==this._requestAnimationFrameHandle&&!this._destroyed&&(this._requestAnimationFrameHandle=requestAnimationFrame(this._requestAnimationFrameUpdate))}_requestAnimationFrameUpdate(){this._pickingMain&&(this._updateMain(this._pickingX,this._pickingY),this._notify()),this._pickingBottomSlider&&(this._updateBottomSlider(this._pickingX),this._notify()),this._requestAnimationFrameHandle=null}_notify(){null!=this._onValueChanged&&this._onValueChanged(this._color);for(let t of this._listeners)t(this._color)}_updateMain(t,e){let i=this._colorPickerMain.clientWidth,n=i0;this._pickingX=Math.min(Math.max(t,1),i-1)-1,this._pickingY=Math.min(Math.max(e,1),n-1)-1;let r=this._pickingX/(i-1),o=this._pickingY/(n-1);if("hsv"===this._mode){let[,,t]=n0(this._color);this._color.set(oh(r,o,t))}else if("svh"===this._mode){let[t,,]=n0(this._color);this._color.set(oh(t,r,1-o))}else this._color.r=r,this._color.g=o;this.redraw()}_updateBottomSlider(t){let e=this._colorPickerBottomSlider.clientWidth;this._pickingX=Math.min(Math.max(t,1),e-1)-1;let i=this._pickingX/(e-1);if("hsv"===this._mode){let[t,e]=n0(this._color);this._color.set(oh(t,e,i))}else if("svh"===this._mode){let[,t,e]=n0(this._color);this._color.set(oh(i,t,e))}else this._color.b=i;this.redraw()}redraw(){let t=this._element.clientWidth-2,e=i0-2,i=uS-2;this._colorPickerMain.width!==t&&(this._colorPickerMain.width=t);let[n,r,o]=n0(this._color),s=this._colorPickerMain.getContext("2d");for(let i=0;i<e;++i)for(let r=0;r<t;++r){if("hsv"===this._mode){let n=r/(t-1),a=i/(e-1),l=o,{r:u,g:h,b:c}=oh(n,a,l);s.fillStyle="rgb(".concat(255*u,",").concat(255*h,",").concat(255*c,")")}else if("svh"===this._mode){let o=r/(t-1),a=1-i/(e-1),l=n,{r:u,g:h,b:c}=oh(l,o,a);s.fillStyle="rgb(".concat(255*u,",").concat(255*h,",").concat(255*c,")")}else{let n=r/t*255,o=i/e*255,a=255*this._color.b;s.fillStyle="rgb(".concat(n,",").concat(o,",").concat(a,")")}s.fillRect(r,i,1,1)}this._pickingMain&&(s.fillStyle="rgba(0,0,0,0.5)",s.fillRect(0,this._pickingY,t,1),s.fillRect(this._pickingX,0,1,e)),this._colorPickerBottomSlider.width!==t&&(this._colorPickerBottomSlider.width=t);let a=this._colorPickerBottomSlider.getContext("2d");for(let e=0;e<t;++e){if("hsv"===this._mode){let i=n,o=r,s=e/(t-1),{r:l,g:u,b:h}=oh(i,o,s);a.fillStyle="rgb(".concat(255*l,",").concat(255*u,",").concat(255*h,")")}else if("svh"===this._mode){let i=r,n=o,s=e/(t-1),{r:l,g:u,b:h}=oh(s,i,n);a.fillStyle="rgb(".concat(255*l,",").concat(255*u,",").concat(255*h,")")}else{let i=255*this._color.r,n=255*this._color.g,r=e/(t-2)*255;a.fillStyle="rgb(".concat(i,",").concat(n,",").concat(r,")")}a.fillRect(e,0,1,i)}this._pickingBottomSlider&&(a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(this._pickingX,0,1,i));let l=255*this._color.r,u=255*this._color.g,h=255*this._color.b,c="1px solid rgb(".concat(.9*l,",").concat(.9*u,",").concat(.9*h,")");Object.assign(this._colorPickerMain.style,{border:c}),Object.assign(this._colorPickerBottomSlider.style,{border:c}),Object.assign(this._titleElement.style,{"background-color":"rgb(".concat(l,",").concat(u,",").concat(h,")"),border:c})}get element(){return this._element}get titleElement(){return this._titleElement}get value(){return this._color}get displayedValue(){return"#"+this._color.getHexString().toUpperCase()}get height(){return i0+lS+uS+lS+v7}get titleElementWidth(){return g7}};u(_7,"DebugUIColorPicker");var xb=_7,cS=16,IQ=12,cMe=4,OQ=10,LQ=12,w7=class{constructor({name:t}){this._name=t,this._element=document.createElement("div"),this._entries=[],this._height=LQ}destroy(){for(let t of this._entries)t.destroy();this._entries=null,this._element=null,Object.setPrototypeOf(this,null)}get element(){return this._element}get height(){return this._height}addControl(t,e,i){if(-1!==this._entries.findIndex((e=>e.name===t)))return;let n=new y7({name:t,description:e,control:i});this._entries.push(n),this._element.appendChild(n.element),null!=i.redraw&&i.redraw()}removeControl(t){let e=this._entries.findIndex((e=>e.name===t));if(-1!==e){let[t]=this._entries.splice(e,1);this._element.removeChild(t.element),t.destroy()}}_updateLayout(){this._height=0;for(let t of this._entries)t.element.style.top=this._height+"px",this._height+=t.height+LQ;Object.assign(this._element.style,{height:this._height+"px"})}};u(w7,"DebugUIPanel");var fS=w7,M7=class{constructor({name:t,description:e,control:i}){this._name=t,this._description=e,this._control=i,this._element=document.createElement("div"),this._element.title=e,Object.assign(this._element.style,{position:"absolute",left:"0px",right:"0px"}),this._element.appendChild(this._control.element),Object.assign(this._control.element.style,{position:"absolute",left:"0px",width:"100%",top:cS+"px","font-size":OQ+"px"});let n=0;null!=this._control.titleElement&&(this._element.appendChild(this._control.titleElement),Object.assign(this._control.titleElement.style,{position:"absolute",left:"0px",top:"0px","font-size":OQ+"px"}),n=this._control.titleElementWidth+cMe),this._control.addValueChangedListener((t=>{this._displayedValueElement.innerHTML=DQ(this._control.displayedValue)})),this._nameElement=document.createElement("span"),this._nameElement.innerHTML=t,Object.assign(this._nameElement.style,{position:"absolute",left:n+"px",right:"0px",height:cS+"px",color:"#666666","font-size":IQ+"px","text-align":"left","vertical-align":"middle"}),this._element.appendChild(this._nameElement),this._displayedValueElement=document.createElement("span"),this._displayedValueElement.innerHTML=DQ(this._control.displayedValue),Object.assign(this._displayedValueElement.style,{position:"absolute",left:n+"px",right:"0px",height:cS+"px","font-size":IQ+"px","text-align":"right","vertical-align":"middle"}),this._element.appendChild(this._displayedValueElement)}destroy(){this._element=null,this._nameElement=null,this._displayedValueElement=null,this._control.destroy(),Object.setPrototypeOf(this,null)}get name(){return this._name}get element(){return this._element}get value(){return this._control.value}get height(){return this._control.height+cS}};u(M7,"DebugUIEntry");var y7=M7;function DQ(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}u(DQ,"escapeHTML");var bb=Bt(Eu()),NQ=512,RQ=6371e3,BQ=0,kQ=22,pS=17,T7=20,hMe=-85.051129,fMe=85.051129,E7=1e4,qQ={chain:"chain",cancel:"cancel"},pMe=new Eo,dMe=u((function(t,e,i,n){this.dispatcher=pMe,this.camera=t,this.canvas=e,this.elevation=t.parent,this.orbit=this.elevation.parent;let r,o=2*Math.PI,s=100;this.zoomSpeed=5,this.rotateSpeed=100,this.enabled=!0,this.enableZoom=!0,this.enablePan=!0,this.enablePedestal=!1,this.maxPedestal=1/0,this.minPedestal=-1/0,this.enableRotate=!0,this.minZoom=375,this.maxZoom=1e4,this.initialMinZoom=375,this.initialMaxZoom=1e4,this.ignoreZoomLimits=!1,this.minExpandedZoom=375,this.maxExpandedZoom=1e5,this.zoomFactor=1,this.panBounds={margin:1.25,min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0},center:{x:0,y:0},radius:200},this.minTilt=0,this.maxTilt=1.2,this.mouseButtons={ORBIT:IT.RIGHT,ZOOM:IT.MIDDLE,PAN:IT.LEFT};let a=this,l=new To(1e6,1e6),h=new ls({color:0,visible:!1}),c=new Ft(l,h);n.on(7,(()=>{var t;let e=null==(t=n.mapObjects.get(n.currentMap))?void 0:t.object;if(null!=e){let t=new K;t.applyMatrix4(e.matrix),c.position.z=t.z}n.tryRendering()}));let p=new pa;i.add(c);let d,f=-1,g=0,m=1,v=2,y=3,x=4,_=5,b=6,M=7,E=8,w=9,A=f,S=new qe,T=[],C={offsetLeft:0,offsetTop:0},P=new qe,I=new qe,L=new qe,O=new qe,N=new qe,D=new qe,R=new K,q=new K,k=(new qe,new qe,new qe,!1),F=new hT(!0),U=0,z=!0;this.CAMERA_EVENTS={},this.CAMERA_EVENTS.CHANGE_EVENT={type:"change"},this.CAMERA_EVENTS.PAN_START_EVENT={type:"panStart"},this.CAMERA_EVENTS.PAN_END_EVENT={type:"panEnd"},this.CAMERA_EVENTS.PEDESTAL_START_EVENT={type:"pedestalStart"},this.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT={type:"pedestalChange"},this.CAMERA_EVENTS.PEDESTAL_END_EVENT={type:"pedestalEnd"},this.CAMERA_EVENTS.ROTATE_START_EVENT={type:"rotateStart"},this.CAMERA_EVENTS.ROTATE_END_EVENT={type:"rotateEnd"},this.CAMERA_EVENTS.ZOOM_START_EVENT={type:"zoomStart"},this.CAMERA_EVENTS.ZOOM_END_EVENT={type:"zoomEnd"},this.CAMERA_EVENTS.MULTI_START_EVENT={type:"multiStart"},this.CAMERA_EVENTS.MULTI_END_EVENT={type:"multiEnd"},this.CAMERA_EVENTS.MULTI_CANCEL_EVENT={type:"multiCancel"},this.INTERACTION_EVENTS={},this.INTERACTION_EVENTS.USER_PAN_START_EVENT={type:"userPanStart"},this.INTERACTION_EVENTS.USER_PEDESTAL_START_EVENT={type:"userPedestalStart"},this.INTERACTION_EVENTS.USER_ROTATE_START_EVENT={type:"userRotateStart"},this.INTERACTION_EVENTS.USER_DOLLY_START_EVENT={type:"userDollyStart"},this.INTERACTION_EVENTS.USER_ZOOM_START_EVENT={type:"userZoomStart"},this.INTERACTION_EVENTS.USER_TILT_START_EVENT={type:"userTiltStart"},this.INTERACTION_EVENTS.USER_PAN_END_EVENT={type:"userPanEnd"},this.INTERACTION_EVENTS.USER_PEDESTAL_END_EVENT={type:"userPedestalEnd"},this.INTERACTION_EVENTS.USER_ROTATE_END_EVENT={type:"userRotateEnd"},this.INTERACTION_EVENTS.USER_DOLLY_END_EVENT={type:"userDollyEnd"},this.INTERACTION_EVENTS.USER_ZOOM_END_EVENT={type:"userZoomEnd"},this.INTERACTION_EVENTS.USER_TILT_END_EVENT={type:"userTiltEnd"},this.UPDATE_EVENTS={},this.UPDATE_EVENTS.POSITION_UPDATED_EVENT={type:"positionUpdated"},this.UPDATE_EVENTS.ZOOM_UPDATED_EVENT={type:"zoomUpdated"},this.UPDATE_EVENTS.TILT_UPDATED_EVENT={type:"tiltUpdated"},this.UPDATE_EVENTS.ROTATION_UPDATED_EVENT={type:"rotationUpdated"};let V=!1,j=u((()=>{V=!0}),"setUserInteracting"),G=u((()=>{V=!1}),"unsetUserInteracting");for(let t in this.INTERACTION_EVENTS){let e=this.INTERACTION_EVENTS[t];e.type.endsWith("Start")&&a.dispatcher.addEventListener(e.type,j)}for(let t in this.INTERACTION_EVENTS){let e=this.INTERACTION_EVENTS[t];e.type.endsWith("End")&&a.dispatcher.addEventListener(e.type,G)}let W=u((t=>{a.dispatcher.dispatchEvent({...a.CAMERA_EVENTS.PEDESTAL_CHANGE_EVENT,pedestal:t,scrolledToTop:a.scrolledToTop,scrolledToBottom:a.scrolledToBottom,scrollPercent:a.scrollPercent})}),"dispatchPedestalChangeEvent");function H(t,e=!1){"number"==typeof t&&!isNaN(t)&&(a.orbit.position.z=t,e&&W(t),n.tryRendering())}this.addDebugControls=function(t){t.addDebugControls({CameraControls:[{name:"Stay Inside Bounds",description:"Ensure the camera stays inside its bounds.\n\nCaution: going too far outside-of-bounds may slow renderingsignificantly.",control:new hS({current:!0,onValueChanged:t=>{z=t}})}]})},this.removeDebugControls=function(t){t.removeDebugControls({CameraControls:["Stay Inside Bounds"]})},this.pan=function(t,e){isNaN(t)||isNaN(e)||(a.setPosition(a.orbit.position.x+t,a.orbit.position.y+e),a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.POSITION_UPDATED_EVENT))},this.getPositionCoordinate=function(){return n.convert3DMapPositionToCoordinate(a.getPosition())},this.getZoomLevel=function(){return this.convertAltitudeToZoomLevel(this.getZoom())},this.setZoomLevel=function(t){this.setZoom(convertZoomToAltitude(t))},this.convertZoomToAltitude=function(t){let{lat:e}=a.getPositionCoordinate(),i=n.cameraObject.fov,r=Br.clamp(t,BQ,kQ),o=Math.pow(2,r),s=Br.clamp(e,hMe,fMe),l=o*NQ;return Math.cos(Br.degToRad(s))*Math.PI*2*RQ/l*n.canvasHeight/2/Math.tan(Br.degToRad(i)/2)/n.referenceMap.scale},this.convertAltitudeToZoomLevel=function(t){let{lat:e}=a.getPositionCoordinate(),i=n.cameraObject.fov,r=t*n.referenceMap.scale*2*Math.tan(Br.degToRad(i)/2)/n.canvasHeight,o=2*Math.cos(Br.degToRad(e))*Math.PI*RQ/r;return Br.clamp(Math.log2(o/NQ),BQ,kQ)},this.setPosition=function(t,e){if(isNaN(t)||isNaN(e))return;A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PAN_START_EVENT);let i=t-a.panBounds.center.x,n=e-a.panBounds.center.y,r=Math.sqrt(i*i+n*n);if(z&&r>a.panBounds.radius){let t=Math.atan2(n,i),e={x:Math.cos(t)*a.panBounds.radius+a.panBounds.center.x,y:Math.sin(t)*a.panBounds.radius+a.panBounds.center.y};a.orbit.position.x=e.x,a.orbit.position.y=e.y}else a.orbit.position.x=t,a.orbit.position.y=e;a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.POSITION_UPDATED_EVENT),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&a.dispatcher.dispatchEvent(a.this.CAMERA_EVENTS.PAN_END_EVENT)},this.setRotation=function(t,e){if(isNaN(t))return;A==f&&!e&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_START_EVENT);let i=t%o;i!==a.orbit.rotation.z&&(a.orbit.rotation.z=i,e||a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.ROTATION_UPDATED_EVENT)),e||a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&!e&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_END_EVENT)},this.rotate=function(t){if(isNaN(t))return;A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_START_EVENT);let e=(a.orbit.rotation.z+t)%o;e!==a.orbit.rotation.z&&(a.orbit.rotation.z=e,a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.ROTATION_UPDATED_EVENT)),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_END_EVENT)},this.setTilt=function(t,e){if(isNaN(t))return;A==f&&!e&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_START_EVENT);let i=z?Math.max(Math.min(t,a.maxTilt),a.minTilt):t;i!==a.elevation.rotation.x&&(a.elevation.rotation.x=i,e||a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.TILT_UPDATED_EVENT)),e||a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&!e&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_END_EVENT)},this.tilt=function(t){if(isNaN(t))return;A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_START_EVENT);let e=z?Math.max(Math.min(t+a.getTilt(),a.maxTilt),a.minTilt):t+a.getTilt();e!==a.elevation.rotation.x&&(a.elevation.rotation.x=e,a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.TILT_UPDATED_EVENT)),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_END_EVENT)},this.setZoom=function(t){if(isNaN(t))return;A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_START_EVENT);let e=z?Math.min(Math.max(t,a.getZoomScaledMin()),a.getZoomScaledMax()):t;e!==a.camera.position.z&&(a.camera.position.z=e,a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.ZOOM_UPDATED_EVENT)),a.camera.near=e/s,a.camera.far=e*s,a.camera.updateProjectionMatrix(),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT)},this.zoom=function(t){if(isNaN(t))return;A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_START_EVENT);let e=a.getZoom()-t;a.camera.position.z=z?Math.min(Math.max(e,a.minZoom*a.zoomFactor),a.maxZoom*a.zoomFactor):e,a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.ZOOM_UPDATED_EVENT),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT)},this.zoomIn=function(t,e,i){let n=this.getZoom();this.animateCamera({zoom:n/1.5},t,e,i)},this.zoomOut=function(t,e,i){let n=this.getZoom();this.animateCamera({zoom:1.5*n},t,e,i)},this.expandZoomLimits=function(t,e){e||(e=1.2),t*e>a.maxZoom&&(a.maxZoom=Math.min(t*e,a.maxExpandedZoom)),t/e<a.minZoom&&(a.minZoom=Math.max(t/e,a.minExpandedZoom))},this.restrictZoomLimits=function(t,e){e||(e=1.2),t*e>a.initialMaxZoom&&t*e<a.maxZoom&&(a.maxZoom=Math.max(a.getZoom(),t*e)),t/e<a.initialMinZoom&&t/e>a.minZoom&&(a.minZoom=Math.min(a.getZoom(),t/e))},this.getPosition=function(){return{x:a.orbit.position.x,y:a.orbit.position.y,z:a.orbit.position.z}},this.getPedestal=function(){return a.orbit.position.z},u(H,"setPedestal"),Object.defineProperty(this,"setPedestal",{enumerable:!1,value:H}),Object.defineProperty(this,"scrollPercent",{get(){let t=this.minPedestal,e=this.maxPedestal,i=this.getPedestal();return i=Math.min(i,e),i=Math.max(i,t),(i-t)/(e-t)*100}}),Object.defineProperty(this,"scrolledToTop",{get(){return 0===this.maxPedestal||Math.ceil(this.getPedestal())>=this.maxPedestal}}),Object.defineProperty(this,"scrolledToBottom",{get(){return 0===this.minPedestal||Math.floor(this.getPedestal())<=this.minPedestal}}),this.getRotation=function(){return a.orbit.rotation.z},this.getTilt=function(){return a.elevation.rotation.x},this.getZoom=function(){return a.camera.position.z},this.isCameraMoving=function(){return A!=f},this.isUserInteracting=function(){return V},this.getZoomScaledMin=function(){return a.minZoom*a.zoomFactor},this.getZoomScaledMax=function(){let t=a.minZoom*a.zoomFactor;return Math.max(a.maxZoom,1.5*t)};let Y=u((function(){return bb.default.getAll().some((function(t){return t._mMapAnimation}))}),"isAnimating");this.isAnimating=Y;let X=new Set;function Z(t){t.isPlaying?t.stop():t.end(),X.delete(t)}function Q(t){P.set(t.clientX,t.clientY),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_START_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_ROTATE_START_EVENT)}function J(){let t=It(S);O.set(t.x,t.y),N.set(a.orbit.position.x,a.orbit.position.y),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PAN_START_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_PAN_START_EVENT)}function $(t){let e={x:t.clientX,y:t.clientY};a.initialShiftPos=e,a.initialPedestal=a.getPedestal(),a.pedestalScaleFactor=GD(a.camera.fov,a.canvas.clientHeight,a.getZoom()),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PEDESTAL_START_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_PEDESTAL_START_EVENT)}function tt(t){t.clientX;let e=t.clientY,i=a.initialPedestal+a.pedestalScaleFactor*(e-a.initialShiftPos.y);z&&(i<a.minPedestal?i=Math.max(i,a.minPedestal):i>a.maxPedestal&&(i=Math.min(i,a.maxPedestal))),i!==a.getPedestal()&&W(i)}function et(t){I.set(t.clientX,t.clientY),L.subVectors(I,P),a.rotate(-L.x/a.rotateSpeed),a.setTilt(a.getTilt()-L.y/a.rotateSpeed),P.copy(I),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT)}function it(){let t=It(S);D.set(t.x,t.y),R.subVectors(D,O),a.setPosition(N.x-R.x,N.y-R.y),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT)}function nt(t){let e=0;return void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e}function rt(t){let e=nt(t),i=a.getZoom();return!(e<0&&i==a.getZoomScaledMax()||e>0&&i==a.getZoomScaledMin())}function ot(t){if(a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_START_EVENT),!rt(t))return U>0&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT),U=0,void(A=f);let e=a.getZoom(),i=e-nt(t)*e/1e4*a.zoomSpeed;a.setZoom(i);let n=i/d;R.subVectors(q,N).multiplyScalar(1-n),a.setPosition(N.x+R.x,N.y+R.y),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT)}function st(t){if(!1!==a.enabled){if(Lt(t),t.preventDefault(),A==y&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT),t.button===a.mouseButtons.ORBIT){if(!1===a.enableRotate)return;Q(t),A=g}else t.button===a.mouseButtons.PAN&&(a.enablePan?(J(),A=v):a.enablePedestal&&($(t),A=E));A!==f&&(a.canvas.addEventListener("mousemove",at,!1),window.addEventListener("mouseup",lt,!1),window.addEventListener("mouseout",lt,!1))}}function at(t){if(!1!==a.enabled)if(t.preventDefault(),Lt(t),A===g){if(!1===a.enableRotate)return;et(t)}else if(A===v){if(!1===a.enablePan)return;it()}else A===y?(k=!0,A=f):A===E&&tt(t)}function lt(){if(!1!==a.enabled){switch(document.removeEventListener("mousemove",at,!1),window.removeEventListener("mouseup",lt,!1),window.removeEventListener("mouseout",lt,!1),A){case v:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PAN_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_PAN_END_EVENT);break;case m:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_DOLLY_END_EVENT);break;case g:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_ROTATE_END_EVENT);break;case E:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PEDESTAL_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_PEDESTAL_END_EVENT)}A=f}}u(Z,"completeTween"),this.cancelAnimation=function(){let t=Array.from(X),e=t[t.length-1];e.state===M&&a.dispatcher.dispatchEvent({type:a.CAMERA_EVENTS.MULTI_CANCEL_EVENT.type,message:{zooming:!0,rotating:!0,tilting:!0}}),Z(e)},this.animateCamera=function(t,e,i,r,o,s){let l={mode:qQ.cancel,...s},u={},h={},c=a.getPosition();if(null!=t.position&&(void 0!==t.position.x&&(u.x=c.x,h.x=t.position.x),void 0!==t.position.y&&(u.y=c.y,h.y=t.position.y),void 0!==t.position.z&&(u.z=c.z,h.z=t.position.z)),void 0!==t.zoom&&(u.zoom=z?Math.min(Math.max(a.getZoom(),a.getZoomScaledMin()),a.getZoomScaledMax()):a.getZoom(),a.viewState!==aS.MULTI_FLOOR&&z?h.zoom=Math.min(Math.max(t.zoom,a.getZoomScaledMin()),a.getZoomScaledMax()):h.zoom=t.zoom),void 0!==t.rotation){let e=u.rotation=a.getRotation(),i=t.rotation%(2*Math.PI),n=i-e;if(Math.abs(n)>Math.PI){let t=n<0?1:-1;h.rotation=i+2*Math.PI*t}else h.rotation=i}void 0!==t.tilt&&(u.tilt=a.getTilt(),a.viewState!==aS.MULTI_FLOOR&&z?h.tilt=Math.max(Math.min(t.tilt,a.maxTilt),a.minTilt):h.tilt=t.tilt);let p=u.zoom!==h.zoom,d=u.rotation!==h.rotation,f=u.tilt!==h.tilt;var g=new bb.default.Tween(u).to(h,B.env.TESTING?0:e).onUpdate((function(t){a.setMulti({x:t.x,y:t.y,z:t.z},t.zoom,t.rotation,t.tilt)})).onComplete((function(){r&&r(),Z(g),a.dispatcher.dispatchEvent({type:a.CAMERA_EVENTS.MULTI_END_EVENT.type,message:{zooming:p,rotating:d,tilting:f}})})).onStart((function(){A!=M&&(A=M,g.state=M,a.dispatcher.dispatchEvent({type:a.CAMERA_EVENTS.MULTI_START_EVENT.type,message:{zooming:p,rotating:d,tilting:f}})),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT)}));let m=Array.from(X),v=m[m.length-1],y=!1;return null!=v&&(l.mode===qQ.chain?(y=!0,v.chain(g)):(Z(v),"function"==typeof o&&o(),v=null)),X.add(g),i?g.easing(i):g.easing(bb.default.Easing.Quadratic.In),!t.doNotAutoStart&&!y&&(g.start(),n.tryRendering()),g._mMapAnimation=!0,g},this.setMulti=function(t,e,i,n){A==f&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.MULTI_START_EVENT);let r=!1;null!=t&&(void 0!==t.x&&!isNaN(t.x)&&(a.orbit.position.x=t.x,r=!0),void 0!==t.y&&!isNaN(t.y)&&(a.orbit.position.y=t.y,r=!0),void 0!==t.z&&!isNaN(t.z)&&this.setPedestal(t.z)),r&&a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.POSITION_UPDATED_EVENT);let o={zooming:!1,tilting:e,rotating:!1};if(void 0!==e&&!isNaN(e)){let t=z?Math.min(Math.max(e,a.getZoomScaledMin()),a.getZoomScaledMax()):e;t!==a.camera.position.z&&(o.zooming=!0,a.camera.position.z=t,a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.ZOOM_UPDATED_EVENT),a.viewState===aS.MULTI_FLOOR?e>E7&&(a.camera.near=e-E7,a.camera.far=e+E7):(a.camera.near=e/s,a.camera.far=e*s),a.camera.updateProjectionMatrix())}if(void 0!==i&&!isNaN(i)&&i!==a.orbit.rotation.z&&(o.rotating=!0,a.orbit.rotation.z=i,a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.ROTATION_UPDATED_EVENT)),void 0!==n&&!isNaN(n)){let t=z?Math.max(Math.min(n,a.maxTilt),a.minTilt):n;t!==a.elevation.rotation.x&&(o.tilting=!0,a.elevation.rotation.x=t,a.dispatcher.dispatchEvent(a.UPDATE_EVENTS.TILT_UPDATED_EVENT))}a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT),A==f&&a.dispatcher.dispatchEvent({type:a.CAMERA_EVENTS.MULTI_END_EVENT.type,message:o})},u(Q,"handleMouseDownRotate"),u(J,"handleMouseDownPan"),u($,"handleMouseDownPedestal"),u(tt,"handleMouseMovePedestal"),u(et,"handleMouseMoveRotate"),u(it,"handleMouseMovePan"),this.getProjectionScaleFactor=GD,this.postRender=function(){(A==v||A==b)&&(p.setFromCamera(S,t),r=p.intersectObject(c,!1)[0],r&&(O.set(r.point.x,r.point.y),N.set(a.orbit.position.x,a.orbit.position.y))),A==y&&k&&(k=!1,d=a.getZoom(),q=It(S),N.set(a.orbit.position.x,a.orbit.position.y)),A==M&&0==Y()&&(A=f,a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.MULTI_END_EVENT))},u(nt,"scrollDelta"),u(rt,"canScrollZoom"),u(ot,"handleMouseWheel"),u(st,"onMouseDown"),u(at,"onMouseMove"),u(lt,"onMouseUp");let ut=null;function ht(t){!1===a.enabled||!1===a.enableZoom||A!==f&&A!==y||(t.preventDefault(),t.stopPropagation(),Lt(t),rt(t)&&(U=F.getElapsedTime(),a.dispatchUserZoomEvent()),A!=y&&rt(t)&&(a.canvas.addEventListener("mousemove",at,!1),A=y,d=a.getZoom(),q=It(S),N.set(a.orbit.position.x,a.orbit.position.y),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_START_EVENT)),null!=ut&&clearTimeout(ut),ut=setTimeout((()=>{a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT)}),50),ot(t))}function ct(t){let e=It(t.x?t:T[0]);O.set(e.x,e.y),N.set(a.orbit.position.x,a.orbit.position.y),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_PAN_START_EVENT),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PAN_START_EVENT)}function pt(t){let e=It(t.x?t:T[0]);D.set(e.x,e.y),R.subVectors(D,O),a.setPosition(N.x-R.x,N.y-R.y),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.CHANGE_EVENT)}function dt(){let t=T[0].x-T[1].x,e=T[0].y-T[1].y;d=a.getZoom();let i={x:T[0].x-t/2,y:T[0].y-e/2};q=It(i),a.orbit.updateMatrixWorld(),a.touchAnchor1=new d7(T[0],a.camera,c),a.touchAnchor2=new d7(T[1],a.camera,c),N.set(a.orbit.position.x,a.orbit.position.y),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_DOLLY_START_EVENT),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.MULTI_START_EVENT)}function ft(){let t=a.touchInputs.first,e=a.touchInputs.second;a.touchAnchor1.viewCoordinate={x:t.x,y:t.y},a.touchAnchor2.viewCoordinate={x:e.x,y:e.y};let i=At(a.touchAnchor1,a.touchAnchor2);i&&St(i),a.orbit.updateMatrixWorld(),a.touchAnchor1.updateAnchorState(a.camera,t),a.touchAnchor2.updateAnchorState(a.camera,e)}function gt(t){P.set(t.touches[1].clientX,t.touches[1].clientY),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_TILT_START_EVENT),a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_START_EVENT)}function mt(t){I.set(t.touches[1].clientX,t.touches[1].clientY),L.subVectors(I,P),a.setTilt(a.getTilt()-L.y/a.rotateSpeed),P.copy(I)}function vt(t){$(t.touches[0])}function yt(t){tt(t.touches[0])}function xt(){A===x||A===_?a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.MULTI_END_EVENT):A===b&&a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PAN_END_EVENT)}function _t(t){if(!1!==a.enabled)switch(Pt(t),Nt(t),t.touches.length){case 1:a.enablePedestal?(vt(t),A=w):a.enablePan&&(ct(t),A=b);break;case 2:a.touchInputs=new SQ(T[0],T[1]);break;default:A=f}}function bt(t){if(!1!==a.enabled)switch(Nt(t),t.touches.length){case 2:t.preventDefault(),t.stopPropagation();let e={...a.touchInputs.first},i={...a.touchInputs.second},n=new qe(T[0].x,T[0].y),r=new qe(T[1].x,T[1].y);if(a.touchInputs.update(T[0],T[1]),a.enableRotate&&A===x)mt(t);else if(A===_)ft();else if(a.touchInputs.totalDistance>.05&&A!==_){let o=e.y<n.y&&i.y<r.y,s=e.y>n.y&&i.y>r.y;a.enableRotate&&A!==x&&(s||o)?(gt(t),A=x):(dt(),A=_)}break;case 1:(a.enablePedestal||a.enablePan)&&(t.preventDefault(),t.stopPropagation()),a.enablePedestal&&A===w?yt(t):a.enablePan&&A===b&&pt(t);break;default:A=f}}function Mt(t){if(!1!==a.enabled){switch(xt(),A){case v:case b:a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_PAN_END_EVENT);break;case x:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PAN_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_TILT_END_EVENT);break;case m:case _:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_DOLLY_END_EVENT);break;case g:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ROTATE_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_ROTATE_END_EVENT);break;case E:case w:a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.PEDESTAL_END_EVENT),a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_PEDESTAL_END_EVENT)}A=f}}function Et(t){t.preventDefault()}function wt(t,e){return(e-t+Math.PI)%(2*Math.PI)+2*Math.PI%(2*Math.PI)-Math.PI}function At(t,e){a.orbit.updateMatrixWorld(),a.camera.updateProjectionMatrix();let i=a.camera.projectionMatrix.clone(),n=t.worldCoordinate,r=e.worldCoordinate,o=t.reUnproject(),s=e.reUnproject();if(!o||!s)return null;let l=t.viewCoordinate,h=e.viewCoordinate,c=r.x-n.x,p=r.y-n.y,d=Math.atan2(p,c),f=s.x-o.x,g=s.y-o.y,m=wt(d,Math.atan2(g,f)),v=new Ot;v.makeRotationZ(-m);let y=v.clone();y.multiply(t.snapHolderMatrix);let x=u(((t,e,i)=>t.elements[4*(e-1)+i-1]),"m"),_=x(i,1,1)*x(y,1,1)-l.x*x(i,3,4)*x(y,3,1),b=x(i,1,1)*x(y,1,2)-l.x*x(i,3,4)*x(y,3,2),M=x(i,1,1)*x(y,1,3)-l.x*x(i,3,4)*x(y,3,3),E=n.x*_+n.y*b+n.z*M,w=x(i,2,2)*x(y,2,1)-l.y*x(i,3,4)*x(y,3,1),A=x(i,2,2)*x(y,2,2)-l.y*x(i,3,4)*x(y,3,2),S=x(i,2,2)*x(y,2,3)-l.y*x(i,3,4)*x(y,3,3),T=n.x*w+n.y*A+n.z*S,C=x(i,1,1)*x(y,1,1)-h.x*x(i,3,4)*x(y,3,1),P=x(i,1,1)*x(y,1,2)-h.x*x(i,3,4)*x(y,3,2),I=x(i,1,1)*x(y,1,3)-h.x*x(i,3,4)*x(y,3,3),L=r.x*C+r.y*P+r.z*I,O=x(i,2,2)*x(y,2,1)-h.y*x(i,3,4)*x(y,3,1),N=x(i,2,2)*x(y,2,2)-h.y*x(i,3,4)*x(y,3,2),D=x(i,2,2)*x(y,2,3)-h.y*x(i,3,4)*x(y,3,3),R=r.x*O+r.y*N+r.z*D,q=Math.abs(C-_),B=Math.abs(P-b),k=Math.abs(I-M),F=Math.abs(C-w),U=Math.abs(P-A),z=Math.abs(I-S),V=Math.abs(O-_),j=Math.abs(N-b),G=Math.abs(D-M),W=Math.abs(O-w),H=Math.abs(N-A),Y=Math.abs(D-S);Math.min(q+B+k,F+U+z)<Math.min(V+j+G,W+H+Y)&&(C=O,P=N,I=D,L=R);let X=w*M-_*S,K=A*M-b*S,Z=T*M-E*S,Q=C*S-w*I,J=P*S-A*I,$=L*S-T*I,tt=($*K-Z*J)/(Q*K-X*J),et=($*X-Z*Q)/(J*X-K*Q),it=A*_-b*w,nt=P*w-A*C,rt=((L*w-T*C)*it-(T*_-E*w)*nt)/((I*w-S*C)*it-(S*_-M*w)*nt),ot=y.clone();return ot.elements[12]=tt,ot.elements[13]=et,ot.elements[14]=rt,rt>0?ot:null}function St(t){a.orbit.updateMatrixWorld();let e=new Jh;e.setFromRotationMatrix(t,"ZYX");let i=(t.elements[14]-c.position.z)/Math.cos(e.x),n=e.z,r=new K(0,0,1);r.applyEuler(e),r.setLength(i);let o=new K;o.setFromMatrixPosition(t),o.sub(r),a.enablePan&&a.setPosition(o.x,o.y),a.enableZoom&&a.setZoom(i),a.enableRotate&&a.setRotation(n)}function Tt(t,e){return{x:e.offsetX,y:e.offsetY}}function Ct(t,e){return{x:e.clientX-C.offsetLeft,y:e.clientY-C.offsetTop}}function Pt(t){let e=a.canvas;C.offsetLeft=e.getBoundingClientRect().left,C.offsetTop=e.getBoundingClientRect().top}function It(e){p.setFromCamera(e,t);let i=p.intersectObject(c,!1)[0];return i?i.point:new K}function Lt(t){let e=Tt(a.canvas,t);return S.x=e.x/a.canvas.width*n.resolutionScale*2-1,S.y=-e.y/a.canvas.height*n.resolutionScale*2+1,S}function Nt(t){T=[];for(let e=0,i=t.touches.length;e<i;e++){let i=t.touches[e],r=Ct(a.canvas,i);T.push(new qe(r.x/a.canvas.width*n.resolutionScale*2-1,-r.y/a.canvas.height*n.resolutionScale*2+1))}S=T[0]}u(ht,"onMouseWheel"),u(ct,"handleTouchStartPan"),u(pt,"handleTouchMovePan"),u(dt,"handleTouchStartDolly"),u(ft,"handleTouchMoveDolly"),u(gt,"handleTouchStartTilt"),u(mt,"handleTouchMoveTilt"),u(vt,"handleTouchStartPedestal"),u(yt,"handleTouchMovePedestal"),u(xt,"handleTouchEnd"),u(_t,"onTouchStart"),u(bt,"onTouchMove"),u(Mt,"onTouchEnd"),u(Et,"onContextMenu"),u(wt,"differenceBetweenAngles"),u(At,"makeTransformFromTouchAnchors"),u(St,"setCameraFromTransformMatrix"),u(Tt,"getMousePos"),u(Ct,"getTouchPos"),u(Pt,"updateTouchOrigin"),u(It,"raycastToFloor"),u(Lt,"mouseToScene"),u(Nt,"touchToScene"),this.update=function(){bb.default.update(),U>0&&A==y&&F.getElapsedTime()-U>.2&&(U=0,A=f,a.dispatcher.dispatchEvent(a.CAMERA_EVENTS.ZOOM_END_EVENT),a.canvas.removeEventListener("mousemove",at,!1))};let Dt=!1;this.dispatchUserZoomDebounced=Da((()=>{Dt=!1,a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_ZOOM_END_EVENT)}),250),this.dispatchUserZoomEvent=function(){Dt||(a.dispatcher.dispatchEvent(a.INTERACTION_EVENTS.USER_ZOOM_START_EVENT),Dt=!0),a.dispatchUserZoomDebounced()},this.dispose=function(){for(let t in this.INTERACTION_EVENTS){let e=this.INTERACTION_EVENTS[t];e.type.endsWith("Start")&&a.dispatcher.removeEventListener(e.type,j)}for(let t in this.INTERACTION_EVENTS){let e=this.INTERACTION_EVENTS[t];e.type.endsWith("End")&&a.dispatcher.removeEventListener(e.type,G)}a.canvas.removeEventListener("contextmenu",Et,!1),a.canvas.removeEventListener("mousedown",st,!1),a.canvas.removeEventListener("wheel",ht,{passive:!1}),a.canvas.removeEventListener("touchstart",_t,!1),a.canvas.removeEventListener("touchend",Mt,!1),a.canvas.removeEventListener("touchmove",bt,!1),a.canvas.removeEventListener("mousemove",at,!1),window.removeEventListener("mouseup",lt,!1),window.removeEventListener("mouseout",lt,!1),i.remove(c),a.dispatcher._listeners={}},this.canvas.addEventListener("contextmenu",Et,!1),this.canvas.addEventListener("mousedown",st,!1),this.canvas.addEventListener("wheel",ht,{passive:!1}),this.canvas.addEventListener("touchstart",_t,!1),this.canvas.addEventListener("touchend",Mt,!1),this.canvas.addEventListener("touchmove",bt,!1)}),"CameraControls"),dS=dMe,UQ=(t=>(t.performance="Performance",t.low="Low",t.medium="Medium",t.high="High",t.ultra="Ultra",t))(UQ||{}),P7=class extends Jo{constructor(t){super("CustomRenderPass"),A(this,"effectComposer"),A(this,"clearPass"),this.renderToScreen=!1,this.needsSwap=!1,this.effectComposer=t,this.fullscreenMaterial=new Xt({uniforms:t.options.compositeUniforms,vertexShader:vb,fragmentShader:MQ}),this.clearPass=new t0}render(t,e,i,n,r){let o=this.fullscreenMaterial.uniforms;null!==e&&void 0!==o&&void 0!==o.inputBuffer&&(o.inputBuffer.value=e.texture),this.clearPass.render(t,e,i,n,r),t.setRenderTarget(this.renderToScreen?null:e),t.render(this.scene,this.camera)}initialize(t,e,i){void 0!==i&&i!==Mr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}};u(P7,"CustomRenderPass");var S7=P7,I7=class extends sS{constructor(t,e){let{scene:i,camera:n,renderer:r}=t;super(i,n,r.width,r.height),A(this,"effectComposer"),A(this,"cachePass"),A(this,"enabled"),this.effectComposer=t,this.enabled=!0;let o=new Xt({uniforms:{colorTexture:{value:this.outputTargetInternal.texture}},vertexShader:vb,fragmentShader:bQ});this.cachePass=new ld(o),Object.assign(this.configuration,e)}setAOConfiguration(t){Object.assign(this.configuration,t),t.color&&(this.configuration.color=new at(t.color)),t.aoResolution&&(t.halfRes="half"===t.aoResolution)}setQualityMode(t){let e=UQ[t.toLowerCase()];e||(e="Performance"),super.setQualityMode(e)}get distanceFalloff(){if(!this.effectComposer.renderer.core.controls)return 0;let t=this.effectComposer.renderer.core.controls.getZoomLevel();return(Br.clamp(t,pS,T7)-pS)/(T7-pS)*.2}initialize(t,e,i){this.cachePass.initialize(t,e,i),super.initialize(t,e,i)}render(t,e,i,n,r){var o;let s=null==(o=this.effectComposer.options.compositeUniforms)?void 0:o.staticSceneDepthTexture.value;s&&!s.userData.needsAmbientOcclusionUpdate&&this.outputTargetInternal?this.cachePass.render(t,e,i,n,r):(this.configuration.distanceFalloff=this.distanceFalloff,super.render(t,e,i,n,r),s&&(s.userData.needsAmbientOcclusionUpdate=!1))}};u(I7,"AmbientOcclusionPass");var A7=I7,O7=class extends pQ{constructor(t,...e){super(t,...e),A(this,"_effects"),this._effects=[...e]}getEffects(){return this._effects}getEffectByName(t){return this._effects.find((e=>e.name===t))||null}};u(O7,"CustomEffectPass");var C7=O7,L7=class{constructor(t,e){var i;A(this,"options",{antialias:!0,antialiasQuality:"medium",aoEnabled:!1,aoQuality:"medium",aoResolution:"half",compositeUniforms:void 0}),A(this,"isWebGL2"),A(this,"effectComposer"),A(this,"scene",null),A(this,"camera",null),A(this,"depthTexture"),A(this,"renderer"),this.isWebGL2=!!t.renderer.capabilities.isWebGL2,this.options=(0,FQ.default)({},this.options,e),this.effectComposer=new dQ(t.renderer),this.effectComposer.multisampling=0,this.effectComposer.depthTexture=(null==(i=this.options.compositeUniforms)?void 0:i.staticSceneDepthTexture.value)||null,this.renderer=t}get initialized(){return!!this.effectComposer.passes.length}init(t,e){this.scene=t,this.camera=e;let i=this.getRenderPass();this.addPass(i,"RenderPass");let n=this.getAmbientOcclusionPass();this.addPass(n,"AmbientOcclusionPass");let r=this.getCompositePass();this.addPass(r,"CompositeRenderPass");let o=this.getEffectsPass(!0);this.addPass(o,"EffectsPassAntialiasEnabled");let s=this.getEffectsPass(!1);this.addPass(s,"EffectsPassAntialiasDisabled");let a=this.getFinalPass();this.addPass(a,"FinalPass")}render(){this.effectComposer.render()}setSize(t,e){this.effectComposer.setSize(t,e,!1)}getPassByName(t){return this.effectComposer.passes.find((({name:e})=>e===t))||null}getEffectsByName(t){let e=[],i=this.getPassByName("EffectsPassAntialiasEnabled"),n=this.getPassByName("EffectsPassAntialiasDisabled"),r=i.getEffectByName(t),o=n.getEffectByName(t);return r&&e.push(r),o&&e.push(o),e}setAmbientOcclusionConfiguration(t){let e=this.getPassByName("AmbientOcclusionPass");e&&(void 0!==t.aoEnabled&&(e.enabled=t.aoEnabled),t.aoQuality&&e.setQualityMode(t.aoQuality),e.setAOConfiguration(t))}setAntialiasConfiguration(t){let e=this.getEffectsByName("SMAAEffect")[0],i=this.getPassByName("EffectsPassAntialiasEnabled"),n=this.getPassByName("EffectsPassAntialiasDisabled"),{antialias:r,antialiasQuality:o}=t;void 0!==r&&r!==this.options.antialias&&(this.options.antialias=r,r?(n.setEnabled(!1),i.setEnabled(!0)):(n.setEnabled(!0),i.setEnabled(!1))),o&&o!==this.options.antialiasQuality&&(this.options.antialiasQuality=o,e.applyPreset(this.getAntialiasingPreset()))}setPolygonOutlineColor(t){let e=this.getEffectsByName("OutlineEffect");t=new at(t),e.forEach((e=>{e.visibleEdgeColor=t,e.hiddenEdgeColor=t}))}addSelectionForOutline(t){this.getEffectsByName("OutlineEffect").forEach((e=>{e.selection.add(t)}))}removeSelectionForOutline(t){this.getEffectsByName("OutlineEffect").forEach((e=>{e.selection.delete(t)}))}addPass(t,e){t&&(t.name=e,this.effectComposer.addPass(t))}getRenderPass(){let t=this.options.compositeUniforms?new S7(this):new rS(this.scene,this.camera);return t.renderToScreen=!1,t.needsSwap=!1,t.needsDepthTexture=!0,t}getAmbientOcclusionPass(){let{aoResolution:t,aoEnabled:e,aoQuality:i}=this.options;if(!this.isWebGL2||!e)return null;let n={aoRadius:5,intensity:5,screenSpaceRadius:!0,halfRes:"half"===t,denoiseIterations:1===this.renderer.core.resolutionScale?4:2},r=new A7(this,n);return r.setQualityMode(i),r.renderToScreen=!1,r.needsSwap=!0,r.needsDepthTexture=!0,r}getCompositePass(){if(!this.options.compositeUniforms)return null;let{staticSceneColorTexture:t,alwaysOnBottomSceneColorTexture:e,alwaysOnTopSceneColorTexture:i,...n}=this.options.compositeUniforms,r=new Xt({uniforms:n,vertexShader:vb,fragmentShader:_Q}),o=new ld(r);return o.renderToScreen=!1,o.needsSwap=!0,o.needsDepthTexture=!1,o}getEffectsPass(t){let{compositeUniforms:e,antialias:i}=this.options,n=[];n.push(this.getOutlineEffect()),t&&n.push(this.getAntialiasingEffect());let r=new C7(this.camera,...n);return r.renderToScreen=!e,r.enabled=t===i,r.needsSwap=!!e,r.needsDepthTexture=!0,r}getFinalPass(){if(!this.options.compositeUniforms)return null;let{alwaysOnBottomSceneColorTexture:t,alwaysOnTopSceneColorTexture:e,inputBuffer:i}=this.options.compositeUniforms,n=new Xt({uniforms:{inputBuffer:i,alwaysOnBottomSceneColorTexture:t,alwaysOnTopSceneColorTexture:e},vertexShader:vb,fragmentShader:wQ}),r=new ld(n);return r.renderToScreen=!0,r.needsSwap=!1,r.needsDepthTexture=!1,r}getOutlineEffect(){return new gQ(this.scene,this.camera,{multisampling:Math.min(4,this.renderer.renderer.capabilities.maxSamples),edgeStrength:10,visibleEdgeColor:16711680,hiddenEdgeColor:16711680,xRay:!0,blendFunction:on.ALPHA})}getAntialiasingPreset(){switch(this.options.antialiasQuality){case"medium":return Ru.MEDIUM;case"high":return Ru.HIGH;case"ultra":return Ru.ULTRA;default:return Ru.LOW}}getAntialiasingEffect(){let t=new vQ({preset:this.getAntialiasingPreset()});return t.blendMode.blendFunction=on.SRC,t}};u(L7,"EffectComposer");var cd,_b=L7,wb=!1;wb&&((cd=new zQ.default).showPanel(0),document.body.appendChild(cd.dom));var N7=class{constructor(t){t.multiBufferRendering=t.multiBufferRendering||!1,this.contextLost=!1,this.implementation=this.getRenderer(t),this.onWebGLContextCreationError=t.onWebGLContextCreationError,this.onWebGLContextLost=t.onWebGLContextLost,this.onWebGLContextRestored=t.onWebGLContextRestored,this.webGLContextCreationErrorListener=this.domElement().addEventListener("webglcontextcreationerror",(t=>this.reportWebGlContextCreationError(t))),this.webGLContextLostListener=this.domElement().addEventListener("webglcontextlost",(t=>this.reportWebGlContextLost(t))),this.webGLContextRestoredListener=this.domElement().addEventListener("webglcontextrestored",(t=>this.reportWebGLContextRestored(t)));let e=t.backgroundColor;"string"==typeof e&&(e=new at(t.backgroundColor)),null==e&&(e=new at("#ffffff"));let i=t.backgroundAlpha;null==i&&(i=1),this.shouldConsiderAlpha=t.alpha||!1,this.antialias=t.antialias||!1,this.setBackgroundColor(e,i)}destroy(){this.domElement().removeEventListener("webglcontextcreationerror",this.webGLContextCreationErrorListener),this.domElement().removeEventListener("webglcontextlost",this.webGLContextLostListener),this.domElement().removeEventListener("webglcontextrestored",this.webGLContextRestoredListener),this.implementation.destroy()}render(t,e,i,n){this.implementation.render(t,e,i,n)}getMaxAnisotropy(){return this.implementation.renderer.capabilities.getMaxAnisotropy()}getBufferSize(){return this.implementation.renderer.getSize(new qe)}getContext(){return this.implementation.renderer.getContext()}preloadTexture(t){this.implementation.renderer.initTexture(t)}setBufferSize(t,e){this.implementation.setBufferSize(t,e)}get backgroundColor(){return this.implementation.backgroundColor}get backgroundAlpha(){return this.implementation.backgroundAlpha}setBackgroundColor(t,e=1){this.shouldConsiderAlpha||(e=1),e=(e=void 0!==e?+e:1)>=0&&e<=1?e:1,this.implementation.setBackgroundColor(t,e)}setMapboxOutdoorContext(t){this.implementation.setMapboxOutdoorContext(t)}domElement(){return this.implementation.renderer.domElement}isAvailable(){return null!=this.implementation.renderer&&!this.contextLost}disposeOfRenderLists(){this.implementation.renderer.renderLists.dispose()}reportWebGlContextCreationError(t){this.onWebGLContextCreationError&&this.onWebGLContextCreationError(t)}reportWebGlContextLost(t){t.preventDefault(),this.onWebGLContextLost&&this.onWebGLContextLost(t),this.contextLost=!0}reportWebGLContextRestored(){this.onWebGLContextRestored&&this.onWebGLContextRestored(),this.contextLost=!1}getTargetWebGLVersion(t){let e=/(AppleWebKit)/.test(navigator.userAgent),i=/(Mac)/.test(navigator.platform),n=t.getExtension("WEBGL_debug_renderer_info"),r=/radeon\spro\s4\d\d|radeon\spro\s5\d\d/i.test(t.getParameter(n.UNMASKED_RENDERER_WEBGL));return e&&i&&r?1:2}getRenderer(t){let e=t.multiBufferRendering?s0:D7,i=new e(t),n=this.getTargetWebGLVersion(i.renderer.getContext());return 2===n?i:(i.destroy(),new e(t,n))}};u(N7,"Renderer");var r0=N7,R7=class{constructor(t,e=2){try{this.options=t;let i={alpha:t.alpha||!1,stencil:!0,outputEncoding:ai,antialias:!1,powerPreference:"high-performance",preserveDrawingBuffer:!0};this.core=this.options.core,this.renderer=2===e?new Ag(i):new Cg(i),this.effectComposer=new _b(this,this.options)}catch(e){t.onWebGLRendererError&&t.onWebGLRendererError(e)}this.backgroundColor=new at,this.backgroundAlpha=1,this.mapboxOutdoorContext=null}destroy(){this.renderer.dispose()}render(t,e,i,n){n.layers.enable($i.STATIC),n.layers.enable($i.ANIMATED),n.layers.enable($i.ALWAYS_ON_TOP),wb&&cd.begin(),this.renderer.setClearColor(this.backgroundColor,this.backgroundAlpha),this.effectComposer.initialized||this.effectComposer.init(i,n),this.renderer.clear(),this.effectComposer.render(),wb&&cd.end(),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new qe),camera:n}),this.renderer.state.reset())}setBufferSize(t,e){this.width=t,this.height=e,this.renderer.setSize(t,e,!1),this.effectComposer.setSize(t,e)}setBackgroundColor(t,e){this.backgroundColor=t,this.backgroundAlpha=e}setMapboxOutdoorContext(t){this.mapboxOutdoorContext=t}};u(R7,"SingleBufferRenderer");var D7=R7,B7=class{constructor(t,e=2){A(this,"effectComposer",null),A(this,"outdoorsVisible",!1);try{this.options=t;let i={alpha:t.alpha||!1,stencil:!0,antialias:!1,outputEncoding:ai,powerPreference:"high-performance",preserveDrawingBuffer:!0};this.renderer=2===e?new Ag(i):new Cg(i),this.core=this.options.core,this.journeyOpacity=t.xRayPath?.3:0,this.backgroundColor=new at,this.backgroundAlpha=1,this.mapboxOutdoorContext=null,this.staticSceneRenderTarget=new ti(this.renderer.width,this.renderer.height),this.populateRenderTarget(this.staticSceneRenderTarget),this.animatedSceneRenderTarget=new ti(this.renderer.width,this.renderer.height),this.populateRenderTarget(this.animatedSceneRenderTarget),this.alwaysOnTopSceneRenderTarget=new ti(this.renderer.width,this.renderer.height),this.populateRenderTarget(this.alwaysOnTopSceneRenderTarget),this.outdoorViewRenderTarget=new ti(this.renderer.width,this.renderer.height),this.createOutdoorViewTexture(),this.populateRenderTarget(this.outdoorViewRenderTarget),this.setupEffectComposer()}catch(e){t.onWebGLRendererError&&t.onWebGLRendererError(e)}}populateRenderTarget(t){t.texture.colorSpace=ai,t.texture.format=Gs,t.texture.minFilter=ui,t.texture.magFilter=ui,t.texture.generateMipmaps=!1,t.stencilBuffer=!0,t.depthBuffer=!0,t.depthTexture=new qc(this.renderer.width,this.renderer.height),t.depthTexture.type=il}createOutdoorViewTexture(){null!=this.outdoorViewTexture&&this.outdoorViewTexture.dispose(),this.outdoorViewTexture=new Er,this.outdoorViewTexture.colorSpace=ai,this.outdoorViewTextureProps=this.renderer.properties.get(this.outdoorViewTexture),this.outdoorViewRenderTarget.texture=this.outdoorViewTexture,null!=this.effectComposer&&this.outdoorsVisible&&(this.options.compositeUniforms.alwaysOnBottomSceneColorTexture.value=this.outdoorViewRenderTarget.texture)}setupEffectComposer(){this.options.compositeUniforms={animatedColorOpacity:new St(this.journeyOpacity),inputBuffer:new St(null),staticSceneColorTexture:new St(this.staticSceneRenderTarget.texture),staticSceneDepthTexture:new St(this.staticSceneRenderTarget.depthTexture),animatedSceneColorTexture:new St(this.animatedSceneRenderTarget.texture),animatedSceneDepthTexture:new St(this.animatedSceneRenderTarget.depthTexture),alwaysOnTopSceneColorTexture:new St(this.alwaysOnTopSceneRenderTarget.texture),alwaysOnBottomSceneColorTexture:new St(this.outdoorViewRenderTarget.texture)},this.effectComposer=new _b(this,this.options)}setOutdoorViewTexture(t){this.outdoorViewTextureProps.__webglTexture=t}destroy(){this.staticSceneRenderTarget.dispose(),this.animatedSceneRenderTarget.dispose(),this.alwaysOnTopSceneRenderTarget.dispose(),this.renderer.dispose()}renderComposite(t,e,i){i.layers.set($i.STATIC),this.renderer.setRenderTarget(t),this.effectComposer.render()}renderToAnimatedBuffer(t,e){e.layers.set($i.ANIMATED),this.renderer.setClearColor(new at,0),this.renderer.setRenderTarget(this.animatedSceneRenderTarget),this.renderer.clear(),this.renderer.render(t,e)}renderAnimated(t,e,i){this.renderToAnimatedBuffer(e,i),this.renderComposite(t,e,i)}renderToAlwaysOnTopBuffer(t,e){e.layers.set($i.ALWAYS_ON_TOP),this.renderer.setClearColor(new at,0),this.renderer.setRenderTarget(this.alwaysOnTopSceneRenderTarget),this.renderer.clear(),this.renderer.render(t,e)}renderAlwaysOnTop(t,e,i){this.renderToAlwaysOnTopBuffer(e,i),this.renderComposite(t,e,i)}renderAll(t,e,i){wb&&cd.begin(),null!=this.outdoorViewController&&this.outdoorViewController.render(),this.renderer.state.reset(),i.layers.set($i.STATIC),this.renderer.autoClear=!1,this.renderer.setClearColor(this.backgroundColor,this.outdoorViewController?0:this.backgroundAlpha),this.staticSceneRenderTarget.depthTexture.userData.needsAmbientOcclusionUpdate=!0,this.renderer.setRenderTarget(this.staticSceneRenderTarget),this.renderer.clear(),this.renderer.render(e,i),null!=this.mapboxOutdoorContext&&(this.renderer.state.reset(),this.mapboxOutdoorContext.render({resolution:this.renderer.getSize(new qe),camera:i,renderTarget:this.staticSceneRenderTarget}),this.renderer.state.reset()),this.renderToAnimatedBuffer(e,i),this.renderToAlwaysOnTopBuffer(e,i),this.renderComposite(t,e,i),wb&&cd.end()}render(t,e,i,n){this.effectComposer.initialized||this.effectComposer.init(i,n),t===un.ANIMATED?(this.renderer.state.reset(),this.renderAnimated(e,i,n)):t===un.ALWAYS_ON_TOP?(this.renderer.state.reset(),this.renderAlwaysOnTop(e,i,n)):t===un.COMPOSITE?(this.renderer.state.reset(),this.renderComposite(e,i,n)):t===un.ALL?this.renderAll(e,i,n):Le.error("Renderer.render called with invalid renderTask")}setBufferSize(t,e){this.width=t,this.height=e,this.renderer.setSize(t,e,!1),this.effectComposer.setSize(t,e),this.staticSceneRenderTarget.setSize(t,e),this.animatedSceneRenderTarget.setSize(t,e),this.alwaysOnTopSceneRenderTarget.setSize(t,e),this.outdoorViewRenderTarget.width=t,this.outdoorViewRenderTarget.height=e,this.outdoorViewRenderTarget.viewport.set(0,0,t,e),this.outdoorViewRenderTarget.scissor.set(0,0,t,e),this.createOutdoorViewTexture()}setBackgroundColor(t,e){this.backgroundColor=t,this.backgroundAlpha=e}setMapboxOutdoorContext(t){this.mapboxOutdoorContext=t}setOutdoorViewController(t){this.outdoorsVisible=!0,this.outdoorViewController=t}toggleOutdoorViewVisiblity(t){this.outdoorsVisible=t,this.options.compositeUniforms.alwaysOnBottomSceneColorTexture.value=t?this.outdoorViewRenderTarget.texture:null}};u(B7,"MultiBufferRenderer");var s0=B7;E();var F7=Bt(GQ()),VQ=!1,mMe=!1,HQ=6,G7=class{constructor(t,e){A(this,"_attribution"),A(this,"core"),A(this,"map"),A(this,"enabled",!1),A(this,"hidden",!1),A(this,"url","https://tiles-cdn.mappedin.com/styles/mappedin/style.json"),A(this,"authURL","https://auth.mappedin.com/oauth2/token"),A(this,"headers"),A(this,"customAttribution"),A(this,"attributionPosition"),A(this,"loaded",!1),A(this,"module"),A(this,"getRequestHeaders",u((async()=>{if(this.headers)return this.headers;{let{authURL:t}=this,e=await this.fetchToken(t),{access_token:i}=await e.json();return{"x-mappedin-tiles-key":i}}}),"getRequestHeaders")),A(this,"lastCameraPosition"),this.core=t,this.url=(null==e?void 0:e.url)||this.url,this.authURL=(null==e?void 0:e.authURL)||this.authURL,this.headers=null==e?void 0:e.headers,this.attributionPosition=null==e?void 0:e.attributionPosition,(null==e?void 0:e.customAttribution)instanceof Array?(this.customAttribution=[],null==e||e.customAttribution.forEach((t=>{this.customAttribution.push((0,F7.sanitize)(t))}))):null!=e&&e.customAttribution&&(this.customAttribution=(0,F7.sanitize)(e.customAttribution))}fetchToken(t){return fetch(t,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({grant_type:"client_credentials",client_id:this.core.venue.options.clientId,client_secret:this.core.venue.options.clientSecret})})}async generateCollisionGrid(){var t;let e=this.core.referenceMap.georeference,i=[e[0].target.y,e[0].target.x],n=[e[1].target.y,e[1].target.x],r=[e[2].target.y,e[2].target.x],o=[e[3].target.y,e[3].target.x],s=this.core.mapObjects.get(this.core.referenceMap.id);await s.load();let a=HQ,l=HQ,u=[],h=new pa;for(let e=0;e<=l;e++){let c=e/l;for(let e=0;e<=a;e++){let l=e/a,p=(1-l)*(1-c)*i[1]+l*(1-c)*n[1]+l*c*r[1]+(1-l)*c*o[1],d=(1-l)*(1-c)*i[0]+l*(1-c)*n[0]+l*c*r[0]+(1-l)*c*o[0],f=this.core.referenceMap.createCoordinate(p,d),{x:g,y:m}=this.core.convertTo3DMapPosition(f);h.set(new K(g,m,1e3),new K(0,0,-1));let v=h.intersectObjects(null==s?void 0:s.object.children);null!=(t=null==v?void 0:v[0])&&t.point&&u.push(this.core.convert3DMapPositionToCoordinate(v[0].point)),VQ&&this.core.markers.add(f,"0")}}return u}async load(){this.enabled=!0;try{let[t,e]=await Promise.all([import("./outdoor-context-EFVXH7VY.js"),this.getRequestHeaders()]);this.module=t;let{Map:i,Marker:n,AttributionControl:r}=this.module.default,o=document.createElement("div");Object.assign(o.style,{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",pointerEvents:"none"}),this.core.container.appendChild(o);let s=this.core.referenceMap.georeference[0].target.x,a=this.core.referenceMap.georeference[0].target.y,l=this.core.referenceMap.georeference[2].target.x,u=this.core.referenceMap.georeference[2].target.y,h=new mi(s,a),c=new mi(l,u),p=h.midpointTo(c),d=-Br.radToDeg(this.core.controls.getRotation()+this.core.referenceMap.getNorth()),f=Br.radToDeg(this.core.controls.getTilt()),g=this.core.controls.getZoomLevel(),m={canvas:this.core.renderer.domElement(),canvasContainer:o,container:this.core.container,style:this.url,center:[p.lon,p.lat],zoom:g,bearing:d,pitch:f,attributionControl:!1,transformRequest:t=>({url:t,headers:e})},v=await this.generateCollisionGrid();this.map=new i(m),this._attribution=new r({collapse:!1,position:this.attributionPosition,customAttribution:this.customAttribution}),this.core.container.appendChild(this._attribution.onAdd(this.map)),this._attribution&&this.hidden&&this._attribution.hide(),this.map.on("error",(t=>{Le.error(t)})),this.map.transform.getElevation=()=>this.core.controls.getPedestal()*this.core.referenceMap.scale,this.core.renderer.implementation.setOutdoorViewTexture(this.map.painter.webGLRenderTargetTexture),this.map.on("load",(()=>{if(this.core.tryRendering(),mMe){let{x:t,y:e}=this.core.referenceMap.georeference[0].target,{x:i,y:r}=this.core.referenceMap.georeference[2].target,o=this.core.referenceMap.createCoordinate(t,e),s=this.core.referenceMap.createCoordinate(i,r);this.core.markers.add(o,"!",{rank:4}),this.core.markers.add(s,"!",{rank:4}),(new n).setLngLat([e,t]).addTo(this.map),(new n).setLngLat([r,i]).addTo(this.map)}})),this.map.on("resize",(()=>{this.core.renderer.implementation.setOutdoorViewTexture(this.map.painter.webGLRenderTargetTexture)}));let y=!1,x=!1;this.map.on("render",(async()=>{if(y||!this.map.getLayer("building-top"))return;let t=[];for(let i of v){!x&&VQ&&this.core.markers.add(i,"1",{rank:4});let n=this.map.project({lat:i.lat,lon:i.lon}),r=this.map.queryRenderedFeatures(n,{layers:["building-top"]});if(0!==r.length)for(var e of r)t.push(["!=",["id"],e.id])}x=!0,t.length>0&&(this.map.setFilter("building-top",["all",...t]),y=!0)})),this.map.on("idle",(()=>{this.loaded||(this.loaded=!0,y=!0,this.core.publish(31)),this.core.tryRendering(un.COMPOSITE)}))}catch(t){this.enabled=!1,Le.error(t)}}get attributions(){return this._attribution?this._attribution.attributions:[]}hide(){this.core.renderer.implementation.toggleOutdoorViewVisiblity(!1),this._attribution&&this._attribution.hide(),this.core.tryRendering(un.COMPOSITE),this.lastCameraPosition=null,this.hidden=!0}show(){this.core.renderer.implementation.toggleOutdoorViewVisiblity(!0),this._attribution&&this._attribution.show(),this.core.tryRendering(un.COMPOSITE),this.hidden=!1}resize(){this.enabled&&null!=this.map&&this.map.resize()}render(){if(!this.enabled||null==this.map)return;let{lat:t,lon:e}=this.core.controls.getPositionCoordinate(),i={center:{lat:t,lon:e},bearing:-Br.radToDeg(this.core.controls.getRotation()+this.core.referenceMap.getNorth()),pitch:Br.radToDeg(this.core.controls.getTilt()),zoom:this.core.controls.getZoomLevel()},n=this.core.controls.getPedestal()*this.core.referenceMap.scale;this.lastCameraPosition&&this.lastCameraPosition.center.lat===i.center.lat&&this.lastCameraPosition.center.lon===i.center.lon&&this.lastCameraPosition.bearing===i.bearing&&this.lastCameraPosition.pitch===i.pitch&&this.lastCameraPosition.zoom===i.zoom&&this.lastCameraPosition.elevation===n||(this.map.jumpTo(i),this.map.triggerRepaintSync(),this.lastCameraPosition={...i,elevation:n})}setStyle(t){this.map.setStyle(t),this.map.triggerRepaintSync()}setAttributionPosition(t){this._attribution&&this._attribution.setPosition(t)}};u(G7,"OutdoorViewController");var U7=G7,z7=U7;E(),E();var jQ={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]},n9=class{constructor(){this.pluginCallbacks=[],this.register((function(t){return new W7(t)})),this.register((function(t){return new Y7(t)})),this.register((function(t){return new Q7(t)})),this.register((function(t){return new K7(t)})),this.register((function(t){return new J7(t)})),this.register((function(t){return new $7(t)})),this.register((function(t){return new X7(t)})),this.register((function(t){return new Z7(t)})),this.register((function(t){return new e9(t)})),this.register((function(t){return new t9(t)}))}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,i,n){let r=new j7,o=[];for(let t=0,e=this.pluginCallbacks.length;t<e;t++)o.push(this.pluginCallbacks[t](r));r.setPlugins(o),r.write(t,e,n).catch(i)}parseAsync(t,e){let i=this;return new Promise((function(n,r){i.parse(t,n,r,e)}))}};u(n9,"GLTFExporter");var o0=n9,ri={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},V7="KHR_mesh_quantization",ka={};ka[ui]=ri.NEAREST,ka[zE]=ri.NEAREST_MIPMAP_NEAREST,ka[cx]=ri.NEAREST_MIPMAP_LINEAR,ka[wi]=ri.LINEAR,ka[SO]=ri.LINEAR_MIPMAP_NEAREST,ka[Dp]=ri.LINEAR_MIPMAP_LINEAR,ka[ca]=ri.CLAMP_TO_EDGE,ka[wr]=ri.REPEAT,ka[vx]=ri.MIRRORED_REPEAT;var WQ={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},gMe=new at,YQ=12,vMe=1179937895,yMe=2,XQ=8,xMe=1313821514,bMe=5130562;function Mb(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))}function _Me(t){return(new TextEncoder).encode(t).buffer}function wMe(t){return Mb(t.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function MMe(t,e,i){let n={min:new Array(t.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(t.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+i;r++)for(let e=0;e<t.itemSize;e++){let i;t.itemSize>4?i=t.array[r*t.itemSize+e]:(0===e?i=t.getX(r):1===e?i=t.getY(r):2===e?i=t.getZ(r):3===e&&(i=t.getW(r)),!0===t.normalized&&(i=Br.normalize(i,t.array))),n.min[e]=Math.min(n.min[e],i),n.max[e]=Math.max(n.max[e],i)}return n}function KQ(t){return 4*Math.ceil(t/4)}function H7(t,e=0){let i=KQ(t.byteLength);if(i!==t.byteLength){let n=new Uint8Array(i);if(n.set(new Uint8Array(t)),0!==e)for(let r=t.byteLength;r<i;r++)n[r]=e;return n.buffer}return t}function ZQ(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function QQ(t,e){if(void 0!==t.toBlob)return new Promise((i=>t.toBlob(i,e)));let i;return"image/jpeg"===e?i=.92:"image/webp"===e&&(i=.8),t.convertToBlob({type:e,quality:i})}u(Mb,"equalArray"),u(_Me,"stringToArrayBuffer"),u(wMe,"isIdentityMatrix"),u(MMe,"getMinMax"),u(KQ,"getPaddedBufferSize"),u(H7,"getPaddedArrayBuffer"),u(ZQ,"getCanvas"),u(QQ,"getToBlobPromise");var i9=class{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(t){this.plugins=t}async write(t,e,i={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},i),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(t),await Promise.all(this.pending);let n=this,r=n.buffers,o=n.json;i=n.options;let s=n.extensionsUsed,a=n.extensionsRequired,l=new Blob(r,{type:"application/octet-stream"}),u=Object.keys(s),h=Object.keys(a);if(u.length>0&&(o.extensionsUsed=u),h.length>0&&(o.extensionsRequired=h),o.buffers&&o.buffers.length>0&&(o.buffers[0].byteLength=l.size),!0===i.binary){let t=new FileReader;t.readAsArrayBuffer(l),t.onloadend=function(){let i=H7(t.result),n=new DataView(new ArrayBuffer(XQ));n.setUint32(0,i.byteLength,!0),n.setUint32(4,bMe,!0);let r=H7(_Me(JSON.stringify(o)),32),s=new DataView(new ArrayBuffer(XQ));s.setUint32(0,r.byteLength,!0),s.setUint32(4,xMe,!0);let a=new ArrayBuffer(YQ),l=new DataView(a);l.setUint32(0,vMe,!0),l.setUint32(4,yMe,!0);let u=YQ+s.byteLength+r.byteLength+n.byteLength+i.byteLength;l.setUint32(8,u,!0);let h=new Blob([a,s,r,n,i],{type:"application/octet-stream"}),c=new FileReader;c.readAsArrayBuffer(h),c.onloadend=function(){e(c.result)}}}else if(o.buffers&&o.buffers.length>0){let t=new FileReader;t.readAsDataURL(l),t.onloadend=function(){let i=t.result;o.buffers[0].uri=i,e(o)}}else e(o)}serializeUserData(t,e){if(0===Object.keys(t.userData).length)return;let i=this.options,n=this.extensionsUsed;try{let r=JSON.parse(JSON.stringify(t.userData));if(i.includeCustomExtensions&&r.gltfExtensions){void 0===e.extensions&&(e.extensions={});for(let t in r.gltfExtensions)e.extensions[t]=r.gltfExtensions[t],n[t]=!0;delete r.gltfExtensions}Object.keys(r).length>0&&(e.extras=r)}catch(e){console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+e.message)}}getUID(t,e=!1){if(!1===this.uids.has(t)){let e=new Map;e.set(!0,this.uid++),e.set(!1,this.uid++),this.uids.set(t,e)}return this.uids.get(t).get(e)}isNormalizedNormalAttribute(t){if(this.cache.attributesNormalized.has(t))return!1;let e=new K;for(let i=0,n=t.count;i<n;i++)if(Math.abs(e.fromBufferAttribute(t,i).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(t){let e=this.cache;if(e.attributesNormalized.has(t))return e.attributesNormalized.get(t);let i=t.clone(),n=new K;for(let t=0,e=i.count;t<e;t++)n.fromBufferAttribute(i,t),0===n.x&&0===n.y&&0===n.z?n.setX(1):n.normalize(),i.setXYZ(t,n.x,n.y,n.z);return e.attributesNormalized.set(t,i),i}applyTextureTransform(t,e){let i=!1,n={};(0!==e.offset.x||0!==e.offset.y)&&(n.offset=e.offset.toArray(),i=!0),0!==e.rotation&&(n.rotation=e.rotation,i=!0),(1!==e.repeat.x||1!==e.repeat.y)&&(n.scale=e.repeat.toArray(),i=!0),i&&(t.extensions=t.extensions||{},t.extensions.KHR_texture_transform=n,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(t,e){if(t===e)return t;function i(t){return t.encoding===ai?u((function(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}),"SRGBToLinear"):u((function(t){return t}),"LinearToLinear")}u(i,"getEncodingConversion"),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");let n=t?t.image:null,r=e?e.image:null,o=Math.max(n?n.width:0,r?r.width:0),s=Math.max(n?n.height:0,r?r.height:0),a=ZQ();a.width=o,a.height=s;let l=a.getContext("2d");l.fillStyle="#00ffff",l.fillRect(0,0,o,s);let h=l.getImageData(0,0,o,s);if(n){l.drawImage(n,0,0,o,s);let e=i(t),r=l.getImageData(0,0,o,s).data;for(let t=2;t<r.length;t+=4)h.data[t]=256*e(r[t]/256)}if(r){l.drawImage(r,0,0,o,s);let t=i(e),n=l.getImageData(0,0,o,s).data;for(let e=1;e<n.length;e+=4)h.data[e]=256*t(n[e]/256)}l.putImageData(h,0,0);let c=(t||e).clone();return c.source=new Mg(a),c.encoding=rl,c}processBuffer(t){let e=this.json,i=this.buffers;return e.buffers||(e.buffers=[{byteLength:0}]),i.push(t),0}processBufferView(t,e,i,n,r){let o,s=this.json;switch(s.bufferViews||(s.bufferViews=[]),e){case ri.BYTE:case ri.UNSIGNED_BYTE:o=1;break;case ri.SHORT:case ri.UNSIGNED_SHORT:o=2;break;default:o=4}let a=KQ(n*t.itemSize*o),l=new DataView(new ArrayBuffer(a)),u=0;for(let r=i;r<i+n;r++)for(let i=0;i<t.itemSize;i++){let n;t.itemSize>4?n=t.array[r*t.itemSize+i]:(0===i?n=t.getX(r):1===i?n=t.getY(r):2===i?n=t.getZ(r):3===i&&(n=t.getW(r)),!0===t.normalized&&(n=Br.normalize(n,t.array))),e===ri.FLOAT?l.setFloat32(u,n,!0):e===ri.INT?l.setInt32(u,n,!0):e===ri.UNSIGNED_INT?l.setUint32(u,n,!0):e===ri.SHORT?l.setInt16(u,n,!0):e===ri.UNSIGNED_SHORT?l.setUint16(u,n,!0):e===ri.BYTE?l.setInt8(u,n):e===ri.UNSIGNED_BYTE&&l.setUint8(u,n),u+=o}let h={buffer:this.processBuffer(l.buffer),byteOffset:this.byteOffset,byteLength:a};return void 0!==r&&(h.target=r),r===ri.ARRAY_BUFFER&&(h.byteStride=t.itemSize*o),this.byteOffset+=a,s.bufferViews.push(h),{id:s.bufferViews.length-1,byteLength:0}}processBufferViewImage(t){let e=this,i=e.json;return i.bufferViews||(i.bufferViews=[]),new Promise((function(n){let r=new FileReader;r.readAsArrayBuffer(t),r.onloadend=function(){let t=H7(r.result),o={buffer:e.processBuffer(t),byteOffset:e.byteOffset,byteLength:t.byteLength};e.byteOffset+=t.byteLength,n(i.bufferViews.push(o)-1)}}))}processAccessor(t,e,i,n){let r,o=this.json;if(t.array.constructor===Float32Array)r=ri.FLOAT;else if(t.array.constructor===Int32Array)r=ri.INT;else if(t.array.constructor===Uint32Array)r=ri.UNSIGNED_INT;else if(t.array.constructor===Int16Array)r=ri.SHORT;else if(t.array.constructor===Uint16Array)r=ri.UNSIGNED_SHORT;else if(t.array.constructor===Int8Array)r=ri.BYTE;else{if(t.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");r=ri.UNSIGNED_BYTE}if(void 0===i&&(i=0),void 0===n&&(n=t.count),0===n)return null;let s,a=MMe(t,i,n);void 0!==e&&(s=t===e.index?ri.ELEMENT_ARRAY_BUFFER:ri.ARRAY_BUFFER);let l=this.processBufferView(t,r,i,n,s),u={bufferView:l.id,byteOffset:l.byteOffset,componentType:r,count:n,max:a.max,min:a.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[t.itemSize]};return!0===t.normalized&&(u.normalized=!0),o.accessors||(o.accessors=[]),o.accessors.push(u)-1}processImage(t,e,i,n="image/png"){if(null!==t){let r=this,o=r.cache,s=r.json,a=r.options,l=r.pending;o.images.has(t)||o.images.set(t,{});let u=o.images.get(t),h=n+":flipY/"+i.toString();if(void 0!==u[h])return u[h];s.images||(s.images=[]);let c={mimeType:n},p=ZQ();p.width=Math.min(t.width,a.maxTextureSize),p.height=Math.min(t.height,a.maxTextureSize);let d=p.getContext("2d");if(!0===i&&(d.translate(0,p.height),d.scale(1,-1)),void 0!==t.data){e!==Gs&&console.error("GLTFExporter: Only RGBAFormat is supported."),(t.width>a.maxTextureSize||t.height>a.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",t);let i=new Uint8ClampedArray(t.height*t.width*4);for(let e=0;e<i.length;e+=4)i[e+0]=t.data[e+0],i[e+1]=t.data[e+1],i[e+2]=t.data[e+2],i[e+3]=t.data[e+3];d.putImageData(new ImageData(i,t.width,t.height),0,0)}else d.drawImage(t,0,0,p.width,p.height);!0===a.binary?l.push(QQ(p,n).then((t=>r.processBufferViewImage(t))).then((t=>{c.bufferView=t}))):void 0!==p.toDataURL?c.uri=p.toDataURL(n):l.push(QQ(p,n).then((t=>(new FileReader).readAsDataURL(t))).then((t=>{c.uri=t})));let f=s.images.push(c)-1;return u[h]=f,f}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(t){let e=this.json;e.samplers||(e.samplers=[]);let i={magFilter:ka[t.magFilter],minFilter:ka[t.minFilter],wrapS:ka[t.wrapS],wrapT:ka[t.wrapT]};return e.samplers.push(i)-1}processTexture(t){let e=this.cache,i=this.json;if(e.textures.has(t))return e.textures.get(t);i.textures||(i.textures=[]);let n=t.userData.mimeType;"image/webp"===n&&(n="image/png");let r={sampler:this.processSampler(t),source:this.processImage(t.image,t.format,t.flipY,n)};t.name&&(r.name=t.name),this._invokeAll((function(e){e.writeTexture&&e.writeTexture(t,r)}));let o=i.textures.push(r)-1;return e.textures.set(t,o),o}processMaterial(t){let e=this.cache,i=this.json;if(e.materials.has(t))return e.materials.get(t);if(t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;i.materials||(i.materials=[]);let n={pbrMetallicRoughness:{}};!0!==t.isMeshStandardMaterial&&!0!==t.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");let r=t.color.toArray().concat([t.opacity]);if(Mb(r,[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=r),t.isMeshStandardMaterial?(n.pbrMetallicRoughness.metallicFactor=t.metalness,n.pbrMetallicRoughness.roughnessFactor=t.roughness):(n.pbrMetallicRoughness.metallicFactor=.5,n.pbrMetallicRoughness.roughnessFactor=.5),t.metalnessMap||t.roughnessMap){let e=this.buildMetalRoughTexture(t.metalnessMap,t.roughnessMap),i={index:this.processTexture(e)};this.applyTextureTransform(i,e),n.pbrMetallicRoughness.metallicRoughnessTexture=i}if(t.map){let e={index:this.processTexture(t.map)};this.applyTextureTransform(e,t.map),n.pbrMetallicRoughness.baseColorTexture=e}if(t.emissive){let e=t.emissive;if(Math.max(e.r,e.g,e.b)>0&&(n.emissiveFactor=t.emissive.toArray()),t.emissiveMap){let e={index:this.processTexture(t.emissiveMap)};this.applyTextureTransform(e,t.emissiveMap),n.emissiveTexture=e}}if(t.normalMap){let e={index:this.processTexture(t.normalMap)};t.normalScale&&1!==t.normalScale.x&&(e.scale=t.normalScale.x),this.applyTextureTransform(e,t.normalMap),n.normalTexture=e}if(t.aoMap){let e={index:this.processTexture(t.aoMap),texCoord:1};1!==t.aoMapIntensity&&(e.strength=t.aoMapIntensity),this.applyTextureTransform(e,t.aoMap),n.occlusionTexture=e}t.transparent?n.alphaMode="BLEND":t.alphaTest>0&&(n.alphaMode="MASK",n.alphaCutoff=t.alphaTest),t.side===Dr&&(n.doubleSided=!0),""!==t.name&&(n.name=t.name),this.serializeUserData(t,n),this._invokeAll((function(e){e.writeMaterial&&e.writeMaterial(t,n)}));let o=i.materials.push(n)-1;return e.materials.set(t,o),o}processMesh(t){let e=this.cache,i=this.json,n=[t.geometry.uuid];if(Array.isArray(t.material))for(let e=0,i=t.material.length;e<i;e++)n.push(t.material[e].uuid);else n.push(t.material.uuid);let r=n.join(":");if(e.meshes.has(r))return e.meshes.get(r);let o,s=t.geometry;o=t.isLineSegments?ri.LINES:t.isLineLoop?ri.LINE_LOOP:t.isLine?ri.LINE_STRIP:t.isPoints?ri.POINTS:t.material.wireframe?ri.LINES:ri.TRIANGLES;let a={},l={},u=[],h=[],c={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},p=s.getAttribute("normal");void 0!==p&&!this.isNormalizedNormalAttribute(p)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),s.setAttribute("normal",this.createNormalizedNormalAttribute(p)));let d=null;for(let t in s.attributes){if("morph"===t.slice(0,5))continue;let i=s.attributes[t];if(t=c[t]||t.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(t)||(t="_"+t),e.attributes.has(this.getUID(i))){l[t]=e.attributes.get(this.getUID(i));continue}d=null;let n=i.array;"JOINTS_0"===t&&!(n instanceof Uint16Array)&&!(n instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),d=new rn(new Uint16Array(n),i.itemSize,i.normalized));let r=this.processAccessor(d||i,s);null!==r&&(t.startsWith("_")||this.detectMeshQuantization(t,i),l[t]=r,e.attributes.set(this.getUID(i),r))}if(void 0!==p&&s.setAttribute("normal",p),0===Object.keys(l).length)return null;if(void 0!==t.morphTargetInfluences&&t.morphTargetInfluences.length>0){let i=[],n=[],r={};if(void 0!==t.morphTargetDictionary)for(let e in t.morphTargetDictionary)r[t.morphTargetDictionary[e]]=e;for(let o=0;o<t.morphTargetInfluences.length;++o){let a={},l=!1;for(let t in s.morphAttributes){if("position"!==t&&"normal"!==t){l||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),l=!0);continue}let i=s.morphAttributes[t][o],n=t.toUpperCase(),r=s.attributes[t];if(e.attributes.has(this.getUID(i,!0))){a[n]=e.attributes.get(this.getUID(i,!0));continue}let u=i.clone();if(!s.morphTargetsRelative)for(let t=0,e=i.count;t<e;t++)for(let e=0;e<i.itemSize;e++)0===e&&u.setX(t,i.getX(t)-r.getX(t)),1===e&&u.setY(t,i.getY(t)-r.getY(t)),2===e&&u.setZ(t,i.getZ(t)-r.getZ(t)),3===e&&u.setW(t,i.getW(t)-r.getW(t));a[n]=this.processAccessor(u,s),e.attributes.set(this.getUID(r,!0),a[n])}h.push(a),i.push(t.morphTargetInfluences[o]),void 0!==t.morphTargetDictionary&&n.push(r[o])}a.weights=i,n.length>0&&(a.extras={},a.extras.targetNames=n)}let f=Array.isArray(t.material);if(f&&0===s.groups.length)return null;let g=f?t.material:[t.material],m=f?s.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let t=0,i=m.length;t<i;t++){let i={mode:o,attributes:l};if(this.serializeUserData(s,i),h.length>0&&(i.targets=h),null!==s.index){let n=this.getUID(s.index);(void 0!==m[t].start||void 0!==m[t].count)&&(n+=":"+m[t].start+":"+m[t].count),e.attributes.has(n)?i.indices=e.attributes.get(n):(i.indices=this.processAccessor(s.index,s,m[t].start,m[t].count),e.attributes.set(n,i.indices)),null===i.indices&&delete i.indices}let n=this.processMaterial(g[m[t].materialIndex]);null!==n&&(i.material=n),u.push(i)}a.primitives=u,i.meshes||(i.meshes=[]),this._invokeAll((function(e){e.writeMesh&&e.writeMesh(t,a)}));let v=i.meshes.push(a)-1;return e.meshes.set(r,v),v}detectMeshQuantization(t,e){if(this.extensionsUsed[V7])return;let i;switch(e.array.constructor){case Int8Array:i="byte";break;case Uint8Array:i="unsigned byte";break;case Int16Array:i="short";break;case Uint16Array:i="unsigned short";break;default:return}e.normalized&&(i+=" normalized");let n=t.split("_",1)[0];jQ[n]&&jQ[n].includes(i)&&(this.extensionsUsed[V7]=!0,this.extensionsRequired[V7]=!0)}processCamera(t){let e=this.json;e.cameras||(e.cameras=[]);let i=t.isOrthographicCamera,n={type:i?"orthographic":"perspective"};return i?n.orthographic={xmag:2*t.right,ymag:2*t.top,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:n.perspective={aspectRatio:t.aspect,yfov:Br.degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},""!==t.name&&(n.name=t.type),e.cameras.push(n)-1}processAnimation(t,e){let i=this.json,n=this.nodeMap;i.animations||(i.animations=[]);let r=(t=o0.Utils.mergeMorphTargetTracks(t.clone(),e)).tracks,o=[],s=[];for(let t=0;t<r.length;++t){let i=r[t],a=Ai.parseTrackName(i.name),l=Ai.findNode(e,a.nodeName),u=WQ[a.propertyName];if("bones"===a.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(a.objectIndex):void 0),!l||!u)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',i.name),null;let h,c=1,p=i.values.length/i.times.length;u===WQ.morphTargetInfluences&&(p/=l.morphTargetInfluences.length),!0===i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(h="CUBICSPLINE",p/=3):h=i.getInterpolation()===_g?"STEP":"LINEAR",s.push({input:this.processAccessor(new rn(i.times,c)),output:this.processAccessor(new rn(i.values,p)),interpolation:h}),o.push({sampler:s.length-1,target:{node:n.get(l),path:u}})}return i.animations.push({name:t.name||"clip_"+i.animations.length,samplers:s,channels:o}),i.animations.length-1}processSkin(t){let e=this.json,i=this.nodeMap,n=e.nodes[i.get(t)],r=t.skeleton;if(void 0===r)return null;let o=t.skeleton.bones[0];if(void 0===o)return null;let s=[],a=new Float32Array(16*r.bones.length),l=new Ot;for(let e=0;e<r.bones.length;++e)s.push(i.get(r.bones[e])),l.copy(r.boneInverses[e]),l.multiply(t.bindMatrix).toArray(a,16*e);return void 0===e.skins&&(e.skins=[]),e.skins.push({inverseBindMatrices:this.processAccessor(new rn(a,16)),joints:s,skeleton:i.get(o)}),n.skin=e.skins.length-1}processNode(t){let e=this.json,i=this.options,n=this.nodeMap;e.nodes||(e.nodes=[]);let r={};if(i.trs){let e=t.quaternion.toArray(),i=t.position.toArray(),n=t.scale.toArray();Mb(e,[0,0,0,1])||(r.rotation=e),Mb(i,[0,0,0])||(r.translation=i),Mb(n,[1,1,1])||(r.scale=n)}else t.matrixAutoUpdate&&t.updateMatrix(),!1===wMe(t.matrix)&&(r.matrix=t.matrix.elements);if(""!==t.name&&(r.name=String(t.name)),this.serializeUserData(t,r),t.isMesh||t.isLine||t.isPoints){let e=this.processMesh(t);null!==e&&(r.mesh=e)}else t.isCamera&&(r.camera=this.processCamera(t));if(t.isSkinnedMesh&&this.skins.push(t),t.children.length>0){let e=[];for(let n=0,r=t.children.length;n<r;n++){let r=t.children[n];if(r.visible||!1===i.onlyVisible){let t=this.processNode(r);null!==t&&e.push(t)}}e.length>0&&(r.children=e)}this._invokeAll((function(e){e.writeNode&&e.writeNode(t,r)}));let o=e.nodes.push(r)-1;return n.set(t,o),o}processScene(t){let e=this.json,i=this.options;e.scenes||(e.scenes=[],e.scene=0);let n={};""!==t.name&&(n.name=t.name),e.scenes.push(n);let r=[];for(let e=0,n=t.children.length;e<n;e++){let n=t.children[e];if(n.visible||!1===i.onlyVisible){let t=this.processNode(n);null!==t&&r.push(t)}}r.length>0&&(n.nodes=r),this.serializeUserData(t,n)}processObjects(t){let e=new Oa;e.name="AuxScene";for(let i=0;i<t.length;i++)e.children.push(t[i]);this.processScene(e)}processInput(t){let e=this.options;t=t instanceof Array?t:[t],this._invokeAll((function(e){e.beforeParse&&e.beforeParse(t)}));let i=[];for(let e=0;e<t.length;e++)t[e]instanceof Oa?this.processScene(t[e]):i.push(t[e]);i.length>0&&this.processObjects(i);for(let t=0;t<this.skins.length;++t)this.processSkin(this.skins[t]);for(let i=0;i<e.animations.length;++i)this.processAnimation(e.animations[i],t[0]);this._invokeAll((function(e){e.afterParse&&e.afterParse(t)}))}_invokeAll(t){for(let e=0,i=this.plugins.length;e<i;e++)t(this.plugins[e])}};u(i9,"GLTFWriter");var j7=i9,r9=class{constructor(t){this.writer=t,this.name="KHR_lights_punctual"}writeNode(t,e){if(!t.isLight)return;if(!t.isDirectionalLight&&!t.isPointLight&&!t.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t);let i=this.writer,n=i.json,r=i.extensionsUsed,o={};t.name&&(o.name=t.name),o.color=t.color.toArray(),o.intensity=t.intensity,t.isDirectionalLight?o.type="directional":t.isPointLight?(o.type="point",t.distance>0&&(o.range=t.distance)):t.isSpotLight&&(o.type="spot",t.distance>0&&(o.range=t.distance),o.spot={},o.spot.innerConeAngle=(t.penumbra-1)*t.angle*-1,o.spot.outerConeAngle=t.angle),void 0!==t.decay&&2!==t.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),t.target&&(t.target.parent!==t||0!==t.target.position.x||0!==t.target.position.y||-1!==t.target.position.z)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),r[this.name]||(n.extensions=n.extensions||{},n.extensions[this.name]={lights:[]},r[this.name]=!0);let s=n.extensions[this.name].lights;s.push(o),e.extensions=e.extensions||{},e.extensions[this.name]={light:s.length-1}}};u(r9,"GLTFLightExtension");var W7=r9,s9=class{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}writeMaterial(t,e){if(!t.isMeshBasicMaterial)return;let i=this.writer.extensionsUsed;e.extensions=e.extensions||{},e.extensions[this.name]={},i[this.name]=!0,e.pbrMetallicRoughness.metallicFactor=0,e.pbrMetallicRoughness.roughnessFactor=.9}};u(s9,"GLTFMaterialsUnlitExtension");var Y7=s9,o9=class{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.clearcoat)return;let i=this.writer,n=i.extensionsUsed,r={};if(r.clearcoatFactor=t.clearcoat,t.clearcoatMap){let e={index:i.processTexture(t.clearcoatMap)};i.applyTextureTransform(e,t.clearcoatMap),r.clearcoatTexture=e}if(r.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){let e={index:i.processTexture(t.clearcoatRoughnessMap)};i.applyTextureTransform(e,t.clearcoatRoughnessMap),r.clearcoatRoughnessTexture=e}if(t.clearcoatNormalMap){let e={index:i.processTexture(t.clearcoatNormalMap)};i.applyTextureTransform(e,t.clearcoatNormalMap),r.clearcoatNormalTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}};u(o9,"GLTFMaterialsClearcoatExtension");var X7=o9,a9=class{constructor(t){this.writer=t,this.name="KHR_materials_iridescence"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.iridescence)return;let i=this.writer,n=i.extensionsUsed,r={};if(r.iridescenceFactor=t.iridescence,t.iridescenceMap){let e={index:i.processTexture(t.iridescenceMap)};i.applyTextureTransform(e,t.iridescenceMap),r.iridescenceTexture=e}if(r.iridescenceIor=t.iridescenceIOR,r.iridescenceThicknessMinimum=t.iridescenceThicknessRange[0],r.iridescenceThicknessMaximum=t.iridescenceThicknessRange[1],t.iridescenceThicknessMap){let e={index:i.processTexture(t.iridescenceThicknessMap)};i.applyTextureTransform(e,t.iridescenceThicknessMap),r.iridescenceThicknessTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}};u(a9,"GLTFMaterialsIridescenceExtension");var Z7=a9,l9=class{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;let i=this.writer,n=i.extensionsUsed,r={};if(r.transmissionFactor=t.transmission,t.transmissionMap){let e={index:i.processTexture(t.transmissionMap)};i.applyTextureTransform(e,t.transmissionMap),r.transmissionTexture=e}e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}};u(l9,"GLTFMaterialsTransmissionExtension");var Q7=l9,u9=class{constructor(t){this.writer=t,this.name="KHR_materials_volume"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0===t.transmission)return;let i=this.writer,n=i.extensionsUsed,r={};if(r.thicknessFactor=t.thickness,t.thicknessMap){let e={index:i.processTexture(t.thicknessMap)};i.applyTextureTransform(e,t.thicknessMap),r.thicknessTexture=e}r.attenuationDistance=t.attenuationDistance,r.attenuationColor=t.attenuationColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}};u(u9,"GLTFMaterialsVolumeExtension");var K7=u9,c9=class{constructor(t){this.writer=t,this.name="KHR_materials_ior"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||1.5===t.ior)return;let i=this.writer.extensionsUsed,n={};n.ior=t.ior,e.extensions=e.extensions||{},e.extensions[this.name]=n,i[this.name]=!0}};u(c9,"GLTFMaterialsIorExtension");var J7=c9,h9=class{constructor(t){this.writer=t,this.name="KHR_materials_specular"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||1===t.specularIntensity&&t.specularColor.equals(gMe)&&!t.specularIntensityMap&&!t.specularColorTexture)return;let i=this.writer,n=i.extensionsUsed,r={};if(t.specularIntensityMap){let e={index:i.processTexture(t.specularIntensityMap)};i.applyTextureTransform(e,t.specularIntensityMap),r.specularTexture=e}if(t.specularColorMap){let e={index:i.processTexture(t.specularColorMap)};i.applyTextureTransform(e,t.specularColorMap),r.specularColorTexture=e}r.specularFactor=t.specularIntensity,r.specularColorFactor=t.specularColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}};u(h9,"GLTFMaterialsSpecularExtension");var $7=h9,f9=class{constructor(t){this.writer=t,this.name="KHR_materials_sheen"}writeMaterial(t,e){if(!t.isMeshPhysicalMaterial||0==t.sheen)return;let i=this.writer,n=i.extensionsUsed,r={};if(t.sheenRoughnessMap){let e={index:i.processTexture(t.sheenRoughnessMap)};i.applyTextureTransform(e,t.sheenRoughnessMap),r.sheenRoughnessTexture=e}if(t.sheenColorMap){let e={index:i.processTexture(t.sheenColorMap)};i.applyTextureTransform(e,t.sheenColorMap),r.sheenColorTexture=e}r.sheenRoughnessFactor=t.sheenRoughness,r.sheenColorFactor=t.sheenColor.toArray(),e.extensions=e.extensions||{},e.extensions[this.name]=r,n[this.name]=!0}};u(f9,"GLTFMaterialsSheenExtension");var e9=f9,p9=class{constructor(t){this.writer=t,this.name="KHR_materials_emissive_strength"}writeMaterial(t,e){if(!t.isMeshStandardMaterial||1===t.emissiveIntensity)return;let i=this.writer.extensionsUsed,n={};n.emissiveStrength=t.emissiveIntensity,e.extensions=e.extensions||{},e.extensions[this.name]=n,i[this.name]=!0}};u(p9,"GLTFMaterialsEmissiveStrengthExtension");var t9=p9;o0.Utils={insertKeyframe:function(t,e){let i,n=t.getValueSize(),r=new t.TimeBufferType(t.times.length+1),o=new t.ValueBufferType(t.values.length+n),s=t.createInterpolant(new t.ValueBufferType(n));if(0===t.times.length){r[0]=e;for(let t=0;t<n;t++)o[t]=0;i=0}else if(e<t.times[0]){if(Math.abs(t.times[0]-e)<.001)return 0;r[0]=e,r.set(t.times,1),o.set(s.evaluate(e),0),o.set(t.values,n),i=0}else if(e>t.times[t.times.length-1]){if(Math.abs(t.times[t.times.length-1]-e)<.001)return t.times.length-1;r[r.length-1]=e,r.set(t.times,0),o.set(t.values,0),o.set(s.evaluate(e),t.values.length),i=r.length-1}else for(let a=0;a<t.times.length;a++){if(Math.abs(t.times[a]-e)<.001)return a;if(t.times[a]<e&&t.times[a+1]>e){r.set(t.times.slice(0,a+1),0),r[a+1]=e,r.set(t.times.slice(a+1),a+2),o.set(t.values.slice(0,(a+1)*n),0),o.set(s.evaluate(e),(a+1)*n),o.set(t.values.slice((a+1)*n),(a+2)*n),i=a+1;break}}return t.times=r,t.values=o,i},mergeMorphTargetTracks:function(t,e){let i=[],n={},r=t.tracks;for(let t=0;t<r.length;++t){let o=r[t],s=Ai.parseTrackName(o.name),a=Ai.findNode(e,s.nodeName);if("morphTargetInfluences"!==s.propertyName||void 0===s.propertyIndex){i.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(wg)}let l,u=a.morphTargetInfluences.length,h=a.morphTargetDictionary[s.propertyIndex];if(void 0===h)throw new Error("THREE.GLTFExporter: Morph target name not found: "+s.propertyIndex);if(void 0===n[a.uuid]){l=o.clone();let t=new l.ValueBufferType(u*l.times.length);for(let e=0;e<l.times.length;e++)t[e*u+h]=l.values[e];l.name=(s.nodeName||"")+".morphTargetInfluences",l.values=t,n[a.uuid]=l,i.push(l);continue}let c=o.createInterpolant(new o.ValueBufferType(1));l=n[a.uuid];for(let t=0;t<l.times.length;t++)l.values[t*u+h]=c.evaluate(l.times[t]);for(let t=0;t<o.times.length;t++){let e=this.insertKeyframe(l,o.times[t]);l.values[e*u+h]=o.values[t]}}return t.tracks=i,t}};var mS,JQ,Eb,d9,m9=class{constructor(t){te(this,mS),te(this,Eb),A(this,"core"),this.core=t}async getCurrentSceneGLTF(t){let e={onlyVisible:!0,binary:!0,scale:.05,...t},i=new o0,n=tt(this,mS,JQ).call(this,e.scale);if(!n)return Le.error("Unable to retrieve the current scene"),new Blob;let r=await i.parseAsync(n,{trs:!1,maxTextureSize:1/0,onlyVisible:e.onlyVisible,binary:e.binary,scale:e.scale});if(r instanceof ArrayBuffer)return new Blob([r],{type:"application/octet-stream"});{let t=JSON.stringify(r,null,2);return new Blob([t],{type:"text/plain"})}}};mS=new WeakSet,JQ=u((function(t){var e;let i=new Oa,n=null==(e=this.core.sceneManager)?void 0:e.currentScene;if(!n)return null;let r=new aT(16777215,1e5,100),o=n.currentMap.width,s=n.currentMap.height;r.position.y=Math.min(o,s)*t,i.add(r);let a=tt(this,Eb,d9).call(this,n.object);return a.scale.set(t,t,t),i.add(a),a.traverse((t=>{let{geometry:e,material:i,position:n,rotation:r,quaternion:o,scale:s}=t;if(null!=e&&e.isBufferGeometry&&e&&e.isBufferGeometry){let a=e.attributes.position,l=e.attributes.normal,u=e.attributes.uv,h=new K,c=new K;for(let t=0;t<a.count;t++){h.fromBufferAttribute(a,t);let e=h.y;if(h.y=h.z,h.z=-e,a.setXYZ(t,h.x,h.y,h.z),l){c.fromBufferAttribute(l,t);let e=c.y;c.y=c.z,c.z=-e,l.setXYZ(t,c.x,c.y,c.z)}}let p=n.y;n.y=n.z,n.z=-p;let d=s.y;if(s.y=s.z,s.z=d,r instanceof Jh?r.set(r.x,r.y,r.z,"YXZ"):o.set(o.x,o.z,-o.y,o.w),u)for(let t=0;t<u.count;t++){let e=u.getX(t),i=u.getY(t);u.setXY(t,e,i)}null!=i&&i.map&&"PlaneGeometry"===e.type&&(t.side=Dr)}})),i}),"#getExportedScene"),Eb=new WeakSet,d9=u((function(t){let e=t.clone();if(t.geometry&&(e.geometry=t.geometry.clone()),t.material)if(Array.isArray(t.material))e.material=t.material.map((t=>(new Nx).copy(t)));else{let i=new Nx;e.material=i.copy(t.material)}e.clear();for(let i=0;i<t.children.length;i++)e.add(tt(this,Eb,d9).call(this,t.children[i]));return e.position.copy(t.position),e.rotation.copy(t.rotation),e.scale.copy(t.scale),e}),"#cloneObject3D"),u(m9,"ExportController");var a0=m9;E();var fr,hd,EMe="#ff0000",TMe=["fill","fill-opacity"],SMe=!1,v9=class{constructor(t){te(this,fr,void 0),te(this,hd,{}),ce(this,fr,t),M(this,fr).on(32,(t=>{this.clearCache(t)})),M(this,fr).controls.dispatcher.addEventListener(M(this,fr).controls.CAMERA_EVENTS.CHANGE_EVENT.type,(()=>this.runInterpolations())),M(this,fr).on(7,(()=>this.runInterpolations()))}clearCache(t){M(this,hd)[t.id]=void 0}showLayers(t){if(!M(this,fr).currentMap)return;let e=M(this,fr).mapObjects.get(M(this,fr).currentMap);null!=e&&(e.renderLayerGroup(t,[]),M(this,fr).publish(32,e.mapClass),M(this,fr).tryRendering())}async getAllLayersForMap(t){let e=M(this,fr).mapObjects.get(t.id);return e?(await e.load(),this.processMapObjectLayers(e)):{}}processMapObjectLayers(t){let e=Array.from(t.loadedLayerNames),i={};return e.forEach((t=>{i[t]=!1})),t.layerGroups.forEach((t=>{t.isVisible&&t.layers.forEach((t=>{i[t]=!0}))})),i}getVisibleLayersForLoadedMap(t){if(!M(this,fr).currentMap)return[];if(M(this,hd)[t.id])return M(this,hd)[t.id];let e=M(this,fr).mapObjects.get(t.id),i=[],n=this.processMapObjectLayers(e);for(let t in n)n[t]&&i.push(t);return M(this,hd)[t.id]=i,i}runInterpolations(){let t=M(this,fr).controls.getZoomLevel();M(this,fr).visibleMapObjectsInCurrentScene.forEach((e=>{e.layerGroups.forEach((e=>{if(null!=e.interpolationFn){let i=e.interpolationFn(t);e.setOpacity(i),e.isVisible=1===i}}))}))}async addGeoJSONLayer(t,e){let i=M(this,fr).mapObjects.get(M(this,fr).currentMap);if(null!=i&&i.mapClass&&null!=(await this.getAllLayersForMap(null==i?void 0:i.mapClass))[t])return Le.error('"'.concat(t,'" layer already exists, not adding')),Promise.resolve();if("FeatureCollection"===e.type){let n=[];for(let i of e.features){let e=this.convertFeatureToElement(t,i);await e.load(),n.push(e)}let r=null==i?void 0:i.processLayerGroup(t,[t],[],!0,n);null==i||i.object.add(null==r?void 0:r.mergedObjectsGroup),M(this,fr).tryRendering()}else{let n=this.convertFeatureToElement(t,e);await n.load();let r=null==i?void 0:i.processLayerGroup(t,[t],[],!0,[n]);null==i||i.object.add(null==r?void 0:r.mergedObjectsGroup),M(this,fr).tryRendering()}}convertFeatureToElement(t,e){var i,n,r,o;SMe&&Object.keys(e.properties||{}).forEach((t=>{TMe.includes(t)||Le.warn("".concat(t," property not supported in GeoJSON layers"))}));let s=M(this,fr).mapObjects.get(M(this,fr).currentMap),a=s.mapClass,l={vertexes:[],layer:t,material:{color:null!=(n=null==(i=e.properties)?void 0:i.fill)?n:EMe,opacity:null!=(o=null==(r=e.properties)?void 0:r["fill-opacity"])?o:1},geometry:{visible:!0,position:{z:1},scale:{z:0}}};for(let t=0;t<e.geometry.coordinates[0].length;t++){let[i,n]=e.geometry.coordinates[0][t],r=a.createCoordinate(n,i);l.vertexes.push({x:r.x,y:r.y,lat:n,lon:i})}let u=new Up(l,a,new lo,void 0,void 0);return s.loadedElements.push(u),u}};fr=new WeakMap,hd=new WeakMap,u(v9,"LayerController");var g9=v9,gS=g9;E();var eK=Bt($Q()),Tb=!1,AMe=u((function({core:t,blueDotManager:e,controller:i}){var n,r,o,s;let a=Qa.create({...null==(n=null==t?void 0:t.venue)?void 0:n.options,testMode:!(null!=(o=null==(r=null==t?void 0:t.venue)?void 0:r.options)&&o.emitAnalyticsEvents),userPosition:{...null==(s=i.userPosition)?void 0:s.coords}}),{stateMachine:l}=i,u=oY(t.smartCollisionEngine.update,1e4),h=$h({isFollowing:!1,blueDotTooltips:[],zoomCondition:0,setBlueDotPosition(){if(e&&i.userPosition&&i.userMap){let t=2===l.state||3===l.state;e.update({coordinates:i.userPosition.coords,bearing:i.bearing,radius:t&&i.userPosition.coords.accuracy||0,mapId:i.userMap.id})}},showBlueDotBearing(){if(e&&i.userPosition&&i.userMap){let t=2===l.state||3===l.state;e.update({coordinates:i.userPosition.coords,bearing:i.bearing,radius:t&&i.userPosition.coords.accuracy||0,mapId:i.userMap.id})}},addGhostMarkers(){e&&i.userPosition&&i.userMap&&e.update({mode:$p.GHOST,coordinates:i.userPosition.coords,bearing:i.bearing,radius:i.userPosition.coords.accuracy,mapId:i.userMap.id})},addLocationUncertainMarkersAndTooltips(){e&&i.userPosition&&i.userMap&&e.update({mode:$p.GREY,coordinates:i.userPosition.coords,radius:0,mapId:i.userMap.id})},addBlueDotMarker(){e&&i.userPosition&&i.userMap&&e.update({mode:$p.BLUE,coordinates:i.userPosition.coords,bearing:i.bearing,radius:i.userPosition.coords.accuracy,mapId:i.userMap.id,baseColor:i.enableBlueDotOptions.baseColor})},removeTooltips(){h.blueDotTooltips.forEach(t.tooltips.removeTooltip),h.blueDotTooltips=[]},removeBlueDot(){e.cleanup()},centerBlueDot(){var e,n,r,o,s;if(!i.userPosition)return;let{latitude:a,longitude:l}=i.userPosition.coords;(null==(e=i.userMap)?void 0:e.id)!==t.currentMap&&null!=i.userMap&&t.setMapWithReason(i.userMap,"blue-dot-level-transition");let c=i.userMap.createCoordinate(a,l),p=t.getPositionLatLon(a,l),d=null!=t.currentPath&&i.enableBlueDotOptions.useRotationMode,f=t.controls.zoomFactor||1,g=(null==(r=null==(n=t.options.loadOptions)?void 0:n.zoomOverrides)?void 0:r.blueDotFollowingZoomFactor)||2.5,m=f*g;if(0===h.zoomCondition&&null!=(null==(s=null==(o=t.options.loadOptions)?void 0:o.zoomOverrides)?void 0:s.blueDotFollowingZoomFactor)){h.zoomCondition=1,Tb=!0;let e=t.convertTo3DMapPosition({x:c.x,y:c.y});t.focusOn({points:[e],changeZoom:!0,duration:500,focusZoomFactor:m,callback:()=>{h.zoomCondition=2}}),Tb=!1}else if(1!==this.zoomCondition&&d){let e=i.userMap;if(null==e)return;let n=t.currentPath,r=t.camera.rotation,o={x:p.x+e.width/2,y:-p.y+e.height/2},s=null==n?void 0:n.filter((t=>t.map.id===e.id));if(null!=s&&s.length){let t,i=(0,eK.default)(s,e._scale),n=UZ(i,o);t=null!=n&&n.proportion&&n.proportion>.5?i[n.index||1]:i[n.index||0],r=zZ(i,t)+Math.PI}let a=t.canvasHeight>t.canvasWidth&&t.canvasHeight>600&&t.canvasWidth>500,l=900,h=GZ(p,r,g*t.controls.getZoomScaledMin(),a);t.controls.animateCamera({...h,duration:l}),u()}else 1!==this.zoomCondition&&(Tb=!0,t.camera.focusOn({coordinates:[c]},{changeZoom:!1,duration:1e3}),Tb=!1)},endFollowing(){h.isFollowing=!1,h.zoomCondition=0}}),c=null,p=!1;return t.on(22,(()=>{!c&&p&&(c=setTimeout((()=>{h.endFollowing(),clearTimeout(c),c=null}),60))})),t.on(26,(()=>{Tb||h.endFollowing()})),t.on(27,(()=>{p=!0})),t.on(28,(()=>{c&&(clearTimeout(c),c=null,p=!1)})),t.on(18,(()=>{h.endFollowing()})),t.on("user-tilt-begin",(()=>{h.endFollowing()})),t.on(20,(()=>{h.endFollowing()})),i.on("userDataChanged",(t=>{let{position:e,state:i,forceBlueDot:n}=t.newValue;switch(i){case 2:h.removeTooltips(),h.addGhostMarkers(),e&&(a.updateAnalyticsUserPosition({...e.coords}),a.trackBlueDotEvent(Qa.BLUEDOT_EVENT.FOUND_POSITION)),h.setBlueDotPosition(),h.showBlueDotBearing();break;case 3:h.removeTooltips(),h.addBlueDotMarker(),!n&&e&&(a.updateAnalyticsUserPosition({...e.coords}),a.trackBlueDotEvent(Qa.BLUEDOT_EVENT.FOUND_FLOOR)),h.setBlueDotPosition(),h.showBlueDotBearing();break;case 4:h.removeTooltips(),h.addLocationUncertainMarkersAndTooltips(),h.setBlueDotPosition(),h.showBlueDotBearing();break;default:h.removeTooltips(),h.removeBlueDot(),a.updateAnalyticsUserPosition(void 0)}let r=!0,o=!1;t.oldValue&&(r=!(!t.oldValue.position||!t.newValue.position||(null==e?void 0:e.coords.latitude)===t.oldValue.position.coords.latitude&&(null==e?void 0:e.coords.longitude)===t.oldValue.position.coords.longitude),o=t.oldValue.map!==t.newValue.map),h.isFollowing&&(r||o)&&h.centerBlueDot()})),h}),"BlueDotUI"),u8=AMe;E(),E();var fd=20,CMe=14,tK=8,xS=72,Sb=16,nK=12,PMe=52,IMe=4,yS=2,y9=8,x9=128,_9=320,Wr=8,iK=2,OMe=2/(Math.sqrt(5)+1)*360/6,LMe=60,DMe=5,E9=class{constructor(){this._element=document.createElement("div"),this._titleElement=document.createElement("select"),this._minimizeElement=document.createElement("button"),this._performancePanelElement=document.createElement("div"),this._performanceEntries=new Map,this._sortedPerformanceEntryNames=[];let t=document.createElement("option");t.value="Performance",t.innerHTML="Performance",t.selected="selected",this._titleElement.appendChild(t),this._titleElement.addEventListener("change",this._onCategoryChanged.bind(this)),this._overviewGraph=new bS({width:_9,height:x9,seriesList:[]}),this._controlPanels=new Map,this._sortedControlPanelNames=[],this._minimized=!1,this._element.appendChild(this._titleElement),this._element.appendChild(this._minimizeElement),this._element.appendChild(this._performancePanelElement),this._performancePanelElement.appendChild(this._overviewGraph.element),this._layout(),this._minimizeElement.addEventListener("click",this._onMinimizeClicked.bind(this)),null==window.MappedinDebug&&(window.MappedinDebug={}),window.MappedinDebug.DebugUI=this}destroy(){for(let t of this._performanceEntries.values())t.destroy();for(let t of this._controlPanels.values())t.destroy();this._controlPanels=null,this._performanceEntries=null,this._element=null,this._titleElement=null,this._minimizeElement=null,this._performancePanelElement=null,this._overviewGraph=null,Object.setPrototypeOf(this,null)}get element(){return this._element}reportFramePerformance(t){let e=!1;for(let i in t){if(!this._performanceEntries.has(i)){let t=new w9({name:i});this._performanceEntries.set(i,t),this._performancePanelElement.appendChild(t.element),this._sortedPerformanceEntryNames.push(i),this._sortedPerformanceEntryNames.sort(),e=!0}this._performanceEntries.get(i).report(t[i])}for(let e of this._performanceEntries.keys())null==t[e]&&this._performanceEntries.get(e).report(0);e&&this._updateLayout();for(let t of this._performanceEntries.values())if(t.series.changed()){this._overviewGraph.redraw();break}}addDebugControls(t){for(let e in t){for(let i of t[e]){let{name:t,description:n,control:r}=i;this._addDebugControl(e,t,n,r)}this._controlPanels.get(e)._updateLayout()}this._updateLayout()}addDebugControl(t,e,i,n){this._addDebugControl(t,e,i,n),this._updateLayout(),this._controlPanels.get(t)._updateLayout()}removeDebugControls(t){for(let e in t){for(let i of t[e])this._removeDebugControl(e,i);this._controlPanels.get(e)._updateLayout()}this._updateLayout()}removeDebugControl(t,e){this._removeDebugControl(t,e),this._updateLayout(),this._controlPanels.get(t)._updateLayout()}_addDebugControl(t,e,i,n){if(!this._controlPanels.has(t)){let e=new fS({name:t});this._controlPanels.set(t,e),this._element.appendChild(e.element);let i=document.createElement("option");i.value=t,i.innerHTML=t;let n=this._titleElement.children,r=1;for(;r<n.length&&!(n[r].value>t);++r);r===n.length?this._titleElement.appendChild(i):this._titleElement.insertBefore(i,n[r]),Object.assign(e.element.style,{display:"hidden",position:"absolute",left:Wr+"px",right:Wr+"px",top:Wr+fd+Wr+"px"})}this._controlPanels.get(t).addControl(e,i,n)}_removeDebugControl(t,e){this._controlPanels.get(t).removeControl(e)}_layout(){Object.assign(this._element.style,{display:"block",position:"absolute",right:tK+"px",top:tK+"px",width:_9+2*Wr+"px","font-family":"sans-serif",background:"rgba(255, 255, 255, 0.9)",outline:"1px solid white"}),Object.assign(this._titleElement.style,{display:"block",position:"absolute",left:Wr+"px",top:Wr+"px","font-size":CMe+"px"}),Object.assign(this._minimizeElement.style,{display:"block",position:"absolute",right:Wr+"px",top:Wr+"px",width:1.5*fd+"px",height:fd+"px"}),Object.assign(this._performancePanelElement.style,{display:"block",position:"absolute",left:Wr+"px",right:Wr+"px",top:Wr+fd+Wr+"px"}),Object.assign(this._overviewGraph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:x9+"px",border:"1px solid white",outline:"1px solid #bbb"}),this._updateLayout()}_updateLayout(){let t=null;for(let e of this._titleElement.children){e.selected&&(t=e);let i=e.selected&&!this._minimized;"Performance"===e.value?this._performancePanelElement.style.display=i?"block":"none":this._controlPanels.get(e.value).element.style.display=i?"block":"none"}this._minimized?this._element.style.height=Wr+fd+Wr+"px":"Performance"===t.value?this._element.style.height=Wr+fd+(xS+y9)*this._performanceEntries.size+x9+Wr+2*Wr+"px":this._element.style.height=Wr+fd+this._controlPanels.get(t.value).height+Wr+"px";for(let t=0;t<this._sortedPerformanceEntryNames.length;++t){let e=this._sortedPerformanceEntryNames[t],i=this._performanceEntries.get(e);i.setHue(t*OMe),i.element.style.top=(xS+y9)*t+"px"}this._overviewGraph.setSeriesList(this._sortedPerformanceEntryNames.map((t=>this._performanceEntries.get(t).series))),this._overviewGraph.element.style.top=(xS+y9)*this._performanceEntries.size+Wr+"px",this._minimizeElement.innerHTML=this._minimized?"⇕":"⇗"}_onMinimizeClicked(){this._minimized=!this._minimized,this._updateLayout()}_onCategoryChanged(){this._updateLayout()}};u(E9,"DebugUI");var l0=E9,T9=class{constructor({name:t,hue:e}){this._name=t,this.series=new M9({hue:e}),this._graph=new bS({width:_9,height:PMe,seriesList:[this.series]}),this._element=document.createElement("div"),this._nameElement=document.createElement("div"),this._hueElement=document.createElement("div"),this._lastFrameTimeElement=document.createElement("div"),this._element.appendChild(this._graph.element),this._element.appendChild(this._nameElement),this._element.appendChild(this._hueElement),this._element.appendChild(this._lastFrameTimeElement),this._layout()}destroy(){this._element.removeChild(this._graph.element),this._element.removeChild(this._nameElement),this._element.removeChild(this._hueElement),this._element.removeChild(this._lastFrameTimeElement),this._graph.destroy(),this._element=null,this._nameElement=null,this._hueElement=null,this._lastFrameTimeElement=null}_layout(){Object.assign(this._element.style,{display:"block",position:"absolute",left:"0px",right:"0px",height:xS+"px"}),Object.assign(this._hueElement.style,{display:"block",position:"absolute",left:"-1px",top:yS-1+"px",width:Sb-2*yS+"px",height:Sb-2*yS+"px","background-color":Ab(this.series.hue,.3,.9),border:"1px solid "+Ab(this.series.hue,.9,.9),"border-radius":"2px"}),Object.assign(this._nameElement.style,{display:"block",position:"absolute",left:Sb-yS+IMe+"px",right:"0px",top:"0px",height:Sb+"px","font-size":nK+"px","text-align":"left","vertical-align":"middle"}),Object.assign(this._lastFrameTimeElement.style,{display:"block",position:"absolute",left:"0px",right:"0px",top:"0px",height:Sb+"px","font-size":nK+"px","text-align":"right","vertical-align":"middle"}),Object.assign(this._graph.element.style,{display:"block",position:"absolute",left:"0px",right:"0px",bottom:"0px","text-align":"right",border:"1px solid white",outline:"1px solid "+Ab(this.series.hue,.2,1)}),this._nameElement.innerHTML=this._name}get element(){return this._element}report(t){if(this.series.report(t),this.series.changed()){if(this.series.length>=1){let t=0;for(let e=0;e<this.series.length;++e)t+=this.series.at(e);let e=this.series.maximumValue();this._lastFrameTimeElement.innerHTML="∫ "+(t/this.series.length).toFixed(iK)+"ms, ⤒ "+e.toFixed(iK)+" ms"}this._graph.redraw()}}setHue(t){this.series.hue=t,this._graph.setSeriesList([this.series]),this._layout()}};u(T9,"PerformanceEntry");var w9=T9,S9=class{constructor({seriesList:t,width:e,height:i}){this._gradients=new Map,this._canvas=document.createElement("canvas"),this._layout(e,i),this._context=this._canvas.getContext("2d"),this.setSeriesList(t)}destroy(){this._gradients=null,this._canvas=null,this._context=null,Object.setPrototypeOf(this,null)}_layout(t,e){Object.assign(this._canvas.style,{display:"block",position:"absolute",left:"0px",right:"0px",width:t+"px",height:e+"px"}),this._canvas.width=t*window.devicePixelRatio,this._canvas.height=e*window.devicePixelRatio}get element(){return this._canvas}redraw(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height);let t=0;for(let e of this._seriesList)t=Math.max(t,e.maximumValue());for(let e of this._seriesList)if(e.length>=1){this._context.beginPath();let i=1-(e.length-1)/(e.windowSize-1),n=1-e.at(0)/t;this._context.moveTo(i*this._canvas.width,n*this._canvas.height);for(let i=1;i<e.length;++i){let n=1-(e.length-1-i)/(e.windowSize-1),r=1-e.at(i)/t;this._context.lineTo(n*this._canvas.width,r*this._canvas.height)}this._context.strokeStyle=this._gradients.get(e),this._context.lineWidth=window.devicePixelRatio,this._context.stroke()}}setSeriesList(t){this._seriesList=t;for(let t of this._seriesList){let e=this._context.createLinearGradient(0,0,0,this._canvas.height);e.addColorStop(0,Ab(t.hue,1,1)),e.addColorStop(1,Ab(t.hue,.5,.5)),this._gradients.set(t,e)}}};u(S9,"LineGraph");var bS=S9,A9=class{constructor({windowSize:t=LMe,totalAccumulationCount:e=DMe,hue:i=0}){this.windowSize=t,this.hue=i,this._totalAccumulationCount=e,this._ringBuffer=new Array(this.windowSize).fill(0),this._ringBufferLength=0,this._ringBufferPointer=0,this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0}destroy(){}report(t){this._accumulatorValue+=t,++this._accumulatorCount,this._changed=!1,this._accumulatorCount===this._totalAccumulationCount&&(this._push(this._accumulatorValue/this._totalAccumulationCount),this._accumulatorValue=0,this._accumulatorCount=0,this._changed=!0)}at(t){if(!Number.isFinite(t)||t>=this._ringBufferLength||t<0)throw new Error("invalid index: "+t+" (length: "+this.length+")");let e=(this._ringBufferPointer+t-this._ringBufferLength+this.windowSize)%this.windowSize;return this._ringBuffer[e]}_push(t){this._ringBuffer[this._ringBufferPointer]=t,++this._ringBufferLength,this._ringBufferLength>this.windowSize&&(this._ringBufferLength=this.windowSize),++this._ringBufferPointer,this._ringBufferPointer>=this.windowSize&&(this._ringBufferPointer=0)}maximumValue(){let t=0;for(let e=0;e<this._ringBufferLength;++e)t=Math.max(t,this.at(e));return t}changed(){return this._changed}get length(){return this._ringBufferLength}};u(A9,"TimeSeries");var M9=A9;function Ab(t,e,i,n){let r=t%360/60,o=0|r,s=r-o,a=i*(1-e),l=i*(1-e*s),u=i*(1-e*(1-s)),h=0,c=0,p=0;switch(o){case 0:h=i,c=u,p=a;break;case 1:h=l,c=i,p=a;break;case 2:h=a,c=i,p=u;break;case 3:h=a,c=l,p=i;break;case 4:h=u,c=a,p=i;break;case 5:h=i,c=a,p=l}return"#"+b9(h)+b9(c)+b9(p)}function b9(t){let e=(255*t|0).toString(16);return 1===e.length&&(e="0"+e),e}u(Ab,"hsv2rgb"),u(b9,"toHex"),E(),E(),E();var NMe=new fa,rK=6371e3;function oK(t,e,i,n){let r=new Ia;return r.setFromAxisAngle(i,n),t.applyQuaternion(r),t.position.sub(e),t.position.applyQuaternion(r),t.position.add(e),t}function aK(t){let e=t.max.x-t.min.x,i=t.max.y-t.min.y,n=Math.max(e,i),r=new Yt(new K,new K(n,n,0)),o=new K;return o.subVectors(t.getCenter(new K),r.getCenter(new K)),r.translate(o),r}function _S(t,e,i,n){if(0===e)return t;let{lat:r,lon:o}=t,s=C9(i),a=C9(r),l=C9(o),u=e/rK*Math.cos(s),h=l+e/rK*Math.sin(s)/Math.cos(a),c=sK(a+u),p=sK(h);return n.createCoordinate(c,p)}function C9(t){return t*Math.PI/180}function sK(t){return 180*t/Math.PI}async function lK(t,e,i,n,r){let o,{signal:s}=n;try{o=await(await r.fetchTile(t,e,i,s)).blob()}catch(t){return}try{let t=await createImageBitmap(o,{imageOrientation:"flipY",colorSpaceConversion:"none"}),e=new Rp(t);return e.wrapS=wr,e.wrapT=wr,e}catch{return new Promise((t=>{let e=URL.createObjectURL(o),i=NMe.load(e,(()=>{i.colorSpace=Lr,i.wrapS=wr,i.wrapT=wr,t(i)}))}))}}function uK(t){return Math.sqrt(Math.pow(t,2)+Math.pow(t,2))/2}u(oK,"rotateAroundWorldAxis"),u(aK,"getSquareBoundingBoxByLongestSide"),u(_S,"translateCoordinate"),u(C9,"toRadians"),u(sK,"toDegrees"),u(lK,"loadTextureByTile"),u(uK,"calculateCircleRadius"),E();var xf=class{static MapSize(t,e){return Math.ceil(e*Math.pow(2,t))}static Clip(t,e,i){return Math.min(Math.max(t,e),i)}static GlobalPixelToPosition(t,e,i){var n=this.MapSize(e,i),r=this.Clip(t[0],0,n-1)/n-.5,o=.5-this.Clip(t[1],0,n-1)/n;return[360*r,90-360*Math.atan(Math.exp(2*-o*Math.PI))/Math.PI]}static GroundResolution(t,e,i){return t=this.Clip(t,this.MinLatitude,this.MaxLatitude),2*Math.cos(t*Math.PI/180)*Math.PI*this.EarthRadius/this.MapSize(e,i)}static TileXYToBoundingBox(t,e,i,n){var r=t*n,o=e*n,s=r+n,a=o+n,l=this.GlobalPixelToPosition([r,o],i,n),u=this.GlobalPixelToPosition([s,a],i,n);return[l[0],u[1],u[0],l[1]]}static PositionToTileXY(t,e,i){var n=this.Clip(t[1],this.MinLatitude,this.MaxLatitude),r=(this.Clip(t[0],this.MinLongitude,this.MaxLongitude)+180)/360,o=Math.sin(n*Math.PI/180),s=.5-Math.log((1+o)/(1-o))/(4*Math.PI),a=this.MapSize(e,i);return{tileX:Math.floor(this.Clip(r*a+.5,0,a-1)/i),tileY:Math.floor(this.Clip(s*a+.5,0,a-1)/i)}}static TileXYToQuadKey(t,e,i){for(var n=[],r=i;r>0;r--){var o=0,s=1<<r-1;t&s&&o++,e&s&&(o+=2),n.push(o)}return n.join("")}};u(xf,"TileMath"),A(xf,"EarthRadius",6378137),A(xf,"MinLatitude",-85.05112878),A(xf,"MaxLatitude",85.05112878),A(xf,"MinLongitude",-180),A(xf,"MaxLongitude",180);var Bu,ku,Pb,bf=xf,P9=class{constructor(t,e,i,n,r){A(this,"center"),A(this,"zoomLevel"),te(this,Bu,void 0),te(this,ku,void 0),te(this,Pb,void 0),A(this,"mesh"),A(this,"material"),A(this,"texture"),A(this,"cache",{}),A(this,"rendered",!1),this.center=t,this.zoomLevel=e,ce(this,Bu,i),ce(this,ku,n),ce(this,Pb,r)}get tileXY(){if(this.cache.tileXY)return this.cache.tileXY;let{tileX:t,tileY:e}=bf.PositionToTileXY([this.center.lon,this.center.lat],this.zoomLevel,M(this,Bu).tileSize);return this.cache.tileXY={tileX:t,tileY:e},{tileX:t,tileY:e}}get tileBoundingBoxInLatLon(){if(this.cache.tileBoundingBoxInLatLon)return this.cache.tileBoundingBoxInLatLon;let{tileX:t,tileY:e}=this.tileXY,{tileSize:i}=M(this,Bu),n=bf.TileXYToBoundingBox(t,e,this.zoomLevel,i);return this.cache.tileBoundingBoxInLatLon=n,n}discardTexture(){if(1===M(this,Bu).tileRenderMode){this.rendered=!1,this.material.opacity=0,this.material.map=null,this.material.needsUpdate=!0;try{this.texture.dispose()}catch{}M(this,ku).tryRendering()}}applyTexture(){if(this.rendered&&1!==M(this,Bu).tileRenderMode)return;this.rendered=!0;let{tileX:t,tileY:e}=this.tileXY;M(this,ku).taskScheduler.scheduleTask(new Hi({name:"fetchTile",callback:()=>{lK(t,e,this.zoomLevel,M(this,Pb),M(this,Bu).outdoorContextProvider).then((t=>{this.texture=t,this.material.map=t,ll({from:{opacity:0},to:{opacity:1},duration:500,onStart:()=>{this.mesh.visible=!0},onUpdate:({opacity:t})=>{this.material.opacity=!0===M(this,Bu).visible?t:0,this.material.needsUpdate=!0,M(this,ku).tryRendering()}}).start(M(this,ku))}))}}))}render(t,e){let i=t/e.scale,n=new To(i,i,1,1);this.material=new ls({opacity:0,transparent:!0,stencilWrite:!0,stencilFunc:LT,stencilRef:1}),this.mesh=new Ft(n,this.material),this.mesh.visible=!1;let r=this.tileBoundingBoxInLatLon,o=M(this,ku).referenceMap.createCoordinate(r[3],r[2]),s=M(this,ku).convertTo3DMapPosition(o);return this.mesh.position.set(s.x-i/2,s.y-i/2,-1),oK(this.mesh,s,new K(0,0,1),-e.getNorth()),this.mesh}};Bu=new WeakMap,ku=new WeakMap,Pb=new WeakMap,u(P9,"Tile");var Wi,Cb=P9,RMe=2,wS="#f0f0f1",fl=class t{constructor(e){var i,n,r,o;A(this,"tileSize",256),A(this,"token",""),A(this,"apiKey"),A(this,"tileRenderMode",1),A(this,"currentAbortController",new AbortController),te(this,Wi,void 0),A(this,"attributionEl"),A(this,"outdoorContextProvider"),A(this,"renderVisibleTiles"),A(this,"cachedZoomLevel",-1/0),A(this,"visible",!0),A(this,"zoomLevelToAltitudeMap",[[18,-1/0],[17,800],[16,1800],[15,3e3]]),A(this,"plane"),A(this,"tiles",[]),A(this,"maskMeshBoundingBox"),ce(this,Wi,e),this.renderVisibleTiles=Da(this._renderVisibleTiles,32),t.ENABLED&&null!==(null==(i=t.OPTIONS)?void 0:i.provider)&&(this.outdoorContextProvider=null==(n=t.OPTIONS)?void 0:n.provider,this.tileRenderMode=null!=(o=null==(r=t.OPTIONS)?void 0:r.tileRenderMode)?o:this.tileRenderMode,M(this,Wi).camera.on("CHANGED",(()=>{this.fetchTiles(),this.renderVisibleTiles()})),M(this,Wi).on(7,(()=>{this.fetchTiles(),this.renderVisibleTiles()})))}createAttributionEl(){this.attributionEl=document.createElement("div"),Object.assign(this.attributionEl.style,{position:"absolute",bottom:0,right:0,padding:"2px",pointerEvents:"none"}),M(this,Wi).container.append(this.attributionEl)}_renderVisibleTiles(){let t=M(this,Wi).cameraObject,e=new kc;e.setFromProjectionMatrix((new Ot).multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse));for(let t of this.tiles){let i=t.mesh,n=i.geometry.attributes.position.array,r=[i.localToWorld(new K(n[0],n[1],n[2])),i.localToWorld(new K(n[3],n[4],n[5])),i.localToWorld(new K(n[6],n[7],n[8])),i.localToWorld(new K(n[9],n[10],n[11]))],o=!1;for(let n=0;n<4;n++)if((e.containsPoint(r[n])||e.intersectsObject(i))&&(o=!0,!t.rendered)){t.applyTexture();break}t.rendered&&!o&&t.discardTexture()}}fadeOut(){return t.ENABLED&&this.visible?ll({from:{opacity:1},to:{opacity:0},onUpdate:({opacity:t})=>{this.plane.children.forEach((e=>{e.material.opacity=t,e.material.needsUpdate=!0,M(this,Wi).tryRendering()}))},onComplete:()=>{this.visible=!1,this.plane.visible=!1,M(this,Wi).tryRendering()}}).start(M(this,Wi)):Promise.resolve()}fadeIn(){return!t.ENABLED||this.visible?Promise.resolve():ll({from:{opacity:0},to:{opacity:1},onStart:()=>{this.plane.visible=!0,M(this,Wi).tryRendering()},onUpdate:({opacity:t})=>{this.plane.children.forEach((e=>{e.material.opacity=t,e.material.needsUpdate=!0,M(this,Wi).tryRendering()}))},onComplete:()=>{this.visible=!0}}).start(M(this,Wi))}fetchTiles(){let t=M(this,Wi).controls.getZoom()*M(this,Wi).referenceMap.scale,e=-1/0;this.zoomLevelToAltitudeMap.forEach((([i,n])=>{t>n&&(e=i)})),e!==this.cachedZoomLevel&&(this.currentAbortController.signal.aborted||(this.currentAbortController.abort(),this.currentAbortController=new AbortController),this.fetchTilesForZoomLevel(e))}async fetchTilesForZoomLevel(e){var i,n;this.plane&&(this.tiles=[],M(this,Wi).scene.remove(this.plane),this.plane.destroy(),M(this,Wi).tryRendering()),this.cachedZoomLevel=e,this.plane=new lo;let r=M(this,Wi).referenceMap,o=M(this,Wi).mapObjects.get(r.id);await o.load();let s=o.boundingBox,a=lY(aK(new Yt(new K(s.min.x,s.min.y,s.min.z),new K(s.max.x,s.max.y,s.max.z))),null!=(n=null==(i=t.OPTIONS)?void 0:i.boundingBoxMultiplier)?n:RMe),{min:l,max:u}=a,h=new To(u.x-l.x,u.y-l.y),c=new ls({color:wS,stencilWrite:!0,stencilRef:1,depthWrite:!1,stencilFunc:Ux,stencilFail:Og,stencilZFail:Og,stencilZPass:Og}),p=new Ft(h,c);p.renderOrder=-1,p.applyMatrix4(o.object.matrix),this.maskMeshBoundingBox=(new Yt).setFromObject(p),this.maskMeshBoundingBox.min.z=-100,this.maskMeshBoundingBox.max.z=100,this.plane.add(p);let d=new K(a.min.x,a.min.y,0),f=new K(a.max.x,a.max.y,0);if("function"==typeof this.outdoorContextProvider.fetchAttribution){null==this.attributionEl&&this.createAttributionEl();let t=M(this,Wi).convert3DMapPositionToCoordinate(d),i=M(this,Wi).convert3DMapPositionToCoordinate(f);this.outdoorContextProvider.fetchAttribution(e,[i.lon,i.lat,t.lon,t.lat]).then((t=>t.json())).then((({copyrights:t})=>{this.attributionEl.innerHTML=t[0]})).catch((t=>Le.error(t)))}let g=a.getCenter(new K),m=M(this,Wi).convert3DMapPositionToCoordinate(g,r),v=bf.GroundResolution(m.lat,e,this.tileSize),y=this.tileSize*v,x=new Cb(m,e,this,M(this,Wi),this.currentAbortController);x.render(y,r),this.plane.add(x.mesh),this.tiles.push(x);let _=uK(a.max.x-a.min.x),b=y/r.scale,E=Math.ceil(_/b);for(let t=1;t<=E;t++)this.populateLayer(t,m,e,y,r);M(this,Wi).scene.add(this.plane)}populateLayer(t=1,e,i,n,r){let o=_S(e,n*t,0,r);o=_S(o,n*t,270,r);let s=2*t+1,a=o,l=[90,180,270,0];for(let t of l)for(let e=0;e<s-1;e++){let e=new Cb(a,i,this,M(this,Wi),this.currentAbortController);e.render(n,r),this.checkIfTileIsInBoundingBox(e)&&(this.plane.add(e.mesh),this.tiles.push(e)),a=_S(a,n,t,r)}}checkIfTileIsInBoundingBox(t){let e=(new Yt).setFromObject(t.mesh);return this.maskMeshBoundingBox.intersectsBox(e)||this.maskMeshBoundingBox.containsBox(e)}};Wi=new WeakMap,u(fl,"TileManager"),A(fl,"ENABLED",!1),A(fl,"OPTIONS");var ah=fl;E(),E(),"object"!=typeof globalThis&&(Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var cK=Bt(Eu());E(),ci.prototype.destroy=function(){for(let t=this.children.length-1;t>=0;t--)this.children[t].destroy();this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.parent&&this.parent.remove(this),this.texture&&(this.texture.dispose(),this.texture=void 0),Array.isArray(this.material)?this.material.forEach((function(t){ef(t)})):typeof this.material<"u"&&ef(this.material),this.material=void 0};var jr=new pa,BMe={},Na={BEFORE_CAMERA:5,CAMERA:4,AFTER_CAMERA:3,RENDER:2,AFTER_RENDER:1,AFTER_ALL_UPDATES:0},kMe=Br.radToDeg(.698132);BMe.CameraControls=dS;var pd,u0,c0,h0,_f,lh,wf,co,MS,dd,f0,Mf,Ib,Ob,md,Lb,Db,Nb,Rb,Bb,kb,qb,Ef,Fb,uh,qu,p0,Ub,zb,Gb,d0,gd,Vb,vd,yd,Zl,Ql,ES,m0,Tf,TS,SS,AS,CS,Hb,jb,O9=class extends Go{constructor(t,e,i={},n){var r,o,s,a,l,h,c,p,d,f;super(),A(this,"eventSystem"),A(this,"floatingLabels"),A(this,"flatLabels"),A(this,"paths"),A(this,"polygonColors"),A(this,"polygonHoverColors"),A(this,"polygonInteraction"),A(this,"polygonStates"),A(this,"polygonImages"),A(this,"markers"),A(this,"tooltips"),A(this,"threeDMarkers"),A(this,"blueDot"),A(this,"camera"),A(this,"outdoorViewController"),A(this,"exportController"),A(this,"watermark"),A(this,"layerController"),A(this,"options"),A(this,"currentPath"),A(this,"state","explore"),A(this,"imageFlippingCache",{}),A(this,"imageFlippingEnabled",!1),A(this,"MapView"),A(this,"type"),A(this,"container"),A(this,"venue"),A(this,"colors"),A(this,"loadOptions"),A(this,"smartCollisionEngine"),A(this,"taskScheduler"),A(this,"renderer"),A(this,"highlightedPolygons",{}),A(this,"outlinedPolygons",new Map),A(this,"scene"),A(this,"focusZoomFactor"),A(this,"cameraObject"),A(this,"polygonMeshesById"),A(this,"textLabelsByPolygonId"),A(this,"labelOrientationDelay"),A(this,"isWebGL2"),A(this,"interactivePolygons"),A(this,"polygonHoverColorsById"),A(this,"mapManager"),A(this,"sceneManager"),A(this,"mapObjects"),A(this,"referenceMap"),A(this,"currentInteractionEvent"),A(this,"resolution"),A(this,"cameraParameters"),A(this,"controls"),A(this,"cameraPlane"),A(this,"canvasWidth"),A(this,"canvasHeight"),A(this,"cachedPadding",{top:0,left:0,right:0,bottom:0}),A(this,"currentScale",0),A(this,"rendererDomElement"),A(this,"resolutionScale"),te(this,pd,void 0),te(this,u0,void 0),te(this,c0,void 0),te(this,h0,void 0),te(this,_f,void 0),te(this,lh,void 0),te(this,wf,void 0),te(this,co,null),te(this,MS,["top","bottom","left","right"]),te(this,dd,{PIXELS:"pixels",PORTIONS:"portions"}),te(this,f0,void 0),te(this,Mf,void 0),te(this,Ib,void 0),te(this,Ob,void 0),te(this,md,void 0),te(this,Lb,void 0),te(this,Db,void 0),te(this,Nb,void 0),te(this,Rb,void 0),te(this,Bb,void 0),te(this,kb,void 0),te(this,qb,void 0),te(this,Ef,void 0),te(this,Fb,void 0),te(this,uh,!1),te(this,qu,void 0),te(this,p0,void 0),A(this,"outdoorGeometryLayers",[]),A(this,"billboardManager"),A(this,"stackedMaps"),A(this,"tileManager"),A(this,"setMapReason"),te(this,Ub,u(((t=!0)=>{ce(this,uh,t)}),"#setFlippablesNeedUpdating")),te(this,zb,u((()=>{this.smartCollisionEngine.init(this.container,M(this,ES))}),"#initializeCollisionEngine")),te(this,Gb,u((t=>Math.trunc(100*t)/100),"#round100")),te(this,d0,u((()=>{var t,e;this.canvasWidth=this.rendererDomElement.clientWidth,this.canvasHeight=this.rendererDomElement.clientHeight,M(this,Tf).call(this),null!=this.outdoorViewController&&this.outdoorViewController.resize(),M(this,gd).call(this),this.smartCollisionEngine.resize(this.container),"function"==typeof(null==(e=null==(t=this.sceneManager)?void 0:t.currentScene)?void 0:e.resize)&&this.sceneManager.currentScene.resize(),this.watermark.resize()}),"#onWindowResize")),te(this,gd,u((()=>{this.renderer.render(un.ALL,null,this.scene,this.cameraObject)}),"#renderFull")),te(this,Vb,u(((t,e)=>{t.style.transform="rotate("+(e+t._mRotationOffset)+"rad)"}),"#rotateNode")),te(this,vd,u((()=>{ce(this,_f,!0),ce(this,uh,!0)}),"#cameraRotationStarted")),te(this,yd,u((()=>{ce(this,_f,!1),ce(this,uh,!0)}),"#cameraRotationStopped")),te(this,Zl,u((()=>{}),"#cameraMovementStart")),te(this,Ql,u((()=>{}),"#cameraMovementEnd")),te(this,ES,u(((t,e)=>{this.cameraObject.updateProjectionMatrix(),this.cameraObject.updateMatrixWorld(!0);let i=this.mapObjects.get(e);if(null==i)return{x:0,y:0};let n=this.convertTo3DMapPosition(t.nodeOrCoordinate);typeof t.height<"u"&&(n.z+=t.height*i.object.scale.x);let r=n.project(this.cameraObject),o=(r.x+1)/2*this.canvasWidth-0,s=(1-r.y)/2*this.canvasHeight-0;return{x:M(this,Gb).call(this,o),y:M(this,Gb).call(this,s)}}),"#project")),te(this,m0,u(((t,e)=>{this.renderer.setBufferSize(t,e),this.cameraObject.aspect=t/e,this.cameraObject.updateProjectionMatrix(),this.cameraObject.updateMatrixWorld(!0),this.resolution.x=t,this.resolution.y=e}),"#setBufferSize")),te(this,Tf,u((()=>{let t=this.canvasWidth=this.rendererDomElement.clientWidth,e=this.canvasHeight=this.rendererDomElement.clientHeight,i=Math.floor(t*this.resolutionScale),n=Math.floor(e*this.resolutionScale);if(this.rendererDomElement.width!==i||this.rendererDomElement.height!==n){if(this.rendererDomElement.width*this.rendererDomElement.height*i*n!=0){let t=this.rendererDomElement.width!==i?this.rendererDomElement.width/i:this.rendererDomElement.height/n;this.controls.setZoom(t*this.controls.getZoom())}M(this,m0).call(this,i,n)}ce(this,Ef,!1)}),"#measureCanvas")),te(this,TS,u((()=>{var t;let e=M(this,qu).rotation.z;if(M(this,_f)||M(this,uh)){let i=null==(t=this.sceneManager)?void 0:t.currentScene.mapObjects;null==i||i.forEach((t=>{let i=e-t.object.rotation.z;t.imagesToFlip.forEach((t=>t.flipIfNeeded(i)))}))}}),"#rotateTextLabels")),te(this,SS,u((()=>{var t;let e=M(this,qu).rotation.z;if(M(this,_f)||M(this,uh)){let i=null==(t=this.sceneManager)?void 0:t.currentScene.mapObjects;null==i||i.forEach((t=>{let i=e-t.object.rotation.z;t.imagesToFlip.forEach((t=>t.flipIfNeeded(i)))}))}}),"#rotateImages")),te(this,AS,u((t=>{t.addDebugControls({MapView3D:[{name:"Background Color",description:"The color of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new xb({current:new at("#ffffff"),onValueChanged:t=>{this.renderer.setBackgroundColor(t,this.renderer.backgroundAlpha),this.tryRendering()}})},{name:"Background Opacity",description:"The opacity of the mapview background. Will be obscured if there is a fully-opaque outdoor context.",control:new yb({minimum:0,maximum:1,step:.01,current:this.renderer.backgroundAlpha,onValueChanged:t=>{this.renderer.setBackgroundColor(this.renderer.backgroundColor,t),this.tryRendering()}})}]})}),"#addDebugControls")),te(this,CS,u((t=>{t.removeDebugControls({MapView3D:["Background Color","Background Opacity"]})}),"#removeDebugControls")),te(this,Hb,u(((t,e)=>jr.intersectObjects(t,!0).filter((t=>!!t.object.name&&(e&&this.venue._polygonsById?t.object.name in this.venue._polygonsById:t.object.name in this.interactivePolygons))).map((t=>this.venue._polygonsById[t.object.name]))||[]),"#getPolygonsFromRaycaster")),te(this,jb,u((()=>{this.tryRendering()}),"#onCameraChange")),A(this,"getPolygon",u((t=>La(t,this.venue.polygons)),"getPolygon")),A(this,"showEntireMap",u((t=>{if(null==this.currentMap)return;t||(t={});let e,i=this.mapObjects.get(this.currentMap);return t.interactiveOnly?e=Object.keys(this.interactivePolygons):(e=null==i?void 0:i.hoverableMeshChildren.map((function(t){return t.name})),!e.length&&null!=i&&i.elements&&(e=Object.keys(i.elements))),t.polygons=e,this.focusOn(t)}),"showEntireMap")),A(this,"resetPanBounds",u((()=>{var t;if(null==this.currentMap)return;let e=this.mapObjects.get(this.currentMap);this.controls.panBounds.min=this.controls.getPosition(),this.controls.panBounds.max=this.controls.getPosition();let i=null==e?void 0:e.boundingBox;i||(i=(new Yt).setFromObject(null==e?void 0:e.object),this.mapObjects.get(this.currentMap).boundingBox=i),null==(t=this.mapManager)||t.expandPanBounds(i)}),"resetPanBounds")),A(this,"focusOn",u((t=>{var e,i;if(null==this.currentMap||null==t)return;let n,r=void 0===t.changeZoom||t.changeZoom;n=void 0!==t.duration?t.duration:"true"===B.env.TESTING?0:200;let o=void 0!==t.focusZoomFactor?t.focusZoomFactor:this.focusZoomFactor,s=t.curve,a=void 0!==t.horizontalFovFactor?t.horizontalFovFactor:1,l=void 0!==t.verticalFovFactor?t.verticalFovFactor:1,u=t.callback,h=t.cancelledCallback,c=void 0!==t.minZoom?t.minZoom:this.controls.minZoom,p=void 0!==t.maxZoom?t.maxZoom:this.controls.maxZoom,d=null==(e=t.updateZoomLimits)||e,f=!1,g=[],m=null!=(i=t.doNotEmitFocusOnEvent)&&i;if(M(this,Tf).call(this),t.nodes){let e=t.nodes;for(var v=0,y=e.length;v<y;v++){let t=e[v];"string"==typeof t&&(t=La(t,this.venue.nodes)),(null==t.map||t.map.id==this.currentMap)&&(g.push(this.convertTo3DMapPosition(t)),f=!0)}}if(t.debug){M(this,wf)&&M(this,wf).destroy(),ce(this,wf,new ci),this.scene.add(M(this,wf));var x=new Bc(100,100,100),_=new ls({color:65280})}t.points&&(t.points.forEach((t=>g.push(t))),f=!0);let b=this.controls.getRotation(),E=this.controls.getTilt();if(this.controls.setRotation(t.rotation,!0),this.controls.setTilt(t.tilt,!0),t.boundingBox){let{min:e,max:i}=t.boundingBox;[new K(e.x,e.y,e.z),new K(e.x,i.y,e.z),new K(i.x,e.y,e.z),new K(i.x,i.y,e.z),new K(e.x,e.y,i.z),new K(e.x,i.y,i.z),new K(i.x,e.y,i.z),new K(i.x,i.y,i.z)].forEach((e=>{if(t.debug){let t=new Ft(x,_);t.position.set(e.x,e.y,e.z),M(this,wf).add(t)}g.push(e)})),f=!0}if(t.polygons){let e=t.polygons,i=this.mapObjects.get(this.currentMap),n=0;for(v=0,y=e.length;v<y;v++){let t=Oi(e[v]),r=null==i?void 0:i.objectsDictionary[t];if(r)if(n++,r.geometry.attributes){let t=r.geometry.attributes.position;for(let e=0,n=t.count;e<n;e++){let n=new K;n.set(t.getX(e),t.getY(e),t.getZ(e)).applyMatrix4(null==i?void 0:i.object.matrix),g.push(n)}f=!0}else{for(let t=0,e=r.geometry.vertices.length;t<e;t++)g.push(r.geometry.vertices[t].clone().applyMatrix4(null==i?void 0:i.object.matrix));f=!0}}1===n&&(o=this.loadOptions&&this.loadOptions.zoomOverrides&&this.loadOptions.zoomOverrides.focusZoomFactorPolygon||o)}if(f){this.tryRendering();let e=t.padding||this.cachedPadding||{top:0,bottom:0,left:0,right:0},i=this.getZoomLevelForCurrentMap(),f=c*o,v=p*o,y=this.getCameraFrameForPoints(g,a,l,e,!r,f,v),x=y.zoom;d&&(this.controls.restrictZoomLimits(i),this.controls.expandZoomLimits(x*o));let _={position:y.position,tilt:t.tilt,rotation:t.rotation};return r&&(_.zoom=Br.clamp(y.zoom*o,c,p)),m||this.publish(26),this.controls.setRotation(b,!0),this.controls.setTilt(E,!0),this.controls.animateCamera(_,n,s,u,h)}return m||this.publish(26),this.controls.setRotation(b,!0),this.controls.setTilt(E,!0),this.controls.animateCamera({},n,s,u,h)}),"focusOn")),A(this,"focusOnPolygon",u(((t,e,i,n)=>this.focusOn({polygons:[t],changeZoom:e,duration:i,curve:n})),"focusOnPolygon")),A(this,"focusOnPath",u(((t,e,i,n,r)=>this.focusOn({nodes:t,polygons:e,changeZoom:i,duration:n,curve:r})),"focusOnPath")),A(this,"getCameraFrameForPoints",u(((t,e,i,n,r=!0,o=this.controls.getZoomScaledMin(),s=this.controls.getZoomScaledMax())=>{(!i||isNaN(i))&&(i=1),(!e||isNaN(e))&&(e=1);let a={position:this.controls.getPosition(),zoom:this.controls.minZoom};if(null==t||0===t.length)return a;n||(n={top:0,bottom:0,left:0,right:0,type:M(this,dd).PIXELS});for(let t of M(this,MS))"number"!=typeof n[t]&&(n[t]=0);if(n.type||(n.type=M(this,dd).PIXELS),n.type===M(this,dd).PORTIONS&&(n={top:n.top*this.canvasHeight,bottom:n.bottom*this.canvasHeight,left:n.left*this.canvasWidth,right:n.right*this.canvasWidth,type:M(this,dd).PIXELS}),n.left+n.right>=this.canvasWidth||n.top+n.bottom>=this.canvasHeight)return a;M(this,qu).updateMatrixWorld();let l=this.cameraObject.matrixWorldInverse,u=this.cameraObject.fov*(Math.PI/180)/2,h=u*i,c=Math.atan(Math.tan(u)*(this.canvasWidth/this.canvasHeight))*e;if(1===t.length){let e=t[0].clone();e.applyMatrix4(l);let i=this.controls.minZoom*Math.tan(c)*2,r=this.controls.minZoom*Math.tan(h)*2,o=(n.left-n.right)/2/this.canvasWidth,s=(n.top-n.bottom)/2/this.canvasHeight,u=new K(-o*i,s*r,0);return e.add(u),e.applyMatrix4(this.cameraObject.matrixWorld),a.position.x=e.x,a.position.y=e.y,a}let p,d=new K(1/0,1/0,1/0),f=new K(-1/0,-1/0,-1/0),g=(new Yt).setFromPoints(t);for(let e=0,i=t.length;e<i;e++)p=t[e],p.applyMatrix4(l),d.min(p),f.max(p);let m=f.x-d.x,v=f.y-d.y,y=this.canvasWidth-n.left-n.right,x=this.canvasHeight-n.top-n.bottom,_=(f.x+d.x)/2,b=(f.y+d.y)/2,E=m/y,w=v/x,A=s,S=o*Math.tan(c)*2,T=A*Math.tan(c)*2,C=S/this.canvasWidth,P=T/this.canvasWidth,I=Math.max(E,w);r||(I=Math.min(Math.max(I,C),P));let L=y*I,O=x*I,N={x:_-L/2-n.left*I,y:b-O/2-n.bottom*I},D={x:_+L/2+n.right*I,y:b+O/2+n.top*I},R=(N.x+D.x)/2,q=(N.y+D.y)/2,B=g.getCenter(new K),k=Math.abs(R-N.x),F=Math.abs(q-N.y),U=k/Math.tan(c),z=F/Math.tan(h),V=new K;V.set(R,q,f.z+Math.max(U,z)),V.applyMatrix4(this.cameraObject.matrixWorld);let j=new K;if(j.set(R,q,f.z),j.applyMatrix4(this.cameraObject.matrixWorld),"STACKED"===this.state){let t=(new K).subVectors(j,V),e=(B.z-V.z)/t.z,i=(new K).copy(V).add(t.clone().multiplyScalar(e));a.position=i,j.set(a.position.x,a.position.y,a.position.z)}else{j.sub(V);let t=V.z/j.z;a.position.x=V.x-j.x*t,a.position.y=V.y-j.y*t,j.set(a.position.x,a.position.y,0)}return V.sub(j),a.zoom=V.length(),a}),"getCameraFrameForPoints")),A(this,"setPadding",u((t=>{this.cachedPadding=t||{top:0,bottom:0,left:0,right:0}}),"setPadding")),A(this,"getZoomLevelForPolygon",u((t=>{var e;if(null==this.currentMap)return;let i=Oi(t),n=[],r=null==(e=this.mapObjects.get(this.currentMap))?void 0:e.objectsDictionary[i];if(r){let t=r.geometry.attributes?r.geometry.attributes.position:[];for(let e=0,i=t.count;e<i;e++){let i=new K;i.set(t.getX(e),t.getY(e),t.getZ(e)),n.push(i)}return this.getCameraFrameForPoints(n,1,1,this.cachedPadding,!0).zoom}return this.controls.getZoom()}),"getZoomLevelForPolygon")),A(this,"getZoomLevelForCurrentMap",u((()=>{var t;if(null==this.currentMap)return;let e=null==(t=this.mapObjects.get(this.currentMap))?void 0:t.object;if(e){let t=this.mapObjects.get(this.currentMap).boundingBox;t||(t=(new Yt).setFromObject(e),this.mapObjects.get(this.currentMap).boundingBox=t);let i=[t.min.clone(),t.max.clone()];return this.getCameraFrameForPoints(i,1,1,this.cachedPadding,!0).zoom}return this.controls.getZoom()}),"getZoomLevelForCurrentMap")),A(this,"getZoomLevelForObject",u((t=>{let e;e||(e=(new Yt).setFromObject(t));let i=[e.min.clone(),e.max.clone()];return this.getCameraFrameForPoints(i,1,1,0,!0).zoom}),"getZoomLevelForObject")),A(this,"resetCamera",u(((t=!1)=>{var e;if(null==this.currentMap)return;let i={x:0,y:0};if(!t){let t=null==(e=this.mapObjects.get(this.currentMap))?void 0:e.boundingBox;t&&(i={x:(t.max.x-t.min.x)/2+t.min.x,y:(t.max.y-t.min.y)/2+t.min.y})}let n=this.getZoomLevelForCurrentMap();this.controls.expandZoomLimits(n);this.controls.setMulti(i,n,0,.6)}),"resetCamera")),A(this,"getPositionLatLon",u(((t,e,i)=>{let n;if(n="string"==typeof i?i:null==i?this.currentMap:i.id,null==n)return;let r=this.mapObjects.get(n);if(null==r)throw new Error("Invalid map: "+n);return r.getPositionLatLon(t,e)}),"getPositionLatLon")),A(this,"lockNorth",u(((t,e=0)=>{M(this,lh).push(t),t._mRotationOffset=e,M(this,Vb).call(this,t,this.getNorth()+this.controls.getRotation())}),"lockNorth")),A(this,"unlockNorth",u((t=>{delete t._mRotationOffset,ce(this,lh,M(this,lh).filter((function(e){return e!=t})))}),"unlockNorth")),A(this,"convertTo3DMapPosition",u((t=>{var e;let i=(null==(e=t.map)?void 0:e.id)||this.currentMap;if(null==i)return;let n=this.venue.getCollectionItemById("maps",i);return new K(t.x-n.width/2,-t.y+n.height/2,1).applyMatrix4(this.mapObjects.get(i).object.matrix)}),"convertTo3DMapPosition")),A(this,"convertScreenCoordinateToMapCoordinate",u(((t,e,i)=>{var n;let r=null!=(n=null==i?void 0:i.id)?n:this.currentMap;if(null==r)return;let o=this.mapObjects.get(r);this.cameraObject.updateMatrixWorld(!0),this.cameraObject.updateMatrix();let s=t/this.canvasWidth*2-1,a=-e/this.canvasHeight*2+1,l=new K(s,a,0);jr.setFromCamera(l,this.cameraObject.clone());let u=jr.intersectObject(this.cameraPlane,!1)[0].point.applyMatrix4((new Ot).copy(o.object.matrix).invert());return o.mapClass.createCoordinateByXY(u.x+o.mapClass.width/2,-u.y+o.mapClass.height/2)}),"convertScreenCoordinateToMapCoordinate")),A(this,"convert3DMapPositionToCoordinate",u(((t,e)=>{var i;let n=null!=(i=null==e?void 0:e.id)?i:this.currentMap;if(null==n)return;let r=this.mapObjects.get(n),o=r.mapClass,s=new K(t.x,t.y,t.z||0);s.applyMatrix4((new Ot).copy(r.object.matrix).invert());let a=s.x+o.width/2,l=-s.y+o.height/2;return o.createCoordinateByXY(a,l)}),"convert3DMapPositionToCoordinate")),A(this,"getPositionPolygon",u((t=>{var e;let i=Oi(t),n=t;null==t.map&&(n=this.getPolygon(i));let r=null==(e=this.mapObjects.get(n.map.id))?void 0:e.objectsDictionary[i];if(r){r.geometry.computeBoundingBox();let t=r.geometry.boundingBox;return new K(t.min.x+(t.max.x-t.min.x)/2,t.min.y+(t.max.y-t.min.y)/2,t.max.z)}return null}),"getPositionPolygon")),A(this,"getPositionNode",u((t=>{let e=t;return"string"==typeof e&&(e=La(t,this.venue.nodes)),this.convertTo3DMapPosition(e)}),"getPositionNode")),A(this,"hideAllLabels",u((()=>{this.mapObjects.forEach((t=>{t.textObjects.forEach((t=>t.hide())),t.colliders.forEach((t=>{t.disable()}))}))}),"hideAllLabels")),A(this,"setBackgroundColor",u(((t,e)=>{this.renderer.setBackgroundColor(t,e)}),"setBackgroundColor")),A(this,"setSize",u(((t,e)=>{this.canvasWidth=this.rendererDomElement.clientWidth,this.canvasHeight=this.rendererDomElement.clientHeight;let i=Math.floor(t*this.resolutionScale),n=Math.floor(e*this.resolutionScale);if(!M(this,u0)&&this.rendererDomElement.width*this.rendererDomElement.height*i*n!=0){let t=this.rendererDomElement.width!==i?this.rendererDomElement.width/i:this.rendererDomElement.height/n;this.controls.setZoom(t*this.controls.getZoom())}M(this,m0).call(this,i,n)}),"setSize")),A(this,"getMapScale",u((()=>null==this.currentMap?0:this.mapObjects.get(this.currentMap).getMapScale()),"getMapScale")),A(this,"getNorth",u((()=>null==this.currentMap?0:this.mapObjects.get(this.currentMap).getNorth()),"getNorth")),A(this,"tryRendering",u(((t=un.ALL)=>{if(null!=this.renderer)if(null!=M(this,co)&&this.taskScheduler.scheduleUpdate(M(this,Bb)),t===un.ALL)this.taskScheduler.scheduleUpdate(M(this,Mf)),null!=M(this,kb)&&this.taskScheduler.scheduleUpdate(M(this,kb)),this.taskScheduler.scheduleUpdate(M(this,f0)),this.taskScheduler.scheduleUpdate(M(this,Ib)),this.taskScheduler.scheduleUpdate(M(this,Ob)),this.taskScheduler.scheduleUpdate(M(this,md)),this.taskScheduler.scheduleUpdate(M(this,Nb)),this.taskScheduler.scheduleUpdate(M(this,Rb));else if(t===un.ANIMATED)this.taskScheduler.scheduleUpdate(M(this,f0)),this.taskScheduler.scheduleUpdate(M(this,Mf)),this.taskScheduler.scheduleUpdate(M(this,Lb));else if(t===un.ALWAYS_ON_TOP)this.taskScheduler.scheduleUpdate(M(this,Mf)),this.taskScheduler.scheduleUpdate(M(this,Db));else if(t===un.TWEEN)this.taskScheduler.scheduleUpdate(M(this,Mf));else{if(t!==un.COMPOSITE)throw new Error("invalid render task passed to tryRendering");this.taskScheduler.scheduleUpdate(M(this,qb))}}),"tryRendering")),A(this,"showDebugUI",u((()=>{null==M(this,co)&&(ce(this,co,new l0),this.container.appendChild(M(this,co).element),M(this,AS).call(this,M(this,co)),this.controls.addDebugControls(M(this,co)),this.tryRendering())}),"showDebugUI")),A(this,"hideDebugUI",u((()=>{null!=M(this,co)&&(this.container.removeChild(M(this,co).element),M(this,CS).call(this,M(this,co)),this.controls.removeDebugControls(M(this,co)),M(this,co).destroy(),ce(this,co,null))}),"hideDebugUI")),A(this,"determineNewLabelSize",u((()=>{let t=this.controls.getZoom(),e=this.controls.getZoomScaledMin(),i=(t-e)/(this.controls.getZoomScaledMax()-e);this.currentScale=i}),"determineNewLabelSize")),A(this,"mapSetInProgress",Promise.resolve(void 0)),A(this,"mapSetResolved"),A(this,"setMap",u((async t=>{await this.mapSetInProgress,this.mapSetInProgress=new Promise((t=>{this.mapSetResolved=t}));let e="string"==typeof t?this.venue.getCollectionItemById("maps",t):t;if(null==e)return Promise.reject(null);let{currentScene:i}=this.sceneManager;return null==i?Promise.reject(null):"STACKED"===this.state?this.stackedMaps.mapsInJourney.includes(e)?this.stackedMaps.zoomInToMap(e).then((()=>(this.mapSetResolved(),Promise.resolve(null)))):(Le.warn("Can't set map outside of current scene"),Promise.reject(null)):this.sceneManager.transitionTo(new Zc([e],this),{activeMap:e}).then((()=>(this.mapSetResolved(),Promise.resolve(null))))}),"setMap")),A(this,"setMapWithReason",u(((t,e)=>(this.setMapReason=e,this.setMap(t))),"setMapWithReason")),A(this,"getPolygonsAtScreenCoordinate",u(((t,e,i)=>{if(null==this.currentMap)return[];let n=this.mapObjects.get(this.currentMap);if(!n||!n.hoverableMeshChildren)return[];let r=new qe(t,e),o=r.x/this.canvasWidth*2-1,s=-r.y/this.canvasHeight*2+1,a=new K(o,s,0);return jr.setFromCamera(a,this.cameraObject),M(this,Hb).call(this,n.hoverableMeshChildren,null==i?void 0:i.includeNonInteractive)}),"getPolygonsAtScreenCoordinate")),A(this,"getPolygonsAtCoordinate",u(((t,e)=>{let i=this.mapObjects.get(t.map.id);if(!i||!i.hoverableMeshChildren)return[];let n=this.convertTo3DMapPosition(t);return n.setZ(this.controls.maxZoom),jr.set(n,new K(0,0,-1)),M(this,Hb).call(this,i.hoverableMeshChildren,null==e?void 0:e.includeNonInteractive)}),"getPolygonsAtCoordinate")),A(this,"destroy",u((()=>{var t;this.flatLabels.removeAllLabels(),this.floatingLabels.removeAllLabels(),this.paths.removeAllPaths(),this.polygonInteraction.removeAllInteractivePolygons(),this.polygonColors.clearAllPolygonColors(),this.polygonHoverColors.clearAllPolygonHoverColors(),this.polygonStates.destroy(),this.markers.removeAll(),this.tooltips.removeAllTooltips(),this.smartCollisionEngine.destroy(),Up.imagesLoadingInProgress.clear(),this.controls.dispose(),this.off(2,this.tryRendering),this.off(3,M(this,gd)),this.off(4,M(this,Ub)),this.off(0,M(this,zb)),window.removeEventListener("resize",M(this,d0),!1),M(this,pd)&&M(this,pd).disconnect(),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.determineNewLabelSize),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,M(this,jb)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,M(this,Zl)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,M(this,Zl)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,M(this,vd)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,M(this,Zl)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,this.publish(15)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,M(this,vd)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,M(this,Zl)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,this.publish(15)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,M(this,Ql)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,M(this,Ql)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,M(this,yd)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,M(this,Ql)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,M(this,yd)),this.controls.dispatcher.removeEventListener(this.controls.CAMERA_EVENTS.PAN_END_EVENT.type,M(this,Ql));for(let t in this.polygonMeshesById)this.polygonMeshesById[t].destroy();this.polygonMeshesById={},this.interactivePolygons={},this._subscribers={},null==(t=this.mapManager)||t.destroy(),this.scene.destroy(),this.interactivePolygons={},M(this,p0).dispose(),this.taskScheduler.destroy(),this.renderer.destroy(),this.container.removeChild(this.rendererDomElement),null!=M(this,co)&&this.hideDebugUI(),this.renderer=void 0}),"destroy")),this.MapView=n,this.options=i,this.type="MapView3D",this.container=t,this.venue=e,window.MappedinDebug||(window.MappedinDebug={}),"test"===B.env.NODE_ENV&&(window.MappedinDebug.mapViewCoreInstance=this),ce(this,u0,!1),ce(this,c0,ah.ENABLED?wS:i.backgroundColor||"#ffffff"),ce(this,h0,null!=(r=i.backgroundAlpha)?r:1),this.colors={defaultHover2D:"#cccccc",select:"#4ca1fc",text:"#000000",path:"#ff834c",pathPulse:"#ffffff",textSelect:"#ffffff"},i.disableZoomOnMapSizeChange&&ce(this,u0,!0),this.loadOptions={mapRenderStrategy:"SINGLE_GEOMETRY",...i.loadOptions},!0===this.loadOptions.loadAsync&&"SINGLE_GEOMETRY"===this.loadOptions.mapRenderStrategy&&(Le.warn("Async loading does not work with the single geometry map render strategy. Reverting to non-async loading."),this.loadOptions.loadAsync=!1),this.taskScheduler=new gp({performance:!0}),ce(this,p0,new Gp);let g="boolean"==typeof i.multiBufferRendering&&i.multiBufferRendering;this.renderer=new r0({antialias:"boolean"!=typeof i.antialias||i.antialias,antialiasQuality:i.antialiasQuality,aoEnabled:i.aoEnabled,aoQuality:i.aoQuality,aoResolution:i.aoResolution,multiBufferRendering:g,xRayPath:"boolean"!=typeof i.xRayPath||i.xRayPath,alpha:!0,onWebGLContextCreationError:i.onWebGLContextCreationError,onWebGLContextLost:i.onWebGLContextLost,onWebGLContextRestored:()=>{i.onWebGLContextRestored&&i.onWebGLContextRestored(),M(this,p0).onWebGLContextRestored(),this.tryRendering()},onWebGLRendererError:i.onWebGLRendererError,backgroundColor:M(this,c0),backgroundAlpha:M(this,h0),core:this}),this.scene=new Oa,this.outdoorGeometryLayers=null!=(s=null==(o=i.loadOptions)?void 0:o.outdoorGeometryLayers)?s:[];let m=window.__THREE_DEVTOOLS__;"dev"===B.env.NODE_ENV&&typeof m<"u"&&(m.dispatchEvent(new CustomEvent("observe",{detail:this.scene})),m.dispatchEvent(new CustomEvent("observe",{detail:this.renderer}))),this.resolutionScale=window.devicePixelRatio,this.cameraObject=new as(kMe,this.aspect,50,1e5),this.cameraObject.renderOrder=999;let v=new ci;v.add(this.cameraObject),ce(this,qu,new ci),M(this,qu).add(v),this.billboardManager=new $8(M(this,qu)),this.scene.add(M(this,qu)),this.cameraObject.updateProjectionMatrix(),this.cameraObject.updateMatrixWorld(!0),this.focusZoomFactor=1.1,ce(this,_f,!1),ce(this,lh,[]),this.polygonMeshesById={},this.textLabelsByPolygonId={},this.labelOrientationDelay=650,this.interactivePolygons={},this.polygonHoverColorsById={};let y=new Map;this.mapObjects=y,e.maps.forEach((t=>{let e=new qT(t,this.polygonMeshesById,0,this,{taskScheduler:this.taskScheduler});this.mapObjects.set(t.id,e)})),this.referenceMap=e.getCollectionItemById("maps",e.venue.defaultMap),this.rendererDomElement=this.renderer.domElement(),this.resolution=new qe,this.isWebGL2=!!this.renderer.implementation.renderer.capabilities.isWebGL2,!0===g&&this.renderer.implementation instanceof s0&&!0===(null==(a=null==i?void 0:i.outdoorView)?void 0:a.enabled)&&this.isWebGL2&&(this.outdoorViewController=new z7(this,null==i?void 0:i.outdoorView),this.outdoorViewController.load(),this.renderer.implementation.setOutdoorViewController(this.outdoorViewController)),ce(this,qb,new xs({name:"updateRenderTargets",ordering:Na.RENDER,callback:()=>{this.renderer.render(un.COMPOSITE,null,this.scene,this.cameraObject)}})),ce(this,f0,new xs({name:"updateBillboards",ordering:Na.BEFORE_CAMERA,callback:()=>{this.billboardManager.update()}})),ce(this,Mf,new xs({name:"updateTweens",ordering:Na.BEFORE_CAMERA,callback:()=>{cK.default.update()}})),this.cameraParameters=new qe,ce(this,Ib,new xs({name:"camera",ordering:Na.CAMERA,callback:()=>{this.controls.update(),this.cameraParameters.x=this.controls.getZoom(),this.cameraParameters.y=this.controls.getTilt(),this.controls.isCameraMoving()&&this.publish(9,this.cameraParameters),this.publish(10,this.cameraParameters.x)}})),ce(this,Ob,new xs({name:"rotateObjects",ordering:Na.AFTER_CAMERA,callback:()=>{let t=this.getNorth()+this.controls.getRotation();for(let e=0,i=M(this,lh).length;e<i;++e)M(this,Vb).call(this,M(this,lh)[e],t);M(this,TS).call(this),M(this,SS).call(this),ce(this,uh,!1)}})),ce(this,md,new xs({name:"renderAll",ordering:Na.RENDER,callback:()=>{null!=this.currentMap&&this.renderer.isAvailable()&&(M(this,Ef)&&M(this,Tf).call(this),this.renderer.render(un.ALL,null,this.scene,this.cameraObject),this.controls.postRender&&this.controls.postRender())}})),ce(this,Lb,new xs({name:"renderAnimated",ordering:Na.RENDER,supersededBy:new Set([M(this,md)]),callback:()=>{null!=this.currentMap&&this.renderer.isAvailable()&&(M(this,Ef)&&M(this,Tf).call(this),this.renderer.render(un.ANIMATED,null,this.scene,this.cameraObject),this.controls.postRender&&this.controls.postRender())}})),ce(this,Db,new xs({name:"renderAlwaysOnTop",ordering:Na.RENDER,supersededBy:new Set([M(this,md)]),callback:()=>{null!=this.currentMap&&this.renderer.isAvailable()&&(M(this,Ef)&&M(this,Tf).call(this),this.renderer.render(un.ALWAYS_ON_TOP,null,this.scene,this.cameraObject),this.controls.postRender&&this.controls.postRender())}})),ce(this,Nb,new xs({name:"updateBlueDotPosition",ordering:Na.AFTER_RENDER,callback:()=>{this.publish(11)}})),ce(this,Rb,new xs({name:"updateColliders",ordering:Na.AFTER_RENDER,frameCount:32,callback:()=>{this.smartCollisionEngine.reposition()}})),ce(this,Bb,new xs({name:"updateDebugUI",ordering:Na.AFTER_ALL_UPDATES,frameCount:1,callback:()=>{var t;let e={};for(let t of this.taskScheduler.getUpdatesRunLastFrame().values())e[t.name]=t.getLastFrameTime();null==(t=M(this,co))||t.reportFramePerformance(e)}}));let x=new To(1e6,1e6),_=new ls({color:0,visible:!1});this.cameraPlane=new Ft(x,_),this.scene.add(this.cameraPlane),t.appendChild(this.rendererDomElement),window.addEventListener("resize",M(this,d0),!1),"function"==typeof ResizeObserver&&"test"!==(null==(l=B.env)?void 0:l.NODE_ENV)&&(ce(this,pd,new ResizeObserver((()=>{window.requestAnimationFrame(M(this,d0))}))),null==(h=M(this,pd))||h.observe(t)),t.classList.add("mappedin-map"),this.rendererDomElement.style.width=null!=(c=globalThis.MappedinDebug)&&c.TEST_IOS?"1080px":"100%",this.rendererDomElement.style.height=null!=(p=globalThis.MappedinDebug)&&p.TEST_IOS?"1920px":"100%",this.rendererDomElement.style.cursor="grab",this.canvasWidth=this.rendererDomElement.clientWidth,this.canvasHeight=this.rendererDomElement.clientHeight,this.rendererDomElement.style.touchAction="manipulation";let b=this.canvasWidth,E=this.canvasHeight;ce(this,Ef,!0),this.setBackgroundColor(M(this,c0),M(this,h0)),M(this,m0).call(this,Math.floor(b*this.resolutionScale),Math.floor(E*this.resolutionScale)),M(this,gd).call(this);let w=new lT(16777215,.3);w.position.set(-150,-150,350),this.scene.add(w);let S=new uT(16777215,.741);this.scene.add(S),this.controls=new dS(this.cameraObject,this.rendererDomElement,this.scene,this),this.controls.enableZoom=!0,this.smartCollisionEngine=new Z8(this),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,this.determineNewLabelSize),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.CHANGE_EVENT.type,M(this,jb)),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_START_EVENT.type,(()=>{this.publish(18),M(this,Zl).call(this)})),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_START_EVENT.type,(()=>{this.publish(20),M(this,Zl).call(this),M(this,vd).call(this)})),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.MULTI_START_EVENT.type,(()=>{this.publish(24),this.publish(15),M(this,Zl).call(this),M(this,vd).call(this)})),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.PAN_START_EVENT.type,(()=>{this.publish(22),M(this,Zl).call(this),this.publish(15)})),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ZOOM_END_EVENT.type,(()=>{this.publish(17),this.publish(18),M(this,Ql).call(this)})),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.ROTATE_END_EVENT.type,(()=>{this.publish(19),M(this,Ql).call(this),M(this,yd).call(this)})),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.MULTI_END_EVENT.type,(()=>{this.publish(25),M(this,Ql).call(this),M(this,yd).call(this)})),this.controls.dispatcher.addEventListener(this.controls.CAMERA_EVENTS.PAN_END_EVENT.type,M(this,Ql)),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_PAN_START_EVENT.type,(()=>{this.currentInteractionEvent=21})),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_ROTATE_START_EVENT.type,(()=>{this.currentInteractionEvent=19})),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_DOLLY_START_EVENT.type,(()=>{this.currentInteractionEvent=17})),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_TILT_START_EVENT.type,(()=>{this.currentInteractionEvent=23})),this.controls.dispatcher.addEventListener(this.controls.INTERACTION_EVENTS.USER_ZOOM_START_EVENT.type,(()=>{this.publish(17),this.currentInteractionEvent=17})),ce(this,Fb,Gx(e,i)),this.sceneManager=null!=(null==(d=null==i?void 0:i.dynamicFocus)?void 0:d.baseMap)?new zx(this,null==(f=i.dynamicFocus)?void 0:f.baseMap):new ND(this,new Zc([M(this,Fb)],this)),this.on(2,this.tryRendering),this.on(3,M(this,gd)),this.on(4,M(this,Ub)),this.on(1,(t=>{this.tryRendering(),this.renderer.preloadTexture(t)})),this.on(0,(()=>{M(this,zb).call(this),"function"==typeof this.options.onFirstMapLoaded&&this.options.onFirstMapLoaded(e)})),e.imageBinaries&&L9(new Kg(e.imageBinaries)),"function"==typeof i.onDataLoaded&&i.onDataLoaded(e),this.setPadding(),this.eventSystem=new k8(this),this.floatingLabels=new AR(this),this.flatLabels=new DR(this),this.paths=new pR(this),this.polygonColors=new qR(this),this.polygonHoverColors=new zR(this),this.polygonInteraction=new HR(this),this.polygonStates=new QR(this),this.polygonImages=new e8(this),this.markers=new CN(this),this.tooltips=new YR(this),this.threeDMarkers=new R2(this),this.blueDot=new s8(this),this.camera=new P8(this),this.stackedMaps=new r7(this),this.tileManager=new ah(this),this.watermark=new Yl(this),this.layerController=new gS(this),this.exportController=new a0(this)}get aspect(){return this.canvasWidth/this.canvasHeight}get visibleMapsInCurrentScene(){return this.visibleMapObjectsInCurrentScene.map((t=>t.mapClass))}get visibleMapObjectsInCurrentScene(){return Array.from(this.sceneManager.currentScene.mapObjects.values()).filter((t=>t.visible)).map((t=>t))}get visibleLayersInCurrentScene(){let t={};for(let e of this.visibleMapsInCurrentScene){let i=this.layerController.getVisibleLayersForLoadedMap(e);t[e.id]=i}return t}get currentMap(){var t,e;return null!=(e=null==(t=this.sceneManager)?void 0:t.currentMap)&&e.id?this.sceneManager.currentMap.id:(Le.error("No maps loaded."),null)}async setState(t){if(t!==this.state){if("explore"===t)this.publish(14,!1),this.state=t;else if("STACKED"===t)this.publish(14,!1),this.state=t;else{if("follow"!==t)throw new Error("Unsupported State");this.publish(14,!0),this.state=t}return this.publish(12,{state:this.state}),Promise.resolve()}}getNearestNodeByScreenCoordinate(t,e,i){let n="string"==typeof i?i:(null==i?void 0:i.id)||this.currentMap,r=this.mapObjects.get(n);if(null==r)throw new Error("getNodeByScreenCoordinates failed: map not found");this.cameraObject.updateMatrixWorld(!0),this.cameraObject.updateMatrix();let o=t/this.canvasWidth*2-1,s=-e/this.canvasHeight*2+1,a=new K(o,s,0);jr.setFromCamera(a,this.cameraObject.clone());let l=jr.intersectObject(this.cameraPlane,!1)[0].point.applyMatrix4(r.object.matrix);return this.venue._mapsById[n].createCoordinateByXY(l.x+r.mapClass.width/2,-l.y+r.mapClass.height/2).nearestNode}};pd=new WeakMap,u0=new WeakMap,c0=new WeakMap,h0=new WeakMap,_f=new WeakMap,lh=new WeakMap,wf=new WeakMap,co=new WeakMap,MS=new WeakMap,dd=new WeakMap,f0=new WeakMap,Mf=new WeakMap,Ib=new WeakMap,Ob=new WeakMap,md=new WeakMap,Lb=new WeakMap,Db=new WeakMap,Nb=new WeakMap,Rb=new WeakMap,Bb=new WeakMap,kb=new WeakMap,qb=new WeakMap,Ef=new WeakMap,Fb=new WeakMap,uh=new WeakMap,qu=new WeakMap,p0=new WeakMap,Ub=new WeakMap,zb=new WeakMap,Gb=new WeakMap,d0=new WeakMap,gd=new WeakMap,Vb=new WeakMap,vd=new WeakMap,yd=new WeakMap,Zl=new WeakMap,Ql=new WeakMap,ES=new WeakMap,m0=new WeakMap,Tf=new WeakMap,TS=new WeakMap,SS=new WeakMap,AS=new WeakMap,CS=new WeakMap,Hb=new WeakMap,jb=new WeakMap,u(O9,"Core");var I9=O9,hK=I9;E();var Fu,N9=class{constructor(t){te(this,Fu,void 0),ce(this,Fu,t)}draw(t,e){var i,n,r,o;let s=M(this,Fu).venue.venue.slug;return ht.addPendingEvent(new hv({animate_drawing:null==(i=null==e?void 0:e.pathOptions)?void 0:i.animateDrawing,display_arrows_on_path:null==(n=null==e?void 0:e.pathOptions)?void 0:n.displayArrowsOnPath,flatten_path:null==(r=null==e?void 0:e.pathOptions)?void 0:r.flattenPath,show_pulse:null==(o=null==e?void 0:e.pathOptions)?void 0:o.showPulse,venue:s})),Ko.create(t,e,M(this,Fu))}setStep(t){if(null!=Ko.instance){let e=M(this,Fu).venue.venue.slug;ht.addPendingEvent(new fv({venue:e})),Ko.instance.setStep(t)}}setStepByPath(t){null!=Ko.instance&&Ko.instance.setStepByPath(t)}clear(){if(M(this,Fu).stackedMaps.enabled&&M(this,Fu).stackedMaps.disable(),null!=Ko.instance){let t=M(this,Fu).venue.venue.slug;ht.addPendingEvent(new cv({venue:t})),Ko.instance.destroy()}}};Fu=new WeakMap,u(N9,"Journey");var D9=N9,fK=D9;E();var va,R9=class{constructor(t){te(this,va,void 0),ce(this,va,t)}labelAllLocations(t){var e,i;let n=M(this,va).core.venue.venue.slug;ht.addPendingEvent(new J0({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,venue:n})),M(this,va).labelAllLocations(t)}add(t,e,i){let n=M(this,va).core.venue.venue.slug;ht.addPendingEvent(new K0({venue:n})),M(this,va).labelPolygon(t,e,i)}remove(t){let e=M(this,va).core.venue.venue.slug;ht.addPendingEvent(new $0({venue:e})),M(this,va).removeLabel(t)}removeAll(){M(this,va).removeAllLabels()}setAppearance(t,e){let i=M(this,va).core.venue.venue.slug;ht.addPendingEvent(new ev({venue:i})),M(this,va).setAppearance(t,e)}setHoverColorForAll(t){M(this,va).setHoverColorForAll(t)}};va=new WeakMap,u(R9,"FlatLabels");var PS=R9;E();var Hs,B9=class{constructor(t){te(this,Hs,void 0),ce(this,Hs,t)}labelAllLocations(t){var e,i,n,r;let o=M(this,Hs).core.venue.venue.slug;return ht.addPendingEvent(new nv({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,with_icon:!(null==(r=null==(n=null==t?void 0:t.appearance)?void 0:n.marker)||!r.icon)||void 0,venue:o})),M(this,Hs).labelAllLocations(t)}add(t,e,i){var n,r;let o=M(this,Hs).core.venue.venue.slug;return ht.addPendingEvent(new tv({with_icon:!(null==(r=null==(n=null==i?void 0:i.appearance)?void 0:n.marker)||!r.icon)||void 0,venue:o})),M(this,Hs).addLabel(t,e,i)}setAppearance(t,e){let i=M(this,Hs).core.venue.venue.slug;ht.addPendingEvent(new sv({venue:i})),M(this,Hs).setAppearance(t,e)}remove(t){let e=M(this,Hs).core.venue.venue.slug;ht.addPendingEvent(new iv({venue:e})),M(this,Hs).removeLabel(t,!1)}removeAll(){M(this,Hs).removeAllLabels()}setPriority(t,e){let i=M(this,Hs).core.venue.venue.slug;ht.addPendingEvent(new ov({venue:i})),M(this,Hs).setPriority(t,e)}resetPriority(t){let e=M(this,Hs).core.venue.venue.slug;ht.addPendingEvent(new rv({venue:e})),M(this,Hs).resetPriority(t)}};Hs=new WeakMap,u(B9,"FloatingLabels");var IS=B9;E();var Uu,k9=class{constructor(t){te(this,Uu,void 0),ce(this,Uu,t)}get markers(){return Array.from(M(this,Uu).markersMap.entries()).map((t=>t[1].marker))}add(t,e,i){return M(this,Uu).add(t,e,i)}setPosition(t,e){M(this,Uu).setPosition(t,e)}animate(t,e,i){return M(this,Uu).animate(t,e,i)}remove(t){M(this,Uu).remove(t)}removeAll(){M(this,Uu).removeAll()}};Uu=new WeakMap,u(k9,"Markers");var OS=k9;E();var Sf,q9=class{constructor(t){te(this,Sf,void 0),ce(this,Sf,t)}get paths(){let t=[];return M(this,Sf).pathsById.forEach((({path:e})=>{t.push(e)})),t}add(t,e){return M(this,Sf).drawPath(t,e)}remove(t){M(this,Sf).removePath(null==t?void 0:t.id)}removeAll(){M(this,Sf).removeAllPaths()}};Sf=new WeakMap,u(q9,"Paths");var LS=q9;E();var pl,F9=class{constructor(t){te(this,pl,void 0),A(this,"on",u(((...t)=>{let e=M(this,pl).core.venue.venue.slug;return ht.addPendingEvent(new z0({venue:e})),M(this,pl).on(...t)}),"on")),A(this,"off",u(((...t)=>{let e=M(this,pl).core.venue.venue.slug;return ht.addPendingEvent(new U0({venue:e})),M(this,pl).off(...t)}),"off")),ce(this,pl,t)}enable(t){let e=M(this,pl).core.venue.venue.slug;return ht.addPendingEvent(new F0({allow_implicit_floor_level:null==t?void 0:t.allowImplicitFloorLevel,use_rotation_mode:null==t?void 0:t.useRotationMode,smoothing:null==t?void 0:t.smoothing,show_bearing:null==t?void 0:t.showBearing,venue:e})),M(this,pl).enable(t)}disable(){let t=M(this,pl).core.venue.venue.slug;ht.addPendingEvent(new q0({venue:t})),M(this,pl).disable()}};pl=new WeakMap,u(F9,"BlueDot");var DS=F9;E();var Gn,U9=class{constructor(t){te(this,Gn,void 0),A(this,"on",u(((...t)=>M(this,Gn).on(...t)),"on")),A(this,"off",u(((...t)=>M(this,Gn).off(...t)),"off")),A(this,"interactions",{set:t=>M(this,Gn).interactions.set(t),enable:()=>{let t=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new Y0({venue:t})),M(this,Gn).interactions.enable()},disable:()=>{let t=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new W0({venue:t})),M(this,Gn).interactions.disable()}}),ce(this,Gn,t)}get currentAnimation(){return M(this,Gn).currentAnimation}get zoom(){return M(this,Gn).zoom}get rotation(){return M(this,Gn).rotation}get tilt(){return M(this,Gn).tilt}get minZoom(){return M(this,Gn).minZoom}set minZoom(t){M(this,Gn).minZoom=t}get maxZoom(){return M(this,Gn).maxZoom}set maxZoom(t){M(this,Gn).maxZoom=t}get maxTilt(){return M(this,Gn).maxTilt}set maxTilt(t){M(this,Gn).maxTilt=t}get position(){return M(this,Gn).position}setSafeAreaInsets(t){let e=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new Z0({venue:e})),M(this,Gn).setSafeAreaInsets(t)}getSafeAreaInsets(){let t=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new j0({venue:t})),M(this,Gn).getSafeAreaInsets()}async focusOn(t,e){let i=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new H0({venue:i})),M(this,Gn).focusOn(t,e)}set(t){let e=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new X0({venue:e})),M(this,Gn).set(t)}convertZoomLevelToAltitude(t){return M(this,Gn).convertZoomLevelToAltitude(t)}convertAltitudeToZoomLevel(t){return M(this,Gn).convertAltitudeToZoomLevel(t)}async animate(t,e){let i=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new G0({venue:i})),M(this,Gn).animate(t,e)}async translate(t,e,i){let n=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new Q0({venue:n})),M(this,Gn).translate(t,e,i)}cancelAnimation(){let t=M(this,Gn).core.venue.venue.slug;return ht.addPendingEvent(new V0({venue:t})),M(this,Gn).cancelAnimation()}};Gn=new WeakMap,u(U9,"Camera");var NS=U9;E();var Yb,z9=class{constructor(t){te(this,Yb,void 0),ce(this,Yb,t)}async getCurrentSceneGLTF(t){return M(this,Yb).getCurrentSceneGLTF(t)}};Yb=new WeakMap,u(z9,"Exporter");var RS=z9;E();var zu,G9=class{constructor(t){te(this,zu,void 0),A(this,"enable",u((t=>M(this,zu).enable(t)),"enable")),A(this,"disable",u((()=>M(this,zu).disable()),"disable")),A(this,"showOverview",u((async()=>M(this,zu).showOverview()),"showOverview")),A(this,"scrollToMap",u((t=>M(this,zu).scrollToMap(t)),"scrollToMap")),A(this,"zoomInToMap",u(((t,e)=>M(this,zu).zoomInToMap(t,e)),"zoomInToMap")),ce(this,zu,t)}get state(){return M(this,zu).currentState}};zu=new WeakMap,u(G9,"StackedMaps");var BS=G9;E();var dl,H9=class{constructor(t){te(this,dl,void 0),t&&ce(this,dl,t)}setStyle(t){M(this,dl)&&M(this,dl).setStyle(t)}setAttributionPosition(t){M(this,dl)&&M(this,dl).setAttributionPosition(t)}show(){M(this,dl)&&M(this,dl).show()}hide(){M(this,dl)&&M(this,dl).hide()}};dl=new WeakMap,u(H9,"OutdoorView");var V9=H9,pK=V9;E();var ch,j9=class{constructor(t){te(this,ch,void 0),t&&ce(this,ch,t)}async getAllLayersForMap(t){var e,i;return M(this,ch)?null!=(i=null==(e=M(this,ch))?void 0:e.getAllLayersForMap(t))?i:[]:{}}showLayers(t){M(this,ch)&&M(this,ch).showLayers(t)}addGeoJSONLayer(t,e){var i;return null==(i=M(this,ch))?void 0:i.addGeoJSONLayer(t,e)}};ch=new WeakMap,u(j9,"Layers");var kS=j9;E();var Kl,W9=class{constructor(t){te(this,Kl,void 0),ce(this,Kl,t)}set setMapOnUserInteraction(t){M(this,Kl).mapShouldSetOnUserInteraction=t}get setMapOnUserInteraction(){return M(this,Kl).mapShouldSetOnUserInteraction}update(){M(this,Kl).determineTargetMap()}setDefaultMapForMapGroup(t,e){!1===M(this,Kl).mapShouldSetOnUserInteraction?Le.warn("Dynamic Focus is disabled. Please enable it by setting setMapOnUserInteraction to true"):M(this,Kl).setDefaultMapForMapGroup(t,e)}resetDefaultMapForMapGroup(t){!1===M(this,Kl).mapShouldSetOnUserInteraction?Le.warn("Dynamic Focus is disabled. Please enable it by setting setMapOnUserInteraction to true"):M(this,Kl).resetDefaultMapForMapGroup(t)}};Kl=new WeakMap,u(W9,"DynamicFocus");var nt,qS=W9,Y9=class extends Go{constructor(t,e,i){super(),te(this,nt,void 0),A(this,"Journey"),A(this,"Camera"),A(this,"FlatLabels"),A(this,"Exporter"),A(this,"FloatingLabels"),A(this,"Markers"),A(this,"Paths"),A(this,"BlueDot"),A(this,"options",{}),A(this,"StackedMaps"),A(this,"OutdoorView"),A(this,"Layers"),A(this,"DynamicFocus"),A(this,"on",u(((...t)=>{super.on(...t)}),"on")),A(this,"off",u(((...t)=>{super.off(...t)}),"off")),this.options=i||{},ce(this,nt,new hK(t,e,i,this)),M(this,nt).on(16,(({position:t,polygons:e,maps:i,floatingLabels:n,nearBlueDot:r,paths:o,markers:s,tooltips:a})=>{this.publish("CLICK",{position:t,polygons:e,maps:i,floatingLabels:n,markers:s,tooltips:a,nearBlueDot:r,paths:o})})),M(this,nt).on(7,(()=>{this.publish("MAP_CHANGED",this.currentMap),this.publish("MAP_CHANGED_WITH_REASON",{map:this.currentMap,reason:M(this,nt).setMapReason}),M(this,nt).setMapReason=void 0})),M(this,nt).on(5,(()=>{this.publish("MAP_CHANGED",this.currentMap)})),M(this,nt).on(31,(()=>{this.publish("OUTDOOR_VIEW_LOADED")})),M(this,nt).on(12,(({state:t})=>{this.publish("STATE_CHANGE",t)})),M(this,nt).onPolygonClicked=t=>{this.publish("POLYGON_CLICKED",e.polygons.find((e=>e.id===t)))},M(this,nt).onNothingClicked=()=>{this.publish("NOTHING_CLICKED")},this.Journey=new fK(M(this,nt)),this.BlueDot=new DS(M(this,nt).blueDot),this.FlatLabels=new PS(M(this,nt).flatLabels),this.FloatingLabels=new IS(M(this,nt).floatingLabels),this.Markers=new OS(M(this,nt).markers),this.Paths=new LS(M(this,nt).paths),this.Camera=new NS(M(this,nt).camera),this.StackedMaps=new BS(M(this,nt).stackedMaps),this.OutdoorView=new pK(M(this,nt).outdoorViewController),this.Exporter=new RS(M(this,nt).exportController),this.Layers=new kS(M(this,nt).layerController),M(this,nt).sceneManager instanceof zx&&(this.DynamicFocus=new qS(M(this,nt).sceneManager))}labelAllLocations(t){let e=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Nv({venue:e})),null!=t&&t.flatLabels?this.FlatLabels.labelAllLocations(t):this.FloatingLabels.labelAllLocations(t),[]}getNearestNodeByScreenCoordinates(t,e,i){let n=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Ov({venue:n})),M(this,nt).getNearestNodeByScreenCoordinate(t,e,i)}async setState(t){let e=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Wv({venue:e})),M(this,nt).setState(t)}get state(){return M(this,nt).state}get venue(){return M(this,nt).venue}get container(){return M(this,nt).container}get currentMap(){return M(this,nt).venue.maps.find((t=>M(this,nt).currentMap===t.id))}removeAllInteractivePolygons(){let t=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Rv({venue:t})),M(this,nt).polygonInteraction.removeAllInteractivePolygons()}setMap(t){let e=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Hv({venue:e})),M(this,nt).setMap(t)}setPolygonColor(t,e){let i=M(this,nt).venue.venue.slug;ht.addPendingEvent(new jv({venue:i})),M(this,nt).polygonColors.setPolygonColor(t,e)}clearPolygonColor(t){let e=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Mv({venue:e})),M(this,nt).polygonColors.clearPolygonColor(t)}clearAllPolygonColors(){M(this,nt).polygonColors.clearAllPolygonColors()}setPolygonOutlineColor(t){M(this,nt).polygonColors.setPolygonOutlineColor(t)}addPolygonOutline(t){M(this,nt).polygonColors.addPolygonOutline(t)}removePolygonOutline(t){M(this,nt).polygonColors.removePolygonOutline(t)}removeAllPolygonOutlines(){M(this,nt).polygonColors.removeAllPolygonOutlines()}addInteractivePolygon(t){let e=M(this,nt).venue.venue.slug;ht.addPendingEvent(new _v({venue:e})),M(this,nt).polygonInteraction.addInteractivePolygon(t)}addInteractivePolygonsForAllLocations(t){var e,i;let n=M(this,nt).venue.venue.slug;ht.addPendingEvent(new wv({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,venue:n})),M(this,nt).polygonInteraction.addInteractivePolygonsForAllLocations(t)}removeInteractivePolygon(t){let e=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Fv({venue:e})),M(this,nt).polygonInteraction.removeInteractivePolygon(t)}createMarker(t,e,i){return this.Markers.add(t,e,i)}removeMarker(t){this.Markers.remove(t)}removeAllMarkers(){let t=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Bv({venue:t})),this.Markers.removeAll()}removeAllTooltips(){let t=M(this,nt).venue.venue.slug;ht.addPendingEvent(new qv({venue:t})),M(this,nt).tooltips.removeAllTooltips()}createTooltip(t,e,i){let n=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Tv({venue:n})),M(this,nt).tooltips.createTooltip(t,e,i)}createCustomTooltip(t,e,i,n){let r=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Ev({venue:r})),M(this,nt).tooltips.createCustomTooltip(t,e,i,n)}removeTooltip(t){let e=M(this,nt).venue.venue.slug;ht.addPendingEvent(new zv({venue:e})),M(this,nt).tooltips.removeTooltip(t)}enableImageFlippingForAllLocations(t){var e,i;let n=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Pv({exclude_type:!(null==(e=null==t?void 0:t.excludeTypes)||!e.length)||void 0,include_locations:!(null==(i=null==t?void 0:t.locations)||!i.length)||void 0,venue:n})),M(this,nt).polygonImages.enableImageFlippingForAllLocations(t)}enableImageFlippingForPolygon(t){let e=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Iv({venue:e})),M(this,nt).polygonImages.enableImageFlippingForPolygon(t)}disableImageFlippingForAllPolygons(){let t=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Av({venue:t})),M(this,nt).polygonImages.disableImageFlippingForAllPolygons()}drawPath(t,e){let i=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Cv({...void 0!==(null==e?void 0:e.animateDrawing)&&{animate_drawing:e.animateDrawing},...void 0!==(null==e?void 0:e.displayArrowsOnPath)&&{display_arrows_on_path:e.displayArrowsOnPath},...void 0!==(null==e?void 0:e.flattenPath)&&{flatten_path:e.flattenPath},...void 0!==(null==e?void 0:e.showPulse)&&{show_pulse:e.showPulse},venue:i})),M(this,nt).paths.drawPath(t,e).id}removePath(t){let e=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Uv({venue:e})),M(this,nt).paths.removePath(t)}removeAllPaths(){let t=M(this,nt).venue.venue.slug;ht.addPendingEvent(new kv({venue:t})),M(this,nt).paths.removeAllPaths()}setBackgroundColor(t,e){let i=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Gv({venue:i})),M(this,nt).setBackgroundColor(t,e)}setHoverColor(t){let e=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Vv({venue:e})),M(this,nt).eventSystem.setHoverColor(t)}setPolygonHoverColor(t,e){M(this,nt).polygonHoverColors.setPolygonHoverColor(t,e)}clearPolygonHoverColor(t){M(this,nt).polygonHoverColors.clearPolygonHoverColor(t)}clearAllPolygonHoverColors(){M(this,nt).polygonHoverColors.clearAllPolygonHoverColors()}tryRendering(t){}getPrimaryLocationForPolygon(t){let e=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Dv({venue:e})),Bh(t,this.venue)}getPolygonsAtCoordinate(t,e){let i=M(this,nt).venue.venue.slug;return ht.addPendingEvent(new Lv({venue:i})),M(this,nt).getPolygonsAtCoordinate(t,e)}getPolygonsAtScreenCoordinate(t,e,i){return M(this,nt).getPolygonsAtScreenCoordinate(t,e,i)}getMappedinCoordinateAtScreenCoordinate(t,e,i){return M(this,nt).convertScreenCoordinateToMapCoordinate(t,e,i)}setAmbientOcclusionSettings(t){M(this,nt).renderer.implementation.effectComposer.setAmbientOcclusionConfiguration(t),M(this,nt).tryRendering()}setAntialiasSettings(t){M(this,nt).renderer.implementation.effectComposer.setAntialiasConfiguration(t),M(this,nt).tryRendering()}destroy(){let t=M(this,nt).venue.venue.slug;ht.addPendingEvent(new Sv({venue:t})),M(this,nt).destroy()}};nt=new WeakMap,u(Y9,"MapView");var Wb=Y9;E();var Q9=class{constructor(t="en-US",e=256,i,n){A(this,"lang"),A(this,"apiKey"),A(this,"token"),A(this,"tileSize"),A(this,"tilesetId","microsoft.base.road"),this.lang=t,this.tileSize=e,this.apiKey=i,this.token=n}makeURL(t,e,i){return"https://atlas.microsoft.com/map/tile?api-version=2.0&tilesetId=".concat(this.tilesetId,"&zoom=").concat(i,"&x=").concat(t,"&y=").concat(e,"&tileSize=").concat(this.tileSize,"&language=").concat(this.lang,"&view=Auto").concat(this.apiKey?"&subscription-key=".concat(this.apiKey):"")}fetchAttribution(t,e){return fetch("https://atlas.microsoft.com/map/attribution?api-version=2022-08-01&tilesetId=".concat(this.tilesetId,"&zoom=").concat(t,"&bounds=").concat(e[0]+","+e[1]+","+e[2]+","+e[3]).concat(this.apiKey?"&subscription-key=".concat(this.apiKey):""),{headers:{Authorization:"jwt-sas ".concat(this.token)}})}fetchTile(t,e,i,n){return fetch(this.makeURL(t,e,i),{signal:n,headers:{Authorization:"jwt-sas ".concat(this.token)}})}};u(Q9,"AzureOutdoorContextProvider");var X9=Q9,K9=class{makeURL(t,e,i,n){return null==n?"https://tile.openstreetmap.org/".concat(i,"/").concat(t,"/").concat(e,".png"):"https://".concat(n,"/").concat(i,"/").concat(t,"/").concat(e,".png")}async fetchTile(t,e,i,n,r){return fetch(this.makeURL(t,e,i,r),{signal:n})}};u(K9,"OpenStreetMapOutdoorContext");var Z9=K9;function WEt(t,e,i){return new Promise(((n,r)=>{var o,s,a;try{let{slug:r}=e.venue,l=new Wb(t,e,{...i,onFirstMapLoaded(){ht.sendEventNow(new Yv({venue:r})),n(l)}});Qa.create({...null==(o=null==l?void 0:l.venue)?void 0:o.options,testMode:!(null!=(a=null==(s=null==l?void 0:l.venue)?void 0:s.options)&&a.emitAnalyticsEvents)}).mapViewLoaded("3d",!1,-1,""),ht.addPendingEvent(new uv({venue:r}))}catch(t){r(t)}}))}u(WEt,"showVenue");var L9=Dg.setAssetManager.bind(Dg);function $Et(t){ah.ENABLED=!0,null!=t&&(ah.OPTIONS=t)}function eTt(t){Yl.ENABLED=!0,null!=t&&(Yl.OPTIONS={...Yl.OPTIONS,...t})}u($Et,"__enableTileManager"),u(eTt,"__showWatermark");export{Jf as ACTION_TYPE,ua as ANIMATION_TWEENS,Gc as AssetManager,X9 as AzureOutdoorContextProvider,g1 as BEARING_TYPE,FT as BundleAssetManager,Jy as CAMERA_EASING_MODE,Ec as COLLISION_RANKING_TIERS,Qa as CustomerAnalytics,lE as E_BLUEDOT_EVENT,oE as E_BLUEDOT_MARKER_STATE,zm as E_BLUEDOT_STATE,sE as E_BLUEDOT_STATE_REASON,uE as E_CAMERA_DIRECTION,Ky as E_CAMERA_EVENT,$y as E_MAP_CHANGED_REASON,aE as E_SDK_EVENT,KS as E_SDK_LOG_LEVEL,a6 as GEOLOCATION_STATUS,xc as MAP_RENDER_MODE,Qy as MARKER_ANCHOR,sa as Mappedin,yc as MappedinCategory,Vo as MappedinCollectionType,aa as MappedinCoordinate,ia as MappedinDestinationSet,tc as MappedinDirections,bp as MappedinEvent,Ja as MappedinLocation,Em as MappedinLocationState,Fh as MappedinMap,_p as MappedinMapGroup,ja as MappedinNavigatable,Fs as MappedinNode,$a as MappedinPolygon,xp as MappedinRankings,bc as MappedinVenue,yp as MappedinVortex,K1 as OfflineSearch,Z9 as OpenStreetMapOutdoorContext,q3 as PositionUpdater,l6 as SAFE_AREA_INSET_TYPE,Sp as STACKED_MAPS_STATE,Gm as STATE,$Et as __enableTileManager,eTt as __showWatermark,ohe as downloadBundle,mH as downloadVenueBundleMVF,fH as getVenue,pH as getVenueBundle,dH as getVenueBundleURL,rhe as getVenueMVF,she as getVenueMaker,hhe as hydrateVenue,cE as labelThemes,L9 as setAssetManager,the as setFetchFn,yB as setLoggerLevel,WEt as showVenue};